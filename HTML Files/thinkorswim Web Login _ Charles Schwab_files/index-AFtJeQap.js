function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var Y2=Object.defineProperty;var q2=(e,t,s)=>t in e?Y2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var R=(e,t,s)=>(q2(e,typeof t!="symbol"?t+"":t,s),s);import{R as j,c as se,i as co,u as Fe,l as I,m as et,j as a,a as Nr,b as Nt,k as Qr,t as ee,d as Ze,r as on,s as _,e as Xe,p as Ie,n as $,f as Or,O as Yt,P as sa,M as ke,g as x,h as Ln,o as ZT,q as K2,v as Xr,w as yu,H as A,x as sx,C as Ss,U as JT,W as z2,y as X2,F as Q2,z as e1,A as Z2,B as yp,D as Ja,E as J2,T as e5,G as t5,I as s5,J as Lb,K as B,L as n5,N as r5,Q as Ms,S as is,V as fs,X as o5,Y as t1,Z as s1,_ as n1,$ as r1,a0 as o1,a1,a2 as i1,a3 as nx,a4 as rx,a5 as l1,a6 as a5,a7 as i5,a8 as al,a9 as Tm,aa as c1,ab as l5,ac as c5,ad as Et,ae as Tc,af as d5,ag as ai,ah as _b,ai as u5,aj as d1,ak as h5,al as p5,am as m5,an as g5,ao as Qg,ap as S5,aq as ym,ar as Na,as as xa,at as ox,au as Qi,av as Nb,aw as Pb,ax as zl,ay as cs,az as xn,aA as Xd,aB as kb,aC as f5,aD as T5,aE as y5,aF as C5,aG as ax,aH as Cm,aI as gl,aJ as b5,aK as E5,aL as A5,aM as Cu,aN as v5,aO as yc,aP as I5,aQ as Cp,aR as uh,aS as x5,aT as ix,aU as w5,aV as O5,aW as R5,aX as D5,aY as L5,aZ as _5,a_ as N5,a$ as P5,b0 as k5,b1 as M5,b2 as Qd,b3 as Zd,b4 as Sl,b5 as ii,b6 as fl,b7 as wa,b8 as Cc,b9 as $5,ba as j5,bb as B5,bc as bm,bd as u1,be as F5,bf as h1,bg as p1,bh as H5,bi as No,bj as bc,bk as bu,bl as lx,bm as U5,bn as V5,bo as W5,bp as Mb,bq as G5,br as Y5,bs as q5,bt as K5,bu as z5,bv as X5,bw as Q5,bx as Z5,by as eo,bz as J5,bA as e3,bB as t3,bC as s3,bD as n3,bE as r3,bF as Ni,bG as o3}from"./vendor-DRQX2kLY.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();window.global||(window.global=window);const cx=e=>{e.key==="Tab"&&(document.body.classList.add("keyboard-user"),a3(),window.removeEventListener("keydown",cx))},dx=e=>{(e.screenX&&e.screenX>0||e.screenY&&e.screenY>0||e.clientX&&e.clientX>0||e.clientY&&e.clientY>0)&&document.body.classList.contains("keyboard-user")&&(document.body.classList.remove("keyboard-user"),ux(),window.removeEventListener("click",dx))},ux=()=>{window.addEventListener("keydown",cx)},a3=()=>{window.addEventListener("click",dx)};var ge=(e=>(e.Positions="Positions",e.Watchlist="Watchlist",e.Trade="Trade",e.Charts="Charts",e.Scans="Scans",e.Transactions="Transactions",e))(ge||{});const Xl=e=>e.charAt(0).toUpperCase()+e.substring(1),i3=e=>(e.match(/[A-Za-z][a-z]*/g)||[]).map(Xl).join(" "),l3=e=>e.replace(/\b[a-z]/g,t=>t.toUpperCase()),c3=e=>{if(e==="")return e;const t=Array.from(e);return l3(t[0].toUpperCase()+e.substring(1).toLowerCase())},d3=e=>e===""?e:e.replaceAll(" ","").toLowerCase(),u3=e=>e.replace(/[(Γ|ν|β|Θ|Δ)]/g,"");var f=(e=>(e.AcceptDisclosures="AcceptDisclosures",e.AcceptDisclosuresError="AcceptDisclosuresError",e.AcceptDisclosuresSuccess="AcceptDisclosuresSuccess",e.AccountCdiReceived="AccountCdiReceived",e.AccountCdiSelected="AccountCdiSelected",e.AccountSelected="AccountSelected",e.AccountSelectionCleared="AccountSelectionCleared",e.AccountsReceived="AccountsReceived",e.AccountStatementReceived="AccountStatementReceived",e.AccountSummaryDividerPressed="AccountSummaryDividerPressed",e.ActiveAlertsReceived="ActiveAlertsReceived",e.AddChartExpansion="AddChartExpansion",e.AddCharts="AddCharts",e.AddContingentOrder="AddContingentOrder",e.AddDynamicStudy="AddDynamicStudy",e.AddLiveSupportMessage="AddLiveSupportMessage",e.AddLiveSupportMessages="AddLiveSupportMessages",e.AddOrderRule="AddOrderRule",e.AddSpreadOptionLeg="AddSpreadOptionLeg",e.AddStudy="AddStudy",e.AdjustCash="AdjustCash",e.AdjustCashAccountSelected="AdjustCashAccountSelected",e.AdjustCashClose="AdjustCashClose",e.AdjustCashFailure="AdjustCashFailure",e.AdjustCashSubmit="AdjustCashSubmit",e.AdjustCashSuccess="AdjustCashSuccess",e.AdvancedOrderSelected="AdvancedOrderSelected",e.AlertNotificationReceived="AlertNotificationReceived",e.BuyInstrument="BuyInstrument",e.BuyOption="BuyOption",e.BuyOptionLeg="BuyOptionLeg",e.BuyStrategy="BuyStrategy",e.CalendarEventsReceived="CalendarEventsReceived",e.CancelAlert="CancelAlert",e.CancelAlertSuccess="CancelAlertSuccess",e.CanceledAlertsReceived="CanceledAlertsReceived",e.CancelOrder="CancelOrder",e.CancelOrdersFromPosition="CancelOrdersFromPosition",e.CenteredOnFieldChange="CenteredOnFieldChange",e.CenteredOnOptionValueSet="CenteredOnOptionValueSet",e.ChartSymbolsSelected="ChartSymbolsSelected",e.ChangeChartSelectedSymbol="ChangeChartSelectedSymbol",e.ChangeChartSymbol="ChangeChartSymbol",e.ChangeContingency="ChangeContingency",e.ChangeCrossingType="ChangeCrossingType",e.ChangePositionsSubscriptionType="ChangePositionsSubscriptionType",e.ChangeSelectedSymbol="ChangeSelectedSymbol",e.ChartAggregationSelected="ChartAggregationSelected",e.ChartRangeSelected="ChartRangeSelected",e.ChartReceived="ChartReceived",e.CheckAllTrades="CheckAllTrades",e.ClearAdjustCashError="ClearAdjustCashError",e.ClearAlertNotification="ClearAlertNotification",e.ClearScanFilters="ClearScanFilters",e.ClearDeleteNotification="ClearDeleteNotification",e.ClearDrawingMode="ClearDrawingMode",e.ClearDrawingSetError="ClearDrawingSetError",e.ClearStrategy="ClearStrategy",e.CloseLiveSupportChat="CloseLiveSupportChat",e.ClearLiveSupportMessages="ClearLiveSupportMessages",e.ClosePositions="ClosePositions",e.ColumnSortClicked="ColumnSortClicked",e.CompletedTradeChecked="CompletedTradeChecked",e.CompletedTradeUnchecked="CompletedTradeUnchecked",e.ConfirmOrder="ConfirmOrder",e.Connect="Connect",e.Connected="Connected",e.CreateAlert="CreateAlert",e.CreateAlertReceived="CreateAlertReceived",e.CreateDraftTrade="CreateDraftTrade",e.CreateDrawing="CreateDrawing",e.CreateDrawingSet="CreateDrawingSet",e.CreateDrawingSetError="CreateDrawingSetError",e.CreateDrawingToolClicked="CreateDrawingToolClicked",e.DeleteDraftLeg="DeleteDraftLeg",e.DeleteDraftOrder="DeleteDraftOrder",e.DeleteDraftOrderNotification="DeleteDraftOrderNotification",e.DeleteDrawing="DeletedDrawing",e.DeleteDrawingSet="DeleteDrawingSet",e.DeleteStudy="DeleteStudy",e.DeleteTradeTicket="DeleteTradeTicket",e.DisableAdjustCashSubmit="DisableAdjustCashSubmit",e.DisableSso="DisableSso",e.DisclosuresReceived="DisclosuresReceived",e.DraftOrderCreated="DraftOrderCreated",e.DraftOrderDeleted="DraftOrderDeleted",e.DraftOrderInstrumentDetailsUpdated="OrderInstrumentDetailsUpdated",e.DraftOrderSetLockedState="DraftOrderSetLockedState",e.DraftOrderUpdated="DraftOrderUpdated",e.DraftTradeChecked="DraftTradeChecked",e.DraftOrderModified="DraftOrderModified",e.DraftTradeUnchecked="DraftTradeUnchecked",e.DrawingSetsReceived="DrawingSetsReceived",e.DrawingsReceived="DrawingsReceived",e.EditWorkingOrder="EditWorkingOrder",e.EnableAdjustCashSubmit="EnableAdjustCashSubmit",e.EnableSso="EnableSso",e.ErrorAlert="ErrorAlert",e.ExchangeCodeForToken="ExchangeCodeForToken",e.ExchangeLmsCodeForToken="ExchangeLmsCodeForToken",e.ExchangeStatusPending="ExchangeStatusPending",e.ExchangeStatusReceived="ExchangeStatusReceived",e.Filter="Filter",e.FutureExpirationsReceived="FutureExpirationsReceived",e.FuturesChainQuotesReceived="FuturesChainQuotesReceived",e.FuturesChainSymbolsReceived="FuturesChainSymbolsReceived",e.GetAlerts="GetAlerts",e.GetAuthCodeForSsoToMoveMoney="GetAuthCodeForSsoToMoveMoney",e.GetAuthCodeForSsoToEducation="GetAuthCodeForSsoToEducation",e.GetAuthCodeForSsoToSchwab="GetAuthCodeForSsoToSchwab",e.GetAuthCodeForSsoToRealizedGainLoss="GetAuthCodeForSsoToRealizedGainLoss",e.GetAuthCodeForTradingSystemSwitch="GetAuthCodeForTradingSystemSwitch",e.GetDisclosures="GetDisclosures",e.GetEatForFeedback="GetEatForFeedback",e.GetFutureExpirations="GetFutureExpirations",e.GetMatchingSymbolForCharts="GetMatchingSymbolForCharts",e.GetNewtForClickStream="GetNewtForClickStream",e.GetScansFilters="GetScansFilters",e.GetScansSymbols="GetScansSymbols",e.GetScanFilterParameters="GetScanFilterParameters",e.GetStrikeChangeQuotes="GetStrikeChangeQuotes",e.GetStudyCategories="GetStudyCategories",e.GetStudyParametersAndPlotSettings="GetStudyParametersAndPlotSettings",e.GetStudyProperties="GetStudyProperties",e.GetSuggestedSymbolsForChartSearch="GetSuggestedSymbolsForChartSearch",e.GetSuggestedSymbolsForNavigationSearch="GetSuggestedSymbolsForNavigationSearch",e.GetSuggestedSymbolsForTransactionsSearch="GetSuggestedSymbolsForTransactionsSearch",e.GetSuggestedSymbolsForWatchlistSearch="GetSuggestedSymbolsForWatchlistSearch",e.GetTransactions="GetTransactions",e.GroupedPositionsReceived="GroupedPositionsReceived",e.HeartbeatReceived="HeartbeatReceived",e.HideDrawerWindow="HideDrawerWindow",e.HideNotification="HideNotification",e.HideOrderConfirmation="HideOrderConfirmation",e.HideTransactions="HideTransactions",e.HistoricalCalendarEventsReceived="HistoricalCalendarEventsReceived",e.InstrumentsReceived="InstrumentsReceived",e.LegsLimitReached="LegsLimitReached",e.LoadStrike="LoadStrike",e.LocationPop="@@router/LOCATION_POP",e.LogIn="LogIn",e.LogInFailure="LoginFailure",e.LogInLMS="LogInLMS",e.LogInWithoutCafe="LogInWithoutCafe",e.LogOut="LOGOUT",e.LogOptionChainGammaExposure="LogOptionChainGammaExposure",e.MarketDepthDataReceived="MarketDepthDataReceived",e.MuteAllNotifications="MuteAllNotifications",e.NavigateToSymbol="NavigateToSymbol",e.NearStrikeSetLockedState="NearStrikeSetLockedState",e.NewNotification="NewNotification",e.OpenSection="OpenSection",e.OptionChainCenteredOn="OptionChainCenteredOn",e.OptionChainCenteredOnReceived="OptionChainCenteredOnReceived",e.OptionChainExpirationClicked="ExpandOptionExpiration",e.OptionChainFractionalTypeReceived="OptionChainFractionalTypeReceived",e.OptionChainQuotesReceived="OptionChainQuotesReceived",e.OptionChainReceived="OptionChainReceived",e.OptionChainTableColumnWidthChanged="OptionChainTableColumnWidthChanged",e.OptionSeriesQuotesReceived="OptionSeriesQuoteReceived",e.OrderAccountPositionsReceived="OrderAccountPositionsReceived",e.OrderAccountSelected="OrderAccountSelected",e.OrderBookAllCheckboxClicked="OrderBookAllCheckboxClicked",e.OrderBookFilterClicked="OrderBookFilterClicked",e.OrderBookTrayEditButtonPressed="OrderBookTrayEditButtonPressed",e.OrderEventsReceived="OrderStatus",e.OverallStatementReceived="OverallStatementReceived",e.PendingTradeChecked="PendingTradeChecked",e.PendingTradeUnchecked="PendingTradeUnchecked",e.PositionsReceived="PositionsReceived",e.PriceAlertNotificationReceived="PriceAlertNotificationReceived",e.QuotePermissionsReceived="QuotePermissionsReceived",e.QuotesReceived="QuotesReceived",e.ReceiveAdjustCash="ReceiveAdjustCash",e.Reconnect="Reconnect",e.ReconnectAttempt="ReconnectAttempt",e.ReconnectGiveUp="ReconnectGiveUp",e.ReconnectToPlaceOrder="ReconnectToPlaceOrder",e.RedirectToCafe="RedirectToCafe",e.RedirectToLms="RedirectToLms",e.RedirectToLmsGuestPass="RedirectToLmsGuestPass",e.RemoveChartExpansion="RemoveChartExpansion",e.RemoveCharts="RemoveCharts",e.RemoveOrderRule="RemoveOrderRule",e.RequestCalendarEvents="RequestCalendarEvents",e.RequestDrawingSets="RequestDrawingSets",e.RequestMarketDepth="RequestMarketDepth",e.RequestWatchlistQuotes="RequestWatchlistQuotes",e.RequestOptionSeriesQuotes="RequestOptionSeriesQuotes",e.RequestTimeSales="RequestTimeSales",e.ResetFeedback="ResetFeedback",e.ResetLayout="ResetLayout",e.ResetPositionsSymbolInfo="ResetPositionsSymbolInfo",e.RollPositions="RollPositions",e.SaveChartSymbol="SaveChartSymbol",e.SaveSelectedDrawingSets="SaveSelectedDrawingSets",e.SaveStudies="SaveStudies",e.SaveScanRequestReceived="SaveScanRequestReceived",e.ScanFiltersReceived="ScanFiltersReceived",e.ScanQuotesReceived="ScanQuotesReceived",e.ScansSymbolsReceived="ScansSymbolsReceived",e.ScanFilterParametersReceived="ScanFilterParametersReceived",e.SelectDrawingSet="SelectDrawingSet",e.SelectedSymbolInstrumentReceived="SelectedSymbolInstrumentReceived",e.SelectFutureExpiration="SelectFutureExpiration",e.SelectOptionExpiration="SelectOptionExpiration",e.SelectOptionStrike="SelectOptionStrike",e.SelectOptionType="SelectOptionType",e.SellInstrument="SellInstrument",e.SendFeedback="SendFeedback",e.SendFeedbackReceived="SendFeedbackReceived",e.SendLiveSupportMessage="SendLiveSupportMessage",e.SendOrder="SendOrder",e.SetActiveTraderInputQty="SetActiveTraderInputQty",e.SetBalance="SetBalance",e.SetBalanceFailure="SetBalanceFailure",e.SetBalanceSuccess="SetBalanceSuccess",e.SetFeedbackSendingStatus="SetFeedbackSendingStatus",e.SetFitStudiesInYAxis="SetFitStudiesInYAxis",e.SetGainAndLossChartDateTime="SetGainAndLossChartDateTime",e.SetHasUnSupportedFilters="SetHasUnSupportedFilters",e.SetIsCloseChatPromptShown="SetIsCloseChatPromptShown",e.SetIsMobileView="SetIsMobileView",e.SetIsResetBalancesAndPositionsChecked="SetIsResetBalancesAndPositionsChecked",e.SetLiveSupportChatHours="SetLiveSupportChatHours",e.SetLiveSupportChatId="SetLiveSupportChatId",e.SetLiveSupportChatWindow="SetLiveSupportChatWindow",e.SetLiveSupportDesktopChatWindowCoordinates="SetLiveSupportDesktopChatWindowCoordinates",e.SetNumCharts="SetNumCharts",e.SetSparkChart="SetSparkChart",e.SetOrderRules="SetOrderRules",e.SetPrevSavedScanFilters="SetPrevSavedScanFilters",e.SetPrevScanFilters="SetPrevScanFilters",e.SetPriceChartHoveredDate="SetPriceChartHoveredDate",e.SetPriceLevelPreviewValue="SetPriceLevelPreviewValue",e.SetPrivacyMode="SetPrivacyMode",e.SetScanFilterMenu="SetScanFilterMenu",e.SetScanFilterQueryName="SetScanFilterQueryName",e.SetShowAlerts="SetShowAlerts",e.SetShowChartHighLow="SetShowChartHighLow",e.SetShowDividendsIcon="SetShowDividendsIcon",e.SetShowEarningsIcon="SetShowEarningsIcon",e.SetShowEarningsPreview="SetShowEarningsPreview",e.SetShowExtendedHours="SetShowExtendedHours",e.SetShowOptionPositions="SetShowOptionPositions",e.SetShowWorkingOrders="SetShowWorkingOrders",e.SetShowTradePrice="SetShowTradePrice",e.SetStrike="SetStrike",e.SetStudyParameters="SetStudyParameters",e.SetTheme="SetTheme",e.SetTradingSystem="SetTradingSystem",e.SetTrailStopInputType="SetTrailStopInputType",e.SetTrailStopPriceOffset="SetTrailStopPriceOffset",e.SetWatchlistToScanIn="SetWatchlistToScanIn",e.ShowAlertBook="ShowAlertBook",e.ShowDrawerWindow="ShowDrawerWindow",e.ShowOrderConfirmation="ShowOrderConfirmation",e.ShowTransactions="ShowTransactions",e.SpreadPairMoreClicked="SpreadPairMoreClicked",e.StartLiveSupportChat="StartLiveSupportChat",e.StudiesReceived="StudyReceived",e.StudyCategoriesReceived="StudyCategoriesReceived",e.StudyParametersAndPlotSettingsError="StudyParametersAndPlotSettingsError",e.StudyParametersAndPlotSettingsReceived="StudyParametersAndPlotSettingsReceived",e.SuccessAlert="SuccessAlert",e.SuggestedSymbolsReceivedForChart="SuggestedSymbolsReceivedForChart",e.SuggestedSymbolsReceivedForNavigation="SuggestedSymbolsReceivedForNavigation",e.SuggestedSymbolsReceivedForTransactions="SuggestedSymbolsReceivedForTransactions",e.SuggestedSymbolsReceivedForWatchlist="SuggestedSymbolsReceivedForWatchlist",e.SwapColors="SwapColors",e.SymbolSelected="Underlying::SymbolSelected",e.Tick="Tick",e.TimeSalesDataReceived="TimeSalesDataReceived",e.ToggleAlertTriggeredBell="ToggleAlertTriggeredBell",e.ToggleMarketBell="ToggleMarketBell",e.ToggleOrderDirection="ToggleOrderDirection",e.ToggleOrderRejectedBell="ToggleOrderRejectedBell",e.TogglePortfolio="TogglePortfolio",e.ToggleSelectedWorkingOrders="ToggleSelectedWorkingOrders",e.ToggleSelectedWorkingOrdersAll="ToggleSelectedWorkingOrdersAll",e.ToggleSidebar="ToggleSidebar",e.ToggleTradeFilledBell="ToggleTradeFilledBell",e.TradeInstrument="TradeInstrument",e.TransactionsAccountSelected="TransactionsAccountSelected",e.TransactionsError="TransactionError",e.TransactionsReceived="TransactionsReceived",e.TriggeredAlertsReceived="TriggeredAlertsReceived",e.TriggerFocus="TriggerFocus",e.UncheckAllTrades="UncheckAllTrades",e.UnsubscribeFromMarketDepth="UnsubscribeFromMarketDepth",e.UnsubscribeFromOptionSeriesQuotes="UnsubscribeFromOptionSeriesQuotes",e.UnsubscribeFromSparkChart="UnsubscribeFromSparkChart",e.UnsubscribeFromTimeSales="UnsubscribeFromTimeSales",e.UnsubscribeFromWatchlistQuotes="UnsubscribeFromWatchlistQuotes",e.UpdateAlertSymbols="UpdateAlertSymbols",e.UpdateColumns="UpdateColumns",e.UpdateDraftOrderLegs="UpdateDraftOrderLegs",e.UpdateDrawing="UpdateDrawing",e.UpdateNewsSymbols="UpdateNewsSymbols",e.UpdateOptionChainColumnsSet="UpdateOptionChainColumnsSet",e.UpdateOrderRule="UpdateOrderRule",e.UpdateOrderTif="UpdateOrderTif",e.UpdateOrderType="UpdateOrderType",e.UpdatePositionsInstrumentsComparisonSymbols="UpdatePositionsInstrumentsComparisonSymbols",e.UpdateQuoteSymbols="UpdateQuoteSymbols",e.UpdateSpreadGrouping="UpdateSpreadGrouping",e.UpdateTradePrice="UpdateTradePrice",e.UpdateTradeQuantity="UpdateTradeQuantity",e.UpdateTradeQuantityOffset="UpdateTradeQuantityOffset",e.UpdatePositionsSymbolInfo="UpdatePositionsSymbolInfo",e.UserPropertiesGet="UserPropertiesGet",e.UserPropertiesSet="UserPropertiesSet",e.WatchlistAddSymbol="WatchlistAddSymbol",e.WatchlistAddSymbolClearLoading="WatchlistAddSymbolClearLoading",e.WatchlistAddSymbolError="WatchlistAddSymbolError",e.WatchlistAddSymbolLoading="WatchlistAddSymbolLoading",e.WatchlistClearError="WatchlistClearError",e.WatchlistCreate="WatchlistCreate",e.WatchlistCreateError="WatchlistCreateError",e.WatchlistCurrentMenuTrailSelected="WatchlistCurrentMenuTrailSelected",e.WatchlistDelete="WatchlistDelete",e.WatchlistPreviouslyExpandedByClick="WatchlistPreviouslyExpandedByClick",e.WatchlistMenuTrailSelected="WatchlistMenuTrailSelected",e.WatchlistRearrange="WatchlistRearrange",e.WatchlistReceived="WatchlistReceived",e.WatchlistReceivedQuotes="WatchlistReceivedQuotes",e.WatchlistRemoveSymbol="WatchlistRemoveSymbol",e.WatchlistSelected="WatchlistSelected",e.WatchlistSymbolsReceived="WatchlistSymbolsReceived",e.WorkingOrdersReceived="WorkingOrdersReceived",e))(f||{}),Cf=(e=>(e.PaperMoney="traderx::papermoney",e.LiveTrading="traderx::live",e))(Cf||{}),gt=(e=>(e.PaperMoney="PaperMoney",e.LiveTrading="LiveTrading",e))(gt||{}),ga=(e=>(e.TokenOrUserIdUndefined="Login success with no token or userId in response",e.RefreshTokenOrRetryError="No refresh token in login error callback",e.GetNewAccessTokenErrorCallback="Error in getting new access token",e.GetNewAuthCodeErrorCallback="Error in getting new auth code",e.LoginErrorCallback="Error in login response",e.ReconnectErrorCallback="Error in reconnect response",e.ReconnectTokenUndefined="No token in reconnect response",e))(ga||{});const $b=(e,t,s,n,r,o)=>({type:f.LogInLMS,code:e,clientId:t,redirectUri:s,tradingSystem:n,referralCode:r,isWebcast:o}),m1=(e,t,s,n,r,o,i,l)=>({type:f.Connected,tradingSystem:e,username:t,userCode:s,userSegment:n,userCdDomainId:r,userDomain:o,schwabAccountMigrationValue:i,permissions:l}),h3=e=>({type:f.SetPrivacyMode,privacyModeEnabled:e}),hx=e=>({type:f.SetTradingSystem,tradingSystem:e}),g1=()=>({type:f.LogOut}),p3="https://api.tdameritrade.com/v1",m3="TDATRADERX@AMER.OAUTHAP",g3={livetrading:"wss://services.thinkorswim.com/Services/WsJson",papermoney:"wss://services-demo.thinkorswim.com/Services/WsJson"},S3={livetrading:"",papermoney:""},f3="https://auth.tdameritrade.com/auth",T3="",y3="",C3="",b3=!0,E3="",A3="",v3="61fc0ce9f38fac1718d5c11e",I3="",x3="/v1/api/feedback",w3={isEnabled:!0,sendEvents:!0,streaming:!0},Zg={apiUrl:p3,apiKey:m3,serviceGatewayUrlsTda:g3,serviceGatewayUrlsSchwab:S3,cafeAuthUrl:f3,lmsAuthUrl:T3,lmsGuestPassAuthUrl:y3,region:C3,activeTraderEnabled:b3,schwabSsoUrl:E3,schwabLoginUrl:A3,ldClientSideId:v3,schwabClickStreamUrl:I3,feedbackUrl:x3,launchDarkly:w3},O3="https://api-ste07.tdameritrade.com/v1",R3="TDATRADERX@AMER.OAUTHAP",D3={livetrading:"wss://tosqa3.iteclientsys.local:7180/Services/WsJson",papermoney:"wss://tosqa3.iteclientsys.local:7180/Services/WsJson"},L3={livetrading:"wss://tosqa2.cs-trading-ad00006887-sbx9258.sbx.gcp.cloud.schwab.com:7180/Services/WsJson",papermoney:"wss://tosqa2.cs-trading-ad00006887-sbx9258.sbx.gcp.cloud.schwab.com:7180/Services/WsJson"},_3="https://authcafe-ste07.tdameritrade.com/auth",N3="https://sws-gateway-nr.dev.schwab.tech/ui/host/",P3="https://sws-gateway.dev.schwab.tech/ui/host/",k3="TUP",M3=!0,$3="https://client-test2.schwab.com/Login/Signon/AuthCodeHandler.ashx",j3="61fc0ce9f38fac1718d5c11d",B3="https://clickstreamapi-qa-ad00008132.scp2-test-app-bdv.dev.schwab.com/v1",F3="/v1/api/feedback",H3={isEnabled:!0,sendEvents:!0,streaming:!0},Jg={apiUrl:O3,apiKey:R3,serviceGatewayUrlsTda:D3,serviceGatewayUrlsSchwab:L3,cafeAuthUrl:_3,lmsAuthUrl:N3,lmsGuestPassAuthUrl:P3,region:k3,activeTraderEnabled:M3,schwabSsoUrl:$3,ldClientSideId:j3,schwabClickStreamUrl:B3,feedbackUrl:F3,launchDarkly:H3},U3="http://localhost:8080/v1",V3="TDATRADERX@AMER.OAUTHAP",W3={livetrading:"ws://localhost:8080/Services/WsJson",papermoney:"ws://localhost:8080/Services/WsJson"},G3={livetrading:"ws://localhost:8080/Services/WsJson",papermoney:"ws://localhost:8080/Services/WsJson"},Y3="http://localhost:8080/auth",q3="http://localhost:8080/auth",K3="http://localhost:8080/auth",z3="TUP",X3=!0,Q3="https://client-test2.schwab.com/Login/Signon/AuthCodeHandler.ashx",Z3="61fc0ce9f38fac1718d5c11d",J3="https://clickstreamapi-qa-ad00008132.scp2-test-app-bdv.dev.schwab.com/v1",e4="http://localhost:8080/v1/api/feedback",t4={isEnabled:!0,sendEvents:!1,streaming:!1},eS={apiUrl:U3,apiKey:V3,serviceGatewayUrlsTda:W3,serviceGatewayUrlsSchwab:G3,cafeAuthUrl:Y3,lmsAuthUrl:q3,lmsGuestPassAuthUrl:K3,region:z3,activeTraderEnabled:X3,schwabSsoUrl:Q3,ldClientSideId:Z3,schwabClickStreamUrl:J3,feedbackUrl:e4,launchDarkly:t4},s4="https://api.tdameritrade.com/v1",n4="TDATRADERX@AMER.OAUTHAP",r4={livetrading:"wss://services.thinkorswim.com/Services/WsJson",papermoney:"wss://services-demo.thinkorswim.com/Services/WsJson"},o4={livetrading:"wss://tosqa2.cs-trading-ad00006887-sbx9258.sbx.gcp.cloud.schwab.com:7180/Services/WsJson",papermoney:"wss://tosqa4.cs-trading-ad00006887-sbx9258.sbx.gcp.cloud.schwab.com:7180/Services/WsJson"},a4="https://auth.tdameritrade.com/auth",i4="https://sws-gateway-nr.dev.schwab.tech/ui/host/",l4="https://sws-gateway.dev.schwab.tech/ui/host/",c4="TUP",d4=!0,u4="https://client-qa4-tup.dev.schwab.com/Areas/Access/SignOn/Auth",h4="https://client-qa4-tup.dev.schwab.com/Areas/Access/Login",p4="61fc0e212861ea0e2785d3d0",m4="",g4="/v1/api/feedback",S4={isEnabled:!0,sendEvents:!0,streaming:!0},f4={isAdrumEnabled:!1,appKey:"EUM-AAB-BYJ",adrumExtUrl:"cdn.appdynamics.com",adrumScript:"cdn.appdynamics.com/adrum/adrum-23.8.0.4309.js",beaconUrl:"eum-appd.dev.schwab.com"},T4={apiUrl:s4,apiKey:n4,serviceGatewayUrlsTda:r4,serviceGatewayUrlsSchwab:o4,cafeAuthUrl:a4,lmsAuthUrl:i4,lmsGuestPassAuthUrl:l4,region:c4,activeTraderEnabled:d4,schwabSsoUrl:u4,schwabLoginUrl:h4,ldClientSideId:p4,schwabClickStreamUrl:m4,feedbackUrl:g4,launchDarkly:S4,appDynamics:f4};var y4={},Ga=(e=>(e.Prod="prod",e.QA="qa",e.Mock="mock",e.Local="local",e))(Ga||{});const C4=()=>{switch(y4.VITE_ENV){case"prod":return"prod";case"qa":return"qa";case"mock":return"mock";case"local":return"local";default:return"prod"}},b4={env:C4()};var to={};const E4=()=>{switch(b4.env){case Ga.Prod:return{...Zg,apiKey:to.API_KEY?to.API_KEY:Zg.apiKey,ldClientSideId:to.LD_CLIENTSIDE_ID?to.LD_CLIENTSIDE_ID:Zg.ldClientSideId};case Ga.QA:return{...Jg,apiKey:to.API_KEY?to.API_KEY:Jg.apiKey,ldClientSideId:to.LD_CLIENTSIDE_ID?to.LD_CLIENTSIDE_ID:Jg.ldClientSideId};case Ga.Local:return{...T4};case Ga.Mock:return{...eS,apiKey:to.API_KEY?to.API_KEY:eS.apiKey,ldClientSideId:to.LD_CLIENTSIDE_ID?to.LD_CLIENTSIDE_ID:eS.ldClientSideId}}},A4=E4();let tS,gd;const v4=e=>(gd===void 0&&(gd=fetch(e).then(t=>t.json()).catch(()=>(gd=void 0,A4))),gd),Lr=async()=>{if(tS!==void 0)return tS;const e=await v4("/v1/api/config");return gd!==void 0&&(tS=e),e},rr={tosWebTitle:"thinkorswim Web",lmsApiKey:"TOSWeb",lmsGuestPassApiKey:"TOSGuestPassWeb",schwabClickStreamChannel:"AD00007842",eduSancParamValue:"eduhub",moveMoneySancParamValue:"movemoney",realizedGainLossSancParamValue:"SSETrgl"},Qn=()=>{const e=window.crypto,t=new Uint32Array(1);return e.getRandomValues(t)[0].toString()},I4=(e,t,s="Error")=>{if(window.ADRUM===void 0)return;const n=new window.ADRUM.events.Error({msg:`[${s}] ${e.message}
${t.componentStack}`});window.ADRUM.report(n)};var li=(e=>(e.Error="Error",e.ErrorBoundary="Error Boundary",e.LoginError="Login Error",e.SchwabClickStream="Schwab ClickStream",e.AnalystReportMarkitDigital="Analyst Report MarkitDigital",e.LaunchDarkly="LaunchDarkly",e))(li||{});const il=(e,t="Error")=>{if(window.ADRUM===void 0)return;const s=new window.ADRUM.events.Error({msg:`[${t}] ${e}`});window.ADRUM.report(s)},px=e=>e===null?!0:(Number(e)-Date.now())/(1e3*60*60)<=.5,x4=()=>({type:"browser",url:global.location.href,referrer:document.referrer,userAgent:global.navigator.userAgent,clientTimestamp:new Date().getTime()}),jb="traderx::",Bb={[gt.LiveTrading]:jb+"live",[gt.PaperMoney]:jb+"papermoney"};var Ve=(e=>(e.SelectSymbol="Select Symbol",e.Authentication="Authentication",e.Trade="Trade",e.Drawers="Drawers",e.Errors="Errors",e.Watchlist="Watchlist",e.WatchlistChanged="Watchlist Changed",e.Layout="Layout",e.ChartStudies="Chart Studies",e.ChartDrawings="Chart Drawings",e.ChartSettings="Chart Settings",e.ChartTimeFrame="Chart Time Frame",e.ChartAggregation="Chart Aggregation",e.ChartGadget="Chart Gadget",e.Expansion="expansion",e.Click="Click",e.ColumnCustomization="Column Customization",e.Scans="Scans",e.SidebarNavigation="SideBar Navigation",e.Positions="Positions",e.PositionsSidebar="Positions Sidebar",e.PositionsSettings="Positions Settings",e.TradeTicket="Trade ticket",e.OptionChain="Option Chain",e.TradePage="Trade page",e))(Ve||{}),Le=(e=>(e.Cancel="Cancel",e.Close="Close",e.SymbolSelected="Symbol selected",e.LogInSuccess="Log in Success",e.Reconnect="Reconnect",e.LogInFailure="Log in Failure",e.Buy="Buy",e.Sell="Sell",e.Personal="Personal",e.Public="Public",e.AddTradeFromWL="Add trade from watchlist",e.AddTradeFromFuturesChain="Add trade from futures chain",e.AddTradeFromLevelII="Add trade from levelII",e.AddTradeFromChart="Add trade from chart",e.AddInstrumentTrade="Add instrument trade",e.AddInstrumentLeg="Add instrument leg",e.AddOptionTrade="Add option trade",e.AddVerticalTrade="Add vertical trade",e.AddButterflyTrade="Add butterfly trade",e.AddCalendarTrade="Add Calendar trade",e.AddDiagonalTrade="Add Diagonal trade",e.AddCoveredStockTrade="Add covered stock trade",e.AddIronCondorTrade="Add iron condor trade",e.AddBlastAllOrder="Add Blast All Order",e.AddOCOOrder="Add OCO Order",e.AddFirstTriggersSeqOrder="Add First Triggers Sequence Order",e.AddFirstTriggersAllOrder="Add First Triggers All Order",e.AddFirstTriggersOCOOrder="Add First Triggers OCO Order",e.AddOptionLeg="Add option leg",e.AggregationSelected="Aggregation Selected",e.DeleteDraftOrderConfTray="Delete draft order confirmation tray",e.DeleteDraftOrderTicket="Delete draft order ticket",e.DeleteDraftOrderLegTicket="Delete draft order leg ticket",e.ReviewOrder="Review order",e.SendOrder="Send order",e.AllTradesSelected="All trades selected",e.AllTradesDeselected="All trades deselected",e.TradeSelected="Trade selected",e.TradeDeselected="Trade deselected",e.ShowDrawer="Show drawer",e.SubmitFeedback="Submit feedback",e.ClickedSatisfactionLevel="Clicked satisfaction level",e.ClickedSupport="Clicked support",e.TroubleshootingInformationExpanderClicked="Troubleshooting information expander clicked",e.TroubleshootingInformationCopied="Troubleshooting information copied",e.TradeTicketError="Trade ticket error",e.SendTradeError="Send Trade error",e.OrderEventError="Order Event error",e.DynamicRiskRateFallBackError="Dynamic risk rate fall back error",e.GlobalRiskRateError="Global risk rate error",e.WatchlistRemove="Watchlist remove",e.WatchlistRemoveUndo="Watchlist remove undo",e.ScanQueryRemove="Scan query remove",e.ScanQueryRemoveUndo="Scan query remove undo",e.LeftSidebarCollapsed="LeftSidebarCollapsed",e.LeftSidebarExpanded="LeftSidebarExpanded",e.Right_Rail="right-rail",e.AccountSummaryCollapsed="AccountSummaryCollapsed",e.AccountSummaryExpanded="AccountSummaryExpanded",e.AddStudy="AddStudy",e.DrawingsMenuOpened="DrawingsMenuOpened",e.DrawingsSelected="DrawingSelected",e.StudiesMenuOpened="StudiesMenuOpened",e.ChartSettingsMenuOpened="ChartSettingsMenuOpened",e.EditSelected="EditSelected",e.OptionChain="Option Chain",e.FuturesChain="Futures Chain",e.OptionChainDTE="Option Chain Days to Expiration",e.QuickStartGuide="Quick Start Guide",e.Education="Education",e.OptionChainTable="Option Chain Table",e.PositionsTable="Positions Table",e.TradeTable="Trade Table",e.WatchlistTable="Watchlist Table",e.ScanRun="ScanRun",e.ScansTable="Scans Table",e.PositionsPageOpened="Positions page opened",e.TradePageOpened="Trade page opened",e.ChartsPageOpened="Charts page opened",e.ScansPageOpened="Scans page opened",e.Referral="Referral",e.AdjustDuringReview="Adjust During Review",e.TradeFromActiveTraderLadder="Trade from active trader ladder",e.UseSchwab="useSchwab",e.SpreadGrouping="Spread Grouping",e.SpreadGroupingMessage="Spread Grouping Message",e.SchwabNetwork="Schwab Network",e.StrikeSelector="Strike selector",e.CenteredOn="Centered On",e.TimeframeSelected="Timeframe Selected",e.CloseSymbolInfoCustomization="Close Symbol Info customization",e.TabSelected="Tab selected",e))(Le||{}),ks=(e=>(e.TradeTicket="Trade ticket",e.OptionChain="Option chain",e.StudiesMenu="Studies Menu",e.DrawingsMenu="Drawings Menu",e.ChartSettingsMenu="Chart Settings Menu",e.Email="Email",e.Phone="Phone",e.Expand="expand",e.Collapse="collapse",e.EditOrderFromPortfolioPage="Edit Order from Portfolio Screen",e.EditOrderFromTradePage="Edit Order from Trade Page",e.OpenOptionChain="Open Option Chain",e.OpenFuturesChain="Open Futures Chain",e.OpenEducation="Opening Education",e.OpenSchwabNetwork="Open Schwab Network",e.OpenMenu="Open Menu",e.Webcast="Webcast",e.AdjustedOrder="Adjusted Order",e))(ks||{});const w4={[ge.Trade]:"symbol page",[ge.Charts]:"charts page"};let S1=!1;const O4=()=>{S1=!0},mx=e=>{S1&&Sx({eventName:"clickstreamLogRegisterEvent",eventData:{actionName:"pageName",details:[Bb[e]],context:Bb[e]},eventCaller:null})},Ye=e=>{if(S1){let t=Object.values(e).flat();t=t.map(s=>typeof s=="string"?u3(s):s),Sx({event_type:"generalEvent",dynamic_data:t})}},gx={accountIdentifier:"",userIdentifier:""},Kc={identifiers:{...gx},newt:""},Eu=()=>({schwabClickStreamPayload:Kc,setUserInfo:({userIdentifier:o})=>{Kc.identifiers.userIdentifier=o},setAccountInfo:({accountIdentifier:o})=>{Kc.identifiers.accountIdentifier=o},setNewtInfo:({newt:o})=>{Kc.newt=o},getPayload:o=>{const i=x4(),{getNewtAndUserInfo:l}=Eu(),c=l(),{newt:d,identifiers:u}=c;return{payload:{channel:rr.schwabClickStreamChannel,eventDetails:o,identifiers:d?u:{...gx},systemDetails:i},newt:d}},getNewtAndUserInfo:()=>Kc}),R4=async e=>{const{getPayload:t}=Eu(),{payload:s,newt:n}=t(e),{schwabClickStreamUrl:r}=await Lr(),o=Qn(),i=sessionStorage.getItem("newtExpireTime"),l=n&&!px(i)&&s.identifiers.userIdentifier,c={"Content-Type":"application/json;charset=utf-8","Schwab-Client-CorrelId":o.toString(),"Schwab-Client-AppId":"AD00007842","Schwab-Resource-Version":"v1"},d=l?r+"/auth":r+"/unauth";try{await fetch(d,{method:"POST",headers:l?{...c,Authorization:n}:c,credentials:"include",body:JSON.stringify(s)}).then(({ok:u,status:h,statusText:p})=>{u||il(`${h} ${p}. Schwab-Client-CorrelId: ${o}`,li.SchwabClickStream)})}catch{il("Error Sending event data to click stream. Correlation Id:"+o,li.SchwabClickStream)}},D4=e=>{let t="",s=[];const r=sessionStorage.getItem("tradingSystem")===gt.LiveTrading?Cf.LiveTrading:Cf.PaperMoney;if(e.hasOwnProperty("event_type")){const{event_type:o,dynamic_data:i}=e;t=o,s=i}else{const{eventName:o}=e;t=o,s=[],t==="clickstreamLogRegisterEvent"&&(t="pageName",s=[r])}return{name:t,context:r,data:s}},Sx=async e=>{const t=D4(e);await R4(t)};var Cs=(e=>(e.DEFAULT_AUTH_SYSTEM="defaultAuthSystem",e.SHOW_FEEDBACK_BLUE="showFeedbackBlue",e.SPREAD_GROUPING="spreadGrouping",e.SHOW_SUPPORT_CHAT="showSupportChat",e.SHOW_BLUE_EDUCATION_BUTTON="showBlueEducationButton",e.SHOW_USER_CODE="showUserCode",e.SHOW_PORTFOLIO_NEWS_BLUE="showPortfolioNewsBlue",e.ENABLE_GUEST_PASS="enableGuestPass",e.IS_APPD_ADRUM_ENABLED="isAppDAdrumEnabled",e.SHOW_ACCOUNT_HISTORY_BLUE="showAccountHistoryDropdownBlue",e.SHOW_QUICK_START_GUIDE_BLUE="showQuickStartGuideBlue",e.SHOW_ANALYST_REPORTS_BLUE="showAnalystReportsBlue",e.SHOW_QUOTE_MONITOR="showQuoteMonitor",e.SSO_TIMEOUT="ssoTimeout",e.SHOW_FUNDAMENTALS="showFundamentals",e.SHOW_QUOTE_MONITOR_MENU_CONTENT="showQuoteMonitorMenuContent",e))(Cs||{});const zh={defaultAuthSystem:"LMS",showFeedbackBlue:!0,spreadGrouping:!0,showSupportChat:!0,showBlueEducationButton:!0,showUserCode:!1,showPortfolioNewsBlue:!1,enableGuestPass:!1,isAppDAdrumEnabled:!0,showAccountHistoryDropdownBlue:!1,showQuickStartGuideBlue:!1,showAnalystReportsBlue:!0,showQuoteMonitor:!0,ssoTimeout:60,showFundamentals:!1,showQuoteMonitorMenuContent:!1};let Ld;const L4=e=>{Ld=e},f1=()=>Ld,Js=(e,t)=>t===void 0?(Ld==null?void 0:Ld.variation(e,zh[e]))??zh[e]:(t==null?void 0:t[e])??zh[e],ut={ROOT:"/",OAUTH:"/oauth",LOGIN:"/login",WEBCAST:"/webcast",ERROR:"/error",TRADE:"/trade",CHARTS:"/charts",SCANS:"/scans",TRANSACTIONS:"/transactions",WATCHLIST:"/watchlist",SCHWAB_SSO:"/schwabsso",GUEST_PASS_REDIRECT:"/guestpass"};var fx=(e=>(e.symbol="symbol",e.leg1="leg1",e.leg2="leg2",e.leg3="leg3",e.leg4="leg4",e.orderType="orderType",e.limitPrice="limitPrice",e.stopPrice="stopPrice",e.orderTif="orderTif",e))(fx||{});const Tx=Object.keys(fx),Ec=e=>{e.startsWith("?")&&(e=e.split("?")[1]);const t=new URLSearchParams(e),s=Object.fromEntries(t);return yx(s,Tx)},T1=e=>{let t=Ec(e);if(t.hasOwnProperty("state")){const s=Object.fromEntries(new URLSearchParams(decodeURIComponent(t.state))),n=yx(s,Tx);delete t.state,t={...n,...t}}return t},yx=(e,t)=>(t.forEach(s=>{e.hasOwnProperty(s)&&(e[s]=e[s].replace(/\s/g,"%2B"))}),e);var Fb={};class _4 extends j.Component{constructor(s){super(s);R(this,"render",()=>null);const{history:n,redirectToLms:r,exchangeLmsCodeForToken:o}=this.props,i=T1(s.history.location.search);if(Object.keys(i).length>0&&i.code!==void 0){const l=i.code;delete i.code,delete i.isSchwab,o(l,i)}else if(i!==null&&i.error!==void 0&&i.error!=="access_denied")n.push(ut.ERROR+`?error_message=${i.error}`);else{if(Fb.VITE_ENV===Ga.Local||Fb.VITE_ENV===Ga.Mock)return;r()}}}const N4=e=>({exchangeLmsCodeForToken:(t,s)=>e({type:f.ExchangeLmsCodeForToken,code:t,params:s}),redirectToLms:()=>e({type:f.RedirectToLms})}),P4=se(null,N4)(_4);var Cx=(e=>(e.Default="default",e.HongKong="HongKong",e.Singapore="Singapore",e))(Cx||{});const bp=e=>e===void 0?"default":e.indexOf(".sg")>-1?"Singapore":e.indexOf(".hk")>-1?"HongKong":"default";var Bn=(e=>(e.AMER="AMER",e.ADVCLNT="ADVCLNT",e.ADVNCED="ADVNCED",e.HKASIA="HKASIA",e.INVTOOL="INVTOOL",e.SING="SING",e.TDAIS="TDAIS",e.TOSPM="TOSPM",e))(Bn||{});const k4=e=>e!==void 0&&e in Bn;var Ep=(e=>(e[e.LMS=0]="LMS",e[e.CAFE=1]="CAFE",e))(Ep||{});const nc={QUOTE_DETAILS_ACTIVE_TAB:"quoteDetailsActiveTab",SSO_EXPIRED:"ossExpired"},zs="trade-page-chart",qi="chart-page-chart",zn="spark-chart";var xt=(e=>(e.DAY1="DAY1",e.DAY3="DAY3",e.DAY5="DAY5",e.DAY10="DAY10",e.DAY20="DAY20",e.MONTH3="MONTH3",e.MONTH6="MONTH6",e.YEAR1="YEAR1",e.YEAR3="YEAR3",e.YEAR5="YEAR5",e.YEAR15="YEAR15",e.TODAY="TODAY",e.YTD="YTD",e.MAX="MAX",e))(xt||{});const M4="TODAY",y1="YEAR1",bx={DAY1:{long:"Day",short:"1D"},DAY3:{long:"3 Days",short:"3D"},DAY5:{long:"Week",short:"1W"},DAY10:{long:"2 Weeks",short:"2W"},DAY20:{long:"1 Month",short:"1M"},MONTH3:{long:"3 Months",short:"3M"},MONTH6:{long:"6 Months",short:"6M"},YEAR1:{long:"1 Year",short:"1Y"},YEAR3:{long:"3 Years",short:"3Y"},YEAR5:{long:"5 Years",short:"5Y"},YEAR15:{long:"15 Years",short:"15Y"},TODAY:{long:"Today",short:"Today"},YTD:{long:"Year-To-Date",short:"YTD"},MAX:{long:"Max",short:"Max"}},$4=e=>bx[e].short,Hb=e=>bx[e].long;var ie=(e=>(e.MIN1="MIN1",e.MIN2="MIN2",e.MIN3="MIN3",e.MIN4="MIN4",e.MIN5="MIN5",e.MIN10="MIN10",e.MIN15="MIN15",e.MIN20="MIN20",e.MIN30="MIN30",e.HOUR1="HOUR1",e.HOUR2="HOUR2",e.HOUR4="HOUR4",e.DAY="DAY",e.DAY2="DAY2",e.DAY3="DAY3",e.DAY4="DAY4",e.WEEK="WEEK",e.MONTH="MONTH",e.QUARTER="QUARTER",e.YEAR="YEAR",e.OPT_EXP="OPT_EXP",e))(ie||{});const _r={MIN1:1,MIN2:2,MIN3:3,MIN4:4,MIN5:5,MIN10:10,MIN15:15,MIN20:20,MIN30:30,HOUR1:1,HOUR2:2,HOUR4:4,DAY:1,DAY2:2,DAY3:3,DAY4:4,WEEK:1,MONTH:1},j4={MIN1:"1m",MIN2:"2m",MIN3:"3m",MIN4:"4m",MIN5:"5m",MIN10:"10m",MIN15:"15m",MIN20:"20m",MIN30:"30m",HOUR1:"1h",HOUR2:"2h",HOUR4:"4h",DAY:"1D",DAY2:"2D",DAY3:"3D",DAY4:"4D",WEEK:"1W",MONTH:"1M",OPT_EXP:"OPT_EXP",QUARTER:"Quarter",YEAR:"Year"},Ub=e=>{switch(e){case"MIN1":return"1 Minute";case"MIN2":return"2 Minutes";case"MIN3":return"3 Minutes";case"MIN4":return"4 Minutes";case"MIN5":return"5 Minutes";case"MIN10":return"10 Minutes";case"MIN15":return"15 Minutes";case"MIN20":return"20 Minutes";case"MIN30":return"30 Minutes";case"HOUR1":return"1 Hour";case"HOUR2":return"2 Hours";case"HOUR4":return"4 Hours";case"DAY":return"1 Day";case"DAY2":return"2 Days";case"DAY3":return"3 Days";case"DAY4":return"4 Days";case"WEEK":return"1 Week";case"MONTH":return"1 Month";case"OPT_EXP":return"OPT Expiration";case"QUARTER":return"Quarter";case"YEAR":return"Year"}},B4={TODAY:"MIN1",DAY1:"MIN1",DAY3:"MIN15",DAY5:"HOUR1",DAY10:"HOUR2",DAY20:"HOUR4",MONTH3:"DAY",MONTH6:"DAY",YTD:"DAY",YEAR1:"WEEK",YEAR3:"WEEK",YEAR5:"MONTH",YEAR15:"MONTH",MAX:"MONTH"},C1={TODAY:"MIN5",DAY1:"MIN15",DAY3:"MIN15",DAY5:"HOUR1",DAY10:"HOUR2",DAY20:"HOUR4",MONTH3:"DAY",MONTH6:"DAY",YTD:"DAY",YEAR1:"WEEK",YEAR3:"WEEK",YEAR5:"MONTH",YEAR15:"MONTH",MAX:"MONTH"},os=e=>!co(e)&&e.hasOwnProperty("close")&&e.hasOwnProperty("open")&&e.hasOwnProperty("high")&&e.hasOwnProperty("low");var Ql=(e=>(e.FIVE_MINUTES="5 Minutes",e.TEN_MINUTES="10 Minutes",e.FIFTEEN_MINUTES="15 Minutes",e.THIRTY_MINUTES="30 Minutes",e.FIFTY_FIVE_MINUTES="55 Minutes",e.TWO_HOURS="2 Hours",e.FOUR_HOURS="4 Hours",e.EIGHT_HOURS="8 Hours",e.TWENTY_FOUR_HOURS="24 Hours",e))(Ql||{});const F4={"5 Minutes":5*6e4,"10 Minutes":10*6e4,"15 Minutes":15*6e4,"30 Minutes":30*6e4,"55 Minutes":55*6e4,"2 Hours":2*60*6e4,"4 Hours":4*60*6e4,"8 Hours":8*60*6e4,"24 Hours":24*60*6e4},_d=Object.values(Ql),H4=Fe([I(_d[0]),I(_d[1]),..._d.slice(2).map(e=>I(e))]),Ex=e=>H4.is(e);var Xh=(e=>(e.FULL_RANGE="fullRange",e.LENGTH="length",e.AVERAGE_TYPE="averageType",e.PRICE="price",e.TIME_FRAME="timeFrame",e.PRICE_H="priceH",e.PRICE_L="priceL",e.PRICE_C="priceC",e.DISPLACE="displace",e.NUM_DEV_DN="Num_Dev_Dn",e.NUM_DEV_UP="Num_Dev_up",e.DEVIATIONS="deviations",e.OVERBOUGHT="over_Bought",e.OVERSOLD="over_Sold",e.TYPE="type",e.FAST_LENGTH="fastLength",e.SLOW_LENGTH="slowLength",e.SIGNAL_LENGTH="signalLength",e.COLOR_NORM_LENGTH="colorNormLength",e.MACD_LENGTH="macdLength",e.MOVING_AVERAGE_LENGTH="movingAvgLength",e.NAME="name",e.K_PERIOD="KPeriod",e.D_PERIOD="DPeriod",e.SLOWING_PERIOD="slowing_period",e.FACTOR="factor",e.TRUE_RANGE_AVERAGE_TYPE="trueRangeAverageType",e.NK="nK",e.NBB="nBB",e.ALERTLINE="alertLine",e.STD_DEV="stdDev",e.VOLATILITY_ADJUST="volatilityAdjust",e.SHOW_ONLY_TODAY="showOnlyToday",e.ACCELERATION_FACTOR="accelerationFactor",e.ACCELERATION_LIMIT="accelerationLimit",e.COMPARISON_STYLE="comparisonStyle",e.SECONDARY_SECURITY="secondarySecurity",e.COLOR_AS_SYMBOL_TICKS="colorAsSymbolTicks",e))(Xh||{}),je=(e=>(e.TYPE="type",e.FULL_RANGE="fullRange",e.LENGTH="length",e.AVERAGE_TYPE="averageType",e.PRICE="price",e.SHOW_ONLY_TODAY="showOnlyToday",e.TIME_FRAME="timeFrame",e.PRICE_H="priceH",e.PRICE_L="priceL",e.PRICE_C="priceC",e.DISPLACE="displace",e.NUM_DEV_DN="numDeviationDown",e.NUM_DEV_UP="numDeviationUp",e.DEVIATIONS="deviations",e.OVERBOUGHT="overbought",e.OVERSOLD="oversold",e.FAST_LENGTH="fastLength",e.SLOW_LENGTH="slowLength",e.SIGNAL_LENGTH="signalLength",e.COLOR_NORM_LENGTH="colorNormLength",e.MACD_LENGTH="macdLength",e.MOVING_AVERAGE_LENGTH="movingAvgLength",e.K_PERIOD="kPeriod",e.D_PERIOD="dPeriod",e.SLOWING_PERIOD="slowingPeriod",e.FACTOR="factor",e.TRUE_RANGE_AVERAGE_TYPE="trueRangeAverageType",e.NK="nK",e.NBB="nBB",e.ALERTLINE="alertLine",e.STD_DEV="stdDev",e.VOLATILITY_ADJUST="volatilityAdjust",e.ACCELERATION_FACTOR="accelerationFactor",e.ACCELERATION_LIMIT="accelerationLimit",e.COMPARISON_STYLE="comparisonStyle",e.SECONDARY_SECURITY="secondarySecurity",e.COLOR_AS_SYMBOL_TICKS="colorAsSymbolTicks",e))(je||{});const Vb=Object.values(je).reduce((e,t,s)=>({...e,[t]:s+1}),{isLowerChart:0}),bf={fullRange:"Full Range",length:"Length",averageType:"Average Type",price:"Price Type",timeFrame:"Time Frame",priceH:"Price H",priceL:"Price L",priceC:"Price C",displace:"Displace",numDeviationDown:"Num Dev Dn",numDeviationUp:"Num Dev Up",deviations:"Deviations",oversold:"OverSold",overbought:"OverBought",slowLength:"Slow Length",signalLength:"Signal Length",colorNormLength:"Color Norm Length",fastLength:"Fast Length",macdLength:"MACD Length",movingAvgLength:"Moving Avg Length",kPeriod:"K Period",dPeriod:"D Period",slowingPeriod:"Slowing Period",type:"Type",factor:"Factor",trueRangeAverageType:"True Range Average Type",nK:"NK",nBB:"NBB",alertLine:"Alert Line",stdDev:"Standard Deviation",volatilityAdjust:"Volatility Adjustment",showOnlyToday:"Show Only Today",accelerationFactor:"Acceleration Factor",accelerationLimit:"Acceleration Limit",comparisonStyle:"Comparison Style",secondarySecurity:"Secondary Security",colorAsSymbolTicks:"Color as symbol ticks"};var On=(e=>(e.Simple="SIMPLE",e.Exponential="EXPONENTIAL",e.Weighted="WEIGHTED",e.Wilders="WILDERS",e.Hull="HULL",e))(On||{}),uo=(e=>(e.High="HIGH",e.Low="LOW",e.Close="CLOSE",e.Open="OPEN",e.HighLowAvg="(H+L)/2",e.HighLowCloseAvg="(H+L+C)/3",e.OpenHighLowCloseAvg="(O+H+L+C)/4",e))(uo||{}),Zl=(e=>(e.DAY="DAY",e.WEEK="WEEK",e.MONTH="MONTH",e))(Zl||{}),Jd=(e=>(e.YES="Yes",e.NO="No",e))(Jd||{}),Ap=(e=>(e.YES="Yes",e.NO="No",e))(Ap||{}),so=(e=>(e.COLOR_OPTIONS="colorOptions",e.PLOT_TYPE="plotType",e.SAVED_COLORS="savedColors",e))(so||{}),me=(e=>(e.ADX="ADX",e.AWESOME_OSCILLATOR="AwesomeOscillator",e.CCI="CCI",e.COMPARISON="Comparison",e.COMPARISON_PERCENT="ComparisonPercent",e.DMI="DMI",e.EXPONENTIAL_MOVING_AVG="MovAvgExponential",e.HULL_MOVING_AVG="HullMovingAvg",e.KELTNER_CHANNELS="KeltnerChannels",e.LINEAR_REG_TRENDLINE="LinearRegTrendline",e.MACD="MACD",e.OPEN_INTEREST="OpenInterest",e.PIVOT_POINTS="PivotPoints",e.PRICE="Price",e.PRICE_CHANNEL="PriceChannel",e.PROBABILITY_OF_EXPIRING_CONE="ProbabilityOfExpiringCone",e.RSI="RSI",e.SIMPLE_MOVING_AVG="SimpleMovingAvg",e.STANDARD_DEV_CHANNEL="StandardDevChannel",e.STOCHASTIC="StochasticFull",e.TRIX="TRIX",e.VOLUME="Volume",e.VWAP="VWAP",e.WEIGHTED_MOVING_AVG="MovAvgWeighted",e.WILDERS_SMOOTHING="WildersSmoothing",e))(me||{}),G=(e=>(e.ADX_CROSSOVER="ADXCrossover",e.BOLLINGER_BANDS_CROSSOVER="BollingerBandsCrossover",e.CHAIKIN_MONEY_FLOW="ChaikinMoneyFlow",e.DETRENDED_PRICE_OSC="DetrendedPriceOsc",e.MACD_HISTOGRAM_CROSSOVER="MACDHistogramCrossover",e.MARKET_FORECAST="MarketForecast",e.MARKET_SENTIMENT="MarketSentiment",e.MESA_SINE_WAVE="MESASineWave",e.MOMENTUM_CROSSOVER="MomentumCrossover",e.MONEY_FLOW_INDEX_CROSSOVER="MoneyFlowIndexCrossover",e.MOVING_AVG_CROSSOVER="MovingAvgCrossover",e.PARABOLIC_SAR_CROSSOVER="ParabolicSARCrossover",e.PRICE_AVERAGE_CROSSOVER="PriceAverageCrossover",e.RATE_OF_CHANGE_CROSSOVER="RateOfChangeCrossover",e.RSI_CROSSOVER="RSICrossover",e.STOCHASTIC_CROSSOVER="StochasticCrossover",e.TTM_WAVE="TTM_Wave",e.ACC_DIST="AccDist",e.ACCUM_DIST_PR_VOL="AccumDistPrVol",e.ADVANCE_DECLINE="AdvanceDecline",e.CHAIKIN_OSC="ChaikinOsc",e.CHAIKIN_OSCILLATOR="ChaikinOscillator",e.CUMULATIVE_VOLUME_INDEX="CumulativeVolumeIndex",e.DEMAND_INDEX="DemandIndex",e.EASE_OF_MOVEMENT="EaseOfMovement",e.KLINGER_OSCILLATOR="KlingerOscillator",e.MC_CLELLAN_OSCILLATOR="McClellanOscillator",e.MC_CLELLAN_SUMMATION_INDEX="McClellanSummationIndex",e.MONEY_FLOW_INDEX="MoneyFlowIndex",e.NEGATIVE_VOLUME_INDEX="NegativeVolumeIndex",e.ON_BALANCE_VOLUME="OnBalanceVolume",e.POSITIVE_VOLUME_INDEX="PositiveVolumeIndex",e.PRICE_AND_VOLUME_TREND="PriceAndVolumeTrend",e.TRADE_VOLUME_INDEX="TradeVolumeIndex",e.VOLUME_AVG="VolumeAvg",e.VOLUME_OSC="VolumeOsc",e.VOLUME_PROFILE="VolumeProfile",e.VOLUME_RATE_OF_CHANGE="VolumeRateOfChange",e.ACCELERATION_BANDS="AccelerationBands",e.ATR="ATR",e.BOLLINGER_BANDS="BollingerBands",e.BOLLINGER_BANDWIDTH="BollingerBandwidth",e.BOLLINGER_PERCENT_B="BollingerPercentB",e.CSI="CSI",e.CHAIKIN_VOLATILITY="ChaikinVolatility",e.HL_VOLATILITY="HLVolatility",e.HISTORICAL_VOLATILITY="HistoricalVolatility",e.IMPLIED_VOLATILITY="ImpVolatility",e.PERCENT_CHANGE="PercentChg",e.RELATIVE_VOLATILITY_INDEX="RelativeVolatilityIndex",e.STANDARD_DEVIATION="StandardDeviation",e.TTM_SQUEEZE="TTM_Squeeze",e.ULCER_INDEX="UlcerIndex",e.VOLATILITY_STD_DEV="VolatilityStdDev",e.VOLATILITY_SWITCH="VolatilitySwitch",e.DEMA="DEMA",e.DMA="DMA",e.DAILY_SMA="DailySMA",e.DISPLACED_EMA="DisplacedEMA",e.EHLERS_SUPER_SMOOTHER_FILTER="EhlersSuperSmootherFilter",e.FOUR_PERCENT_MODEL="FourPercentModel",e.LEGACY_EMA="LegacyEMA",e.LINEAR_REG_CH100="LinearRegCh100",e.LINEAR_REG_CH50="LinearRegCh50",e.LINEAR_REG_CH_VAR="LinearRegChVar",e.LINEAR_REG_CURVE="LinearRegCurve",e.MEDIAN_AVERAGE="MedianAverage",e.MOV_AVG_ADAPTIVE="MovAvgAdaptive",e.MOV_AVG_TRIANGULAR="MovAvgTriangular",e.PARABOLIC_SAR="ParabolicSAR",e.PPS="PPS",e.RAINBOW_AVERAGE="RainbowAverage",e.REVERSE_ENGINEERING_MACD="ReverseEngineeringMACD",e.STANDARD_ERROR_BANDS="StandardErrorBands",e.STANDARD_ERROR_CHANNEL="StandardErrorChannel",e.TEMA="TEMA",e.TIME_SERIES_FORECAST="TimeSeriesForecast",e.TTM_LRC="TTM_LRC",e.TTM_SCALPER_ALERT="TTM_ScalperAlert",e.VARIABLE_MA="VariableMA",e.WEAKNESS_IN_A_STRONG_TREND="WeaknessInAStrongTrend",e.ZIG_ZAG_HIGH_LOW="ZigZagHighLow",e.ZIG_ZAG_PERCENT="ZigZagPercent",e.ZIG_ZAG_SIGN="ZigZagSign",e.ZIG_ZAG_STEP_PATTERN="ZigZagStepPattern",e.AROON_INDICATOR="AroonIndicator",e.AROON_OSCILLATOR="AroonOscillator",e.FORECAST_OSCILLATOR="ForecastOscillator",e.HEIKIN_ASHI_DIFF="HeikinAshiDiff",e.LBR_THREE_TEN_OSCILLATOR="LBR_ThreeTenOscillator",e.LINEAR_REGR_REVERSAL="LinearRegrReversal",e.LINEAR_REGRESSION_SLOPE="LinearRegressionSlope",e.MACD_HISTOGRAM="MACDHistogram",e.MACD_TWO_LINES="MACDTwoLines",e.ONSET_TREND_DETECTOR="OnsetTrendDetector",e.POLARIZED_FRACTAL_EFFICIENCY="PolarizedFractalEfficiency",e.PRICE_OSC="PriceOsc",e.Q_STICK="QStick",e.R_SQUARED="RSquared",e.TREND_NOISE_BALANCE="TrendNoiseBalance",e.TREND_PERIODS="TrendPeriods",e.TREND_QUALITY="TrendQuality",e.VERTICAL_HORIZONTAL_FILTER="VerticalHorizontalFilter",e.VOLUME_FLOW_INDICATOR="VolumeFlowIndicator",e.VOLUME_WEIGHTED_MACD="VolumeWeightedMACD",e.VORTEX_INDICATOR="VortexIndicator",e.ZIG_ZAG_TREND_PERCENT="ZigZagTrendPercent",e.ZIG_ZAG_TREND_SIGN="ZigZagTrendSign",e))(G||{});const U4={categoryName:"Cycle Studies",items:["DetrendedPriceOsc","MarketForecast","MarketSentiment","MESASineWave","TTM_Wave"]},Ax={categoryName:"Crossover Studies",items:["ADXCrossover","BollingerBandsCrossover","MACDHistogramCrossover","MomentumCrossover","MoneyFlowIndexCrossover","MovingAvgCrossover","ParabolicSARCrossover","PriceAverageCrossover","RSICrossover","RateOfChangeCrossover","StochasticCrossover"]},V4={categoryName:"Market Strength Studies",items:["AccDist","AccumDistPrVol","ChaikinMoneyFlow","ChaikinOsc","ChaikinOscillator","DemandIndex","EaseOfMovement","KlingerOscillator","MoneyFlowIndex","NegativeVolumeIndex","OnBalanceVolume","PositiveVolumeIndex","PriceAndVolumeTrend","TradeVolumeIndex","VolumeAvg","VolumeOsc","VolumeRateOfChange"]},W4={categoryName:"Trend Studies",items:["AroonIndicator","AroonOscillator","CSI","DailySMA","DEMA","DemandIndex","DisplacedEMA","DMA","EhlersSuperSmootherFilter","ForecastOscillator","FourPercentModel","HeikinAshiDiff","LBR_ThreeTenOscillator","LegacyEMA","LinearRegCh50","LinearRegCh100","LinearRegChVar","LinearRegCurve","LinearRegrReversal","LinearRegressionSlope","MACDHistogram","MACDTwoLines","MedianAverage","MovAvgAdaptive","MovAvgTriangular","OnsetTrendDetector","ParabolicSAR","PolarizedFractalEfficiency","PPS","PriceOsc","QStick","RSquared","RainbowAverage","ReverseEngineeringMACD","StandardErrorBands","StandardErrorChannel","TEMA","TimeSeriesForecast","TrendNoiseBalance","TrendPeriods","TrendQuality","TTM_LRC","TTM_ScalperAlert","VariableMA","VerticalHorizontalFilter","VolumeFlowIndicator","VolumeWeightedMACD","VortexIndicator","WeaknessInAStrongTrend","ZigZagHighLow","ZigZagPercent","ZigZagSign","ZigZagStepPattern","ZigZagTrendPercent","ZigZagTrendSign"]},G4={categoryName:"Volatility Studies",items:["AccelerationBands","ATR","BollingerBands","BollingerBandwidth","BollingerPercentB","CSI","ChaikinVolatility","HLVolatility","HistoricalVolatility","ImpVolatility","PercentChg","RelativeVolatilityIndex","StandardDeviation","StandardErrorBands","TTM_Squeeze","UlcerIndex","VariableMA","VolatilityStdDev","VolatilitySwitch"]},zc=[Ax,U4,V4,W4,G4],Y4=["SimpleMovingAvg","PriceChannel","VWAP","OpenInterest","KeltnerChannels","StandardDevChannel","ProbabilityOfExpiringCone","PivotPoints","LinearRegTrendline","Comparison","ComparisonPercent"],q4=["ADX","AwesomeOscillator","CCI","DMI","MACD","RSI","StochasticFull","TRIX"],K4=["AccelerationBands","ADXCrossover","BollingerBands","BollingerBandsCrossover","DailySMA","DEMA","DisplacedEMA","DMA","EhlersSuperSmootherFilter","FourPercentModel","LegacyEMA","LinearRegCh50","LinearRegCh100","LinearRegChVar","LinearRegCurve","MACDHistogramCrossover","MedianAverage","MomentumCrossover","MoneyFlowIndexCrossover","MovAvgAdaptive","MovAvgTriangular","MovingAvgCrossover","ParabolicSAR","ParabolicSARCrossover","PPS","PriceAverageCrossover","RainbowAverage","RateOfChangeCrossover","ReverseEngineeringMACD","RSICrossover","StandardErrorBands","StandardErrorChannel","StochasticCrossover","TEMA","TimeSeriesForecast","TTM_LRC","TTM_ScalperAlert","VariableMA","VolumeProfile","WeaknessInAStrongTrend","ZigZagHighLow","ZigZagPercent","ZigZagSign","ZigZagStepPattern"],z4=["ChaikinMoneyFlow","DetrendedPriceOsc","MarketForecast","MarketSentiment","MESASineWave","TTM_Wave","AccDist","AccumDistPrVol","ChaikinOsc","ChaikinOscillator","DemandIndex","EaseOfMovement","KlingerOscillator","MoneyFlowIndex","NegativeVolumeIndex","OnBalanceVolume","PositiveVolumeIndex","PriceAndVolumeTrend","TradeVolumeIndex","VolumeAvg","VolumeOsc","VolumeRateOfChange","BollingerBandwidth","ImpVolatility","ATR","TTM_Squeeze","BollingerPercentB","CSI","ChaikinVolatility","HLVolatility","HistoricalVolatility","PercentChg","RelativeVolatilityIndex","StandardDeviation","UlcerIndex","VolatilityStdDev","VolatilitySwitch","AroonIndicator","AroonOscillator","ForecastOscillator","HeikinAshiDiff","LBR_ThreeTenOscillator","LinearRegrReversal","LinearRegressionSlope","MACDHistogram","MACDTwoLines","OnsetTrendDetector","PolarizedFractalEfficiency","PriceOsc","QStick","RSquared","TrendNoiseBalance","TrendPeriods","TrendQuality","VerticalHorizontalFilter","VolumeFlowIndicator","VolumeWeightedMACD","VortexIndicator","ZigZagTrendPercent","ZigZagTrendSign"],Wb=[...Y4,...q4,...K4,...z4],X4=e=>{switch(e.type){case"PriceChannel":return{length:e.length,displace:e.displace};case"VWAP":return{Num_Dev_Dn:e.numDeviationDown,Num_Dev_up:e.numDeviationUp,timeFrame:e.timeFrame};case"RSI":return{length:e.length,averageType:e.averageType,price:e.price,over_Bought:e.overbought,over_Sold:e.oversold};case"MACD":return{averageType:e.averageType,fastLength:e.fastLength,slowLength:e.slowLength,macdLength:e.macdLength};case"StochasticFull":return{averageType:e.averageType,KPeriod:e.kPeriod,DPeriod:e.dPeriod,slowing_period:e.slowingPeriod,over_bought:e.overbought,over_sold:e.oversold,priceH:e.priceH,priceL:e.priceL,priceC:e.priceC};case"CCI":return{length:e.length,over_bought:e.overbought,over_sold:e.oversold};case"SimpleMovingAvg":return{length:e.length,price:e.price};case"KeltnerChannels":return{displace:e.displace,length:e.length,price:e.price,averageType:e.averageType,factor:e.factor,trueRangeAverageType:e.trueRangeAverageType};case"TRIX":return{length:e.length,colorNormLength:e.colorNormLength,price:e.price,signalLength:e.signalLength};case"StandardDevChannel":return{price:e.price,length:e.length,deviations:e.deviations,fullRange:e.fullRange==="Yes"?void 0:e.fullRange};case"PivotPoints":return{showOnlyToday:e.showOnlyToday==="Yes",timeFrame:e.timeFrame};case"LinearRegTrendline":return{price:e.price};case"ADX":case"DMI":return{length:e.length,averageType:e.averageType};case"Price":case"Volume":case"OpenInterest":case"AwesomeOscillator":default:{const t={...e};return t.isLowerChart!==void 0&&delete t.isLowerChart,t.type!==void 0&&delete t.type,t}}};var Qt=(e=>(e.DARK="DARK",e.LIGHT="LIGHT",e))(Qt||{}),Ft=(e=>(e.FOCUS="FOCUS",e.SELECTED="SELECTED",e.SELECTED_HOVER="SELECTED_HOVER",e.INPUT_TOGGLE="INPUT_TOGGLE",e.EDITOR_BACKGROUND="EDITOR_BACKGROUND",e.LEG_BACKGROUND="LEG_BACKGROUND",e.ELEMENT_BACKGROUND="ELEMENT_BACKGROUND",e.ELEMENT_BACKGROUND_TRANSPARENT="ELEMENT_BACKGROUND_TRANSPARENT",e.ELEMENT_BACKGROUND_CONTRAST="ELEMENT_BACKGROUND_CONTRAST",e.INPUT_BACKGROUND="INPUT_BACKGROUND",e.PAGE_BACKGROUND="PAGE_BACKGROUND",e.BORDER="BORDER",e.DISABLED="DISABLED",e.PRIMARY_BTN_ACTIVE="PRIMARY_BTN_ACTIVE",e.PRIMARY_BTN_HOVER="PRIMARY_BTN_HOVER",e.PRIMARY_BTN="PRIMARY_BTN",e.SECONDARY_BTN_HOVER="SECONDARY_BTN_HOVER",e.SECONDARY_BTN_ACTIVE="SECONDARY_BTN_ACTIVE",e.SELL_HOVER="SELL_HOVER",e.SELL="SELL",e.SELL_FILL="SELL_FILL",e.SELL_ACTIVE="SELL_ACTIVE",e.SELL_BACKGROUND="SELL_BACKGROUND",e.BUY_HOVER="BUY_HOVER",e.BUY="BUY",e.BUY_FILL="BUY_FILL",e.BUY_ACTIVE="BUY_ACTIVE",e.BUY_BACKGROUND="BUY_BACKGROUND",e.PAPER_MONEY_HOVER="PAPER_MONEY_HOVER",e.PAPER_MONEY="PAPER_MONEY",e.PAPER_MONEY_ACTIVE="PAPER_MONEY_ACTIVE",e.PAPER_MONEY_SELECTED="PAPER_MONEY_SELECTED",e.TRADE_SYSTEM_TOGGLE_TEXT="TRADE_SYSTEM_TOGGLE_TEXT",e.PAPER_MONEY_SELECTED_TEXT="PAPER_MONEY_SELECTED_TEXT",e.LIVE_TRADING_SELECTED_TEXT="LIVE_TRADING_SELECTED_TEXT",e.LIVE_TRADING_TOGGLE_SCHWAB="LIVE_TRADING_TOGGLE_SCHWAB",e.NON_STANDARD_OPTION="NON_STANDARD_OPTION",e.NON_STANDARD_OPTION_RED="NON_STANDARD_OPTION_RED",e.TRADE_TICKET_ERROR="TRADE_TICKET_ERROR",e.SHADOW="SHADOW",e.AQUA="AQUA",e.ERROR_TEXT="ERROR_TEXT",e.ERROR_BACKGROUND="ERROR_BACKGROUND",e.BUY_HOVER_NO_INVERT="BUY_HOVER_NO_INVERT",e.BUY_NO_INVERT="BUY_NO_INVERT",e.BUY_ACTIVE_NO_INVERT="BUY_ACTIVE_NO_INVERT",e.BUY_BACKGROUND_NO_INVERT="BUY_BACKGROUND_NO_INVERT",e.SELL_HOVER_NO_INVERT="SELL_HOVER_NO_INVERT",e.SELL_NO_INVERT="SELL_NO_INVERT",e.SELL_ACTIVE_NO_INVERT="SELL_ACTIVE_NO_INVERT",e.SELL_BACKGROUND_NO_INVERT="SELL_BACKGROUND_NO_INVERT",e.HIGHLIGHTED_COLOR="HIGHLIGHTED_COLOR",e.NAV_DOT="NAV_DOT",e.NAV_DOT_SELECTED="NAV_DOT_SELECTED",e.STRIKE_COLUMN="STRIKE_COLUMN",e.TRANSPARENT_BACKGROUND_50="TRANSPARENT_BACKGROUND_50",e.TRANSPARENT_BACKGROUND_75="TRANSPARENT_BACKGROUND_75",e.TRANSPARENT_BACKGROUND_CONTRAST="TRANSPARENT_BACKGROUND_CONTRAST",e.CHECKBOX_BACKGROUND_DARK="CHECKBOX_BACKGROUND_DARK",e.INFORMATION_BACKGROUND="INFORMATION_BACKGROUND",e.INFORMATION_BORDER="INFORMATION_BORDER",e.DARK_BLUE="DARK_BLUE",e.PAN_BACKGROUND="PAN_BACKGROUND",e.PAN_BACKGROUND_DISABLED="PAN_BACKGROUND_DISABLED",e.SCHWAB_BLUE="SCHWAB_BLUE",e))(Ft||{});const Co={FOCUS:"#0C59B2",INPUT_TOGGLE:"#275E9B",SELECTED:"#356DAB",SELECTED_HOVER:"#427AB9",EDITOR_BACKGROUND:"#EDF6FF",LEG_BACKGROUND:"#DFEDFC",ELEMENT_BACKGROUND:"#fff",ELEMENT_BACKGROUND_TRANSPARENT:"rgba(255,255,255,0.5)",ELEMENT_BACKGROUND_CONTRAST:"#f7f7f7",INPUT_BACKGROUND:"#F1F1F1",PAGE_BACKGROUND:"#D8D8D8",BORDER:"#999",DISABLED:"#666",PRIMARY_BTN_ACTIVE:"#333",PRIMARY_BTN_HOVER:"#1f1f1f",PRIMARY_BTN:"#000",SECONDARY_BTN_HOVER:"hsla(0,0%,0%,0.15)",SECONDARY_BTN_ACTIVE:"hsla(0,0%,0%,0.05)",SELL_HOVER:"#CD4241",SELL:"#C11312",SELL_FILL:"rgba(193, 19, 18, .3)",SELL_ACTIVE:"#AD1110",SELL_BACKGROUND:"#F7E2E2",BUY_HOVER:"#399333",BUY:"#087900",BUY_FILL:"rgba(8, 121, 0, .3)",BUY_ACTIVE:"#076C00",BUY_BACKGROUND:"#D9F3D8",PAPER_MONEY_HOVER:"#A87E4B",PAPER_MONEY:"#935E1E",PAPER_MONEY_ACTIVE:"#84541A",PAPER_MONEY_SELECTED:"#F7C25B",TRADE_SYSTEM_TOGGLE_TEXT:"#000000",PAPER_MONEY_SELECTED_TEXT:"#000",LIVE_TRADING_SELECTED_TEXT:"#FFF",LIVE_TRADING_TOGGLE_SCHWAB:"#006E99",NON_STANDARD_OPTION:"#B31C1A",NON_STANDARD_OPTION_RED:"#FF7372",TRADE_TICKET_ERROR:"#FCE7CA",SHADOW:"rgba(0,0,0,0.25)",AQUA:"#009FC7",ERROR_TEXT:"#000",ERROR_BACKGROUND:"#FAD1CF",BUY_HOVER_NO_INVERT:"#399333",BUY_NO_INVERT:"#087900",BUY_ACTIVE_NO_INVERT:"#076C00",BUY_BACKGROUND_NO_INVERT:"#D9F3D8",SELL_HOVER_NO_INVERT:"#CD4241",SELL_NO_INVERT:"#C11312",SELL_ACTIVE_NO_INVERT:"#AD1110",SELL_BACKGROUND_NO_INVERT:"#F7E2E2",HIGHLIGHTED_COLOR:"#cccccc",NAV_DOT:"#666666",NAV_DOT_SELECTED:"#999999",STRIKE_COLUMN:"#D7D7D7",TRANSPARENT_BACKGROUND_50:"rgba(204, 204, 204, 0.5)",TRANSPARENT_BACKGROUND_75:"rgba(204, 204, 204, 0.75)",TRANSPARENT_BACKGROUND_CONTRAST:"rgba(255, 255, 255, 0.6)",CHECKBOX_BACKGROUND_DARK:"#29292B",INFORMATION_BACKGROUND:"#E1EEF9",INFORMATION_BORDER:"#0C59B2",DARK_BLUE:"#4B75A5",PAN_BACKGROUND:"rgba(153, 153, 153, 0.58)",PAN_BACKGROUND_DISABLED:"rgba(153, 153, 153, 0.3)",SCHWAB_BLUE:"#20A0DF"},bo={FOCUS:"#7FB5F3",INPUT_TOGGLE:"#6399D6",SELECTED:"#356DAB",SELECTED_HOVER:"#427AB9",EDITOR_BACKGROUND:"#041023",LEG_BACKGROUND:"#0B1D38",ELEMENT_BACKGROUND:"#000",ELEMENT_BACKGROUND_TRANSPARENT:"rgba(0, 0, 0, 0)",ELEMENT_BACKGROUND_CONTRAST:"#131313",INPUT_BACKGROUND:"#1F1F1F",PAGE_BACKGROUND:"#333",BORDER:"#666",DISABLED:"#999",PRIMARY_BTN_ACTIVE:"#ADADAD",PRIMARY_BTN_HOVER:"#EBEBEB",PRIMARY_BTN:"#fff",SECONDARY_BTN_HOVER:"hsla(0, 0%, 100%, 0.5)",SECONDARY_BTN_ACTIVE:"hsla(0, 0%, 100%, 0.15)",SELL_HOVER:"#FF5B5B",SELL:"#FF3333",SELL_FILL:"rgba(255, 51, 51, .3)",SELL_ACTIVE:"#E52D2D",SELL_BACKGROUND:"#470A0A",BUY_HOVER:"#66B953",BUY:"#40A829",BUY_FILL:"rgba(64, 168, 41, .3)",BUY_ACTIVE:"#399624",BUY_BACKGROUND:"#103B06",PAPER_MONEY_HOVER:"#F3B35B",PAPER_MONEY:"#F0A033",PAPER_MONEY_ACTIVE:"#D78F2D",PAPER_MONEY_SELECTED:"#F6B333",TRADE_SYSTEM_TOGGLE_TEXT:"#FFFFFF",PAPER_MONEY_SELECTED_TEXT:"#000",LIVE_TRADING_SELECTED_TEXT:"#000",LIVE_TRADING_TOGGLE_SCHWAB:"#00B7FF",NON_STANDARD_OPTION:"#FF7372",NON_STANDARD_OPTION_RED:"#FF7372",TRADE_TICKET_ERROR:"#F8C682",SHADOW:"rgba(0, 0, 0, .75)",AQUA:"#65CDE7",ERROR_TEXT:"#000",ERROR_BACKGROUND:"#F38F8A",BUY_HOVER_NO_INVERT:"#66B953",BUY_NO_INVERT:"#40A829",BUY_ACTIVE_NO_INVERT:"#399624",BUY_BACKGROUND_NO_INVERT:"#103B06",SELL_HOVER_NO_INVERT:"#FF5B5B",SELL_NO_INVERT:"#FF3333",SELL_ACTIVE_NO_INVERT:"#E52D2D",SELL_BACKGROUND_NO_INVERT:"#470A0A",HIGHLIGHTED_COLOR:"#356DAB",NAV_DOT:"#999999",NAV_DOT_SELECTED:"#666666",STRIKE_COLUMN:"#4D4D4D",TRANSPARENT_BACKGROUND_50:"rgba(51, 51, 51, 0.5)",TRANSPARENT_BACKGROUND_75:"rgba(51, 51, 51, 0.75)",TRANSPARENT_BACKGROUND_CONTRAST:"rgba(0, 0, 0, 0.6)",CHECKBOX_BACKGROUND_DARK:"#29292B",INFORMATION_BACKGROUND:"#356DAB",INFORMATION_BORDER:"#BFDAF9",DARK_BLUE:"#4B75A5",PAN_BACKGROUND:"rgba(153, 153, 153, 0.58)",PAN_BACKGROUND_DISABLED:"rgba(153, 153, 153, 0.3)",SCHWAB_BLUE:"#20A0DF"},Qh={LIGHT:Co,DARK:bo},Q4={DARK:{SELL_HOVER:bo.BUY_HOVER,BUY_HOVER:bo.SELL_HOVER,SELL:bo.BUY,BUY:bo.SELL,SELL_FILL:bo.BUY_FILL,BUY_FILL:bo.SELL_FILL,SELL_ACTIVE:bo.BUY_ACTIVE,BUY_ACTIVE:bo.SELL_ACTIVE,SELL_BACKGROUND:bo.BUY_BACKGROUND,BUY_BACKGROUND:bo.SELL_BACKGROUND},LIGHT:{SELL_HOVER:Co.BUY_HOVER,BUY_HOVER:Co.SELL_HOVER,SELL:Co.BUY,BUY:Co.SELL,SELL_FILL:Co.BUY_FILL,BUY_FILL:Co.SELL_FILL,SELL_ACTIVE:Co.BUY_ACTIVE,BUY_ACTIVE:Co.SELL_ACTIVE,SELL_BACKGROUND:Co.BUY_BACKGROUND,BUY_BACKGROUND:Co.SELL_BACKGROUND}};var Ae=(e=>(e.SINGLE="Single",e.INCREASING_HISTOGRAM="IncreasingHistogram",e.CANDLE="Candle",e.AREA="Area",e.INCREASING_VALUE="IncreasingValue",e.BOOLEAN="Boolean",e.CROSSOVER="Crossover",e.HIDDEN="Hidden",e))(Ae||{});const Re={areaGreen:{h:116,s:100,l:24,a:.3},areaRed:{h:0,s:83,l:41,a:.3},blue:{h:240,s:100,l:50,a:1},cyan:{h:180,s:100,l:50,a:1},darkCandleGreen:{h:98,s:98,l:33,a:1},darkCandleRed:{h:0,s:100,l:60,a:1},darkCrossoverGreen:{h:109,s:61,l:41,a:1},darkCrossoverRed:{h:0,s:100,l:60,a:1},darkDojiGray:{h:0,s:0,l:29,a:1},darkGreen:{h:120,s:100,l:30,a:1},darkRed:{h:0,s:100,l:35,a:1},darkVolume:{h:0,s:0,l:20,a:1},green:{h:120,s:100,l:50,a:1},lightCandleGreen:{h:116,s:100,l:24,a:1},lightCandleRed:{h:0,s:83,l:41,a:1},lightCrossoverGreen:{h:116,s:100,l:24,a:1},lightCrossoverRed:{h:0,s:83,l:41,a:1},lightDojiGray:{h:0,s:0,l:60.8,a:1},lightGray:{h:0,s:0,l:20,a:1},lightVolume:{h:0,s:0,l:85,a:1},magenta:{h:300,s:100,l:70,a:1},red:{h:0,s:100,l:50,a:1},yellow:{h:60,s:100,l:50,a:1}},Gb={isPreset:!0,isEdited:!1,type:"Single",color:Re.lightGray},Au={type:"Candle",isPreset:!0,isEdited:!1,BorderUp:Re.darkCandleGreen,BorderDown:Re.darkCandleRed,FillUp:{...Re.darkCandleGreen,a:0},FillDown:Re.darkCandleRed,Doji:{...Re.lightDojiGray,a:1}},vx={type:"Candle",isPreset:!0,isEdited:!1,BorderUp:Re.lightCandleGreen,BorderDown:Re.lightCandleRed,FillUp:{...Re.lightCandleGreen,a:0},FillDown:Re.lightCandleRed,Doji:{...Re.darkDojiGray,a:1}},vu={type:"IncreasingHistogram",isPreset:!0,isEdited:!1,NegativeAndDown:Re.red,NegativeAndUp:Re.darkRed,PositiveAndDown:Re.darkGreen,PositiveAndUp:Re.green},rc={type:"IncreasingValue",isPreset:!0,isEdited:!1,Increasing:Re.green,Decreasing:Re.red,NoChanges:Re.lightGray},Iu={type:"Area",isPreset:!0,isEdited:!1,LinePositive:Re.green,LineNegative:Re.red,AreaPositive:Re.areaGreen,AreaNegative:Re.areaRed},Em={type:"Boolean",isPreset:!0,isEdited:!1,True:Re.green,False:Re.red},Am={type:"Crossover",isPreset:!0,isEdited:!1,Above:Re.darkCrossoverGreen,Below:Re.darkCrossoverRed},Ix={type:"Crossover",isPreset:!0,isEdited:!1,Above:Re.lightCrossoverGreen,Below:Re.lightCrossoverRed},vm={type:"Hidden",isPreset:!0,isEdited:!1},Ef={Single:{type:"Single",isPreset:!1,isEdited:!1,color:Re.lightGray},Candle:Au,IncreasingHistogram:vu,IncreasingValue:rc,Area:Iu,Boolean:Em,Crossover:Am,Hidden:vm},Z4={Single:{type:"Single",isPreset:!1,isEdited:!1,color:Re.darkVolume},Candle:Au,IncreasingHistogram:vu,IncreasingValue:rc,Area:Iu,Boolean:Em,Crossover:Am,Hidden:vm},J4={Single:{type:"Single",isPreset:!1,isEdited:!1,color:Re.lightVolume},Candle:vx,IncreasingHistogram:vu,IncreasingValue:rc,Area:Iu,Boolean:Em,Crossover:Ix,Hidden:vm},e6={[Qt.LIGHT]:J4,[Qt.DARK]:Z4};var Ct=(e=>(e.NegativeAndDown="Negative and Down",e.NegativeAndUp="Negative and Up",e.PositiveAndDown="Positive and Down",e.PositiveAndUp="Positive and Up",e.BorderUp="Border Up",e.BorderDown="Border Down",e.FillUp="Fill Up",e.FillDown="Fill Down",e.Doji="Doji",e.LinePositive="Line Positive",e.LineNegative="Line Negative",e.AreaPositive="Area Positive",e.AreaNegative="Area Negative",e.Increasing="Increasing",e.Decreasing="Decreasing",e.NoChanges="No Change",e.Color="Color",e.True="True",e.False="False",e.Above="Above",e.Below="Below",e.PositiveToNegative="Positive to Negative",e.NegativeToPositive="Negative to Positive",e.Bearish="Bearish",e.Bullish="Bullish",e.Overbought="Overbought",e.Oversold="Oversold",e))(Ct||{}),xe=(e=>(e.line="LINE",e.histogram="HISTOGRAM",e.candle="CANDLE",e.area="AREA",e.bar="BAR",e.booleanPoints="BOOLEAN_POINTS",e.lineSegments="LINE_SEGMENTS",e.dots="DOTS",e.crossoverArrows="CROSSOVER_ARROWS",e.hidden="HIDDEN",e))(xe||{});const t6={LINE:{validColorStrategies:[Ae.INCREASING_VALUE,Ae.SINGLE]},HISTOGRAM:{validColorStrategies:[Ae.SINGLE,Ae.INCREASING_HISTOGRAM,Ae.INCREASING_VALUE]},CANDLE:{validColorStrategies:[Ae.CANDLE,Ae.SINGLE]},BAR:{validColorStrategies:[Ae.INCREASING_VALUE,Ae.SINGLE]},AREA:{validColorStrategies:[Ae.AREA]},BOOLEAN_POINTS:{validColorStrategies:[Ae.BOOLEAN]},LINE_SEGMENTS:{validColorStrategies:[Ae.SINGLE]},DOTS:{validColorStrategies:[Ae.SINGLE]},CROSSOVER_ARROWS:{validColorStrategies:[Ae.CROSSOVER]},HIDDEN:{validColorStrategies:[Ae.HIDDEN]}},Yb={LINE:rc,CANDLE:Au,AREA:Iu,HISTOGRAM:vu,BAR:rc,BOOLEAN_POINTS:Em,LINE_SEGMENTS:Gb,DOTS:Gb,CROSSOVER_ARROWS:Am,HIDDEN:vm},cr="volume",b1={[je.COLOR_AS_SYMBOL_TICKS]:!1,type:me.VOLUME,isLowerChart:!1},s6=["Volume"],n6={Volume:{plotType:xe.histogram,colorOptions:{type:Ae.SINGLE,isPreset:!0,isEdited:!1,color:Re.lightGray},secondaryYScale:!0,yScaleAdjustment:.25}},dr="price",E1={type:me.PRICE,isLowerChart:!1},r6=["Price"],o6={Price:{plotType:xe.candle,colorOptions:Au}};var Vi=(e=>(e.Qty="showQty",e.Mark="showMark",e.MarkChangeDollar="showMarkChangeDollar",e.MarkChangePercentage="showMarkChangePercentage",e.ITM="showITM",e))(Vi||{});const eu={showQty:!0,showMark:!0,showMarkChangeDollar:!0,showMarkChangePercentage:!0,showITM:!0};var Sa=(e=>(e.Regular="Regular",e.Weekly="Weekly",e.Quarterly="Quarterly",e.EndOfMonth="EndOfMonth",e))(Sa||{});const a6=["IMPLIED_VOLATILITY","SERIES_EXPECTED_MOVE"];var dt=(e=>(e.Call="C",e.Put="P",e))(dt||{}),Gs=(e=>(e.PUT="put",e.CALL="call",e))(Gs||{}),wo=(e=>(e.AM="AM",e.PM="PM",e))(wo||{}),Bs=(e=>(e.x10="X10",e.x32="X32",e.x64="X64",e.x128="X128",e.x256="X256",e))(Bs||{}),$t=(e=>(e.Strike="Strike",e.Delta="Delta",e.ProbITM="Prob ITM",e))($t||{});const hh=["Delta","Prob ITM"],sS={Strike:{min:0,max:Number.MAX_VALUE},Delta:{min:0,max:100},"Prob ITM":{min:0,max:100}},xx=1e99,wx=-1e99,i6={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Ox={month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"},l6={...Ox,timeZoneName:"short"};var Po=(e=>(e.America_Chicago="America/Chicago",e.America_NewYork="America/New_York",e.Asia_Singapore="Asia/Singapore",e.Asia_HongKong="Asia/Hong_Kong",e))(Po||{});const c6=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],d6={SUNDAY:"sun",MONDAY:"mon",TUESDAY:"tues",WEDNESDAY:"wed",THURSDAY:"thurs",FRIDAY:"fri",SATURDAY:"sat"},Zh={0:"sun",1:"mon",2:"tues",3:"wed",4:"thurs",5:"fri",6:"sat"};var ei=(e=>(e.plus="+",e.minus="-",e))(ei||{});const xu=new Map;xu.set("+",(e,t)=>e+t);xu.set("-",(e,t)=>e-t);const Vn=(e,t,s,n)=>e?Fs(t,s,n):xr(t),Nd=(e,t,s,n)=>e?Fs(t,s,n):ur(t),Zi=(e,t,s,n,r)=>e?Fs(t,s,r):t.toFixed(n),A1=(e,t,s,n)=>e?Fs(t,s,n):t.toString(),u6=e=>e===xx?Number.POSITIVE_INFINITY:e===wx?Number.NEGATIVE_INFINITY:e,h6=e=>{let t;const s=Math.abs(Number(e));return s>=1e12?t=e/1e12+__("T"):s>=1e9?t=e/1e9+__("B"):s>=1e6?t=e/1e6+__("M"):s>=1e3?t=e/1e3+__("K"):t=e/1+"",t},v1=(e,t=2)=>{const s=h6(e),n=parseFloat(s),r=new Intl.NumberFormat(void 0,{maximumFractionDigits:t}).format(n),o=s.charAt(s.length-1),i=isNaN(parseInt(o))?o:"";return r+i},p6=e=>isNaN(e)?void 0:e,Fr=e=>e!==void 0?p6(u6(e)):void 0,I1=new Intl.NumberFormat(void 0,{maximumFractionDigits:15}),m6=new Intl.NumberFormat(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),g6=new Intl.NumberFormat(void 0,{maximumFractionDigits:8,minimumFractionDigits:8}),Ea=new Intl.NumberFormat(void 0,{minimumFractionDigits:2,maximumFractionDigits:7}),Im=(e,t,s)=>{const n=t===Bs.x32?"00":"000",r=s?64:32,o=s?"''":"'";if(e===0)return`0${o}${n}`;const i=String(e).split(".");if(i.length<2)return`${e}${o}${n}`;const l=S6(i[1],r,t);return`${i[0]}${o}${String(l).replace(".","")}`},S6=(e,t,s)=>{const r=(+`0.${e}`*t).toFixed(2).split("."),o=r.length===2?`${r[1]}`:"0",i=`${y6(r[0],2)}${o}`;return s===Bs.x32?i.slice(0,2):i.slice(0,3)},x1=(e,t,s)=>{const n=e.split("'"),r=qb(n[0]),o=e.includes("-")?-1:1,i=n.length>1?T6(qb(n[1]),t)/32:0;return(Math.abs(r)+f6(Number((Math.floor(i*1e8)/1e8).toFixed(8)),s))*o},f6=(e,t)=>{const s=e%t;return s===0?e:e-s+t},qb=e=>isNaN(Number(e))?0:Number(e),tu=(e,t=!1,s=!1)=>{const n=t?/[^0-9'-]/g:/[^0-9']/g,r=e.replace(/^0*(\d)/,"$1").replace(n,"").replace(/'/,"x").replace(/'/g,"").replace(/x/,"'");return s&&r[0]!=="-"?`-${r}`:r},w1=(e,t,s=!1)=>{const r=tu(e,s).split("'"),o=t===Bs.x32?"00":"000";if(r.length===1)return`${r[0]}'${o}`;const i=t===Bs.x32?`${r[1]}0`.substr(0,2):`${r[1]}00`.substr(0,3);return`${r[0]}'${i}`},T6=(e,t)=>{switch(t){case Bs.x256:case Bs.x128:case Bs.x64:{const s=e*.1,r=Math.round(s%1*10)===7?.05:0;return s+r}default:return e}},y6=(e,t)=>e.padStart(t,"0"),Af=e=>{const t=1111 .toLocaleString().replace(/1/g,""),s=1.1.toLocaleString().replace(/1/g,""),n=`[${t}${s}\\d]`,r=e.replace(new RegExp(n,"g"),""),o=new RegExp(`\\${s}.*\\${s}`).test(e);if(!(r.length>0&&r!=="-"||o))return parseFloat(e.replace(new RegExp("\\"+t,"g"),"").replace(new RegExp("\\"+s),"."))},Ht="—",go="***",C6="********";function Sn(e,t){const s=Fr(e);return s!==void 0?t?go:I1.format(s):Ht}function O1(e){const t=Fr(e);return t!==void 0?I1.format(Math.round(t/1e3))+__("K"):Ht}function Rx(e){const t=Fr(e);return t!==void 0?I1.format(Math.round(t/1e6))+__("M"):Ht}function ur(e,t){const s=Fr(e);return s!==void 0?t?go:m6.format(s):Ht}function Dx(e,t){const s=Fr(e);return s!==void 0?t?go:g6.format(s):Ht}function ph(e){const t=Fr(e);return t!==void 0?t===0?`$${Ea.format(t)}`:t>0?`$${Ea.format(t)}`:`-$${Ea.format(Math.abs(t))}`:Ht}function xr(e,t,s){const n=Fr(e);return n!==void 0?t?go:`${s||""}${Ea.format(n)}`:Ht}function Fs(e,t,s=!1,n=!1){const r=Fr(e);return r!==void 0?n?go:`${Im(r,t,s)}`:Ht}const su=new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:5}),vp=new Intl.NumberFormat(void 0,{style:"currency",currency:"USD"}),vf=new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:2}),b6=new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:0}),gr=(e,t)=>{const s=Fr(e);return s!==void 0?t?go:vf.format(s):Ht},Jh=(e,t)=>{const s=Fr(e);return s!==void 0?b6.format(s):Ht},R1=(e,t)=>{const s=Fr(e);return s===void 0?Ht:t?go:s>0?`+${vf.format(s)}`:vf.format(s)},ep=e=>{const t=Fr(e);return t!==void 0?t.toLocaleString():Ht},Lx=(e,t)=>{const s=Fr(e);return s!==void 0?s.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t}):Ht},E6=e=>e?__("yes"):__("no"),A6=e=>e!==void 0&&e!=="N/A"?__(e):Ht,Hs={},v6=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"}),I6=e=>v6.format(e),mh=({hour:e,minute:t}={hour:0,minute:0},s=0)=>{const n=et().tz("America/Chicago"),r=Intl.DateTimeFormat().resolvedOptions().timeZone;return n.clone().add(s,"days").set("hours",e).set("minutes",t).set("seconds",0).clone().tz(r)},x6=e=>{const t=__("__locale")==="__locale"?"en-US":__("__locale");return Hs.intlFormatTimeShortWithoutLocale||(Hs.intlFormatTimeShortWithoutLocale=new Intl.DateTimeFormat(t,{hour:"numeric",minute:"numeric",hour12:!0})),`${Hs.intlFormatTimeShortWithoutLocale.format(e??new Date)}`},xm=e=>{const t=__("__locale")==="__locale"?"en-US":__("__locale");Hs.intlFormatDateTimeShort||(Hs.intlFormatDateTimeShort=new Intl.DateTimeFormat(t,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"}));const s=Hs.intlFormatDateTimeShort.format(e),n=et(e).tz(et.tz.guess()).zoneAbbr();return`${s} ${n}`},If=e=>{const t=__("__locale")==="__locale"?"en-US":__("__locale");return Hs.intlFormatTimeWithSeconds||(Hs.intlFormatTimeWithSeconds=new Intl.DateTimeFormat(t,{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),Hs.intlFormatTimeWithSeconds.format(e)},ti=e=>{const t=__("__locale")==="__locale"?"en-US":__("__locale");return Hs.intlFormatDateShort||(Hs.intlFormatDateShort=new Intl.DateTimeFormat(t,{year:"2-digit",month:"2-digit",day:"2-digit"})),e!==void 0?Hs.intlFormatDateShort.format(e):Ht},w6=e=>{const t=__("__locale")==="__locale"?"en-US":__("__locale");return Hs.intlFormatDateFullYear||(Hs.intlFormatDateFullYear=new Intl.DateTimeFormat(t,{year:"numeric",month:"2-digit",day:"2-digit"})),e!==void 0?Hs.intlFormatDateFullYear.format(e):Ht},ll=e=>{const t=__("__locale")==="__locale"?"en-US":__("__locale");return Hs.intlFormatDateLong||(Hs.intlFormatDateLong=new Intl.DateTimeFormat(t,{year:"numeric",month:"long",day:"numeric"})),Hs.intlFormatDateLong.format(e)},Ci=e=>{const t=__("__locale")==="__locale"?"en-US":__("__locale");return Hs.intlDateFormatter||(Hs.intlDateFormatter=new Intl.DateTimeFormat(t,{month:"short",day:"numeric"})),e?Hs.intlDateFormatter.format(e):Ht},O6=e=>{const t=__("__locale")==="__locale"?"en-US":__("__locale");Hs.intlFormatMonthYear||(Hs.intlFormatMonthYear=new Intl.DateTimeFormat(t,{month:"short",year:"numeric"}));const s=e.split(" "),n=s.join(" 01 ");return s.length===2?Hs.intlFormatMonthYear.format(new Date(n)):Ht},bi=(e,t)=>{const s=__("__locale")==="__locale"?"en-US":__("__locale");et.locale(s);const n=et.tz(e,"MM-DD-YYYY h a",t).utc().local(),r=et.tz.guess(),o=et.tz(r).zoneAbbr();return{time:n.format("h a"),day:n.format("dddd"),timeZone:o}},R6=()=>{const e=et().startOf("isoWeek"),t=et().startOf("isoWeek").isoWeekday(5);return{startWeek:{date:e.format("MM-DD-YYYY")},endWeek:{date:t.format("MM-DD-YYYY")}}},D6=e=>{const t=et.tz.guess();return et(e).tz(t).format("hh:mm A z, MMMM DD, YYYY")},Zn=(e,t)=>[V.VOLUME,"delta","gamma","theta","vega","openPrice","daysToExpiration","expiration","betaWeightingsSpx","payableDate","upcomingEarningDate",V.YIELD,V.EXD_DIV_DATE,V.IMPLIED_VOLATILITY,V.MARKET_MAKER_MOVE,V.PERCENTILE_IV,V.RHO,V.BORROW_STATUS,V.BETA,V.CLOSE,V.OPEN,V.EXTRINSIC,"margin",V.INTRINSIC,V.PE,V.PUT_CALL_RATIO,V.EPS,V.SHARES,V.RETURN_ON_RISK,V.RETURN_ON_CAPITAL,V.MARKET_CAP,V.SHORT_SALE_BORROWING_RATE,V.DIV_AMOUNT,V.OPEN_INT].includes(e)||t===void 0||t===null||t===0||typeof t=="number"&&isNaN(t)||e==="quantity"?"neutral":e!=="openCost"&&e!=="buyingPowerEffect"&&e!=="netLiquidity"&&e!=="mark"&&e!=="bid"&&e!=="ask"&&e!=="payableDate"&&e!=="upcomingEarningDate"?t>0?"positive":"negative":"",_x=(e,t)=>[...new Set(e)].map(n=>`${n.toString()}${t?__("days"):__("d")}`).join("/"),L6=e=>e.length?e.map(t=>t.split(":")[0]).join("~"):"",_6=e=>e.length?e.map(t=>Ns(t.split(":")[0])).join(" ~ "):"",Nx=e=>[...new Set(e)].map(s=>`${s.toString()}`).join("/"),Ns=e=>e===void 0||e===""?"":e.split("").join(" "),wm=e=>{if(e){const t=__("__locale")==="__locale"?"en-US":__("__locale");return new Date(e).toLocaleString(t,i6)}return""},N6=(e,t)=>{const s=__("__locale")==="__locale"?"en-US":__("__locale");return e.toLocaleString(s,t?l6:Ox)},nS=e=>e.includes(".")?e.split(".")[1].length:0,Ip=(e,t)=>{const s={hour:"",minutes:"",suffix:"am"};return s.suffix=e>=12?"pm":"am",s.hour=(e%12||12).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s.minutes=t.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),s};var at=(e=>(e.Neutral="Neutral",e.Negative="Negative",e.Positive="Positive",e.StronglyPositive="StronglyPositive",e.StronglyNegative="StronglyNegative",e))(at||{});class ci extends j.PureComponent{classNameFor(){switch(this.props.trend){case"Positive":return"positive";case"StronglyPositive":return"flash-positive";case"StronglyNegative":return"flash-negative";case"Negative":return"negative";default:return""}}render(){const t=this.props,{value:s,renderer:n}=t,r=s===void 0?Ht:n(s);return a.jsx("span",{"data-testid":"trending-number",id:t.id,className:this.classNameFor(),role:t.role,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelBy,tabIndex:t.tabIndex,children:a.jsx("span",{"aria-hidden":t.ariaHidden,children:r})})}}var Is=(e=>(e.position="position",e.trade="trade",e.draftOrder="draftOrder",e.order="order",e.workingOrder="workingOrder",e.news="news",e.alerts="alerts",e))(Is||{}),ze=(e=>(e.MARK="MARK",e.MARK_TREND="MARK_TREND",e.MARK_CHANGE="MARK_CHANGE",e.MARK_PERCENT_CHANGE="MARK_PERCENT_CHANGE",e.BID="BID",e.BID_EXCHANGE="BID_EXCHANGE",e.ASK="ASK",e.ASK_EXCHANGE="ASK_EXCHANGE",e.BID_SIZE="BID_SIZE",e.ASK_SIZE="ASK_SIZE",e.LAST_SIZE="LAST_SIZE",e.VOLUME="VOLUME",e.OPEN="OPEN",e.HIGH52="HIGH52",e.LOW52="LOW52",e.HIGH="HIGH",e.LOW="LOW",e.VWAP="VWAP",e.VOLATILITY_INDEX="VOLATILITY_INDEX",e.IMPLIED_VOLATILITY="IMPLIED_VOLATILITY",e.HISTORICAL_VOLATILITY_30_DAYS="HISTORICAL_VOLATILITY_30_DAYS",e.MARKET_CAP="MARKET_CAP",e.LAST="LAST",e.LAST_EXCHANGE="LAST_EXCHANGE",e.NET_CHANGE="NET_CHANGE",e.NET_CHANGE_PERCENT="NET_CHANGE_PERCENT",e.DELTA="DELTA",e.GAMMA="GAMMA",e.THETA="THETA",e.VEGA="VEGA",e.MARKET_MAKER_MOVE="MARKET_MAKER_MOVE",e.PUT_CALL_RATIO="PUT_CALL_RATIO",e.PERCENTILE_IV="PERCENTILE_IV",e.BETA="BETA",e.INITIAL_MARGIN="INITIAL_MARGIN",e.PE="PE",e.RHO="RHO",e.BORROW_STATUS="BORROW_STATUS",e.DIV_AMOUNT="DIV_AMOUNT",e.EPS="EPS",e.EXD_DIV_DATE="EXD_DIV_DATE",e.YIELD="YIELD",e.FRONT_VOLATILITY="FRONT_VOLATILITY",e.BACK_VOLATILITY="BACK_VOLATILITY",e.VOLATILITY_DIFFERENCE="VOLATILITY_DIFFERENCE",e.CLOSE="CLOSE",e.PROBABILITY_ITM="PROBABILITY_ITM",e.INTRINSIC="INTRINSIC",e.EXTRINSIC="EXTRINSIC",e.SHARES="SHARES",e.RETURN_ON_CAPITAL="RETURN_ON_CAPITAL",e.RETURN_ON_RISK="RETURN_ON_RISK",e.SHORT_SALE_BORROWING_RATE="SHORT_SALE_BORROWING_RATE",e.OPEN_INT="OPEN_INT",e))(ze||{}),V=(e=>(e.MARK="mark",e.MARK_TREND="trendingMark",e.BID_TREND="trendingBid",e.ASK_TREND="trendingAsk",e.MARK_CHANGE="markChange",e.MARK_PERCENT_CHANGE="markPercentChange",e.BID="bid",e.BID_EXCHANGE="bidExchange",e.ASK="ask",e.ASK_EXCHANGE="askExchange",e.HIGH52="high52",e.HIGH52_TREND="trendingHigh52",e.LOW52="low52",e.LOW52_TREND="trendingLow52",e.HIGH="high",e.HIGH_TREND="trendingHigh",e.LOW="low",e.LOW_TREND="trendingLow",e.OPEN="open",e.BID_SIZE="bidSize",e.ASK_SIZE="askSize",e.LAST_SIZE="lastSize",e.VOLUME="volume",e.VWAP="volumeWeightedAveragePrice",e.VOLATILITY_INDEX="volatilityIndex",e.IMPLIED_VOLATILITY="impliedVolatility",e.HISTORICAL_VOLATILITY_30_DAYS="historicalVolatilityThirtyDays",e.MARKET_CAP="marketCap",e.LAST="last",e.LAST_TREND="trendingLast",e.LAST_EXCHANGE="lastExchange",e.NET_CHANGE="netChange",e.NET_CHANGE_PERCENT="netChangePercent",e.DELTA="delta",e.GAMMA="gamma",e.THETA="theta",e.VEGA="vega",e.MARKET_MAKER_MOVE="marketMakerMove",e.PERCENTILE_IV="percentileIV",e.BETA="beta",e.INITIAL_MARGIN="margin",e.PE="priceToEarningsRatio",e.RHO="rho",e.BORROW_STATUS="borrowStatus",e.THEO_PRICE="theoPrice",e.OPEN_INT="openInt",e.PROBABILITY_ITM="probabilityITM",e.PROBABILITY_OTM="probabilityOTM",e.EXTRINSIC="extrinsic",e.INTRINSIC="intrinsic",e.DIV_AMOUNT="dividendAmount",e.EPS="earningsPerShare",e.EXD_DIV_DATE="exDividendDate",e.YIELD="yield",e.FRONT_VOLATILITY="frontVolatility",e.BACK_VOLATILITY="backVolatility",e.VOLATILITY_DIFFERENCE="volatilityDifference",e.PUT_CALL_RATIO="putCallRatio",e.CLOSE="close",e.SHARES="shares",e.RETURN_ON_CAPITAL="returnOnCapital",e.RETURN_ON_RISK="returnOnRisk",e.SHORT_SALE_BORROWING_RATE="shortSaleBorrowingRate",e))(V||{});const P6=e=>[at.Negative,at.Neutral,at.Positive,at.StronglyNegative,at.StronglyPositive].includes(e.trend),xf="DFF:FRED",wf=(e,t,s)=>e===void 0?s!==void 0?s:at.Neutral:e<t?s===at.Positive?at.StronglyPositive:at.Positive:e>t?s===at.Negative?at.StronglyNegative:at.Negative:s??at.Neutral,k6=(e,t,s)=>n=>{const r=s!==void 0&&s[n]!==void 0?s[n]:void 0,o=r!==void 0?wf(s[e],t,r.trend):at.Neutral;return r!==void 0&&t===r.value&&o===r.trend?r:{value:t,trend:r!==void 0?wf(s[e],t,r.trend):at.Neutral}},D1=e=>V[e],M6=(e,t)=>{const s={};return t.forEach(n=>{s[n]=e.values[n]}),s},$6=e=>/^[-+]\..*[-+]\d+[*][A-Z]+/g.test(e),j6=Nr($6),gh={},Om=(e,t)=>t.map(s=>{const n={value:void 0,trend:at.Neutral},r=j6(s.symbol),o=M6(s,e),i={symbol:s.symbol,rootSymbol:s.symbol};let l=!1;return e.forEach(c=>{const d=D1(c);let u;switch(d){case"mark":r?u=void 0:u=o[c]??o.LAST;break;case"markChange":u=o[c]??o.NET_CHANGE;break;case"markPercentChange":u=o[c]??o.NET_CHANGE_PERCENT;break;default:u=o[c]}const h=gh[s.symbol],p=k6(d,u,h);switch(h!==void 0&&h[d]!==u&&(l=!0),d){case"mark":{const m=h!==void 0&&h.trendingMark!==void 0?h.trendingMark:void 0;i.trendingMark=m!==void 0?p("trendingMark"):{value:u,trend:o.MARK_CHANGE<0?at.Negative:o.MARK_CHANGE>0?at.Positive:at.Neutral};break}case"bid":{i.trendingBid=p("trendingBid");break}case"ask":{i.trendingAsk=p("trendingAsk");break}case"last":{i.trendingLast=p("trendingLast");break}case"low":{i.trendingLow=p("trendingLow");break}case"high":{i.trendingHigh=p("trendingHigh");break}case"low52":{i.trendingLow52={value:u,trend:o.LOW<=o.LOW52?at.Negative:at.Neutral};break}case"high52":{i.trendingHigh52={value:u,trend:o.HIGH>=o.HIGH52?at.Positive:at.Neutral};break}}i[d]=u}),!l&&gh[s.symbol]!==void 0?gh[s.symbol]:(i.mark=r?void 0:i.mark,i.trendingMark=r?n:i.trendingMark,gh[s.symbol]=i,i)}),B6={type:me.CCI,length:14,overbought:100,oversold:-100,isLowerChart:!0},F6=["CCI","OverBought","ZeroLine","OverSold"],H6={CCI:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},OverBought:{plotType:xe.line,linked:!0,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},ZeroLine:{plotType:xe.line,linked:!0,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},OverSold:{plotType:xe.line,linked:!0,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},Wi={type:me.SIMPLE_MOVING_AVG,length:9,averageType:On.Simple,price:uo.Close,isLowerChart:!1},Xc=["MA"],Qc={MA:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},wu=e=>e===me.HULL_MOVING_AVG||e===me.WILDERS_SMOOTHING||e===me.WEIGHTED_MOVING_AVG||e===me.EXPONENTIAL_MOVING_AVG||e===me.SIMPLE_MOVING_AVG;var pa=(e=>(e.Above="Above",e.Below="Below",e.PositiveToNegative="Positive to Negative",e.NegativeToPositive="Negative to Positive",e.Bearish="Bearish",e.Bullish="Bullish",e.Overbought="Overbought",e.Oversold="Oversold",e))(pa||{});const Ac=e=>Ax.items.includes(e),Px=e=>e===xe.crossoverArrows,U6=e=>{switch(d3(e)){case"above":return"Above";case"below":return"Below";case"positivetonegative":return"Positive to Negative";case"negativetopositive":return"Negative to Positive";case"bearish":return"Bearish";case"bullish":return"Bullish";case"overbought":return"Overbought";case"oversold":return"Oversold";default:return e}},kx=e=>e!=null&&e.crossingType?U6(e==null?void 0:e.crossingType):void 0,V6=e=>{const t=et().year(e).month("November").startOf("month").add(3,"w").day("Thursday").date();return[e,10,t]},W6=e=>{const t=et().year(e).month("January").startOf("month").add(3,"w").day("Monday").date();return[e,0,t]},G6=e=>{const t=et().year(e).month("February").startOf("month").add(3,"w").day("Monday").date();return[e,1,t]},Y6=e=>{const t=et().year(e).month("May").endOf("month").day("Monday").date();return[e,4,t===1?25:t]},q6=e=>{const t=et().year(e).month("September").startOf("month").add(1,"w").day("Monday").date();return[e,8,t===8?t-1:t]},K6=e=>{const t=Math.floor,s=e%19,n=t(e/100),r=(n-t(n/4)-t((8*n+13)/25)+19*s+15)%30,o=r-t(r/28)*(1-t(29/(r+1))*t((21-s)/11)),i=(e+t(e/4)+o+2-n+t(n/4))%7,l=o-i,c=3+t((l+40)/44),u=l+28-31*t(c/4)-2,h=u<=0?c-1:c;return[e,h-1,u<=0?31+u:u]},z6=[W6,G6,K6,Y6,q6,V6],X6=(e,t)=>{const s=e.getFullYear(),n=t.getFullYear();let r=[];for(let o=s;o<=n;o++){const i=[[o,0,1],[o,6,4],[o,11,25]];r=[...r,...i,...z6.map(l=>l(o))]}return r},Mx=Nr(X6,(e,t)=>e.getFullYear()+t.getFullYear()),Q6=(e,t)=>({...$r[e].defaultParams,...t}),Z6=(e,t)=>{switch(e){case me.SIMPLE_MOVING_AVG:return{length:J6(t)};case me.KELTNER_CHANNELS:return{length:e$(t)};case me.VWAP:return s$(t,e);case me.STANDARD_DEV_CHANNEL:return zb(t,e,je.DEVIATIONS);case me.PROBABILITY_OF_EXPIRING_CONE:return zb(t,e,je.STD_DEV,a8,!0);default:return{}}},J6=e=>{const t=[];e.valueSeq().forEach(n=>{n.parameters.type===me.SIMPLE_MOVING_AVG&&t.push(n.parameters.length)});const s=Math.max(...t);return isNaN(s)||!isFinite(s)?r8:s+5},e$=e=>{const t=[];e.valueSeq().forEach(n=>{n.parameters.type===me.KELTNER_CHANNELS&&t.push(n.parameters.length)});const s=Math.max(...t);return isNaN(s)||!isFinite(s)?o8:s+5},t$=.5,Of=-2,Rf=2,s$=(e,t)=>{const n=e.filter(i=>i.name===t).count()*t$,r=Of+n,o=Rf-n;return{[je.NUM_DEV_DN]:r<0?r:Of,[je.NUM_DEV_UP]:o>0?o:Rf}},$x=2,Kb=.5,zb=(e,t,s,n=$x,r=!1)=>{const o=e.filter(d=>d.name===t).count(),i=r?Kb*-1:Kb,l=o*i,c=n-l;return{[s]:c>=.5&&c<=3?c:n}},n$=e=>{var t,s;return((t=$r[e])==null?void 0:t.shortName)??((s=oc[e])==null?void 0:s.shortName)??e},r$=(e,t,s)=>{const n=n$(e);switch(t){case"Volume":return __("Volume",{alternativeEnglishValue:"V"});case"MiddleLR":return __(t);case"Comparison":case"ComparisonPercent":return`${__(n)} ${s}`;default:return wu(e)||Ac(e)||n===t?n:`${n} ${__(t)}`}},jx=(e,t)=>{var n,r,o;const s=((r=(n=e[0])==null?void 0:n.plots[0])==null?void 0:r.values)??[];return((o=s[s.length-1])==null?void 0:o.x)??t},Bx=(e,t)=>s=>{const n=t.get(s.id),r=(n==null?void 0:n.parameters.isLowerChart)??!1;return e?r:!r},o$=e=>Bx(!0,e),a$=e=>Bx(!1,e),Jl=(e,t,s)=>{let n=e;switch(s){case ie.MIN1:case ie.MIN2:case ie.MIN3:case ie.MIN4:case ie.MIN5:case ie.MIN10:case ie.MIN15:case ie.MIN20:case ie.MIN30:{n=new Date(e.getTime()+t*_r[s]*6e4);break}case ie.HOUR1:case ie.HOUR2:case ie.HOUR4:{n=new Date(e.getTime()+t*_r[s]*60*6e4);break}case ie.DAY:case ie.DAY2:case ie.DAY3:case ie.DAY4:{n=new Date(e.getTime()+t*_r[s]*60*24*6e4);break}case ie.WEEK:{n=new Date(e.getTime()+t*_r[s]*60*24*7*6e4);break}case ie.MONTH:{n=new Date(e.getFullYear(),e.getMonth()+t,1);break}}return n},Xb=(e,t,s)=>{if(t.find(r=>e.getDate()===r[2]&&e.getMonth()===r[1]&&e.getFullYear()===r[0])!==void 0)switch(s){case ie.DAY:case ie.DAY2:case ie.DAY3:case ie.DAY4:{e=Jl(e,1,s);break}case ie.MIN1:case ie.MIN2:case ie.MIN3:case ie.MIN4:case ie.MIN5:case ie.MIN10:case ie.MIN15:case ie.MIN20:case ie.MIN30:case ie.HOUR1:case ie.HOUR2:case ie.HOUR4:{e=Jl(e,1,s),e=new Date(e.getTime()+24*60*6e4);break}}return new Date(e).getDay()===0?e=new Date(e.getTime()+24*60*6e4):new Date(e).getDay()===6&&(e=new Date(e.getTime()+48*60*6e4)),e},i$=(e,t,s)=>{let n=Jl(e,t,s);n.getMonth()===11&&(n=new Date(n.setMonth(n.getMonth()+1)));const r=Mx(e,n);return new Array(t).fill(void 0).reduce((o,i,l)=>{const c=o[o.length-1];let d=Jl(c,1,s);return s===ie.MONTH&&l!==t-1?[...o,d]:(d=Xb(d,r,s),l===t-1?o:[...o,d])},[Xb(Jl(e,1,s),r,s)])},Fx=(e,t,s)=>n=>{if(s===0)return n;const r=i$(t,s,e).map(o=>({x:o,y:null}));return{...n,plots:n.plots.map(o=>({...o,values:[...o.values,...r]}))}},l$={type:me.VWAP,[je.NUM_DEV_DN]:Of,[je.NUM_DEV_UP]:Rf,[je.TIME_FRAME]:Zl.DAY,isLowerChart:!1},c$=["VWAP","UpperBand","LowerBand"],d$={VWAP:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},UpperBand:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},LowerBand:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}};var Df=(e=>(e.CUSTOM="CUSTOM",e.PUBLIC="PUBLIC",e.STUDY="STUDY",e))(Df||{}),Aa=(e=>(e.VOL_AVG="VolAvg",e.MA="MA",e.MID_LINE="MidLine",e.LOWER_BAND="LowerBand",e.UPPER_BAND="UpperBand",e.FULLK="FullK",e.FULLD="FullD",e.OVERBOUGHT="OverBought",e.OVERSOLD="OverSold",e.Average="Average",e.ON_BALANCE_VOLUME="OBV",e.IMPLIED_VOLATILITY="IV",e.OPEN_INTEREST="OpInt",e.AVERAGE_TRUE_RANGE="ATR",e.AWESOME_OSCILLATOR="AO",e.TTM_SQUEEZE="TTMS",e.MIDDLE_LR="MiddleLR",e))(Aa||{});const u$={type:me.OPEN_INTEREST,isLowerChart:!1},h$=[Aa.OPEN_INTEREST],p$={OpInt:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray},secondaryYScale:!0,yScaleAdjustment:.25}},m$={type:me.KELTNER_CHANNELS,length:20,averageType:On.Simple,price:uo.Close,[je.DISPLACE]:0,[je.FACTOR]:1.5,[je.TRUE_RANGE_AVERAGE_TYPE]:On.Simple,isLowerChart:!1},g$=["Average","UpperLine","LowerLine"],S$={Average:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},LowerLine:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},UpperLine:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},f$={type:me.AWESOME_OSCILLATOR,isLowerChart:!0},T$=[Aa.AWESOME_OSCILLATOR,"ZeroLine"],y$={AO:{plotType:xe.histogram,colorOptions:{type:Ae.INCREASING_VALUE,isPreset:!1,isEdited:!1,Increasing:Re.green,Decreasing:Re.red,NoChanges:Re.lightGray}},ZeroLine:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},C$={type:me.STANDARD_DEV_CHANNEL,price:uo.Close,[je.DEVIATIONS]:$x,length:21,fullRange:Jd.YES,isLowerChart:!1},b$=["UpperLine","MiddleLine","LowerLine"],E$={UpperLine:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},MiddleLine:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},LowerLine:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},A$={type:me.PROBABILITY_OF_EXPIRING_CONE,stdDev:1,volatilityAdjust:0,isLowerChart:!1},Hx=["Upper","Lower"],v$={Upper:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},Lower:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},I$={type:me.PIVOT_POINTS,[je.SHOW_ONLY_TODAY]:Ap.NO,[je.TIME_FRAME]:Zl.DAY,isLowerChart:!1},x$=["R2","R1","PP","S1","S2"],w$={R2:{plotType:xe.lineSegments,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.red}},R1:{plotType:xe.lineSegments,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.red}},PP:{plotType:xe.lineSegments,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.magenta}},S1:{plotType:xe.lineSegments,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.green}},S2:{plotType:xe.lineSegments,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.green}}},O$={type:me.LINEAR_REG_TRENDLINE,price:uo.Close,isLowerChart:!1},R$=[Aa.MIDDLE_LR],D$={MiddleLR:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},L1="VP",_1={plotType:xe.histogram,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.cyan}},Ux="SPX",L$={type:me.COMPARISON,[je.COMPARISON_STYLE]:xe.line,[je.SECONDARY_SECURITY]:Ux,isLowerChart:!1},_$={type:me.COMPARISON_PERCENT,[je.COMPARISON_STYLE]:xe.line,[je.SECONDARY_SECURITY]:Ux,isLowerChart:!1},N$=["Comparison"],P$=["Comparison","ComparisonPercent","RawPercent"],k$={Comparison:{linked:!1,plotType:xe.line,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},M$={Comparison:{plotType:xe.hidden,colorOptions:{type:Ae.HIDDEN,isPreset:!0,isEdited:!1}},ComparisonPercent:{linked:!1,plotType:xe.line,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},RawPercent:{plotType:xe.hidden,colorOptions:{type:Ae.HIDDEN,isPreset:!0,isEdited:!1}}},$$={type:me.STOCHASTIC,isLowerChart:!0,[je.K_PERIOD]:10,[je.D_PERIOD]:10,[je.OVERBOUGHT]:70,[je.OVERSOLD]:30,[je.PRICE_H]:uo.High,[je.PRICE_L]:uo.Low,[je.PRICE_C]:uo.Close,[je.SLOWING_PERIOD]:3,[je.AVERAGE_TYPE]:On.Wilders},j$=["FullK","FullD","OverBought","OverSold"],B$={FullK:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},FullD:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},OverBought:{plotType:xe.line,linked:!0,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},OverSold:{plotType:xe.line,linked:!0,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},F$={type:me.RSI,length:12,averageType:On.Wilders,price:uo.Close,oversold:30,overbought:70,isLowerChart:!0},H$=["RSI","OverSold","OverBought"],U$={RSI:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},OverSold:{plotType:xe.line,linked:!0,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},OverBought:{plotType:xe.line,linked:!0,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},V$={type:me.MACD,fastLength:12,slowLength:26,macdLength:9,averageType:On.Exponential,isLowerChart:!0},W$=["Value","Avg","Diff","ZeroLine"],G$={Value:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},Avg:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},ZeroLine:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},Diff:{plotType:xe.histogram,colorOptions:{type:Ae.INCREASING_HISTOGRAM,isPreset:!0,isEdited:!1,NegativeAndDown:Re.red,NegativeAndUp:Re.darkRed,PositiveAndDown:Re.darkGreen,PositiveAndUp:Re.green}}},Y$={type:me.ADX,length:14,averageType:On.Wilders,isLowerChart:!0},q$=["ADX"],K$={ADX:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},z$={type:me.DMI,length:14,averageType:On.Wilders,isLowerChart:!0},X$=["DI+","DI-","ADX"],Q$={"DI+":{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},"DI-":{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},ADX:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},Z$={type:me.PRICE_CHANNEL,length:20,[je.DISPLACE]:0,isLowerChart:!1},J$=["LowerBand","UpperBand"],e8={LowerBand:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},UpperBand:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}},t8={type:me.TRIX,length:9,colorNormLength:14,price:uo.Close,signalLength:3,isLowerChart:!0},s8=["TRIX","Signal","ZeroLine"],n8={ZeroLine:{plotType:xe.line,linked:!0,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},TRIX:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},Signal:{plotType:xe.line,linked:!0,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}}};var Ji=(e=>(e.OPEN_INTEREST="OpInt",e.AVERAGE="Average",e.ZERO_LINE="ZeroLine",e.UPPER_LINE="UpperLine",e.LOWER_LINE="LowerLine",e.COMPARISON="Comparison",e.COMPARISON_PERCENT="ComparisonPercent",e.RAW_PERCENT="RawPercent",e))(Ji||{});const Qb={OpInt:"Data",ZeroLine:"Zero",Average:"Avg",UpperLine:"Upper_Band",LowerLine:"Lower_Band",Comparison:"closes",ComparisonPercent:"closes",RawPercent:"closes"},$r={[me.ADX]:{plotNames:q$,defaultParams:Y$,defaultPlotParams:K$,shortName:"ADX",readableName:"ADX"},[me.AWESOME_OSCILLATOR]:{plotNames:T$,defaultParams:f$,defaultPlotParams:y$,shortName:"AO",readableName:"Awesome Oscillator"},[me.CCI]:{plotNames:F6,defaultParams:B6,defaultPlotParams:H6,shortName:"CCI",readableName:"CCI"},[me.DMI]:{plotNames:X$,defaultParams:z$,defaultPlotParams:Q$,shortName:"DMI",readableName:"DMI"},[me.KELTNER_CHANNELS]:{plotNames:g$,defaultParams:m$,defaultPlotParams:S$,shortName:"KC",readableName:"Keltner Channels"},[me.LINEAR_REG_TRENDLINE]:{plotNames:R$,defaultParams:O$,defaultPlotParams:D$,shortName:"LR",readableName:"Linear Regression"},[me.MACD]:{plotNames:W$,defaultParams:V$,defaultPlotParams:G$,shortName:"MACD",readableName:"MACD"},[me.SIMPLE_MOVING_AVG]:{plotNames:Xc,defaultParams:Wi,defaultPlotParams:Qc,shortName:"SMA",readableName:"Moving Average"},[me.EXPONENTIAL_MOVING_AVG]:{plotNames:Xc,defaultParams:Wi,defaultPlotParams:Qc,shortName:"EMA",readableName:"Moving Average"},[me.COMPARISON]:{plotNames:N$,defaultParams:L$,defaultPlotParams:k$,shortName:"Comp",readableName:"Comparison"},[me.COMPARISON_PERCENT]:{plotNames:P$,defaultParams:_$,defaultPlotParams:M$,shortName:"Comp %",readableName:"Comparison - Percent"},[me.WEIGHTED_MOVING_AVG]:{plotNames:Xc,defaultParams:Wi,defaultPlotParams:Qc,shortName:"WMA",readableName:"Moving Average"},[me.WILDERS_SMOOTHING]:{plotNames:Xc,defaultParams:Wi,defaultPlotParams:Qc,shortName:"WS",readableName:"Moving Average"},[me.HULL_MOVING_AVG]:{plotNames:Xc,defaultParams:Wi,defaultPlotParams:Qc,shortName:"HMA",readableName:"Moving Average"},[me.OPEN_INTEREST]:{plotNames:h$,defaultParams:u$,defaultPlotParams:p$,shortName:"OpInt",readableName:"Open Interest"},[me.PIVOT_POINTS]:{plotNames:x$,defaultParams:I$,defaultPlotParams:w$,shortName:"PP",readableName:"Pivot Points"},[me.PRICE_CHANNEL]:{plotNames:J$,defaultParams:Z$,defaultPlotParams:e8,shortName:"PC",readableName:"Price Channel"},[me.PRICE]:{plotNames:r6,defaultParams:E1,defaultPlotParams:o6,shortName:"Price",readableName:"Price"},[me.PROBABILITY_OF_EXPIRING_CONE]:{plotNames:Hx,defaultParams:A$,defaultPlotParams:v$,shortName:"ProbExp",readableName:"Probability Of Expiring Cone"},[me.RSI]:{plotNames:H$,defaultParams:F$,defaultPlotParams:U$,shortName:"RSI",readableName:"RSI"},[me.STANDARD_DEV_CHANNEL]:{plotNames:b$,defaultParams:C$,defaultPlotParams:E$,shortName:"StdDev",readableName:"StdDev Channel"},[me.STOCHASTIC]:{plotNames:j$,defaultParams:$$,defaultPlotParams:B$,shortName:"Stoch",readableName:"Stochastic"},[me.TRIX]:{plotNames:s8,defaultParams:t8,defaultPlotParams:n8,shortName:"TRIX",readableName:"TRIX"},[me.VOLUME]:{plotNames:s6,defaultParams:b1,defaultPlotParams:n6,shortName:"Volume",readableName:"Volume"},[me.VWAP]:{plotNames:c$,defaultParams:l$,defaultPlotParams:d$,shortName:"VWAP",readableName:"VWAP"}},oc={[G.CHAIKIN_MONEY_FLOW]:{shortName:"CMF",readableName:"Chaikin Money Flow"},[G.DETRENDED_PRICE_OSC]:{shortName:"DPO",readableName:"Detrended Price Osc"},[G.MARKET_FORECAST]:{shortName:"MF",readableName:"Market Forecast"},[G.MARKET_SENTIMENT]:{shortName:"MS",readableName:"Market Sentiment"},[G.MESA_SINE_WAVE]:{shortName:"MSW",readableName:"MESA Sine Wave"},[G.TTM_WAVE]:{shortName:"TTMW",readableName:"TTM Wave"},[G.ADX_CROSSOVER]:{shortName:"ADXX",readableName:"ADX Crossover"},[G.BOLLINGER_BANDS_CROSSOVER]:{shortName:"BBX",readableName:"Bollinger Bands Crossover"},[G.MACD_HISTOGRAM_CROSSOVER]:{shortName:"MACDHX",readableName:"MACD Histogram Crossover"},[G.MOMENTUM_CROSSOVER]:{shortName:"MX",readableName:"Momentum Crossover"},[G.MONEY_FLOW_INDEX_CROSSOVER]:{shortName:"MFIX",readableName:"Money Flow Index Crossover"},[G.MOVING_AVG_CROSSOVER]:{shortName:"MAX",readableName:"Moving Avg Crossover"},[G.PARABOLIC_SAR_CROSSOVER]:{shortName:"PSARX",readableName:"Parabolic SAR Crossover"},[G.PRICE_AVERAGE_CROSSOVER]:{shortName:"PAX",readableName:"Price Average Crossover"},[G.RSI_CROSSOVER]:{shortName:"RSIX",readableName:"RSI Crossover"},[G.RATE_OF_CHANGE_CROSSOVER]:{shortName:"ROCX",readableName:"Rate Of Change Crossover"},[G.STOCHASTIC_CROSSOVER]:{shortName:"StochX",readableName:"Stochastic Crossover"},[G.ACC_DIST]:{shortName:"AD",readableName:"Acc Dist"},[G.ACCUM_DIST_PR_VOL]:{shortName:"ADPV",readableName:"Accum Dist Pr Volume"},[G.ADVANCE_DECLINE]:{shortName:"AD",readableName:"Advance Decline"},[G.CHAIKIN_OSC]:{shortName:"CO",readableName:"Chaikin Osc"},[G.CHAIKIN_OSCILLATOR]:{shortName:"CO",readableName:"Chaikin Oscillator"},[G.CUMULATIVE_VOLUME_INDEX]:{shortName:"CVI",readableName:"Cumulative Volume Index"},[G.DEMAND_INDEX]:{shortName:"DI",readableName:"Demand Index"},[G.EASE_OF_MOVEMENT]:{shortName:"EOM",readableName:"Ease Of Movement"},[G.KLINGER_OSCILLATOR]:{shortName:"KO",readableName:"Klinger Oscillator"},[G.MC_CLELLAN_OSCILLATOR]:{shortName:"MCO",readableName:"McClellan Oscillator"},[G.MC_CLELLAN_SUMMATION_INDEX]:{shortName:"MCSI",readableName:"McClellan Summation Index"},[G.MONEY_FLOW_INDEX]:{shortName:"MFI",readableName:"Money Flow Index"},[G.NEGATIVE_VOLUME_INDEX]:{shortName:"NVI",readableName:"Negative Volume Index"},[G.ON_BALANCE_VOLUME]:{shortName:"OBV",readableName:"On-Balance Volume"},[G.POSITIVE_VOLUME_INDEX]:{shortName:"PVI",readableName:"Positive Volume Index"},[G.PRICE_AND_VOLUME_TREND]:{shortName:"PAVT",readableName:"Price And Volume Trend"},[G.TRADE_VOLUME_INDEX]:{shortName:"TVI",readableName:"Trade Volume Index"},[G.VOLUME_AVG]:{shortName:"VA",readableName:"Volume Avg"},[G.VOLUME_OSC]:{shortName:"VO",readableName:"Volume Osc"},[G.VOLUME_PROFILE]:{shortName:"VP",readableName:"Volume Profile",defaultPlotParams:_1},[G.VOLUME_RATE_OF_CHANGE]:{shortName:"VO",readableName:"Volume Rate Of Change"},[G.BOLLINGER_BANDS]:{shortName:"BB",readableName:"Bollinger Bands"},[G.IMPLIED_VOLATILITY]:{shortName:"IV",readableName:"Implied Volatility"},[G.ATR]:{shortName:"ATR",readableName:"ATR"},[G.TTM_SQUEEZE]:{shortName:"TTMS",readableName:"TTM Squeeze"},[G.ACCELERATION_BANDS]:{shortName:"AB",readableName:"Acceleration Bands"},[G.BOLLINGER_BANDWIDTH]:{shortName:"BB",readableName:"Bollinger Bandwidth"},[G.BOLLINGER_PERCENT_B]:{shortName:"BPB",readableName:"Bollinger Percent B"},[G.CSI]:{shortName:"CSI",readableName:"CSI"},[G.CHAIKIN_VOLATILITY]:{shortName:"CV",readableName:"Chaikin Volatility"},[G.HL_VOLATILITY]:{shortName:"HLV",readableName:"HL Volatility"},[G.HISTORICAL_VOLATILITY]:{shortName:"HV",readableName:"Historical Volatility"},[G.PERCENT_CHANGE]:{shortName:"PC",readableName:"Percent Change"},[G.RELATIVE_VOLATILITY_INDEX]:{shortName:"RVI",readableName:"Relative Volatility Index"},[G.STANDARD_DEVIATION]:{shortName:"SD",readableName:"Standard Deviation"},[G.STANDARD_ERROR_BANDS]:{shortName:"SEB",readableName:"Standard Error Bands"},[G.ULCER_INDEX]:{shortName:"UI",readableName:"Ulcer Index"},[G.VARIABLE_MA]:{shortName:"VMA",readableName:"Variable MA"},[G.VOLATILITY_STD_DEV]:{shortName:"VSD",readableName:"Volatility Std Dev"},[G.VOLATILITY_SWITCH]:{shortName:"VS",readableName:"Volatility Switch"},[G.DEMA]:{shortName:"DEMA",readableName:"DEMA"},[G.DMA]:{shortName:"DMA",readableName:"DMA"},[G.DAILY_SMA]:{shortName:"DailySMA",readableName:"Daily SMA"},[G.DISPLACED_EMA]:{shortName:"DisEMA",readableName:"Displaced EMA"},[G.EHLERS_SUPER_SMOOTHER_FILTER]:{shortName:"ESSF",readableName:"Ehlers Super Smoother Filter"},[G.FOUR_PERCENT_MODEL]:{shortName:"FPM",readableName:"Four Percent Model"},[G.LEGACY_EMA]:{shortName:"LEMA",readableName:"Legacy EMA"},[G.LINEAR_REG_CH100]:{shortName:"LinReg100",readableName:"Linear Reg Ch100"},[G.LINEAR_REG_CH50]:{shortName:"LineReg50",readableName:"Linear Reg Ch50"},[G.LINEAR_REG_CH_VAR]:{shortName:"LinRegVar",readableName:"Linear Reg ChVar"},[G.LINEAR_REG_CURVE]:{shortName:"LinRegCurve",readableName:"Linear Reg Curve"},[G.MEDIAN_AVERAGE]:{shortName:"MedAvg",readableName:"Median Average"},[G.MOV_AVG_ADAPTIVE]:{shortName:"MAA",readableName:"Mov Avg Adaptive"},[G.MOV_AVG_TRIANGULAR]:{shortName:"MATri",readableName:"Mov Avg Triangular"},[G.PARABOLIC_SAR]:{shortName:"PSAR",readableName:"Parabolic SAR"},[G.PPS]:{shortName:"PPS",readableName:"PPS"},[G.RAINBOW_AVERAGE]:{shortName:"Rainbow",readableName:"Rainbow Average"},[G.REVERSE_ENGINEERING_MACD]:{shortName:"REMACD",readableName:"Reverse Engineering MACD"},[G.STANDARD_ERROR_CHANNEL]:{shortName:"StdErrChnl",readableName:"Standard Error Channel"},[G.TEMA]:{shortName:"TEMA",readableName:"TEMA"},[G.TIME_SERIES_FORECAST]:{shortName:"TSF",readableName:"Time Series Forecast"},[G.TTM_LRC]:{shortName:"TTMLRC",readableName:"TTMLRC"},[G.TTM_SCALPER_ALERT]:{shortName:"TTMScalp",readableName:"TTM Scalper Alert"},[G.WEAKNESS_IN_A_STRONG_TREND]:{shortName:"WAST",readableName:"Weakness In A Strong Trend"},[G.ZIG_ZAG_HIGH_LOW]:{shortName:"ZZHL",readableName:"ZigZag High Low"},[G.ZIG_ZAG_PERCENT]:{shortName:"ZZPerc",readableName:"ZigZag Percent"},[G.ZIG_ZAG_SIGN]:{shortName:"ZZSign",readableName:"ZigZag Sign"},[G.ZIG_ZAG_STEP_PATTERN]:{shortName:"ZZPattern",readableName:"ZigZag Step Pattern"},[G.AROON_INDICATOR]:{shortName:"AroonInd",readableName:"Aroon Indicator"},[G.AROON_OSCILLATOR]:{shortName:"AroonOsc",readableName:"Aroon Oscillator"},[G.FORECAST_OSCILLATOR]:{shortName:"Forecast",readableName:"Forecast Oscillator"},[G.HEIKIN_ASHI_DIFF]:{shortName:"HA Diff",readableName:"Heikin Ashi Diff"},[G.LBR_THREE_TEN_OSCILLATOR]:{shortName:"LBR 3 10",readableName:"LBR Three Ten Osc"},[G.LINEAR_REGR_REVERSAL]:{shortName:"LinRegRev",readableName:"Linear Regression Rev"},[G.LINEAR_REGRESSION_SLOPE]:{shortName:"LinRegSlope",readableName:"Linear Regression Slope"},[G.MACD_HISTOGRAM]:{shortName:"MACD Hist",readableName:"MACD Histogram"},[G.MACD_TWO_LINES]:{shortName:"MACD 2",readableName:"MACD Two Lines"},[G.ONSET_TREND_DETECTOR]:{shortName:"OTD",readableName:"Onset Trend Detector"},[G.POLARIZED_FRACTAL_EFFICIENCY]:{shortName:"PFE",readableName:"Polarized Fractal Efficiency"},[G.PRICE_OSC]:{shortName:"Price Osc",readableName:"Price Osc"},[G.Q_STICK]:{shortName:"QStick",readableName:"QStick"},[G.R_SQUARED]:{shortName:"RSquared",readableName:"RSquared"},[G.TREND_NOISE_BALANCE]:{shortName:"TNB",readableName:"Trend Noise Balance"},[G.TREND_PERIODS]:{shortName:"Trend Per",readableName:"Trend Periods"},[G.TREND_QUALITY]:{shortName:"Trend Qua",readableName:"Trend Quality"},[G.VERTICAL_HORIZONTAL_FILTER]:{shortName:"VHF",readableName:"Vertical Horizontal Filter"},[G.VOLUME_FLOW_INDICATOR]:{shortName:"VFI",readableName:"Volume Flow Indicator"},[G.VOLUME_WEIGHTED_MACD]:{shortName:"VWMACD",readableName:"Volume Weighted MACD"},[G.VORTEX_INDICATOR]:{shortName:"Vortex",readableName:"Vortex Indicator"},[G.ZIG_ZAG_TREND_PERCENT]:{shortName:"ZZ Perc",readableName:"ZigZag Trend Percent"},[G.ZIG_ZAG_TREND_SIGN]:{shortName:"ZZ Sign",readableName:"ZigZag Trend Sign"}},r8=9,o8=20,a8=1,rS="AddStudyMenu";var Gi=(e=>(e.BUY="Buy",e.SELL="Sell",e.FLATTEN="Flatten",e.QTY="Qty",e.AUTO_SEND="Auto Send",e))(Gi||{});const N1={Buy:{title:"Buy",ariaTitle:"Buy"},Flatten:{title:"Flatten",ariaTitle:"Flatten"},Qty:{title:"Qty",ariaTitle:"Quantity"},Sell:{title:"Sell",ariaTitle:"Sell"},"Auto Send":{title:"Auto Send",ariaTitle:"Auto Send"}},i8="ActiveTraderSettings",P1=["Buy","Sell","Flatten","Qty","Auto Send"],Vx=P1.filter(e=>e!=="Flatten");var Xn=(e=>(e.BID="BID",e.ASK="ASK",e.PROBABILITY_ITM="PROBABILITY_ITM",e.PROBABILITY_OTM="PROBABILITY_OTM",e.IMPLIED_VOLATILITY="IMPLIED_VOLATILITY",e.EXTRINSIC="EXTRINSIC",e.INTRINSIC="INTRINSIC",e.OPEN_INT="OPEN_INT",e.VOLUME="VOLUME",e.THEO_PRICE="THEO_PRICE",e.DELTA="DELTA",e.GAMMA="GAMMA",e.THETA="THETA",e.VEGA="VEGA",e.RHO="RHO",e.LAST="LAST",e.MARK="MARK",e.MARK_CHANGE="MARK_CHANGE",e.MARK_PERCENT_CHANGE="MARK_PERCENT_CHANGE",e.RETURN_ON_RISK="RETURN_ON_RISK",e.strike="strike",e.RETURN_ON_CAPITAL="RETURN_ON_CAPITAL",e))(Xn||{});const yn={BID:{request:"BID",shortTitle:"Bid",title:"Bid",movable:!1},ASK:{request:"ASK",shortTitle:"Ask",title:"Ask",movable:!1},PROBABILITY_ITM:{request:"PROBABILITY_ITM",shortTitle:"Prob ITM",title:"Prob ITM"},PROBABILITY_OTM:{request:"PROBABILITY_OTM",shortTitle:"Prob OTM",title:"Prob OTM"},IMPLIED_VOLATILITY:{request:"IMPLIED_VOLATILITY",shortTitle:"IV",title:"Implied Volatility"},RETURN_ON_RISK:{request:"RETURN_ON_RISK",shortTitle:"RoR",title:"Return on Risk"},EXTRINSIC:{request:"EXTRINSIC",shortTitle:"ExtVal",title:"Extrinsic"},INTRINSIC:{request:"INTRINSIC",shortTitle:"IntVal",title:"Intrinsic"},OPEN_INT:{request:"OPEN_INT",shortTitle:"Open Int",title:"Open Int"},VOLUME:{request:"VOLUME",shortTitle:"Volume",title:"Volume"},THEO_PRICE:{request:"THEO_PRICE",shortTitle:"Theo Price",title:"Theo Price"},DELTA:{request:"DELTA",shortTitle:"Delta",title:"Delta"},GAMMA:{request:"GAMMA",shortTitle:"Gamma",title:"Gamma"},THETA:{request:"THETA",shortTitle:"Theta",title:"Theta"},VEGA:{request:"VEGA",shortTitle:"Vega",title:"Vega"},RHO:{request:"RHO",shortTitle:"Rho",title:"Rho"},LAST:{request:"LAST",shortTitle:"Last",title:"Last"},MARK:{request:"MARK",shortTitle:"Mark",title:"Mark"},MARK_CHANGE:{request:"MARK_CHANGE",shortTitle:"Mark Chng",title:"Mark Chng"},MARK_PERCENT_CHANGE:{request:"MARK_PERCENT_CHANGE",shortTitle:"Mark Chng %",title:"Mark Chng %"},strike:{request:"strike",shortTitle:"Strike",title:"Strike"},RETURN_ON_CAPITAL:{request:"RETURN_ON_CAPITAL",shortTitle:"RoC",title:"Return on Capital"}},k1=Object.keys(yn).filter(e=>e!=="strike"),Wx=["BID","ASK","PROBABILITY_ITM","DELTA","OPEN_INT","VOLUME"],l8=Nt(Qr(Xn)),Pi="BEST",oS=2147483647,Gx={[On.Simple]:me.SIMPLE_MOVING_AVG,[On.Exponential]:me.EXPONENTIAL_MOVING_AVG,[On.Weighted]:me.WEIGHTED_MOVING_AVG,[On.Wilders]:me.WILDERS_SMOOTHING,[On.Hull]:me.HULL_MOVING_AVG},c8=[me.SIMPLE_MOVING_AVG,me.EXPONENTIAL_MOVING_AVG,me.WEIGHTED_MOVING_AVG,me.WILDERS_SMOOTHING,me.HULL_MOVING_AVG],d8={[me.SIMPLE_MOVING_AVG]:"SMA",[me.EXPONENTIAL_MOVING_AVG]:"AvgExp",[me.WEIGHTED_MOVING_AVG]:"AvgWtd",[me.WILDERS_SMOOTHING]:"WS",[me.HULL_MOVING_AVG]:"HMA"},si=e=>Object.keys(en).includes(e),Yx=e=>Object.keys(N1).includes(e),di=e=>Object.keys(yn).includes(e),xp=e=>Object.keys($r).includes(e),Yo=e=>Object.keys(oc).includes(e),u8=(e,t)=>{var s,n,r,o;if(si(e)&&si(t)){const i=en[e].title,l=en[t].title;return i.toLocaleLowerCase()>l.toLocaleLowerCase()?1:-1}if(di(e)&&di(t)){const i=yn[e].title,l=yn[t].title;return i.toLocaleLowerCase()>l.toLocaleLowerCase()?1:-1}if((xp(e)||Yo(e))&&(xp(t)||Yo(t))){const i=((s=$r[e])==null?void 0:s.readableName)??((n=oc[e])==null?void 0:n.readableName),l=((r=$r[t])==null?void 0:r.readableName)??((o=oc[t])==null?void 0:o.readableName);return i.toLocaleLowerCase()>l.toLocaleLowerCase()?1:-1}return 0},h8=(e,t)=>T8[t].filter(s=>!e.includes(s)),Zb=(e,t,s)=>e.filter(n=>{var o;const r=!s;return((o=t.find(i=>i.name===n))==null?void 0:o.parameters.isLowerChart)===r}),vc=e=>{switch(e){case"optionChain":return Le.OptionChainTable;case"position":return Le.PositionsTable;case"trade":return Le.TradeTable;case"watchlist":return Le.WatchlistTable;case"scans":return Le.ScansTable;case"study":return Le.StudiesMenuOpened;case"futuresChain":return Le.FuturesChain}},Lf=e=>{var t,s,n;if(di(e)){const r=(t=yn[e])==null?void 0:t.shortTitle;return r??""}else if(si(e)){const r=((s=en[e])==null?void 0:s.shortTitle)??((n=en[e])==null?void 0:n.title);return r??""}return""},Rm=e=>{var t,s,n,r,o;return xp(e)?__(((t=$r[e])==null?void 0:t.readableName)??"",{namespace:"AddStudyMenu"}):Yo(e)?__(((s=oc[e])==null?void 0:s.readableName)??"",{namespace:"AddStudyMenu"}):di(e)?((n=yn[e])==null?void 0:n.title)??"":si(e)?((r=en[e])==null?void 0:r.title)??"":Yx(e)?((o=N1[e])==null?void 0:o.title)??"":""},Pd=e=>{var t,s,n,r;if(si(e)){const o=((t=en[e])==null?void 0:t.ariaTitle)??((s=en[e])==null?void 0:s.title);return o}else if(di(e)){const o=(n=yn[e])==null?void 0:n.shortTitle;return o??""}else if(Yx(e)){const o=(r=N1[e])==null?void 0:r.ariaTitle;return o??""}return""},p8={quantity:null,account:null},m8={daysToExpiration:null,expiration:null,description:null},g8={mark:null,markChange:null,[V.OPEN]:null,[V.MARK_PERCENT_CHANGE]:null,[V.VOLUME]:null,[V.BID]:null,[V.ASK]:null,[V.MARKET_MAKER_MOVE]:null,[V.PERCENTILE_IV]:null,[V.IMPLIED_VOLATILITY]:null,[V.HIGH52]:null,[V.LOW52]:null,[V.LAST]:null,[V.LOW]:null,[V.HIGH]:null,[V.RHO]:null,[V.BORROW_STATUS]:null,[V.YIELD]:null,[V.EXD_DIV_DATE]:null,[V.BETA]:null,[V.CLOSE]:null,[V.INTRINSIC]:null,[V.EXTRINSIC]:null,[V.PE]:null,[V.EPS]:null,[V.SHARES]:null,[V.PUT_CALL_RATIO]:null,[V.RETURN_ON_RISK]:null,[V.RETURN_ON_CAPITAL]:null,[V.MARKET_CAP]:null,[V.SHORT_SALE_BORROWING_RATE]:null,[V.DIV_AMOUNT]:null,[V.OPEN_INT]:null},S8={quantity:null,openCost:null,netLiquidity:null,plOpen:null,openPrice:null,plOverallPercent:null,plYtd:null,plYtdPercent:null,account:null,plDay:null,plDayPercent:null,delta:null,gamma:null,theta:null,vega:null,margin:null,buyingPowerEffect:null,betaWeightingsSpx:null};var or=(e=>(e.Positions="positions",e.Quotes="quotes",e.Instruments="instruments",e.WorkingOrders="workingOrders",e.AggregatedPositions="aggregatedPositions",e.CalendarEvents="calendarEvents",e))(or||{});const en={quantity:{id:"quantity",domain:"positions",title:"Qty",ariaTitle:"Quantity"},openCost:{id:"openCost",domain:"positions",title:"Cost"},netLiquidity:{id:"netLiquidity",domain:"positions",title:"Net Liq",ariaTitle:"Net Liquidity"},plOpen:{id:"plOpen",domain:"positions",title:"P/L Open $",ariaTitle:"PL Open"},openPrice:{id:"openPrice",domain:"positions",title:"Trade Price"},plOverallPercent:{id:"plOverallPercent",domain:"positions",title:"P/L Open %",ariaTitle:"PL Open percent"},plYtd:{id:"plYtd",domain:"positions",title:"P/L YTD $",ariaTitle:"PL YTD "},plYtdPercent:{id:"plYtdPercent",domain:"positions",title:"P/L YTD %",ariaTitle:"PL YTD percent"},plDay:{id:"plDay",domain:"positions",title:"P/L Day $",ariaTitle:"PL Day"},plDayPercent:{id:"plDayPercent",domain:"positions",title:"P/L Day %",ariaTitle:"PL Day percent"},delta:{id:"delta",domain:"positions",title:"Delta (Δ)",ariaTitle:"Delta"},gamma:{id:"gamma",domain:"positions",title:"Gamma (Γ)",ariaTitle:"Gamma"},theta:{id:"theta",domain:"positions",title:"Theta (Θ)",ariaTitle:"Theta"},vega:{id:"vega",domain:"positions",title:"Vega (ν)",ariaTitle:"Vega"},buyingPowerEffect:{id:"buyingPowerEffect",domain:"positions",title:"BP Effect",ariaTitle:"Buying power effect"},account:{id:"account",domain:"positions",title:"Account",ariaTitle:"Account"},betaWeightingsSpx:{id:"betaWeightingsSpx",domain:"positions",title:"Beta (β)",shortTitle:"β (SPX)"},mark:{id:"mark",domain:"quotes",title:"Mark"},markChange:{id:"markChange",domain:"quotes",title:"Mark Chng $",ariaTitle:"Mark change value"},[V.OPEN]:{id:V.OPEN,domain:"quotes",title:"Open"},[V.MARK_PERCENT_CHANGE]:{id:V.MARK_PERCENT_CHANGE,domain:"quotes",title:"Mark Chng %",ariaTitle:"Mark change percent"},[V.VOLUME]:{id:V.VOLUME,domain:"quotes",title:"Volume"},[V.BID]:{id:V.BID,domain:"quotes",title:"Bid"},[V.ASK]:{id:V.ASK,domain:"quotes",title:"Ask"},daysToExpiration:{id:"daysToExpiration",domain:"instruments",title:"Days to Expiration",shortTitle:"DTE"},expiration:{id:"expiration",domain:"instruments",title:"Last Trade Date",shortTitle:"LTD"},[V.YIELD]:{id:V.YIELD,domain:"quotes",title:"Yield"},[V.EXD_DIV_DATE]:{id:V.EXD_DIV_DATE,domain:"quotes",title:"Ex Date"},margin:{id:"margin",domain:"positions",title:"Margin Req",ariaTitle:"margin requirement"},[V.MARKET_MAKER_MOVE]:{id:V.MARKET_MAKER_MOVE,domain:"quotes",title:"Market Maker Move",shortTitle:"MMM"},[V.PERCENTILE_IV]:{id:V.PERCENTILE_IV,domain:"quotes",title:"IV Percentile",shortTitle:"IV Pctl"},[V.IMPLIED_VOLATILITY]:{id:V.IMPLIED_VOLATILITY,domain:"quotes",title:"Implied Volatility",shortTitle:"IV"},[V.HIGH52]:{id:V.HIGH52,domain:"quotes",title:"52 week high",shortTitle:"52High"},[V.LOW52]:{id:V.LOW52,domain:"quotes",title:"52 week low",shortTitle:"52Low"},[V.LAST]:{id:V.LAST,domain:"quotes",title:"Last"},[V.RHO]:{id:V.RHO,domain:"quotes",title:"Rho"},[V.BORROW_STATUS]:{id:V.BORROW_STATUS,domain:"quotes",title:"HTB/ETB",ariaTitle:"Borrow status"},[V.LOW]:{id:V.LOW,domain:"quotes",title:"Daily Low",shortTitle:"Low"},[V.EXTRINSIC]:{id:V.EXTRINSIC,domain:"quotes",title:"Extrinsic",shortTitle:"ExtVal"},[V.HIGH]:{id:V.HIGH,domain:"quotes",title:"Daily High",shortTitle:"High"},[V.BETA]:{id:V.BETA,domain:"quotes",title:"Beta"},[V.CLOSE]:{id:V.CLOSE,domain:"quotes",title:"Yesterday Close",shortTitle:"Close",namespace:"Alerts"},[V.INTRINSIC]:{id:V.INTRINSIC,domain:"quotes",title:"Intrinsic",shortTitle:"IntVal"},description:{id:"description",domain:"instruments",title:"Description",shortTitle:"Description"},[V.PE]:{id:V.PE,domain:"quotes",title:"PE"},[V.EPS]:{id:V.EPS,domain:"quotes",title:"EPS"},[V.SHARES]:{id:V.SHARES,domain:"quotes",title:"Shares"},[V.PUT_CALL_RATIO]:{id:V.PUT_CALL_RATIO,domain:"quotes",title:"Put/Call Ratio",shortTitle:"P/C Ratio"},[V.RETURN_ON_RISK]:{id:V.RETURN_ON_RISK,domain:"quotes",title:"Return on Risk",shortTitle:"RoR"},[V.RETURN_ON_CAPITAL]:{id:V.RETURN_ON_CAPITAL,domain:"quotes",title:"Return on Capital",shortTitle:"RoC"},[V.MARKET_CAP]:{id:V.MARKET_CAP,domain:"quotes",title:"Market Cap $M",shortTitle:"Market Cap"},[V.SHORT_SALE_BORROWING_RATE]:{id:V.SHORT_SALE_BORROWING_RATE,domain:"quotes",title:"Short Sale Borrowing Rate",shortTitle:"Borrow %"},[V.DIV_AMOUNT]:{id:V.DIV_AMOUNT,domain:"quotes",title:"Dividend Amount",shortTitle:"Div Amount"},payableDate:{id:"payableDate",domain:"calendarEvents",title:"Pay Date",shortTitle:"Pay Date"},upcomingEarningDate:{id:"upcomingEarningDate",domain:"calendarEvents",title:"Upcoming Earnings",shortTitle:"Earnings"},[V.OPEN_INT]:{id:V.OPEN_INT,domain:"quotes",title:"Open Interest",shortTitle:"Open Int"}},M1={mark:null,markChange:null,quantity:null,plDay:null,plOpen:null,openCost:null,netLiquidity:null,openPrice:null,buyingPowerEffect:null,delta:null,gamma:null,theta:null,vega:null,plYtd:null,plOverallPercent:null,plYtdPercent:null,plDayPercent:null,daysToExpiration:null,expiration:null,account:null,betaWeightingsSpx:null,[V.MARK_PERCENT_CHANGE]:null,[V.HIGH52]:null,[V.LOW52]:null,[V.BID]:null,[V.ASK]:null,[V.LOW]:null,[V.HIGH]:null,[V.IMPLIED_VOLATILITY]:null,[V.MARKET_MAKER_MOVE]:null,[V.PERCENTILE_IV]:null,[V.BORROW_STATUS]:null,[V.YIELD]:null,margin:null,[V.EXD_DIV_DATE]:null,[V.INTRINSIC]:null,description:null,[V.EXTRINSIC]:null,[V.PE]:null,[V.EPS]:null,[V.SHARES]:null,[V.PUT_CALL_RATIO]:null,[V.RETURN_ON_RISK]:null,[V.RETURN_ON_CAPITAL]:null,[V.MARKET_CAP]:null,[V.VOLUME]:null,[V.CLOSE]:null,[V.DIV_AMOUNT]:null},_f=Object.keys(M1),qx={[V.MARK]:null,[V.MARK_CHANGE]:null,[V.MARK_PERCENT_CHANGE]:null,[V.VOLUME]:null,[V.BID]:null,[V.ASK]:null,[V.DELTA]:null,[V.GAMMA]:null,[V.THETA]:null,[V.VEGA]:null,daysToExpiration:null,expiration:null,[V.YIELD]:null,[V.EXD_DIV_DATE]:null,[V.HIGH52]:null,[V.LOW52]:null,[V.IMPLIED_VOLATILITY]:null,[V.MARKET_MAKER_MOVE]:null,[V.PERCENTILE_IV]:null,[V.LAST]:null,[V.LOW]:null,[V.HIGH]:null,[V.RHO]:null,[V.BORROW_STATUS]:null,[V.BETA]:null,[V.CLOSE]:null,description:null,[V.PE]:null,[V.PUT_CALL_RATIO]:null,[V.EPS]:null,[V.SHARES]:null,[V.MARKET_CAP]:null,[V.SHORT_SALE_BORROWING_RATE]:null,payableDate:null,upcomingEarningDate:null,[V.DIV_AMOUNT]:null,[V.OPEN_INT]:null},f8={[V.MARK]:null,[V.MARK_CHANGE]:null,[V.MARK_PERCENT_CHANGE]:null,[V.VOLUME]:null,[V.BID]:null,[V.ASK]:null,[V.DELTA]:null,[V.GAMMA]:null,[V.THETA]:null,[V.VEGA]:null,daysToExpiration:null,expiration:null,[V.YIELD]:null,[V.EXD_DIV_DATE]:null,[V.HIGH52]:null,[V.LOW52]:null,[V.IMPLIED_VOLATILITY]:null,[V.MARKET_MAKER_MOVE]:null,[V.PERCENTILE_IV]:null,[V.LAST]:null,[V.LOW]:null,[V.HIGH]:null,[V.RHO]:null,[V.BORROW_STATUS]:null,[V.BETA]:null,[V.CLOSE]:null,description:null,[V.PE]:null,[V.EPS]:null,[V.SHARES]:null,[V.PUT_CALL_RATIO]:null,[V.MARKET_CAP]:null,[V.DIV_AMOUNT]:null,[V.OPEN_INT]:null},Kx=Object.keys(qx),zx=Object.keys(f8),Xx={daysToExpiration:null,expiration:null,[V.MARK]:null,[V.MARK_CHANGE]:null,[V.BID]:null,[V.ASK]:null,[V.VOLUME]:null,[V.OPEN]:null,[V.HIGH]:null,[V.LOW]:null},Qx=Object.keys(Xx),T8={position:_f,trade:_f,watchlist:Kx,scans:zx,optionChain:k1,futuresChain:Qx},Zx=["quantity","plDay","plOpen","plYtd","openCost","netLiquidity","openPrice","buyingPowerEffect","delta","gamma","theta","vega"],Jx=["mark","markChange","plDay","plOpen","netLiquidity","buyingPowerEffect","openPrice","openCost","delta","gamma","theta","vega","plOverallPercent","plYtd","plDayPercent"],$1=["mark",V.MARK_PERCENT_CHANGE,V.VOLUME,V.BID,V.ASK,V.IMPLIED_VOLATILITY,V.LOW52,V.HIGH52],j1=["description",V.MARK,V.MARK_CHANGE,V.MARK_PERCENT_CHANGE,V.VOLUME],B1=["daysToExpiration","expiration",V.MARK,V.MARK_CHANGE,V.BID,V.ASK,V.VOLUME,V.OPEN,V.HIGH,V.LOW],F1=["openPrice","quantity"],wp=["plOverallPercent","plYtdPercent","plDayPercent"],Op=[...F1,...wp,"buyingPowerEffect","openCost","netLiquidity","plOpen","plYtd","plDay","delta","gamma","theta","vega","margin","betaWeightingsSpx"],y8=Op.filter(e=>!wp.includes(e)&&!F1.includes(e)),C8=e=>_f.filter(t=>!e.includes(t)),b8=e=>{switch(e){case"mark":return"trendingMark";case"bid":return"trendingBid";case"ask":return"trendingAsk";case"low":return"trendingLow";case"high":return"trendingHigh";case"low52":return"trendingLow52";case"high52":return"trendingHigh52";default:return e}},Dm=e=>{const t=e.sort((s,n)=>{if(si(s)&&si(n)){const r=en[s].title,o=en[n].title;if(r&&o){const i=r.toLowerCase(),l=o.toLowerCase();return i.localeCompare(l)}}if(di(s)&&di(n)){const r=yn[s].title,o=yn[n].title;if(r&&o){const i=r.toLowerCase(),l=o.toLowerCase();return i.localeCompare(l)}}return 0});return si(t[0]),t},E8=e=>Object.keys(p8).indexOf(e)!==-1,ew=e=>Object.keys(S8).indexOf(e)!==-1,A8=e=>Object.keys(g8).indexOf(e)!==-1,v8=e=>Object.keys(m8).indexOf(e)!==-1;var Pt=(e=>(e.ASCENDING="ascending",e.DESCENDING="descending",e.NONE="none",e))(Pt||{});const I8=(e,t)=>`${e}${t&&t!=="none"?` ${t}`:""}`,x8=(e,t,s,n)=>{let r;switch(t){case"ascending":r=`Press Control-Option-Space to sort by ${e} descending.`;break;case"descending":r=`Press Control-Option-Space to remove sort for ${e} column.`;break;default:r=`Press Control-Option-Space to sort by ${e} ascending.`}return`${`${s?"Draggable ":""}${n?"Sortable ":""}column`}. ${n?r:""}${s?" Press space bar to start a drag. When dragging you can use the arrow keys to move the item around and escape to cancel. Ensure your screen reader is in focus mode or forms mode":""}`},Rp=(e,t,s="ariaLabelId")=>`${e}-${String(t).replace(/\s/gi,"")}-${s}`,Lm=(e,t,s="none",n=!0,r=!1)=>{const o=Rp(e,t),i=Rp(e,t,"ariaDescId"),l=x8(t,s,n,r),c=I8(t,s),d=a.jsxs(a.Fragment,{children:[a.jsx("span",{id:o,hidden:!0,"aria-label":c}),a.jsx("span",{id:i,hidden:!0,"aria-label":l})]});return{headerProps:{"aria-labelledby":o,"aria-describedby":i},AriaHeaderComponents:d}};var At=(e=>(e.ARROWS_DOWN="ARROWS_DOWN",e.ARROWS_UP="ARROWS_UP",e.AUTO="AUTO",e.BOOLEAN_ARROWS_DOWN="BOOLEAN_ARROWS_DOWN",e.BOOLEAN_ARROWS_UP="BOOLEAN_ARROWS_UP",e.BOOLEAN_POINTS="BOOLEAN_POINTS",e.BOOLEAN_WEDGES_DOWN="BOOLEAN_WEDGES_DOWN",e.BOOLEAN_WEDGES_UP="BOOLEAN_WEDGES_UP",e.DASHED_LINE="DASHED_LINE",e.HISTOGRAM="HISTOGRAM",e.HISTOGRAM_WITH_GAPS="HISTOGRAM_WITH_GAPS",e.HORIZONTAL_LINE="HORIZONTAL_LINE",e.LINE_WITH_POINTS="LINE_WITH_POINTS",e.LINE_WITH_SQUARES="LINE_WITH_SQUARES",e.LINE_WITH_TRIANGLES="LINE_WITH_TRIANGLES",e.POINTS="POINTS",e.SIMPLE_LINE="SIMPLE_LINE",e.SQUARES="SQUARES",e.TRIANGLES="TRIANGLES",e.VALUES_ABOVE="VALUES_ABOVE",e.VALUES_BELOW="VALUES_BELOW",e))(At||{}),Ul=(e=>(e.FIRM="FIRM",e.LONG_DASH="LONG_DASH",e.MEDIUM_DASH="MEDIUM_DASH",e.POINTS="POINTS",e.SHORT_DASH="SHORT_DASH",e))(Ul||{}),kd=(e=>(e.AUTO="AUTO",e.BOOLEAN="BOOLEAN",e.NUMERICAL="NUMERICAL",e))(kd||{}),Qs=(e=>(e.BOOLEAN="BOOLEAN",e.DOUBLE="DOUBLE",e.ENUM="ENUM",e.INTEGER="INTEGER",e.PREDEFINED_CONST="PREDEFINED_CONST",e.PRICE="PRICE",e.SYMBOL="SYMBOL",e.TEXT="TEXT",e))(Qs||{});const Zc={SIMPLE_LINE:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},HORIZONTAL_LINE:{plotType:xe.line,linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},POINTS:{plotType:xe.dots,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},SQUARES:{plotType:xe.dots,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},TRIANGLES:{plotType:xe.dots,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.lightGray}},HORIZONTAL_LINE:{plotType:xe.lineSegments,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:Re.red}},HISTOGRAM:{plotType:xe.histogram,colorOptions:{type:Ae.INCREASING_VALUE,isPreset:!1,isEdited:!1,Increasing:Re.green,Decreasing:Re.red,NoChanges:Re.lightGray}},HISTOGRAM_WITH_GAPS:{plotType:xe.histogram,colorOptions:{type:Ae.INCREASING_VALUE,isPreset:!1,isEdited:!1,Increasing:Re.green,Decreasing:Re.red,NoChanges:Re.lightGray}},BOOLEAN_ARROWS_UP:{plotType:xe.crossoverArrows,colorOptions:{type:Ae.CROSSOVER,isPreset:!1,isEdited:!1,Above:Re.darkCrossoverGreen,Below:Re.darkCrossoverRed}},BOOLEAN_ARROWS_DOWN:{plotType:xe.crossoverArrows,colorOptions:{type:Ae.CROSSOVER,isPreset:!1,isEdited:!1,Above:Re.darkCrossoverGreen,Below:Re.darkCrossoverRed}},BOOLEAN_POINTS:{plotType:xe.booleanPoints,colorOptions:{type:Ae.BOOLEAN,isPreset:!1,isEdited:!1,True:Re.green,False:Re.red}}},w8=4294967295,O8=()=>{const e=window.crypto,t=new Uint32Array(1);return e.getRandomValues(t)[0]},tw=()=>O8()/w8,Sd=()=>Math.floor(tw()*360),Sh=(e,t)=>(e+t)%360,R8=e=>{switch(e.type){case Ae.SINGLE:return e.color;case Ae.INCREASING_HISTOGRAM:return e.PositiveAndUp;case Ae.CANDLE:return e.BorderUp;case Ae.INCREASING_VALUE:return e.Increasing;case Ae.AREA:return e.LinePositive;case Ae.BOOLEAN:return e.True;case Ae.CROSSOVER:return e.Below;default:return Re.lightGray}},Jb=e=>{var r;const{plotParameters:t}=e,s=Object.keys(t).map(o=>t[o]).filter(o=>(o.plotType===xe.line||o.plotType===xe.lineSegments||o.plotType===xe.dots)&&o.colorOptions.type===Ae.SINGLE);if(!s.length)return;const n=R8((r=s[s.length-1])==null?void 0:r.colorOptions);return n==null?void 0:n.h},D8=e=>{const s=Object.values(e).filter(r=>r.plotType===xe.line&&r.colorOptions.type===Ae.SINGLE).find(r=>r.linked);return((s==null?void 0:s.colorOptions.type)===Ae.SINGLE?s==null?void 0:s.colorOptions.color.h:null)??null},aS=14,L8=100,ac=(e,t,s,n,r)=>{var h;const o=((h=$r[e])==null?void 0:h.defaultPlotParams)??sw(r);let i;const l=s.size===0||s.filter(p=>!p.parameters.isLowerChart&&p.id!==dr&&p.id!==cr).size===0;if(t.isLowerChart||l)i=Sd();else{const p=s.filter(m=>m.name===e);if(p.size===0){const m=s.filter(S=>!S.parameters.isLowerChart).last(),g=Jb(m)??Sd();i=Sh(g,L8)}else{const m=p.last(),g=Jb(m)??Sd();i=Sh(g,aS)}}let c=!0;const d=([p,m])=>{switch(m.plotType){case xe.line:{let g;c?(c=!1,g={h:i,s:100,l:50,a:1}):m.linked?g={h:D8(u)??Sd(),s:100,l:50,a:1}:(i=Sh(i,aS),g={h:i,s:100,l:50,a:1}),u[p]={...m,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:g}};break}case xe.dots:{let g;c?(c=!1,g={h:i,s:100,l:50,a:1}):(i=Sh(i,aS),g={h:i,s:100,l:50,a:1}),u[p]={...m,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:g}};break}case xe.histogram:case xe.candle:case xe.bar:case xe.booleanPoints:case xe.lineSegments:case xe.crossoverArrows:case xe.hidden:u[p]=m;break}},u={};return e===G.VOLUME_PROFILE?u[L1]=_1:Object.entries(o).forEach(d),{id:n,name:e,parameters:t,plotParameters:u}},sw=e=>e==null?void 0:e.reduce((t,s)=>{var r,o;const n=(o=(r=s==null?void 0:s.plotSettings)==null?void 0:r.defaultValue)==null?void 0:o.paintingStyle;if((s==null?void 0:s.name)!==void 0&&n!==void 0)switch(n){case At.HORIZONTAL_LINE:case At.SIMPLE_LINE:t[s.name]=Zc[At.SIMPLE_LINE];break;case At.HISTOGRAM_WITH_GAPS:case At.HISTOGRAM:t[s.name]=Zc[At.HISTOGRAM];break;case At.BOOLEAN_ARROWS_DOWN:case At.BOOLEAN_ARROWS_UP:t[s.name]=Zc[At.BOOLEAN_ARROWS_DOWN];break;case At.POINTS:case At.SQUARES:case At.TRIANGLES:t[s.name]=Zc[At.POINTS];break;case At.BOOLEAN_POINTS:t[s.name]=Zc[At.BOOLEAN_POINTS];break;default:return t}return t},{});var Gr=(e=>(e.DEPOSIT="DEPOSIT",e.DIVIDENDS_OR_INTEREST="DIVIDENDS_OR_INTEREST",e.START_OF_THE_DAY_BALANCE="START_OF_THE_DAY_BALANCE",e.TRADE="TRADE",e.TRANSFER="TRANSFER",e.WITHDRAWAL="WITHDRAWAL",e.MARKING_TO_MARKET="MARKING_TO_MARKET",e))(Gr||{});const iS=new Date,H1=new Date(iS.getFullYear(),iS.getMonth(),iS.getDate()),_8=H1.getDate(),N8=new Date(H1.getFullYear(),0,1).toISOString(),P8=new Date().toISOString(),nw=370,rw=15;var Wo=(e=>(e.D1="1 Day",e.D7="7 Days",e.D30="30 Days",e.D90="90 Days",e.D180="180 Days",e.YTD="YTD",e.D365="365 Days",e))(Wo||{});const Dp="Custom",e0={"1 Day":0,"7 Days":6,"30 Days":29,"90 Days":89,"180 Days":179,YTD:0,"365 Days":364},k8=Object.keys(e0).map(e=>({label:e,range:{endTime:P8,startTime:e==="YTD"?N8:new Date(new Date(H1).setDate(_8-e0[e])).toISOString()}})),Lp=k8.filter(e=>e.label!=="1 Day"),el=Object.values(Gr),M8={showTransactions:!1,transactions:[],transactionTypes:el,isTransactionsLoading:!1,showError:!1,errorMessage:void 0,transactionsSelectedAccount:void 0},$8=(e=M8,t)=>{switch(t.type){case f.Connected:{const s=aj();return{...e,transactionTypes:s}}case f.ShowTransactions:return{...e,showTransactions:!0};case f.HideTransactions:return{...e,showTransactions:!1};case f.GetTransactions:return{...e,transactionTypes:t.transactionTypes===void 0?el:t.transactionTypes,isTransactionsLoading:!0,transactions:[]};case f.TransactionsReceived:return{...e,showError:!1,errorMessage:void 0,transactions:t.transactions,isTransactionsLoading:!1};case f.TransactionsError:return{...e,showError:!0,errorMessage:t.errorMessage,isTransactionsLoading:!1};case f.TransactionsAccountSelected:return{...e,transactionsSelectedAccount:t.account};default:return e}},Mr=(...e)=>{},j8=Nt(Qr(M1)),B8=Nt(Qr(qx)),F8=Nt(Qr(Xx)),H8=ee({column:Fe([Qr(M1),I("rootSymbol")]),sortDirection:Fe([I(Pt.ASCENDING),I(Pt.DESCENDING)])}),U8=Ze([ee({type:_,isLowerChart:Xe}),on(_,Fe([_,$,Xe]))]),ow=Fe([I(xe.line),I(xe.histogram),I(xe.candle),I(xe.area),I(xe.bar),I(xe.booleanPoints),I(xe.lineSegments),I(xe.dots),I(xe.crossoverArrows),I(xe.hidden)]),dn=ee({h:$,s:$,l:$,a:$}),V8=ee({type:I(Ae.SINGLE),isPreset:Xe,isEdited:Xe,color:dn}),W8=ee({type:I(Ae.INCREASING_HISTOGRAM),isPreset:Xe,isEdited:Xe,NegativeAndDown:dn,NegativeAndUp:dn,PositiveAndDown:dn,PositiveAndUp:dn}),G8=ee({type:I(Ae.CANDLE),isPreset:Xe,isEdited:Xe,BorderUp:dn,BorderDown:dn,FillUp:dn,FillDown:dn,Doji:dn}),Y8=ee({type:I(Ae.INCREASING_VALUE),isPreset:Xe,isEdited:Xe,Increasing:dn,Decreasing:dn,NoChanges:dn}),q8=ee({type:I(Ae.AREA),isPreset:Xe,isEdited:Xe,LinePositive:dn,LineNegative:dn,AreaPositive:dn,AreaNegative:dn}),K8=ee({type:I(Ae.BOOLEAN),isPreset:Xe,isEdited:Xe,True:dn,False:dn}),z8=ee({type:I(Ae.CROSSOVER),isPreset:Xe,isEdited:Xe,Above:dn,Below:dn}),X8=ee({type:I(Ae.HIDDEN),isPreset:Xe,isEdited:Xe}),aw=Fe([V8,W8,G8,q8,Y8,K8,z8,X8]),Q8=on(ow,aw),Z8=Ze([ee({plotType:ow,colorOptions:aw}),Ie({savedColors:Q8})]),iw=ee({id:_,name:_,parameters:U8,plotParameters:on(_,Z8)}),J8=ee({range:_,aggregations:on(_,_),extendedHours:Xe,showAlerts:Xe,showOptionPositions:Xe,studiesParams:on(_,iw)}),lw=ee({range:_,aggregations:on(_,_),extendedHours:Xe,studiesParams:on(_,iw)}),e7=Nt(Nt(Fe([_,Fe([J8,lw])]))),t7=Nt(Nt(Fe([_,lw]))),s7=on(_,_),n7=on(Fe([I(gt.LiveTrading),I(gt.PaperMoney)]),on(_,$)),r7=Nt(Nt(Fe([_,s7]))),o7=Nt(_),a7=Fe([_,ee({label:_,range:ee({startTime:_,endTime:_})})]),cw=Fe([I(zs),I(`${qi}-1`),I(`${qi}-2`),I(`${qi}-3`),I(`${qi}-4`),I(`${zn}-1`),I(`${zn}-2`),I(`${zn}-3`),I(`${zn}-4`)]),i7=on(cw,$),dw=on(cw,Fe([Or,I("level2"),I("activeTrader"),I("timeSales")])),l7=Nt($),uw=ee({showQty:Xe,showMark:Xe,showMarkChangeDollar:Xe,showMarkChangePercentage:Xe,showITM:Xe}),c7=e=>uw.is(e),d7=Nt(Nt(Fe([_,Nt(_)]))),u7=on(_,ee({messageTime:$}));var sn=(e=>(e.THEME="theme",e.SWAP_BUY_SELL="swapBuySell",e.LAST_VIEWED_NOTIFICATIONS="lastViewedNotifications",e.PRIVACY_MODE_ENABLED="privacyModeEnabled",e.ORDER_BOOK_EXPANDED="orderBookExpanded",e.ORDER_BOOK_COLUMN_SET="orderBookColumnsSet",e.ORDER_BOOK_COLUMN_SORT="orderBookColumnsSort",e.LEVEL_2_BID_COLUMN_SET="level2BidColumnSet",e.LEVEL_2_ASK_COLUMN_SET="level2AskColumnSet",e.POSITION_COLUMNS_SET="positionColumnsSet",e.POSITION_COLUMNS_SORT="positionColumnsSort",e.OPTION_CHAIN_COLUMNS="optionChainColumns",e.WATCHLIST_COLUMNS="watchlistColumns",e.SCANS_COLUMNS="scansColumns",e.SELECTED_SCAN_FILTERS="selectedScanFilters",e.FUTURES_CHAIN_COLUMNS="futuresChainColumns",e.TRADE_TABLE_COLUMNS_SET="tradeTableColumnsSet",e.ACTIVE_TRADER_INPUT_QUANTITY_BY_KEYS="activeTraderInputQuantityByKeys",e.ACTIVE_TRADER_BUY_PRICE_TYPE="activeTraderBuyPriceType",e.ACTIVE_TRADER_SELL_PRICE_TYPE="activeTraderSellPriceType",e.SELECTED_WATCHLIST_ID_PAPER_MONEY="selectedWatchlistIdPaperMoney",e.SELECTED_WATCHLIST_ID_LIVE_TRADING="selectedWatchlistIdLiveTrading",e.WATCHLIST_MENU_TRAIL_PAPER_MONEY="watchlistMenuTrailPaperMoney",e.WATCHLIST_MENU_TRAIL_LIVE_TRADING="watchlistMenuTrailLiveTrading",e.SIDEBAR_OPENED="sidebarOpened",e.ACCOUNT_SUMMARY_OPENED="accountSummaryOpened",e.PORTFOLIO_OPENED="portfolioOpened",e.OPTION_CHAIN_INFORMATION_CLOSED="optionChainInformationClosed",e.TRADE_SYMBOL="tradeSymbol",e.PRIME_RATE="primeRate",e.SELECTED_DRAWING_SETS="selectedDrawingSets",e.MARKET_TOOL_OPENED="marketToolOpened",e.STRIKE="strike",e.WATCHLIST_SORTING_RULE="WatchListSortingRule",e.SCAN_SORTING_RULE="ScanSortingRule",e.FUTURES_CHAIN_SORTING_RULE="FuturesChainSortingRule",e.MUTE_ALL="isMuteAllChecked",e.MARKET_BELL="isMarketBellEnabled",e.ALERT_TRIGGERED_BELL="isAlertTriggeredBellEnabled",e.PKCE_CHALLENGE="pkceChallenge",e.ORDER_REJECTED_BELL="isOrderRejectedBellEnabled",e.TRADE_FILLED_BELL="isTradeFilledBellEnabled",e.TRANSACTIONS_FILTER="transactionsFilter",e.TRANSACTIONS_RANGE="transactionsRange",e.TRANSACTIONS_SYMBOL="transactionsSymbol",e.CHARTS="charts",e.TIME_SALES_MIN_SIZE="timeSalesMinSize",e.SPREAD_GROUPING="spreadGrouping",e.OPTIONS_STATISTICS_DELTA_INTERVALS="optionsStatisticsDeltaIntervals",e.EXPAND_ALL_POSITIONS="expandAllPositions",e.SHOW_TRADEABLE_ACCOUNT_MESSAGE="showTradeableAccountMessage",e.EXPANDED_SYMBOLS="expandedSymbols",e.EXPANDED_ACCOUNT_HISTORY_CHART="expandedAccountHistoryChart",e.AUTO_LOGOUT_TIME_PERIOD="autoLogoutTimePeriod",e.NOTIFICATION_START_TIME="notificationStartTime",e.SYMBOL_INFO="symbolInfo",e.ACTIVE_TRADER_SETTINGS_MENU="activeTraderSettingsMenu",e.ACKNOWLEDGED_MESSAGE_CENTER_NOTIFICATIONS="acknowledgedMessageCenterNotifications",e))(sn||{});const h7=60*60*24*1e3,hw=12,_p=1,t0=[20,40,60,80],fd={range:M4,aggregations:B4,extendedHours:!0,studiesParams:Yt().set(dr,{...ac(me.PRICE,E1,Yt(),""),id:dr}).set(cr,{...ac(me.VOLUME,b1,Yt(),""),id:cr}),symbol:null},Nf={range:y1,aggregations:C1,extendedHours:!0,showAlerts:!0,showOptionPositions:!0,showWorkingOrders:!0,showTradePrice:!0,showChartHighLow:!0,showEarningsPreview:!1,showEarningsIcon:!0,showDividendsIcon:!0,fitStudiesInYAxis:!0,studiesParams:Yt().set(dr,{...ac(me.PRICE,E1,Yt(),""),id:dr}).set(cr,{...ac(me.VOLUME,b1,Yt(),""),id:cr}),symbol:null},p7=e=>{localStorage.setItem("lastViewedNotifications",e.getTime().toString())},pw=e=>{localStorage.setItem("notificationStartTime",e.getTime().toString())},m7=e=>{localStorage.setItem("WatchListSortingRule",JSON.stringify(e))},g7=e=>{localStorage.setItem("ScanSortingRule",JSON.stringify(e))},S7=()=>{const e=localStorage.getItem("ScanSortingRule");return e?JSON.parse(e):null},s0=()=>{const e=localStorage.getItem("WatchListSortingRule");return e?JSON.parse(e):null},f7=e=>{localStorage.setItem("FuturesChainSortingRule",JSON.stringify(e))},T7=()=>{const e=localStorage.getItem("FuturesChainSortingRule");return e?JSON.parse(e):null},y7=()=>Number(localStorage.getItem("lastViewedNotifications")),mw=()=>Number(localStorage.getItem("notificationStartTime")),gw=e=>localStorage.setItem("privacyModeEnabled",`${e}`),n0=()=>localStorage.getItem("privacyModeEnabled")==="true",r0=e=>localStorage.setItem("sidebarOpened",`${e}`),o0=e=>localStorage.setItem("accountSummaryOpened",`${e}`),C7=e=>{const t=localStorage.getItem("sidebarOpened");return t===null&&e!==void 0?e:t==="true"},b7=e=>{const t=localStorage.getItem("accountSummaryOpened");return t===null&&e!==void 0?e:t==="true"},E7=e=>localStorage.setItem("portfolioOpened",`${e}`),Pf=()=>{const e=localStorage.getItem("portfolioOpened");return e==="true"||e===null},kf=e=>{const t=localStorage.getItem("marketToolOpened");if(t!==null)try{const s=JSON.parse(t),n=dw.decode(s);if(n.isRight())return s[e];Mr(sa.report(n))}catch{}},Mf=(e,t)=>{const s=localStorage.getItem("marketToolOpened");if(s!==null)try{const n=JSON.parse(s),r=dw.decode(n);if(r.isRight()){localStorage.setItem("marketToolOpened",JSON.stringify({...n,[e]:t}));return}else Mr(sa.report(r))}catch{}localStorage.setItem("marketToolOpened",JSON.stringify({[e]:t}))},A7=e=>localStorage.setItem("tradeSymbol",e),v7=()=>localStorage.getItem("tradeSymbol"),I7=e=>localStorage.setItem("optionChainInformationClosed",`${e}`),ic=()=>localStorage.getItem("swapBuySell")==="true",Md=()=>localStorage.getItem("theme"),Ou=e=>{const t=localStorage.getItem(e);if(t===null)return null;let s;const n=t.split("|");switch(e){case"positionColumnsSet":case"tradeTableColumnsSet":s=j8.decode(n);break;case"scansColumns":case"watchlistColumns":s=B8.decode(n);break;case"futuresChainColumns":s=F8.decode(n);break}return s.isRight()?s.value:null},x7=e=>localStorage.setItem("positionColumnsSet",e.join("|")),w7=()=>Ou("positionColumnsSet")??Zx,a0={column:"rootSymbol",sortDirection:Pt.ASCENDING},O7=e=>localStorage.setItem("positionColumnsSort",JSON.stringify(e)),R7=()=>{const e=localStorage.getItem("positionColumnsSort");if(e!==null){const t=JSON.parse(e);return H8.decode(t).isRight()?t:a0}return a0},lc=(e,t,s)=>{const n=localStorage.getItem(e);if(n===null)return s;try{const r=JSON.parse(n);return t(r)?r:s}catch{return s}},Sw=()=>localStorage.getItem("strike")||hw.toString(),D7=(e=hw.toString())=>{localStorage.setItem("strike",e)},L7=e=>localStorage.setItem("optionChainColumns",JSON.stringify(e)),tp=()=>lc("optionChainColumns",l8.is,Wx),_7=e=>localStorage.setItem("watchlistColumns",e.join("|")),N7=()=>Ou("watchlistColumns")??$1,P7=()=>{const e=localStorage.getItem("symbolInfo");if(e===null)return eu;const t=JSON.parse(e);return uw.decode(t).isRight()?t:eu},k7=e=>localStorage.setItem("scansColumns",e.join("|")),M7=()=>Ou("scansColumns")??j1,$7=e=>localStorage.setItem("futuresChainColumns",e.join("|")),j7=()=>Ou("futuresChainColumns")??B1,B7=e=>localStorage.setItem("tradeTableColumnsSet",e.join("|")),F7=()=>Ou("tradeTableColumnsSet")??Jx,fw=e=>{switch(e){case gt.LiveTrading:return"selectedWatchlistIdLiveTrading";case gt.PaperMoney:return"selectedWatchlistIdPaperMoney"}},i0=e=>{const t=localStorage.getItem(fw(e));return t?Number(t):null},H7=(e,t)=>{localStorage.setItem(fw(e),t.toString())},Tw=e=>{switch(e){case gt.LiveTrading:return"watchlistMenuTrailLiveTrading";case gt.PaperMoney:return"watchlistMenuTrailPaperMoney"}},U7=e=>{const t=localStorage.getItem(Tw(e));return t&&t!=="undefined"?JSON.parse(t):null},V7=(e,t)=>{localStorage.setItem(Tw(e),JSON.stringify(t))},W7=e=>localStorage.setItem("primeRate",e.toString()),yw=()=>Number(localStorage.getItem("primeRate")),G7=e=>{const t=Array.from(e.entries());localStorage.setItem("selectedDrawingSets",JSON.stringify(t))},Y7=()=>{let e=Yt();const t=localStorage.getItem("selectedDrawingSets");if(t)try{const s=JSON.parse(t),n=r7.decode(s);n.isRight()?e=s.reduce((r,[o,i])=>{const l=Object.keys(i).reduce((c,d)=>c.set(d,i[d]),Yt());return r.set(o,l)},Yt()):Mr(sa.report(n))}catch{}return e},q7=()=>{const e=localStorage.getItem("isMarketBellEnabled");return e===null?!0:e==="true"},K7=e=>{localStorage.setItem("isMarketBellEnabled",JSON.stringify(e))},z7=()=>{const e=localStorage.getItem("isAlertTriggeredBellEnabled");return e===null?!0:e==="true"},X7=e=>{localStorage.setItem("isAlertTriggeredBellEnabled",JSON.stringify(e))},Q7=e=>{localStorage.setItem("isMuteAllChecked",JSON.stringify(e))},Z7=()=>{const e=localStorage.getItem("isMuteAllChecked");return e===null?!1:e==="true"},J7=()=>{const e=localStorage.getItem("isOrderRejectedBellEnabled");return e===null?!0:e==="true"},ej=e=>{localStorage.setItem("isOrderRejectedBellEnabled",JSON.stringify(e))},tj=()=>{const e=localStorage.getItem("isTradeFilledBellEnabled");return e===null?!0:e==="true"},sj=e=>{localStorage.setItem("isTradeFilledBellEnabled",JSON.stringify(e))},nj=()=>localStorage.getItem("pkceChallenge"),rj=e=>{localStorage.setItem("pkceChallenge",e)},oj=()=>{localStorage.removeItem("pkceChallenge")},aj=()=>{let e=el;const t=localStorage.getItem("transactionsFilter");if(t)try{const s=JSON.parse(t),n=o7.decode(s);e=n.fold(()=>(Mr(sa.report(n)),el),r=>{const o=r??[];return o.length!==0&&o.every(l=>l in Gr)?o:el})}catch{}return e},ij=e=>{localStorage.setItem("transactionsFilter",JSON.stringify(e))},lj=()=>{let e=Wo.D30;const t=localStorage.getItem("transactionsRange");if(t)try{const s=JSON.parse(t),n=a7.decode(s);e=n.fold(()=>(Mr(sa.report(n)),Wo.D30),r=>r)}catch{}return e},cj=e=>{localStorage.setItem("transactionsRange",JSON.stringify(e))},dj=e=>{localStorage.setItem("transactionsSymbol",e)},uj=()=>{const e=localStorage.getItem("transactionsSymbol");return e!==null?e:void 0},hj=e=>{const t=JSON.stringify(e.toJS());localStorage.setItem("activeTraderInputQuantityByKeys",t)},pj=()=>{const e=localStorage.getItem("activeTraderInputQuantityByKeys");let t=ke();if(e===null)return t;try{const s=JSON.parse(e);if(n7.decode(s).isRight())for(const[r,o]of Object.entries(s))for(const[i,l]of Object.entries(o))t=t.setIn([r,i],l)}catch{}return t},mj=()=>{const e=localStorage.getItem("charts");let t=Yt();if(e!==null)try{const s=JSON.parse(e),n=e7.decode(s);n.isRight()?t=s.reduce((r,[o,i])=>{const l=Object.keys(i.studiesParams).reduce((c,d)=>(c[d]=i.studiesParams[d],c),{});return r.set(o,{...i,studiesParams:Yt(l)})},Yt()):Mr(sa.report(n))}catch{}return t.size===0&&(t=t.set(zs,Nf).set(`${qi}-1`,Nf)),t},gj=()=>{const e=localStorage.getItem("charts");let t=Yt();if(e!==null)try{const s=JSON.parse(e),n=t7.decode(s);n.isRight()?t=s.reduce((r,[o,i])=>{const l=Object.keys(i.studiesParams).reduce((c,d)=>(c[d]=i.studiesParams[d],c),{});return r.set(o,{...i,studiesParams:Yt(l)})},Yt()):Mr(sa.report(n))}catch{}return t=t.set(`${zn}-1`,fd).set(`${zn}-2`,fd).set(`${zn}-3`,fd).set(`${zn}-4`,fd),t},Sj=e=>{const t=JSON.stringify(Array.from(e.entries()));localStorage.setItem("charts",t)},fj=e=>{const t=JSON.stringify(Array.from(e.entries()));localStorage.setItem("charts",t)},Tj=e=>localStorage.setItem("timeSalesMinSize",JSON.stringify(e.toJS())),yj=()=>{const e=localStorage.getItem("timeSalesMinSize");let t=ke();if(e===null)return t;try{const s=JSON.parse(e),n=i7.decode(s);if(n.isRight())for(const[r,o]of Object.entries(s))t=t.set(r,o);else Mr(sa.report(n))}catch{}return t},Cj=()=>{const e=localStorage.getItem("spreadGrouping");return e===null?!1:e==="true"},bj=e=>{localStorage.setItem("spreadGrouping",JSON.stringify(e))},Np=(e,t)=>localStorage.setItem(e,JSON.stringify(t)),Ej=()=>localStorage.getItem("expandAllPositions")==="true",fh=e=>localStorage.setItem("expandAllPositions",JSON.stringify(e)),Aj=()=>{const e=localStorage.getItem("expandedSymbols");return e?JSON.parse(e):[]},Jc=e=>{localStorage.setItem("expandedSymbols",JSON.stringify(e))},vj=e=>{localStorage.setItem("optionsStatisticsDeltaIntervals",JSON.stringify(e))},Ij=()=>{const e=localStorage.getItem("optionsStatisticsDeltaIntervals");if(e!==null){const t=JSON.parse(e);return l7.decode(t).isRight()?t:t0}return t0},xj=()=>{const e=localStorage.getItem("autoLogoutTimePeriod");let t;if(e)try{t=JSON.parse(e)}catch{t=Ql.FIFTY_FIVE_MINUTES}else t=Ql.FIFTY_FIVE_MINUTES;return Ex(t)?t:Ql.FIFTY_FIVE_MINUTES},l0=e=>{const t=Array.from(e.entries());localStorage.setItem("activeTraderSettingsMenu",JSON.stringify(t))},Cw=()=>{const e=localStorage.getItem("activeTraderSettingsMenu");if(e){const t=JSON.parse(e),s=d7.decode(t);let n=ke();return s.isRight()&&s.value.forEach(r=>{typeof r[0]=="string"&&typeof r[1]!="string"&&(n=n.set(r[0],r[1]))}),n}return ke()},wj=e=>{let t=bw(!1);const s=e!=null&&e.messageTime?new Date(e==null?void 0:e.messageTime).getTime():new Date().getTime();t={...t,[e.messageId]:{messageTime:s}},localStorage.setItem("acknowledgedMessageCenterNotifications",JSON.stringify(t))},bw=(e=!0)=>{const t=localStorage.getItem("acknowledgedMessageCenterNotifications");let s={};if(t)try{const n=JSON.parse(t),r=u7.decode(n);r.isRight()&&Object.entries(r.value).forEach(([o,{messageTime:i}])=>{new Date().getTime()<=i+h7&&(s={...s,[o]:{messageTime:i}})})}catch{return localStorage.setItem("acknowledgedMessageCenterNotifications",JSON.stringify(s)),s}return e&&localStorage.setItem("acknowledgedMessageCenterNotifications",JSON.stringify(s)),s},Ew=e=>e.accountAnalytics.primaryAccountCdi,Oj=(e,t)=>({type:f.AccountCdiReceived,accountCode:e,accountCdi:t}),Rj=e=>({type:f.AccountCdiSelected,accountCdDomainId:e}),Dj=e=>({type:f.AdjustCashAccountSelected,account:e}),Lj=()=>({type:f.ClearAdjustCashError}),_j=(e,t)=>({type:f.SetBalance,accountCode:e,newBalance:t}),Nj=()=>({type:f.SetBalanceSuccess}),Pj=()=>({type:f.SetBalanceFailure}),kj=e=>({type:f.SetIsResetBalancesAndPositionsChecked,isChecked:e}),Mj=(e,t)=>({type:f.AdjustCashSubmit,accountCode:e,cashAmount:t}),$j=()=>({type:f.AdjustCashFailure}),jj=()=>({type:f.AdjustCashSuccess}),Bj=()=>({type:f.AdjustCash}),Fj=()=>({type:f.AdjustCashClose}),Hj=e=>e.type===k.STOCK||e.type===k.FUTURE||e.type===k.FOREX||e.type===k.INDEX||e.type===k.FUND||e.type===k.BOND||e.type===k.CASH||e.type===k.ETF||e.type===k.WARRANT||e.type===k.RIGHT||e.type===k.MANUAL;var Jn=(e=>(e.AMEX="AMEX",e.CFE="CFE",e.CME="CME",e.FOREX="FOREX",e.FUTURES="FUTURES",e.ICE="ICE",e.ICE_EU="ICE_EU",e.LIFFE="LIFFE",e.NASDAQ="NASDAQ",e.NYSE="NYSE",e.OPTIONS="OPTIONS",e.OTHER="OTHER",e.STOCK="STOCK",e.UNDEFINED="UNDEFINED",e))(Jn||{}),k=(e=>(e.NONE="NONE",e.STOCK="STOCK",e.OPTION="OPTION",e.CRYPTO="CRYPTO",e.FUTURE="FUTURE",e.FOREX="FOREX",e.INDEX="INDEX",e.FUND="FUND",e.BOND="BOND",e.CASH="CASH",e.MANUAL="MANUAL",e.ETF="ETF",e.PRODUCT="PRODUCT",e.WARRANT="WARRANT",e.RIGHT="RIGHT",e))(k||{});const c0=e=>{switch(e){case"STOCK":return"STOCK";case"OPTION":return"OPTION";case"FUND":return"FUND";case"FUTURE":return"FUTURE";case"FOREX":return"FOREX";case"BOND":return"BOND";case"CASH":return"CASH";case"CRYPTO":return"CRYPTO";case"MANUAL":return"MANUAL";case"ETF":return"ETF";case"PRODUCT":return"PRODUCT";case"WARRANT":return"WARRANT";case"RIGHT":return"RIGHT";default:return"NONE"}};var $d=(e=>(e.DOLLARS="MARK",e.PERCENT="MARK%",e))($d||{}),qo=(e=>(e.DOLLARS="$",e.PERCENT="%",e))(qo||{}),rs=(e=>(e[e.AND=0]="AND",e[e.OR=1]="OR",e[e.THEN=2]="THEN",e))(rs||{});const d0=e=>{switch(e){case 0:return"And";case 1:return"Or";case 2:return"Then"}};var hr=(e=>(e.LessThan="<",e.LessThanPercent="<%",e.LessThanOrEqualTo="<=",e.LessThanOrEqualToPercent="<=%",e.EqualTo="=",e.EqualToPercent="=%",e.GreaterThan=">",e.GreaterThanPercent=">%",e.GreaterThanOrEqualTo=">=",e.GreaterThanOrEqualToPercent=">=%",e.TRSTP="TRSTP",e.X="X",e.XLessThan="X<",e.XGreaterThan="X>",e.False="false",e.True="true",e.Between="x< or >x",e))(hr||{}),Go=(e=>(e.ASK="ASK",e.BACK_VOL="BACK_VOL",e.BID="BID",e.DELTA="DELTA",e.DOUBLE_LAST="DOUBLE_LAST",e.DOUBLE_QUOTE="DOUBLE_QUOTE",e.FRONT_VOL="FRONT_VOL",e.IMPL_VOL="IMPL_VOL",e.LAST="LAST",e.MARK="MARK",e.MARK_PERCENT="MARK_PERCENT",e.SINGLE_LAST="SINGLE_LAST",e.THINKSCRIPT="THINKSCRIPT",e.VOL_DIFF="VOL_DIFF",e.VOL_INDEX="VOL_INDEX",e))(Go||{}),Ys=(e=>(e.DATE_TIME="DATE/TIME",e))(Ys||{}),Ls=(e=>(e.Submit="Submit",e.Cancel="Cancel",e))(Ls||{});const Uj=["MARK","BID","ASK"],u0=["DATE/TIME",...Uj];function h0(e){return typeof e.value=="number"}const p0=e=>{switch(e){case"ASK":return"ASK";case"BACK_VOL":return"BACK_VOL";case"BID":return"BID";case"DELTA":return"DELTA";case"DOUBLE_LAST":return"DOUBLE_LAST";case"DOUBLE_QUOTE":return"DOUBLE_QUOTE";case"FRONT_VOL":return"FRONT_VOL";case"IMPL_VOL":return"IMPL_VOL";case"LAST":return"LAST";case"MARK_PERCENT":return"MARK_PERCENT";case"SINGLE_LAST":return"SINGLE_LAST";case"THINKSCRIPT":return"THINKSCRIPT";case"VOL_DIFF":return"VOL_DIFF";case"VOL_INDEX":return"VOL_INDEX";case"MARK":default:return"MARK"}},m0=e=>{switch(e){case"<":return"<";case"<%":return"<%";case"<=":return"<=";case"<=%":return"<=%";case"=":return"=";case"=%":return"=%";case">":return">";case">%":return">%";case">=":return">=";case">=%":return">=%";case"TRSTP":return"TRSTP";case"X":return"X";case"X<":return"X<";case"X>":return"X>";case"false":return"false";case"true":return"true";case"x< or >x":default:return"x< or >x"}};var va=(e=>(e.ACTIVE_TRADER="ACTIVE_TRADER",e))(va||{}),U1=(e=>(e.MONEY_AMOUNT="MONEY_AMOUNT",e))(U1||{}),ne=(e=>(e.LIMIT="LIMIT",e.MARKET="MARKET",e.MOC="MOC",e.LOC="LOC",e.STOP="STOP",e.STOPLIMIT="STOPLIMIT",e.TRAILSTOP="TRAILSTOP",e.TRAILSTOPLIMIT="TRAILSTOPLIMIT",e.NONE="NONE",e))(ne||{});const _m=e=>{switch(e){case"LIMIT":return"LIMIT";case"MARKET":return"MARKET";case"MOC":return"MOC";case"LOC":return"LOC";case"STOP":return"STOP";case"STOPLIMIT":return"STOPLIMIT";case"TRAILSTOP":return"TRAILSTOP";case"TRAILSTOPLIMIT":return"TRAILSTOPLIMIT"}throw Error("Invalid Order Type "+e)},V1=e=>{switch(e){case"LIMIT":return"LMT";case"MARKET":return"MKT";case"MOC":return"MOC";case"LOC":return"LOC";case"STOP":return"STP";case"STOPLIMIT":return"STPLMT";case"TRAILSTOP":return"TRSTP";case"TRAILSTOPLIMIT":return"TRSTPLMT"}throw Error("Invalid Order Type "+e)},Aw=e=>Object.keys(ne).filter(t=>e.indexOf(t)!==-1&&t!=="TRAILSTOPLIMIT").map(t=>_m(t)),vw=e=>e==="TRAILSTOPLIMIT"||e==="TRAILSTOP";var nt=(e=>(e.VERTICAL="VERTICAL",e.BACKRATIO="BACKRATIO",e.CALENDAR="CALENDAR",e.DIAGONAL="DIAGONAL",e.STRADDLE="STRADDLE",e.STRANGLE="STRANGLE",e.COVERED="COVERED",e.COMBO="COMBO",e.COLLAR="COLLAR",e.BUTTERFLY="BUTTERFLY",e.CONDOR="CONDOR",e.IRON_CONDOR="IRON CONDOR",e.VERT_ROLL="VERT ROLL",e.DBL_DIAG="DBL DIAG",e.SINGLE="SINGLE",e.CUSTOM="CUSTOM",e.STOCK="STOCK",e.OPTION="OPTION",e.FUTURE="FUTURE",e.FOREX="FOREX",e.INDEX="INDEX",e.FUND="FUND",e.BOND="BOND",e.CASH="CASH",e.ETF="ETF",e.MANUAL="MANUAL",e.WARRANT="WARRANT",e.RIGHT="RIGHT",e.CANCEL="CANCEL",e.EXERCISE_STOCK="EXERCISE STOCK",e.EXERCISE_CASH="EXERCISE CASH",e.EXERCISE_FUTURE="EXERCISE FUTURE",e.MIXED="MIXED",e.FUTURES_CALENDAR="FUT CALENDAR",e.INVALID_SPREAD="INVALID SPREAD",e))(nt||{});const cl=e=>{switch(e){case"VERTICAL":return"VERTICAL";case"BACKRATIO":return"BACKRATIO";case"CALENDAR":return"CALENDAR";case"DIAGONAL":return"DIAGONAL";case"STRADDLE":return"STRADDLE";case"STRANGLE":return"STRANGLE";case"COVERED":return"COVERED";case"COMBO":return"COMBO";case"COLLAR":return"COLLAR";case"DBL DIAG":case"DOUBLE_DIAGONAL":return"DBL DIAG";case"SINGLE":return"SINGLE";case"CUSTOM":return"CUSTOM";case"STOCK":return"STOCK";case"FUTURE":return"FUTURE";case"FUND":return"FUND";case"OPTION":return"OPTION";case"FOREX":return"FOREX";case"INDEX":return"INDEX";case"BOND":return"BOND";case"MANUAL":return"MANUAL";case"WARRANT":return"WARRANT";case"RIGHT":return"RIGHT";case"ETF":return"ETF";case"CASH":return"CASH";case"BUTTERFLY":case"~BUTTERFLY":case"UNBALANCED_BUTTERFLY":return"BUTTERFLY";case"CONDOR":case"~CONDOR":case"UNBALANCED_CONDOR":return"CONDOR";case"IRON CONDOR":case"~IRON CONDOR":case"UNBALANCED_IRON CONDOR":case"UNBALANCED_IRON_CONDOR":case"IRON_CONDOR":return"IRON CONDOR";case"VERT_ROLL":case"VERTICAL_ROLL":case"UNBALANCED_VERT ROLL":case"VERT ROLL":case"~VERT ROLL":return"VERT ROLL";case"EXERCISE STOCK":return"EXERCISE STOCK";case"EXERCISE FUTURE":return"EXERCISE FUTURE";case"EXERCISE CASH":return"EXERCISE CASH";case"CANCEL":return"CANCEL";case"MIXED":return"MIXED";case"FUTURES_CALENDAR":case"FUT CALENDAR":return"FUT CALENDAR";case"":default:return"INVALID SPREAD"}},cc=e=>{switch(e){case"VERTICAL":return"Vertical";case"BACKRATIO":return"Back/Ratio";case"CALENDAR":return"Calendar";case"DIAGONAL":return"Diagonal";case"STRADDLE":return"Straddle";case"STRANGLE":return"Strangle";case"COVERED":return"Covered";case"COMBO":return"Combo";case"COLLAR":return"Collar";case"BUTTERFLY":return"Butterfly";case"CONDOR":return"Condor";case"IRON CONDOR":return"Iron Condor";case"VERT ROLL":return"Vert Roll";case"DBL DIAG":return"Dbl Diag";case"SINGLE":return"Single";case"CUSTOM":return"Custom";case"STOCK":return"Stock";case"FUTURE":return"Future";case"FUND":return"Fund";case"OPTION":return"Option";case"FOREX":return"Forex";case"INDEX":return"Index";case"BOND":return"Bond";case"MANUAL":return"Manual";case"WARRANT":return"Warrant";case"RIGHT":return"Right";case"ETF":return"ETF";case"CASH":return"Cash";case"CANCEL":return"Cancel";case"MIXED":return"Mixed";case"EXERCISE STOCK":return"Exercise Stock";case"EXERCISE FUTURE":return"Exercise Future";case"EXERCISE CASH":return"Exercise Cash";case"FUT CALENDAR":return"Futures Calendar";case"INVALID SPREAD":return"Invalid Spread"}throw Error("Invalid SpreadName: "+e)};var Nm=(e=>(e.DAY="DAY",e.EXT="EXT",e.EXTO="EXTO",e.AM="AM",e.PM="PM",e.ETH="ETH",e.GTC="GTC",e.GTC_EXT="GTC_EXT",e.GTC_EXTO="GTC_EXTO",e))(Nm||{});const dl=e=>{switch(e){case"DAY":return"DAY";case"EXT":return"EXT";case"EXTO":return"EXTO";case"AM":return"AM";case"PM":return"PM";case"ETH":return"ETH";case"GTC":return"GTC";case"GTC_EXT":return"GTC_EXT";case"GTC_EXTO":return"GTC_EXTO"}throw Error("Invalid TIF: "+e)},nu=e=>{switch(e){case"DAY":return"Day";case"EXT":return"Day (EXT 13h)";case"EXTO":return"Day (EXTO 24h)";case"AM":return"Day (EXT AM)";case"PM":return"Day (EXT PM)";case"ETH":return"Global Trading Hours";case"GTC":return"GTC";case"GTC_EXT":return"GTC (EXT 13h)";case"GTC_EXTO":return"GTC (EXTO 24h)"}},Vj=e=>{switch(e){case"DAY":return __("Day");case"EXT":return __("Day (13h)");case"EXTO":return __("Day (24h)");case"AM":return __("Day (AM)");case"PM":return __("Day (PM)");case"ETH":return __("Global Trading Hours");case"GTC":return __("GTC");case"GTC_EXT":return __("GTC (13h)");case"GTC_EXTO":return __("GTC (24h)")}};var Oo=(e=>(e.Buy="buy",e.Sell="sell",e))(Oo||{}),Kr=(e=>(e.MARKET="@MKT",e.BID="@BID",e.ASK="@ASK",e))(Kr||{}),de=(e=>(e.Completed="Completed",e.Pending="Pending",e.Draft="Draft",e.Cancelled="Cancelled",e.Rejected="Rejected",e.Expired="Expired",e))(de||{}),Zs=(e=>(e.All="all",e.Working="working",e.Filled="filled",e))(Zs||{});const jd=e=>{switch(e.status){case"Completed":return"completed-"+e.symbol+"-"+e.account+"-"+e.positionId;case"Draft":return"draft-"+e.rootSymbol;case"Pending":return"pending-"+e.orderId}},Pm=(e,t,s)=>{switch(e){case k.STOCK:case k.ETF:case k.WARRANT:case k.RIGHT:return{quantity:(t==null?void 0:t.stocksOrderDefaultQuantity)??100,orderType:fa(t==null?void 0:t.stocksOrderDefaultType)};case k.OPTION:return s?{quantity:(t==null?void 0:t.futureOptionsOrderDefaultQuantity)??1,orderType:fa(t==null?void 0:t.futureOptionsOrderDefaultType)}:{quantity:(t==null?void 0:t.optionsOrderDefaultQuantity)??1,orderType:fa(t==null?void 0:t.optionsOrderDefaultType)};case k.FUTURE:return{quantity:(t==null?void 0:t.futuresOrderDefaultQuantity)??1,orderType:fa(t==null?void 0:t.futuresOrderDefaultType)};case k.FOREX:return{quantity:(t==null?void 0:t.forexOrderDefaultQuantity)??1e4,orderType:fa(t==null?void 0:t.forexOrderDefaultType)};case k.FUND:return{quantity:1,orderType:ne.MARKET};default:return{quantity:1,orderType:ne.LIMIT}}},fa=e=>e!==void 0&&e in ne&&e!=="TRAILSTOPLIMIT"?_m(e):ne.LIMIT,km=e=>e.userProperties.userProperties,Iw=(e,t)=>x(e,t,(s,n)=>s.instrumentType!==void 0?Pm(s.instrumentType,n,s.instrumentType===k.FUTURE||s.instrumentType===k.PRODUCT):{quantity:1,orderType:ne.LIMIT}),W1=e=>e.account,Pa=e=>{var t;return(t=e.account.selected)==null?void 0:t.code},Wj=e=>e.account.adjustCashSubmitDisabled,Gj=e=>e.account.adjustCashOpen,Yj=e=>e.account.adjustCashError,xw=e=>{var t;return(t=e.account.adjustCashSelectedAccount)==null?void 0:t.code},qj=e=>e.account.isResetBalancesAndPositionsChecked,ww=x(km,e=>e.defaultAccountCode),Tr=e=>e.account.list,Ow=e=>e.account.statements,Kj=e=>e.account.statement,Bd=e=>t=>{const n=Tr(t).find(r=>r.code===e);return{description:n==null?void 0:n.description,tradeable:n==null?void 0:n.tradeable}},G1=x(Tr,e=>e.some(t=>t.tradeable)),zj=x(Tr,e=>e.every(t=>t.tradeable)),Y1=x(Kj,G1,(e,t)=>({code:"",description:__("All Accounts"),tradeable:t,balance:(e==null?void 0:e.netLiquidity)??0})),Mm=x(Tr,Ow,(e,t)=>e.map(s=>{const n=t.get(s.code);return{...s,balance:(n==null?void 0:n.netLiquidity)??0}})),q1=x(Y1,Mm,(e,t)=>[e,...t]),Tl=x(q1,e=>e.selectedAccount,Y1,(e,t,s)=>{const n=e.find(r=>r.code===t);return n!==void 0?n:s}),Xj=x(e=>e.selectedAccount,Mm,Y1,(e,t)=>e==="COMBINED ACCOUNT"||e===""?t.find(s=>s.tradeable):t.find(s=>s.code===e)),Ic=x(Tl,e=>!e.tradeable),Qj=x(Mm,xw,(e,t)=>{const s=e.find(n=>n.code===t);return s!==void 0?s:e[0]}),Rw=e=>{const t=ww(e)??"",s=Bd(t)(e),n=s.description,r=s.tradeable??G1(e);return{code:t,description:n??__("All Accounts"),tradeable:r}};var ko=(e=>(e.Position="position",e.Trade="trade",e.Scans="scans",e.Watchlist="watchlist",e.OptionChain="optionChain",e.FuturesChain="futuresChain",e))(ko||{});const Zj=(e,t)=>({type:f.ColumnSortClicked,table:e,columnSort:t}),Jj=()=>({type:f.GetAuthCodeForSsoToSchwab}),e9=()=>({type:f.GetAuthCodeForSsoToEducation}),Dw=(e,t)=>({type:f.GetAuthCodeForTradingSystemSwitch,callback:e,errorCallback:t}),t9=()=>({type:f.EnableSso}),Lw=()=>({type:f.DisableSso}),s9=()=>({type:f.GetAuthCodeForSsoToMoveMoney}),n9=()=>({type:f.GetAuthCodeForSsoToRealizedGainLoss}),r9=(e,t,s=new Error("PromiseTimeoutError"))=>{let n;return Promise.race([e,new Promise((r,o)=>{n=setTimeout(o,t,s)}).finally(()=>{clearTimeout(n)})])},o9={key:"anonymous",kind:"user"},_w=e=>e.userId?{key:e.userId.toString(),kind:"user",cdDomainId:e.userCdDomainId,segment:e.userSegment,userDomain:e.userDomain,schwabAccountMigrationValue:e.schwabAccountMigrationValue}:o9,g0=e=>/^[a-z0-9]+$/i.test(e),Nw=(e,t)=>{t!==null?e.dispatch(Lw()):e.dispatch(t9())},Pw=async e=>{const t=new Error("LaunchDarklyIdentifyTimeoutError");try{await r9(Ln.identify(f1(),_w(e)),5e3,t)}catch(s){const n=e.userCode;il(`Failed to identify user ${n} to LaunchDarkly ${s===t?"within timeout":`due to ${s}`}`,li.LaunchDarkly)}},kw=e=>{const t=Eu(),s=sessionStorage.getItem("newtExpireTime");px(s)?e.dispatch({type:f.GetNewtForClickStream,callback:n=>{const r=Date.now()+n.accessExpiresIn*1e3;sessionStorage.setItem("newtExpireTime",r.toString()),sessionStorage.setItem("newt",n.accessToken),sessionStorage.setItem("refreshToken",n.refreshToken),t.setNewtInfo({newt:n.accessToken}),setTimeout(()=>{kw(e)},(n.accessExpiresIn-1800)*1e3)},errorCallback:()=>{sessionStorage.removeItem("newtExpireTime"),sessionStorage.removeItem("newt"),il("Error while fetching the NewT from SGW")}}):t.setNewtInfo({newt:sessionStorage.getItem("newt")})},Mw=e=>{e&&(e=ZT(e).toString(),Eu().setUserInfo({userIdentifier:e}))},$f=(e,t)=>{const{userSettings:s}=e.getState();t?(t=t.replace(/TDA+$/,""),t=t.replace(/SCHW+$/,""),s.tradingSystem===gt.LiveTrading&&(t=t.slice(-4)),t=ZT(t).toString()):t="",Eu().setAccountInfo({accountIdentifier:t})},a9=e=>t=>s=>{switch(s.type){case f.Connected:{setTimeout(()=>{kw(e)},0);const n=sessionStorage.getItem(nc.SSO_EXPIRED);Nw(e,n);break}case f.AccountCdiReceived:{const n=e.getState(),r=Pa(n);let o;s.accountCode===r?o=s.accountCdi:o=Ew(n)??s.accountCdi,e.dispatch(Rj(o)),r&&$f(e,r)}}t(s)},$w=e=>e!==null?JSON.parse(e):void 0;var ya=(e=>(e.accountPM="indexPM",e.prevAccountPM="prevIndexPM",e.accountLT="indexLT",e.prevAccountLT="prevIndexLT",e))(ya||{});const i9=(e,t,s)=>n=>r=>o=>{const i=n.getState();switch(o.type){case f.Connected:{e(l=>{n.dispatch({type:f.AccountsReceived,accounts:l})});break}case f.AccountsReceived:{const l=i.userSettings.tradingSystem;if(o.accounts.forEach(c=>{c.cdi!==void 0&&c.cdi!==""&&n.dispatch(Oj(c.code,c.cdi))}),l!==void 0){const c=l===gt.PaperMoney?"indexPM":"indexLT",d=$w(sessionStorage.getItem(c)),u=o.accounts[d],h=ww(i);if(u!==void 0)n.dispatch({type:f.AccountSelected,account:u,tradingSystem:l});else if(h===void 0)n.dispatch({type:f.AccountSelectionCleared,tradingSystem:l});else if(h){const p=o.accounts.find(m=>m.code===h);p&&n.dispatch({type:f.AccountSelected,account:p,tradingSystem:l})}}break}case f.AccountSelectionCleared:{Ew(i)!==null&&$f(n,"");let c;o.tradingSystem!==void 0?c=o.tradingSystem:c=i.userSettings.tradingSystem;const d=i.account.selected,u=Tr(i),h=c===gt.PaperMoney?"indexPM":"indexLT",p=c===gt.PaperMoney?"prevIndexPM":"prevIndexLT";if(d!==void 0){const m=u.findIndex(g=>g.code===d.code).toString();sessionStorage.setItem(p,m),sessionStorage.removeItem(h)}break}case f.AccountSelected:{$f(n,o.account.code);const l=Tr(i);let c;o.tradingSystem!==void 0?c=o.tradingSystem:c=i.userSettings.tradingSystem;const d=c===gt.PaperMoney?"indexPM":"indexLT",u=o.tradingSystem===gt.PaperMoney?"prevIndexPM":"prevIndexLT";if(o.tradingSystem===void 0){const h=l.findIndex(p=>p.code===o.account.code).toString();h!=="-1"&&sessionStorage.setItem(d,h),sessionStorage.removeItem(u)}break}case f.SetBalance:{s(o.accountCode,o.newBalance,l=>{l.success?n.dispatch(Nj()):n.dispatch(Pj())});break}case f.AdjustCashSubmit:{t(o.accountCode,o.cashAmount,l=>{l.success?n.dispatch(jj()):n.dispatch($j())});break}}return r(o)},l9=()=>({type:f.TogglePortfolio}),c9=()=>({type:f.ToggleSidebar}),d9=()=>({type:f.AccountSummaryDividerPressed}),lS=()=>({type:f.ResetLayout}),u9=e=>({type:f.SetIsMobileView,payload:e}),ws=(e,t)=>({type:f.OpenSection,section:e,symbol:t}),h9=e=>({type:f.WatchlistPreviouslyExpandedByClick,watchlistPreviouslyExpandedByClick:e});var pe=(e=>(e.Buy="BUY",e.Sell="SELL",e))(pe||{});const mt=e=>e.selectedSymbol.selectedSymbol,p9=e=>e.selectedSymbol.tradeSymbol,yl=e=>{const t=e.selectedSymbol.selectedSymbol;if(t===null)throw new Error("Symbol is null. If you want to handle nullable case, please use selectedSymbolSelector");return t},us=K2(),S0="symbol",f0=e=>{switch(e){case ut.TRADE:return ge.Trade;case ut.WATCHLIST:return ge.Watchlist;case ut.CHARTS:return ge.Charts;case ut.SCANS:return ge.Scans;case ut.TRANSACTIONS:return ge.Transactions;case ut.ROOT:default:return ge.Positions}},jw=e=>{switch(e){case ge.Trade:return ut.TRADE;case ge.Watchlist:return ut.WATCHLIST;case ge.Charts:return ut.CHARTS;case ge.Scans:return ut.SCANS;case ge.Transactions:return ut.TRANSACTIONS;case ge.Positions:default:return ut.ROOT}},m9=e=>{let t=e[0];return e.every((s,n)=>n===0&&s===void 0||t===void 0&&s!==void 0?!1:(t=s,!0))},g9=e=>{if(e===void 0)return;const t=e.toUpperCase();return t in ne&&t!==ne.TRAILSTOP&&t!==ne.TRAILSTOPLIMIT&&t!==ne.NONE?_m(t):void 0},S9=e=>{if(e===void 0)return;const t=e.toUpperCase();return t in Nm?dl(t):void 0},T0=e=>{if(e===void 0)return;const t=parseFloat(e);return isNaN(t)?void 0:Math.abs(t)},f9=e=>e.map(t=>{let s,n;if(t!==void 0){const r=t.split(",");r.length>1?(n=r[0],s=r[1]):s=r[0];const o=n!==""&&!isNaN(Number(n))?Number(n):void 0;if(typeof s=="string")return{symbol:s.replace(/\s/g,"+"),quantity:o}}}),T9=e=>{if(e.type===f.OpenSection)return{pathname:jw(e.section),symbol:e.symbol??null}},y9=(e,t)=>s=>{t.setValue(e,s)},C9=(e,t)=>(s,n)=>{if(s.type===f.LocationPop||s.type===f.Connected){const r=t.getValue(e),o=r.pathname,i=r.symbol,l=Ec(window.location.search),c=[l.leg1,l.leg2,l.leg3,l.leg4],d=m9(c);switch(o){case ut.ROOT:case ut.TRANSACTIONS:case ut.WATCHLIST:case ut.SCANS:{n({type:f.OpenSection,section:f0(o)});break}case ut.CHARTS:{n({type:f.OpenSection,section:ge.Charts}),us.replace(ut.CHARTS);break}case ut.TRADE:{if(typeof i=="string"&&i!==""){const u=c.filter(y=>y!==void 0&&y!==""),h=f9(u),p=g9(l.orderType),m=T0(l.limitPrice),g=T0(l.stopPrice),S=S9(l.orderTif),T=d&&h.length>0&&!h.includes(void 0);n({type:f.NavigateToSymbol,section:f0(o),symbol:i,legs:T?h:void 0,orderType:p,limitPrice:m,stopPrice:g,orderTif:S,isNavigatingFromUrl:!0})}else n({type:f.OpenSection,section:ge.Positions}),us.replace(ut.ROOT);break}default:n({type:f.OpenSection,section:ge.Positions}),us.replace(ut.ROOT)}}},ms=e=>e.layout.activePage,K1=e=>e.layout.isSidebarOpened,b9=e=>e.layout.isAccountSummaryDividerPressed,$m=e=>e.layout.isPortfolioOpened,y0=e=>e.layout.isWatchlistExpanded,E9=e=>e.layout.watchlistPreviouslyExpandedByClick,Bw=e=>e.layout.isMobileView,A9=e=>e.alerts.showAlertBook,C0=[Is.position,Is.order],b0=[Is.draftOrder,Is.order,Is.workingOrder,Is.trade,Is.news],E0=[Is.alerts],v9=x(ms,$m,mt,Bw,A9,(e,t,s,n,r)=>{let o=[];const i=!!s,l=e===ge.Charts,c=e===ge.Positions;switch(!0){case(n&&r):o=[...E0];break;case(n&&(i||l)):o=[...b0];break;case(n&&c):o=[...C0];break;case!n:o=t?[...C0]:[],o=o.concat(i||l?[...b0]:[],r?[...E0]:[]);break}return Xr(o)}),I9=x(mt,ms,(e,t)=>({pathname:jw(t),symbol:e})),x9=(e,t,s)=>{if(s<0)return[t,...e];if(s>=e.length)return[...e,t];const n=e.slice(0,s),r=e.slice(s,e.length);return[...n,t,...r]},w9=(e,t,s)=>{const n=[...e],[r]=n.splice(t,1);return n.splice(s,0,r),n},O9=(e,t)=>e.hasOwnProperty(t),R9=e=>typeof e=="number"&&!Number.isNaN(e)||!yu(e),Xo={swap:w9,insert:x9},ru={hasKey:O9,hasValue:R9},D9=(e,t,s)=>t==="type"?e:{...e,[t]:s,isEdited:!0},Fw=e=>{switch(e){case"NegativeAndDown":return Ct.NegativeAndDown;case"NegativeAndUp":return Ct.NegativeAndUp;case"PositiveAndDown":return Ct.PositiveAndDown;case"PositiveAndUp":return Ct.PositiveAndUp;case"BorderUp":return Ct.BorderUp;case"BorderDown":return Ct.BorderDown;case"FillUp":return Ct.FillUp;case"FillDown":return Ct.FillDown;case"Doji":return Ct.Doji;case"LinePositive":return Ct.LinePositive;case"LineNegative":return Ct.LineNegative;case"AreaPositive":return Ct.AreaPositive;case"AreaNegative":return Ct.AreaNegative;case"Increasing":return Ct.Increasing;case"Decreasing":return Ct.Decreasing;case"NoChanges":return Ct.NoChanges;case"color":return Ct.Color;case"True":return Ct.True;case"False":return Ct.False;case"Above":return Ct.Above;case"Below":return Ct.Below;default:return e}},L9=e=>!co(e)&&e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&e.hasOwnProperty("a"),_9=e=>{const t=Ef[e];return Object.keys(t).reduce((s,n)=>ru.hasKey(t,n)&&L9(t[n])?{...s,[n]:{h:Sd(),s:100,l:50,a:1}}:s,t)},Hw=(e,t)=>{const s=N9.find(r=>r.StudyName===e),n=Xl(t);return s?n===Ct.Above?s==null?void 0:s.AboveType:s==null?void 0:s.BelowType:n===Ct.Above?Xl(A0.AboveType):Xl(A0.BelowType)},A0={StudyName:"default",AboveType:Ct.Above,BelowType:Ct.Below},N9=[{StudyName:G.ADX_CROSSOVER,AboveType:Ct.Above,BelowType:Ct.Below},{StudyName:G.BOLLINGER_BANDS_CROSSOVER,AboveType:Ct.Above,BelowType:Ct.Below},{StudyName:G.MACD_HISTOGRAM_CROSSOVER,AboveType:Ct.NegativeToPositive,BelowType:Ct.PositiveToNegative},{StudyName:G.MOMENTUM_CROSSOVER,AboveType:Ct.NegativeToPositive,BelowType:Ct.PositiveToNegative},{StudyName:G.MONEY_FLOW_INDEX_CROSSOVER,AboveType:Ct.Above,BelowType:Ct.Below},{StudyName:G.MOVING_AVG_CROSSOVER,AboveType:Ct.Above,BelowType:Ct.Below},{StudyName:G.PARABOLIC_SAR_CROSSOVER,AboveType:Ct.Bullish,BelowType:Ct.Bearish},{StudyName:G.PRICE_AVERAGE_CROSSOVER,AboveType:Ct.Above,BelowType:Ct.Below},{StudyName:G.RSI_CROSSOVER,AboveType:Ct.Above,BelowType:Ct.Below},{StudyName:G.RATE_OF_CHANGE_CROSSOVER,AboveType:Ct.NegativeToPositive,BelowType:Ct.PositiveToNegative},{StudyName:G.STOCHASTIC_CROSSOVER,AboveType:Ct.Oversold,BelowType:Ct.Overbought}],P9=/[+-]?([1-9]\d*)?([eE][+-]?\d+)/,Qo=e=>{if(Math.floor(e)===e)return 0;const t=e.toString();if(P9.test(t)){const n=Number(t.split("e-")[1]);return isNaN(n)?0:Math.abs(n)}const s=t.split(".")[1];return s!==void 0?s.length:0};var we=(e=>(e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.Tab="Tab",e.Enter="Enter",e.Esc="Escape",e.Space=" ",e.Backspace="Backspace",e.Delete="Delete",e.Home="Home",e.End="End",e))(we||{});const k9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Enter","Escape"," "],M9=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o,isActive:i=!1})=>{const l=i?o.action.focus:o.icon.primary;return a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:l,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25 12C6.52614 12 6.75 12.2239 6.75 12.5V13C6.75 13.2761 6.97386 13.5 7.25 13.5H7.75C8.02614 13.5 8.25 13.2761 8.25 13V12.5C8.25 12.2239 8.47386 12 8.75 12H15.25C15.5261 12 15.75 12.2239 15.75 12.5V13C15.75 13.2761 15.9739 13.5 16.25 13.5H16.75C17.0261 13.5 17.25 13.2761 17.25 13V12.5C17.25 12.2239 17.4739 12 17.75 12H21V20.25C21 20.6647 20.6647 21 20.25 21H3.75C3.33525 21 3 20.6647 3 20.25V12H6.25ZM14.25 3C15.0772 3 15.75 3.67275 15.75 4.5V6.75H20.25C20.6647 6.75 21 7.086 21 7.5V10.5H17.75C17.4739 10.5 17.25 10.2761 17.25 10V9.5C17.25 9.22386 17.0261 9 16.75 9H16.25C15.9739 9 15.75 9.22386 15.75 9.5V10C15.75 10.2761 15.5261 10.5 15.25 10.5H8.75C8.47386 10.5 8.25 10.2761 8.25 10V9.5C8.25 9.22386 8.02614 9 7.75 9H7.25C6.97386 9 6.75 9.22386 6.75 9.5V10C6.75 10.2761 6.52614 10.5 6.25 10.5H3V7.5C3 7.086 3.33525 6.75 3.75 6.75H8.25V4.5C8.25 3.67275 8.92275 3 9.75 3H14.25ZM13.75 4.5H10.25C9.97386 4.5 9.75 4.72386 9.75 5V6.25C9.75 6.52614 9.97386 6.75 10.25 6.75H13.7515L13.8417 6.74222C14.0749 6.69973 14.2516 6.49546 14.2512 6.25L14.2503 5C14.2498 4.72399 14.026 4.50033 13.75 4.5Z"})})},$9=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o,isActive:i=!1})=>{const l=i?o.action.focus:o.icon.primary;return a.jsxs("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:l,children:[a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 2.17868V11.98C19.5346 10.871 18.4673 10.0757 17.2079 10.0051L16.9875 10L16.8038 10.0051C15.1017 10.0998 13.75 11.5031 13.75 13.2265V13.754L13.2375 13.7546C11.4686 13.7546 10.0329 15.182 10.0003 16.9441L10 17.0187L10.0051 17.2028C10.0721 18.4072 10.7927 19.4334 11.8195 19.9329C11.6065 20.0271 11.3662 20.0221 11.1561 19.9179L9.72743 19.2097C9.50671 19.1002 9.25273 19.1002 9.03201 19.2097L7.60338 19.9179C7.38266 20.0274 7.12868 20.0274 6.90796 19.9179L5.47932 19.2097C5.25709 19.1002 5.0016 19.0994 4.77861 19.2089L3.21845 19.9755C3.11641 20.0257 3 19.9442 3 19.8215V2.17868C3 2.05599 3.11641 1.97365 3.21845 2.0247L4.77635 2.78967C5.00084 2.90001 5.25785 2.89918 5.48159 2.78884L6.90796 2.08152C7.12868 1.97283 7.38266 1.97283 7.60338 2.08152L9.03201 2.78967C9.25273 2.89918 9.50671 2.89918 9.72743 2.78967L11.1561 2.08152C11.3768 1.97283 11.6308 1.97283 11.8515 2.08152L13.2801 2.78967C13.5008 2.89918 13.7541 2.89918 13.9755 2.78967L15.4042 2.08152C15.6249 1.97283 15.8781 1.97283 16.0996 2.08152L17.526 2.78884C17.7474 2.89918 18.0014 2.89918 18.2237 2.78967L19.7808 2.0247C19.8836 1.97365 20 2.05599 20 2.17868ZM6 7C6 6.4504 6.54133 6 7 6H16C16.458 6 17 6.4504 17 7C17 7.5504 16.458 8 16 8H7C6.54133 8 6 7.5504 6 7ZM7 10C6.54133 10 6 10.4504 6 11C6 11.5504 6.54133 12 7 12H11C11.458 12 12 11.5504 12 11C12 10.4504 11.458 10 11 10H7Z"}),a.jsx("path",{d:"M18.2437 13.1014C18.1808 12.484 17.6578 12 17.025 12L16.8603 12.0063C16.2334 12.0693 15.75 12.5929 15.75 13.2265V15.7546H13.2375L13.1125 15.761C12.4958 15.8239 12.0117 16.3475 12 16.9811L12.0063 17.146C12.0693 17.7737 12.593 18.2577 13.2375 18.2577H15.75V20.7733L15.7563 20.8986C15.8193 21.5173 16.343 22.0115 16.9875 21.9998L17.15 21.9934C17.7666 21.9305 18.25 21.4069 18.25 20.7733V18.2577H20.775L20.9 18.2513C21.5166 18.1884 22 17.6648 22 17.0312V16.9811L21.9937 16.856C21.9308 16.2386 21.4078 15.7546 20.775 15.7546H18.25V13.2265L18.2437 13.1014Z"})]})},j9=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o,isActive:i=!1})=>{const l=i?o.action.focus:o.icon.primary;return a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:l,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 2C3.55228 2 4 2.44772 4 3V20H21C21.5523 20 22 20.4477 22 21C22 21.5523 21.5523 22 21 22H3C2.44772 22 2 21.5523 2 21V3C2 2.44772 2.44772 2 3 2ZM20.5506 6.27368C20.867 5.91872 21.425 5.91046 21.7581 6.24066C22.0662 6.55434 22.0829 7.04964 21.7914 7.37158L15.8204 14.0333C15.504 14.3882 14.9544 14.4047 14.6129 14.0663L11.9064 11.3835L7.49274 15.7585C7.17629 16.0805 6.64332 16.0805 6.31853 15.7585L6.24359 15.6843C5.9188 15.3623 5.9188 14.8423 6.24359 14.5203L11.3152 9.48483C11.6399 9.16289 12.1646 9.16289 12.4894 9.48483L15.2292 12.2007L20.5506 6.27368Z"})})},B9=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o,isActive:i=!1})=>{const l=i?o.action.focus:o.icon.primary;return a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:l,children:a.jsx("path",{d:"M18.33 4.26001C16.6 2.85001 14.4 2.00001 12 2.00001C6.48002 2.00001 2.00003 6.48001 2.00003 12C2.00003 17.52 6.48002 22 12 22C17.52 22 22 17.52 22 12C22 9.60001 21.15 7.40001 19.74 5.67001C19.52 5.40001 19.28 5.14001 19.03 4.89001C19 4.86001 18.97 4.84001 18.95 4.82001C18.75 4.62001 18.54 4.43001 18.33 4.26001ZM20 12C20 16.41 16.41 20 12 20C7.59002 20 4.00002 16.41 4.00002 12C4.00002 7.59001 7.59002 4.00001 12 4.00001C13.85 4.00001 15.54 4.63001 16.9 5.69001L15.47 7.12001C14.49 6.43001 13.3 6.02001 12.01 6.02001C8.70002 6.02001 6.01002 8.71001 6.01002 12.02C6.01002 15.33 8.70002 18.02 12.01 18.02C15.32 18.02 18.01 15.33 18.01 12.02C18.01 10.72 17.59 9.51001 16.88 8.53001L18.3 7.11001C19.37 8.46001 20 10.15 20 12ZM12.51 10.08C11.85 9.91001 11.13 10.06 10.61 10.57L10.59 10.59C9.82002 11.36 9.81002 12.59 10.55 13.37C10.56 13.38 10.57 13.4 10.59 13.42C11.37 14.2 12.64 14.2 13.42 13.42L13.44 13.4C13.95 12.88 14.11 12.15 13.93 11.49L15.44 9.98001C15.8 10.58 16.02 11.27 16.02 12.02C16.02 14.23 14.23 16.02 12.02 16.02C9.81002 16.02 8.02002 14.23 8.02002 12.02C8.02002 9.81001 9.81002 8.02001 12.02 8.02001C12.75 8.02001 13.43 8.23001 14.02 8.58001L12.51 10.08Z"})})},F9=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM11 16.5C11 16.2239 11.2239 16 11.5 16H12.5C12.7761 16 13 16.2239 13 16.5V17.5C13 17.7761 12.7761 18 12.5 18H11.5C11.2239 18 11 17.7761 11 17.5V16.5ZM9.05 10C8.44 10 8 9.41 8.18 8.83C8.73 7.01 10.55 5.74 12.61 6.04C14.35 6.3 15.72 7.77 15.96 9.51C16.1881 11.1235 15.2957 11.9021 14.4344 12.6535C14.2762 12.7916 14.119 12.9288 13.97 13.07C13.85 13.18 13.74 13.29 13.64 13.41C13.635 13.415 13.63 13.4225 13.625 13.43C13.62 13.4375 13.615 13.445 13.61 13.45C13.51 13.57 13.41 13.7 13.33 13.84C13.32 13.855 13.3125 13.87 13.305 13.885C13.2975 13.9 13.29 13.915 13.28 13.93C13.1955 14.0791 13.1258 14.3443 13.0771 14.5734C13.0254 14.8168 12.8152 15 12.5664 15H11.5459C11.2525 15 11.022 14.7484 11.0609 14.4576C11.0955 14.1986 11.1433 13.9107 11.2 13.75C11.2044 13.7368 11.2068 13.7256 11.2091 13.7155C11.2119 13.7025 11.2144 13.6912 11.22 13.68C11.225 13.665 11.2325 13.6525 11.24 13.64C11.2475 13.6275 11.255 13.615 11.26 13.6C11.33 13.42 11.42 13.25 11.51 13.1C11.515 13.09 11.52 13.0825 11.525 13.075C11.53 13.0675 11.535 13.06 11.54 13.05C11.54 13.045 11.5425 13.0425 11.545 13.04C11.5475 13.0375 11.55 13.035 11.55 13.03C11.8906 12.5171 12.3473 12.1658 12.7745 11.8373C13.3883 11.3652 13.941 10.9401 14 10.15C14.08 9.18 13.38 8.25 12.43 8.05C11.4 7.83 10.45 8.44 10.13 9.33C9.99 9.71 9.66 10 9.25 10H9.05Z"})}),H9=({width:e,height:t,viewBox:s,dataTestId:n,fill:r,colors:o,className:i})=>{const l=r||o.icon.primary;return a.jsx("svg",{className:i,"data-testid":n,width:e,height:t,viewBox:s,fill:l,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.6877 17.1692L18.3274 15.8462V10.7179C18.3274 7.56923 16.5979 4.93333 13.582 4.2359V3.53846C13.582 2.68718 12.8754 2 12.0002 2C11.1249 2 10.4184 2.68718 10.4184 3.53846V4.2359C7.39188 4.93333 5.67299 7.55897 5.67299 10.7179V15.8462L4.31264 17.1692C3.64829 17.8154 4.11228 18.9231 5.05082 18.9231H18.939C19.8881 18.9231 20.3521 17.8154 19.6877 17.1692ZM12.0002 22C13.1602 22 14.1092 21.0769 14.1092 19.9487H9.89112C9.89112 21.0769 10.8297 22 12.0002 22Z"})})},U9=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o,colors:i})=>a.jsxs("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.6877 17.1692L18.3274 15.8462V10.7179C18.3274 7.56923 16.5979 4.93333 13.582 4.2359V3.53846C13.582 2.68718 12.8754 2 12.0002 2C11.1249 2 10.4184 2.68718 10.4184 3.53846V4.2359C7.39188 4.93333 5.67299 7.55897 5.67299 10.7179V15.8462L4.31264 17.1692C3.64829 17.8154 4.11228 18.9231 5.05082 18.9231H18.939C19.8881 18.9231 20.3521 17.8154 19.6877 17.1692ZM12.0002 22C13.1602 22 14.1092 21.0769 14.1092 19.9487H9.89112C9.89112 21.0769 10.8297 22 12.0002 22Z",fill:i.icon.primary}),a.jsx("circle",{cx:"16",cy:"6",r:"4",strokeWidth:"1",stroke:i.background.primary,fill:i.action.focus})]}),V9=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:r.icon.primary,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M4.78127 13.2135V16.1125C4.78127 16.8656 5.16391 17.5671 5.77613 17.9282L10.5591 20.7446C11.1331 21.0851 11.8218 21.0851 12.3958 20.7446L17.1787 17.9282C17.791 17.5671 18.1736 16.8656 18.1736 16.1125V13.2135L12.3958 16.618C11.8218 16.9584 11.1331 16.9584 10.5591 16.618L4.78127 13.2135ZM10.5591 3.24757L2.49501 7.99324C1.83496 8.38527 1.83496 9.41693 2.49501 9.80897L10.5591 14.5546C11.1331 14.8951 11.8218 14.8951 12.3958 14.5546L20.0868 10.0256V16.1228C20.0868 16.6902 20.5172 17.1544 21.0434 17.1544C21.5695 17.1544 22 16.6902 22 16.1228V9.50979C22 9.12807 21.8087 8.78762 21.5025 8.60192L12.3958 3.24757C11.8218 2.91744 11.1331 2.91744 10.5591 3.24757Z"})}),W9=({width:e,height:t,viewBox:s,dataTestId:n,fill:r,colors:o})=>{const i=r||o.icon.primary;return a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:i,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.99998 4.22222C1.99998 3 2.99081 2 4.20182 2H11.9082C12.4759 2 12.9468 2.43945 13.0034 2.99792L13.0092 3.11111C13.0092 3.72222 12.5137 4.22222 11.9082 4.22222H4.20182V19.7778H11.9082C12.4759 19.7778 12.9468 20.2172 13.0034 20.7757L13.0092 20.8889C13.0092 21.5 12.5137 22 11.9082 22H4.20182C2.99081 22 1.99998 21 1.99998 19.7778V4.22222ZM16.1844 7.22221L16.2735 7.14132C16.7036 6.79081 17.325 6.81777 17.7257 7.22221L21.678 11.2222C22.1073 11.6555 22.1073 12.3555 21.678 12.7889L17.7257 16.7778C17.2963 17.2111 16.6138 17.2111 16.1844 16.7778L16.1043 16.6878C15.757 16.2537 15.7837 15.6267 16.1844 15.2222L18.2761 13.1111H8.14771C7.5422 13.1111 7.04679 12.6111 7.04679 12L7.0525 11.8868C7.10915 11.3283 7.58005 10.8889 8.14771 10.8889H18.2761L16.1844 8.77778C15.755 8.34444 15.755 7.65555 16.1844 7.22221Z",fill:"inherit"})})},G9=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o,isActive:i=!1})=>{const l=i?o.action.focus:o.icon.primary;return a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:l,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.2857 13C21.2325 13 22 13.7675 22 14.7143V20.2857C22 21.2325 21.2325 22 20.2857 22H13.7143C12.7675 22 12 21.2325 12 20.2857V14.7143C12 13.7675 12.7675 13 13.7143 13H20.2857ZM10.9249 2.70571C11.3222 1.76476 12.6778 1.76476 13.0751 2.70571L15.2839 7.88674L20.9284 8.36303C21.9568 8.44434 22.3775 9.72218 21.5945 10.3959L20.8434 11.0416C20.6615 11.0142 20.4753 11 20.2857 11H13.7143C11.6629 11 10 12.6629 10 14.7143V19.109L7.15015 20.8161C6.29614 21.3299 5.25845 20.6193 5.38768 19.6758L5.40887 19.5615L6.69438 14.0784L2.40547 10.3843C1.62248 9.71056 2.04319 8.43273 3.07159 8.35141L8.71612 7.87513L10.9249 2.70571ZM19.5 19H14.5C14.2239 19 14 19.2239 14 19.5C14 19.7761 14.2239 20 14.5 20H19.5C19.7761 20 20 19.7761 20 19.5C20 19.2239 19.7761 19 19.5 19ZM19.5 17H14.5C14.2239 17 14 17.2239 14 17.5C14 17.7761 14.2239 18 14.5 18H19.5C19.7761 18 20 17.7761 20 17.5C20 17.2239 19.7761 17 19.5 17ZM19.5 15H14.5C14.2239 15 14 15.2239 14 15.5C14 15.7761 14.2239 16 14.5 16H19.5C19.7761 16 20 15.7761 20 15.5C20 15.2239 19.7761 15 19.5 15Z"})})},Y9=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:r.icon.primary,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13.41 18.09V18.67C13.41 19.4 12.81 20 12.08 20H12.07C11.34 20 10.74 19.4 10.74 18.67V18.07C9.41 17.79 8.23 17.06 7.73 15.83C7.5 15.28 7.93 14.67 8.53 14.67H8.77C9.14 14.67 9.44 14.92 9.58 15.27C9.87 16.02 10.63 16.54 12.09 16.54C14.05 16.54 14.49 15.56 14.49 14.95C14.49 14.12 14.05 13.34 11.82 12.81C9.34 12.21 7.64 11.19 7.64 9.14C7.64 7.42 9.03 6.3 10.75 5.93V5.33C10.75 4.6 11.35 4 12.08 4H12.09C12.82 4 13.42 4.6 13.42 5.33V5.95C14.8 6.29 15.67 7.15 16.05 8.21C16.25 8.76 15.83 9.34 15.24 9.34H14.98C14.61 9.34 14.31 9.08 14.21 8.72C13.98 7.96 13.35 7.47 12.09 7.47C10.59 7.47 9.69 8.15 9.69 9.11C9.69 9.95 10.34 10.5 12.36 11.02C14.38 11.54 16.54 12.41 16.54 14.93C16.52 16.76 15.15 17.76 13.41 18.09Z"})}),q9=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 18H20C20.55 18 21 17.55 21 17C21 16.45 20.55 16 20 16H4C3.45 16 3 16.45 3 17C3 17.55 3.45 18 4 18ZM4 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11H4C3.45 11 3 11.45 3 12C3 12.55 3.45 13 4 13ZM3 7C3 7.55 3.45 8 4 8H20C20.55 8 21 7.55 21 7C21 6.45 20.55 6 20 6H4C3.45 6 3 6.45 3 7Z",fill:r.icon.primary})}),K9=({colors:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o})=>{const i=o||e.icon.primary;return a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,fill:i,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.01 4C2.01 2.9 2.9 2 4 2L20 2C21.1 2 22 2.9 22 4V16C22 17.1 21.1 18 20 18H6L2 22L2.01 4Z",fill:"inherit"})})},z9=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o,fill:i})=>{const l=i||o.icon.primary;return a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 10C12.7625 10 15 7.7625 15 5C15 2.2375 12.7625 0 10 0C7.2375 0 5 2.2375 5 5C5 7.7625 7.2375 10 10 10ZM10 12.5C6.6625 12.5 0 14.175 0 17.5V18.75C0 19.4375 0.5625 20 1.25 20H18.75C19.4375 20 20 19.4375 20 18.75V17.5C20 14.175 13.3375 12.5 10 12.5Z",fill:l})})},X9=({width:e,height:t,viewBox:s,dataTestId:n,colors:r,className:o})=>a.jsx("svg",{width:e,height:t,viewBox:s,className:o,"data-testid":n,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M11.4 1.02C6.62 1.33 3 5.52 3 10.31V17C3 18.66 4.34 20 6 20H7C8.1 20 9 19.1 9 18V14C9 12.9 8.1 12 7 12H5V10.29C5 6.45 7.96 3.11 11.79 3C15.76 2.89 19 6.06 19 10V12H17C15.9 12 15 12.9 15 14V18C15 19.1 15.9 20 17 20H19V21H13C12.45 21 12 21.45 12 22C12 22.55 12.45 23 13 23H18C19.66 23 21 21.66 21 20V10C21 4.83 16.64 0.679998 11.4 1.02Z",fill:r.icon.primary})}),wt={BLACK:"#000",WHITE:"#fff"},oe={GRAY_CHARCOAL:"#333",GRAY:"#666",GRAY_STONE:"#999",OFF_BLACK:"#1f1f1f",JET:"#292929",SILVER_CHALICE:"#ADADAD",GRAY_ALUMINUM:"#E6E7E9",GRAY_ASH:"#D8D8D8",GRAY_NICKEL:"#f1f1f1",MERCURY:"#EBEBEB",ALPHA_WHITE_15:"hsla(0,0%,100%,0.15)",ALPHA_WHITE_50:"hsla(0,0%,100%,0.5)",ALPHA_WHITE_60:"hsla(0,0%,100%,0.60)",ALPHA_WHITE_95:"hsla(0,0%,100%,0.95)",ALPHA_BLACK_5:"hsla(0,0%,0%,0.05)",ALPHA_BLACK_15:"hsla(0,0%,0%,0.15)",ALPHA_BLACK_25:"hsla(0,0%,0%,0.25)",ALPHA_BLACK_30:"hsla(0,0%,0%,0.30)",ALPHA_BLACK_60:"hsla(0,0%,0%,0.60)",ALPHA_BLACK_75:"hsla(0,0%,0%,0.75)",ALPHA_BLACK_80:"hsla(0,0%,0%,0.80)",GOLD_CRAYOLA:"#F8C682",BLANCHED_ALMOND:"#FCE7CA",ALICE_BLUE:"#EDF6FF",ALSO_ALICE_BLUE:"#DFEDFC",FRENCH_SKY_BLUE:"#7FB5F3",LIGHT_FRENCH_SKY_BLUE:"#b4d4f8",HONOLULU_BLUE:"#356DAB",BRIGHT_NAVY_BLUE:"#427AB9",RICH_BLACK_FOGRA:"#041023",DENIM:"#0C59B2",LIGHT_DENIM:"#0f6edb",BEAU_BLUE:"#BFDAF9",BLUE_FROST:"#E1EEF9",GREEN_CORE:"#40A829",MANTIS:"#66B953",SLIMY_GREEN:"#399624",FOREST_GREEN:"#103B06",GREEN_VERDE:"#087900",MAY_GREEN:"#399333",PAKISTAN_GREEN:"#076C00",NYANZA:"#D9F3D8",TART_ORANGE:"#FF3333",ENGLISH_VERMILLION:"#CD4241",CARNLEIAN:"#AD1110",MISTY_ROSE:"#F7E2E2",FIELD_DRAB:"#664600",ORANGE:"#F5A700",FIELD_DRAB_LIGHT:"#805700",RED_ROJA:"#C11312",ORANGE_RED_CRAYOLA:"#FF5B5B",PERMANENT_GERANIUM_LAKE:"#E52D2D",BLACK_BEAN:"#470A0A",EVERGREEN:"#305352",SPEARMINT:"#31867e",JADE:"#37a774",COVE:"#3f94c6",LAGOON:"#316486",BLACKBERRY:"#3f3670",EGGPLANT:"#6c2a73",RASPBERRY:"#a13069",HONEY:"#D5BA65",WATERMELON:"#c664a1",TOFFEE:"#948774",DIJON:"#b08504",YAM:"#bd5310",SLATE:"#586776",LAPIS_LAZULI:"#275E9B",BLUE_GRAY:"#6399D6",OXFORD_BLUE:"#0B1D38",BLUE_YONDER:"#4B75A5",AFGAN_TAN:"#935E1E",YELLOW_SEA:"#F0A033",HONEY_YELLOW:"#F6B333",MAXIMUM_YELLOW_RED:"#F7C25B",AZURE:"#2a84ec",JAGUAR:"#29292B",CORE_BLUE_30:"#006E99",CORE_BLUE_50:"#00B7FF",DARK_PURPLE:"#732181",LIGHT_PURPLE:"#CB7DCE"},Q9=({width:e,height:t,viewBox:s,dataTestId:n})=>a.jsx("svg",{width:e,height:t,viewBox:s,"data-testid":n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.411 4 20 7.59 20 12C20 16.41 16.411 20 12 20ZM12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM11.0002 8.5C11.0002 8.77614 11.2241 9 11.5002 9H12.5002C12.7763 9 13.0002 8.77614 13.0002 8.5V7.5C13.0002 7.22386 12.7763 7 12.5002 7H11.5002C11.2241 7 11.0002 7.22386 11.0002 7.5V8.5ZM11.5002 17C11.2241 17 11.0002 16.7761 11.0002 16.5V11.5C11.0002 11.2239 11.2241 11 11.5002 11H12.5002C12.7763 11 13.0002 11.2239 13.0002 11.5V16.5C13.0002 16.7761 12.7763 17 12.5002 17H11.5002Z",fill:wt.BLACK})}),Z9=({width:e,height:t,viewBox:s,dataTestId:n,className:r,colors:o})=>a.jsx("svg",{width:e,className:r,height:t,viewBox:s,fill:o.icon.primary,"data-testid":n,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M3.23927 4.81125C5.86189 8.16375 9.73931 13.125 9.73931 13.125V18.75C9.73931 19.9875 10.7567 21 12.0002 21C13.2437 21 14.2611 19.9875 14.2611 18.75V13.125C14.2611 13.125 18.1385 8.16375 20.7611 4.81125C21.3376 4.06875 20.8063 3 19.8568 3H4.13232C3.19405 3 2.66274 4.06875 3.23927 4.81125Z",fill:"inherit"})}),J9=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{width:e,height:t,viewBox:s,"data-testid":n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM19.6 8.25L12.53 12.67C12.21 12.87 11.79 12.87 11.47 12.67L4.4 8.25C4.15 8.09 4 7.82 4 7.53C4 6.86 4.73 6.46 5.3 6.81L12 11L18.7 6.81C19.27 6.46 20 6.86 20 7.53C20 7.82 19.85 8.09 19.6 8.25Z",fill:r.icon.secondary_reverse})}),eB=({width:e,height:t,colors:s,viewBox:n,dataTestId:r})=>a.jsx("svg",{width:e,height:t,viewBox:n,fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":r,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.6408 21C20.4242 21 21 20.3922 21 19.6255C21 19.2701 20.8773 18.9242 20.613 18.6623L16.5071 14.5761C17.3566 13.3886 17.8568 11.9299 17.8568 10.359C17.8568 6.31013 14.5155 3 10.4284 3C6.35081 3 3 6.31013 3 10.359C3 14.4078 6.34137 17.7179 10.4284 17.7179C11.9292 17.7179 13.3356 17.2691 14.506 16.5023L18.6403 20.6073C18.914 20.8691 19.2632 21 19.6408 21ZM10.4284 15.7543C7.43629 15.7543 4.98217 13.3231 4.98217 10.359C4.98217 7.40416 7.43629 4.96364 10.4284 4.96364C13.4206 4.96364 15.8747 7.40416 15.8747 10.359C15.8747 13.3231 13.4206 15.7543 10.4284 15.7543Z",fill:s.icon.primary})}),tB=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":n,children:a.jsx("path",{d:"M19.2364 15.2748L16.6912 14.9842C16.08 14.914 15.4788 15.1244 15.0479 15.5553L13.2042 17.399C10.3685 15.9561 8.04383 13.6415 6.60092 10.7957L8.45465 8.94201C8.88552 8.51114 9.09594 7.90993 9.0258 7.2987L8.73522 4.77362C8.61497 3.76158 7.76326 3.00005 6.7412 3.00005H5.00771C3.87544 3.00005 2.93354 3.94194 3.00368 5.07422C3.53475 13.6314 10.3785 20.4652 18.9257 20.9963C20.058 21.0664 20.9999 20.1245 20.9999 18.9922V17.2587C21.0099 16.2467 20.2484 15.395 19.2364 15.2748Z",fill:r.icon.secondary_reverse})}),sB=({width:e,height:t,viewBox:s,dataTestId:n,colors:r,isActive:o=!1,isDisabled:i=!1})=>{const l=i?r.background.tertiary:o?r.action.focus:r.icon.primary;return a.jsx("svg",{width:e,height:t,viewBox:s,"data-testid":n,fill:l,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 17.46V20.5C3 20.78 3.22 21 3.5 21H6.54C6.67 21 6.8 20.95 6.89 20.85L17.81 9.94L14.06 6.19L3.15 17.1C3.05 17.2 3 17.32 3 17.46ZM20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.35 2.9 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04Z"})})},nB=({className:e,width:t,height:s,viewBox:n,colors:r,dataTestId:o})=>a.jsx("svg",{width:t,height:s,viewBox:n,fill:"none","data-testid":o,className:e,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.3274 15.8462L19.6877 17.1692C20.3521 17.8154 19.8881 18.9231 18.939 18.9231H5.05082C4.11228 18.9231 3.64829 17.8154 4.31264 17.1692L5.67299 15.8462V10.7179C5.67299 7.55897 7.39188 4.93333 10.4184 4.2359V3.53846C10.4184 2.68718 11.1249 2 12.0002 2C12.8754 2 13.582 2.68718 13.582 3.53846V4.2359C16.5979 4.93333 18.3274 7.56923 18.3274 10.7179V15.8462ZM14.1092 19.9487C14.1092 21.0769 13.1602 22 12.0002 22C10.8297 22 9.89112 21.0769 9.89112 19.9487H14.1092ZM13 13H14C14.55 13 15 12.55 15 12C15 11.45 14.55 11 14 11H13V10C13 9.45 12.55 9 12 9C11.45 9 11 9.45 11 10V11H10C9.45 11 9 11.45 9 12C9 12.55 9.45 13 10 13H11V14C11 14.55 11.45 15 12 15C12.55 15 13 14.55 13 14V13Z",fill:r.icon.primary})}),rB=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{width:e,height:t,viewBox:s,fill:r.icon.primary,"data-testid":n,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M12 17.35C13.2 17.35 14.2083 16.9417 15.025 16.125C15.8417 15.3083 16.25 14.3 16.25 13.1C16.25 11.8833 15.8417 10.8708 15.025 10.0625C14.2083 9.25417 13.2 8.85 12 8.85C10.7833 8.85 9.77083 9.25417 8.9625 10.0625C8.15417 10.8708 7.75 11.8833 7.75 13.1C7.75 14.3 8.15417 15.3083 8.9625 16.125C9.77083 16.9417 10.7833 17.35 12 17.35ZM3.5 21C3.1 21 2.75 20.85 2.45 20.55C2.15 20.25 2 19.9 2 19.5V6.675C2 6.29167 2.15 5.94583 2.45 5.6375C2.75 5.32917 3.1 5.175 3.5 5.175H7.175L8.55 3.525C8.68333 3.34167 8.85 3.20833 9.05 3.125C9.25 3.04167 9.46667 3 9.7 3H14.3C14.5333 3 14.75 3.04167 14.95 3.125C15.15 3.20833 15.3167 3.34167 15.45 3.525L16.825 5.175H20.5C20.8833 5.175 21.2292 5.32917 21.5375 5.6375C21.8458 5.94583 22 6.29167 22 6.675V19.5C22 19.9 21.8458 20.25 21.5375 20.55C21.2292 20.85 20.8833 21 20.5 21H3.5Z"})}),oB=({width:e,height:t,viewBox:s})=>a.jsxs("svg",{width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsxs("g",{clipPath:"url(#clip0_1763_2337)",children:[a.jsx("path",{d:"M21.5 0.5H2.5C1.39543 0.5 0.5 1.39543 0.5 2.5V21.5C0.5 22.6046 1.39543 23.5 2.5 23.5H21.5C22.6046 23.5 23.5 22.6046 23.5 21.5V2.5C23.5 1.39543 22.6046 0.5 21.5 0.5Z",fill:"black",stroke:"#666666"}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1H22C22.5523 1 23 1.44772 23 2V22C23 22.5523 22.5523 23 22 23H12V1Z",fill:"#1F1F1F"}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1H22C22.5523 1 23 1.44772 23 2V12H12V1Z",fill:"#333333"})]}),a.jsx("defs",{children:a.jsx("clipPath",{id:"clip0_1763_2337",children:a.jsx("rect",{width:"24",height:"24",fill:"white"})})})]}),aB=({width:e,height:t,viewBox:s})=>a.jsxs("svg",{width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsxs("g",{clipPath:"url(#clip0_1763_2336)",children:[a.jsx("path",{d:"M21.5 0.5H2.5C1.39543 0.5 0.5 1.39543 0.5 2.5V21.5C0.5 22.6046 1.39543 23.5 2.5 23.5H21.5C22.6046 23.5 23.5 22.6046 23.5 21.5V2.5C23.5 1.39543 22.6046 0.5 21.5 0.5Z",fill:"white",stroke:"#666666"}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1H22C22.5523 1 23 1.44772 23 2V22C23 22.5523 22.5523 23 22 23H12V1Z",fill:"#F1F1F1"}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1H22C22.5523 1 23 1.44772 23 2V12H12V1Z",fill:"#D8D8D8"})]}),a.jsx("defs",{children:a.jsx("clipPath",{id:"clip0_1763_2336",children:a.jsx("rect",{width:"24",height:"24",fill:"white"})})})]}),iB=({width:e,height:t,colors:s,viewBox:n,dataTestId:r})=>a.jsx("svg",{width:e,height:t,viewBox:n,fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":r,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.22222 2C2.99492 2 2 2.99492 2 4.22222V19.7778C2 21.0051 2.99492 22 4.22222 22H19.7778C21.0051 22 22 21.0051 22 19.7778V4.22222C22 2.99492 21.0051 2 19.7778 2H4.22222ZM19.7778 3.66667H12.8333V11.1667H20.3333V4.22222C20.3333 3.9154 20.0846 3.66667 19.7778 3.66667ZM20.3333 12.8333H12.8333V20.3333H19.7778C20.0846 20.3333 20.3333 20.0846 20.3333 19.7778V12.8333ZM11.1667 11.1667V3.66667H4.22222C3.9154 3.66667 3.66667 3.9154 3.66667 4.22222V11.1667H11.1667ZM3.66667 12.8333H11.1667V20.3333H4.22222C3.9154 20.3333 3.66667 20.0846 3.66667 19.7778V12.8333Z",fill:s.icon.primary})}),lB=({width:e,height:t,viewBox:s,dataTestId:n,colors:r,className:o})=>a.jsxs("svg",{width:e,height:t,viewBox:s,fill:r.icon.primary,"data-testid":n,className:o,xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M20.3333 10.335H3.66667C2.74619 10.335 2 9.58881 2 8.66833V8.66667C2 7.74619 2.74619 7 3.66667 7H20.3333C21.2538 7 22 7.74619 22 8.66667V8.66833C22 9.58881 21.2538 10.335 20.3333 10.335Z",fill:"#999999"}),a.jsx("path",{d:"M20.3333 17.0015H3.66667C2.74619 17.0015 2 16.2554 2 15.3349C2 14.4144 2.74619 13.6682 3.66667 13.6682H20.3333C21.2538 13.6682 22 14.4144 22 15.3349C22 16.2554 21.2538 17.0015 20.3333 17.0015Z",fill:"#999999"})]}),cB=({width:e,height:t,viewBox:s,fill:n,colors:r,dataTestId:o})=>a.jsx("svg",{width:e,height:t,fill:"none",stroke:"none",viewBox:s,"data-testid":o,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 4H18V3C18 2.45 17.55 2 17 2C16.45 2 16 2.45 16 3V4H8V3C8 2.45 7.55 2 7 2C6.45 2 6 2.45 6 3V4H5C3.89 4 3.01 4.9 3.01 6L3 20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4ZM18 20H6C5.45 20 5 19.55 5 19V9H19V19C19 19.55 18.55 20 18 20ZM8 11H11C11.55 11 12 11.45 12 12V15C12 15.55 11.55 16 11 16H8C7.45 16 7 15.55 7 15V12C7 11.45 7.45 11 8 11Z",fill:n||r.icon.primary})}),dB=({isActive:e=!1,height:t,width:s,viewBox:n,className:r,colors:o,isSelected:i,dataTestId:l})=>{const c=e?o.action.focus:i?o.icon.secondary:o.icon.primary;return a.jsx("svg",{className:r,"data-testid":l,width:s,height:t,viewBox:n,fill:c,stroke:"none",children:a.jsx("path",{d:"M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V9C18 7.9 17.1 7 16 7H8C6.9 7 6 7.9 6 9V19ZM18 4H15.5L14.79 3.29C14.61 3.11 14.35 3 14.09 3H9.91C9.65 3 9.39 3.11 9.21 3.29L8.5 4H6C5.45 4 5 4.45 5 5C5 5.55 5.45 6 6 6H18C18.55 6 19 5.55 19 5C19 4.45 18.55 4 18 4Z"})})},uB=A(dB)`
  pointer-events: none;
`,hB=({width:e,height:t,viewBox:s,className:n,fill:r,stroke:o})=>a.jsx("svg",{"data-testid":"rating-star-icon",className:n,width:e,height:t,viewBox:s,stroke:o,children:a.jsx("path",{d:"M10 16.7494L14.8499 19.8186C15.738 20.3811 16.8249 19.5496 16.5911 18.498L15.3056 12.7264L19.5945 8.83784C20.3775 8.12861 19.9568 6.78352 18.9284 6.69792L13.2839 6.19657L11.0751 0.742855C10.6778 -0.247618 9.32219 -0.247618 8.92485 0.742855L6.71612 6.18435L1.07159 6.6857C0.04319 6.77129 -0.37752 8.11638 0.405468 8.82561L4.69438 12.7141L3.40887 18.4858C3.17514 19.5374 4.26198 20.3689 5.15015 19.8064L10 16.7494Z",fill:r})}),pB=({height:e,width:t,viewBox:s,className:n,colors:r,isSelected:o,dataTestId:i})=>{const l=o?r.icon.secondary:r.icon.primary;return a.jsx("svg",{className:n,"data-testid":i,width:t,height:e,viewBox:s,fill:l,stroke:"none",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.4925 5.39127L16.8187 8.06499C17.7 9.14124 18.25 10.4987 18.25 12C18.25 15.4513 15.4525 18.25 12 18.25C8.54875 18.25 5.75 15.4513 5.75 12C5.75 8.5475 8.54875 5.75 12 5.75C13.5013 5.75 14.8575 6.29999 15.935 7.18124L18.6087 4.50751C16.845 2.95126 14.5375 2 12 2C6.4775 2 2 6.47625 2 12C2 17.5225 6.4775 22 12 22C17.5238 22 22 17.5225 22 12C22 9.4625 21.0487 7.15502 19.4925 5.39127ZM12 10.125C12.29 10.125 12.56 10.195 12.8038 10.3125L15.045 8.07124C14.2 7.41374 13.1512 7.00626 12 7.00626C9.2475 7.00626 7.0075 9.24625 7.0075 12C7.0075 14.7525 9.2475 16.9925 12 16.9925C14.7537 16.9925 16.9937 14.7525 16.9937 12C16.9937 10.8488 16.5863 9.79999 15.9288 8.95499L13.6875 11.1962C13.805 11.44 13.875 11.7113 13.875 12C13.875 13.035 13.0363 13.875 12 13.875C10.965 13.875 10.125 13.035 10.125 12C10.125 10.9637 10.965 10.125 12 10.125Z"})})},mB=A(pB)`
  pointer-events: none;
`,gB=({height:e,width:t,viewBox:s,colors:n,isActive:r=!1})=>{const o=r?n.action.focus:n.icon.primary;return a.jsx("svg",{"data-testid":"settings-icon",width:t,height:e,viewBox:s,fill:o,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.6407 12.98C19.6818 12.66 19.7127 12.34 19.7127 12C19.7127 11.66 19.6818 11.34 19.6407 11.02L21.8099 9.37C22.0052 9.22 22.0566 8.95 21.9333 8.73L19.8772 5.27C19.7538 5.05 19.4762 4.97 19.25 5.05L16.6902 6.05C16.1556 5.65 15.5799 5.32 14.9528 5.07L14.5621 2.42C14.5313 2.18 14.3154 2 14.0584 2H9.94616C9.68915 2 9.47326 2.18 9.44242 2.42L9.05176 5.07C8.42465 5.32 7.84894 5.66 7.31435 6.05L4.7545 5.05C4.51804 4.96 4.25075 5.05 4.12738 5.27L2.07128 8.73C1.93763 8.95 1.99931 9.22 2.19464 9.37L4.36384 11.02C4.32271 11.34 4.29187 11.67 4.29187 12C4.29187 12.33 4.32271 12.66 4.36384 12.98L2.19464 14.63C1.99931 14.78 1.94791 15.05 2.07128 15.27L4.12738 18.73C4.25075 18.95 4.52832 19.03 4.7545 18.95L7.31435 17.95C7.84894 18.35 8.42465 18.68 9.05176 18.93L9.44242 21.58C9.47326 21.82 9.68915 22 9.94616 22H14.0584C14.3154 22 14.5313 21.82 14.5621 21.58L14.9528 18.93C15.5799 18.68 16.1556 18.34 16.6902 17.95L19.25 18.95C19.4865 19.04 19.7538 18.95 19.8772 18.73L21.9333 15.27C22.0566 15.05 22.0052 14.78 21.8099 14.63L19.6407 12.98ZM12.0023 15.5C10.0181 15.5 8.40408 13.93 8.40408 12C8.40408 10.07 10.0181 8.5 12.0023 8.5C13.9864 8.5 15.6005 10.07 15.6005 12C15.6005 13.93 13.9864 15.5 12.0023 15.5Z"})})},SB=({width:e,height:t,viewBox:s,colors:n,dataTestId:r})=>a.jsx("svg",{width:e,height:t,viewBox:s,xmlns:"http://www.w3.org/2000/svg","data-testid":r,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9952 22C17.4761 22 22 17.4739 22 12C22 6.52611 17.4664 2 11.9855 2C6.51426 2 2 6.52611 2 12C2 17.4739 6.52392 22 11.9952 22ZM10.9802 16.7389L14.9145 13.0348C15.5041 12.4932 15.5041 11.5358 14.9145 10.9942L10.9802 7.29014C10.6515 6.98066 10.1489 6.97099 9.83955 7.26112C9.50122 7.58027 9.49155 8.12186 9.82021 8.43133L13.6385 12.0097L9.82021 15.5977C9.50122 15.9072 9.49155 16.4294 9.82988 16.7679C10.1102 17.0387 10.6805 17.029 10.9802 16.7389Z",fill:n.icon.primary})}),fB=({width:e,height:t,fill:s,colors:n,dataTestId:r,viewBox:o,className:i})=>a.jsx("svg",{width:e,height:t,viewBox:o,fill:s||n.icon.primary,className:i,xmlns:"http://www.w3.org/2000/svg","data-testid":r,children:a.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20ZM11.78 7H11.72C11.32 7 11 7.32 11 7.72V12.44C11 12.79 11.18 13.12 11.49 13.3L15.64 15.79C15.98 15.99 16.42 15.89 16.62 15.55C16.83 15.21 16.72 14.76 16.37 14.56L12.5 12.26V7.72C12.5 7.32 12.18 7 11.78 7Z"})}),TB=A(fB)`
  flex-shrink: 0;
`,yB=({width:e,height:t,viewBox:s,className:n,colors:r,isActive:o,dataTestId:i})=>{const l=o?r.action.focus:r.icon.primary;return a.jsx("svg",{className:n,"data-testid":i,width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.46 17.73C3.14 18.12 3 18.56 3 19C3.01 20.03 3.82 21 5 21H19C20.19 21 21 20.03 21 19C21 18.56 20.86 18.12 20.54 17.73L15 11V5H16C16.55 5 17 4.55 17 4C17 3.45 16.55 3 16 3H8C7.45 3 7 3.45 7 4C7 4.55 7.45 5 8 5H9V11L3.46 17.73ZM13.3125 11.6052L15.4896 14.25H8.51037L10.6875 11.6052V4.6875H13.3125V11.6052Z",fill:l})})},CB=({width:e,colors:t,height:s,viewBox:n,dataTestId:r})=>a.jsx("svg",{"data-testid":r,width:e,height:s,viewBox:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M12 4.5C7.03 4.5 3 8.53 3 13.5C3 18.47 7.03 22.5 12 22.5C16.97 22.5 21 18.47 21 13.5C21 8.53 16.97 4.5 12 4.5ZM13 13.5C13 14.05 12.55 14.5 12 14.5C11.45 14.5 11 14.05 11 13.5V9.5C11 8.95 11.45 8.5 12 8.5C12.55 8.5 13 8.95 13 9.5V13.5ZM12 20.5C8.14 20.5 5 17.36 5 13.5C5 9.64 8.14 6.5 12 6.5C15.86 6.5 19 9.64 19 13.5C19 17.36 15.86 20.5 12 20.5ZM17.9826 7.93164C18.5478 7.36646 18.976 6.93819 19.2674 6.64685C19.7044 6.20984 19.7437 5.53408 19.3548 5.14517C18.9659 4.75626 18.2902 4.79562 17.8531 5.23264C17.5618 5.52398 17.1196 5.96623 16.5264 6.55939L17.9826 7.93164ZM10 3.5H14C14.55 3.5 15 3.05 15 2.5C15 1.95 14.55 1.5 14 1.5H10C9.45 1.5 9 1.95 9 2.5C9 3.05 9.45 3.5 10 3.5Z",fill:t.text.green})}),bB=({width:e,height:t,viewBox:s,colors:n,dataTestId:r})=>{const o=n.icon.primary;return a.jsxs("svg",{width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":r,children:[a.jsx("path",{d:"M18.8839 12.0769C18.8839 11.5246 19.3317 11.0769 19.8839 11.0769C20.4362 11.0769 20.8839 11.5246 20.8839 12.0769V21C20.8839 21.5523 20.4362 22 19.8839 22C19.3317 22 18.8839 21.5523 18.8839 21V12.0769Z",fill:o}),a.jsx("path",{d:"M4.88394 3.79985C4.88394 3.24756 5.33166 2.79985 5.88394 2.79985C6.43623 2.79985 6.88394 3.24756 6.88394 3.79985L6.88392 10.2707C6.88392 10.823 6.4362 11.2707 5.88392 11.2707C5.33163 11.2707 4.88392 10.823 4.88392 10.2707L4.88394 3.79985Z",fill:o}),a.jsx("path",{d:"M14.4219 22C13.8696 22 13.4219 21.5523 13.4219 21C13.4219 20.4477 13.8696 20 14.4219 20H19.8839C20.4362 20 20.8839 20.4477 20.8839 21C20.8839 21.5523 20.4362 22 19.8839 22H14.4219Z",fill:o}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.9825 21.6132C17.1142 21.4439 17.1925 21.2311 17.1925 21C17.1925 20.7689 17.1142 20.5561 16.9825 20.3868V21.6132ZM6.88394 9.73183V4H13.8839V8C13.8839 8.55228 14.3317 9 14.8839 9H18.8839V13C18.8839 13.5523 19.3317 14 19.8839 14C20.4362 14 20.8839 13.5523 20.8839 13V8.41421C20.8839 8.149 20.7786 7.89464 20.5911 7.70711L15.1768 2.29289C14.9893 2.10536 14.7349 2 14.4697 2H6.88394C5.78394 2 4.88394 2.9 4.88394 4V9.73183H6.88394Z",fill:o}),a.jsx("path",{d:"M9.06316 17.3V18.76C9.06316 19.4103 9.5903 19.9374 10.2406 19.9374C10.8908 19.9374 11.418 19.4103 11.418 18.76V14.4507C11.418 13.8005 10.8908 13.2733 10.2406 13.2733H5.94306C5.29281 13.2733 4.76567 13.8005 4.76567 14.4507C4.76567 15.101 5.29281 15.6281 5.94306 15.6281H7.40303L4.75767 18.2825C4.30018 18.7415 4.30081 19.4843 4.75908 19.9426C5.2179 20.4014 5.96179 20.4014 6.42061 19.9426L9.06316 17.3Z",fill:o}),a.jsx("path",{d:"M3.46905 21.2464C3.00962 20.7889 3.008 20.0457 3.46544 19.5862L6.76195 16.2753C7.21939 15.8159 7.96266 15.8143 8.4221 16.2717C8.88154 16.7291 8.88316 17.4724 8.42572 17.9319L5.12921 21.2428C4.67177 21.7022 3.92849 21.7038 3.46905 21.2464Z",fill:o})]})},EB=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{width:e,height:t,viewBox:s,fill:r.sell.main,"data-testid":n,xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:a.jsx("path",{d:"M11.1333 15.1507C11.6172 15.6164 12.3827 15.6164 12.8667 15.1507L17.5591 10.6354C18.37 9.85521 17.8177 8.48472 16.6924 8.48472H7.30757C6.1823 8.48472 5.63001 9.85521 6.44085 10.6354L11.1333 15.1507Z"})}),AB=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{width:e,height:t,viewBox:s,fill:r.buy.main,"data-testid":n,xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:a.jsx("path",{d:"M11.1333 8.83399C11.6173 8.36828 12.3828 8.36828 12.8667 8.83399L17.5591 13.3493C18.37 14.1295 17.8177 15.5 16.6924 15.5H7.3076C6.18233 15.5 5.63004 14.1295 6.44088 13.3493L11.1333 8.83399Z"})});var Ko=(e=>(e.dark="DARK",e.light="LIGHT",e))(Ko||{}),Ds=(e=>(e.none="none",e.xxxs="xxxSmall",e.xxs="xxSmall",e.xs="xSmall",e.sm="small",e.m="medium",e.l="large",e.xl="xLarge",e.xxl="xxLarge",e.xxxl="xxxLarge",e.xxxxl="xxxxLarge",e.xxxxxl="xxxxxLarge",e))(Ds||{}),Pe=(e=>(e.primary="primary",e.secondary="secondary",e.tertiary="tertiary",e))(Pe||{}),Ua=(e=>(e.level1="Level 1",e.level2="Level 2",e.level3="Level 3",e.level4="Level 4",e.level5="Level 5",e))(Ua||{}),sr=(e=>(e.title1="Title 1",e.title2="Title 2",e.subhead1="Subhead 1",e.subhead2="Subhead 2",e.body1="Body 1",e.body2="Body 2",e.caption="Caption",e.captionEmphasized="Caption (Emphasized)",e))(sr||{});const vB=({width:e,height:t,viewBox:s,dataTestId:n,fill:r,colors:o,colorVariant:i=Pe.primary})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:r||(o==null?void 0:o.icon[i]),xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12ZM7 12C7 11.5858 7.33579 11.25 7.75 11.25H11.25V7.75C11.25 7.33579 11.5858 7 12 7C12.4142 7 12.75 7.33579 12.75 7.75V11.25H16.25C16.6642 11.25 17 11.5858 17 12C17 12.4142 16.6642 12.75 16.25 12.75H12.75V16.25C12.75 16.6642 12.4142 17 12 17C11.5858 17 11.25 16.6642 11.25 16.25V12.75H7.75C7.33579 12.75 7 12.4142 7 12Z"})}),IB=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:r.icon.primary,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM16 13H13V16C13 16.55 12.55 17 12 17C11.45 17 11 16.55 11 16V13H8C7.45 13 7 12.55 7 12C7 11.45 7.45 11 8 11H11V8C11 7.45 11.45 7 12 7C12.55 7 13 7.45 13 8V11H16C16.55 11 17 11.45 17 12C17 12.55 16.55 13 16 13Z"})}),z1=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o,colors:i,"aria-hidden":l,colorVariant:c=Pe.primary})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:(i==null?void 0:i.icon[c])||o,"aria-hidden":l,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.10711 10.4823L10.9546 15.5754C11.5339 16.1415 12.4698 16.1415 13.0491 15.5754L16.8966 10.4823C17.8325 9.56777 17.164 8 15.8419 8L8.14696 8C6.82486 8 6.17124 9.56777 7.10711 10.4823Z"})}),xB=A(z1)`
  flex-shrink: 0;

  g {
    fill: ${({theme:{colors:e}})=>e==null?void 0:e.icon.primary};
  }

  transform: rotate(270deg);
`,wB=A(z1)`
  flex-shrink: 0;

  g {
    fill: ${({theme:{colors:e}})=>e==null?void 0:e.icon.primary};
  }

  transform: rotate(90deg);
`,X1=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o,colors:i,"aria-hidden":l,colorVariant:c=Pe.primary})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o||(i==null?void 0:i.icon[c]),"aria-hidden":l,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.33031 10.8617L11.2159 14.6815C11.6504 15.1062 12.3523 15.1062 12.7868 14.6815L15.6724 10.8617C16.3743 10.1758 15.873 9 14.8814 9H9.11021C8.11863 9 7.62841 10.1758 8.33031 10.8617Z"})}),OB=A(X1)`
  flex-shrink: 0;
  transform: rotate(270deg);
`,RB=A(X1)`
  flex-shrink: 0;
  transform: rotate(90deg);
`,DB=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o==null?void 0:o.component.InformationMessage.border,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.7071 15.4929C9.31658 15.8834 8.68341 15.8834 8.29289 15.4929L5.49999 12.7C5.11339 12.3134 4.48659 12.3134 4.09999 12.7C3.71339 13.0866 3.71339 13.7134 4.09999 14.1L8.29289 18.2929C8.68341 18.6834 9.31658 18.6834 9.7071 18.2929L20.3 7.70001C20.6866 7.31341 20.6866 6.68661 20.3 6.30001C19.9134 5.91341 19.2866 5.91341 18.9 6.30001L9.7071 15.4929Z",fill:"inherit"})}),LB=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",fill:o,d:"M2 11.9952C2 17.4761 6.52611 22 12 22C17.4739 22 22 17.4664 22 11.9855C22 6.51426 17.4739 2 12 2C6.52611 2 2 6.52392 2 11.9952ZM3.99226 11.9952C3.99226 7.55826 7.56093 4.01065 12 4.01065C16.4391 4.01065 19.9981 7.55826 19.9981 11.9855C19.9981 16.4224 16.4391 19.9894 12 19.9991C7.56093 20.0087 3.99226 16.4321 3.99226 11.9952ZM7.26112 10.9802L10.9652 14.9144C11.5068 15.5041 12.4642 15.5041 13.0058 14.9144L16.7099 10.9802C17.0193 10.6515 17.029 10.1488 16.7389 9.8395C16.4197 9.50117 15.8781 9.49151 15.5687 9.82017L11.9903 13.6384L8.40232 9.82017C8.09284 9.50117 7.57059 9.49151 7.2321 9.82984C6.96131 10.1102 6.97098 10.6805 7.26112 10.9802Z"})}),jm=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o,colors:i})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o||(i==null?void 0:i.icon.primary),xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M11.2274 16.691C11.6405 17.0713 12.2262 17.1006 12.6659 16.7787L12.7726 16.691L18.5657 11.3577C19.0778 10.8862 19.147 10.0455 18.7202 9.47979C18.322 8.9518 17.6325 8.85002 17.126 9.22207L17.0204 9.30907L12 13.9312L6.97955 9.30907C6.50164 8.86908 5.80684 8.90633 5.36939 9.37319L5.27976 9.47979C4.8815 10.0078 4.91521 10.7754 5.3378 11.2586L5.43429 11.3577L11.2274 16.691Z"})}),_B=A(jm)`
  transform: rotate(270deg);
`,NB=A(jm)`
  transform: rotate(90deg);
`,PB=A(jm)`
  transform: rotate(180deg);
`,kB=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.6451 4.36708C19.1718 3.89382 18.4073 3.89382 17.934 4.36708L12 10.289L6.06598 4.35495C5.59272 3.88168 4.82821 3.88168 4.35495 4.35495C3.88168 4.82821 3.88168 5.59272 4.35495 6.06598L10.289 12L4.35495 17.934C3.88168 18.4073 3.88168 19.1718 4.35495 19.6451C4.82821 20.1183 5.59272 20.1183 6.06598 19.6451L12 13.711L17.934 19.6451C18.4073 20.1183 19.1718 20.1183 19.6451 19.6451C20.1183 19.1718 20.1183 18.4073 19.6451 17.934L13.711 12L19.6451 6.06598C20.1062 5.60485 20.1062 4.82821 19.6451 4.36708Z"})}),MB=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM16.3 16.3C15.91 16.69 15.28 16.69 14.89 16.3L12 13.41L9.11 16.3C8.72 16.69 8.09 16.69 7.7 16.3C7.31 15.91 7.31 15.28 7.7 14.89L10.59 12L7.7 9.11C7.31 8.72 7.31 8.09 7.7 7.7C8.09 7.31 8.72 7.31 9.11 7.7L12 10.59L14.89 7.7C15.28 7.31 15.91 7.31 16.3 7.7C16.69 8.09 16.69 8.72 16.3 9.11L13.41 12L16.3 14.89C16.68 15.27 16.68 15.91 16.3 16.3Z"})}),$B=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:r.icon.primary,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.903 10.5873C18.2332 10.9174 17.9994 11.482 17.5324 11.482H13.5636C12.9846 11.482 12.5153 11.0127 12.5153 10.4338V6.46419C12.5153 5.99719 13.08 5.76342 13.4102 6.09375L14.9121 7.59658L19.2108 3.30618C19.6201 2.89754 20.2836 2.89807 20.6927 3.30699C21.1022 3.71628 21.1026 4.38031 20.6931 4.78969L16.399 9.08372L17.903 10.5873ZM10.5898 17.9069L9.08718 16.4031L4.78895 20.6937C4.37962 21.1022 3.71662 21.1021 3.30742 20.6933C2.89776 20.2842 2.89749 19.6203 3.30686 19.2108L7.60047 14.9159L6.09662 13.4124C5.76643 13.0822 6.00028 12.5177 6.46725 12.5177H10.4365C11.0154 12.5177 11.4848 12.987 11.4848 13.5658V17.5365C11.4848 18.0034 10.92 18.2373 10.5898 17.9069Z"})}),jB=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,children:a.jsx("path",{className:e,d:"M15.8604 3.85358C15.5454 3.5386 15.7685 3 16.2139 3H20C20.5523 3 21 3.44771 21 4V7.78736C21 8.2329 20.4612 8.45595 20.1463 8.14078L18.7136 6.70697L14.6129 10.8003C14.2223 11.1902 13.5895 11.1897 13.1992 10.7996C12.8085 10.4091 12.8082 9.77554 13.1987 9.38495L17.2952 5.28813L15.8604 3.85358ZM3.8537 15.8583L5.28717 17.293L9.38746 13.1995C9.77794 12.8097 10.4104 12.8098 10.8008 13.1998C11.1916 13.5902 11.1918 14.2236 10.8013 14.6143L6.70541 18.7119L8.14001 20.1464C8.45499 20.4614 8.23191 21 7.78646 21H4C3.44771 21 3 20.5523 3 20V16.2117C3 15.7662 3.53878 15.5431 3.8537 15.8583Z",fill:"inherit",fillRule:"evenodd"})}),BB=({width:e,height:t,viewBox:s,fill:n,className:r,dataTestId:o})=>a.jsx("svg",{width:e,height:t,viewBox:s,className:r,"data-testid":o,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 7H13V5C13 2.24 10.76 0 8 0C5.24 0 3 2.24 3 5V7H2C0.9 7 0 7.9 0 9V19C0 20.1 0.9 21 2 21H14C15.1 21 16 20.1 16 19V9C16 7.9 15.1 7 14 7ZM8 16C6.9 16 6 15.1 6 14C6 12.9 6.9 12 8 12C9.1 12 10 12.9 10 14C10 15.1 9.1 16 8 16ZM5 7V5C5 3.34 6.34 2 8 2C9.66 2 11 3.34 11 5V7H5Z",fill:n})}),FB=A(BB)`
  height: 100%;
`,HB=({width:e,height:t,viewBox:s,fill:n,className:r,dataTestId:o})=>a.jsx("svg",{width:e,height:t,viewBox:s,className:r,"data-testid":o,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 12C6.9 12 6 12.9 6 14C6 15.1 6.9 16 8 16C9.1 16 10 15.1 10 14C10 12.9 9.1 12 8 12ZM14 7H13V5C13 2.24 10.76 0 8 0C5.72 0 3.73 1.54 3.16 3.75C3.02 4.29 3.34 4.83 3.88 4.97C4.41 5.11 4.96 4.79 5.1 4.25C5.44 2.93 6.63 2 8 2C9.65 2 11 3.35 11 5V7H2C0.9 7 0 7.9 0 9V19C0 20.1 0.9 21 2 21H14C15.1 21 16 20.1 16 19V9C16 7.9 15.1 7 14 7ZM14 18C14 18.55 13.55 19 13 19H3C2.45 19 2 18.55 2 18V10C2 9.45 2.45 9 3 9H13C13.55 9 14 9.45 14 10V18Z",fill:n})}),UB=A(HB)`
  height: 100%;
`,VB=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5C7 5 2.73 7.90267 1 12C2.73 16.0973 7 19 12 19C17 19 21.27 16.0973 23 12C21.27 7.90267 17 5 12 5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z"})}),WB=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 6.56808C14.76 6.56808 17 8.76835 17 11.4794C17 11.9804 16.9 12.4617 16.76 12.9135L19.82 15.9192C21.21 14.7111 22.31 13.1984 23 11.4696C21.27 7.16726 17 4.11241 12 4.11241C10.73 4.11241 9.51 4.30887 8.36 4.67231L10.53 6.80382C11 6.6663 11.49 6.56808 12 6.56808ZM2.71 3.28731C2.32 3.6704 2.32 4.28922 2.71 4.67231L4.68 6.60737C3.06 7.87449 1.77 9.54434 1 11.4794C2.73 15.7915 7 18.8464 12 18.8464C13.52 18.8464 14.97 18.5517 16.31 18.0409L19.03 20.7127C19.42 21.0958 20.05 21.0958 20.44 20.7127C20.83 20.3296 20.83 19.7108 20.44 19.3277L4.13 3.28731C3.74 2.90423 3.1 2.90423 2.71 3.28731ZM12 16.3907C9.24 16.3907 7 14.1905 7 11.4794C7 10.7231 7.18 10.006 7.49 9.37735L9.06 10.9195C9.03 11.0963 9 11.2829 9 11.4794C9 13.11 10.34 14.4262 12 14.4262C12.2 14.4262 12.38 14.3967 12.57 14.3574L14.14 15.8996C13.49 16.2139 12.77 16.3907 12 16.3907ZM14.97 11.1553C14.82 9.78008 13.72 8.70941 12.33 8.56207L14.97 11.1553Z"})}),GB=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M18 2H9C7.9 2 7 2.9 7 4V16C7 17.1 7.9 18 9 18H18C19.1 18 20 17.1 20 16V4C20 2.9 19.1 2 18 2ZM18 16H9V4H18V16ZM3 15V13H5V15H3ZM3 9.5H5V11.5H3V9.5ZM10 20H12V22H10V20ZM3 18.5V16.5H5V18.5H3ZM5 22C3.9 22 3 21.1 3 20H5V22ZM8.5 22H6.5V20H8.5V22ZM13.5 22V20H15.5C15.5 21.1 14.6 22 13.5 22ZM5 6V8H3C3 6.9 3.9 6 5 6Z",fill:r.text.primary})}),YB=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o,colors:i})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.9992 10.9509H7.41512L12.2989 5.8056C12.6892 5.3944 12.6892 4.7196 12.2989 4.3084C11.9086 3.8972 11.2781 3.8972 10.8878 4.3084L4.29272 11.2567C3.90243 11.6679 3.90243 12.3321 4.29272 12.7433L10.8878 19.6916C11.2781 20.1028 11.9086 20.1028 12.2989 19.6916C12.6892 19.2804 12.6892 18.6161 12.2989 18.2049L7.41512 13.0596H18.9992C19.5497 13.0596 20 12.5852 20 12.0053C20 11.4254 19.5497 10.9509 18.9992 10.9509Z",fill:o??i.icon.primary})}),qB=({className:e,width:t,height:s,viewBox:n,colors:r,dataTestId:o,fill:i,stroke:l})=>a.jsx("svg",{width:t,height:s,viewBox:n,fill:i||r.icon.primary,"data-testid":o,className:e,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.2222 2H8.77778C8.18889 2 7.62222 2.23333 7.2 2.65556L2.64444 7.21111C2.23333 7.62222 2 8.18889 2 8.77778V15.2222C2 15.8111 2.23333 16.3778 2.65556 16.7889L7.21111 21.3444C7.62222 21.7667 8.18889 22 8.77778 22H15.2222C15.8111 22 16.3778 21.7667 16.7889 21.3444L21.3444 16.7889C21.7667 16.3778 22 15.8111 22 15.2222V8.77778C22 8.18889 21.7667 7.62222 21.3444 7.21111L16.7889 2.65556C16.3778 2.23333 15.8111 2 15.2222 2ZM15.9333 15.9333C15.5 16.3667 14.8 16.3667 14.3667 15.9333L12 13.5667L9.64444 15.9222C9.21111 16.3556 8.51111 16.3556 8.07778 15.9222C7.64444 15.4889 7.64444 14.7889 8.07778 14.3556L10.4333 12L8.06667 9.64444C7.63333 9.21111 7.63333 8.51111 8.06667 8.07778C8.5 7.64444 9.2 7.64444 9.63333 8.07778L12 10.4333L14.3556 8.07778C14.7889 7.64444 15.4889 7.64444 15.9222 8.07778C16.3556 8.51111 16.3556 9.21111 15.9222 9.64444L13.5667 12L15.9222 14.3556C16.3667 14.7889 16.3667 15.5 15.9333 15.9333Z"})}),KB=({className:e,width:t,height:s,viewBox:n,colors:r,dataTestId:o,fill:i})=>a.jsx("svg",{width:t,height:s,viewBox:n,fill:i||r.icon.primary,"data-testid":o,className:e,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM9.29 16.29L5.7 12.7C5.31 12.31 5.31 11.68 5.7 11.29C6.09 10.9 6.72 10.9 7.11 11.29L10 14.17L16.88 7.29C17.27 6.9 17.9 6.9 18.29 7.29C18.68 7.68 18.68 8.31 18.29 8.7L10.7 16.29C10.32 16.68 9.68 16.68 9.29 16.29Z"})}),zB=({className:e,width:t,height:s,viewBox:n,colors:r,dataTestId:o,fill:i})=>a.jsx("svg",{width:t,height:s,viewBox:n,fill:i||r.icon.primary,"data-testid":o,className:e,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 17C11.45 17 11 16.55 11 16V12C11 11.45 11.45 11 12 11C12.55 11 13 11.45 13 12V16C13 16.55 12.55 17 12 17ZM13 9H11V7H13V9Z"})}),XB=({className:e,width:t,height:s,viewBox:n,colors:r,dataTestId:o,fill:i})=>a.jsx("svg",{width:t,height:s,viewBox:n,fill:i||r.icon.primary,"data-testid":o,className:e,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M15.6965 2H8.31462C8.02557 2 7.73652 2.12222 7.53641 2.32222L2.3224 7.53333C2.12229 7.73333 2 8.02222 2 8.31111V15.6778C2 15.9778 2.12229 16.2556 2.3224 16.4667L7.52529 21.6667C7.73652 21.8778 8.02557 22 8.31462 22H15.6854C15.9855 22 16.2635 21.8778 16.4747 21.6778L21.6776 16.4778C21.8888 16.2667 22 15.9889 22 15.6889V8.31111C22 8.01111 21.8777 7.73333 21.6776 7.52222L16.4747 2.32222C16.2746 2.12222 15.9855 2 15.6965 2ZM12.0056 17.8889C11.2051 17.8889 10.5603 17.2444 10.5603 16.4444C10.5603 15.6444 11.2051 15 12.0056 15C12.806 15 13.4508 15.6444 13.4508 16.4444C13.4508 17.2444 12.806 17.8889 12.0056 17.8889ZM12.0056 13.1111C11.3941 13.1111 10.8938 12.6111 10.8938 12V7.55556C10.8938 6.94444 11.3941 6.44444 12.0056 6.44444C12.617 6.44444 13.1173 6.94444 13.1173 7.55556V12C13.1173 12.6111 12.617 13.1111 12.0056 13.1111Z"})}),QB=({className:e,width:t,height:s,viewBox:n,colors:r,dataTestId:o,fill:i})=>a.jsx("svg",{width:t,height:s,viewBox:n,fill:i||r.icon.primary,"data-testid":o,className:e,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.42205 2 2 6.51304 2 12C2 17.487 6.51304 22 12 22C17.487 22 22 17.0348 22 12C22 6.96522 17.578 2 12 2ZM12 18.9565C8.15652 18.9565 5.04348 15.8435 5.04348 12C5.04348 10.3913 5.20864 9.26088 6.13038 8.08696L15.913 17.8696C14.7391 18.7913 13.6087 18.9565 12 18.9565ZM17.8695 15.913L8.0869 6.13044C9.26082 5.2087 10.3913 5.04348 12 5.04348C15.8435 5.04348 18.9565 8.15652 18.9565 12C18.9565 13.6087 18.7913 14.7391 17.8695 15.913Z"})}),ZB=({className:e,width:t,height:s,viewBox:n,colors:r,dataTestId:o,fill:i})=>a.jsx("svg",{width:t,height:s,viewBox:n,fill:i||r.icon.primary,"data-testid":o,className:e,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.09977 21H19.9002C21.5159 21 22.5231 19.2325 21.7153 17.8249L13.8151 4.05571C13.0072 2.6481 10.9928 2.6481 10.1849 4.05571L2.28471 17.8249C1.47685 19.2325 2.48406 21 4.09977 21ZM12 13.5915C11.423 13.5915 10.9508 13.1152 10.9508 12.5331V8.29971C10.9508 7.71761 11.423 7.24135 12 7.24135C12.577 7.24135 13.0492 7.71761 13.0492 8.29971V12.5331C13.0492 13.1152 12.577 13.5915 12 13.5915ZM10.9508 16.7696C10.9508 17.3524 11.4206 17.8249 12 17.8249C12.5794 17.8249 13.0492 17.3524 13.0492 16.7696V16.7635C13.0492 16.1807 12.5794 15.7082 12 15.7082C11.4206 15.7082 10.9508 16.1807 10.9508 16.7635V16.7696Z"})}),JB=({className:e,width:t,height:s,viewBox:n,dataTestId:r})=>a.jsxs("svg",{width:t,height:s,viewBox:n,className:e,"data-testid":r,children:[a.jsx("path",{d:"M3 21V4.41421L11.2929 12.7071L19.5858 21H3Z",className:"color-stroke-buy",strokeWidth:"2",fill:"none"}),a.jsx("path",{d:"M21 3L21 19.5858L12.7071 11.2929L4.41422 3L21 3Z",className:"color-stroke-sell",strokeWidth:"2",fill:"none"})]}),eF=({className:e,width:t,height:s,viewBox:n,dataTestId:r})=>a.jsxs("svg",{width:t,height:s,viewBox:n,className:e,"data-testid":r,children:[a.jsx("path",{d:"M2 2L12 12L22 22H2V2Z",className:"color-fill-sell"}),a.jsx("path",{d:"M22 22L12 12L2 2L22 2L22 22Z",className:"color-fill-buy"})]}),tF=({className:e,width:t,height:s,viewBox:n,dataTestId:r})=>a.jsx("svg",{width:t,height:s,viewBox:n,className:e,"data-testid":r,children:a.jsx("path",{d:"M3 21V4.41421L11.2929 12.7071L19.5858 21H3Z",className:"color-stroke-buy",strokeWidth:"2",fill:"none"})}),sF=({className:e,width:t,height:s,viewBox:n,dataTestId:r})=>a.jsx("svg",{width:t,height:s,viewBox:n,className:e,"data-testid":r,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{className:"color-fill-buy",d:"M2 2L12 12L22 22H2V2Z"})}),nF=({className:e,width:t,height:s,viewBox:n,dataTestId:r})=>a.jsx("svg",{width:t,height:s,viewBox:n,className:e,"data-testid":r,children:a.jsx("path",{className:"color-fill-buy",fillRule:"evenodd",clipRule:"evenodd",d:"M22 22H18.6276L2 5.37235V2L22 22ZM14.2352 22H10.8629L2 13.1371V9.76477L14.2352 22ZM6.47046 22H2V17.5295L6.47046 22Z"})}),rF=({className:e,width:t,height:s,viewBox:n,dataTestId:r})=>a.jsx("svg",{width:t,height:s,viewBox:n,className:e,"data-testid":r,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 2L5.37235 2L22 18.6276L22 22L2 2ZM9.76477 2L13.1371 2L22 10.8629V14.2352L9.76477 2ZM17.5295 2L22 2V6.47046L17.5295 2Z",className:"color-fill-sell"})}),oF=({className:e,width:t,height:s,viewBox:n,dataTestId:r})=>a.jsx("svg",{width:t,height:s,viewBox:n,className:e,"data-testid":r,children:a.jsx("path",{d:"M21 3L21 19.5858L12.7071 11.2929L4.41422 3L21 3Z",className:"color-stroke-sell",strokeWidth:"2",fill:"none"})}),aF=({className:e,width:t,height:s,viewBox:n,dataTestId:r})=>a.jsx("svg",{width:t,height:s,viewBox:n,className:e,"data-testid":r,children:a.jsx("path",{d:"M22 22L12 12L2 2L22 2L22 22Z",className:"color-fill-sell"})}),iF=({className:e,width:t,height:s,viewBox:n,dataTestId:r})=>a.jsxs("svg",{width:t,height:s,viewBox:n,className:e,"data-testid":r,children:[a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 22H20L2 4V7L17 22ZM2 14V10.5L13.5 22L10 22L2 14ZM6.5 22L2 17.5V22L6.5 22Z",className:"color-fill-sell"}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 2H4L22 20V17L7 2ZM22 10V13.5L10.5 2H14L22 10ZM22 6.5V2H17.5L22 6.5Z",className:"color-fill-buy"})]}),lF=({width:e,colors:t,height:s,viewBox:n,dataTestId:r})=>a.jsx("svg",{"data-testid":r,width:e,height:s,viewBox:n,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7143 3C11.162 3 10.7143 3.44772 10.7143 4V5.6C10.7143 6.15228 10.2666 6.6 9.71428 6.6H4C3.44772 6.6 3 7.04772 3 7.6V16.4C3 16.9523 3.44772 17.4 4 17.4H9.71429C10.2666 17.4 10.7143 17.8477 10.7143 18.4V20C10.7143 20.5523 11.162 21 11.7143 21H12.2857C12.838 21 13.2857 20.5523 13.2857 20V18.4C13.2857 17.8477 13.7334 17.4 14.2857 17.4H20C20.5523 17.4 21 16.9523 21 16.4V7.6C21 7.04772 20.5523 6.6 20 6.6H14.2857C13.7334 6.6 13.2857 6.15228 13.2857 5.6V4C13.2857 3.44772 12.838 3 12.2857 3H11.7143ZM6.00391 15.4297C5.45162 15.4297 5.00391 14.9819 5.00391 14.4297V9.57973C5.00391 9.02744 5.45162 8.57973 6.00391 8.57973H17.9942C18.5465 8.57973 18.9942 9.02744 18.9942 9.57972V14.4297C18.9942 14.9819 18.5465 15.4297 17.9942 15.4297H6.00391Z",fill:t.icon.primary})}),cF=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:r.icon.primary,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M16.1905 14.6093H15.3568L15.0613 14.3244C16.3277 12.8469 16.982 10.8313 16.6232 8.68895C16.1272 5.75516 13.6788 3.41234 10.7239 3.05353C6.25992 2.50477 2.51353 6.26171 3.05175 10.7257C3.41056 13.6806 5.75337 16.129 8.68716 16.625C10.8295 16.9838 12.8451 16.3295 14.3226 15.0631L14.6075 15.3586V16.1923L19.1032 20.6774C19.5359 21.1101 20.2324 21.1101 20.6651 20.6774L20.6756 20.6668C21.1083 20.2342 21.1083 19.5377 20.6756 19.105L16.1905 14.6093ZM9.85857 14.6093C7.23082 14.6093 5.10962 12.4881 5.10962 9.86035C5.10962 7.2326 7.23082 5.11141 9.85857 5.11141C12.4863 5.11141 14.6075 7.2326 14.6075 9.86035C14.6075 12.4881 12.4863 14.6093 9.85857 14.6093ZM9.85857 7.22205C9.56308 7.22205 9.33091 7.45422 9.33091 7.74971V9.33269H7.74793C7.45244 9.33269 7.22027 9.56487 7.22027 9.86035C7.22027 10.1558 7.45244 10.388 7.74793 10.388H9.33091V11.971C9.33091 12.2665 9.56308 12.4987 9.85857 12.4987C10.1541 12.4987 10.3862 12.2665 10.3862 11.971V10.388H11.9692C12.2647 10.388 12.4969 10.1558 12.4969 9.86035C12.4969 9.56487 12.2647 9.33269 11.9692 9.33269H10.3862V7.74971C10.3862 7.45422 10.1541 7.22205 9.85857 7.22205Z",fill:"inherit"})}),dF=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:r.icon.primary,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M16.191 14.6081H15.3574L15.0619 14.3232C16.3282 12.8459 16.9824 10.8305 16.6236 8.68838C16.1277 5.75488 13.6796 3.4123 10.725 3.05353C6.2614 2.50482 2.50483 6.26138 3.05354 10.7249C3.41232 13.6795 5.75489 16.1276 8.68839 16.6236C10.8305 16.9824 12.8459 16.3281 14.3232 15.0619L14.6082 15.3573V16.191L19.1034 20.6756C19.536 21.1083 20.2325 21.1083 20.6651 20.6756L20.6756 20.6651C21.1083 20.2324 21.1083 19.536 20.6756 19.1034L16.191 14.6081ZM9.85968 14.6081C7.2322 14.6081 5.11121 12.4872 5.11121 9.85967C5.11121 7.23218 7.2322 5.1112 9.85968 5.1112C12.4872 5.1112 14.6082 7.23218 14.6082 9.85967C14.6082 12.4872 12.4872 14.6081 9.85968 14.6081ZM7.74925 9.33206H11.9701C12.2656 9.33206 12.4977 9.56421 12.4977 9.85967C12.4977 10.1551 12.2656 10.3873 11.9701 10.3873H7.74925C7.45379 10.3873 7.22164 10.1551 7.22164 9.85967C7.22164 9.56421 7.45379 9.33206 7.74925 9.33206Z",fill:"inherit"})}),uF=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:"none",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5717 13.092C15.4183 13.2487 15.3333 13.4554 15.3333 13.6754V17.1137C15.3333 18.492 14.2133 19.6137 12.8333 19.6137H11.1667C9.78833 19.6137 8.66667 18.492 8.66667 17.1137V13.6754C8.66667 13.4554 8.58333 13.2487 8.42833 13.092C7.50833 12.152 7 10.9154 7 9.6137C7 6.85537 9.24333 4.6137 12 4.6137C14.7583 4.6137 17 6.85537 17 9.6137C17 10.917 16.4933 12.152 15.5717 13.092ZM12 2C6.47833 2 2 6.47667 2 12C2 17.5217 6.47833 22 12 22C17.5233 22 22 17.5217 22 12C22 6.47667 17.5233 2 12 2ZM11.9999 6.28515C10.1616 6.28515 8.66661 7.78015 8.66661 9.61848C8.66661 10.4818 9.00494 11.3035 9.61994 11.9301C10.0799 12.4001 10.3333 13.0218 10.3333 13.6801V14.6185H13.6666V13.6801C13.6666 13.0218 13.9216 12.4018 14.3816 11.9301C14.9949 11.3035 15.3333 10.4835 15.3333 9.61848C15.3333 7.78015 13.8383 6.28515 11.9999 6.28515ZM10.3334 17.1185C10.3334 17.5768 10.7084 17.9518 11.1667 17.9518H12.8334C13.2934 17.9518 13.6667 17.5768 13.6667 17.1185V16.2851H10.3334V17.1185Z",fill:o.component.OptionChain.icons.earnings})}),hF=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"1",stroke:r.icon.primary,strokeWidth:"2"})}),pF=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o})=>a.jsxs("svg",{"data-testid":r,width:t,height:s,viewBox:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 4H4V20H20V4ZM4 2C2.89543 2 2 2.89543 2 4V20C2 21.1046 2.89543 22 4 22H20C21.1046 22 22 21.1046 22 20V4C22 2.89543 21.1046 2 20 2H4Z",fill:o.icon.primary}),a.jsx("path",{d:"M11 2H13V22H11V2Z",fill:o.icon.primary})]}),mF=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsxs("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",fill:r.icon.primary,d:"M20 4H4V20H20V4ZM4 2C2.89543 2 2 2.89543 2 4V20C2 21.1046 2.89543 22 4 22H20C21.1046 22 22 21.1046 22 20V4C22 2.89543 21.1046 2 20 2H4Z"}),a.jsx("path",{d:"M11 11H13V22H11V11Z",fill:r.icon.primary}),a.jsx("path",{d:"M2 11H22V13H2V11Z",fill:r.icon.primary})]}),gF=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o})=>a.jsxs("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:"none",children:[a.jsx("path",{fill:o.icon.primary,d:"M15.546 2.81802C15.9365 2.4275 16.5697 2.4275 16.9602 2.81802C17.3507 3.20855 17.3507 3.84171 16.9602 4.23224L4.23225 16.9602C3.84173 17.3507 3.20856 17.3507 2.81804 16.9602C2.42752 16.5696 2.42752 15.9365 2.81804 15.5459L15.546 2.81802Z"}),a.jsx("path",{fill:o.icon.primary,d:"M19.7678 7.03984C20.1583 6.64932 20.7915 6.64932 21.182 7.03984C21.5725 7.43037 21.5725 8.06353 21.182 8.45405L8.45406 21.182C8.06353 21.5725 7.43037 21.5725 7.03984 21.182C6.64932 20.7915 6.64932 20.1583 7.03984 19.7678L19.7678 7.03984Z"})]}),SF=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsxs("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",children:[a.jsx("path",{d:"M14.4803 14.2434C15.6702 14.2434 16.6385 15.2452 16.6385 16.4761V19.4531C16.6385 20.6841 15.6702 21.6858 14.4803 21.6858C13.2903 21.6858 12.322 20.6841 12.322 19.4531V16.4761C12.322 15.2452 13.2903 14.2434 14.4803 14.2434ZM14.4803 15.7319C14.0831 15.7319 13.7608 16.0653 13.7608 16.4761V19.4531C13.7608 19.8639 14.0831 20.1973 14.4803 20.1973C14.8774 20.1973 15.1997 19.8639 15.1997 19.4531V16.4761C15.1997 16.0653 14.8774 15.7319 14.4803 15.7319Z",fill:r.icon.primary}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4803 14.5576C13.4581 14.5576 12.6257 15.4187 12.6257 16.4761V19.4531C12.6257 20.5105 13.4581 21.3716 14.4803 21.3716C15.5024 21.3716 16.3348 20.5105 16.3348 19.4531V16.4761C16.3348 15.4187 15.5024 14.5576 14.4803 14.5576ZM12.0183 16.4761C12.0183 15.0716 13.1226 13.9292 14.4803 13.9292C15.8379 13.9292 16.9422 15.0716 16.9422 16.4761V19.4531C16.9422 20.8576 15.8379 22 14.4803 22C13.1226 22 12.0183 20.8576 12.0183 19.4531V16.4761ZM13.4571 16.4761C13.4571 15.8918 13.9154 15.4177 14.4803 15.4177C15.0451 15.4177 15.5034 15.8918 15.5034 16.4761V19.4531C15.5034 20.0374 15.0451 20.5115 14.4803 20.5115C13.9154 20.5115 13.4571 20.0374 13.4571 19.4531V16.4761ZM14.4803 16.0461C14.2509 16.0461 14.0646 16.2389 14.0646 16.4761V19.4531C14.0646 19.6904 14.2509 19.8831 14.4803 19.8831C14.7096 19.8831 14.8959 19.6904 14.8959 19.4531V16.4761C14.8959 16.2389 14.7096 16.0461 14.4803 16.0461Z",fill:r.icon.primary}),a.jsx("path",{d:"M6.46197 4.96157C7.65188 4.96157 8.62021 5.96332 8.62021 7.19428V10.1712C8.62021 11.4022 7.65188 12.4039 6.46197 12.4039C5.27206 12.4039 4.30373 11.4022 4.30373 10.1712V7.19428C4.30373 5.96332 5.27206 4.96157 6.46197 4.96157ZM6.46197 6.45005C6.06485 6.45005 5.74256 6.78346 5.74256 7.19428V10.1712C5.74256 10.582 6.06485 10.9155 6.46197 10.9155C6.85909 10.9155 7.18139 10.582 7.18139 10.1712V7.19428C7.18139 6.78346 6.85909 6.45005 6.46197 6.45005Z",fill:r.icon.primary}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.46197 5.27578C5.4398 5.27578 4.60745 6.13685 4.60745 7.19428V10.1712C4.60745 11.2287 5.4398 12.0897 6.46197 12.0897C7.48414 12.0897 8.31649 11.2287 8.31649 10.1712V7.19428C8.31649 6.13685 7.48414 5.27578 6.46197 5.27578ZM4 7.19428C4 5.78978 5.10432 4.64737 6.46197 4.64737C7.81963 4.64737 8.92394 5.78978 8.92394 7.19428V10.1712C8.92394 11.5757 7.81963 12.7181 6.46197 12.7181C5.10432 12.7181 4 11.5757 4 10.1712V7.19428ZM5.43883 7.19428C5.43883 6.60993 5.89711 6.13584 6.46197 6.13584C7.02683 6.13584 7.48511 6.60993 7.48511 7.19428V10.1712C7.48511 10.7556 7.02683 11.2297 6.46197 11.2297C5.89711 11.2297 5.43883 10.7556 5.43883 10.1712V7.19428ZM6.46197 6.76425C6.2326 6.76425 6.04628 6.957 6.04628 7.19428V10.1712C6.04628 10.4085 6.2326 10.6013 6.46197 10.6013C6.69134 10.6013 6.87766 10.4085 6.87766 10.1712V7.19428C6.87766 6.957 6.69134 6.76425 6.46197 6.76425Z",fill:r.icon.primary}),a.jsx("path",{d:"M13.8072 8.49665C14.0784 8.1963 14.5337 8.18029 14.824 8.46089C15.1144 8.74149 15.1298 9.21245 14.8586 9.51279L7.34287 17.835C7.07163 18.1353 6.61638 18.1514 6.32605 17.8708C6.03572 17.5902 6.02024 17.1192 6.29149 16.8189L13.8072 8.49665Z",fill:r.icon.primary}),a.jsx("path",{d:"M13.8303 9.52575C13.5493 9.2351 13.5493 8.76388 13.8303 8.47324C14.1112 8.1826 14.5667 8.1826 14.8477 8.47324L19.7893 13.5853C20.0702 13.876 20.0702 14.3472 19.7893 14.6378C19.5083 14.9285 19.0528 14.9285 18.7719 14.6378L13.8303 9.52575Z",fill:r.icon.primary}),a.jsx("path",{d:"M18.6155 2.71411C18.6155 2.31972 18.9246 2 19.3058 2C19.6871 2 19.9961 2.31972 19.9961 2.71411V14.1439C19.9961 14.5383 19.6871 14.858 19.3058 14.858C18.9246 14.858 18.6155 14.5383 18.6155 14.1439V2.71411Z",fill:r.icon.primary})]}),fF=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsxs("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",children:[a.jsx("path",{d:"M17.6569 4.92893C18.0474 4.53841 18.6806 4.53841 19.0711 4.92893C19.4616 5.31946 19.4616 5.95262 19.0711 6.34314L6.34318 19.0711C5.95266 19.4616 5.31949 19.4616 4.92897 19.0711C4.53845 18.6805 4.53845 18.0474 4.92897 17.6569L17.6569 4.92893Z",fill:r.icon.primary}),a.jsx("path",{d:"M6.06818 3C7.75977 3 9.13636 4.32153 9.13636 5.94545V9.87273C9.13636 11.4967 7.75977 12.8182 6.06818 12.8182C4.37659 12.8182 3 11.4967 3 9.87273V5.94545C3 4.32153 4.37659 3 6.06818 3ZM6.06818 4.96364C5.50364 4.96364 5.04545 5.40349 5.04545 5.94545V9.87273C5.04545 10.4147 5.50364 10.8545 6.06818 10.8545C6.63273 10.8545 7.09091 10.4147 7.09091 9.87273V5.94545C7.09091 5.40349 6.63273 4.96364 6.06818 4.96364Z",fill:r.icon.primary}),a.jsx("path",{d:"M17.9284 11.181C19.62 11.181 20.9966 12.5025 20.9966 14.1265V18.0537C20.9966 19.6777 19.62 20.9992 17.9284 20.9992C16.2368 20.9992 14.8602 19.6777 14.8602 18.0537V14.1265C14.8602 12.5025 16.2368 11.181 17.9284 11.181ZM17.9284 13.1447C17.3639 13.1447 16.9057 13.5845 16.9057 14.1265V18.0537C16.9057 18.5957 17.3639 19.0356 17.9284 19.0356C18.493 19.0356 18.9511 18.5957 18.9511 18.0537V14.1265C18.9511 13.5845 18.493 13.1447 17.9284 13.1447Z",fill:r.icon.primary})]}),TF=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsxs("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",children:[a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.77584 7.29166C9.77584 7.91094 10.3805 8.59166 12.2608 9.08334C14.1411 9.575 16.1538 10.3833 16.1538 12.75C16.1538 14.4583 14.87 15.4 13.2548 15.7084V16.25C13.2548 16.9416 12.6998 17.5 12.0123 17.5C11.3248 17.5 10.7698 16.9416 10.7698 16.25V15.6916C9.52735 15.425 8.42569 14.7417 7.95355 13.5833C7.74647 13.0667 8.13577 12.5 8.69075 12.5H8.92268C9.26229 12.5 9.5915 12.7865 9.77584 12.9981C10.1089 13.3805 10.6456 13.8058 12.0123 13.8058C13.8429 13.8058 14.0986 12.9981 14.0986 12.75C14.0986 12.1477 13.8342 11.4201 11.7634 10.9201C9.45243 10.3618 7.84619 9.23334 7.84619 7.30834C7.84619 5.7 9.16289 4.65 10.7698 4.3V3.75C10.7698 3.05833 11.3248 2.5 12.0123 2.5C12.6998 2.5 13.2548 3.05833 13.2548 3.75V4.325C14.5469 4.64166 15.3587 5.45834 15.7066 6.44166C15.8971 6.95834 15.5078 7.5 14.9611 7.5H14.7126C14.3647 7.5 14.0528 7.23749 13.9054 6.96823C13.5292 6.28096 13.1885 6.03656 12.0123 6.03656C10.6124 6.03656 9.77584 6.6724 9.77584 7.29166Z",fill:r.icon.primary}),a.jsx("path",{d:"M5 20.5C5 19.9477 5.44772 19.5 6 19.5H18C18.5523 19.5 19 19.9477 19 20.5C19 21.0523 18.5523 21.5 18 21.5H6C5.44772 21.5 5 21.0523 5 20.5Z",fill:r.icon.primary})]}),yF=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",children:a.jsx("path",{fill:r.icon.primary,fillRule:"evenodd",clipRule:"evenodd",d:"M3 5C2.44772 5 2 5.44772 2 6V18C2 18.5523 2.44772 19 3 19H21C21.5523 19 22 18.5523 22 18V6C22 5.44772 21.5523 5 21 5H3ZM4.79999 6.80499C4.2477 6.80499 3.79999 7.25271 3.79999 7.80499V16.195C3.79999 16.7473 4.2477 17.195 4.79999 17.195H19.2C19.7523 17.195 20.2 16.7473 20.2 16.195V7.80499C20.2 7.25271 19.7523 6.80499 19.2 6.80499H4.79999Z"})}),CF=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.4815 20V19.5634H14.9033C14.2554 19.5634 13.7755 19.3982 13.4639 19.0677C13.2425 18.8238 13.1317 18.2104 13.1317 17.227V5.0029H15.4814C16.1704 5.0029 16.726 5.11108 17.1484 5.32745C17.5708 5.54372 17.9091 5.88008 18.1634 6.33626C18.3194 6.61944 18.4424 7.09144 18.5325 7.75216H19L18.8155 4H5.19687L5 7.75216H5.46747C5.52491 7.02844 5.70528 6.45426 6.00878 6.02944C6.31228 5.60463 6.67719 5.31754 7.10362 5.16808C7.43177 5.05799 7.9853 5.0029 8.76442 5.0029H10.7697V17.227C10.7697 18.1238 10.6795 18.698 10.499 18.9497C10.2037 19.3587 9.70344 19.5634 8.99806 19.5634H8.40756V20H15.4815Z",strokeWidth:"0.5",fill:r.icon.primary,stroke:r.icon.primary})}),bF=({width:e,colors:t,height:s,viewBox:n,dataTestId:r})=>a.jsxs("svg",{"data-testid":r,width:e,height:s,viewBox:n,fill:"none",children:[a.jsx("path",{fill:t.icon.primary,d:"M17 5C17 4.44772 17.4477 4 18 4C18.5523 4 19 4.44772 19 5V19C19 19.5523 18.5523 20 18 20C17.4477 20 17 19.5523 17 19V5Z"}),a.jsx("path",{fill:t.icon.primary,d:"M9.995 11C7.235 11 5 13.24 5 16C5 18.76 7.235 21 9.995 21C12.76 21 15 18.76 15 16C15 13.24 12.76 11 9.995 11ZM10 20C7.79 20 6 18.21 6 16C6 13.79 7.79 12 10 12C12.21 12 14 13.79 14 16C14 18.21 12.21 20 10 20Z"}),a.jsx("path",{fill:t.icon.primary,d:"M9.5 13.8714C9.5 13.6652 9.66717 13.498 9.87338 13.498C10.0796 13.498 10.2468 13.6652 10.2468 13.8714V16.277C10.2468 16.4832 10.0796 16.6504 9.87338 16.6504C9.66717 16.6504 9.5 16.4832 9.5 16.277V13.8714Z"}),a.jsx("path",{fill:t.icon.primary,d:"M12.279 15.9037C12.4852 15.9037 12.6523 16.0709 12.6523 16.2771C12.6523 16.4833 12.4852 16.6505 12.279 16.6505L9.87338 16.6504C9.66717 16.6504 9.5 16.4832 9.5 16.277C9.5 16.0708 9.66717 15.9037 9.87338 15.9037H12.279Z"})]}),EF=({className:e,width:t,height:s,viewBox:n,dataTestId:r,colors:o})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:"none",children:a.jsx("path",{fill:o.icon.primary,d:"M17.6569 4.92894C18.0474 4.53842 18.6806 4.53842 19.0711 4.92894C19.4617 5.31946 19.4617 5.95263 19.0711 6.34315L6.34322 19.0711C5.95269 19.4616 5.31953 19.4616 4.929 19.0711C4.53848 18.6806 4.53848 18.0474 4.929 17.6569L17.6569 4.92894Z"})}),AF=({className:e,width:t,fill:s,viewBox:n,height:r,dataTestId:o})=>a.jsx("svg",{className:e,"data-testid":o,width:t,height:r,viewBox:n,fill:s,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("g",{clipPath:"url(#clip0_1763_2338)",children:a.jsx("path",{d:"M15.984 0C7.15201 0 0 7.168 0 16C0 24.832 7.15201 32 15.984 32C24.832 32 32 24.832 32 16C32 7.168 24.832 0 15.984 0ZM16 28.8C8.928 28.8 3.19995 23.072 3.19995 16C3.19995 8.928 8.928 3.20001 16 3.20001C23.072 3.20001 28.8 8.928 28.8 16C28.8 23.072 23.072 28.8 16 28.8ZM21.6 14.4C22.928 14.4 24 13.328 24 12C24 10.672 22.928 9.60001 21.6 9.60001C20.272 9.60001 19.2 10.672 19.2 12C19.2 13.328 20.272 14.4 21.6 14.4ZM10.4 14.4C11.728 14.4 12.8 13.328 12.8 12C12.8 10.672 11.728 9.60001 10.4 9.60001C9.07202 9.60001 8 10.672 8 12C8 13.328 9.07202 14.4 10.4 14.4ZM16 18.2C19.248 18.2 22.08 19.976 23.6 22.6C23.904 23.128 23.52 23.8 22.896 23.8H9.104C8.496 23.8 8.09602 23.128 8.40002 22.6C9.92002 19.976 12.752 18.2 16 18.2Z"})})}),vF=({className:e,width:t,height:s,dataTestId:n,viewBox:r})=>a.jsx("svg",{className:e,"data-testid":n,xmlns:"http://www.w3.org/2000/svg",width:t,height:s,viewBox:r,fill:"none",children:a.jsxs("g",{clipPath:"url(#clip0_1761_2311)",children:[a.jsx("path",{className:"color-fill-disabled",d:"M4.35112 0.0639417C4.86824 0.257862 5.13025 0.834274 4.93633 1.35139L2.068 9.00027L4.93633 16.6491C5.13025 17.1662 4.86824 17.7426 4.35112 17.9366C3.834 18.1305 3.25759 17.8685 3.06367 17.3514L0.0636709 9.35139C-0.0212236 9.12501 -0.0212236 8.87553 0.0636709 8.64914L3.06367 0.649147C3.25759 0.132027 3.834 -0.129978 4.35112 0.0639417Z"}),a.jsx("path",{className:"color-fill-disabled",d:"M9.35112 0.0636976C9.86824 0.257618 10.1302 0.83403 9.93633 1.35115L7.068 9.00003L9.93633 16.6489C10.1302 17.166 9.86824 17.7424 9.35112 17.9364C8.834 18.1303 8.25759 17.8683 8.06367 17.3512L5.06367 9.35115C4.97878 9.12477 4.97878 8.87529 5.06367 8.6489L8.06367 0.648903C8.25759 0.131783 8.834 -0.130222 9.35112 0.0636976Z"})]})}),IF=({className:e,width:t,fill:s,viewBox:n,height:r,dataTestId:o})=>a.jsx("svg",{className:e,"data-testid":o,width:t,height:r,viewBox:n,fill:s,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("g",{clipPath:"url(#clip0_1763_2340)",children:a.jsx("path",{d:"M15.984 0C7.15201 0 0 7.168 0 16C0 24.832 7.15201 32 15.984 32C24.832 32 32 24.832 32 16C32 7.168 24.832 0 15.984 0ZM16 28.8C8.928 28.8 3.19995 23.072 3.19995 16C3.19995 8.928 8.928 3.20001 16 3.20001C23.072 3.20001 28.8 8.928 28.8 16C28.8 23.072 23.072 28.8 16 28.8ZM21.6 14.4C22.928 14.4 24 13.328 24 12C24 10.672 22.928 9.60001 21.6 9.60001C20.272 9.60001 19.2 10.672 19.2 12C19.2 13.328 20.272 14.4 21.6 14.4ZM10.4 14.4C11.728 14.4 12.8 13.328 12.8 12C12.8 10.672 11.728 9.60001 10.4 9.60001C9.07202 9.60001 8 10.672 8 12C8 13.328 9.07202 14.4 10.4 14.4ZM16 24.8C19.248 24.8 22.08 23.024 23.6 20.4C23.904 19.872 23.52 19.2 22.896 19.2H9.104C8.496 19.2 8.09602 19.872 8.40002 20.4C9.92002 23.024 12.752 24.8 16 24.8Z"})})}),xF=({className:e,width:t,fill:s,viewBox:n,height:r,dataTestId:o})=>a.jsx("svg",{className:e,"data-testid":o,width:t,height:r,viewBox:n,fill:s,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("g",{clipPath:"url(#clip0_1763_2339)",children:a.jsx("path",{d:"M15.984 0C24.832 0 32 7.168 32 16C32 24.832 24.832 32 15.984 32C7.15201 32 0 24.832 0 16C0 7.168 7.15201 0 15.984 0ZM16 28.8C23.072 28.8 28.8 23.072 28.8 16C28.8 8.928 23.072 3.20001 16 3.20001C8.928 3.20001 3.19995 8.928 3.19995 16C3.19995 23.072 8.928 28.8 16 28.8ZM21.6 14.4C20.272 14.4 19.2 13.328 19.2 12C19.2 10.672 20.272 9.60001 21.6 9.60001C22.928 9.60001 24 10.672 24 12C24 13.328 22.928 14.4 21.6 14.4ZM10.4 14.4C9.07202 14.4 8 13.328 8 12C8 10.672 9.07202 9.60001 10.4 9.60001C11.728 9.60001 12.8 10.672 12.8 12C12.8 13.328 11.728 14.4 10.4 14.4ZM9 22.25C8.17157 22.25 7.5 21.5784 7.5 20.75C7.5 19.9216 8.17157 19.25 9 19.25H23C23.8284 19.25 24.5 19.9216 24.5 20.75C24.5 21.5784 23.8284 22.25 23 22.25H9Z"})})}),wF=({width:e,height:t,viewBox:s,dataTestId:n})=>a.jsxs("svg",{"data-testid":n,width:e,height:t,viewBox:s,children:[a.jsx(Pn,{d:"M12.4776 25.8951C12.4463 25.5819 12.3314 25.3731 12.1331 25.2582C11.9347 25.1433 11.6632 25.0807 11.3082 25.0807C10.619 25.0807 10.264 25.3313 10.264 25.822C10.264 26.0518 10.3789 26.2188 10.5981 26.3337C10.8174 26.4485 11.1829 26.5321 11.6736 26.5843C12.4776 26.6678 13.0519 26.8662 13.4069 27.169C13.7619 27.4823 13.9395 27.8999 13.9395 28.4429C13.9395 29.0903 13.7097 29.6019 13.2607 29.9778C12.8118 30.3537 12.2061 30.5416 11.4439 30.5416C9.76282 30.5416 8.87528 29.8421 8.79175 28.4324H10.1074C10.1387 28.7457 10.2536 28.965 10.4624 29.1111C10.6712 29.2573 10.9845 29.3304 11.4126 29.3304C11.778 29.3304 12.0704 29.2678 12.2688 29.132C12.4776 28.9963 12.5716 28.8083 12.5716 28.5682C12.5716 28.3698 12.4881 28.2132 12.321 28.1088C12.1539 28.0043 11.8094 27.9208 11.2873 27.8477C10.6399 27.7642 10.17 27.6389 9.85679 27.4927C9.55398 27.3465 9.32427 27.1481 9.16765 26.8871C9.01102 26.6261 8.92749 26.3128 8.92749 25.916C8.92749 25.3209 9.14676 24.8405 9.57487 24.4855C10.003 24.1305 10.5877 23.953 11.3291 23.953C12.1122 23.953 12.7178 24.1096 13.1355 24.4124C13.5531 24.7257 13.7828 25.2164 13.8246 25.8847C13.8246 25.8951 12.4776 25.8951 12.4776 25.8951Z",fill:"inherit"}),a.jsx(Pn,{d:"M16.5289 26.7514C16.247 26.7514 16.0173 26.8662 15.8398 27.1064C15.6623 27.3361 15.5787 27.6807 15.5787 28.1401C15.5787 28.5682 15.6623 28.9023 15.8293 29.1425C15.9964 29.3826 16.2261 29.5079 16.5185 29.5079C16.9361 29.5079 17.2076 29.2782 17.3225 28.8188H18.5128C18.4084 29.3618 18.1891 29.7899 17.8341 30.0822C17.4791 30.3746 17.0301 30.5312 16.4871 30.5312C15.8189 30.5312 15.2968 30.3119 14.9105 29.8838C14.5241 29.4557 14.3362 28.871 14.3362 28.1505C14.3362 27.4301 14.545 26.8349 14.9522 26.3963C15.3595 25.9682 15.9024 25.749 16.5707 25.749C17.145 25.749 17.594 25.8951 17.9176 26.1875C18.2413 26.4799 18.4397 26.8975 18.5024 27.4405H17.3016C17.2076 26.9811 16.9466 26.7514 16.5289 26.7514Z",fill:"inherit"}),a.jsx(Pn,{d:"M18.9412 23.9217H20.1315V26.4799H20.1524C20.4239 25.9996 20.8729 25.749 21.4994 25.749C22.0423 25.749 22.4391 25.8952 22.7001 26.198C22.9612 26.5008 23.0865 26.9706 23.0865 27.6285V30.4059H21.8961V27.8164C21.8961 27.5032 21.8335 27.263 21.7186 27.0751C21.6038 26.8871 21.3845 26.8036 21.0712 26.8036C20.758 26.8036 20.5387 26.908 20.3717 27.1064C20.2046 27.3048 20.1315 27.5971 20.1315 27.9939V30.4059H18.9412V23.9217Z",fill:"inherit"}),a.jsx(Pn,{d:"M23.2324 25.8743H24.4645L25.2372 28.965H25.2476L26.2605 25.8743H27.3464L28.2653 28.965H28.2862L29.0902 25.8743H30.3327L28.9126 30.4059H27.7119L26.8034 27.3674H26.7826L25.8115 30.4059H24.6107L23.2324 25.8743Z",fill:"inherit"}),a.jsx(Pn,{d:"M33.0685 28.4324C32.3898 28.4324 31.9512 28.4847 31.7633 28.5786C31.5753 28.683 31.4814 28.8397 31.4814 29.0694C31.4814 29.226 31.5336 29.3722 31.638 29.487C31.7424 29.6019 31.9095 29.6646 32.1392 29.6646C32.4316 29.6646 32.6613 29.5706 32.8283 29.3722C32.9954 29.1738 33.0685 28.9128 33.0685 28.5786V28.4324ZM33.0685 27.4823C33.0685 27.2003 33.0058 26.9915 32.891 26.8558C32.7761 26.72 32.5882 26.6469 32.3167 26.6469C31.8782 26.6469 31.6276 26.8349 31.5649 27.2108H30.4477C30.4999 26.7409 30.6878 26.3859 31.0115 26.1353C31.3456 25.8847 31.7946 25.7594 32.3794 25.7594C33.601 25.7594 34.2066 26.3859 34.2066 27.6284V29.1842C34.2066 29.3513 34.2275 29.4766 34.2693 29.5393C34.311 29.6019 34.3841 29.6332 34.4677 29.6332L34.6765 29.6019V30.3955C34.4363 30.4581 34.1962 30.4894 33.9665 30.4894C33.4757 30.4894 33.1938 30.2388 33.1416 29.7481C33.0163 29.9778 32.8492 30.1658 32.6299 30.3119C32.4211 30.4581 32.1079 30.5416 31.7111 30.5416C31.2412 30.5416 30.8758 30.4059 30.6252 30.1449C30.3746 29.8838 30.2493 29.5497 30.2493 29.132C30.2493 28.7666 30.3641 28.4638 30.5834 28.2341C30.8131 28.0043 31.1577 27.8582 31.6276 27.7851C32.0974 27.712 32.5673 27.6702 33.0267 27.6702L33.0685 27.4823Z",fill:"inherit"}),a.jsx(Pn,{d:"M37.1721 29.5079C37.4749 29.5079 37.715 29.3931 37.903 29.1634C38.0909 28.9337 38.1745 28.5891 38.1745 28.1401C38.1745 27.2421 37.8508 26.7931 37.2138 26.7931C36.8902 26.7931 36.6396 26.908 36.462 27.1377C36.2845 27.3674 36.201 27.7015 36.201 28.1505C36.201 28.5995 36.2845 28.9232 36.462 29.1634C36.6396 29.3931 36.8693 29.5079 37.1721 29.5079ZM35.042 23.9217H36.2323V26.3859H36.2532C36.5665 25.9682 37.0155 25.7594 37.6002 25.7594C38.1849 25.7594 38.6443 25.9682 38.968 26.3755C39.2813 26.7827 39.4483 27.3779 39.4483 28.1505C39.4483 28.871 39.2708 29.4557 38.9158 29.8838C38.5608 30.3224 38.0805 30.5417 37.4853 30.5417C37.1616 30.5417 36.9006 30.479 36.7022 30.3433C36.5038 30.2075 36.3576 30.0613 36.2845 29.8838H36.2323V30.4164H35.042V23.9217Z",fill:"inherit"}),a.jsx(Pn,{d:"M11.9764 32.5569L11.3708 34.7079H11.35L10.4729 32.5569H9.35561L8.34277 35.8564H9.39737L10.0239 33.695H10.0343L10.901 35.8564H12.0182L13.031 32.5569H11.9764Z",fill:"inherit"}),a.jsx(Pn,{d:"M13.5637 32.5569L12.5613 35.8564H15.9026L16.1323 35.1151H13.8665L14.0544 34.4886H16.1323L16.3307 33.8203H14.2633L14.4199 33.2982H16.6648L16.8945 32.5569H13.5637Z",fill:"inherit"}),a.jsx(Pn,{d:"M17.3538 32.5569L17.1345 33.2982H18.3562L17.5626 35.8564H18.659L19.4421 33.2982H20.6742L20.8935 32.5569H17.3538Z",fill:"inherit"}),a.jsx(Pn,{d:"M25.7177 32.5569L24.4334 34.9585H24.4229L24.5273 32.5569H23.5354L22.2093 34.9585H22.1989L22.3242 32.5569H21.2278L21.3844 35.8564H22.4808L23.7024 33.6219H23.7129L23.6189 35.8564H24.7153L26.8349 32.5569H25.7177Z",fill:"inherit"}),a.jsx(Pn,{d:"M28.328 35.2195C29.1111 35.2195 29.5497 34.4781 29.5706 33.956C29.5915 33.4653 29.3826 33.1938 28.7979 33.1938C27.9521 33.1938 27.5553 33.9247 27.524 34.4677C27.5031 34.8958 27.7537 35.2195 28.328 35.2195ZM28.8605 32.4838C29.581 32.4838 30.7087 32.6926 30.6565 33.8725C30.6043 35.0315 29.7063 35.9086 28.2132 35.9086C27.0542 35.9086 26.4068 35.3656 26.4381 34.4468C26.4799 33.3713 27.4196 32.4838 28.8605 32.4838Z",fill:"inherit"}),a.jsx(Pn,{d:"M32.2019 34.0187H33.0685C33.4549 34.0187 33.7995 33.9247 33.8203 33.5697C33.8308 33.2878 33.5384 33.2251 33.246 33.2251H32.442L32.2019 34.0187ZM31.5649 32.5569H33.6115C34.3737 32.5569 34.948 32.7135 34.9167 33.4131C34.8958 33.9039 34.5826 34.2589 33.9247 34.332V34.3424C34.2276 34.405 34.3424 34.5721 34.332 34.8958C34.3215 35.136 34.3006 35.3239 34.2902 35.5119C34.2902 35.6267 34.2798 35.7729 34.3424 35.8669H33.246C33.2356 35.8042 33.2147 35.7416 33.2147 35.6789C33.2252 35.5119 33.2565 35.3343 33.2669 35.1151C33.2774 34.8227 33.1312 34.6765 32.7449 34.6765H32.0244L31.6589 35.8773H30.573L31.5649 32.5569Z",fill:"inherit"}),a.jsx(Pn,{d:"M38.2161 32.5569L36.4619 33.8516H36.4514L36.8482 32.5569H35.7623L34.739 35.8564H35.8249L36.1382 34.854L36.7229 34.4677L37.5269 35.8564H38.759L37.6 33.9143L39.657 32.5569H38.2161Z",fill:"inherit"}),a.jsx(Pn,{d:"M23.3266 13.2086L21.8752 20.3611H29.6125L31.0638 13.2086H23.3266Z",fill:"inherit"}),a.jsx(Pn,{d:"M10.1702 15.1403L9.09473 20.3611H13.689L14.7123 15.1403H10.1702Z",fill:"inherit"}),a.jsx(Pn,{d:"M6.97498 18.1997L6.54688 20.3611H8.41592L8.84402 18.1997H6.97498Z",fill:"inherit"}),a.jsx(Pn,{d:"M15.1925 17.1033L14.5452 20.3611H20.9459L21.5828 17.1033H15.1925Z",fill:"inherit"}),a.jsx(Pn,{d:"M32.912 9.75244L30.761 20.3611H39.6572L41.8082 9.75244H32.912Z",fill:"inherit"})]}),Pn=A.path`
  fill: ${({theme:{colors:e}})=>e.component.SchwabNetwork.icons.primary};
`,OF=({width:e,height:t,viewBox:s,dataTestId:n})=>a.jsxs("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",children:[a.jsx(ed,{fillRule:"evenodd",clipRule:"evenodd",d:"M11.425 1.6062L10.4368 4.92711H15.6986L16.6872 1.6062H11.425Z",fill:"inherit"}),a.jsx(ed,{fillRule:"evenodd",clipRule:"evenodd",d:"M2.4684 2.50134L1.73926 4.92731H4.86418L5.56097 2.50134H2.4684Z",fill:"inherit"}),a.jsx(ed,{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292483 3.92505L0 4.92731H1.27571L1.56458 3.92505H0.292483Z",fill:"inherit"}),a.jsx(ed,{fillRule:"evenodd",clipRule:"evenodd",d:"M5.88507 3.41663L5.448 4.92714H9.80346L10.2366 3.41663H5.88507Z",fill:"inherit"}),a.jsx(ed,{fillRule:"evenodd",clipRule:"evenodd",d:"M17.9488 0L16.4854 4.92727H22.5366L23.9999 0H17.9488Z",fill:"inherit"})]}),ed=A.path`
  fill: ${({theme:{colors:e}})=>e.component.SchwabNetwork.icons.primary};
`,RF=({className:e,strokeClass:t,width:s,height:n,viewBox:r,dataTestId:o})=>a.jsx("svg",{"data-testid":o,width:s,height:n,viewBox:r,className:e,children:a.jsx("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeDasharray:"1,6",strokeLinecap:"round",children:a.jsx("g",{className:t,transform:"translate(-881.000000, -444.000000)",stroke:"inherit",strokeWidth:"2",children:a.jsx("path",{d:"M897.5,445.208333 L882.5,445.208333"})})})}),DF=({className:e,width:t,fill:s="none",viewBox:n,height:r,dataTestId:o="checkbox-icon"})=>a.jsx("svg",{className:e,"data-testid":o,width:t,height:r,viewBox:n,fill:s,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2072 7.20425L6.50008 13.9114L2.79297 10.2043L4.20718 8.79004L6.50008 11.0829L11.793 5.79004L13.2072 7.20425Z",fill:"currentColor"})}),LF=({className:e,width:t,height:s,viewBox:n,colors:r,dataTestId:o})=>a.jsx("svg",{"data-testid":o,width:t,height:s,viewBox:n,className:e,children:a.jsx("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:a.jsx("path",{className:"color-fill-paper-money",d:"M0.34762002,5.95283148 C0.130794754,5.76325747 0.00623431553,5.48940163 0.00583429784,5.20138889 L9.64504792e-07,1.00138889 C-0.000766850341,0.448562198 0.447172778,0 0.999999979,0 L7.99999998,0 C8.55228475,0 9,0.44771525 8.99999998,1 L9,5.2 C9,5.48881226 8.87513252,5.76352071 8.65753425,5.95342466 L6.31142281,8.0009401 L8.65846586,10.0543894 C8.87550412,10.2442781 9,10.5186195 9,10.807 L8.99999998,15 C9,15.5522847 8.55228475,16 7.99999998,16 L0.999999979,16 C0.44771525,16 1.37851379e-14,15.5522847 -2.11071178e-08,15 L1.37851379e-14,10.807 C1.37851379e-14,10.5186195 0.124495885,10.2442781 0.341534144,10.0543894 L2.68936046,8.00025481 L0.34762002,5.95283148 Z M2.00520297,4.74544728 L4.50033322,6.92698192 L7,4.74545455 L7,2 L2.00138985,2 L2.00520297,4.74544728 Z M2,11.2607993 L2,14 L7,14 L7,11.2607993 L4.5,9.07352655 L2,11.2607993 Z",fill:r==null?void 0:r.paperMoney.primary,fillRule:"nonzero"})})}),_F=({width:e,height:t,viewBox:s,colors:n,dataTestId:r})=>a.jsx("svg",{"data-testid":r,width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("rect",{x:"0.75",y:"0.75",width:"18.5",height:"10.5",stroke:n.icon.primary,strokeWidth:"1.5"})}),NF=({width:e,height:t,viewBox:s,dataTestId:n,colors:r})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M1 0H11C11.55 0 12 0.45 12 1C12 1.55 11.55 2 11 2H1C0.45 2 0 1.55 0 1C0 0.45 0.45 0 1 0Z",fill:r==null?void 0:r.icon.primary})}),PF=({width:e,height:t,viewBox:s,colors:n,dataTestId:r})=>a.jsx("svg",{"data-testid":r,width:e,height:t,viewBox:s,fill:n==null?void 0:n.icon.primary,children:a.jsx("path",{fill:"inherit",d:"M14.5886735,5.41139999 C13.2629449,4.0872668 11.3841517,3.32365625 9.31829243,3.53486768 C6.3333698,3.83543779 3.87711195,6.2562457 3.54364648,9.23757626 C3.09631475,13.1774818 6.14630381,16.5 9.99335668,16.5 C12.5878807,16.5 14.816406,14.9809024 15.857469,12.7956765 C16.1177347,12.2514009 15.7273361,11.6258901 15.1254716,11.6258901 C14.8245393,11.6258901 14.5398737,11.7883604 14.4097408,12.0564365 C13.4906775,14.030451 11.286552,15.2814725 8.87909401,14.7453204 C7.07350048,14.3472681 5.61763904,12.8769116 5.23537374,11.073491 C4.55217619,7.92156658 6.95150092,5.12707691 9.99335668,5.12707691 C11.3434852,5.12707691 12.5472142,5.68759955 13.425611,6.57306285 L12.1974821,7.79971384 C11.6850839,8.31149537 12.0429493,9.18883516 12.7668134,9.18883516 L15.6866696,9.18883516 C16.1340013,9.18883516 16.5,8.82327691 16.5,8.37648351 L16.5,5.46014109 C16.5,4.73714812 15.6216032,4.37158988 15.109205,4.88337141 L14.5886735,5.41139999 Z"})}),kF=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o,colors:i})=>a.jsxs("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,children:[a.jsx("g",{clipPath:"url(#clip0_915_569)",children:a.jsx("path",{d:"M18.75 3.94L4.06999 10.08C3.23999 10.43 3.25999 11.61 4.08999 11.93L9.42999 14C9.68999 14.1 9.89999 14.31 9.99999 14.57L12.06 19.9C12.38 20.74 13.57 20.76 13.92 19.93L20.07 5.26C20.4 4.43 19.57 3.6 18.75 3.94Z",fill:i==null?void 0:i.icon.primary})}),a.jsx("defs",{children:a.jsx("clipPath",{id:"clip0_915_569",children:a.jsx("rect",{width:"24",height:"24",fill:wt.WHITE})})})]}),MF=({width:e,height:t,viewBox:s,className:n})=>a.jsx("svg",{className:n,width:e,height:t,viewBox:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.12797 5.07146C4.40304 4.74692 4.17294 4.24899 3.74751 4.24817L3.06095 4.24685L3.05451 1.08853C3.05389 0.788336 2.81065 0.545153 2.51045 0.544615C2.20883 0.544075 1.96411 0.788619 1.96445 1.09025L1.96793 4.2445L1.27678 4.24287C0.852253 4.24187 0.619712 4.73699 0.891572 5.06306L1.73823 6.07853C2.13591 6.5555 2.86761 6.55847 3.26914 6.08473L4.12797 5.07146Z",fill:oe.HONOLULU_BLUE})}),$F=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o,colors:i})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1959 3.98058C11.0665 4.00647 10.9332 4.00647 10.8037 3.98058L0.803692 1.98058C0.262131 1.87227 -0.0890846 1.34544 0.0192261 0.803884C0.127539 0.262324 0.654364 -0.0888927 1.19592 0.0194194L10.9998 1.9802L20.8037 0.0194194C21.3453 -0.0888927 21.8721 0.262324 21.9804 0.803884C22.0887 1.34544 21.7375 1.87227 21.1959 1.98058L11.1959 3.98058Z",fill:"inherit",className:i.icon.primary})}),jF=({width:e,height:t,viewBox:s,dataTestId:n})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",children:a.jsx("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:a.jsx("g",{transform:"translate(-4.000000, -10.000000)",stroke:wt.WHITE,strokeWidth:"2",children:a.jsx("rect",{x:"5",y:"11",width:"8",height:"1"})})})}),BF=({width:e,height:t,viewBox:s,dataTestId:n})=>a.jsx("svg",{"data-testid":n,width:e,height:t,viewBox:s,fill:"none",children:a.jsx("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:a.jsx("g",{transform:"translate(-92.000000, -6.000000)",stroke:wt.WHITE,children:a.jsxs("g",{transform:"translate(92.000000, 6.000000)",children:[a.jsx("rect",{x:"0.5",y:"4.5",width:"9",height:"1"}),a.jsx("rect",{transform:"translate(5.000000, 5.000000) rotate(-270.000000) translate(-5.000000, -5.000000) ",x:"0.5",y:"4.5",width:"9",height:"1"})]})})})}),FF=({className:e,width:t,height:s,viewBox:n,dataTestId:r,fill:o,colors:i})=>a.jsx("svg",{"data-testid":r,width:t,height:s,viewBox:n,className:e,fill:o,children:a.jsx("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:a.jsx("polygon",{fill:i==null?void 0:i.action.focus,transform:"translate(3.500000, 3.500000) rotate(-90.000000) translate(-3.500000, -3.500000) ",points:"7 0 3.5 7 0 0"})})});var Pp=(e=>(e.RIGHT="right",e.LEFT="left",e))(Pp||{});const Uw=({className:e,width:t,fill:s,viewBox:n,height:r,dataTestId:o,stroke:i})=>a.jsx("svg",{className:e,"data-testid":o,width:t,height:r,viewBox:n,fill:s,stroke:i,xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.69531 12.2902C8.10156 11.9002 8.10156 11.2702 7.69531 10.8802L3.65365 7.00022L7.69531 3.12022C8.10156 2.73022 8.10156 2.10022 7.69531 1.71022C7.28906 1.32022 6.63281 1.32022 6.22656 1.71022L1.44531 6.30022C1.03906 6.69022 1.03906 7.32022 1.44531 7.71022L6.22656 12.3002C6.6224 12.6802 7.28906 12.6802 7.69531 12.2902Z"})}),HF=Uw,UF=A(Uw)`
  transform: rotate(180deg);
`;var Y=(e=>(e.AccountSummary="AccountSummary",e.BellAlert="BellAlert",e.Bell="Bell",e.Charts="Charts",e.Education="Education",e.Feedback="Feedback",e.Logout="Logout",e.Menu="Menu",e.Positions="Positions",e.Scans="Scans",e.Support="Support",e.Trade="Trade",e.User="User",e.Watchlist="Watchlist",e.Aggregation="Aggregation",e.Channel="Channel",e.Earnings="Earnings",e.FibonacciExtensions="FibonacciExtensions",e.FibonacciRetracement="FibonacciRetracement",e.Grid1="Grid1",e.Grid2Vertical="Grid2Vertical",e.Grid3Vertical="Grid3Vertical",e.PriceLevel="PriceLevel",e.Rectangle="Rectangle",e.TextNote="TextNote",e.TimeLevel="TimeLevel",e.TrendLine="TrendLine",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.Add="Add",e.AddAlt="AddAlt",e.ArrowDropDownAlt="ArrowDropDownAlt",e.ArrowDropLeftAlt="ArrowDropLeftAlt",e.ArrowDropRightAlt="ArrowDropRightAlt",e.ArrowDropDown="ArrowDropDown",e.ArrowDropLeft="ArrowDropLeft",e.ArrowDropRight="ArrowDropRight",e.Back="Back",e.Check="Check",e.ChevronDownCircle="ChevronDownCircle",e.ChevronDown="ChevronDown",e.ChevronUp="ChevronUp",e.ChevronRight="ChevronRight",e.ChevronLeft="ChevronLeft",e.Close="Close",e.CloseSolid="CloseSolid",e.Collapse="Collapse",e.Expand="Expand",e.Lock="Lock",e.UnLock="UnLock",e.PrivacyDisabled="PrivacyDisabled",e.PrivacyEnabled="PrivacyEnabled",e.Copy="Copy",e.BellAddAlert="BellAddAlert",e.Calendar="Calendar",e.Call="Call",e.Camera="Camera",e.DarkTheme="DarkTheme",e.Drawings="Drawings",e.DynamicWatchlist="DynamicWatchlist",e.Filter="Filter",e.Grid="Grid",e.Info="Info",e.LightTheme="LightTheme",e.LiveSupport="LiveSupport",e.Message="Message",e.Move="Move",e.NewTab="NewTab",e.PerformanceDown="PerformanceDown",e.PerformanceUp="PerformanceUp",e.Remove="Remove",e.SearchEnter="SearchEnter",e.Settings="Settings",e.Star="Star",e.StopWatch="StopWatch",e.Study="Study",e.SymbolSearch="SymbolSearch",e.Time="Time",e.Canceled="Canceled",e.CheckCircle="CheckCircle",e.InfoFilledCircle="InfoFilledCircle",e.OctaAlertFilled="OctaAlertFilled",e.Rejected="Rejected",e.WarningFilled="WarningFilled",e.BuyCompleted="BuyCompleted",e.BuyDraft="BuyDraft",e.BuyPending="BuyPending",e.BuySellDraft="BuySellDraft",e.BuySellPending="BuySellPending",e.SellCompleted="SellCompleted",e.SellDraft="SellDraft",e.SellPending="SellPending",e.StatusFlags="StatusFlags",e.Appalled="Appalled",e.DoubleArrow="DoubleArrow",e.Ecstatic="Ecstatic",e.Meh="Meh",e.SchwabNetwork="SchwabNetwork",e.SchwabNetworkMobile="SchwabNetworkMobile",e.Dots="Dots",e.Hourglass="Hourglass",e.Maximize="Maximize",e.Minimize="Minimize",e.Refresh="Refresh",e.SchwabCursor="SchwabCursor",e.ThinArrow="ThinArrow",e.WideArrowDown="WideArrowDown",e.Minus="Minus",e.Plus="Plus",e.Triangle="Triangle",e.ExtensionChevronLeft="ExtensionChevronLeft",e.ExtensionChevronRight="ExtensionChevronRight",e.Checkbox="Checkbox",e))(Y||{});const VF={AccountSummary:Y9,BellAlert:U9,Bell:H9,Charts:j9,Education:V9,Feedback:K9,Logout:W9,Menu:q9,Positions:M9,Scans:B9,Support:F9,Trade:$9,User:z9,Watchlist:G9,Aggregation:lF,Channel:gF,Earnings:uF,FibonacciExtensions:SF,FibonacciRetracement:fF,Grid1:hF,Grid2Vertical:pF,Grid3Vertical:mF,PriceLevel:TF,Rectangle:yF,TextNote:CF,TimeLevel:bF,TrendLine:EF,ZoomIn:cF,ZoomOut:dF,Add:vB,AddAlt:IB,ArrowDropDownAlt:z1,ArrowDropLeftAlt:wB,ArrowDropRightAlt:xB,ArrowDropDown:X1,ArrowDropLeft:RB,ArrowDropRight:OB,Check:DB,ChevronDownCircle:LB,ChevronDown:jm,ChevronUp:PB,ChevronRight:_B,ChevronLeft:NB,Close:kB,CloseSolid:MB,Collapse:$B,Expand:jB,Lock:FB,UnLock:UB,PrivacyDisabled:VB,PrivacyEnabled:WB,Copy:GB,BellAddAlert:nB,Calendar:cB,Call:tB,Camera:rB,DarkTheme:oB,Drawings:sB,DynamicWatchlist:mB,Filter:Z9,Grid:iB,Info:Q9,LightTheme:aB,LiveSupport:X9,Message:J9,Move:lB,NewTab:bB,PerformanceDown:EB,PerformanceUp:AB,Remove:uB,SearchEnter:SB,Settings:gB,Star:hB,StopWatch:CB,Study:yB,SymbolSearch:eB,Time:TB,Canceled:qB,CheckCircle:KB,InfoFilledCircle:zB,OctaAlertFilled:XB,Rejected:QB,WarningFilled:ZB,BuyCompleted:sF,BuyDraft:tF,BuyPending:nF,BuySellDraft:JB,BuySellPending:iF,SellCompleted:aF,SellDraft:oF,SellPending:rF,StatusFlags:eF,Appalled:AF,DoubleArrow:vF,Ecstatic:IF,Meh:xF,SchwabNetwork:wF,SchwabNetworkMobile:OF,Dots:RF,Hourglass:LF,Maximize:_F,Minimize:NF,Refresh:PF,SchwabCursor:kF,ThinArrow:MF,WideArrowDown:$F,Minus:jF,Plus:BF,Triangle:FF,ExtensionChevronLeft:HF,ExtensionChevronRight:UF,Checkbox:DF,Back:YB},WF=A.div`
  display: flex;
  text-align: center;
  align-items: center;
  border: 1px solid var(--border);
  border-radius: 4px;
  background-color: var(--input-background);

  position: relative;
  font-size: 1.4rem;
  width: auto;

  & .step {
    height: 16px;
    width: 16px;
  }

  &:focus-within .step {
    background-color: var(--focus);
  }

  &:focus-within {
    border: 1px solid var(--focus);
  }

  & input {
    width: 90px;
    font-size: 1.4rem;
    text-align: center;
    color: var(--primary-btn);
    border: none;
    height: 20px !important;
    max-width: 120px;
    box-sizing: border-box;
    font-family: 'TDASans', sans-serif;
    padding: 0 8px;
    background-color: var(--input-background);

    & :focus {
      outline: none;
      border: none !important;
    }

    &:-webkit-autofill,
    &:-webkit-autofill:hover,
    &:-webkit-autofill:focus,
    &:-webkit-autofill:active {
      -webkit-box-shadow: inset 0 0 0 9999px var(--input-background);
    }

    &::-webkit-calendar-picker-indicator {
      display: none;
    }
  }

  & button {
    background-color: var(--disabled);

    display: flex;
    justify-content: center;
    align-items: center;
    margin: 2px;
    padding: 0;
    border-radius: 2px;

    & svg > g > g {
      stroke: var(--element-background);
    }

    & :focus {
      background-color: ${({theme:e})=>e.colors.selected.primary.background};
    }
  }

  ${({isPrice:e})=>e&&`border: 1px solid var(--selected);
    background-color: var(--editor-background);
    
    &:focus-within {
      border: 1px solid var(--focus);

      button {
        background-color: var(--focus);
      }
    }

    button {
      background-color: var(--input-toggle);
    }

    input {
      background-color: var(--editor-background);
      width: 78px;
    }
  `};
`,GF={Alert:{background:wt.WHITE},Trade:{secondary:{contrastText:oe.BLUE_GRAY},background:{primary:oe.RICH_BLACK_FOGRA,secondary:oe.OXFORD_BLUE},border:{secondary:oe.HONOLULU_BLUE},icon:{secondary:wt.WHITE}},ColorPickerSwatch:{default:wt.WHITE},ActiveTraderLadder:{border:oe.ALPHA_WHITE_15},OptionChain:{icons:{earnings:oe.AZURE}},InformationMessage:{border:oe.BEAU_BLUE,background:oe.HONOLULU_BLUE},SchwabNetwork:{icons:{primary:oe.CORE_BLUE_50}}},Vw={text:{primary:wt.WHITE,secondary:oe.GRAY,tertiary:wt.BLACK,disabled:oe.GRAY_STONE,active:oe.SILVER_CHALICE,green:oe.GREEN_CORE,red:oe.TART_ORANGE,hint:""},input:{primary:oe.GRAY_STONE,disabled:oe.GRAY_CHARCOAL},checkbox:{primary:{background:oe.JAGUAR,borderColor:oe.GRAY,iconColor:wt.WHITE}},background:{primary:wt.BLACK,secondary:oe.OFF_BLACK,tertiary:oe.GRAY_CHARCOAL,hovered:oe.MERCURY,red:oe.BLACK_BEAN,warning:oe.FIELD_DRAB,green:oe.FOREST_GREEN},border:{primary:oe.GRAY,secondary:wt.WHITE,tertiary:oe.HONOLULU_BLUE,warning:oe.ORANGE},divider:{primary:oe.GRAY_CHARCOAL,secondary:oe.GRAY,tertiary:oe.GRAY_STONE},paperMoney:{primary:oe.YELLOW_SEA,secondary:oe.HONEY_YELLOW},error:{primary:oe.GOLD_CRAYOLA},warning:{},info:{},selected:{primary:{main:oe.OXFORD_BLUE,contrastText:wt.BLACK,background:oe.FRENCH_SKY_BLUE,focus:oe.LIGHT_FRENCH_SKY_BLUE},secondary:{main:oe.HONOLULU_BLUE,hover:oe.BRIGHT_NAVY_BLUE,background:oe.RICH_BLACK_FOGRA,contrastText:wt.WHITE}},action:{disabled:oe.GRAY_STONE,focus:oe.FRENCH_SKY_BLUE,active:oe.ALPHA_WHITE_15,hover:oe.ALPHA_WHITE_50,remove:oe.TART_ORANGE,add:oe.GREEN_CORE},boxShadow:{primary:"rgba(0,0,0,0.75)",secondary:"rgba(0,0,0,0.88)"},overlay:{background:{primary:oe.ALPHA_BLACK_25,secondary:oe.ALPHA_BLACK_60,tertiary:oe.ALPHA_BLACK_80},border:{primary:oe.GRAY}},scrollbar:{background:{primary:wt.BLACK,tertiary:oe.RICH_BLACK_FOGRA},thumb:{primary:oe.GRAY_STONE,tertiary:oe.BLUE_YONDER}},icon:{primary:oe.GRAY_STONE,secondary:wt.BLACK,tertiary:oe.HONOLULU_BLUE,secondary_reverse:wt.WHITE},shadow:{primary:oe.ALPHA_BLACK_75},shade:{primary:oe.JET},optionStatsTable:{calls:oe.BLUE_GRAY,puts:oe.LIGHT_PURPLE},messageCenterNotifications:{regular:oe.BLUE_GRAY,high:oe.ORANGE,urgent:oe.TART_ORANGE},common:{light:wt.WHITE,dark:wt.BLACK},component:GF},YF=Vw,qF={Alert:{background:wt.BLACK},Trade:{secondary:{contrastText:oe.LAPIS_LAZULI},background:{primary:oe.ALICE_BLUE,secondary:oe.ALSO_ALICE_BLUE},border:{secondary:oe.HONOLULU_BLUE},icon:{secondary:wt.WHITE}},ColorPickerSwatch:{default:wt.WHITE},ActiveTraderLadder:{border:oe.ALPHA_BLACK_15},OptionChain:{icons:{earnings:oe.AZURE}},InformationMessage:{border:oe.DENIM,background:oe.BLUE_FROST},SchwabNetwork:{icons:{primary:oe.CORE_BLUE_30}}},KF=sx({},Vw,{text:{primary:wt.BLACK,secondary:oe.GRAY_STONE,tertiary:wt.WHITE,disabled:oe.GRAY,active:oe.GRAY_CHARCOAL,green:oe.GREEN_VERDE,red:oe.RED_ROJA,hint:""},input:{primary:oe.GRAY,disabled:oe.GRAY_ASH},checkbox:{primary:{background:wt.WHITE,borderColor:oe.GRAY,iconColor:wt.BLACK}},background:{primary:wt.WHITE,secondary:oe.GRAY_NICKEL,tertiary:oe.GRAY_STONE,hovered:oe.OFF_BLACK,red:oe.MISTY_ROSE,warning:oe.BLANCHED_ALMOND,green:oe.NYANZA},border:{primary:oe.GRAY_STONE,secondary:wt.BLACK,warning:oe.FIELD_DRAB_LIGHT},divider:{primary:oe.GRAY_ASH},selected:{primary:{main:oe.ALSO_ALICE_BLUE,contrastText:wt.WHITE,background:oe.DENIM,focus:oe.LIGHT_DENIM},secondary:{background:oe.ALICE_BLUE}},paperMoney:{primary:oe.AFGAN_TAN,secondary:oe.MAXIMUM_YELLOW_RED},error:{primary:oe.BLANCHED_ALMOND},action:{disabled:oe.GRAY,active:oe.ALPHA_BLACK_15,hover:oe.ALPHA_BLACK_5,focus:oe.DENIM,remove:oe.RED_ROJA,add:oe.GREEN_VERDE},boxShadow:{primary:"rgba(0,0,0,0.25)",secondary:"rgba(255,255,255,0.88)"},overlay:{background:{primary:oe.ALPHA_WHITE_15,secondary:oe.ALPHA_WHITE_60,tertiary:oe.ALPHA_WHITE_95},border:{primary:oe.GRAY_STONE}},scrollbar:{background:{primary:wt.WHITE,tertiary:oe.ALICE_BLUE},thumb:{primary:oe.ALPHA_BLACK_30}},icon:{primary:oe.GRAY,secondary:wt.WHITE},shadow:{primary:oe.ALPHA_BLACK_25},shade:{primary:oe.GRAY_ALUMINUM},optionStatsTable:{calls:oe.LAPIS_LAZULI,puts:oe.DARK_PURPLE},messageCenterNotifications:{regular:oe.DENIM,high:oe.FIELD_DRAB_LIGHT,urgent:oe.RED_ROJA},component:qF}),zF=e=>({main:oe.GREEN_CORE,hover:oe.MANTIS,active:oe.SLIMY_GREEN,focus:oe.SLIMY_GREEN,background:oe.FOREST_GREEN,contrastText:e.background.primary}),XF=e=>({main:oe.GREEN_VERDE,hover:oe.MAY_GREEN,active:oe.PAKISTAN_GREEN,focus:oe.PAKISTAN_GREEN,background:oe.NYANZA,contrastText:e.background.primary}),QF=e=>({main:oe.TART_ORANGE,hover:oe.ORANGE_RED_CRAYOLA,active:oe.PERMANENT_GERANIUM_LAKE,focus:oe.PERMANENT_GERANIUM_LAKE,background:oe.BLACK_BEAN,contrastText:e.background.primary}),ZF=e=>({main:oe.RED_ROJA,hover:oe.ENGLISH_VERMILLION,active:oe.CARNLEIAN,focus:oe.CARNLEIAN,background:oe.MISTY_ROSE,contrastText:e.background.primary}),Q1=(e,t)=>{const s=e===Ko.dark?YF:KF,n=e===Ko.dark?zF:XF,r=e===Ko.dark?QF:ZF,o=t?r:n,i=t?n:r;return{...s,buy:o(s),sell:i(s)}},kp=A.button`
  position: absolute;
  left: ${({theme:e})=>e.space.xxSmall};
  bottom: -2px;
  padding: 0;
  ${({optionType:e})=>e===dt.Put&&Ss`
      right: ${({theme:t})=>t.space.xxSmall};
      left: auto;
    `};

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    bottom: -5px;
  }
`,Ww=A.div`
  ${kp} {
    opacity: 0;
  }

  &:hover ${kp} {
    opacity: 1;
  }

  .strike-value > div {
    padding: 0 8px 0 6px;
    border-radius: ${({theme:e})=>e.space.small};
  }
`,JF=Ss`
  .sbdocs-preview {
    background-color: ${({theme:e})=>e.colors.background.tertiary};
  }

  .sb-show-main {
    overflow: auto;
  }

  .storybook-row {
    display: flex;
    flex-wrap: wrap;
    margin: 0 -10px 20px;
  }

  .storybook-col {
    padding: 0 10px;
    margin-bottom: 20px;
  }

  .storybook-col-3 {
    min-width: 275px;
    width: 25%;
  }

  .storybook-icon-col {
    display: flex;
  }

  .storybook-icon-name {
    padding-left: 10px;
    align-self: center;
  }

  .storybook-icon-wrapper {
    align-self: center;
    min-width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #171717;
    border-radius: 3px;
  }

  .storybook-icon-wrapper > svg {
    min-width: 15px;
    min-height: 15px;
  }

  .storybook-icon-Grid1Icon,
  .storybook-icon-Grid2VerticalIcon,
  .storybook-icon-Grid3VerticalIcon {
    fill: none;
  }
  /* stylelint-disable */
  body[theme='LIGHT'] .storybook-icon-wrapper {
    background-color: #efefef;
  } /* stylelint-enable */
`,eH=e=>JT`
  0% {
    outline: ${e.theme.shape.borderWidth.primary}px solid ${e.theme.colors.action.focus};
  }

  99% {
    outline: ${e.theme.shape.borderWidth.primary}px solid transparent;
  }

  100% {
    outline: none;
  }
`,jf={defaultTimingFunction:"ease-in-out",rate:{fast:".15s",default:".3s",slow:".4s"}},br={ellipsis:Ss`
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  `,transition:(e,t=jf.rate.default,s=jf.defaultTimingFunction)=>Ss`
    transition-property: ${e};
    transition-duration: ${t};
    transition-timing-function: ${s};
  `,scrollbar:e=>Ss`
    ${({theme:t})=>{const s=e.thumb??t.colors.scrollbar.thumb.primary,n=e.background??t.colors.scrollbar.background.primary;return`
        scrollbar-color: ${s} ${n};
        ::-webkit-scrollbar-track {
          background: ${n};
        }
        ::-webkit-scrollbar-thumb {
          background-color: transparent;
          border-radius: 10px;
          border: 3px solid ${n};
        }
        ::-webkit-scrollbar-corner {
          background: hsla(0, 0%, 0%, 0);
        }
      `}}
  `,elevation:(e=Ua.level1)=>Ss`
    ${()=>{switch(e){case Ua.level1:return`box-shadow: 0 1px 2px 0 rgba(0,0,0,0.3),
    0 1px 3px 1px rgba(0,0,0,0.15);`;case Ua.level2:return`box-shadow: 0 1px 2px 0 rgba(0,0,0,0.3),
    0 2px 6px 2px rgba(0,0,0,0.15);`;case Ua.level3:return`box-shadow: 0 1px 3px 0 rgba(0,0,0,0.3),
    0 4px 8px 3px rgba(0,0,0,0.15);`;case Ua.level4:return`box-shadow: 0px 2px 3px 0px rgba(0,0,0,0.3),
    0 6px 10px 4px rgba(0,0,0,0.15);`;case Ua.level5:return`box-shadow: 0 4px 4px 0 rgba(0,0,0,0.3),
    0 8px 12px 6px rgba(0,0,0,0.15);`;default:return`box-shadow: 0 1px 2px 0 rgba(0,0,0,0.3),
    0 1px 3px 1px rgba(0,0,0,0.15);`}}}
  `,typography:(e=sr.body1)=>Ss`
    ${()=>{switch(e){case sr.title1:return`
          font-weight: 500;
          font-size: 2.8rem;
          line-height: 3.2rem;
          `;case sr.title2:return`
          font-weight: 500;
          font-size: 2.0rem;
          line-height: 2.8rem;
          `;case sr.subhead1:return`
          font-weight: 500;
          font-size: 1.6rem;
          line-height: 2.4rem;
          `;case sr.subhead2:return`
          font-weight: 500;
          font-size: 1.4rem;
          line-height: 2.0rem;
          `;case sr.body1:return`
          font-weight: 400;
          font-size: 1.6rem;
          line-height: 2.4rem;
          `;case sr.body2:return`
          font-weight: 400;
          font-size: 1.4rem;
          line-height: 2.0rem;
          `;case sr.caption:return`
          font-weight: 400;
          font-size: 1.2rem;
          line-height: 1.6rem;
          `;case sr.captionEmphasized:return`
          font-weight: 500;
          font-size: 1.2rem;
          line-height: 1.6rem;
          `;default:return`
          font-weight: 400;
          font-size: 1.6rem;
          line-height: 2.4rem;
          `}}}
  `,stripedBackgroundList:(e=Pe.primary)=>Ss`
    ${({theme:{colors:t}})=>{switch(e){case Pe.tertiary:return`background: ${t.component.Trade.background.primary};`;case Pe.primary:default:return`background: ${t.background.primary};`}}}

    :nth-child(even) {
      background: ${({theme:{colors:t}})=>e===Pe.tertiary?t.component.Trade.background.secondary:t.background.secondary};
    }
  `,outerShadow:()=>Ss`
    box-shadow: 5px 5px 10px ${({theme:{colors:e}})=>e.shadow.primary};
  `,insetTopShadow:()=>Ss`
    box-shadow: inset 0 10px 9px -7px ${({theme:{colors:e}})=>e.shadow.primary};
  `,insetTopAndOuterShadow:()=>Ss`
    box-shadow: 5px 5px 10px ${({theme:{colors:e}})=>e.shadow.primary},
      inset 0 10px 9px -7px ${({theme:{colors:e}})=>e.shadow.primary};
  `,lineClamp:(e=2)=>`
    /* stylelint-disable */
    display: -webkit-box;
    -webkit-line-clamp: ${e};
    -webkit-box-orient: vertical;
    /* stylelint-enable */
    overflow: hidden;
  `,commonBorder:e=>Ss`
    border: ${({theme:t})=>t.shape.borderWidth.primary}px solid
      ${({theme:t})=>e?t.colors.action.focus:t.colors.border.primary};
  `,selectedListItem:e=>Ss`
    background: ${({theme:{colors:t}})=>t.selected.primary.background};
    border-color: transparent;

    :focus {
      background: ${({theme:{colors:t}})=>t.selected.primary.focus};
      border-color: transparent;
    }

    ${e&&(({theme:{colors:t}})=>`
      :hover {
        background: ${t.selected.primary.focus};
        border-color: transparent;
      }
    `)}

    color: ${({theme:{colors:t}})=>t.selected.primary.contrastText};
  `},tH=z2`
* {
  box-sizing: inherit;
  font-family: ${({theme:e})=>e.typography.fontFamily};

  /* shim wile we transition to styled-components */
  --scrollbarBG: ${({theme:{colors:e}})=>e.scrollbar.background.primary};
  --thumbBG: ${({theme:{colors:e}})=>e.scrollbar.thumb.primary};

  ${br.scrollbar({background:"var(--scrollbarBG)",thumb:"var(--thumbBG)"})}
}

html {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  overflow: hidden;
  font-size: ${({theme:e})=>e.typography.htmlFontSize};
  height: 100%;
}

body {
  margin: 0;
  padding: 0;
  background-color: ${({theme:e})=>e.colors.background.primary};
  color: ${({theme:e})=>e.colors.text.primary};
  font-size: ${({theme:e})=>e.typography.body1.fontSize};
  height: 100%;
  overflow: hidden;

  & *:focus {
    outline: none;
  }

  &.keyboard-user {
    & *:focus {
      animation-duration: 2.5s;
      animation-name: ${eH};
    }
  }

  /* Following rule has been added to fix accessibility issue CopyOptionButton component */
  &.keyboard-user ${Ww}:focus-within ${kp} {
    opacity: 1;
  }
}

.in-app-scrollbar:hover::-webkit-scrollbar-thumb {
  background-color: var(--thumbBG);
  min-height: 25px;
}

/* Following two rules are for firefox only */
.in-app-scrollbar:hover {
  scrollbar-color: var(--thumBG) var(--scrollbarBG);
  min-height: 25px;
}

.in-app-scrollbar {
  scrollbar-color: transparent transparent;
}

/* stylelint-disable*/
.in-app-scrollbar::-webkit-scrollbar {
  width:15px;
  height: 15px;
}

/* Drop downs scrollbars should always be visible when opened */
.in-app-scrollbar-dropdowns::-webkit-scrollbar {
  width:15px;
  height: 15px;
}
.in-app-scrollbar-dropdowns::-webkit-scrollbar-thumb {
  background-color: var(--thumbBG);
  min-height: 25px;
}

/* Firefox only */
.in-app-scrollbar-dropdowns {
  scrollbar-color: var(--thumBG) var(--scrollbarBG);
}

/* stylelint-enable */
.flex-grow-1 {
  flex-grow: 1;
}

${JF}
`,xc=X2,sH=e1,nH=Z2.DateRange,rH=Q2,oH=tH,v0={[Ds.none]:"0",[Ds.xxxs]:"0.4rem",[Ds.xxs]:"0.8rem",[Ds.xs]:"1rem",[Ds.sm]:"1.2rem",[Ds.m]:"1.4rem",[Ds.l]:"1.6rem",[Ds.xl]:"1.8rem",[Ds.xxl]:"2rem",[Ds.xxxl]:"2.2rem",[Ds.xxxxl]:"2.4rem",[Ds.xxxxxl]:"2.6rem"},aH={...Object.values(v0),...v0},I0={[Ds.none]:"0",[Ds.xxxs]:"2px",[Ds.xxs]:"4px",[Ds.xs]:"8px",[Ds.sm]:"12px",[Ds.m]:"16px",[Ds.l]:"24px",[Ds.xl]:"32px",[Ds.xxl]:"40px",[Ds.xxxl]:"48px",[Ds.xxxxl]:"56px",[Ds.xxxxxl]:"64px"},iH={...Object.values(I0),...I0};var lt=(e=>(e.DESKTOP_LARGE="desktopLarge",e.DESKTOP_MEDIUM="desktopMedium",e.DESKTOP_MEDIUM_SMALL="desktopMediumSmall",e.DESKTOP_MEDIUM_SMALL_PLUS="desktopMediumSmallPlus",e.DESKTOP_SMALL_PLUS="desktopSmallPlus",e.DESKTOP_SMALL="desktopSmall",e.TABLET_LARGE="tabletLarge",e.TABLET_SMALL="tabletSmall",e.MOBILE_XL="mobileXL",e.MOBILE_LARGE="mobileLarge",e.MOBILE_SMALL="mobileSmall",e))(lt||{});const zo={desktopLarge:1824,desktopMedium:1574,desktopMediumSmall:1454,desktopMediumSmallPlus:1456,desktopSmallPlus:1360,desktopSmall:1224,tabletLarge:1024,tabletSmall:768,mobileXL:510,mobileLarge:480,mobileSmall:320},lH=[1824,1360,1224,1024,768,510,480,320];function cH(e){return`(min-width:${typeof zo[e]=="number"?zo[e]:e}px)`}function dH(e){const t=typeof zo[e]=="number"?zo[e]:e;return`(max-width:${Number(t)-1}px)`}function uH(e,t){const s=typeof e!="number"&&typeof zo[e]=="number"?zo[e]:e,n=typeof t!="number"&&typeof zo[t]=="number"?zo[t]:t;return`(min-width:${s}px) and (max-width:${Number(n)-1}px)`}const hH={above:e=>`@media screen and ${cH(e)}`,below:e=>`@media screen and ${dH(e)}`,between:(e,t)=>`@media screen and ${uH(e,t)}`},wc=Object.assign(lH,zo,hH),pH={htmlFontSize:"62.5%",fontFamily:"TDASans, sans-serif",h1:{fontFamily:"TDASans, sans-serif",fontWeight:400,fontSize:"6rem",lineHeight:1.167,letterSpacing:"-0.01562em"},h2:{},h3:{},h4:{},h5:{},body1:{fontSize:"1.4rem"},body2:{},button:{},caption:{}},it={breakpoints:wc,fontSizes:aH,mixins:br,space:iH,shape:{borderRadius:{primary:6,secondary:4,tertiary:2},borderWidth:{primary:1,secondary:2,thick:8}},transitions:jf,typography:pH,zIndex:{appBar:1100,drawer:1200,modal:1300,tooltip:1400},components:{Dropdown:{Anchor:{primary:{height:40},secondary:{height:40},tertiary:{height:22}},ListItem:{primary:{height:40},secondary:{height:40},tertiary:{height:33}}}}},x0={palette:{primary:{main:oe.GREEN_CORE}},typography:{body1:{fontSize:"1.6rem"},body2:{fontSize:"1.2rem"},caption:{fontSize:"1.1rem"}},tda:it};function mH(e){const t=j.useMemo(()=>({...it,colors:Q1(e.mode,e.areColorsSwapped)}),[e.mode,e.areColorsSwapped]);return a.jsx(rH,{theme:t,children:a.jsxs(a.Fragment,{children:[a.jsx(oH,{}),e.children]})})}const gH=j.memo(mH),SH="zh-CN",fH={TimeFrame:{Today:"当天",Day:"1天",Week:"1周","2 Weeks":"2周",Month:"1月","3 Months":"3个月","6 Months":"6个月","Year-To-Date":"年度至今","Year To Date":"年度至今",Year:"1年","1 Year":"1年","3 Years":"3年","5 Years":"5年","15 Years":"15年",Max:"最长",m:"分钟",h:"小时",d:"天",w:"周","1m":"1分钟","2m":"2分钟","3m":"3分钟","4m":"4分钟","5m":"5分钟","10m":"10分钟","15m":"15分钟","20m":"20分钟","30m":"30分钟","1h":"1小时","2h":"2小时","4h":"4小时","1D":"1天","2D":"2天","3D":"3天","4D":"4天","15D":"15天","1W":"1周","2W":"2周","1M":"1个月","3M":"3个月","6M":"6个月","9M":"9个月","1Y":"1年","2Y":"2年","3Y":"3年","4Y":"4年","5Y":"5年","10Y":"10年","15Y":"15年","20Y":"20年",YTD:"年度至今","1 Minute":"1分钟","2 Minutes":"2分钟","3 Minutes":"3分钟","4 Minutes":"4分钟","5 Minutes":"5分钟","10 Minutes":"10分钟","15 Minutes":"15分钟","20 Minutes":"20分钟","30 Minutes":"30分钟","55 Minutes":"55分钟","1 Hour":"1小时","2 Hours":"2小时","4 Hours":"4小时","8 Hours":"8小时","24 Hours":"24小时","1 Day":"1天","2 Days":"2天","3 Days":"3天","4 Days":"4天","1 Week":"1周","1 Month":"1个月"},SupportWindow:{Closed:"已关闭",Closes:"关闭",Admin:"管理员","Are you sure you want to end the current chat session?":"您确定要结束当前聊天会话吗?","Ask us anything":"向我们提问",Call:"电话",End:"结束","fri {{startTime}} - {{endTime}} CT":"周五美中时间{{startTime}} - {{endTime}}","IN-PROGRESS":"进行中",Open:"已开放",Opens:"开放","mon {{startTime}} - {{endTime}} CT":"周一美中时间{{startTime}} - {{endTime}}","Return to chat":"返回聊天","sat {{startTime}} - {{endTime}} CT":"周六美中时间{{startTime}} - {{endTime}}","sent image":"发送的图片","Start Chat":"开始聊天","sun {{startTime}} - {{endTime}} CT":"周日美中时间{{startTime}} - {{endTime}}","Support Chat Hours":"线上聊天客服时间","thurs {{startTime}} - {{endTime}} CT":"周四美中时间{{startTime}} - {{endTime}}","TTY (for hearing impaired)":"TTY(专为听障人士)","tues {{startTime}} - {{endTime}} CT":"周二美中时间{{startTime}} - {{endTime}}","wed {{startTime}} - {{endTime}} CT":"周三美中时间{{startTime}} - {{endTime}}","Welcome to Live Chat Support! Your chat with a live agent will appear in this window. Start by typing your question below.":"欢迎使用线上聊天支持! 您与在线客服代表的对话窗口在此显示。请在下面输入您的问题开始聊天。",You:"您"},AddStudyMenu:{"Acc Dist":"累积派发指标","Acceleration Bands":"加速带","Accum Dist Pr Volume":"累积派发压量","Advance Decline":"腾落指标(ADL)","ADX Crossover":"平均动向指标交叉(ADXX)",ADX:"平均方向指数(ADX)","All Studies":"所有研究","Aroon Indicator":"阿隆指标","Aroon Oscillator":"阿隆震荡指标",ATR:"平均真实范围(ATR)","Available Studies":"可用研究","Awesome Oscillator":"动量震荡指标(AO)","Bollinger Bands Crossover":"布林轨道交叉(BBX)","Bollinger Bands":"布林轨道(BB)","Bollinger Bandwidth":"布林通道带宽指标","Bollinger Percent B":"布林通道百分比带宽指标",CCI:"顺势指标(CCI)","Chaikin Money Flow":"蔡金资金流量(CMF)","Chaikin Osc":"蔡金摆动指标(CO)","Chaikin Oscillator":"蔡金摆动指标(COSC)","Chaikin Volatility":"蔡金波动指标",Comparison:"比较","Comparison - Percent":"比较-百分比","Crossover Studies":"交叉研究",CSI:"选股指标(CSI)","Cumulative Volume Index":"累积成交量指数(CVI)","Cycle Studies":"周期研究","Daily SMA":"每日简单移动平均",DEMA:"双指数移动平均","Demand Index":"需求指数","Detrended Price Osc":"区间震荡指标(DPO)","Displaced EMA":"置换指数移动平均",DMA:"置换移动平均",DMI:"方向移动指数(DMI)","Ease Of Movement":"简易波动指标(EOM)","Ehlers Super Smoother Filter":"Ehlers超平滑过滤器","Forecast Oscillator":"预测摆动","Four Percent Model":"4%模型","Heikin Ashi Diff":"平均K线图","Historical Volatility":"历史波动率","HL Volatility":"高低波动率","Implied Volatility":"隐含波动率(IV)","Keltner Channels":"肯特纳通道(KC)","Klinger Oscillator":"克林格摆动指标","LBR Three Ten Osc":"LBR 3/10震荡指标","Legacy EMA":"传统指数移动平均","Linear Reg Ch50":"线性回归通道50%","Linear Reg Ch100":"线性回归通道100%","Linear Reg ChVar":"线性回归通道变量","Linear Reg Curve":"线性回归曲线","Linear Regression Rev":"线性回归逆转","Linear Regression Slope":"线性回归斜率","Linear Regression":"线性回归","Lower Studies":"下行研究","MACD Histogram Crossover":"MACD柱状图交叉(MACDHX)","MACD Histogram":"MACD 直方图","MACD Two Lines":"MACD双线",MACD:"异同移动平均(MACD)","Market Forecast":"市场预测指标","Market Sentiment":"市场情绪指标","Market Strength Studies":"市场强度研究","McClellan Oscillator":"麦克林指标(MCL)","McClellan Summation Index":"麦氏综合指标(MSI)","Median Average":"中值平均","MESA Sine Wave":"山形正弦波指标","Momentum Crossover":"动量交叉(MX)","Money Flow Index Crossover":"资金流量指标交叉(MFIX)","Money Flow Index":"资金流量指标(MFI)","Mov Avg Adaptive":"自适应移动平均","Mov Avg Triangular":"三角移动平均","Moving Average":"移动平均(MA)","Moving Avg Crossover":"移动平均交叉(MAX)","Negative Volume Index":"负量指标(NVI)","On-Balance Volume":"平衡交易量(OBV)","Onset Trend Detector":"趋势起始检测指标","Open Interest":"未平仓合约(OpInt)","Parabolic SAR Crossover":"抛物线转向交叉(parSARX)","Parabolic SAR":"抛物线转向","Percent Change":"百分比变化","Pivot Points":"轴心点指标","Polarized Fractal Efficiency":"极化分型效率","Popular Studies":"热门研究","Positive Volume Index":"正量指标(PVI)",PPS:"Person枢轴点研究","Price And Volume Trend":"价格成交量走势(PVT)","Price Average Crossover":"价格平均交叉(PAX)","Price Channel":"价格通道(PC)","Price Osc":"价格摆动",Price:"价格","Probability Of Expiring Cone":"即将到期锥形概率(ProbExp)",QStick:"量化阴阳线","Rainbow Average":"彩虹移动平均","Rate Of Change Crossover":"变化率交叉(ROCX)","Relative Volatility Index":"相对离散指数(RVI)","Reverse Engineering MACD":"逆向工程MACD","RSI Crossover":"相对强弱指标交叉(RSIX)",RSI:"相对强弱指数(RSI)",RSquared:"R平方","Standard Deviation":"标准差","Standard Error Bands":"标准误差带","Standard Error Channel":"标准误差通道","StdDev Channel":"标准差通道(StdDev)","Stochastic Crossover":"随机指标交叉(StochX)",Stochastic:"随机指标(Stoch)",Studies:"研究",TEMA:"三重指数移动平均","Time Series Forecast":"时间系列预测","Trade Volume Index":"交易量指数(TVI)","Trend Noise Balance":"趋势噪音平衡","Trend Periods":"趋势周期","Trend Quality":"趋势质量","Trend Studies":"趋势研究",TRIX:"三重指数(TRIX)","TTM Scalper Alert":"TTM缩放警报","TTM Squeeze":"挤牌指标(TTM Squeeze)","TTM Wave":"TTM 波浪指标",TTMLRC:"TTM线性回归通道","Ulcer Index":"溃疡指数","Upper Studies":"上行研究","Variable MA":"变量移动平均","Vertical Horizontal Filter":"十字过滤线","Volatility Std Dev":"波动率标准差","Volatility Studies":"波动研究","Volatility Switch":"波动转换","Volume Avg":"平均成交量","Volume Flow Indicator":"成交流量指标","Volume Osc":"成交量震荡指标","Volume Profile":"成交量分布","Volume Rate Of Change":"成交量变动率","Volume Weighted MACD":"成交量加权MACD",Volume:"成交量","Vortex Indicator":"涡旋指标",VWAP:"成交量加权平均价格(VWAP)","Weakness In A Strong Trend":"强势异动研究","ZigZag High Low":"转折高低","ZigZag Percent":"转折百分比","ZigZag Sign":"转折信号","ZigZag Step Pattern":"转折移动形态","ZigZag Trend Percent":"转折趋势百分比","ZigZag Trend Sign":"转折趋势信号"},ChartInfo:{Close:"关闭",Volume:"量"},News:{ago:"以前","Back to All {{symbol}} News":"返回至所有{{symbol}}的新闻","Back to Portfolio Digest":"返回投资组合文摘","Loading news for {{symbol}}":"正在载入{{symbol}}的新闻","Loading relevant news":"正在加载相关新闻",News:"的新闻","No body text is currently available for this article.":"这篇文章目前没有内容","No news available for {{symbol}}":"没有{{symbol}}的新闻","No relevant news available":"没有相关的新闻","Portfolio Digest":"投资组合文摘","Show less":"显示更少","Show more":"显示更多"},Drawings:{"Andrews Pitchfork":"安德鲁叉形",Arrow:"箭头",Channel:"通道","Cycle Brackets":"周期范围","Fibonacci Arcs":"斐波那契弧线","Fibonacci Extensions":"斐波纳契延伸","Fibonacci Fans":"斐波那契扇形","Fibonacci Retracements":"斐波那契回撤","Fibonacci Spiral":"斐波那契螺旋","Fibonacci Time Extensions":"斐波那契时间延申","Fibonacci Time Ratios":"波那契时间比率","Fibonacci Time Series":"斐波那契时间系列",Oval:"椭圆形","Price Level":"价格水平",Rectangle:"长方形","Regression Channel":"回归通道","Regression Line":"回归线","Text Note":"文字注释","Time Level":"时间水平",Trendline:"趋势线",Unsupported:"非支持",Default:"默认",Undo:"撤消",Drawings:"绘图","Drawing sets":"绘图集","Drawing Set":"绘图集","Drawing Tools":"绘图工具","Edit text":"修改文字","Edit text note":"修改文字注释",Left:"左",Top:"上",Right:"右",Bottom:"下",Off:"关闭",Text:"文字"},Alerts:{"Alert deleted.":"警示已被删除。","Alert Triggered":"激活的警示",Submit:"提交",Canceled:"已取消",Close:"收盘价",Undo:"撤销。"},OrderBook:{LOC:"收盘限价",MOC:"收盘市价","View Transaction History":"查看交易历史"},Transactions:{"Time Range":"时间范围",to:"至",Last:"最新","Transaction History":"交易历史","Back to Positions":"返回仓位页面","Execution Time":"成交时间",Type:"类型",Description:"说明","Misc Fees":"杂费","Commissions & Fees":"佣金和费用",Amount:"数额",Balance:"余额","The date range selected must be no more than 370 days.":"所选日期范围不能超过370天","The start date of your range must be before the end date":"时间范围的开始日期必须在结束日期之前","Displaying ":"显示","Displaying Last ":"显示过去","7 Days":"7天","30 Days":"30天","90 Days":"90天","180 Days":"180天","365 Days":"365天",YTD:"年度至今",Custom:"自定义","Transactions history is loading.":"正在载入交易历史。","Select All":"选择所有",Trades:"交易",Deposits:"存款",Withdrawals:"提款",Transfers:"转账","Dividends or Interest":"股息或利息","Start of day balances":"当天开始余额",Filter:"过滤器",Filters:"过滤器","Filters Applied":"已应用过滤条件","You do not have any transactions that meet these criteria.":"您没有符合这些条件的交易。","Mark to Market":"按市值计价"},Watchlist:{"% Change Gainers":"%变化赢家","% Change Losers":"%变化输家","24 Hour Trading":"24小时交易证券","2018 TOS Challenge":"2018 TOS挑战赛列表","Account Positions, Working Orders, Personal":"账户仓位，尚待执行订单，个人","Active on Social":"社交热门股",Advertising:"广告","Aerospace & Defense":"航空和国防","Agricultural & Farm Machinery":"农业和农用机械","Agricultural Products":"农产品","Air Freight & Logistics":"空运和物流",Airlines:"航空公司","Airport Services":"机场服务","All Auto Components":"所有汽车部件","All Automobiles":"所有汽车","All Banks":"所有银行","All Beverages":"所有饮料","All Capital Markets":"所有资本市场","All Chemicals":"所有化学品","All Commercial Services & Supplies":"所有商业服务和用品","All Communication Services":"所有通信服务","All Consumer Discretionary":"所有非必需消费品","All Consumer Staples":"所有消费必需品","All Containers & Packaging":"所有容器和包装","All Diversified Consumer Services":"所有多元消费服务","All Diversified Financial Services":"所有多元金融服务","All Diversified Telecommunication Services":"所有多元的电信服务","All Electrical Equipment":"所有电气设备","All Electronic Equipment, Instruments & Components":"所有电子设备、仪器和组件","All Energy Equipment & Services":"石油天然气设备及服务","All Energy":"所有能源","All Entertainment":"所有娱乐","All Equity Real Estate Investment Trusts (REITs)":"所有股权房地产投资信托（REITs）","All ETFs":"所有ETF","All Financials":"所有金融服务","All Food & Staples Retailing":"所有食品和日常用品零售","All Food Products":"所有食品","All Health Care Equipment & Supplies":"所有医疗设备和用品","All Health Care Providers & Services":"所有医疗提供者和服务","All Health Care":"所有医疗保健","All Hotels, Restaurants & Leisure":"所有酒店、餐厅和休闲","All Household Durables":"所有家用耐用品","All Independent Power and Renewable Electricity Producers":"所有独立电力和可再生能源发电商","All Industrials":"所有工业","All Information Technology":"所有信息技术","All Insurance":"所有保险","All IT Services":"所有IT服务","All Machinery":"所有机械设备","All Materials":"所有材料","All Media":"所有媒体","All Metals & Mining":"所有金属和采矿","All Multiline Retail":"所有多阶层零售","All Oil, Gas & Consumable Fuels":"所有石油、天然气和消耗性燃料","All Paper & Forest Products":"所有纸和林木产品","All Professional Services":"所有专业服务","All Real Estate Management & Development":"所有房地产管理和开发","All Real Estate":"所有房地产","All Road & Rail":"所有公路和铁路","All Semiconductors & Semiconductor Equipment":"所有半导体和半导体设备","All Software":"所有软件","All Specialty Retail":"所有专卖零售","All Textiles, Apparel & Luxury Goods":"所有纺织品、服装和奢侈品","All Transportation Infrastructure":"所有交通基础设施","All Utilities":"所有公用设施","All Watchlists":"所有观察列表",All:"所有","Alternative Carriers":"非主流电信公司",Aluminum:"铝","American-Style Indices":"美式指数","Analyst Downgrades":"分析师降级","Analyst Upgrades":"分析师升级","Apparel Retail":"服装零售","Apparel, Accessories & Luxury Goods":"服装、配饰和奢侈品","Application Software":"应用软件","Asset Management & Custody Banks":"资产管理和托管银行","Auto Components":"汽车部件","Auto Parts & Equipment":"汽车零件和设备","Automobile Manufacturers":"汽车制造商",Automobiles:"汽车","Automotive Retail":"汽车零售",Banks:"银行",Beverages:"饮料",Biotechnology:"生物技术",Brewers:"酿酒厂",Broadcasting:"广播电视","Browse Categories":"浏览所有类别","Building Products":"建筑产品","Cable & Satellite":"有线电视和卫星电视","Capital Markets":"资本市场","Cash-Settled Futures":"现金结算期货","Casinos & Gaming":"赌场和游戏",Categories:"类别",Chemicals:"化学品","Coal & Consumable Fuels":"煤炭和消耗性燃料","Commercial Printing":"商业印刷","Commercial Services & Supplies":"商业服务和用品","Commission Free ETFs":"免佣金ETF","Commodity Chemicals":"日用化学品","Communication Services":"通信服务","Communications Equipment":"通信设备","Company Profile":"公司概况","Computer & Electronics Retail":"电脑及电子产品零售","Construction & Engineering":"建筑与工程","Construction Machinery & Heavy Trucks":"工程机械和重型卡车","Construction Materials":"建筑材料","Consumer Discretionary":"非必需消费品","Consumer Electronics":"消费电子产品","Consumer Finance":"消费金融服务","Consumer Staples":"消费必需品","Containers & Packaging":"容器和包装",Copper:"铜","Daily report: Social activity":"每天报告: 社交热门股","Data Processing & Outsourced Services":"数据处理和外包服务","Department Stores":"百货公司","DEEP AND WIDE":"深宽策略","Distillers & Vintners":"酒业公司",Distributors:"分销商","Diversified Banks":"多元银行","Diversified Capital Markets":"多元资本市场","Diversified Chemicals":"多元化学品","Diversified Consumer Services":"多元消费服务","Diversified Financial Services":"多元金融服务","Diversified Metals & Mining":"多元化金属与矿业","Diversified Real Estate Activities":"多元房地产活动","Diversified REITs":"多元房地产投资信托（REITs）","Diversified Support Services":"多元支持服务","Diversified Telecommunication Services":"多元电信服务","DOUBLE DIAGONAL":"双对角策略","Double Long ETFs":"双倍杠杆多头ETF","Double Short ETFs":"双倍杠杆空头ETF","DOW JONES INDUSTRIAL AVERAGE":"道琼斯工业平均指数","Drug Retail":"药品零售","Economic Indicators":"经济指标","Education Services":"教育服务","Electric Utilities":"电力公司","Electrical Components & Equipment":"电气元件和设备","Electrical Equipment":"电气设备","Electronic Components":"电子组件","Electronic Equipment & Instruments":"电子设备和仪器","Electronic Equipment, Instruments & Components":"电子设备、仪器和组件","Electronic Manufacturing Services":"电子制造服务","Energy Equipment & Services":"能源设备及服务",Energy:"能源",Entertainment:"娱乐","Environmental & Facilities Services":"环境和设施服务","Equity Real Estate Investment Trusts (REITs)":"股权房地产投资信托（REITs）","ETN's and Closed-End Funds":"ETN和封闭式基金","European-Style Indices":"欧式指数","Fertilizers & Agricultural Chemicals":"肥料和农用化学品","Financial Exchanges & Data":"金融交易所和数据",Financials:"金融","Food & Staples Retailing":"食品和家常用品零售","Food Distributors":"食品经销商","Food Products":"食品","Food Retail":"食品零售",Footwear:"鞋类产品","Forest Products":"林木产品","Full Session Options":"全时段交易期权",FUTURES:"期货","FX Non-Commission Pairs":"无佣金外汇货币对","FX Non-commission Pairs":"无佣金外汇货币对",FX:"外汇","Gap Down":"跳空下跌","Gap Up":"跳空上漲","Gas Utilities":"燃气公司","General Merchandise Stores":"百货商店",Gold:"黄金","Health Care Distributors":"医疗分销商","Health Care Equipment & Supplies":"医疗设备和用品","Health Care Equipment":"医疗设备","Health Care Facilities":"医疗设施","Health Care Providers & Services":"医疗提供者和服务","Health Care REITs":"医疗房地产投资信托(REITs)","Health Care Services":"医疗服务","Health Care Supplies":"医疗用品","Health Care Technology":"医疗技术","Health Care":"医疗保健","Heavy Electrical Equipment":"重型电气设备","Highways & Railtracks":"公路和铁路","Home Furnishings":"居家装饰产品","Home Improvement Retail":"家居装修零售",Homebuilding:"住宅建筑","Homefurnishing Retail":"家居装饰品零售","Hotel & Resort REITs":"酒店及度假村房地产投资信托（REITs）","Hotels, Resorts & Cruise Lines":"酒店、度假村和游轮公司","Hotels, Restaurants & Leisure":"酒店、餐厅和休闲","Hourly report: Social activity":"每小时报告: 社交热门股","Household Appliances":"家用电器","Household Durables":"家用耐用品","Household Products":"家用产品","Housewares & Specialties":"家庭用品和特殊产品","Human Resource & Employment Services":"人力资源和就业服务","Hypermarkets & Super Centers":"大卖场和超市","Independent Power and Renewable Electricity Producers":"独立电力和可再生能源发电商","Independent Power Producers & Energy Traders":"独立发电商和能源贸易商",INDICATORS:"指标",INDICES:"指数","Industrial Conglomerates":"工业集团","Industrial Gases":"工业气体","Industrial Machinery":"工业机械","Industrial REITs":"工业房地产投资信托（REITs）",Industrials:"工业",Industry:"产业",INDUSTRY:"产业","Information Technology":"信息技术","Insurance Brokers":"保险经纪",Insurance:"保险","Integrated Oil & Gas":"石油天然气综合产业","Integrated Telecommunication Services":"综合电信服务","Interactive Home Entertainment":"互动家庭娱乐","Interactive Media & Services":"互动媒体和服务","Interest Rates":"利率","Internals & Indicators":"大盘指数及指标","International Indices":"国际指数","Internet & Direct Marketing Retail":"互联网和直销零售","Internet Services & Infrastructure":"互联网服务和基础设施","Investment Banking & Brokerage":"投行和经纪服务","IT Consulting & Other Services":"IT咨询和其他服务","IT Services":"IT服务","Key Leaders":"Key Leaders列表","Leisure Facilities":"休闲设施","Leisure Products":"休闲产品","Life & Health Insurance":"人寿和健康保险","Life Sciences Tools & Services":"生命科学工具和服务","Lovers and Losers":"升级和降级",Machinery:"机械设备","Managed Health Care":"管理医疗保健","Marine Ports & Services":"海运港口和服务",Marine:"海运","Market Maker Move Stocks":"做市商变动股票",Materials:"材料",Media:"媒体","Metal & Glass Containers":"金属和玻璃容器","Metals & Mining":"金属与采矿","MICRO FUTURES":"微型期货","Micro Futures":"微型期货","Mortgage Real Estate Investment Trusts (REITs)":"抵押房地产投资信托（REITs）","Mortgage REITs":"抵押房地产投资信托（REITs）","Motorcycle Manufacturers":"摩托车制造商","Movies & Entertainment":"电影和娱乐","Multi-line Insurance":"综合保险","Multi-Sector Holdings":"多行业控股公司","Multi-Utilities":"多源公用设施","Multiline Retail":"多阶层零售","NASDAQ 100":"纳斯达克100指数","NASDAQ COMP":"纳斯达克综合指数","New Yearly Highs":"年度新高","New Yearly Lows":"年度新低","NYSE AMEX":"纽交所美交所指数",NYSE:"纽交所指数","Office REITs":"办公房地产投资信托（REITs）","Office Services & Supplies":"办公服务和用品","Oil & Gas Drilling":"石油天然气钻探","Oil & Gas Equipment & Services":"石油天然气设备及服务","Oil & Gas Exploration & Production":"石油天然气勘探与生产","Oil & Gas Refining & Marketing":"石油和天然气精炼和销售","Oil & Gas Storage & Transportation":"石油天然气储运","Oil, Gas & Consumable Fuels":"石油、天然气和消耗性燃料","Other Diversified Financial Services":"其他多元化金融服务","Packaged Foods & Meats":"包装食品和肉类","Paper & Forest Products":"纸和林木产品","Paper Packaging":"纸包装","Paper Products":"纸产品","Penny Increment Options":"美分递增期权","Personal Products":"个人用品","Personal Watchlists":"个人观察列表",Pharmaceuticals:"制药","Physically-Settled Futures":"实物结算期货","Post-market Movers":"盘后推手","Pre-market Movers":"盘前推手","Precious Metals & Minerals":"贵金属和矿物","Preferred Stocks":"优先股","Professional Services":"专业服务","Property & Casualty Insurance":"财产及意外保险",Public:"公共",Publishing:"出版",Railroads:"铁路","Real Estate Development":"房地产开发","Real Estate Management & Development":"房地产管理与开发","Real Estate Operating Companies":"房地产运营公司","Real Estate Services":"房地产服务","Real Estate":"房地产","Regional Banks":"地区银行",Reinsurance:"再保险",REITs:"房地产投资信托(REIT)","Renewable Electricity":"可再生电力","Research & Consulting Services":"研究与咨询服务","Residential REITs":"住宅房地产投资信托(REITs)",Restaurants:"餐厅","Retail REITs":"零售房地产投资信托(REITs)","Road & Rail":"公路和铁路","Russell 1000":"罗素1000指数","Russell 2000":"罗素2000指数","Russell 3000":"罗素3000指数","Russell Indices":"罗素指数","Russell MicroCap":"罗素微型公司指数","Russell MidCap":"罗素中型公司指数","S&P 100":"标普100指数","S&P 400":"标普400指数","S&P 500 Sector Indices":"标普500行业指数","S&P 500 Sector Indicies":"标普500行业指数","S&P 500 Sectors & Industries":"标普500行业产业","S&P 500 Sectors and Industries":"标普500行业产业","S&P 500":"标普500指数","S&P 600":"标普600指数","Scheduled Earnings Next 5 Days":"计划未来5日收益发布","Security & Alarm Services":"安全和报警服务","Semiconductor Equipment":"所有信息技术","Semiconductors & Semiconductor Equipment":"半导体和半导体设备",Semiconductors:"半导体","Shadow Trader":"Shadow Trader影子交易者列表","ShadowTrader Core Sectors":"ShadowTrader核心行业",Silver:"银","Soft Drinks":"软饮料",Software:"软件","Specialized Consumer Services":"专业消费服务","Specialized Finance":"专业金融服务","Specialized REITs":"专用房地产投资信托(REITs)","Specialty Chemicals":"特种化学品","Specialty Retail":"专卖零售","Specialty Stores":"专卖店",Steel:"钢","Swim Lessons":"Swim Lessons列表","Systems Software":"系统软件","TD Ameritrade Network":"TD Ameritrade Network电视频道列表","TDA Ad Challenge - Top 8":"TDA Ad Challenge - 8大股票","Technology Distributors":"技术分销商","Technology Hardware, Storage & Peripherals":"技术硬件、存储和配件","Tentative Earnings Next 5 Days":"预计未来5日收益发布",Textiles:"纺织品","Textiles, Apparel & Luxury Goods":"纺织品、服装和奢侈品","thinkorswim Challenge":"thinkorswim挑战赛列表","Thrifts & Mortgage Finance":"储蓄和抵押放贷","Tires & Rubber":"轮胎和橡胶",Tobacco:"烟草","Top 10's":"十大列表","Top10 % Gain NASDAQ":"纳斯达克10大百分比上涨股","Top10 % Gain NYSE":"纽交所10大百分比上涨股","Top10 % Loss NASDAQ":"纳斯达克10大百分比下跌股","Top10 % Loss NYSE":"纽交所10大百分比下跌股","Top10 Active NASDAQ":"纳斯达克10大活跃股","Top10 Active NYSE":"纽交所10大活跃股","Top10 Net Gain NASDAQ":"纳斯达克10大净盈股","Top10 Net Gain NYSE":"纽交所10大净盈股","Top10 Net Loss NASDAQ":"纳斯达克10大净亏股","Top10 Net Loss NYSE":"纽交所10大净亏股","Top10 Sizzling Stocks":"10大热门股","Top10 Volatility Increase":"10大波动增涨股","Trading Companies & Distributors":"贸易公司和分销商","Trading Competition":"交易竞赛列表","Transportation Infrastructure":"交通基础设施","Triple Leveraged ETFs":"三倍杠杆ETF",Trucking:"卡车运输","Upcoming Dividends":"即将派发股息","Upcoming Earnings":"即将发布收益","Upcoming Splits":"即将分股",Utilities:"公用设施","Water Utilities":"供水公司","Weekly report: Social activity":"每周报告: 社交热门股",Weeklys:"周期权","Wireless Telecommunication Services":"无线电信服务"},Scans:{"A metric that compares today's option volume with the average option volume over the last five days.":"将今日的期权成交量与过去五天的期权平均成交量进行比较的指标。","A metric that compares today's volume of call options with the average volume of call options over the last five days.":"将今日的买权成交量与过去五天的买权平均成交量进行比较的指标。","A metric that compares today's volume of put options with the average volume of put options over the last five days.":"将今日的卖权成交量与过去五天的卖权平均成交量进行比较的指标。","A metric that shows how volatile the symbol is compared to the general market. Symbols with beta greater than 1.0 are more volatile than the market, those with beta less than 1.0 are less volatile. Symbols with beta equal to 1.0 are as the volatile as the general market is. Negative beta indicates inverse relation to the market.":"显示股票代号与一般市场相比的波动程度的指标。Beta值大于1.0的股票代号比市场的波动性大，Beta值小于1.0的股票代号比市场波动性小。Beta值等于1.0的代号与一般市场的波动性一样。负的Beta值表示与市场呈反向关系。",Active:"活跃扫描","Add a Filter":"添加筛选","All Filters":"所有筛选","All Funds":"全部基金","All Futures":"全部期货","All FX Commission Pairs":"全部有佣金外汇对","All FX Non-commission Pairs":"全部无佣金外汇对","All Indices":"全部指数","All Listed Stocks":"全部上市股票","All NASDAQ Stocks":"全部NASDAQ股票","All NYSE Stocks":"全部NYSE股票","All Optionable":"全部有期权证券","All OTC Stocks":"全部OTC股票","All Stocks":"全部股票","All Symbols":"全部代号","Back volatility is the implied volatility of the option series with the second closest expiration date.":"远期波动率是离到期日第二近的期权系列的隐含波动率。","Clear Filters":"清除筛选",Close:"收盘价",Filter:"筛选条件",Filters:"筛选条件","For futures, single options, and stock, mark price is the last price bounded by bid and ask. For other securities, it is the arithmetic mean of bid and ask.":"对于期货、单一期权和股票，市价是以买方价和卖方价为限的最新价格。对于其他证券，它是买方价和卖方价的算术平均值","Front volatility is the implied volatility of the option series with the closest expiration date.":"近期波动率是到期日最近的期权系列的隐含波动率。","Fundamental Filters":"基本面筛选条件","Market Maker Move indicates the expected magnitude of an upcoming move based on the implied volatility.":"做市商变动表示基于隐含波动率的预期变动的幅度。",match:"匹配结果",matches:"匹配结果",Max:"最大",Min:"最小",Open:"开盘价","Price to Earnings Ratio, the last price divided by the corresponding symbol’s EPS (earnings per share).":"市盈率，以最新的价格除以相应代号股票的EPS（每股收益）。",Reset:"重设",Results:"结果","Saved as ":"保存为 ",Saved:"保存扫描","Scan In:":"扫描",Scan:"扫描",Scans:"扫描","Stock Filters":"股票筛选条件","The amount of a company’s dividends divided by last price.":"公司的股息数额除以最新价格。","The amount of a security that a buyer is willing to buy at the bid price.":"买方愿意以买方出价购买的证券的数量。","The amount of security that a seller is willing to sell at the ask price.":"卖方愿意以卖方要价出售的证券数量。","The amount of security traded in the last trade.":"最新交易中的证券成交量。","The CBOE® Volatility Index®, a metric that helps estimate the volatility of certain commodities and currency pairs. It takes into account the pricing of each option on an underlying to estimate the market's expectation of that underlying's volatility.":"CBOE®波动率指数®，是一种帮助估计某些商品和货币对的波动率的指标。它会考虑标的物每个期权的定价，以估计市场对该标的物的预期波动。","The difference between the back and the front volatility weighted by the time till expiration.":"按照距到期时间进行加权的远期和近期的波动率之间的差异。","The difference between the back and the front volatility. Front volatility is the implied volatility of the option series with the closest expiration, and back volatility is that of the option series with the second closest expiration.":"远期波动率和近期波动率之间的差异。近期波动率是到期日最近的期权系列的隐含波动率，而远期波动率是离到期日第二近的期权系列的隐含波动率。","The difference between the last trade price and the close price.":"最新成交价格和收盘价格之间的差额。","The diluted earnings per share value published in the company’s report.":"公司财报中公布的稀释后的每股收益值。","The highest price reached during the specified time period.":"在特定时间段内达到的最高价格。","The highest price that a buyer is willing to pay for a security.":"买方愿意为一个证券支付的最高价格。","The lowest price reached during the specified time period.":"在特定时间段内达到的最低价格。","The lowest price that a seller is willing to accept for a security.":"卖方愿意接受的证券最低出售价格。","The number of outstanding shares of the corresponding company.":"相应公司的流通股数量。","The number of shares/contracts of the corresponding symbol traded during the day.":"相应代号的股票/合约的当日成交数量。","The price of the final trade during the regular trading session.":"正常交易时段的最后一笔成交价格。","The price of the first trade during the regular trading session.":"正常交易时段的第一笔成交的价格。","The price of the most recent transaction.":"最新成交的价格。","The ratio of the net change to the close price, in percent.":"以百分比表示的净变化与收盘价的比率。","The total market value of all of the company's outstanding shares, calculated as the last trade price multiplied by the number of outstanding shares of the corresponding company":"公司所有流通股的总市值，按最后成交价格乘以相应公司的流通股数量计算得出。","The total number of traded put options divided by the total number of traded call options with the same underlying.":"同一标的证券的卖权总成交量除以买权总成交量。","There are no results based on your criteria. Please adjust your filters and try again.":"没有符合您筛选条件的结果。请调整您的筛选条件重新再试。","Type a name":"输入一个名字","You do not have any saved scans":"您没有任何已保存的扫描"}},TH="高于",yH="高于",CH="高于",bH="累积派发指标",EH="累积派发压量",AH="提交",vH="账户",IH="实际",xH="活跃",wH="交易活动",OH="AD",RH="警示",DH="警示",LH="所有",_H="替代",NH="上午结算",PH="盘前",kH="数量",MH="和",$H="并且",jH="每年",BH="应用",FH="四月",HH="区域图",UH="卖方量",VH="卖方价",WH="卖方价",GH="卖方价",YH="八月",qH="平均",KH="移动平均",zH="移动平均",XH="避免",QH="B(十亿)",ZH="反向比率",JH="反向比率",eU="频带",tU="带宽",sU="柱条图",nU="基价",rU="基点",oU="BB",aU="看跌",iU="低于",lU="低于",cU="低于",dU="贝塔系数",uU="买方价",hU="买方价",pU="买方价",mU="债券",gU="浏览器",SU="买方量",fU="凸起",TU="看涨",yU="蝶式策略",CU="蝶式策略",bU="买入",EU="买入",AU="买权",vU="日历策略",IU="日历策略",xU="买权",wU="买权",OU="买权",RU="买权",DU="取消",LU="取消订单",_U="取消订单",NU="取消订单",PU="取消订单",kU="蜡烛图",MU="现金",$U="类别",jU="蔡金摆动指标",BU="图表",FU="收",HU="收盘",UU="CMF",VU="收缩",WU="领子策略",GU="领子策略",YU="颜色",qU="混合策略",KU="混合策略",zU="比较",XU="比较",QU="比较-百分比",ZU="鹰式策略",JU="鹰式策略",eV="已连接",tV="连接中",sV="继续",nV="已拷贝",rV="复制",oV="COSC",aV="成本",iV="持保买权",lV="持保股票",cV="收入",dV="当前报价",uV="自定义",hV="自定义订单",pV="CVI",mV="天",gV="天",SV="每日",fV="深色",TV="数据",yV="数据",CV="天",bV="天",EV="当天",AV="天",vV="支出",IV="十二月",xV="下跌",wV="延迟",OV="删除",RV="被删除",DV="交付",LV="说明",_V="说明",NV="偏差",PV="对角策略",kV="对角策略",MV="差",$V="免责声明",jV="披露声明",BV="已断连",FV="前后移位",HV="股息",UV="股息",VV="需求指数",WV="十字星图",GV="下行",YV="概率曲线下部",qV="下行移动",KV="起草订单",zV="距到期天数",XV="收益报告",QV="编辑",ZV="编辑",JV="投资教育",eW="电邮",tW="英文",sW="EOM",nW="每股收益",rW="预估",oW="易借股",aW="欧式期权",iW="交易所",lW="交易所",cW="展开",dW="到期",uW="到期日",hW="已过期",pW="已过期",mW="到期日",gW="指数移动平均(EMA)",SW="外在价值",fW="外在价值",TW="因素",yW="否",CW="快线",bW="二月",EW="意见反馈",AW="成交订单",vW="成交订单",IW="成交订单",xW="平仓",wW="外汇",OW="周五",RW="周五",DW="转自",LW="基金",_W="基本面",NW="期货",PW="期货",kW="盈",MW="网格",$W="取消前有效(GTC)",jW="平均K线",BW="50%水平线",FW="高",HW="高",UW="直方图",VW="历史波动率",WW="高低波动",GW="持有",YW="小时",qW="小时",KW="小时",zW="难借股",XW="HULL移动平均(HMA)",QW="历史波动率",ZW="隐含波动率",JW="隐含波动率",eG="上涨",tG="产业",sG="中级",nG="内在价值",rG="内在价值",oG="铁鹰策略",aG="在价内",iG="隐含波动率",lG="一月",cG="七月",dG="六月",uG="K系数",hG="克林格摆动指标",pG="语言",mG="最新价",gG="最新价",SG="下行带1",fG="下行带2",TG="长度",yG="长度",CG="水平线",bG="浅色",EG="限价",AG="线条图",vG="线性",IG="收盘限价(LOC）",xG="登出",wG="买入",OG="低",RG="低",DG="下行",LG="下行通道",_G="下行线",NG="下行线",PG="线性回归",kG="线性回归逆转",MG="线性回归斜率",$G="最后交易日",jG="M(百万)",BG="移动平均",FG="MACD",HG="三月",UG="中间价",VG="中间价",WG="中间价",GG="市价",YG="市场情绪指标",qG="最长",KG="五月",zG="麦克林指标(MCL)",XG="菜单",QG="中",ZG="中频带",JG="中线",eY="LR中行线",tY="中行线",sY="中点",nY="分钟",rY="分钟",oY="分钟",aY="市价",iY="做市商行动",lY="收盘市价(MOC)",cY="模式",dY="动量指标",uY="周一",hY="周一",pY="资金流量指标(MFI)",mY="月",gY="月",SY="每月",fY="更多",TY="我的",yY="布林变数",CY="接近",bY="近期",EY="中性水平",AY="肯特纳变数",vY="否",IY="否",xY="正态",wY="正态封顶价格过滤器",OY="通知",RY="十一月",DY="非借股",LY="NVI",_Y="OBV",NY="OCO订单",PY="十月",kY="关闭",MY="于",$Y="开启",jY="开",BY="开盘",FY="未平仓合约",HY="期权",UY="期权",VY="期权",WY="或",GY="其它",YY="优异",qY="超买",KY="超买",zY="超卖",XY="超卖",QY="卖权",ZY="配对订单",JY="转向标准",eq="密码",tq="市盈率",sq="百分比变化",nq="时间段",rq="个人",oq="极化分型效率",aq="百分比高点警示",iq="转折高点",lq="转折低点",cq="百分比低点警示",dq="下午结算",uq="盘后",hq="投资组合",pq="仓位",mq="仓位",gq="轴心点",Sq="价格",fq="价格",Tq="价格摆动",yq="个人设置",Cq="卖权",bq="卖权",Eq="卖权",Aq="卖权",vq="PVI",Iq="PVT",xq="数量",wq="数量",Oq="商数",Rq="阻力点1",Dq="阻力点2",Lq="利率",_q="实时",Nq="被拒订单",Pq="被拒订单",kq="代替",Mq="重设",$q="收入",jq="查核订单",Bq="资本回报",Fq="风险回报",Hq="RSI",Uq="R平方",Vq="支撑点1",Wq="支撑点2",Gq="周六",Yq="周六",qq="保存",Kq="扫描",zq="秒",Xq="秒",Qq="个已选",Zq="卖出",Jq="卖出",eK="发送",tK="九月",sK="设置",nK="结算",rK="股份",oK="市场方",aK="信号",iK="信号",lK="简单移动平均(SMA)",cK="单支",dK="单支订单",uK="成交量",hK="滑动杆",pK="慢线",mK="价差策略",gK="平方",SK="挤压",fK="擠牌警示",TK="状态",yK="标准差",CK="快速随机指标",bK="慢速随机指标",EK="股票",AK="股票",vK="股票",IK="止损",xK="止损限价",wK="止损",OK="跨式策略",RK="跨式策略",DK="勒式策略",LK="勒式策略",_K="策略",NK="执行价",PK="行使价",kK="提交",MK="小计",$K="总结",jK="综合指标",BK="周日",FK="周日",HK="客户服务",UK="代号",VK="T(万亿)",WK="然后",GK="阙值",YK="周四",qK="周四",KK="跳价",zK="有效期",XK="时间",QK="趋势噪音平衡",ZK="转入",JK="当天",ez="当天",tz="总计",sz="总计",nz="交易",rz="的交易",oz="跟踪止损",az="跟踪止损限价",iz="已激活",lz="触发线",cz="跟踪止损",dz="跟踪止损限价",uz="是",hz="周二",pz="周二",mz="TVI",gz="上行带1",Sz="上行带2",fz="溃疡分布",Tz="不可用",yz="非平衡策略",Cz="底层证券",bz="不佳",Ez="撤消",Az="100%水平线",vz="未选",Iz="上行",xz="上下行差异",wz="上行",Oz="上行通道",Rz="上行线",Dz="上行线",Lz="概率曲线上部",_z="上行移动",Nz="用户名",Pz="数值",kz="垂直滚仓",Mz="垂直策略",$z="垂直策略",jz="成交流量指标",Bz="十字过滤线",Fz="查看",Hz="变异平均线",Uz="成交量",Vz="波动转换",Wz="平均成交量",Gz="成交量变动率",Yz="波动率标准差",qz="成交量",Kz="成交量",zz="成交量震荡指标",Xz="成交量加权平均价格(VWAP)",Qz="观察列表",Zz="波1",Jz="波2高点",eX="波2低点",tX="周三",sX="周三",nX="周",rX="周",oX="平日",aX="每周",iX="周期权",lX="加权移动平均(WMA)",cX="当",dX="WILDERS移动平均(WS)",uX="尚待执行订单",hX="尚待执行订单",pX="尚待执行订单",mX="年",gX="是",SX="是",fX="收益率",TX="零线",yX="转折趋势$",CX={__locale:SH,__Namespace:fH," ":""," through ":"至"," to ":"午","# Shares":"# 股数","$ Dollars":"$ 美元","$.params.<?>: `limitPrice` cannot be null for the chosen order type":"所选的订单类型限价不可以是空值","% Percent":"% 百分比","(800) 669-3900":"(800) 669-3900","(actual)":"实际","(est)":"预估","(H+L)/2":"(高+低)/2","(H+L+C)/3":"(高+低+收)/3","(O+H+L+C)/4":"(开+高+低+收)/4",". Trade Price Below the Bid":"。低于买方价的交易价",".":"。","1 Day":"1天","1 Year":"1年","1-877-888-1238":"中文服务：1-877-888-1238","1D":"1天","1h":"1小时","1M":"1个月","1st trgs 2 OCO":"订单1激活2个OCO订单","1st trgs 3 OCO":"订单1激活3个OCO订单","1st trgs All":"订单1激活所有订单","1st trgs OCO":"订单1激活OCO订单","1st trgs Seq":"订单1序列激活下个订单","1W":"1周","1Y":"1年","2 Day":"2天","2 Hour":"2小时","2 Week":"2周","2D":"2天","2h":"2小时","3 Month":"3个月","3M":"3个月","4 Hour":"4小时","4h":"4小时","5 Day":"5天","5 Minute":"5分钟","5 Year":"5年","5D":"5天","5m":"5分钟","5Y":"5年","6 Month":"6个月","6M":"6个月","10 Day":"10天","10D":"10天","20 Day":"20天","20 Year":"20年","20D":"20天","20Y":"20年","30 Minute":"30分钟","30m":"30分钟","50-Day Avg. Volume":"50日平均成交量","52 week high":"52周高","52 week low":"52周低","52High":"52周高","52Low":"52周低","@ASK":"@卖方价","@BID":"@买方价","@MKT":"@市价","About This Website":"关于本网站",ABOVE:TH,Above:yH,above:CH,"Absolute Reversal":"逆转绝对值",AccDist:bH,AccDistVolPr:EH,"Acceleration Bands":"加速带","Acceleration Factor":"加速因子","Acceleration Limit":"加速因子上限","Accept All Disclosures":"同意所有披露声明","Account History":"账户历史","Account Summary":"账户总结","Account Value":"账户价值",account:AH,Account:vH,act:IH,"Activation Price":"激活价格","Active Trader":"活跃交易",Active:xH,Activity:wH,"Actual Earnings Per Share":"实际每股收益",AD:OH,"Add 5 strikes above":"添加上面的5个行使价","Add 5 strikes below":"添加下面的5个行使价","Add Cash":"注资","Add Left Extension":"添加左延伸","Add Right Extension":"添加右延伸","Add Study":"添加研究","Add Symbol To Watchlist":"给观察列表添加代号","Add to Watchlist":"添加至观察列表","Added to":"添加到","Additional Forex execution data available by request by contacting the Trade Desk":"如需更多外汇执行数据，请联络交易台","Adjusting account balance was not successful. Please try again.":"调整账户余额没有成功。请再试一次。","Advanced Orders":"高级订单","After Market":"盘后","Aggregation Period":"汇总时期","Alert Line":"警示线",Alert:RH,Alerts:DH,"All Account Positions":"所有账户仓位","All Account Trades":"所有账户交易","All Accounts":"所有账户",All:LH,Alternate:_H,AM:NH,am:PH,Amount:kH,"An error has occurred":"出现错误","An error occurred. Please try again.":"发生错误。 请再试一次。","Analyst Reports":"分析师报告","Analyst Reports: Coming Soon!":"分析师报告:即将发布!",And:MH,AND:$H,Annual:jH,"Apply Persons Levels Filter":"应用Persons水平过滤器",Apply:BH,Apr:FH,"Are you sure you wish to leave?":"您确定要离开吗？","Area Negative":"负区域","Area Positive":"正区域",AREA:HH,"As of":"截止",AS:UH,"Ask Size":"卖方量","Ask size: ":"卖方量：","ASK {{trigger}} is not allowed in order conditions because market centers can report arbitrarily high ASK.":"不允许“卖方价 {{trigger}} ”订单条件，因为市场中心可以报告因套利导致的高卖方价。",ASK:VH,Ask:WH,ask:GH,"Ask, ":"卖方价，","Ask:":"卖方价：","AT OR ABOVE":"等于或高于","AT OR BELOW":"等于或低于","Atr Length":"ATR时间长度","Atr Reversal":"ATR逆转系数","Audio Notifications Toggle":"音频通知切换","Audio Notifications":"音频通知",Aug:YH,"Auto Send":"自动发送","Auto-Logout":"自动登出","Available Buttons":"可用按钮","Available Columns":"可选项目","Average Length":"平均长度","Average Type":"移动平均类型",average:qH,Average:KH,"Avg Trade Price":"平均交易价格",Avg:zH,Avoid:XH,B:QH,"Back to Column Customization":"返回序列自定义","Back to Studies":"返回研究","Back to Tool Selection":"返回工具选择","Back Vol":"后月波动率","back vol":"后月波动率","Back Volatility":"后月波动率","BACK/RATIO":"反向/比率","Back/Ratio":"反向/比率",BACKRATIO:ZH,Backratio:JH,Band:eU,Bandwidth:tU,"Bar Plus":"正价格柱",BAR:sU,BASE:nU,Basis:rU,BB:oU,Bearish:aU,"Before Market":"盘前","Begin Date":"开始日期","Begin Time":"开始时间",Below:iU,below:lU,BELOW:cU,Beta:dU,"Between the market":"在买方价/卖方价之间交易","Bid Size":"买方量","Bid size: ":"买方量：","BID {{trigger}} is not allowed in order conditions because market centers can report arbitrarily low BID.":"不允许“买方价 {{trigger}} ”订单条件，因为市场中心可以报告因套利导致的低买方价。",BID:uU,Bid:hU,bid:pU,"Bid, ":"买方价，","Bid:":"买方价：","Big Point Value":"整点价值","Blast All":"全部发送","Bollinger Bands":"布林轨道(BB)","Bond Trade":"债券交易",Bond:mU,"Book Value Per Share Growth":"每股账面价值增长","Book Value Per Share":"每股账面价值","Border Down":"下跌边框","Border Up":"上涨边框","Borrow %":"借股费率%","BP Effect":"购买力影响","Browser Version":"浏览器版本",Browser:gU,BS:SU,"Bulge Length":"凸起长度",Bulge:fU,Bullish:TU,BUTTERFLY:yU,Butterfly:CU,"Buy @ASK":"买入@卖方价","Buy @BID":"买入@买方价","Buy @MKT":"买入@市价",BUY:bU,Buy:EU,"Buying Power Effect":"购买力影响","Buying Power":"购买力",C:AU,"Calculation Mode":"计算模式",CALENDAR:vU,Calendar:IU,"Call Volume Index":"买权成交量指数",CALL:xU,Call:wU,call:OU,Calls:RU,"Can not send screenshot":"无法发送截图","CANCEL AT":"取消于","Cancel Selected":"取消所选","CANCEL WHEN":"取消当","Cancel {{number}} Orders":"取消{{number}}个订单",Cancel:DU,CANCELED:LU,Canceled:_U,canceled:NU,Cancelled:PU,CANDLE:kU,"Cannot cancel order":"无法取消订单。","Cannot find this spread.":"找不到此價差。","Cannot replace with the order on the different BUY/SELL side.":"不能以不同的买卖方来更替订单","Cash Flow Per Share":"每股现金流",Cash:MU,Categories:$U,"Centered On":"居中",ChaikinOsc:jU,"Changing of this watchlist is unavailable":"此观察列表尚不可更改","Charles Schwab Acquisition FAQs":"嘉信收购常见问答","Chart Detail":"图表详细","Chart High/Low":"图表 高/低","Chart Range":"图表范围","Chart Settings":"图表设置",Charts:BU,"Clear All":"清除所有","Click “Symbol” below to add a symbol to your watchlist":"点击以下“代号”来为观察列表添加代号","Clients are unable to place a Market Order on an Opening Transaction for OTCBBN securities.":"客户不可以下布告栏证券(OTCBBN)的市价开仓订单。","Clients are unable to place Short Sells for OTCBB Securities.":"客户不可以卖空布告栏 (OTCBB) 证券。","Clients are unable to place Short Sells for OTCBBN Securities.":"客户不可以卖空布告栏 (OTCBB) 证券。","Close Active Trader Settings Menu":"关闭活跃交易设置菜单","Close Add Study Menu":"关闭添加研究菜单","Close Chart Settings Menu":"关闭图表设置菜单","Close Drawings Menu":"关闭绘图菜单","close price":"收盘价","Close Selected":"平仓所选仓位",Close:FU,CLOSE:HU,CMF:UU,Collapsed:VU,"COLLAR WITH STOCK":"領子策略與股票",COLLAR:WU,Collar:GU,"COLLAR/SYNTHETIC":"领子/合成策略","Color as symbol ticks":"当代号跳价时涂色","Color Mode":"色调","Color Norm Length":"颜色正常长度",Color:YU,"Column configuration drawer expanded":"栏目配置屉已展开","Column Drawer":"栏目屉","COMBINED ACCOUNT":"综合账户",COMBO:qU,Combo:KU,"Commission based FX contracts are different from non-commission FX contracts, they do not offset each other.":"佣金外汇合约与非佣金外汇合约有所不同，它们彼此不会相互抵消。","Comp %":"比较%",Comp:zU,"Comparison - Percent":"比较-百分比",Comparison:XU,ComparisonPercent:QU,CONDOR:ZU,Condor:JU,Connected:eV,Connecting:tV,"Contact support":"请联系客户服务","contact us":"联系我们","Contingent Order":"触发订单",Continue:sV,"Copied!":"已复制",Copied:nV,"Copy Order URL":"复制订单URL","Copy to clipboard":"复制到剪贴板",Copy:rV,"Correction Factor":"矫正系数",COSC:oV,Cost:aV,"Couldn't find Instrument by ${dynamicField} ${dynamicField} null":"找不到产品 ${dynamicField} ${dynamicField} 无效 ","COVERED order may not have LOC type.":"持保订单不可以使用收盘限价(LOC)订单类型。","COVERED order may not have MOC type.":"持保订单不可以使用收盘市价(MOC)订单类型。","Covered Stock":"持保买权","Covered stocks trade in 100 share increments":"持保股票以100股为增量交易",COVERED:iV,Covered:lV,"Create Alert":"创建警示","Create Watchlist":"创建一个观察列表","Credit price on debit spread":"支出价差显示了入账",credit:cV,"Crossing Type":"交叉类型","Current Equity":"当前净资产","Current Price":"当前价格","Current Ratio":"流动比率",Current:dV,CUSTOM:uV,Custom:hV,"Customize Active Trader":"自定义活跃交易","Customize Columns":"自定义项目","Cutoff Length":"截止时间长度",CVI:pV,"D Period":"d时期",D:mV,d:gV,"Daily High":"当日最高","Daily Low":"当日最低",Daily:SV,Dark:fV,data:TV,Data:yV,"date format":"日期格式","Date Published":"发布日期",Date:"日期","DATE/TIME":"日期/时间","Day (13h)":"当天(13小时)","Day (24h)":"当天(24小时)","Day (AM)":"当天(盘前)","Day (EXT 13h)":"当天(延长时段13个小时)","Day (EXT AM)":"当天(盘前)","Day (EXT PM)":"当天(盘后)","Day (EXTO 24h)":"当天(隔夜延长时段24小时)","Day (PM)":"当天(盘后)","Day Gain $":"当天盈/亏$","Day Gain %":"当天盈/亏%","Day Trade Buying Power":"当日冲销购买力","Day Trades Left":"还剩当日冲销次数",DAY:CV,day:bV,Day:EV,"day(s)":"天","Days to Exp":"距到期日期","Days to Expiration":"距到期天数",days:AV,"DBL DIAG":"双对角策略","Dbl Diag":"双对角策略","Debit price on credit spread":"收入价差显示了出账",debit:vV,Dec:IV,Decreasing:xV,"Default Account":"默认账户","Default Order Quantity":"默认订单数量","Default Order Type":"默认订单类型","Delayed data":"延迟数据",Delayed:wV,"Delete ${Watchlist Name} scan query":"删除 ${Watchlist Name} 扫描查询","Delete ${Watchlist Name} watchlist":"删除 ${Watchlist Name} 观察列表","Delete Symbol":"删除代号",Delete:OV,deleted:RV,Deliverable:DV,"Delta Between":"Delta区间","Denoted in millions":"百万为单位",Desc:LV,Description:_V,Deviations:NV,DIAGONAL:PV,Diagonal:kV,"Diff Type":"差异类型",Diff:MV,Disclaimers:$V,Disclosures:jV,Disconnected:BV,"Displace Length":"置换长度",Displace:FV,"Div Amount":"股息金额","Dividend Amount":"股息金额","Dividend Payout Per Share":"每股派息","Dividend Payout":"股息支付","Dividend Yield":"股息收益率",Dividend:HV,"Dividends Table":"股息表",Dividends:UV,DMIndx:VV,Doji:WV,"Dollar amount must be above limit cost.":"美元金额必须高于限价成本","Dollar amount must be above the current limit price.":"美元金额必须高于当前限价","Dollar amount must be above the current market price.":"美元金额必须高于当前市价","Double Diagonal":"双对角策略",Down:GV,DownProbExp:YV,DownStep:qV,Draft:KV,"Drag and drop columns":"拖放栏目","Drag columns above to modify.":"拖拽上面的栏目来修改","Drawing Set Name":"绘图集名称","Drawing set with such name already exists":"已有该名称的绘图集",DTE:zV,"Due to potentially wide markets or liquidity risks at the time of activation, this order may be manually substituted with a limit order upon activation and worked until filled":"由于可能存在广泛的市场或流动性风险，该订单在激活时可能被手动替换为限价订单，直到成交为止。","During Market":"盘中","E.g. JohnDoe":"例如: JohnDoe","Earnings Per Share - TTM":"每股收益-TTM","Earnings Per Share":"每股收益","Earnings Table":"收益表",Earnings:XV,"Edit Selected":"编辑所选项目","Edit Study":"编辑研究","Edit Symbol Info":"编辑代号信息",Edit:QV,edit:ZV,Education:JV,"Eff Ratio Length":"效率比长度",Email:eW,English:tW,"Enter symbol to view chart":"输入代号查看图表","Entering this order will cancel your open working orders ({{orders}})":"输入这个订单将取消您的尚待执行订单 ({{orders}})",EOM:sW,EPS:nW,"Equity options":"股票期权",est:rW,"Estimated Cost of Trade":"预计交易成本","Estimated Earnings Per Share":"预估每股收益",ETB:oW,European:aW,"Ex Date":"除息日",EX:iW,"Ex-Dividend Date":"除息日",Exchange:lW,"Executing one more day trade (round trip), will restrict this account to closing transactions only because you do not have the minimum $25,000 equity to be permitted to be a pattern day trader. If you want to learn more, please go to the Learning Center and search “Pattern Day Trading”.":"作为惯性当日冲销客户，您账户的净资产不够最低要求的$25,000，如果再做一次当日冲销(一进一出），这个账户将被限制，届时只能做平仓交易。如要了解更多，请去学习中心搜索“惯性当日冲销交易(Pattern Day Trading)”。","Execution Price":"执行价格",Expanded:cW,Expiration:dW,expiration:uW,EXPIRED:hW,Expired:pW,expiry:mW,EXPONENTIAL:gW,"Ext Left":"左侧延伸","EXT PM order must be LIMIT order.":"盘后订单必须是限价单。","Ext Right":"右侧延伸","EXTENDED HOURS order must be LIMIT order.":"延长时段订单必须是限价单。","EXTENDED OVERNIGHT HOURS order must be LIMIT order.":"隔夜延长时段订单必须是限价单。",Extrinsic:SW,ExtVal:fW,Factor:TW,False:yW,"Fast Length":"快速长度",FastLine:CW,Feb:bW,Feedback:EW,"Fill Down":"下跌填充","Fill Up":"上涨填充",FILLED:AW,Filled:vW,filled:IW,"Financial Leverage (Assets/Equity)":"财务杠杆(资产/净资产)","Find a Study":"查找研究","Find a Symbol":"查找一个代号","First name":"名","First triggers 2 OCO":"订单1激活2个OCO订单","First triggers 3 OCO":"订单1激活3个OCO订单","First triggers All":"订单1激活所有订单","First triggers OCO":"订单1激活1个OCO订单","First triggers Seq":"订单1激活下一个","Fit Studies in Y-axis":"在价格轴上适合研究","Fixed Charge Coverage Ratio":"固定收费覆盖率",Flatten:xW,"Forex Buying Power Effect":"外汇购买力影响","Forex Buying Power":"外汇购买力","FOREX order must have positive limit price.":"外汇订单的限定价格必须是正数","FOREX order should have a quantity that is the multiple of forex lot size: 10000":"外汇订单的数量必须是一手的乘数：10000","Forex Trade":"外汇交易",Forex:wW,"Forgot Password":"忘记密码","Forgot User ID":"忘记用户名","Fractional quantities are not allowed for current user":"不允许当前用户交易非整数数量","Fractional quantities are not supported for {{symbol}}":"不支持{{symbol}}的分数股数","Free Cash Flow Per Share":"每股自由现金流",fri:OW,Friday:RW,From:DW,"Front Vol":"当月波动率","front vol":"当月波动率","Front Volatility":"当月波动率","Full Range":"全部范围","FullD Color":"FullD颜色","FullK Color":"FullK颜色","FUND is not allowed in order conditions because its price is not real-time.":"共同基金不允许附加订单条件，因为报价不是实时的。","FUND order must be MARKET or AMOUNT.":"基金订单必须是市价或金额","Fund Trade":"基金交易",Fund:LW,"Fundamentals coming soon!":"「基本面」即将推出！",Fundamentals:_W,"Fut Calendar":"期货日历","FUTURE order cannot be validated, because margin is not available. Please call thinkorswim trade desk.":"由于没有保证金信息，无法确认期货订单。请联系thinkorswim交易台。","FUTURE order must have positive limit price.":"期货订单的限定价格必须是正数","Future Trade":"期货交易",Future:NW,"Futures and futures options":"期货和期货期权","Futures Calendar":"期货日历","Futures options are not allowed on this account":"此账户不可做期货期权交易。",Futures:PW,"Gain %":"盈%%","gain at expiration":"到期盈利","Gain Per Tick":"每跳价盈亏","gain today":"当天盈利",Gain:kW,"Gain/Loss %":"盈/亏%","Gain/Loss Day $":"当天盈/亏$","Gain/Loss Day %":"当天盈/亏%","Gain/Loss Overall $":"总体盈/亏$","Gain/Loss Overall %":"总体盈/亏%","Gain/Loss Profile":"盈/亏概览","Gain/Loss YTD $":"年度至今盈/亏$","Gain/Loss YTD %":"年度至今盈/亏%","Gain/Loss":"盈/亏","gain/loss:":"盈/亏:","Global Trading Hours":"全球交易时段","Go to":"浏览",Grid:MW,"Gross Profit Margin":"毛利润率","GTC (13h)":"GTC(13小时)","GTC (24h)":"GTC(24小时)","GTC (EXT 13h)":"GTC(延长时段13个小时)","GTC (EXTO 24h)":"GTC(隔夜延长时段24小时)",GTC:$W,HADiff:jW,HalfLine:BW,"has been created successfully":"已被成功创建","has been submitted to":"订单已为账户","Hi Alert":"高点警示",HIGH:FW,High:HW,"High:":"高:",Histogram:UW,historical:VW,HLVolatility:WW,Hold:GW,"Hong Kong Office":"香港公司办公时间：",Hour:YW,hour:qW,hours:KW,HTB:zW,"HTB/ETB":"难借股/易借股",HULL:XW,HV:QW,"If balance is zero, please refresh browser to update.":"如果余额为零，请刷新浏览器进行更新。","If the problem persists, ":"如果仍有问题，","IMP VOLATILITY":"隐含波动率","Implied Volatility %":"隐含波动率%","Implied Volatility":"隐含波动率(IV)",implied:ZW,ImpVol:JW,Increasing:eG,"Index Monitor Settings":"指数监视设置",Industry:tG,"Initial Investment":"初始投资","Instrument {{instrument}} cannot be traded.":"{{instrument}}不可以交易。","Interest Rate - Estimated Average":"利率-平均估值",Intermediate:sG,Intrinsic:nG,IntVal:rG,"Invalid Price":"无效的价格","Invalid Spread":"无效价差","Inventory Turnover":"库存周转率","IRON CONDOR":"铁鹰策略","Iron Condor":"铁鹰策略","iron condor":"铁鹰策略",IRON_CONDOR:oG,"is above":"高于","is at or above":"等于或高于","is at or below":"等于或低于","is below":"低于","Is Cumulative":"累积的",ITM:aG,"IV Pctl":"IV百分比","IV Percentile":"IV百分位数",IV:iG,Jan:lG,July:cG,Jun:dG,"K Period":"k时期",K:uG,"Keep swimming":"继续留在thinkorswim",KVOsc:hG,"Language Selection":"语言选择",Language:pG,"Last name":"姓","Last Size":"最新量","Last Trade Date":"最后交易日",Last:mG,last:gG,LB1:SG,LB2:fG,"Lead Wave":"领先波","Learning Center":"学习中心","Leave thinkorswim":"离开thinkorswim",Length:TG,length:yG,"Level II":"二级报价",LevelLine:CG,Light:bG,"LIMIT order must have a price.":"限价单必须要输入一个价格。","Limit price exceeds strike-difference":"限价超过行使价差额","Limit price is too aggressive":"限价距市场太远",LIMIT:EG,"Lin Reg Length":"线性回归长度","Line Negative":"负值线","Line Positive":"正值线",LINE:AG,Linear:vG,"Live Support":"线上客服","LIVE TRADING DISCLAIMER":"真实交易免责声明","Live Trading":"真实交易","Lo Alert":"低点警示","Loading...":"正在加载…","LOC order may not be a part of OCO group.":"收盘限价(LOC)订单不可以是OCO订单组的一部分。","LOC order may not have cancel conditions.":"收盘限价单(LOC)不可以附加取消条件。","LOC order may not have conditions.":"收盘限价单(LOC)不可以附加条件。",LOC:IG,"Log in":"登入","Log Out":"登出","Log-in failed. Check your user ID and password. Try again or":"登入失败 检查您的用户名和密码。再试一次或者",Logout:xG,"Long Length":"慢速周期长度",Long:wG,"Long-term Debt to Capital":"长期债务资本比率","loss at expiration":"到期亏损","loss Today":"当天亏损",LOW:OG,Low:RG,"Low:":"低:",Lower:DG,LowerBand:LG,LowerLevel:_G,LowerLine:NG,LR:PG,LRR:kG,LRS:MG,LTD:$G,"M A C D Length":"MACD长度","M A C D Level":"MACD水平","M A Length":"MA长度",M:jG,MA:BG,"MACD Length":"MACD长度",MACD:FG,Mar:HG,"Margin Req":"维持保证金要求","Margin Req.":"保证金要求","Mark % Change":"中间价变化%","Mark Change":"中间价变化","Mark Chng $":"中间价变化$","Mark Chng %":"中间价变化%","Mark Chng":"中间价变化","Mark Price":"中间价",MARK:UG,Mark:VG,mark:WG,"Market Bell Toggle":"市场钟声切换","Market Cap $M":"市值 $百万","Market Cap / Common Equity Ratio":"市值/普通股比率","Market Cap":"市值","Market Maker Move":"做市商变动","Market open / close":"市场开盘/收盘","MARKET order may not have cancel conditions.":"市价单不可以附加取消条件。","MARKET order must have DAY time-in-force.":"市价单必须是当天单。","Market Value":"市场价值",MARKET:GG,MarketSentiment:YG,"Max Gain":"最大盈利","Max Loss and Profit does not reflect underlying price moves below $0. Actual Profits or Losses may be greater than displayed information.":"当底层证券的价格低于$0时，最大盈亏数值并不代表实际的盈亏。实际盈亏可能要大于所显示的信息。","Max Loss":"最大亏损","Max Volume Cut Off":"最大成交量截止周期",Max:qG,May:KG,McClellanOsc:zG,Menu:XG,"Mid price":"中间价","Middle Band":"中频带",Middle:QG,MiddleBand:ZG,MiddleLine:JG,MiddleLR:eY,MidLine:tY,MidPoint:sY,"Min Size":"最小数量","Min Swing":"最小价格波动","Min Tick Value":"最小跳价",Min:nY,minute:rY,minutes:oY,"Mkt Cap":"市值",MKT:aY,MMM:iY,"MOC order may not be a part of OCO group.":"收盘市价(MOC)订单不可以是OCO订单组的一部分。","MOC order may not have cancel conditions.":"收盘市价单(MOC)不可以附加取消条件。","MOC order may not have conditions.":"收盘市价单(MOC)不可以附加条件。",MOC:lY,Mode:cY,Momentum:dY,mon:uY,"Monday through Friday, 7 am to 6 pm ET":"周一至周五，美东时间上午7点至下午6点。",Monday:hY,MoneyFlowIndex:pY,MONTH:mY,Month:gY,Monthly:SY,More:fY,"Most Relevant":"最相关内容","Move Money":"转移资金","Moving Average":"移动平均","Moving Avg Length":"移动平均长度","Mute All":"全部静音","My Commission":"我的佣金","My Margin":"我的保证金","My Portfolio":"我的投资组合",my:TY,"N B B":"N B B","N K":"N K","Name already in use. Pick a new one.":"该名称已被使用。请选新的名称",NBB:yY,Near:CY,NearTerm:bY,"Negative to Positive":"负到正","Net Change":"净变化","Net Income":"净收入","Net Liq":"市场价值","Net Prc":"净价","Net Profit Margin":"净利润率","Neutral From Avoid":"从回避到中立","Neutral From Long":"从买入到中立",NeutralLevel:EY,"New Drawing Set":"新绘图集","New Watchlist":"新的观察列表",NK:AY,"No Active Alerts. Click Create Alert when looking at a symbol to set an alert.":"没有活跃的警示。在查看代号时点击创建警示来设置一个警示。","No Canceled Alerts. Click Create Alert when looking at a symbol to set an alert.":"没有已取消的警示。在查看代号时点击创建警示来设置一个警示。","No Change":"不变","No equity trading is allowed on this account":"此账户不可以做股票交易","No forex trading is allowed on this account":"此账户不可做外汇交易。","No futures trading is allowed on this account":"此账户不可做期货交易。","No Level II Data":"没有二级报价数据","No New Notifications":"没有新的通知","No results for ${searchValue}":"没有${searchValue}的结果","No Time and Sales Data":"无时间与销售数据","No Triggered Alerts. Click Create Alert when looking at a symbol to set an alert.":"没有已激活的警示。在查看代号时点击创建警示来设置一个警示。",No:vY,no:IY,"Noise Length":"噪音长度","Noise Type":"噪音类型",Normal:xY,NormRoofingFilter:wY,'Note (for {{account}}TDA): You may enter this opening trade, but if you close it today you will have done more than 3 day trades in 5 days and your account will be flagged as "pattern day trader". For more information, please see our FAQ on pattern day trading. Click "Confirm and Send" if you want to enter this trade.':"请注意 (有关{{account}}TDA): 您可以下这个开仓订单，但是如果您今天平仓，您将在5个工作日当中已做了5次当日冲销，您的账户将被定义为“惯性当日冲销账户(PDT)”。更多相关信息，请查阅我们有关惯性当日冲销交易的常见问答。如果您仍想下单，点击“确认并发送”。",Notifications:OY,Nov:RY,NTB:DY,"Num Dev Dn":"下行偏离数目","Num Dev Up":"上行偏离数目",NVI:LY,OBV:_Y,OCO:NY,Oct:PY,Off:kY,"On this account you cannot open new futures positions.":"在这个账户您不可以做新的期货开仓交易 。","On this account you cannot open new positions":"这个账户不能做新的开仓交易。",on:MY,On:$Y,"One or more filters in this scan are not available to edit and will not be included when the scan is run":"此扫描中的一个或多个筛选条件不可编辑，并且在扫描运行时不会包括在内","Open a live account":"开设真实账户","Open Active Trader Settings Menu":"打开活跃交易设置菜单","Open Add Study Menu":"打开添加研究菜单","Open an account":"开设账户","Open Chart Settings Menu":"打开图表设置菜单","Open Drawings Menu":"打开绘图菜单","Open Int":"未平仓合约","OPEN INTEREST":"未平仓合约","Open Interest":"未平仓合约",Open:jY,OPEN:BY,"Operating Profit Margin":"运营利润率","Operating System Version":"操作系统版本","Operating System":"操作系统",OpInt:FY,"Option Buying Power":"期权购买力","Option Chain":"期权链","Option Leg":"期权分支","Option positions in your account are grouped by spread type. You can turn spread grouping off from the user menu.":"您账户中的期权仓位是按价差类型分组。您可以在用户菜单中关闭价差分组。","Option Stats":"期权统计数据","Option Trade":"期权交易","Option Volume Index":"期权成交量指数",option:HY,OPTION:UY,"Options disclosure":"期权披露声明",Options:VY,Or:WY,"Order Defaults saved":"已保存订单默认设置","Order Defaults":"订单默认设置","Order Details":"订单明细","Order Rejected":"订单被拒","Order Rule":"订单规则","Order triggered by SUBMIT AT order must have the same or later SUBMIT AT time.":"由“发送于”激活的订单必须与发送于订单的时间相同或更迟。","Order Types":"订单类型","Order with negative stop price detected.":"检测到订单止损价格为负值","Orders in the same OCO group must differ at least by instrument, side, price, type or exchange.":"在同一OCO订单组的订单必须在金融产品、市场方、价格或者交易所项目有所不同。","Orders with less than 1 shares must be of type MARKET.":"少于1股的订单必须为市价单。","Original Equity":"初始净资产","Original Value":"初始价值",Other:GY,Outperform:YY,"Over Bought":"超买","Over Sold":"超卖","Overall Gain $":"总体盈/亏$","Overall Gain %":"总体盈%","Overall, how satisfied are you with your site experience?":"总体来讲，您对网站体验的满意程度?","OverBought Color":"超买颜色",OverBought:qY,Overbought:KY,"Overnight Support":"夜间客服时间：","OverSold Color":"超卖颜色",OverSold:zY,Oversold:XY,P:QY,"P/C Ratio":"卖权/买权 比率","P/L Day $":"当天盈/亏$","P/L Day %":"当天盈/亏%","P/L Display Method":"盈/亏显示方式","P/L Open $":"开仓盈亏$","P/L Open %":"总体盈/亏%","P/L Open":"开仓盈亏","P/L YTD $":"年度至今盈/亏$","P/L YTD %":"年度至今盈/亏%","P/L":"盈/亏",Pair:ZY,"Paper Money or Live Trading":"paperMoney虚拟交易或真实交易","Paper Money":"Paper Money模拟交易","paperMoney ® disclosure":"paperMoney®虚拟平台披露声明",parSAR:JY,"Partially delayed data":"部分延迟数据","Partially delayed":"部分延迟",Password:eq,"Pay Date":"支付日",PE:tq,"Percent Change":"百分比变化","Percentage Reversal":"逆转百分数",PercentChg:sq,Period:nq,Personal:rq,PFE:oq,pHiAlert:aq,PivotHigh:iq,PivotLow:lq,"Plain MARKET order may not be a part of OCO group.":"市价单不可以是OCO订单组的一部分。","Please call the Thinkorswim trade desk to enter this order":"请联系thinkorswim交易台来输入这个订单","Please enter a part followed by '@'. '%S' is incomplete.":"请完成'@'后面的那部分。'%S'没有写完。","Please fill out this field.":"请填写这一项。","Please include an '@' in the email address. '%S' is missing an '@'.":"请在电邮地址里包含 '@' 。 在'%S' 里没有 '@'。","Please lengthen this text to 2 characters or more (you are currently using 1 character).":"请将字符增加到二个以上(您现在只用了一个字符)。","Please note that we can not respond directly to feedback provided here. If your feedback requires a response, or if you have any direct questions, please call or email us using the contact information found by clicking 'Support'.":"请注意我们不能对在里的反馈直接回复。如果您需要我们对反馈做出回复，或者您有任何直接问题，请点击“客户服务”电话或电邮联系我们。","Please note that you have selected a 'non-standard' option series and there may be liquidity and settlement risks that you are not aware of.":"请注意您已选择“非标准‘期权系列，可能会有您不知晓的流动性风险和结算风险。",'Please note that you have selected a weekly option series with a "non-standard" expiration date.':"请注意您已选择了一个‘非标准“到期日的周期权系列。","Please select a range less than %S days":"请选一个择低于%S天的时间范围","Please try again":"请稍后再试",pLoAlert:cq,"Plot Type":"图表类型",PM:dq,pm:uq,"Portfolio Digest":"投资组合文摘","Portfolio Events":"投资组合事件",portfolio:hq,"Pos Effect":"仓位影响","Position Settings":"仓位设置",Position:pq,Positions:mq,"Positive to Negative":"正到负",PP:gq,"Price / Book Value Ratio":"市净率","Price / Cash Flow Ratio":"市现率","Price / Earnings Ratio":"市盈率","Price C":"价格 收","Price H":"价格 高","Price L":"价格 低","Price Type":"价格类型",Price:Sq,price:fq,PriceOsc:Tq,"Privacy mode":"隐私模式","Prob ITM":"价内概率","Prob OTM":"价外概率","Prob Range":"概率范围","Probability of Profit":"盈利概率",Profile:yq,"Put Call Ratio":"卖权买权比率","Put Volume Index":"卖权成交量指数",PUT:Cq,Put:bq,put:Eq,"Put/Call Ratio":"卖权/买权 比率",Puts:Aq,PVI:vq,PVT:Iq,Qty:xq,Quantity:wq,"Quick Ratio":"速动比率","Quick Start Guide":"快速开始指南(英文版)","Quote Details":"报价详情","Quote disclosure":"报价披露声明",Quotient:Oq,"R Average Length":"R平均长度","R O Clength":"ROC长度",R1:Rq,R2:Dq,Rate:Lq,"Ratio Adjusted":"调整的比率","Re-Connect":"重新连接","Re-Connecting":"重新连接中","Realized Gain/Loss":"已实现利得/损失","Realtime data":"实时数据",Realtime:_q,"Regional Color Preference":"地区颜色喜好",REJECTED:Nq,Rejected:Pq,"Remove Left Extension":"移除左延伸","Remove Right Extension":"移除右延伸","Remove Study":"移除研究","Replaced order was already filled for the requested quantity":"替代的订单已经以所要求的数量成交",Replacing:kq,"Reset All Balances and Positions":"重设所有余额和仓位","Reset Colors":"重设颜色",Reset:Mq,"Resulting Buying Power for Forex":"所剩外汇购买力","Resulting Buying Power for Options":"所剩期权购买力","Resulting Buying Power for Stock":"所剩股票购买力","Resulting Buying Power":"所剩购买力","Return on Assets (ROA)":"资产回报率（ROA）","Return on Capital":"资本回报","Return on Equity (ROE)":"股本回报率（ROE）","Return on Risk":"风险回报",Revenue:$q,"Reversal Amount":"逆转金额",Review:jq,"Risk Profile Detail":"风险面详细","Risk Profile Table":"风险资料表",RoC:Bq,"Roll Selected":"已选滚仓","Roof Cutoff Length":"封顶价格截止周期","Root Symbol":"交易活动",RoR:Fq,RSI:Hq,RSq:Uq,S1:Vq,S2:Wq,"Safe Level":"安全水平","Sales Per Share":"每股销售额",sat:Gq,Saturday:Yq,"Save Query":"保存查询",Save:qq,"scan query ${Watchlist Name} deleted. Click again to undo.":"${Watchlist Name} 扫描查询已被删除。再次单击可还原。",Scans:Kq,second:zq,"Secondary Security":"第二个证券",seconds:Xq,"Securities in this order are subject to a HTB fee.":"此订单中的证券需缴纳难借股(HTB)费用。","Select 3 and have your account number ready.":"选择按键3并准备好您的账户号码。","Select all":"选择所有","Select Bid or Ask to add up to 4 option legs.":"选择买方价或卖方价来添加最多包含4个期权分支的订单。","Select Watchlist":"选择观察列表","Selected Account Name":"已选账户名称","Selected Account":"已选账户","Selected Totals:":"所选总数：",Selected:Qq,"Sell @ASK":"卖出@卖方价","Sell @BID":"卖出@买方价","Sell @MKT":"卖出@市价",SELL:Zq,Sell:Jq,"Send feedback":"发送反馈意见",Send:eK,"Sending your feedback":"正在发送您的意见反馈",Sept:tK,"Set Alert":"设置警示","Set New Balance to:":"设置新的余额为:",Settings:sK,Settlement:nK,Shares:rK,"Short Length":"快速周期长度","Short Sale Borrowing Rate":"卖空借股费率","Short sale orders are not allowed when your account equity value is less than $2,000.":"当账户净资产低于$2000美元时不允许下卖空订单。","Show Alerts":"显示警示","Show Breakout Signals":"显示突破信号","Show Bubbles":"显示泡沫","Show Dividends Icon":"显示股息图标","Show Earnings Icon":"显示收益图标","Show Earnings Preview":"显示收益预览","Show Extended Hours":"显示延长时段","Show Label":"显示标签","Show Less":"显示更少","Show More":"显示更多","Show Only Last Period":"只显示最后时段","Show Only Today":"仅显示今天","Show Option Positions":"显示期权仓位","Show Spread Grouping":"显示价差分组","Show Trade Price":"显示交易价格","Show Working Orders":"显示尚待执行订单",Side:oK,"Signal Length":"信号长度","Signal M A":"移动平均信号",Signal:aK,signal:iK,SIMPLE:lK,"Simplified Chinese":"简体","Sine Wave":"正弦波","Singapore Office":"新加坡公司办公时间：","Singapore Support Email":"新加坡客服电邮","Single Order":"单支订单",SINGLE:cK,Single:dK,"Site Version":"网站版本",Size:uK,"Sizzle Idx":"热门指数","sizzle idx":"热门指数",Slider:hK,"Slow Length":"慢速长度","Slowing Period":"减慢时期",SlowLine:pK,"Sm Length":"移动平均长度","Smoothing Length":"平滑长度",Spreads:mK,Squared:gK,"Squeeze Length":"挤压长度",Squeeze:SK,SqueezeAlert:fK,"St Dev Length":"标准差长度","Standard Deviation":"标准差","Standard Errors":"标准误差",Status:TK,"Std Deviation":"标准差",StdDev:yK,"Stochastic Mode":"随机指标模式",StochasticFast:CK,StochasticSlow:bK,"Stock / ETF disclosure":"股票／ETF披露声明","Stock Buying Power":"股票购买力","Stock Leg":"股票分支","STOCK order must have positive limit price.":"股票订单的限价必须是正数。","Stock Trade":"股票交易",Stock:EK,stock:AK,Stocks:vK,STOP:IK,STOPLIMIT:xK,STP:wK,STRADDLE:OK,Straddle:RK,STRANGLE:DK,Strangle:LK,Strategy:_K,Strike:NK,Strikes:PK,"Study Added":"研究已添加","Submit and cancel conditions should be different.":"提交和取消条件必须不同。","SUBMIT AT":"发送于","Submit Symbol":"发送代号","SUBMIT WHEN":"提交当",Submit:kK,subtotal:MK,summary:$K,SummationIndex:jK,sun:BK,Sunday:FK,Support:HK,"Symbol Info":"代号信息","Symbol {{symbol}} deleted. Click again to undo.":"代号 {{symbol}} 已被删除。再点击一次撤消该动作。",Symbol:"代号",symbol:UK,T:VK,"Take screenshot":"截图","Tax Rate":"税率","TD Ameritrade":"德美利证券","TD Ameritrade, Inc. is the broker-dealer for your account and is controlled by the issuer of this security, The Charles Schwab Corporation.":"德美利證券公司(TD Ameritrade, Inc.)是您賬戶的證券經紀公司，它受控于该证券發行商嘉信理財公司（The Charles Schwab Corporation）。","Tell us about your thinkorswim Web experience.":"请告诉我们您在thinkorswim网络版上的体验。","Thank you for submitting your feedback!":"谢谢您提交反馈意见！","The buying power designated to make this trade was created from the liquidation of an overnight position. FINRA rules mandate that use of funds created from the liquidation of overnight positions can not be used for day trading until the following day. Therefore, you can only make this trade if you intend to hold the position overnight and failure to do so may result in a day-trade margin call.":"该交易所使用的购买力是根据您隔夜仓位的清仓价值得出。FINRA规则要求由隔夜仓位清仓价值得出的资金，只有到第二天才可以用于当日冲销。所以，您只有意图将仓位持有过夜才可以进行这笔交易，否则，则会产生当日冲销保证金催缴通知。","The chat has been ended":"聊天已结束","The estimated annualized rate to sell short is {{shortSaleBorrowingRate}}. The estimated daily fee for your order is ${{dailyEstimatedFee}}. Please note that you will be charged one day's interest even if the order doesn't execute, as shares are reserved at the time of order entry. By selecting 'Send', you are agreeing to pay this fee. More details can be found at www.schwab.com/shortsale":"估计的卖空年费率为 {{shortSaleBorrowingRate}}。您的订单的每日估计费用为 ${{dailyEstimatedFee}} 。请注意，即使订单未执行，您也将被收取一天的利息，因为在输入订单时已预留了股票。选择 '发送'，即表示您同意支付这笔费用。更多详情请访问 www.schwab.com/shortsale","The following accounts are included in this view":"该视图包含以下账户","The limit price cannot be null for the chosen order type":"所选订单类型的限价不可以是空值","The minimum price increment of instrument {{instrument}} is {{price}}. This order will not be accepted.":"代号{{instrument}}的最低递增价格是{{price}}。此订单将不予以接受。","The order type ${selectedOrderType} is unavailable, updated to ${orderType}":"没有所选择的${selectedOrderType} 订单类型，订单类型已被更新为${orderType}","The server is currently unable to handle the request.":"服务器当前无法处理该请求。","The strike ${selectedStrike} is unavailable, updated to ${updatedStrike}":"行使价${selectedStrike} 已不存在，行使价已更新为${updatedStrike}","The underlying security of this option is currently considered hard to borrow. If this order results in a short position due to assignment or exercise, a daily borrow fee will be charged. The current borrow rate is {{shortSaleBorrowingRate}}. If all shares of this option were assigned or exercised, the daily fee would be ${{dailyEstimatedFee}} based on yesterday's closing price. The borrow rate and fee are subject to change daily based upon market conditions":"该期权的标的证券目前很难借到。如果该订单因指派或行权而导致空头头寸，则将收取每日借股费用。当前的借股费率为 {{shortSaleBorrowingRate}}。如果该期权的所有股票都被指派或行权，根据昨日收盘价计算，每日费用为 ${{dailyEstimatedFee}} 。借贷费率和费用可能根据市场情况每日变动。","The underlying security of this option is currently hard-to-borrow. Short sale orders for HTB securities may not be accepted during non-market hours due to short sale locate requirements.":"此期权标的证券目前难以借入。由于卖空定位要求，难以借入证券的卖空订单在非市场交易时间内可能不被接受。","Then request to be transferred to ext. 209143.":"然后您的电话被转接到分机号209143。",Then:WK,"Theo Price":"理论价格","There are no analyst reports for {{symbol}}":"没有关于{{symbol}}的分析师报告","There are no available buttons":"没有可用按钮","There are no columns that match your search criteria.":"没有符合您搜索条件的栏目。","There are no studies that match your search criteria.":"没有符合您搜索条件的研究。","There are no symbols in this watchlist":"该观察列表里没有代号","There are no visible buttons":"没有显示的按钮","There is a position that is in the money.":"有一个在价内期权仓位。","There was an error creating this alert. Please try again":"创建警示有错误。请再试一次","There was an error logging in":"登入发生错误","There was an error saving the Order Defaults. Please try again":"保存订单默认设置时出现错误。请再试一次","These are simulated values.":"这些是模拟价值。","These shares are currently non-negotiable":"这些股份目前不能买卖。","thinkorswim Web developers use your feedback to improve the platform. Need assistance with an issue?":"thinkorswim网络版开发人员利用您的反馈来改进平台。您有问题需要帮助吗？","thinkorswim Web":"thinkorswim 网络版","thinkorswim™":"thinkorswim™交易平台","Third-party research disclosure":"第三方研究披露声明","This account is not eligible to place trades within thinkorswim. Select another account or discover why in the":"此账户没有在thinkorswim中交易的资格。请选择另一个账户或在「学习中心」了解原因。","This account is not enabled for forex trading. To enable forex trading login to your web account and select My Profile. Select Upgrade next to Advanced Features.":"此账户没有启动外汇交易。如要启动外汇交易，请登入您的网上账户并选择我的资料(My Profile)。在高级功能(Advanced Features)项选择升级 (Upgrade)。","This account is not enabled for forex trading.":"这个账户没有外汇交易权限。","This account is not enabled for futures trading.":"此账户没有期货交易权限。","This is a paperMoney account.":"这是paperMoney虚拟账户。","This order is based upon the dollar amount selected and price of the security at the time the order is routed to market.":"该订单是基于所选美元金额和订单送入市场时的证券价格。","This order may result in an oversold/overbought position in your account.":"此订单可能会导致您账户产生超卖/超买的仓位。","This position is in the money.":"该仓位在价内。","This security is currently hard-to-borrow. Short sale orders for HTB securities may not be accepted during non-market hours due to short sale locate requirements.":"此证券目前难以借入。由于卖空定位要求，难以借入证券的卖空订单在非市场交易时间内可能不被接受。","This stock is no longer trading due to merger":"这支股票因公司合并不再交易","This stock is not available to borrow. If you want us to try to locate it for you, please call our trade desk.":"这支股票无法借到。如果您要我们设法找到该股，请联系我们的交易台。",Threshold:GK,thurs:YK,Thursday:qK,"TICK COUNT":"跳价计数","Tick Reversal":"勾选逆转",Tick:KK,TIF:zK,"Time and Sales":"时间与销售","Time Frame":"时间范围",Time:XK,TNB:QK,"to access live trading.":"使用真实交易。","TO CLOSE":"平仓","TO OPEN":"开仓",To:ZK,TODAY:JK,Today:ez,"Total Asset Turnover":"总资产周转率","Total Shares Outstanding":"总流通股数",Total:tz,Totals:sz,"Totals:":"总计：","Trade Analysis":"交易分析","Trade Filled":"交易成交","Trade Price Above the Ask. ":"高于卖方价的交易价。","Trade Price":"交易价格",Trade:nz,"Traded at Ask or above":"在卖方价或更高价格交易","Traded at Bid or below":"在买方价或更低价格交易",Trades:rz,"Trading Hours":"交易时间","Traditional Chinese":"繁體","Trailing stop orders require a valid parameter.":"跟踪止损订单需要一个有效的参数",TRAILSTOP:oz,TRAILSTOPLIMIT:az,"Trend Length":"趋势长度","TRG BY #{ind}":"被#{ind}激活",Triggered:iz,TriggerLine:lz,"Troubleshooting Information":"故障排除信息",TRSTP:cz,TRSTPLMT:dz,"True Range Average Type":"真实范围平均类型",True:uz,"TTMLRC LB1":"TTMLRC 下行带1","TTMLRC LB2":"TTMLRC 下行带2","TTMLRC LR":"TTMLRC 线性回归","TTMLRC UB1":"TTMLRC 上行带1","TTMLRC UB2":"TTMLRC 上行带2","TTMScalp PivotHigh":"TTMScalp 转折高点","TTMScalp PivotLow":"TTMScalp 转折低点",tues:hz,Tuesday:pz,TVI:mz,"Type symbol":"输入代号",UB1:gz,UB2:Sz,UlcerX:fz,"Unapplied Columns":"尚未应用的栏目",unavailable:Tz,"Unbalanced Butterfly":"非平衡策略蝶式策略","Unbalanced Condor":"非平衡策略鹰式策略","Unbalanced Iron Condor":"非平衡策略铁鹰策略","Unbalanced Vertical Roll":"非平衡策略垂直滚仓",UNBALANCED:yz,"UNBALANCED_IRON CONDOR":"非平衡策略铁鹰策略","UNBALANCED_VERT ROLL":"非平衡策略垂直滚仓","underlying price":"底层证券价格",Underlying:Cz,Underperform:bz,"Undo delete ${Watchlist Name} scan query":"撤消删除 ${Watchlist Name} 扫描查询","Undo delete ${Watchlist Name} watchlist":"复原删除 ${Watchlist Name} 观察列表","Undo delete watchlist":"观察列表删除还原",Undo:Ez,"Unexpected server error occurred while executing update request with provided requestId. Please try again later or contact support desk.":"使用提供的代号执行更新请求时发生意外的服务器错误。 请稍后再试或联系支持中心。",UnitLine:Az,Unselected:vz,"until close":"距收盘","until open":"距开盘","until regular session closes":"距正常交易时段收盘还有","until regular session opens":"距正常交易时段开盘还有",Up:Iz,"Upcoming Earnings":"即将发布收益",UpDownDiff:xz,Upper:wz,UpperBand:Oz,UpperLevel:Rz,UpperLine:Dz,UpProbExp:Lz,UpStep:_z,"Use Paper Money":"使用Paper Money模拟交易",Username:Nz,Value:Pz,"VERT ROLL":"垂直滚仓","Vert Roll":"垂直滚仓",VERT_ROLL:kz,"VERTICAL ROLL":"垂直滚仓","Vertical Roll":"垂直滚仓",VERTICAL:Mz,Vertical:$z,VFI:jz,VHF:Bz,"View All Alerts":"查看所有警示",View:Fz,"Visible Buttons":"可显示按钮","Visible Columns":"显示项目","Visible Symbols":"可视代号",VMA:Hz,"Vol Diff":"波动率差","vol diff":"波动率差","Vol Index":"波动率指数","vol index":"波动率指数",Vol:Uz,"Volatility Adjustment":"波动率调整","Volatility Difference":"波动率差","Volatility Index":"波动率指数",VolatilitySwitch:Vz,VolAvg:Wz,VolROC:Gz,VoltyStDev:Yz,VOLUME:qz,Volume:Kz,VolumeOsc:zz,VWAP:Xz,"WAIT COND":"等待条件达到","WAIT STOP":"等待止损条件达到","WAIT TRG":"等待激活订单成交","was deleted successfully":"被成功删除","watchlist ${Watchlist Name} deleted. Click again to undo.":"观察列表 ${Watchlist Name} 已被删除。再次点击还原","Watchlist name":"观察列表名称",Watchlist:Qz,Wave1:Zz,Wave2High:Jz,Wave2Low:eX,"We are unable to process your sell order because the number of shares entered exceeds the number of shares in your current position. Please enter a reduced number of shares.":"我们无法处理您的卖单，因为输入的股数超过您现有仓位的股数。请减少股数再输入。",wed:tX,Wednesday:sX,WEEK:nX,Week:rX,"week(s)":"周",Weekdays:oX,Weekly:aX,Weeklys:iX,"Weighted Back Volatility":"加权后月波动率",WEIGHTED:lX,WHEN:cX,"Width Of Channel":"通道宽度",WILDERS:dX,"Window Height":"窗口高度","Window resolution is too large, decrease window size and try again":"窗口分辨率过大，请缩小窗口尺寸并重试","Window Width":"窗口宽度","With market orders, prices can change quickly in fast market conditions resulting in execution prices that can be different from the quotes displayed at order entry.":"对于市价单，在快速市场情况下价格可能会迅速变化，导致执行的价格与在输入订单时的报价有所不同。","With stop orders, there is no guarantee that the execution price will be equal to or near the activation price.":"对于止损单，不保证执行的价格会等于或接近激活价格。","Working Orders":"尚待执行订单 ",WORKING:uX,Working:hX,working:pX,Year:mX,"year(s)":"年",Yes:gX,yes:SX,"Yesterday Close":"昨日收盘价",Yield:fX,"You are about to leave thinkorswim":"您即将离开thinkorswim","You are currently disconnected. Please refresh the page to reconnect.":"您目前服务中断。请刷新页面重新连接。","You are not allowed to short stock on a cash account.":"在现金账户中不允许做卖空股票交易。","You are not allowed to short stock on account with netliq below $2000":"如果您账户的净清仓资产低于$2000，您则不可以做卖空股票交易。","You are not allowed to short trade unmarginable stocks.":"您不可以买空非融资股票 。","You are not allowed to use margin to buy stock on account with netliq below $2000":"如果您账户的净清仓资产低于$2000，您则不可以使用融资购买股票。","YOU ARE PARTICIPATING IN A PROGRAM RELATED TO A TEST OF THE PLATFORM, WHICH MAY HAVE GLITCHES, ERRORS OR OTHER ISSUES. PARTICIPANTS ARE WARNED THAT, IF THEY DECIDE TO MAKE A TRADE ON THE PLATFORM, THEY SHOULD NOT TRADE LARGE AMOUNTS OF MONEY. PARTICIPANTS WILL NOT RECEIVE ANY COMMISSIONS, BENEFITS, OR FREE TRADES AS PART OF THEIR PARTICIPATION IN THE PROGRAM. PARTICIPANTS WILL NOT RECEIVE ANY REIMBURSEMENTS, REWARDS OR DISCOUNTS IN CONNECTION WITH ANY TRADE THEY MAKE ON THE PLATFORM. PARTICIPANTS CONDUCT TRADES – LARGE OR OTHERWISE - AT THEIR OWN RISK. TD AMERITRADE NOR ANY OF ITS AFFILIATES OR SUBSIDIARIES, ARE IN NO WAY LIABLE TO PARTICIPANTS FOR ANY LOSS OF TRADES OR MONEY ON THE PLATFORM.":"您参与的是平台测试活动，系统可能会出现故障、错误或其它问题。在此忠告参与者，如果在平台交易，不应使用大笔资金来下单。参与者将不会因参加测试而收到任何佣金、福利或免费交易。参与者将不会收到与在平台上所做交易相关的补偿、奖励或折扣。参与者进行交易带来的风险，无论大小，都由他们自己承担风险。德美利证券及其任何附属机构或子公司都不会对参与者在平台上损失的交易或资金负责。","You currently have 0 Day Trades remaining for this account. Any additional Day Trades could trigger FINRA's Pattern Day Trader Rule, restricting your account for 90 days.":"账户目前还剩0次当日冲销。 任何额外的当日冲销可能会触发FINRA的惯性当日冲销规则，账户将被限制90天。","You currently have 1 Day Trade remaining for this account. More than 1 Day Trade could trigger FINRA's Pattern Day Trader Rule, restricting your account for 90 days.":"账户目前还剩1次当日冲销。 超过1次的当日冲销可能会触发FINRA的惯性当日冲销规则，账户将被限制90天。","You do not currently have any canceled orders.":"您目前没有任何已取消订单。","You do not currently have any filled orders.":"您目前没有任何已成交的订单。","You do not currently have any working orders.":"您目前没有任何尚待执行订单。","You do not have enough available cash/buying power for this order.":"您没有足够的现金/购买力来下这个订单。","You do not have permissions for Level II data.":"您没有二级报价数据的使用权限。","You will exceed your futures position limit by making this trade.":"这笔交易成交会导致您的期货仓位超出限定数额。","You will open a prohibited position with BP: Illegal -1 shares":"您将开仓一个被禁止的仓位。","Your buying power will be below zero ${dynamicField} if this order is accepted.":"如果这个订单被接受，您的购买力将会小于零${dynamicField} 。","Your buying power will be below zero N/A if this order is accepted.":"如果这个订单被接受，您的购买力将会低于零或非适用 。","Your feedback is incredibly valuable in shaping the future of thinkorswim.":"您的反馈意见对打造thinkorswim平台的未来至关重要。","Your forex buying power will be below zero ${dynamicField} if this order is accepted.":"如果这个订单被接受，您的外汇购买力将会小于零${dynamicField} 。","Your limit price is significantly away from the current market price. Please adjust your order.":"您限定的价格与当前市场价格差距太大。请调整您的订单。","Your limit price is too distant from the current quote. Try again.":"您的限价与当前报价相差太大。请重试。","Your order cannot be accepted because the system is missing quotes to validate it. Try to send this order again later. If the problem persists contact  a TD AMERITRADE Client Services Representative at 800-672-2098.":"无法接受您的订单，因为在系统中没有报价来验证订单。 请稍后再尝试下单。如果仍有问题，请拨打800-672-2098，中文服务877-888-1238联系德美利证券客服。","YTD Gain $":"年度至今盈/亏$","YTD Gain %":"年度至今盈%",ZeroLine:TX,"Zoom Level":"缩放尺度",ZZT$:yX,"ZZT%":"转折趋势%","{numerator} of {denominator} search results":"第|{numerator} 个搜索结果，共{denominator}个","~BUTTERFLY":"蝶式策略","~CONDOR":"鹰式策略","~IRON_CONDOR":"铁鹰策略","~VERT ROLL":"垂直滚仓"},bX="zh-TW",EX={TimeFrame:{Today:"當天",Day:"1天",Week:"1週","2 Weeks":"2週",Month:"1月","3 Months":"3個月","6 Months":"6個月","Year-To-Date":"年度至今","Year To Date":"年度至今",Year:"1年","1 Year":"1年","3 Years":"3年","5 Years":"5年","15 Years":"15年",Max:"最長",m:"分鐘",h:"小時",d:"天",w:"週","1m":"1分鐘","2m":"2分鐘","3m":"3分鐘","4m":"4分鐘","5m":"5分鐘","10m":"10分鐘","15m":"15分鐘","20m":"20分鐘","30m":"30分鐘","1h":"1小時","2h":"2小時","4h":"3小時","1D":"1天","2D":"2天","3D":"3天","4D":"4天","15D":"15天","1W":"1週","2W":"2週","1M":"1個月","3M":"3個月","6M":"6個月","9M":"9個月","1Y":"1年","2Y":"2年","3Y":"3年","4Y":"4年","5Y":"5年","10Y":"10年","15Y":"15年","20Y":"20年",YTD:"年度至今","1 Minute":"1分鐘","2 Minutes":"2分鐘","3 Minutes":"3分鐘","4 Minutes":"4分鐘","5 Minutes":"5分鐘","10 Minutes":"10分鐘","15 Minutes":"15分鐘","20 Minutes":"20分鐘","30 Minutes":"30分鐘","55 Minutes":"55分鐘","1 Hour":"1小時","2 Hours":"2小時","4 Hours":"3小時","8 Hours":"8小時","24 Hours":"24小時","1 Day":"1天","2 Days":"2天","3 Days":"3天","4 Days":"4天","1 Week":"1週","1 Month":"1個月"},SupportWindow:{Closed:"已關閉",Closes:"關閉",Admin:"管理員","Are you sure you want to end the current chat session?":"您確定要結束當前聊天會話嗎?","Ask us anything":"向我們提問",Call:"電話",End:"結束","fri {{startTime}} - {{endTime}} CT":"週五美中時間{{startTime}} - {{endTime}}","IN-PROGRESS":"進行中",Open:"已開放",Opens:"開放","mon {{startTime}} - {{endTime}} CT":"週一美中時間{{startTime}} - {{endTime}}","Return to chat":"返回聊天","sat {{startTime}} - {{endTime}} CT":"週六美中時間{{startTime}} - {{endTime}}","sent image":"發送的圖片","Start Chat":"開始聊天","sun {{startTime}} - {{endTime}} CT":"週日美中時間{{startTime}} - {{endTime}}","Support Chat Hours":"線上聊天客服時間","thurs {{startTime}} - {{endTime}} CT":"週四美中時間{{startTime}} - {{endTime}}","TTY (for hearing impaired)":"TTY(專為聽障人士)","tues {{startTime}} - {{endTime}} CT":"週二美中時間{{startTime}} - {{endTime}}","wed {{startTime}} - {{endTime}} CT":"週三美中時間{{startTime}} - {{endTime}}","Welcome to Live Chat Support! Your chat with a live agent will appear in this window. Start by typing your question below.":"歡迎使用線上聊天支持! 您與在線客服代表的對話窗口在此顯示。請在下面輸入您的問題開始聊天。",You:"您"},AddStudyMenu:{"Acc Dist":"累積派發指標","Acceleration Bands":"加速帶","Accum Dist Pr Volume":"累積派發壓量","Advance Decline":"騰落指標(ADL)","ADX Crossover":"平均動向指標交叉(ADXX)",ADX:"平均方向指數(ADX)","All Studies":"所有研究","Aroon Indicator":"阿隆指標","Aroon Oscillator":"阿隆震盪指標",ATR:"平均真實範圍(ATR)","Available Studies":"可用研究","Awesome Oscillator":"動量震蕩指標(AO)","Bollinger Bands Crossover":"布林軌道交叉(BBX)","Bollinger Bands":"布林軌道(BB)","Bollinger Bandwidth":"布林通道帶寬指標","Bollinger Percent B":"布林通道百分比帶寬指標",CCI:"順勢指標(CCI)","Chaikin Money Flow":"蔡金資金流量(CMF)","Chaikin Osc":"蔡金擺動指標(CO)","Chaikin Oscillator":"蔡金擺動指標(COSC)","Chaikin Volatility":"蔡金波動指標",Comparison:"比較","Comparison - Percent":"比較-百分比","Crossover Studies":"交叉研究",CSI:"選股指標(CSI)","Cumulative Volume Index":"累積成交量指數(CVI)","Cycle Studies":"週期研究","Daily SMA":"每日簡單移動平均",DEMA:"雙指數移動平均","Demand Index":"需求指數","Detrended Price Osc":"區間震蕩指標(DPO)","Displaced EMA":"置換指數移動平均",DMA:"置換移動平均",DMI:"方向移動指數(DMI)","Ease Of Movement":"簡易波動指標(EOM)","Ehlers Super Smoother Filter":"Ehlers超平滑過濾器","Forecast Oscillator":"預測擺動","Four Percent Model":"4%模型","Heikin Ashi Diff":"平均K線圖","Historical Volatility":"歷史波動率","HL Volatility":"高低波動率","Implied Volatility":"隱含波動率(IV)","Keltner Channels":"肯特納通道(KC)","Klinger Oscillator":"克林格擺動指標","LBR Three Ten Osc":"LBR 3/10震盪指標","Legacy EMA":"傳統指數移動平均","Linear Reg Ch50":"線性回歸通道50%","Linear Reg Ch100":"線性回歸通道100%","Linear Reg ChVar":"線性回歸通道變量","Linear Reg Curve":"線性回歸曲線","Linear Regression Rev":"線性回歸逆轉","Linear Regression Slope":"線性回歸斜率","Linear Regression":"線性回歸","Lower Studies":"下行研究","MACD Histogram Crossover":"MACD柱狀圖交叉(MACDHX)","MACD Histogram":"MACD 直方圖","MACD Two Lines":"MACD雙線",MACD:"異同移動平均(MACD)","Market Forecast":"市場預測指標","Market Sentiment":"市場情緒指標","Market Strength Studies":"市場強度研究","McClellan Oscillator":"麥克林指標(MCL)","McClellan Summation Index":"麥氏綜合指標(MSI)","Median Average":"中值平均","MESA Sine Wave":"山形正弦波指標","Momentum Crossover":"動量交叉(MX)","Money Flow Index Crossover":"資金流量指標交叉(MFIX)","Money Flow Index":"資金流量指標(MFI)","Mov Avg Adaptive":"自適應移動平均","Mov Avg Triangular":"三角移動平均","Moving Average":"移動平均(MA)","Moving Avg Crossover":"移動平均交叉(MAX)","Negative Volume Index":"負量指標(NVI)","On-Balance Volume":"平衡交易量(OBV)","Onset Trend Detector":"趨勢起始檢測指標","Open Interest":"未平倉合約(OpInt)","Parabolic SAR Crossover":"拋物線轉向交叉(parSARX)","Parabolic SAR":"拋物線轉向","Percent Change":"百分比變化","Pivot Points":"軸心點指標","Polarized Fractal Efficiency":"極化分型效率","Popular Studies":"熱門研究","Positive Volume Index":"正量指標(PVI)",PPS:"Person樞軸點研究","Price And Volume Trend":"價格成交量走勢(PVT)","Price Average Crossover":"價格平均交叉(PAX)","Price Channel":"价格通道(PC)","Price Osc":"價格擺動",Price:"價格","Probability Of Expiring Cone":"即將到期錐形概率(ProbExp)",QStick:"量化陰陽線","Rainbow Average":"彩虹移動平均","Rate Of Change Crossover":"變化率交叉(ROCX)","Relative Volatility Index":"相對離散指數(RVI)","Reverse Engineering MACD":"逆向工程MACD","RSI Crossover":"相對強弱指標交叉(RSIX)",RSI:"相對強弱指數(RSI)",RSquared:"R平方","Standard Deviation":"標準差","Standard Error Bands":"標準誤差帶","Standard Error Channel":"標準誤差通道","StdDev Channel":"標準差通道(StdDev)","Stochastic Crossover":"隨機指標交叉(StochX)",Stochastic:"隨機指標(Stoch)",Studies:"研究",TEMA:"三重指數移動平均","Time Series Forecast":"時間系列預測","Trade Volume Index":"交易量指數(TVI)","Trend Noise Balance":"趨勢噪音平衡","Trend Periods":"趨勢週期","Trend Quality":"趨勢質量","Trend Studies":"趨勢研究",TRIX:"三重指數(TRIX)","TTM Scalper Alert":"TTM縮放警報","TTM Squeeze":"擠牌指標（TTM Squeeze）","TTM Wave":"TTM 波浪指標",TTMLRC:"TTM線性回歸通道","Ulcer Index":"潰瘍指數","Upper Studies":"上行研究","Variable MA":"變量移動平均","Vertical Horizontal Filter":"十字過濾線","Volatility Std Dev":"波動率標準差","Volatility Studies":"波動研究","Volatility Switch":"波動轉換","Volume Avg":"平均成交量","Volume Flow Indicator":"成交流量指標","Volume Osc":"成交量震盪指標","Volume Profile":"成交量分佈","Volume Rate Of Change":"成交量變動率","Volume Weighted MACD":"成交量加權MACD",Volume:"成交量","Vortex Indicator":"渦旋指標",VWAP:"成交量加權平均價格(VWAP)","Weakness In A Strong Trend":"強勢異動研究","ZigZag High Low":"轉折高低","ZigZag Percent":"轉折百分比","ZigZag Sign":"轉折信號","ZigZag Step Pattern":"轉折移動形態","ZigZag Trend Percent":"轉折趨勢百分比","ZigZag Trend Sign":"轉折趨勢信號"},ChartInfo:{Close:"關閉",Volume:"量"},News:{ago:"以前","Back to All {{symbol}} News":"返回至所有{{symbol}}的新聞","Back to Portfolio Digest":"返回投資組合文摘","Loading news for {{symbol}}":"正在載入{{symbol}}的新聞","Loading relevant news":"正在加載相關新聞",News:"的新聞","No body text is currently available for this article.":"這篇文章目前沒有內容","No news available for {{symbol}}":"沒有{{symbol}}的新聞","No relevant news available":"沒有相關的新聞","Portfolio Digest":"投資組合文摘","Show less":"顯示更少","Show more":"顯示更多"},Drawings:{"Andrews Pitchfork":"安德魯叉形",Arrow:"箭頭",Channel:"通道","Cycle Brackets":"週期範圍","Fibonacci Arcs":"斐波那契弧線","Fibonacci Extensions":"斐波納契延伸","Fibonacci Fans":"斐波那契扇形","Fibonacci Retracements":"斐波那契回撤","Fibonacci Spiral":"斐波那契螺旋","Fibonacci Time Extensions":"斐波那契時間延申","Fibonacci Time Ratios":"斐波那契時間比率","Fibonacci Time Series":"斐波那契時間系列",Oval:"橢圓形","Price Level":"價格水平",Rectangle:"長方形","Regression Channel":"回歸通道","Regression Line":"回歸綫","Text Note":"文字注釋","Time Level":"時間水平",Trendline:"趨勢綫",Unsupported:"非支持",Default:"默認",Drawings:"繪圖",Undo:"撤消","Drawing sets":"繪圖集","Drawing Set":"繪圖集","Drawing Tools":"繪圖工具","Edit text":"修改文字","Edit text note":"修改文字注釋",Left:"左",Top:"上",Right:"右",Bottom:"下",Off:"關閉",Text:"文字"},Alerts:{"Alert deleted.":"警示已被删除。","Alert Triggered":"激活的警示",Submit:"提交",Canceled:"已取消",Close:"收盤價",Undo:"撤銷。"},OrderBook:{LOC:"收盤限價",MOC:"收盤市價","View Transaction History":"查看交易歷史"},Transactions:{"Time Range":"時間範圍",to:"至",Last:"最新","Transaction History":"交易歷史","Back to Positions":"返回倉位頁面","Execution Time":"成交時間",Type:"類型",Description:"說明","Misc Fees":"雜費","Commissions & Fees":"佣金和費用",Amount:"數額",Balance:"餘額","The date range selected must be no more than 370 days.":"所選日期範圍不能超過370天","The start date of your range must be before the end date":"時間範圍的開始日期必須在結束日期之前","Displaying ":"顯示","Displaying Last ":"顯示過去","7 Days":"7天","30 Days":"30天","90 Days":"90天","180 Days":"180天","365 Days":"365天",YTD:"年度至今",Custom:"自定義","Transactions history is loading.":"正在載入交易歷史。","Select All":"選擇所有",Trades:"交易",Deposits:"存款",Withdrawals:"提款",Transfers:"轉賬","Dividends or Interest":"股息或利息","Start of day balances":"當天開始餘額",Filter:"過濾器",Filters:"過濾器","Filters Applied":"已應用過濾條件","You do not have any transactions that meet these criteria.":"您沒有符合這些條件的交易。","Mark to Market":"按市值計價"},Watchlist:{"% Change Gainers":"%變化贏家","% Change Losers":"%變化輸家","24 Hour Trading":"24小時交易證券","2018 TOS Challenge":"2018 TOS挑戰賽列表","Account Positions, Working Orders, Personal":"賬戶倉位，尚待執行訂單，個人","Active on Social":"社交熱門股",Advertising:"廣告","Aerospace & Defense":"航空和國防","Agricultural & Farm Machinery":"農業和農用機械","Agricultural Products":"農産品","Air Freight & Logistics":"空運和物流",Airlines:"航空公司","Airport Services":"機場服務","All Auto Components":"所有汽車部件","All Automobiles":"所有汽車","All Banks":"所有銀行","All Beverages":"所有飲料","All Capital Markets":"所有資本市場","All Chemicals":"所有化學品","All Commercial Services & Supplies":"所有商業服務和用品","All Communication Services":"所有通信服務","All Consumer Discretionary":"所有非必需消費品","All Consumer Staples":"所有消費必需品","All Containers & Packaging":"所有容器和包裝","All Diversified Consumer Services":"所有多元消費服務","All Diversified Financial Services":"所有多元金融服務","All Diversified Telecommunication Services":"所有多元的電信服務","All Electrical Equipment":"所有電氣設備","All Electronic Equipment, Instruments & Components":"所有電子設備、儀器和組件","All Energy Equipment & Services":"所有石油天然氣設備及服務","All Energy":"所有能源","All Entertainment":"所有娛樂","All Equity Real Estate Investment Trusts (REITs)":"所有股權房地産投資信托（REITs）","All ETFs":"所有ETF","All Financials":"所有金融服務","All Food & Staples Retailing":"所有食品和家常用品零售","All Food Products":"所有食品","All Health Care Equipment & Supplies":"所有醫療設備和用品","All Health Care Providers & Services":"所有醫療提供者和服務","All Health Care":"所有醫療保健","All Hotels, Restaurants & Leisure":"所有酒店、餐廳和休閑","All Household Durables":"所有家用耐用品","All Independent Power and Renewable Electricity Producers":"所有獨立電力和可再生能源發電商","All Industrials":"所有工業","All Information Technology":"所有信息技術","All Insurance":"所有保險","All IT Services":"所有IT服務","All Machinery":"所有機械設備","All Materials":"所有材料","All Media":"所有媒體","All Metals & Mining":"所有金屬和采礦","All Multiline Retail":"所有多階層零售","All Oil, Gas & Consumable Fuels":"所有石油、天然氣和消耗性燃料","All Paper & Forest Products":"所有紙和林木産品","All Professional Services":"所有專業服務","All Real Estate Management & Development":"所有房地産管理和開發","All Real Estate":"所有房地産","All Road & Rail":"所有公路和鐵路","All Semiconductors & Semiconductor Equipment":"所有半導體和半導體設備","All Software":"所有軟件","All Specialty Retail":"所有專賣零售","All Textiles, Apparel & Luxury Goods":"所有紡織品、服裝和奢侈品","All Transportation Infrastructure":"所有交通基礎設施","All Utilities":"所有公用設施","All Watchlists":"所有觀察列表",All:"所有","Alternative Carriers":"非主流電信公司",Aluminum:"鋁","American-Style Indices":"美式指數","Analyst Downgrades":"分析師降級","Analyst Upgrades":"分析師升級","Apparel Retail":"服裝零售","Apparel, Accessories & Luxury Goods":"服裝、配飾和奢侈品","Application Software":"應用軟件","Asset Management & Custody Banks":"資産管理和托管銀行","Auto Components":"汽車部件","Auto Parts & Equipment":"汽車零件和設備","Automobile Manufacturers":"汽車製造商",Automobiles:"汽車","Automotive Retail":"汽車零售",Banks:"銀行",Beverages:"飲料",Biotechnology:"生物技術",Brewers:"釀酒廠",Broadcasting:"廣播電視","Browse Categories":"瀏覽所有類別","Building Products":"建築産品","Cable & Satellite":"有綫電視和衛星電視","Capital Markets":"資本市場","Cash-Settled Futures":"現金結算期貨","Casinos & Gaming":"賭場和游戲",Categories:"類別",Chemicals:"化學品","Coal & Consumable Fuels":"煤炭和消耗性燃料","Commercial Printing":"商業印刷","Commercial Services & Supplies":"商業服務和用品","Commission Free ETFs":"免傭金ETF","Commodity Chemicals":"日用化學品","Communication Services":"通信服務","Communications Equipment":"通信設備","Company Profile":"公司概况","Computer & Electronics Retail":"電腦及電子産品零售","Construction & Engineering":"建築與工程","Construction Machinery & Heavy Trucks":"工程機械和重型卡車","Construction Materials":"建築材料","Consumer Discretionary":"非必需消費品","Consumer Electronics":"消費電子産品","Consumer Finance":"消費金融服務","Consumer Staples":"消費必需品","Containers & Packaging":"容器和包裝",Copper:"銅","Daily report: Social activity":"每天報告: 社交熱門股","Data Processing & Outsourced Services":"數據處理和外包服務","Department Stores":"百貨公司","DEEP AND WIDE":"深寬策略","Distillers & Vintners":"酒業公司",Distributors:"分銷商","Diversified Banks":"多元銀行","Diversified Capital Markets":"多元資本市場","Diversified Chemicals":"多元化學品","Diversified Consumer Services":"多元消費服務","Diversified Financial Services":"多元金融服務","Diversified Metals & Mining":"多元化金屬與礦業","Diversified Real Estate Activities":"多元房地産活動","Diversified REITs":"多元房地産投資信托（REITs）","Diversified Support Services":"多元支持服務","Diversified Telecommunication Services":"多元電信服務","DOUBLE DIAGONAL":"雙對角策略","Double Long ETFs":"雙倍杠杆多頭ETF","Double Short ETFs":"雙倍杠杆空頭ETF","DOW JONES INDUSTRIAL AVERAGE":"道瓊斯工業平均指數","Drug Retail":"藥品零售","Economic Indicators":"經濟指標","Education Services":"教育服務","Electric Utilities":"電力公司","Electrical Components & Equipment":"電氣元件和設備","Electrical Equipment":"電氣設備","Electronic Components":"電子組件","Electronic Equipment & Instruments":"電子設備和儀器","Electronic Equipment, Instruments & Components":"電子設備、儀器和組件","Electronic Manufacturing Services":"電子製造服務","Energy Equipment & Services":"能源設備及服務",Energy:"能源",Entertainment:"娛樂","Environmental & Facilities Services":"環境和設施服務","Equity Real Estate Investment Trusts (REITs)":"股權房地産投資信托（REITs）","ETN's and Closed-End Funds":"ETN和封閉式基金","European-Style Indices":"歐式指數","Fertilizers & Agricultural Chemicals":"肥料和農用化學品","Financial Exchanges & Data":"金融交易所和數據",Financials:"金融","Food & Staples Retailing":"食品和家常用品零售","Food Distributors":"食品經銷商","Food Products":"食品","Food Retail":"食品零售",Footwear:"鞋類産品","Forest Products":"林木産品","Full Session Options":"全時段交易期權",FUTURES:"期貨","FX Non-Commission Pairs":"無傭金外匯貨幣對","FX Non-commission Pairs":"無傭金外匯貨幣對",FX:"外匯","Gap Down":"跳空下跌","Gap Up":"跳空上漲","Gas Utilities":"燃氣公司","General Merchandise Stores":"百貨商店",Gold:"黃金","Health Care Distributors":"醫療分銷商","Health Care Equipment & Supplies":"醫療設備和用品","Health Care Equipment":"醫療設備","Health Care Facilities":"醫療設施","Health Care Providers & Services":"醫療提供者和服務","Health Care REITs":"醫療房地産投資信托(REITs)","Health Care Services":"醫療服務","Health Care Supplies":"醫療用品","Health Care Technology":"醫療技術","Health Care":"醫療保健","Heavy Electrical Equipment":"重型電氣設備","Highways & Railtracks":"公路和鐵路","Home Furnishings":"居家裝飾産品","Home Improvement Retail":"家居裝修零售",Homebuilding:"住宅建築","Homefurnishing Retail":"家居裝飾品零售","Hotel & Resort REITs":"酒店及度假村房地産投資信托（REITs）","Hotels, Resorts & Cruise Lines":"酒店、度假村和游輪公司","Hotels, Restaurants & Leisure":"酒店、餐廳和休閑","Hourly report: Social activity":"每小時報告: 社交熱門股","Household Appliances":"家用電器","Household Durables":"家用耐用品","Household Products":"家用産品","Housewares & Specialties":"家庭用品和特殊産品","Human Resource & Employment Services":"人力資源和就業服務","Hypermarkets & Super Centers":"大賣場和超市","Independent Power and Renewable Electricity Producers":"獨立電力和可再生能源發電商","Independent Power Producers & Energy Traders":"獨立發電商和能源貿易商",INDICATORS:"指標",INDICES:"指數","Industrial Conglomerates":"工業集團","Industrial Gases":"工業氣體","Industrial Machinery":"工業機械","Industrial REITs":"工業房地産投資信托（REITs）",Industrials:"工業",Industry:"產業",INDUSTRY:"産業","Information Technology":"信息技術","Insurance Brokers":"保險經紀",Insurance:"保險","Integrated Oil & Gas":"石油天然氣綜合産業","Integrated Telecommunication Services":"綜合電信服務","Interactive Home Entertainment":"互動家庭娛樂","Interactive Media & Services":"互動媒體和服務","Interest Rates":"利率","Internals & Indicators":"大盤指數及指標","International Indices":"國際指數","Internet & Direct Marketing Retail":"互聯網和直銷零售","Internet Services & Infrastructure":"互聯網服務和基礎設施","Investment Banking & Brokerage":"投行和經紀服務","IT Consulting & Other Services":"IT諮詢和其他服務","IT Services":"IT服務","Key Leaders":"Key Leaders列表","Leisure Facilities":"休閑設施","Leisure Products":"休閑産品","Life & Health Insurance":"人壽和健康保險","Life Sciences Tools & Services":"生命科學工具和服務","Lovers and Losers":"升級和降級",Machinery:"機械設備","Managed Health Care":"管理醫療保健","Marine Ports & Services":"海運港口和服務",Marine:"海運","Market Maker Move Stocks":"做市商變動股票",Materials:"材料",Media:"媒體","Metal & Glass Containers":"金屬和玻璃容器","Metals & Mining":"金屬與采礦","MICRO FUTURES":"微型期貨","Micro Futures":"微型期貨","Mortgage Real Estate Investment Trusts (REITs)":"抵押房地産投資信托（REITs）","Mortgage REITs":"抵押房地産投資信托（REITs）","Motorcycle Manufacturers":"摩托車製造商","Movies & Entertainment":"電影和娛樂","Multi-line Insurance":"綜合保險","Multi-Sector Holdings":"多行業控股公司","Multi-Utilities":"多源公用設施","Multiline Retail":"多階層零售零售","NASDAQ 100":"納斯達克100指數","NASDAQ COMP":"納斯達克綜合指數","New Yearly Highs":"年度新高","New Yearly Lows":"年度新低","NYSE AMEX":"紐交所美交所指數",NYSE:"紐交所指數","Office REITs":"辦公房地産投資信托（REITs）","Office Services & Supplies":"辦公服務和用品","Oil & Gas Drilling":"石油天然氣鑽探","Oil & Gas Equipment & Services":"石油天然氣設備及服務","Oil & Gas Exploration & Production":"石油天然氣勘探與生産","Oil & Gas Refining & Marketing":"石油和天然氣精煉和銷售","Oil & Gas Storage & Transportation":"石油天然氣儲運","Oil, Gas & Consumable Fuels":"石油、天然氣和消耗性燃料","Other Diversified Financial Services":"其他多元化金融服務","Packaged Foods & Meats":"包裝食品和肉類","Paper & Forest Products":"紙和林木産品","Paper Packaging":"紙包裝","Paper Products":"紙産品","Penny Increment Options":"美分遞增期權","Personal Products":"個人用品","Personal Watchlists":"個人觀察列表",Pharmaceuticals:"製藥","Physically-Settled Futures":"實物結算期貨","Post-market Movers":"盤後推手","Pre-market Movers":"盤前推手","Precious Metals & Minerals":"貴金屬和礦物","Preferred Stocks":"優先股","Professional Services":"專業服務","Property & Casualty Insurance":"財産及意外保險",Public:"公共",Publishing:"出版",Railroads:"鐵路","Real Estate Development":"房地産開發","Real Estate Management & Development":"房地産管理與開發","Real Estate Operating Companies":"房地産運營公司","Real Estate Services":"房地産服務","Real Estate":"房地産","Regional Banks":"地區銀行",Reinsurance:"再保險",REITs:"房地産投資信托(REIT)","Renewable Electricity":"可再生電力","Research & Consulting Services":"研究與諮詢服務","Residential REITs":"住宅房地産投資信托(REITs)",Restaurants:"餐廳","Retail REITs":"零售房地産投資信托(REITs)","Road & Rail":"公路和鐵路","Russell 1000":"羅素1000指數","Russell 2000":"羅素2000指數","Russell 3000":"羅素3000指數","Russell Indices":"羅素指數","Russell MicroCap":"羅素微型公司指數","Russell MidCap":"羅素中型公司指數","S&P 100":"標普100指數","S&P 400":"標普400指數","S&P 500 Sector Indices":"標普500行業指數","S&P 500 Sector Indicies":"標普500行業指數","S&P 500 Sectors & Industries":"標普500行業産業","S&P 500 Sectors and Industries":"標普500行業産業","S&P 500":"標普500指數","S&P 600":"標普600指數","Scheduled Earnings Next 5 Days":"計劃未來5日收益發布","Security & Alarm Services":"安全和報警服務","Semiconductor Equipment":"所有信息技術","Semiconductors & Semiconductor Equipment":"半導體和半導體設備",Semiconductors:"半導體","Shadow Trader":"Shadow Trader影子交易者列表","ShadowTrader Core Sectors":"ShadowTrader核心行業",Silver:"銀","Soft Drinks":"軟飲料",Software:"軟件","Specialized Consumer Services":"專業消費服務","Specialized Finance":"專業金融服務","Specialized REITs":"專用房地産投資信托(REITs)","Specialty Chemicals":"特種化學品","Specialty Retail":"專賣零售","Specialty Stores":"專賣店",Steel:"鋼","Swim Lessons":"Swim Lessons列表","Systems Software":"系統軟件","TD Ameritrade Network":"TD Ameritrade Network電視頻道列表","TDA Ad Challenge - Top 8":"TDA Ad Challenge - 8大股票","Technology Distributors":"技術分銷商","Technology Hardware, Storage & Peripherals":"技術硬件、存儲和配件","Tentative Earnings Next 5 Days":"預計未來5日收益發布",Textiles:"紡織品","Textiles, Apparel & Luxury Goods":"紡織品、服裝和奢侈品","thinkorswim Challenge":"thinkorswim挑戰賽列表","Thrifts & Mortgage Finance":"儲儲蓄和抵押放貸","Tires & Rubber":"輪胎和橡膠",Tobacco:"烟草","Top 10's":"十大列表","Top10 % Gain NASDAQ":"納斯達克10大百分比上漲股","Top10 % Gain NYSE":"紐交所10大百分比上漲股","Top10 % Loss NASDAQ":"納斯達克10大百分比下跌股","Top10 % Loss NYSE":"紐交所10大百分比下跌股","Top10 Active NASDAQ":"納斯達克10大活躍股","Top10 Active NYSE":"紐交所10大活躍股","Top10 Net Gain NASDAQ":"納斯達克10大淨盈股","Top10 Net Gain NYSE":"紐交所10大淨盈股","Top10 Net Loss NASDAQ":"納斯達克10大淨虧股","Top10 Net Loss NYSE":"紐交所10大淨虧股","Top10 Sizzling Stocks":"10大熱門股","Top10 Volatility Increase":"10大波動增漲股","Trading Companies & Distributors":"貿易公司和分銷商","Trading Competition":"交易競賽列表","Transportation Infrastructure":"交通基礎設施","Triple Leveraged ETFs":"三倍杠杆ETF",Trucking:"卡車運輸","Upcoming Dividends":"即將派發股息","Upcoming Earnings":"即將發布收益","Upcoming Splits":"即將分股",Utilities:"公用設施","Water Utilities":"供水公司","Weekly report: Social activity":"每周報告: 社交熱門股",Weeklys:"周期權","Wireless Telecommunication Services":"無綫電信服務"},Scans:{"A metric that compares today's option volume with the average option volume over the last five days.":"將今日的期權成交量與過去五天的期權平均成交量進行比較的指標。","A metric that compares today's volume of call options with the average volume of call options over the last five days.":"將今日的買權成交量與過去五天的買權平均成交量進行比較的指標。","A metric that compares today's volume of put options with the average volume of put options over the last five days.":"將今日的賣權成交量與過去五天的賣權平均成交量進行比較的指標。","A metric that shows how volatile the symbol is compared to the general market. Symbols with beta greater than 1.0 are more volatile than the market, those with beta less than 1.0 are less volatile. Symbols with beta equal to 1.0 are as the volatile as the general market is. Negative beta indicates inverse relation to the market.":"顯示股票代號與一般市場相比的波動程度的指標。 Beta值大於1.0的股票代號比市場的波動性大，Beta值小於1.0的股票代號比市場波動性小。 Beta值等於1.0的代號與一般市場的波動性一樣。負的Beta值表示與市場呈反向關係。",Active:"活躍掃描","Add a Filter":"添加篩選","All Filters":"所有筛选","All Funds":"全部基金","All Futures":"全部期貨","All FX Commission Pairs":"全部有佣金外匯對","All FX Non-commission Pairs":"全部無佣金外匯對","All Indices":"全部指數","All Listed Stocks":"全部上市股票","All NASDAQ Stocks":"全部NASDAQ股票","All NYSE Stocks":"全部NYSE股票","All Optionable":"全部有期權證券","All OTC Stocks":"全部OTC股票","All Stocks":"全部股票","All Symbols":"全部代號","Back volatility is the implied volatility of the option series with the second closest expiration date.":"遠期波動率是離到期日第二近的期權系列的隱含波動率。","Clear Filters":"清除筛选",Close:"收盤價",Filter:"篩選條件",Filters:"篩選條件","For futures, single options, and stock, mark price is the last price bounded by bid and ask. For other securities, it is the arithmetic mean of bid and ask.":"對於期貨、單一期權和股票，市價是以買方價和賣方價為限的最新價格。對於其他證券，它是買方價和賣方價的算術平均值。","Front volatility is the implied volatility of the option series with the closest expiration date.":"近期波動率是到期日最近的期權系列的隱含波動率。","Fundamental Filters":"基本面篩選條件","Market Maker Move indicates the expected magnitude of an upcoming move based on the implied volatility.":"做市商變動表示基於隱含波動率的預期變動的幅度。",match:"匹配結果",matches:"匹配結果",Max:"最大",Min:"最小",Open:"開盤價","Price to Earnings Ratio, the last price divided by the corresponding symbol’s EPS (earnings per share).":"市盈率，以最新的價格除以相應代號股票的EPS（每股收益）。",Reset:"重設",Results:"結果","Saved as ":"保存為 ",Saved:"保存掃描","Scan In:":"掃描",Scan:"掃描",Scans:"掃描","Stock Filters":"股票篩選條件","The amount of a company’s dividends divided by last price.":"公司的股息數額除以最新價格。","The amount of a security that a buyer is willing to buy at the bid price.":"買方願意以買方出價購買的證券的數量。","The amount of security that a seller is willing to sell at the ask price.":"賣方願意以賣方要價出售的證券數量。","The amount of security traded in the last trade.":"最新交易中的證券成交量。","The CBOE® Volatility Index®, a metric that helps estimate the volatility of certain commodities and currency pairs. It takes into account the pricing of each option on an underlying to estimate the market's expectation of that underlying's volatility.":"CBOE®波動率指數®，是一種幫助估計某些商品和貨幣對的波動率的指標。它會考慮標的物每個期權的定價，以估計市場對該標的物的預期波動。","The difference between the back and the front volatility weighted by the time till expiration.":"按照距到期時間進行加權的遠期和近期的波動率之間的差異。","The difference between the back and the front volatility. Front volatility is the implied volatility of the option series with the closest expiration, and back volatility is that of the option series with the second closest expiration.":"遠期波動率和近期波動率之間的差異。近期波動率是到期日最近的期權系列的隱含波動率，而遠期波動率是離到期日第二近的期權系列的隱含波動率。","The difference between the last trade price and the close price.":"最新成交價格和收盤價格之間的差額。","The diluted earnings per share value published in the company’s report.":"公司財報中公佈的稀釋後的每股收益值。","The highest price reached during the specified time period.":"在特定時間段內達到的最高價格。","The highest price that a buyer is willing to pay for a security.":"買方願意為一個證券支付的最高價格。","The lowest price reached during the specified time period.":"在特定時間段內達到的最低價格。","The lowest price that a seller is willing to accept for a security.":"賣方願意接受的證券最低出售價格。","The number of outstanding shares of the corresponding company.":"相應公司的流通股數量。","The number of shares/contracts of the corresponding symbol traded during the day.":"相應代號的股票/合約的當日成交數量。","The price of the final trade during the regular trading session.":"正常交易時段的最後一筆成交價格。","The price of the first trade during the regular trading session.":"正常交易時段的第一筆成交的價格。","The price of the most recent transaction.":"最新成交的價格。","The ratio of the net change to the close price, in percent.":"以百分比表示的淨變化與收盤價的比率。","The total market value of all of the company's outstanding shares, calculated as the last trade price multiplied by the number of outstanding shares of the corresponding company":"公司所有流通股的總市值，按最後成交價格乘以相應公司的流通股數量計算得出。","The total number of traded put options divided by the total number of traded call options with the same underlying.":"同一標的證券的賣權總成交量除以買權總成交量。","There are no results based on your criteria. Please adjust your filters and try again.":"沒有符合您篩選條件的結果。請調整您的篩選條件重新再試。","Type a name":"輸入一個名字","You do not have any saved scans":"您沒有任何已保存的掃描"}},AX="高於",vX="高於",IX="高於",xX="累積派發指標",wX="累積派發壓量",OX="提交",RX="賬戶",DX="實際",LX="活躍",_X="交易活動",NX="AD",PX="警示",kX="警示",MX="所有",$X="替代",jX="上午結算",BX="盤前",FX="数量",HX="並且",UX="和",VX="每年",WX="應用",GX="四月",YX="區域圖",qX="賣方量",KX="賣方價",zX="賣方價",XX="賣方價",QX="八月",ZX="平均",JX="移動平均",eQ="移動平均",tQ="避免",sQ="B(十億)",nQ="反向比率",rQ="反向比率",oQ="頻帶",aQ="帶寬",iQ="柱條圖",lQ="基價",cQ="基點",dQ="BB",uQ="看跌",hQ="低於",pQ="低於",mQ="低於",gQ="貝塔系數",SQ="買方價",fQ="買方價",TQ="買方價",yQ="債券",CQ="瀏覽器",bQ="買方量",EQ="凸起",AQ="看漲",vQ="蝶式策略",IQ="蝶式策略",xQ="買入",wQ="買入",OQ="買權",RQ="日曆策略",DQ="日曆策略",LQ="買權",_Q="買權",NQ="買權",PQ="買權",kQ="取消",MQ="取消訂單",$Q="取消訂單",jQ="取消訂單",BQ="取消訂單",FQ="蠟燭圖",HQ="現金",UQ="類別",VQ="蔡金擺動指標",WQ="圖表",GQ="收",YQ="收盤",qQ="CMF",KQ="收縮",zQ="領子策略",XQ="領子策略",QQ="顏色",ZQ="混合策略",JQ="混合策略",eZ="比較",tZ="比較",sZ="比較-百分比",nZ="鷹式策略",rZ="鷹式策略",oZ="已連接",aZ="連接中",iZ="繼續",lZ="已拷貝",cZ="複製",dZ="COSC",uZ="成本",hZ="持保股票",pZ="持保買權",mZ="收入",gZ="當前報價",SZ="自定義",fZ="自定義訂單",TZ="CVI",yZ="天",CZ="天",bZ="每日",EZ="深色",AZ="數據",vZ="數據",IZ="天",xZ="天",wZ="當天",OZ="天",RZ="支出",DZ="十二月",LZ="下跌",_Z="延遲",NZ="刪除",PZ="被删除",kZ="交付",MZ="說明",$Z="說明",jZ="偏差",BZ="對角策略",FZ="對角策略",HZ="差",UZ="免責聲明",VZ="披露聲明",WZ="已斷連",GZ="前後移位",YZ="股息",qZ="股息",KZ="需求指數",zZ="十字星圖",XZ="下行",QZ="概率曲線下部",ZZ="下行移動",JZ="起草訂單",eJ="距到期天數",tJ="收益報告",sJ="编辑",nJ="编辑",rJ="投資教育",oJ="電郵",aJ="英文",iJ="EOM",lJ="每股收益",cJ="預估",dJ="易借股",uJ="歐式期權",hJ="交易所",pJ="交易所",mJ="展開",gJ="到期",SJ="到期日",fJ="已過期",TJ="已過期",yJ="到期日",CJ="指數移動平均(EMA)",bJ="外在價值",EJ="外在價值",AJ="因素",vJ="否",IJ="快線",xJ="二月",wJ="意見反饋",OJ="成交訂單",RJ="成交訂單",DJ="成交訂單",LJ="平倉",_J="外匯",NJ="週五",PJ="週五",kJ="轉自",MJ="基金",$J="基本面",jJ="期貨",BJ="期貨",FJ="盈",HJ="網格",UJ="取消前有效(GTC)",VJ="平均K線",WJ="50%水平線",GJ="高",YJ="高",qJ="直方圖",KJ="歷史波動率",zJ="高低波動",XJ="持有",QJ="小時",ZJ="小時",JJ="小時",eee="難借股",tee="HULL移動平均(HMA)",see="歷史波動率",nee="隱含波動率",ree="隱含波動率",oee="上漲",aee="產業",iee="中級",lee="內在價值",cee="內在價值",dee="鐵鷹策略",uee="在價內",hee="隱含波動率",pee="一月",mee="七月",gee="六月",See="K係數",fee="克林格擺動指標",Tee="語言",yee="最新價",Cee="最新價",bee="下行帶1",Eee="下行帶2",Aee="長度",vee="長度",Iee="水平線",xee="淺色",wee="限價",Oee="線條圖",Ree="線性",Dee="收盤限價(LOC）",Lee="登出",_ee="買入",Nee="低",Pee="低",kee="下行",Mee="下行通道",$ee="下行線",jee="下行線",Bee="線性回歸",Fee="線性回歸逆轉",Hee="線性回歸斜率",Uee="最後交易日",Vee="M(百萬)",Wee="移動平均",Gee="MACD",Yee="三月",qee="中間價",Kee="中間價",zee="中間價",Xee="市價",Qee="市場情緒指標",Zee="最長",Jee="五月",ete="麥克林指標(MCL)",tte="菜單",ste="中",nte="中頻帶",rte="中線",ote="LR中行線",ate="中行線",ite="中點",lte="分鐘",cte="分鐘",dte="分鐘",ute="市價",hte="做市商行動",pte="收盤市價(MOC)",mte="模式",gte="動量指標",Ste="週一",fte="週一",Tte="資金流量指標(MFI)",yte="月",Cte="月",bte="每月",Ete="更多",Ate="我的",vte="布林變數",Ite="接近",xte="近期",wte="中性水平",Ote="肯特納變數",Rte="否",Dte="否",Lte="正態",_te="正態封頂價格過濾器",Nte="通知",Pte="十一月",kte="非借股",Mte="NVI",$te="OBV",jte="OCO訂單",Bte="十月",Fte="關閉",Hte="於",Ute="開啟",Vte="開",Wte="開盤",Gte="未平倉合約",Yte="期權",qte="期權",Kte="期權",zte="或",Xte="其它",Qte="優異",Zte="超買",Jte="超買",ese="超賣",tse="超賣",sse="賣權",nse="配對訂單",rse="轉向標準",ose="密碼",ase="市盈率",ise="百分比變化",lse="時間段s",cse="個人",dse="極化分型效率",use="百分比高點警示",hse="轉折高點",pse="轉折低點",mse="百分比低點警示",gse="下午結算",Sse="盤後",fse="投資組合",Tse="倉位",yse="倉位",Cse="軸心點",bse="價格",Ese="價格",Ase="價格擺動",vse="個人設置",Ise="賣權",xse="賣權",wse="賣權",Ose="賣權",Rse="PVI",Dse="PVT",Lse="數量",_se="數量",Nse="商數",Pse="阻力點1",kse="阻力點2",Mse="利率",$se="實時",jse="被拒訂單",Bse="被拒訂單",Fse="代替",Hse="重設",Use="收入",Vse="查核訂單",Wse="資本回報",Gse="風險回報",Yse="RSI",qse="R平方",Kse="支撐點1",zse="支撐點2",Xse="週六",Qse="週六",Zse="保存",Jse="掃描",ene="秒",tne="秒",sne="個已選",nne="賣出",rne="賣出",one="發送",ane="九月",ine="設置",lne="結算",cne="股份",dne="市場方",une="信號",hne="信號",pne="簡單移動平均(SMA)",mne="單支",gne="單支訂單",Sne="成交量",fne="滑動桿",Tne="慢線",yne="價差策略",Cne="平方",bne="擠壓",Ene="擠牌警示",Ane="狀態",vne="標準差",Ine="快速隨機指標",xne="慢速隨機指標",wne="股票",One="股票",Rne="股票",Dne="止損",Lne="止損限價",_ne="止損",Nne="跨式策略",Pne="跨式策略",kne="勒式策略",Mne="勒式策略",$ne="策略",jne="執行價",Bne="行使價",Fne="提交",Hne="小計",Une="總結",Vne="綜合指標",Wne="週日",Gne="週日",Yne="客戶服務",qne="代號",Kne="T(萬億)",zne="然後",Xne="闕值",Qne="週四",Zne="週四",Jne="跳價",ere="有效期",tre="時間",sre="趨勢噪音平衡",nre="轉入",rre="當天",ore="當天",are="總計",ire="總計",lre="交易",cre="的交易",dre="跟蹤止損",ure="跟蹤止損限價",hre="已激活",pre="觸發線",mre="跟蹤止損",gre="跟蹤止損限價",Sre="是",fre="週二",Tre="週二",yre="TVI",Cre="上行帶1",bre="上行帶2",Ere="潰瘍分布",Are="不可用",vre="非平衡策略",Ire="底層證券",xre="不佳",wre="撤消",Ore="100%水平線",Rre="未選",Dre="上行",Lre="上下行差異",_re="上行",Nre="上行通道",Pre="上行線",kre="上行線",Mre="概率曲線上部",$re="上行移動",jre="用戶名",Bre="數值",Fre="垂直滚仓",Hre="垂直策略",Ure="垂直策略",Vre="成交流量指標",Wre="十字過濾線",Gre="查看",Yre="變異平均線",qre="成交量",Kre="波動轉換",zre="平均成交量",Xre="成交量變動率",Qre="波動率標準差",Zre="成交量",Jre="成交量",eoe="成交量震盪指標",toe="成交量加權平均價格(VWAP)",soe="觀察列表",noe="波1",roe="波2高點",ooe="波2低點",aoe="週三",ioe="週三",loe="週",coe="週",doe="平日",uoe="每週",hoe="周期權",poe="加權移動平均(WMA)",moe="當",goe="WILDERS移動平均(WS)",Soe="尚待執行訂單",foe="尚待執行訂單",Toe="尚待執行訂單",yoe="年",Coe="是",boe="是",Eoe="收益率",Aoe="零線",voe="轉折趨勢$",Ioe={__locale:bX,__Namespace:EX," ":""," through ":"至"," to ":"午","# Shares":"# 股數","$ Dollars":"$ 美元","$.params.<?>: `limitPrice` cannot be null for the chosen order type":"所選的訂單類型限價不可以是空值","% Percent":"% 百分比","(800) 669-3900":"(800) 669-3900","(actual)":"實際","(est)":"預估","(H+L)/2":"(高+低)/2","(H+L+C)/3":"(高+低+收)/3","(O+H+L+C)/4":"(开+高+低+收)/4",". Trade Price Below the Bid":"。低於買方價的交易價",".":"。","1 Day":"1天","1 Year":"1年","1-877-888-1238":"中文服務：1-877-888-1238","1D":"1天","1h":"1小時","1M":"1個月","1st trgs 2 OCO":"訂單1激活2個OCO訂單","1st trgs 3 OCO":"訂單1激活3個OCO訂單","1st trgs All":"訂單1激活所有訂單","1st trgs OCO":"訂單1激活OCO訂單","1st trgs Seq":"訂單1序列激活下個訂單","1W":"1週","1Y":"1年","2 Day":"2天","2 Hour":"2小時","2 Week":"2週","2D":"2天","2h":"2小時","3 Month":"3個月","3M":"3個月","4 Hour":"4小時","4h":"4小時","5 Day":"5天","5 Minute":"5分鐘","5 Year":"5年","5D":"5天","5m":"5分鐘","5Y":"5年","6 Month":"6個月","6M":"6個月","10 Day":"10天","10D":"10天","20 Day":"20天","20 Year":"20年","20D":"20天","20Y":"20年","30 Minute":"30分鐘","30m":"30分鐘","50-Day Avg. Volume":"50日平均成交量","52 week high":"52週高","52 week low":"52週低","52High":"52週高","52Low":"52週低","@ASK":"@賣方價","@BID":"@買方價","@MKT":"@市價","About This Website":"關於本網站",ABOVE:AX,Above:vX,above:IX,"Absolute Reversal":"逆轉絕對值",AccDist:xX,AccDistVolPr:wX,"Acceleration Factor":"加速因子","Acceleration Limit":"加速因子上限","Accelerations Bands":"加速帶","Accept All Disclosures":"同意所有披露聲明","Account History":"賬戶歷史","Account Summary":"賬戶總結","Account Value":"賬戶價值",account:OX,Account:RX,act:DX,"Activation Price":"激活價格","Active Trader":"活躍交易",Active:LX,Activity:_X,"Actual Earnings Per Share":"實際每股收益",AD:NX,"Add 5 strikes above":"添加上面的5個行使價","Add 5 strikes below":"添加下面的5個行使價","Add Cash":"注资","Add Left Extension":"添加左延伸","Add Right Extension":"添加右延伸","Add Study":"添加研究","Add Symbol To Watchlist":"給觀察列表添加代號","Add to Watchlist":"添加至觀察列表","Added to":"添加到","Additional Forex execution data available by request by contacting the Trade Desk":"如需更多外匯執行數據，請聯絡交易台","Adjusting account balance was not successful. Please try again.":"調整賬戶余額沒有成功。請再試一次。","Advanced Orders":"高級訂單","After Market":"盤后","Aggregation Period":"匯總時期","Alert Line":"警示線",Alert:PX,Alerts:kX,"All Account Positions":"所有賬戶倉位","All Account Trades":"所有賬戶交易","All Accounts":"所有賬戶",All:MX,Alternate:$X,AM:jX,am:BX,Amount:FX,"An error has occurred":"出現錯誤","An error occurred. Please try again.":"發生錯誤。 請再試一次。","Analyst Reports":"分析師報告","Analyst Reports: Coming Soon!":"分析師報告: 即將發布!",AND:HX,And:UX,Annual:VX,"Apply Persons Levels Filter":"應用Persons水平過濾器",Apply:WX,Apr:GX,"Are you sure you wish to leave?":"您確定要離開嗎？","Area Negative":"負區域","Area Positive":"正區域",AREA:YX,"As of":"截止",AS:qX,"Ask Size":"卖方量","Ask size: ":"賣方量：","ASK {{trigger}} is not allowed in order conditions because market centers can report arbitrarily high ASK.":"不允許“賣方價 {{trigger}} ”訂單條件，因爲市場中心可以報告因套利導致的高賣方價。",ASK:KX,ask:zX,Ask:XX,"Ask, ":"賣方價，","Ask:":"賣方價：","AT OR ABOVE":"等於或高於","AT OR BELOW":"等於或低於","Atr Length":"ATR時間長度","Atr Reversal":"ATR逆轉係數","Audio Notifications Toggle":"音頻通知切換","Audio Notifications":"音頻通知",Aug:QX,"Auto Send":"自動發送","Auto-Logout":"自動登出","Available Buttons":"可用按鈕","Available Columns":"可選項目","Average Length":"平均長度","Average Type":"移動平均類型",average:ZX,Average:JX,"Avg Trade Price":"平均交易價格",Avg:eQ,Avoid:tQ,B:sQ,"Back to Column Customization":"返回序列自定義","Back to Studies":"返回研究","Back to Tool Selection":"返回工具選擇","back vol":"後月波動率","Back Vol":"後月波動率","Back Volatility":"后月波动率","BACK/RATIO":"反向/比率","Back/Ratio":"反向/比率",BACKRATIO:nQ,Backratio:rQ,Band:oQ,Bandwidth:aQ,"Bar Plus":"正價格柱",BAR:iQ,BASE:lQ,Basis:cQ,BB:dQ,Bearish:uQ,"Before Market":"盤前","Begin Date":"開始日期","Begin Time":"開始時間",Below:hQ,below:pQ,BELOW:mQ,Beta:gQ,"Between the market":"在買方價/賣方價之間交易","Bid Size":"買方量","Bid size: ":"買方量：","BID {{trigger}} is not allowed in order conditions because market centers can report arbitrarily low BID.":"不允許“買方價 {{trigger}} ”訂單條件，因爲市場中心可以報告因套利所致的低買方價。",BID:SQ,bid:fQ,Bid:TQ,"Bid, ":"買方價，","Bid:":"買方價：","Big Point Value":"整點價值","Blast All":"全部發送","Bollinger Bands":"布林軌道(BB)","Bond Trade":"債券交易",Bond:yQ,"Book Value Per Share Growth":"每股賬面價值增長","Book Value Per Share":"每股賬面價值","Border Down":"下跌邊框","Border Up":"上漲邊框","Borrow %":"借股費率%","BP Effect":"購買力影響","Browser Version":"瀏覽器版本",Browser:CQ,BS:bQ,"Bulge Length":"凸起長度",Bulge:EQ,Bullish:AQ,BUTTERFLY:vQ,Butterfly:IQ,"Buy @ASK":"買入@賣方價","Buy @BID":"買入@買方價","Buy @MKT":"買入@市價",BUY:xQ,Buy:wQ,"Buying Power Effect":"購買力影響","Buying Power":"購買力",C:OQ,"Calculation Mode":"計算模式",CALENDAR:RQ,Calendar:DQ,"Call Volume Index":"買權成交量指數",CALL:LQ,call:_Q,Call:NQ,Calls:PQ,"Can not send screenshot":"無法發送截圖","CANCEL AT":"取消於","Cancel Selected":"取消所選","CANCEL WHEN":"取消當","Cancel {{number}} Orders":"取消{{number}}個訂單",Cancel:kQ,CANCELED:MQ,Canceled:$Q,canceled:jQ,Cancelled:BQ,CANDLE:FQ,"Cannot cancel order":"無法取消訂單。","Cannot find this spread.":"找不到此價差。","Cannot replace with the order on the different BUY/SELL side.":"不能以不同的買賣方來代替訂單","Cash Flow Per Share":"每股現金流",Cash:HQ,Categories:UQ,"Centered On":"居中",ChaikinOsc:VQ,"Changing of this watchlist is unavailable":"此觀察列表尚不可更改","Charles Schwab Acquisition FAQs":"嘉信收購常見問答","Chart Detail":"圖表詳細","Chart High/Low":"圖表 高/低","Chart Range":"圖表範圍","Chart Settings":"圖表設置",Charts:WQ,"Clear All":"清除所有","Click “Symbol” below to add a symbol to your watchlist":"點擊以下“代號”來為觀察列表添加代號","Clients are unable to place a Market Order on an Opening Transaction for OTCBBN securities.":"客戶不可以下布告欄證券(OTCBBN)的市價開倉訂單。","Clients are unable to place Short Sells for OTCBB Securities.":"客戶不可以賣空布告欄 (OTCBB) 證券。","Clients are unable to place Short Sells for OTCBBN Securities.":"客戶不可以賣空布告欄 (OTCBB) 證券。","Close Active Trader Settings Menu":"關閉活躍交易設置菜單","Close Add Study Menu":"關閉添加研究菜單","Close Chart Settings Menu":"關閉圖表設置菜單","Close Drawings Menu":"關閉繪圖菜單","close price":"收盤價","Close Selected":"平倉所選倉位",Close:GQ,CLOSE:YQ,CMF:qQ,Collapsed:KQ,"COLLAR WITH STOCK":"領子策略與股票",COLLAR:zQ,Collar:XQ,"COLLAR/SYNTHETIC":"領子/合成策略","Color as symbol ticks":"當代號跳價時塗色","Color Mode":"色調","Color Norm Length":"顏色正常長度",Color:QQ,"Column configuration drawer expanded":"欄目配置屜已展開","Column Drawer":"欄目屜","COMBINED ACCOUNT":"綜合賬戶",COMBO:ZQ,Combo:JQ,"Commission based FX contracts are different from non-commission FX contracts, they do not offset each other.":"佣金外匯合約與非佣金外匯合約有所不同，它們彼此不會相互抵消。","Comp %":"比較%",Comp:eZ,"Comparison - Percent":"比較-百分比",Comparison:tZ,ComparisonPercent:sZ,CONDOR:nZ,Condor:rZ,Connected:oZ,Connecting:aZ,"Contact support":"請聯繫客戶服務","contact us":"聯繫我們","Contingent Order":"觸發訂單",Continue:iZ,"Copied!":"已複製",Copied:lZ,"Copy Order URL":"複製訂單URL","Copy to clipboard":"復制到剪貼板",Copy:cZ,"Correction Factor":"矯正係數",COSC:dZ,Cost:uZ,"Couldn't find Instrument by ${dynamicField} ${dynamicField} null":"找不到產品 ${dynamicField} ${dynamicField} 無效","COVERED order may not have LOC type.":"持保訂單不可以使用收盤限價(LOC)訂單類型。","COVERED order may not have MOC type.":"持保訂單不可以使用收盤市價(MOC)訂單類型。","Covered Stock":"持保買權","Covered stocks trade in 100 share increments":"持保股票以100股爲增量交易",Covered:hZ,COVERED:pZ,"Create Alert":"創建警示","Create Watchlist":"創建一個觀察列表","Credit price on debit spread":"支出價差顯示了入賬",credit:mZ,"Crossing Type":"交叉類型","Current Equity":"當前凈資產","Current Price":"當前價格","Current Ratio":"流動比率",Current:gZ,CUSTOM:SZ,Custom:fZ,"Customize Active Trader":"自定義活躍交易","Customize Columns":"自定義項目","Cutoff Length":"截止時間長度",CVI:TZ,"D Period":"d時期",D:yZ,d:CZ,"Daily High":"當日最高","Daily Low":"當日最低",Daily:bZ,Dark:EZ,data:AZ,Data:vZ,"date format":"日期格式","Date Published":"發布日期",Date:"日期","DATE/TIME":"日期/时间","Day (13h)":"當天(13小時)","Day (24h)":"當天(24小時)","Day (AM)":"當天(盤前)","Day (EXT 13h)":"當天(延長時段13個小時)","Day (EXT AM)":"當天(盤前)","Day (EXT PM)":"當天(盤后)","Day (EXTO 24h)":"當天(隔夜延長時段24小時)","Day (PM)":"當天(盤後)","Day Gain $":"當天盈/虧$","Day Gain %":"當天盈/虧%","Day Trade Buying Power":"當日沖銷購買力","Day Trades Left":"還剩當日沖銷次數",DAY:IZ,day:xZ,Day:wZ,"day(s)":"天","Days to Exp":"距到期日期","Days to Expiration":"距到期天數",days:OZ,"DBL DIAG":"雙對角策略","Dbl Diag":"雙對角策略","Debit price on credit spread":"收入價差顯示了出賬",debit:RZ,Dec:DZ,Decreasing:LZ,"Default Account":"默認賬戶","Default Order Quantity":"默認訂單數量","Default Order Type":"默認訂單類型","Delayed data":"延遲數據",Delayed:_Z,"Delete ${Watchlist Name} scan query":"刪除 ${Watchlist Name} 掃描查詢","Delete ${Watchlist Name} watchlist":"刪除 ${Watchlist Name} 觀察列表","Delete Symbol":"刪除代號",Delete:NZ,deleted:PZ,Deliverable:kZ,"Delta Between":"Delta區間","Denoted in millions":"百萬為單位",Desc:MZ,Description:$Z,Deviations:jZ,DIAGONAL:BZ,Diagonal:FZ,"Diff Type":"差異類型",Diff:HZ,Disclaimers:UZ,Disclosures:VZ,Disconnected:WZ,"Displace Length":"置換長度",Displace:GZ,"Div Amount":"股息金額","Dividend Amount":"股息金額","Dividend Payout Per Share":"每股派息","Dividend Payout":"股息支付","Dividend Yield":"股息收益率",Dividend:YZ,"Dividends Table":"股息表",Dividends:qZ,DMIndx:KZ,Doji:zZ,"Dollar amount must be above limit cost.":"美元金額必須高于限價成本","Dollar amount must be above the current limit price.":"美元金額必須高于當前限價","Dollar amount must be above the current market price.":"美元金額必須高于當前市價","Double Diagonal":"雙對角策略",Down:XZ,DownProbExp:QZ,DownStep:ZZ,Draft:JZ,"Drag and drop columns":"拖放欄目","Drag columns above to modify.":"拖拽上面的欄目來修改","Drawing Set Name":"繪圖集名稱","Drawing set with such name already exists":"已有該名稱的繪圖集",DTE:eJ,"Due to potentially wide markets or liquidity risks at the time of activation, this order may be manually substituted with a limit order upon activation and worked until filled":"由于可能存在廣泛的市場或流動性風險，該訂單在激活時可能被手動替換爲限價訂單，直到成交爲止。","During Market":"盤中","E.g. JohnDoe":"例如: JohnDoe","Earnings Per Share - TTM":"每股收益-TTM","Earnings Per Share":"每股收益","Earnings Table":"收益表",Earnings:tJ,"Edit Selected":"編輯所選項目","Edit Study":"編輯研究","Edit Symbol Info":"編輯代號信息",Edit:sJ,edit:nJ,Education:rJ,"Eff Ratio Length":"效率比長度",Email:oJ,English:aJ,"Enter symbol to view chart":"輸入代號查看圖表","Entering this order will cancel your open working orders ({{orders}})":"輸入這個訂單將取消您的尚待執行訂單 ({{orders}})",EOM:iJ,EPS:lJ,"Equity options":"股票期權",est:cJ,"Estimated Cost of Trade":"預計交易成本","Estimated Earnings Per Share":"預估每股收益",ETB:dJ,European:uJ,"Ex Date":"除息日",EX:hJ,"Ex-Dividend Date":"除息日",Exchange:pJ,"Executing one more day trade (round trip), will restrict this account to closing transactions only because you do not have the minimum $25,000 equity to be permitted to be a pattern day trader. If you want to learn more, please go to the Learning Center and search “Pattern Day Trading”.":"作為慣性當日沖銷客戶，您賬戶的淨資產不夠最低要求的$25,000，如果再做一次當日沖銷(一進一出），這個賬戶將被限制，屆時只能做平倉交易。如要了解更多，請去學習中心搜索“慣性當日沖銷交易(Pattern Day Trading)”。","Execution Price":"執行價格",Expanded:mJ,Expiration:gJ,expiration:SJ,EXPIRED:fJ,Expired:TJ,expiry:yJ,EXPONENTIAL:CJ,"Ext Left":"左側延伸","EXT PM order must be LIMIT order.":"盤後訂單必須是限價單。","Ext Right":"右側延伸","EXTENDED HOURS order must be LIMIT order.":"延長發票訂單必須是限價單。","EXTENDED OVERNIGHT HOURS order must be LIMIT order.":"隔夜延長時段訂單必須是限價單。",Extrinsic:bJ,ExtVal:EJ,Factor:AJ,False:vJ,"Fast Length":"快速長度",FastLine:IJ,Feb:xJ,Feedback:wJ,"Fill Down":"下跌填充","Fill Up":"上漲填充",FILLED:OJ,Filled:RJ,filled:DJ,"Financial Leverage (Assets/Equity)":"財務槓桿(資產/淨資產)","Find a Study":"查找研究","Find a Symbol":"查找一個代號","First name":"名","First triggers 2 OCO":"訂單1激活2個OCO訂單","First triggers 3 OCO":"訂單1激活3個OCO訂單","First triggers All":"訂單1激活所有訂單","First triggers OCO":"訂單1激活1個OCO訂單","First triggers Seq":"訂單1激活下一個","Fit Studies in Y-axis":"在價格軸上適合研究","Fixed Charge Coverage Ratio":"固定收費覆蓋率",Flatten:LJ,"Forex Buying Power Effect":"外匯購買力影響","Forex Buying Power":"外匯購買力","FOREX order must have positive limit price.":"外匯訂單的限定價格必須是正數","FOREX order should have a quantity that is the multiple of forex lot size: 10000":"外匯訂單的數量必須是一手的乘數：10000","Forex Trade":"外匯交易",Forex:_J,"Forgot Password":"忘記密碼","Forgot User ID":"忘記用戶名","Fractional quantities are not allowed for current user":"不允許當前用戶交易非整數數量","Fractional quantities are not supported for {{symbol}}":"不支持{{symbol}}的分數股數","Free Cash Flow Per Share":"每股自由現金流",fri:NJ,Friday:PJ,From:kJ,"Front Vol":"當月波動率","front vol":"當月波動率高於","Front Volatility":"當月波動率","Full Range":"全部範圍","FullD Color":"FullD顏色","FullK Color":"FullK顏色","FUND is not allowed in order conditions because its price is not real-time.":"共同基金不允許附加訂單條件，因爲報價不是實時的。","FUND order must be MARKET or AMOUNT.":"基金訂單必須是市價或金額","Fund Trade":"基金交易",Fund:MJ,"Fundamentals coming soon!":"「基本面」即將推出！",Fundamentals:$J,"Fut Calendar":"期貨日曆","FUTURE order cannot be validated, because margin is not available. Please call thinkorswim trade desk.":"由於沒有保證金信息，無法確認期貨訂單。請聯系thinkorswim交易台。","FUTURE order must have positive limit price.":"期貨訂單的限定價格必須是正數","Future Trade":"期貨交易",Future:jJ,"Futures and futures options":"期貨和期貨期權","Futures Calendar":"期貨日曆","Futures options are not allowed on this account":"此賬戶不可做期貨期權交易。",Futures:BJ,"Gain %":"盈%","gain at expiration":"到期盈利","Gain Per Tick":"每跳價盈虧","gain today":"當天盈利",Gain:FJ,"Gain/Loss %":"盈/虧%","Gain/Loss Day $":"當天盈/虧$","Gain/Loss Day %":"當天盈/虧%","Gain/Loss Overall $":"總體盈/虧$","Gain/Loss Overall %":"總體盈/虧%","Gain/Loss Profile":"盈/虧概覽","Gain/Loss YTD $":"年度至今盈/虧$","Gain/Loss YTD %":"年度至今盈/虧%","Gain/Loss":"盈/虧","gain/loss:":"盈/虧:","Global Trading Hours":"全球交易時段","Go to":"瀏覽",Grid:HJ,"Gross Profit Margin":"毛利潤率","GTC (13h)":"GTC(13小時)","GTC (24h)":"GTC(24小時)","GTC (EXT 13h)":"GTC(延長時段13個小時)","GTC (EXTO 24h)":"GTC(隔夜延長時段24小時)",GTC:UJ,HADiff:VJ,HalfLine:WJ,"has been created successfully":"已被成功創建","has been submitted to":"訂單已為賬戶","Hi Alert":"高點警示",HIGH:GJ,High:YJ,"High:":"高:",Histogram:qJ,historical:KJ,HLVolatility:zJ,Hold:XJ,"Hong Kong Office":"香港公司辦公時間：",Hour:QJ,hour:ZJ,hours:JJ,HTB:eee,"HTB/ETB":"難借股/易借股",HULL:tee,HV:see,"If balance is zero, please refresh browser to update.":"如果餘額爲零，請刷新瀏覽器進行更新。","If the problem persists, ":"如果仍有問題，","IMP VOLATILITY":"隱含波動率","Implied Volatility %":"隱含波動率%","Implied Volatility":"隱含波動率(IV)",implied:nee,ImpVol:ree,Increasing:oee,"Index Monitor Settings":"指數監視設置",Industry:aee,"Initial Investment":"初始投資","Instrument {{instrument}} cannot be traded.":"{{instrument}}不可以交易。","Interest Rate - Estimated Average":"利率-平均估值",Intermediate:iee,Intrinsic:lee,IntVal:cee,"Invalid Price":"無效的價格","Invalid Spread":"無效價差","Inventory Turnover":"庫存周轉率","IRON CONDOR":"鐵鷹策略","Iron Condor":"鐵鷹策略","iron condor":"鐵鷹策略",IRON_CONDOR:dee,"is above":"高於","is at or above":"等於或高於","is at or below":"等於或低於","is below":"低於","Is Cumulative":"累積的",ITM:uee,"IV Pctl":"IV百分比","IV Percentile":"IV百分位數",IV:hee,Jan:pee,July:mee,Jun:gee,"K Period":"k時期",K:See,"Keep swimming":"继续留在thinkorswim",KVOsc:fee,"Language Selection":"語言選擇",Language:Tee,"Last name":"姓","Last Size":"最新量","Last Trade Date":"最後交易日",last:yee,Last:Cee,LB1:bee,LB2:Eee,"Lead Wave":"領先波","Learning Center":"學習中心","Leave thinkorswim":"離開thinkorswim",Length:Aee,length:vee,"Level II":"二級報價",LevelLine:Iee,Light:xee,"LIMIT order must have a price.":"限價單必須要輸入一個價格。","Limit price exceeds strike-difference":"限價超過行使價差額","Limit price is too aggressive":"限價距市場太遠",LIMIT:wee,"Lin Reg Length":"線型回歸長度","Line Negative":"負值線","Line Positive":"正值線",LINE:Oee,Linear:Ree,"Live Support":"線上客服","LIVE TRADING DISCLAIMER":"真實交易免責聲明","Live Trading":"真實交易","Lo Alert":"低點警示","Loading...":"正在加載…","LOC order may not be a part of OCO group.":"收盤限價(LOC)訂單不可以是OCO訂單組的一部分。","LOC order may not have cancel conditions.":"收盤限價單(LOC)不可以附加取消條件。","LOC order may not have conditions.":"收盤限價單(LOC)不可以附加條件。",LOC:Dee,"Log in":"登入","Log Out":"登出","Log-in failed. Check your user ID and password. Try again or":"登入失敗 檢查您的用戶名和密碼。再試一次或者",Logout:Lee,"Long Length":"慢速週期長度",Long:_ee,"Long-term Debt to Capital":"長期債務資本比率","loss at expiration":"到期虧損","loss Today":"當天虧損",LOW:Nee,Low:Pee,"Low:":"低:",Lower:kee,LowerBand:Mee,LowerLevel:$ee,LowerLine:jee,LR:Bee,LRR:Fee,LRS:Hee,LTD:Uee,"M A C D Length":"MACD長度","M A C D Level":"MACD水平","M A Length":"MA長度",M:Vee,MA:Wee,"MACD Length":"MACD長度",MACD:Gee,Mar:Yee,"Margin Req":"維持保證金要求","Margin Req.":"保證金要求","Mark % Change":"中間價變化%","Mark Change":"中間價變化","Mark Chng $":"中間價變化$","Mark Chng %":"中間價變化%","Mark Chng":"中間價變化","Mark Price":"中間價",MARK:qee,Mark:Kee,mark:zee,"Market Bell Toggle":"市場鐘聲切換","Market Cap $M":"市值 $百萬","Market Cap / Common Equity Ratio":"市值/普通股比率","Market Cap":"市值","Market Maker Move":"做市商變動","Market open / close":"市場開盤/收盤","MARKET order may not have cancel conditions.":"市價單不可以附加取消條件。","MARKET order must have DAY time-in-force.":"市價單必須是當天單。","Market Value":"市場價值",MARKET:Xee,MarketSentiment:Qee,"Max Gain":"最大盈利","Max Loss and Profit does not reflect underlying price moves below $0. Actual Profits or Losses may be greater than displayed information.":"當有效證券的價格低於$ 0時，最大盈虧數值並不代表實際的盈虧。實際盈虧可能要大於所顯示的信息。","Max Loss":"最大虧損","Max Volume Cut Off":"最大成交量截止週期",Max:Zee,May:Jee,McClellanOsc:ete,Menu:tte,"Mid price":"中間價","Middle Band":"中頻帶",Middle:ste,MiddleBand:nte,MiddleLine:rte,MiddleLR:ote,MidLine:ate,MidPoint:ite,"Min Size":"最小數量","Min Swing":"最小價格波動","Min Tick Value":"最小跳價",Min:lte,minute:cte,minutes:dte,"Mkt Cap":"市值",MKT:ute,MMM:hte,"MOC order may not be a part of OCO group.":"收盤市價(MOC)訂單不可以是OCO訂單組的一部分。","MOC order may not have cancel conditions.":"收盤市價單(MOC)不可以附加取消條件。","MOC order may not have conditions.":"收盤市價單(MOC)不可以附加條件。",MOC:pte,Mode:mte,Momentum:gte,mon:Ste,"Monday through Friday, 7 am to 6 pm ET":"週一至週五，美東時間上午7點至下午6點。",Monday:fte,MoneyFlowIndex:Tte,MONTH:yte,Month:Cte,Monthly:bte,More:Ete,"Most Relevant":"最相關內容","Move Money":"轉移資金","Moving Average":"移動平均","Moving Avg Length":"移動平均長度","Mute All":"全部靜音","My Commission":"我的佣金","My Margin":"我的保證金","My Portfolio":"我的投資組合",my:Ate,"N B B":"N B B","N K":"N K","Name already in use. Pick a new one.":"該名稱已被使用。請選新的名稱",NBB:vte,Near:Ite,NearTerm:xte,"Negative to Positive":"負到正","Net Change":"净变化","Net Income":"淨收入","Net Liq":"市場價值","Net Prc":"淨價","Net Profit Margin":"淨利潤率","Neutral From Avoid":"從迴避到中立","Neutral From Long":"從買入到中立",NeutralLevel:wte,"New Drawing Set":"新繪圖集","New Watchlist":"新的觀察列表",NK:Ote,"No Active Alerts. Click Create Alert when looking at a symbol to set an alert.":"沒有活躍的警示。在查看代號時點擊創建警示來設置一個警示。","No Canceled Alerts. Click Create Alert when looking at a symbol to set an alert.":"沒有已取消的警示。在查看代號時點擊創建警示來設置一個警示。","No Change":"不變","No equity trading is allowed on this account":"此賬戶不可以做股票交易","No forex trading is allowed on this account":"此賬戶不可做外匯交易。","No futures trading is allowed on this account":"此賬戶不可做期貨交易。","No Level II Data":"沒有二級報價數據","No New Notifications":"沒有新的通知","No results for ${searchValue}":"沒有${searchValue}的結果","No Time and Sales Data":"無時間與銷售數據","No Triggered Alerts. Click Create Alert when looking at a symbol to set an alert.":"沒有已激活的警示。在查看代號時點擊創建警示來設置一個警示。",No:Rte,no:Dte,"Noise Length":"噪音長度","Noise Type":"噪音類型",Normal:Lte,NormRoofingFilter:_te,'Note (for {{account}}TDA): You may enter this opening trade, but if you close it today you will have done more than 3 day trades in 5 days and your account will be flagged as "pattern day trader". For more information, please see our FAQ on pattern day trading. Click "Confirm and Send" if you want to enter this trade.':"請注意 (有關 {{account}}TDA): 您可以下這個開倉訂單，但是如果您今天平倉，您將在5個工作日當中已做了5次當日沖銷，您的賬戶將被定義爲“慣性當日沖銷帳戶(PDT)”。更多相關信息，請查閱我們有關慣性當日沖銷交易的常見問答。如果您仍想下單，點擊“確認幷發送”。",Notifications:Nte,Nov:Pte,NTB:kte,"Num Dev Dn":"下行偏離數目","Num Dev Up":"上行偏離數目",NVI:Mte,OBV:$te,OCO:jte,Oct:Bte,Off:Fte,"On this account you cannot open new futures positions.":"在這個賬戶您不可以做新的期貨開倉交易 。","On this account you cannot open new positions":"這個賬戶不能做新的開倉交易。",on:Hte,On:Ute,"One or more filters in this scan are not available to edit and will not be included when the scan is run":"此掃描中的一個或多個篩選條件不可編輯，並且在掃描運行時不會包括在內","Open a live account":"開設真實賬戶","Open Active Trader Settings Menu":"打開活躍交易設置菜單","Open Add Study Menu":"打開添加研究菜單","Open an account":"開設賬戶","Open Chart Settings Menu":"打開圖表設置菜單","Open Drawings Menu":"打開繪圖菜單","Open Int":"未平倉合約","OPEN INTEREST":"未平倉合約","Open Interest":"未平倉合約",Open:Vte,OPEN:Wte,"Operating Profit Margin":"運營利潤率","Operating System Version":"操作系統版本","Operating System":"操作系統",OpInt:Gte,"Option Buying Power":"期權購買力","Option Chain":"期權鏈","Option Leg":"期權分支","Option positions in your account are grouped by spread type. You can turn spread grouping off from the user menu.":"您賬戶中的期權倉位是按價差類型分組。您可以在用戶菜單中關閉價差分組。","Option Stats":"期權統計數據","Option Trade":"期權交易","Option Volume Index":"期权成交量指数",option:Yte,OPTION:qte,"Options disclosure":"期權披露聲明",Options:Kte,Or:zte,"Order Defaults saved":"已保存訂單默認設置","Order Defaults":"訂單默認設置","Order Details":"訂單明細","Order Rejected":"订单被拒","Order Rule":"訂單規則","Order triggered by SUBMIT AT order must have the same or later SUBMIT AT time.":"由“發送於”激活的訂單必須與發送於訂單的時間相同兩端遲。","Order Types":"訂單類型","Order with negative stop price detected.":"檢測到訂單止損價格爲負值","Orders in the same OCO group must differ at least by instrument, side, price, type or exchange.":"在同一OCO訂單組的訂單必須在金融產品、市場方、價格或者交易所項目有所不同。","Orders with less than 1 shares must be of type MARKET.":"少於1股的訂單必須為市價單。","Original Equity":"初始凈資產","Original Value":"初始價值",Other:Xte,Outperform:Qte,"Over Bought":"超買","Over Sold":"超賣","Overall Gain $":"總體盈/虧$","Overall Gain %":"總體盈%","Overall, how satisfied are you with your site experience?":"總體來講，您對網站體驗的滿意程度?","OverBought Color":"超買顏色",OverBought:Zte,Overbought:Jte,"Overnight Support":"夜間客服時間：","OverSold Color":"超賣顏色",OverSold:ese,Oversold:tse,P:sse,"P/C Ratio":"賣權/買權 比率","P/L Day $":"當天盈/虧$","P/L Day %":"當天盈/虧%","P/L Display Method":"盈/虧顯示方式","P/L Open $":"開倉盈虧$","P/L Open %":"總體盈/虧%","P/L Open":"開倉盈虧","P/L YTD $":"年度至今盈/虧$","P/L YTD %":"年度至今盈/虧%","P/L":"盈/虧",Pair:nse,"Paper Money or Live Trading":"paperMoney虛擬交易或真實交易","Paper Money":"Paper Money模擬交易","paperMoney ® disclosure":"paperMoney®虛擬平台披露聲明",parSAR:rse,"Partially delayed data":"部分延遲數據","Partially delayed":"部分延遲",Password:ose,"Pay Date":"支付日",PE:ase,"Percent Change":"百分比变化","Percentage Reversal":"逆轉百分數",PercentChg:ise,Period:lse,Personal:cse,PFE:dse,pHiAlert:use,PivotHigh:hse,PivotLow:pse,"Plain MARKET order may not be a part of OCO group.":"市價單不可以是OCO訂單組的一部分。","Please call the Thinkorswim trade desk to enter this order":"請聯系thinkorswim交易台來輸入這個訂單","Please enter a part followed by '@'. '%S' is incomplete.":"完成'@'後面的那部分。 '%S'沒有寫完。","Please fill out this field.":"請填寫這一項。","Please include an '@' in the email address. '%S' is missing an '@'.":"請在電郵地址裡包含 '@' 。 在'%S' 裡沒有 '@'。","Please lengthen this text to 2 characters or more (you are currently using 1 character).":"請將字符增加到二個以上(您現在只用了一個字符)。","Please note that we can not respond directly to feedback provided here. If your feedback requires a response, or if you have any direct questions, please call or email us using the contact information found by clicking 'Support'.":"請注意我們不能對在這裡的反饋直接回复。如果您需要我們對反饋做出回复，或者您有任何直接問題，請點擊“客戶服務”電話或電郵聯繫我們。","Please note that you have selected a 'non-standard' option series and there may be liquidity and settlement risks that you are not aware of.":"請注意您已選擇“非標準‘期權系列，可能會有您不知曉的流動性風險和結算風險。",'Please note that you have selected a weekly option series with a "non-standard" expiration date.':"請註意您已選擇了壹個‘非標準“到期日的周期權系列。","Please select a range less than %S days":"請選擇一個低于%S天的時間範圍","Please try again":"請稍後再試",pLoAlert:mse,"Plot Type":"圖表類型",PM:gse,pm:Sse,"Portfolio Digest":"投資組合文摘","Portfolio Events":"投資組合事件",portfolio:fse,"Pos Effect":"倉位影響","Position Settings":"倉位設置",Position:Tse,Positions:yse,"Positive to Negative":"正到負",PP:Cse,"Price / Book Value Ratio":"市淨率","Price / Cash Flow Ratio":"市現率","Price / Earnings Ratio":"市盈率","Price C":"價格 收","Price H":"價格 高","Price L":"價格 低","Price Type":"價格類型",Price:bse,price:Ese,PriceOsc:Ase,"Privacy mode":"隱私模式","Prob ITM":"價內概率","Prob OTM":"價外概率","Prob Range":"概率範圍","Probability of Profit":"盈利概率",Profile:vse,"Put Call Ratio":"賣權買權比率","Put Volume Index":"賣權成交量指數",PUT:Ise,put:xse,Put:wse,"Put/Call Ratio":"賣權/買權 比率",Puts:Ose,PVI:Rse,PVT:Dse,Qty:Lse,Quantity:_se,"Quick Ratio":"速動比率","Quick Start Guide":"快速開始指南(英文版)","Quote Details":"報價詳情","Quote disclosure":"報價披露聲明",Quotient:Nse,"R Average Length":"R平均長度","R O Clength":"ROC長度",R1:Pse,R2:kse,Rate:Mse,"Ratio Adjusted":"調整的比率","Re-Connect":"重新連接","Re-Connecting":"重新連接中","Realized Gain/Loss":"已實現利得/損失","Realtime data":"實時數據",Realtime:$se,"Regional Color Preference":"地區顏色喜好",REJECTED:jse,Rejected:Bse,"Remove Left Extension":"移除左延伸","Remove Right Extension":"移除右延伸","Remove Study":"移除研究","Replaced order was already filled for the requested quantity":"替代的訂單已經以所要求的數量成交",Replacing:Fse,"Reset All Balances and Positions":"重設所有餘額和倉位","Reset Colors":"重設顏色",Reset:Hse,"Resulting Buying Power for Forex":"所剩外匯購買力","Resulting Buying Power for Options":"所剩期權購買力","Resulting Buying Power for Stock":"所剩股票購買力","Resulting Buying Power":"所剩購買力","Return on Assets (ROA)":"資產回報率（ROA）","Return on Capital":"資本回報","Return on Equity (ROE)":"股本回報率（ROE）","Return on Risk":"風險回報",Revenue:Use,"Reversal Amount":"逆轉金額",Review:Vse,"Risk Profile Detail":"風險面詳細","Risk Profile Table":"風險資料表",RoC:Wse,"Roll Selected":"已選滾倉","Roof Cutoff Length":"封頂價格截止週期","Root Symbol":"底層證券",RoR:Gse,RSI:Yse,RSq:qse,S1:Kse,S2:zse,"Safe Level":"安全水平","Sales Per Share":"每股銷售額",sat:Xse,Saturday:Qse,"Save Query":"保存查詢",Save:Zse,"scan query ${Watchlist Name} deleted. Click again to undo.":"${Watchlist Name} 掃描查詢已被刪除。再次單擊可還原。",Scans:Jse,second:ene,"Secondary Security":"第二個證券",seconds:tne,"Securities in this order are subject to a HTB fee.":"此訂單中的證券需繳納難借股(HTB)費用。","Select 3 and have your account number ready.":"選擇按鍵3並準備好您的賬戶號碼。","Select all":"選擇所有","Select Bid or Ask to add up to 4 option legs.":"選擇買方價或賣方價來添加最多包含4個期權分支的訂單。","Select Watchlist":"選擇觀察列表","Selected Account Name":"已選賬戶名稱","Selected Account":"已選賬戶","Selected Totals:":"所選總數：",Selected:sne,"Sell @ASK":"賣出@賣方價","Sell @BID":"賣出@買方價","Sell @MKT":"賣出@市價",SELL:nne,Sell:rne,"Send feedback":"發送反饋意見",Send:one,"Sending your feedback":"正在發送您的意見反饋",Sept:ane,"Set Alert":"設置警示","Set New Balance to:":"設置新的餘額爲:",Settings:ine,Settlement:lne,Shares:cne,"Short Length":"快速週期長度","Short Sale Borrowing Rate":"賣空借股費率","Short sale orders are not allowed when your account equity value is less than $2,000.":"當賬戶淨資產低於$2000美元時不允許下賣空訂單。","Show Alerts":"顯示警示","Show Breakout Signals":"顯示突破信號","Show Bubbles":"顯示泡沫","Show Dividends Icon":"顯示股息圖標","Show Earnings Icon":"顯示收益圖標","Show Earnings Preview":"顯示收益預覽","Show Extended Hours":"顯示延長時段","Show Label":"顯示標籤","Show Less":"顯示更少","Show More":"顯示更多","Show Only Last Period":"只顯示最後時段","Show Only Today":"僅顯示今天","Show Option Positions":"顯示期權倉位","Show Spread Grouping":"顯示價差分組","Show Trade Price":"顯示交易價格","Show Working Orders":"顯示尚待執行訂單",Side:dne,"Signal Length":"信號長度","Signal M A":"移動平均信號",Signal:une,signal:hne,SIMPLE:pne,"Simplified Chinese":"简体","Sine Wave":"正弦波","Singapore Office":"新加坡公司辦公時間：","Singapore Support Email":"新加坡客服電郵","Single Order":"單支訂單",SINGLE:mne,Single:gne,"Site Version":"網站版本",Size:Sne,"Sizzle Idx":"熱門指數","sizzle idx":"熱門指數",Slider:fne,"Slow Length":"慢速長度","Slowing Period":"減慢時期",SlowLine:Tne,"Sm Length":"移動平均長度","Smoothing Length":"平滑長度",Spreads:yne,Squared:Cne,"Squeeze Length":"擠壓長度",Squeeze:bne,SqueezeAlert:Ene,"St Dev Length":"標準差長度","Standard Deviation":"標準差","Standard Errors":"標準誤差",Status:Ane,"Std Deviation":"標準差",StdDev:vne,"Stochastic Mode":"隨機指標模式",StochasticFast:Ine,StochasticSlow:xne,"Stock / ETF disclosure":"股票／ETF披露聲明","Stock Buying Power":"股票購買力","Stock Leg":"股票分支","STOCK order must have positive limit price.":"股票訂單的限價必須是正數。","Stock Trade":"股票交易",Stock:wne,stock:One,Stocks:Rne,STOP:Dne,STOPLIMIT:Lne,STP:_ne,STRADDLE:Nne,Straddle:Pne,STRANGLE:kne,Strangle:Mne,Strategy:$ne,Strike:jne,Strikes:Bne,"Study Added":"研究已添加","Submit and cancel conditions should be different.":"提交和取消條件必須不同。","SUBMIT AT":"發送於","Submit Symbol":"發送代號","SUBMIT WHEN":"提交當",Submit:Fne,subtotal:Hne,summary:Une,SummationIndex:Vne,sun:Wne,Sunday:Gne,Support:Yne,"Symbol Info":"代號信息","Symbol {{symbol}} deleted. Click again to undo.":"代號 {{symbol}} 已被刪除。再點擊一次撤消該動作。",symbol:qne,Symbol:"代號",T:Kne,"Take screenshot":"截圖","Tax Rate":"稅率","TD Ameritrade":"德美利證券","TD Ameritrade, Inc. is the broker-dealer for your account and is controlled by the issuer of this security, The Charles Schwab Corporation.":"德美利證券公司(TD Ameritrade, Inc.)是您賬戶的證券經紀公司，它受控於該證券發行商嘉信理財公司（The Charles Schwab Corporation）。","Tell us about your thinkorswim Web experience.":"請告訴我們您在thinkorswim網絡版上的體驗。","Thank you for submitting your feedback!":"謝謝您提交反饋意見！","The buying power designated to make this trade was created from the liquidation of an overnight position. FINRA rules mandate that use of funds created from the liquidation of overnight positions can not be used for day trading until the following day. Therefore, you can only make this trade if you intend to hold the position overnight and failure to do so may result in a day-trade margin call.":"該交易所使用的購買力是根據您隔夜倉位的清倉價值得出。 FINRA規則要求由隔夜倉位清倉價值得出的資金，只有到第二天才可以用於當日沖銷。所以，您只有意圖將倉位持有過夜才可以進行這筆交易，否則，則會產生當日沖銷保證金催繳通知。","The chat has been ended":"聊天已結束","The estimated annualized rate to sell short is {{shortSaleBorrowingRate}}. The estimated daily fee for your order is ${{dailyEstimatedFee}}. Please note that you will be charged one day's interest even if the order doesn't execute, as shares are reserved at the time of order entry. By selecting 'Send', you are agreeing to pay this fee. More details can be found at www.schwab.com/shortsale":"估計的賣空年費率為 {{shortSaleBorrowingRate}}。您的訂單的每日估計費用為 ${{dailyEstimatedFee}} 。請注意，即使訂單未執行，您也將被收取一天的利息，因為在輸入訂單時已預留了股票。選擇 '發送'，即表示您同意支付這筆費用。更多詳情請訪問 www.schwab.com/shortsale","The following accounts are included in this view":"該視圖包含以下賬戶","The limit price cannot be null for the chosen order type":"選擇性訂單類型的限價不可以是空值","The minimum price increment of instrument {{instrument}} is {{price}}. This order will not be accepted.":"代號{{instrument}}的最低遞增價格是{{price}}。此訂單將不予以接受。","The order type ${selectedOrderType} is unavailable, updated to ${orderType}":"沒有所選擇的${selectedOrderType} 訂單類型，訂單類型已被更新為${orderType}","The server is currently unable to handle the request.":"服務器當前無法處理該請求。","The strike ${selectedStrike} is unavailable, updated to ${updatedStrike}":"行使價${selectedStrike} 已不存在，行使價已更新為${updatedStrike}","The underlying security of this option is currently considered hard to borrow. If this order results in a short position due to assignment or exercise, a daily borrow fee will be charged. The current borrow rate is {{shortSaleBorrowingRate}}. If all shares of this option were assigned or exercised, the daily fee would be ${{dailyEstimatedFee}} based on yesterday's closing price. The borrow rate and fee are subject to change daily based upon market conditions":"該期權的標的證券目前很難借到。如果該訂單因指派或行權而導致空頭頭寸，則將收取每日借股費用。當前的借股費率為 {{shortSaleBorrowingRate}}。如果該期權的所有股票都被指派或行權，根據昨日收盤價計算，每日費用為 ${{dailyEstimatedFee}} 。借貸費率和費用可能根據市場情況每日變動。","The underlying security of this option is currently hard-to-borrow. Short sale orders for HTB securities may not be accepted during non-market hours due to short sale locate requirements.":"此期權標的證券目前難以藉入。由於賣空定位要求，難以藉入證券的賣空訂單在非市場交易時間內可能不被接受。","Then request to be transferred to ext. 209143.":"然後您的電話被轉接到分機號209143。",Then:zne,"Theo Price":"理論價格","There are no analyst reports for {{symbol}}":"沒有關於{{symbol}}的分析師報告","There are no available buttons":"沒有可用按鈕","There are no columns that match your search criteria.":"沒有符合您搜索條件的欄目。","There are no studies that match your search criteria.":"沒有符合您搜索條件的研究。","There are no symbols in this watchlist":"該觀察列表裏沒有代號","There are no visible buttons":"沒有顯示的按鈕","There is a position that is in the money.":"有一個在價內期權倉位。","There was an error creating this alert. Please try again":"創建警示有錯誤。請再試一次","There was an error logging in":"登入發生錯誤","There was an error saving the Order Defaults. Please try again":"保存訂單默認設置時出現錯誤。請再試一次","These are simulated values.":"這些是模擬價值。","These shares are currently non-negotiable":"這些股份目前不能買賣。","thinkorswim Web developers use your feedback to improve the platform. Need assistance with an issue?":"thinkorswim網絡版開發人員利用您的反饋來改進平台。您有問題需要幫助嗎？","thinkorswim Web":"thinkorswim 網絡版","thinkorswim™":"thinkorswim™交易平台","Third-party research disclosure":"第三方研究披露聲明","This account is not eligible to place trades within thinkorswim. Select another account or discover why in the":"此賬戶沒有在thinkorswim中交易的資格。 請選擇另一個賬戶或在「學習中心」了解原因。","This account is not enabled for forex trading. To enable forex trading login to your web account and select My Profile. Select Upgrade next to Advanced Features.":"此賬戶沒有啟動外匯交易。如要啟動外匯交易，請登入您的網上賬戶並選擇我的資料(My Profile)。在高級功能(Advanced Features)項選擇升級 (Upgrade)。","This account is not enabled for forex trading.":"這個賬戶沒有外匯交易權限。","This account is not enabled for futures trading.":"此账户没有期货交易权限。","This is a paperMoney account.":"這是paperMoney虛擬賬戶。","This order is based upon the dollar amount selected and price of the security at the time the order is routed to market.":"該訂單是基于所選美元金額和訂單送入市場時的證券價格。","This order may result in an oversold/overbought position in your account.":"此訂單可能會導致您賬戶產生超賣抖超買的倉位。","This position is in the money.":"該倉位在價內。","This security is currently hard-to-borrow. Short sale orders for HTB securities may not be accepted during non-market hours due to short sale locate requirements.":"此證券目前難以借入。由於賣空定位要求，難以借入證券的賣空訂單在非市場交易時間內可能不被接受。","This stock is no longer trading due to merger":"這支股票因公司合併不再交易","This stock is not available to borrow. If you want us to try to locate it for you, please call our trade desk.":"這支股票無法借到。如果您要我們設法找到該股，請聯系我們的交易台。",Threshold:Xne,thurs:Qne,Thursday:Zne,"TICK COUNT":"跳價計數","Tick Reversal":"勾選逆轉",Tick:Jne,TIF:ere,"Time and Sales":"時間與銷售","Time Frame":"時間範圍",Time:tre,TNB:sre,"to access live trading.":"使用真實交易。","TO CLOSE":"平倉","TO OPEN":"開倉",To:nre,TODAY:rre,Today:ore,"Total Asset Turnover":"總資產周轉率","Total Shares Outstanding":"總流通股數",Total:are,Totals:ire,"Totals:":"總計：","Trade Analysis":"交易分析","Trade Filled":"交易成交","Trade Price Above the Ask. ":"高於賣方價的交易價。","Trade Price":"交易價格",Trade:lre,"Traded at Ask or above":"在賣方價或更高價格交易","Traded at Bid or below":"在買方價或更低價格交易",Trades:cre,"Trading Hours":"交易時間","Traditional Chinese":"繁體","Trailing stop orders require a valid parameter.":"跟踪止損訂單需要一個有效的參數",TRAILSTOP:dre,TRAILSTOPLIMIT:ure,"Trend Length":"趨勢長度","TRG BY #{ind}":"被#{ind}激活",Triggered:hre,TriggerLine:pre,"Troubleshooting Information":"故障排除信息",TRSTP:mre,TRSTPLMT:gre,"True Range Average Type":"真實範圍平均類型",True:Sre,"TTMLRC LB1":"TTMLRC 下行帶1","TTMLRC LB2":"TTMLRC 下行帶2","TTMLRC LR":"TTMLRC 線性回歸","TTMLRC UB1":"TTMLRC 上行帶1","TTMLRC UB2":"TTMLRC 上行帶2","TTMScalp PivotHigh":"TTMScalp 轉折高點","TTMScalp PivotLow":"TTMScalp 轉折低點",tues:fre,Tuesday:Tre,TVI:yre,"Type symbol":"輸入代號",UB1:Cre,UB2:bre,UlcerX:Ere,"Unapplied Columns":"尚未應用的欄目",unavailable:Are,"Unbalanced Butterfly":"非平衡策略蝶式策略","Unbalanced Condor":"非平衡策略鷹式策略","Unbalanced Iron Condor":"非平衡策略鐵鷹策略","Unbalanced Vertical Roll":"非平衡策略垂直滾倉",UNBALANCED:vre,"UNBALANCED_IRON CONDOR":"非平衡策略鐵鷹策略","UNBALANCED_VERT ROLL":"非平衡策略垂直滾倉","underlying price":"底層證券價格",Underlying:Ire,Underperform:xre,"Undo delete ${Watchlist Name} scan query":"撤消刪除 ${Watchlist Name} 掃描查詢","Undo delete ${Watchlist Name} watchlist":"復原刪除 ${Watchlist Name} 觀察列表","Undo delete watchlist":"觀察列表刪除還原",Undo:wre,"Unexpected server error occurred while executing update request with provided requestId. Please try again later or contact support desk.":"使用提供的代號執行更新請求時發生意外的服務器錯誤。 請稍後再試或聯繫支持中心。",UnitLine:Ore,Unselected:Rre,"until close":"距收盤","until open":"距開盤","until regular session closes":"距正常交易時段收盤還有","until regular session opens":"距正常交易時段開盤還有",Up:Dre,"Upcoming Earnings":"即将发布收益",UpDownDiff:Lre,Upper:_re,UpperBand:Nre,UpperLevel:Pre,UpperLine:kre,UpProbExp:Mre,UpStep:$re,"Use Paper Money":"使用Paper Money模擬交易",Username:jre,Value:Bre,"VERT ROLL":"垂直滚仓","Vert Roll":"垂直滚仓",VERT_ROLL:Fre,"VERTICAL ROLL":"垂直滾倉","Vertical Roll":"垂直滾倉",VERTICAL:Hre,Vertical:Ure,VFI:Vre,VHF:Wre,"View All Alerts":"查看所有警示",View:Gre,"Visible Buttons":"可顯示按鈕","Visible Columns":"顯示項目","Visible Symbols":"可視代號",VMA:Yre,"vol diff":"波動率差","Vol Diff":"波動率差","Vol Index":"波動率指數","vol index":"波動率指數",Vol:qre,"Volatility Adjustment":"波動率調整","Volatility Difference":"波动率差","Volatility Index":"波动率指数",VolatilitySwitch:Kre,VolAvg:zre,VolROC:Xre,VoltyStDev:Qre,VOLUME:Zre,Volume:Jre,VolumeOsc:eoe,VWAP:toe,"WAIT COND":"等待條件達到","WAIT STOP":"等待止損條件達到","WAIT TRG":"等待激活訂單成交","was deleted successfully":"被成功刪除","watchlist ${Watchlist Name} deleted. Click again to undo.":"觀察列表 ${Watchlist Name} 已被刪除。再次點擊還原","Watchlist name":"觀察列表名稱",Watchlist:soe,Wave1:noe,Wave2High:roe,Wave2Low:ooe,"We are unable to process your sell order because the number of shares entered exceeds the number of shares in your current position. Please enter a reduced number of shares.":"我們無法處理您的賣單，因為輸入的股數超過您現有倉位的股數。請減少股數再輸入。",wed:aoe,Wednesday:ioe,WEEK:loe,Week:coe,"week(s)":"周",Weekdays:doe,Weekly:uoe,Weeklys:hoe,"Weighted Back Volatility":"加权后月波动率",WEIGHTED:poe,WHEN:moe,"Width Of Channel":"通道寬度",WILDERS:goe,"Window Height":"窗口高度","Window resolution is too large, decrease window size and try again":"窗口分辨率過大，請縮小窗口尺寸並重試","Window Width":"窗口寬度","With market orders, prices can change quickly in fast market conditions resulting in execution prices that can be different from the quotes displayed at order entry.":"對於市價單，在快速市場情況下價格可能會迅速變化，導致執行的價格與在輸入訂單時的報價有所不同。","With stop orders, there is no guarantee that the execution price will be equal to or near the activation price.":"對於止損單，不保證執行的價格會等於或接近激活價格。","Working Orders":"尚待執行訂單",WORKING:Soe,Working:foe,working:Toe,Year:yoe,"year(s)":"年",Yes:Coe,yes:boe,"Yesterday Close":"昨日收盤價",Yield:Eoe,"You are about to leave thinkorswim":"您即將離開thinkorswim","You are currently disconnected. Please refresh the page to reconnect.":"您目前服務中斷。請刷新頁面重新連接。","You are not allowed to short stock on a cash account.":"在現金賬戶中不允許做賣空股票交易。","You are not allowed to short stock on account with netliq below $2000":"如果您賬戶的凈清倉資產低於$2000，您則不可以做賣空股票交易。","You are not allowed to short trade unmarginable stocks.":"您不可以買空非融資股票 。","You are not allowed to use margin to buy stock on account with netliq below $2000":"如果您賬戶的凈清倉資產低於$2000，您則不可以使用融資購買股票。","YOU ARE PARTICIPATING IN A PROGRAM RELATED TO A TEST OF THE PLATFORM, WHICH MAY HAVE GLITCHES, ERRORS OR OTHER ISSUES. PARTICIPANTS ARE WARNED THAT, IF THEY DECIDE TO MAKE A TRADE ON THE PLATFORM, THEY SHOULD NOT TRADE LARGE AMOUNTS OF MONEY. PARTICIPANTS WILL NOT RECEIVE ANY COMMISSIONS, BENEFITS, OR FREE TRADES AS PART OF THEIR PARTICIPATION IN THE PROGRAM. PARTICIPANTS WILL NOT RECEIVE ANY REIMBURSEMENTS, REWARDS OR DISCOUNTS IN CONNECTION WITH ANY TRADE THEY MAKE ON THE PLATFORM. PARTICIPANTS CONDUCT TRADES – LARGE OR OTHERWISE - AT THEIR OWN RISK. TD AMERITRADE NOR ANY OF ITS AFFILIATES OR SUBSIDIARIES, ARE IN NO WAY LIABLE TO PARTICIPANTS FOR ANY LOSS OF TRADES OR MONEY ON THE PLATFORM.":"您參與的是平台測試活動，系統可能會出現故障、錯誤或其它問題。在此忠告參與者，如果在平台交易，不應使用大筆資金來下單。參與者將不會因參加測試而收到任何佣金、福利或免費交易。參與者將不會收到與在平台上所做交易相關的補償、獎勵或折扣。參與者進行交易帶來的風險，無論大小，都由他們自己承擔風險。德美利證券及其任何附屬機構或子公司都不會對參與者在平台上損失的交易或資金負責。","You currently have 0 Day Trades remaining for this account. Any additional Day Trades could trigger FINRA's Pattern Day Trader Rule, restricting your account for 90 days.":"賬戶目前還剩0次當日沖銷。 任何額外的當日沖銷可能會觸發FINRA的慣性當日沖銷規則，賬戶將被限制90天。","You currently have 1 Day Trade remaining for this account. More than 1 Day Trade could trigger FINRA's Pattern Day Trader Rule, restricting your account for 90 days.":"賬戶目前還剩1次當日沖銷。 超過1次的當日沖銷可能會觸發FINRA的慣性當日沖銷規則，賬戶將被限制90天。","You do not currently have any canceled orders.":"您目前沒有任何已取消訂單。","You do not currently have any filled orders.":"您目前沒有任何已成交的訂單。","You do not currently have any working orders.":"您目前沒有任何尚待執行訂單。","You do not have enough available cash/buying power for this order.":"您沒有足夠的現金/購買力來下這個訂單。","You do not have permissions for Level II data.":"您沒有二級報價數據的使用權限。","You will exceed your futures position limit by making this trade.":"這筆交易成交會導致您的期貨倉位超出限定數額。","You will open a prohibited position with BP: Illegal -1 shares":"您將開倉一個被禁止的倉位。","Your buying power will be below zero ${dynamicField} if this order is accepted.":"如果這個訂單被接受，您的購買力將會小於零${dynamicField} 。","Your buying power will be below zero N/A if this order is accepted.":"如果這個訂單被接受，您的購買力將會低于零或非適用 。","Your feedback is incredibly valuable in shaping the future of thinkorswim.":"您的反饋意見對打造thinkorswim平台的未來至關重要。","Your forex buying power will be below zero ${dynamicField} if this order is accepted.":"如果這個訂單被接受，您的外匯購買力將會小於零${dynamicField} 。","Your limit price is significantly away from the current market price. Please adjust your order.":"您限定的價格與當前市場價格差距太大。請調整您的訂單。","Your limit price is too distant from the current quote. Try again.":"您的限價與當前報價相差太大。請重試。","Your order cannot be accepted because the system is missing quotes to validate it. Try to send this order again later. If the problem persists contact  a TD AMERITRADE Client Services Representative at 800-672-2098.":"無法接受您的訂單，因爲在系統中沒有報價來驗證訂單。 請稍後再嘗試下單。如果仍有問題，請撥打800-672-2098，中文服務877-888-1238聯繫德美利證券客服。","YTD Gain $":"年度至今盈/虧$","YTD Gain %":"年度至今盈%",ZeroLine:Aoe,"Zoom Level":"縮放尺度",ZZT$:voe,"ZZT%":"轉折趨勢%","{numerator} of {denominator} search results":"第{numerator}個搜索結果，共{denominator}個","~BUTTERFLY":"蝶式策略","~CONDOR":"鷹式策略","~IRON CONDOR":"鐵鷹策略","~VERT ROLL":"垂直滚仓"},Ya=yp.get("language"),Gw=e=>{switch(e){case"zh-CN":return CX;case"zh-TW":return Ioe;default:return{}}},xoe=(e=__("__locale"))=>e==="__locale"?" ":null,woe=Gw(Ya),Ooe=(e,t={})=>{const s=t.locale!==void 0?Gw(t.locale):woe,n=t.asEnglish!==void 0?t.asEnglish:!1,r=(Ya===null||Ya==="en-US")&&t.locale===void 0;if(r&&t.alternativeEnglishValue!==void 0)return t.alternativeEnglishValue;let o=s;if(t.namespace!==void 0){const l=s.__Namespace;if(l!==void 0){if(o=l[t.namespace],o===void 0)return Mr(`Translation not found -- Namespace: ${t.namespace} -- Val: ${e}`),e;if(o[e]===void 0)return Mr(`Translation not found -- Namespace: ${t.namespace} -- Val: ${e}`),e}}if(t.interpolationArgs!==void 0){const l=o[e]??e;return Object.entries(t.interpolationArgs).reduce((d,[u,h])=>{const p=new RegExp(`{{${u}}}`,"g");return d.replace(p,h)},l)}if(n||r)return e;const i=o[e];return i===void 0?e:i};window.__=Ooe;const Bf=j.createContext({theme:Qt.DARK,areColorsSwapped:!1,themeColors:Qh[Qt.DARK],setTheme:()=>null,swapColors:()=>null});class Yw extends j.PureComponent{constructor(s){super(s);R(this,"context");R(this,"savedTheme",localStorage.getItem(sn.THEME));R(this,"savedSwapColorsValue",localStorage.getItem(sn.SWAP_BUY_SELL));R(this,"defaultColorsSwappedValue",this.savedSwapColorsValue===null?!!this.props.firstLoadAreColorsSwapped:this.savedSwapColorsValue==="true");R(this,"defaultTheme",this.savedTheme===null?Qt.DARK:this.savedTheme);R(this,"bodyElement");R(this,"setTheme",s=>{this.props.setTheme(s),this.setState({theme:s},this.applyTheme)});R(this,"swapColors",()=>{const n=!this.state.areColorsSwapped;this.props.swapColors(n),this.setState({areColorsSwapped:n},this.applyTheme)});R(this,"getMuiTheme",()=>{const{state:s}=this,n=this.state.theme===Qt.DARK?Ko.dark:Ko.light,r=this.state.theme.toLowerCase(),o={...x0.tda,colors:Q1(n,s.areColorsSwapped)},i=sx({...x0,tda:o},{palette:{type:r}}),l=Ya??"en",c=l==="zh-CN"||l==="zh-TW",d=c?t5:s5;return Ja.locale(c?l:"en"),J2(i,d)});this.bodyElement=document.querySelector("body"),this.state={theme:this.savedTheme===null?this.props.firstLoadTheme??Qt.DARK:this.savedTheme,areColorsSwapped:this.defaultColorsSwappedValue??!1,themeColors:Qh[this.defaultTheme]},this.applyTheme=this.applyTheme.bind(this),this.getThemeColors=this.getThemeColors.bind(this)}componentDidMount(){this.applyTheme()}applyTheme(){const s=this.state;this.bodyElement.setAttribute("theme",s.theme),document.documentElement.style.setProperty("color-scheme",s.theme.toLowerCase()),s.areColorsSwapped?this.bodyElement.setAttribute("colors_swapped",s.theme):this.bodyElement.removeAttribute("colors_swapped"),localStorage.setItem(sn.THEME,s.theme),localStorage.setItem(sn.SWAP_BUY_SELL,s.areColorsSwapped.toString())}getThemeColors(){const s=this.state;return s.areColorsSwapped?{...Qh[s.theme],...Q4[s.theme]}:Qh[s.theme]}render(){const s=this.props,n=this.state,r=this.getThemeColors();return a.jsx(e5,{theme:this.getMuiTheme(),children:a.jsx(Bf.Provider,{value:{theme:n.theme,areColorsSwapped:n.areColorsSwapped,swapColors:this.swapColors,setTheme:this.setTheme,themeColors:r},children:a.jsx(gH,{mode:this.state.theme===Qt.DARK?Ko.dark:Ko.light,areColorsSwapped:n.areColorsSwapped,children:s.children})})})}}R(Yw,"contextType",Bf);const Roe=e=>({swapColors:t=>e({type:f.SwapColors,swapped:t}),setTheme:t=>e({type:f.SetTheme,theme:t})}),Doe=se(()=>({firstLoadTheme:Qt.DARK,firstLoadAreColorsSwapped:!1}),Roe)(Yw),hn=e=>{const t=s=>a.jsx(Bf.Consumer,{children:n=>a.jsx(e,{...s,theme:n.theme,themeColors:n.themeColors,setTheme:n.setTheme,swapColors:n.swapColors,areColorsSwapped:n.areColorsSwapped})});return t.displayName=e.displayName===void 0?e.name:e.displayName,t},qw=e=>{switch(e){case Qt.LIGHT:return"theme-light";case Qt.DARK:default:return"theme-dark"}},yr=()=>{},Th=24,Loe=e=>{const{type:t,height:s=Th,width:n=Th,viewBox:r=`0 0 ${Th} ${Th}`,theme:o,areColorsSwapped:i,fill:l,stroke:c}=e,d=o===Qt.DARK?Ko.dark:Ko.light,u=Q1(d,i),h=l?Lb(u,l):void 0,p=c?Lb(u,c):void 0,m={...e,height:`${s}px`,width:`${n}px`,viewBox:r,colors:u,fill:h||l,stroke:p||c},g=VF[t]||yr;return a.jsx(g,{...m})},X=hn(Loe),Mp=({id:e,className:t,value:s="0",decrementLabel:n,incrementLabel:r,handleDecrement:o,handleIncrement:i,handleChange:l,handleInputFocus:c,handleBlur:d,handleKeyDown:u,isPrice:h,inputAriaLabel:p,dataTestId:m})=>a.jsxs(WF,{className:`stepper ${t}`,isPrice:h,id:e,"data-testid":m,"aria-label":`${e} stepper`,children:[a.jsx("button",{id:`${e} minus`,"aria-label":n,className:"step minus",onClick:o,"data-testid":"stepper-decrement-button",children:a.jsx(X,{type:Y.Minus,width:10,height:2,viewBox:"0 0 10 2",dataTestId:"minus-icon"})}),a.jsx("input",{id:`${e} input`,"data-testid":`${e}-input`,"aria-label":p||`${e} input`,onChange:l,onFocus:c,onBlur:d,onKeyDown:u,value:s}),a.jsx("button",{id:`${e} plus`,"aria-label":r,className:"step plus",onClick:i,"data-testid":"stepper-increment-button",children:a.jsx(X,{type:Y.Plus,width:10,height:10,viewBox:"0 0 10 10",dataTestId:"plus-icon"})})]}),Kw=e=>/^-(0+\.?0*|\.0+)$/.test(e);var Ff=(e=>(e.incrementPrice="Increase Price",e.decrementPrice="Decrease Price",e))(Ff||{});class _oe extends j.Component{constructor(s){super(s);R(this,"latestPrice");R(this,"timer");R(this,"accuracy");R(this,"updateInput",s=>{const n=Z1(s.target.value,this.props.allowsNegative);n&&(!isNaN(parseFloat(n.displayValue))&&this.updatePrice(n.numericValue),this.setState({displayValue:n.displayValue}))});R(this,"updateFractionalInput",s=>{this.setState({displayValue:tu(s.target.value,this.props.allowsNegative)})});R(this,"onBlurFractionalInput",()=>{const{fractionalType:s,showDoubleTickForFractionalPricing:n,priceStep:r=0,allowsNegative:o}=this.props,i=w1(this.state.displayValue,s,o),l=x1(i,s,r);l!==void 0&&(!o&&l>=0||o)&&!/\+/.test(i)&&(this.updatePrice(l),this.setState({displayValue:Im(l,s,n),isFocused:!1}))});R(this,"getFormattedValue",s=>s.replace(/\.\d$/,"$&0"));R(this,"onBlur",()=>{let s=this.getFormattedValue(this.state.displayValue);s===""&&this.updatePrice(0),(s===""||Kw(s))&&(s=this.accuracy===0?"0":`0.${"0".repeat(this.accuracy)}`),this.setState({displayValue:s,isFocused:!1})});R(this,"onFocus",()=>{this.setState({isFocused:!0})});R(this,"handleDecrement",()=>{this.handleIncrementOrDecrement(ei.minus)});R(this,"handleIncrement",()=>{this.handleIncrementOrDecrement(ei.plus)});R(this,"handleIncrementOrDecrement",s=>{const{showFractionalPricing:n,fractionalType:r,showDoubleTickForFractionalPricing:o}=this.props,{priceStep:i=0,allowsNegative:l}=this.props,c=this.latestPrice??0;if(c===0&&s===ei.minus&&!l)return;const d=xu.get(s)(c,i),u=Number(d.toFixed(this.accuracy)),h=Vn(n,u,r,o);this.setState({displayValue:h}),this.updatePrice(u,!1)});const{priceStep:n=0}=s,r=s.price;this.state={displayValue:r!==void 0?Vn(s.showFractionalPricing,r,s.fractionalType,s.showDoubleTickForFractionalPricing):"",isFocused:!1},this.latestPrice=r;const o=n.toString().split(".")[1];this.accuracy=(o==null?void 0:o.length)??0}updatePrice(s,n=!0){const{updatePrice:r,priceKey:o,priceLocked:i}=this.props;this.latestPrice=s,this.timer!==void 0&&window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>r(s,o,i),n?400:0)}componentDidUpdate(s){const n=this.state,{showFractionalPricing:r,fractionalType:o,showDoubleTickForFractionalPricing:i}=this.props;if(n.isFocused)return;const l=s.priceStep,c=this.props.priceStep??0;if(l!==c){const h=c.toString().split(".")[1];this.accuracy=(h==null?void 0:h.length)??0}const d=s.price,u=this.props.price;d!==u&&this.setState({displayValue:u!==void 0?Vn(r,u,o,i):""},()=>this.latestPrice=u)}componentWillUnmount(){this.timer!==void 0&&window.clearTimeout(this.timer)}render(){const{id:s,showFractionalPricing:n}=this.props,{displayValue:r}=this.state;return a.jsx("div",{className:"price-stepper-wrapper",children:a.jsx(Mp,{id:s,value:r,decrementLabel:$p(r,!1),incrementLabel:$p(r,!0),handleDecrement:this.handleDecrement,handleIncrement:this.handleIncrement,handleChange:o=>{n?this.updateFractionalInput(o):this.updateInput(o)},handleInputFocus:this.onFocus,handleBlur:()=>{n?this.onBlurFractionalInput():this.onBlur()},isPrice:!0})})}}const $p=(e,t,s)=>`${t?Ff.incrementPrice:Ff.decrementPrice} from current Trade Price ${e}${s?" percent":""}`,Z1=(e,t=!1,s=!1)=>{const n=e!==""?Af(e):0,r=n!==void 0&&n>=0,o=t?!0:r;if(e==="."||e==="0.")return{numericValue:0,displayValue:s?"-0.":"0."};if(n!==void 0&&o&&!/\+/.test(e)){const i=e.replace(/^0*(\d)/,"$1");return{numericValue:s&&Number(i)>=1?-n:n,displayValue:s&&Number(i)>=1?"-"+i:i}}};class er extends j.Component{constructor(s){super(s);R(this,"latestPrice");R(this,"timer");R(this,"precision");R(this,"handleKeyDown",s=>{switch(s.key){case we.ArrowRight:case we.ArrowLeft:s.stopPropagation()}});R(this,"resetInput",()=>{const s=this.state.displayValue,{isValid:n}=this.props,r=parseFloat(s);let o=r;isNaN(r)&&(o=this.props.value??1),this.props.value===void 0&&this.updateValue(o),n(o),this.setState({displayValue:o.toFixed(this.precision)})});R(this,"resetFractionalInput",()=>{const{fractionalType:s,valueStep:n=0}=this.props,r=w1(this.state.displayValue,s,!0),o=x1(r,s,n);o!==void 0&&!/\+/.test(r)&&(this.updateValue(o),this.setState({displayValue:Im(o,s,!1)}))});R(this,"updateInput",s=>{const{isValidOnChange:n,isTrailStopSellOrder:r}=this.props;if(n&&!n(s.target.value))return;const o=r!==!1,i=Z1(s.target.value,o,r);i&&(!isNaN(parseFloat(i.displayValue))&&this.updateValue(i.numericValue),this.setState({displayValue:i.displayValue}))});R(this,"updateFractionalInput",s=>{const{isTrailStopSellOrder:n}=this.props,r=n!==!1;this.setState({displayValue:tu(s.target.value,r,n)})});R(this,"onFocus",()=>{this.state.isFocused||(this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus())});R(this,"onBlur",()=>{const{showFractionalPricing:s}=this.props;this.setState({isFocused:!1}),s?this.resetFractionalInput():this.resetInput(),this.props.onBlur&&this.props.onBlur()});R(this,"handleDecrement",()=>{this.handleIncrementOrDecrement(ei.minus)});R(this,"handleIncrement",()=>{this.handleIncrementOrDecrement(ei.plus)});R(this,"handleIncrementOrDecrement",s=>{const{valueStep:n=0,isValid:r}=this.props,o=this.latestPrice??0,i=xu.get(s)(o,n);if(!r(i))return;const l=Zi(this.props.showFractionalPricing,i,this.props.fractionalType,this.precision,this.props.showDoubleTickForFractionalPricing);this.setState({displayValue:l}),this.updateValue(i,!1)});const n=s.value;this.precision=Qo(s.valueStep??0);const r=n||0;this.state={displayValue:Zi(s.showFractionalPricing,r,s.fractionalType,this.precision,s.showDoubleTickForFractionalPricing),isFocused:!1},this.latestPrice=n}updateValue(s,n=!0){const{onUpdateValue:r,isValid:o}=this.props;this.latestPrice=s,o(s)&&(this.timer!==void 0&&window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>r(s),n?400:0))}componentDidUpdate(s,n){const{showFractionalPricing:r,fractionalType:o,showDoubleTickForFractionalPricing:i}=this.props,{isFocused:l}=this.state;if(l)return;const c=s.value,d=this.props.value;c!==d&&this.setState({displayValue:d!==void 0?Zi(r,d,o,this.precision,i):""},()=>this.latestPrice=d)}componentWillUnmount(){this.timer!==void 0&&window.clearTimeout(this.timer)}render(){const{dataTestId:s,className:n,showFractionalPricing:r,isPercent:o}=this.props,{displayValue:i}=this.state;return a.jsx("div",{className:"numeric-stepper-wrapper",children:a.jsx(Mp,{id:s,"data-testid":s,className:n,value:i,decrementLabel:$p(i,!1,o),incrementLabel:$p(i,!0,o),handleDecrement:this.handleDecrement,handleIncrement:this.handleIncrement,handleChange:l=>{r?this.updateFractionalInput(l):this.updateInput(l)},handleInputFocus:this.onFocus,handleBlur:this.onBlur,handleKeyDown:this.handleKeyDown,inputAriaLabel:o?`${i} percent`:void 0})})}}R(er,"defaultProps",{fractionalType:Bs.x10,showFractionalPricing:!1,showDoubleTickForFractionalPricing:!1,isPercent:!1});const Noe=[we.ArrowUp,we.ArrowDown,we.Home,we.End,we.Esc,we.Tab,we.Enter],zw=({selectedItemIndex:e,tabToRef:t,avoidCloseOnTab:s,preventDefaultOnKeyDown:n=!0})=>{const[r,o]=j.useState(!1),[i,l]=j.useState(!0),c=j.useRef(null),d=j.useRef(null);return j.useEffect(()=>{var p;const h=(p=c.current)==null?void 0:p.children;if(r&&h){const m=e!==void 0?h[e]:h[0];m instanceof HTMLElement&&m.focus(),i&&l(!1)}},[r,e]),j.useEffect(()=>{!r&&d.current&&!i&&d.current.focus()},[r]),j.useMemo(()=>{const h=g=>{var S;(S=c.current)!=null&&S.children&&c.current.children.length>0&&g(c.current.children)},p=g=>h(S=>{for(const T of S)if(T===document.activeElement){T instanceof HTMLElement&&g(T);return}});return{isVisible:r,setIsVisible:o,listboxAttributes:{role:"listbox","aria-label":"listbox",onKeyDown:g=>{switch(Noe.includes(g.key)&&g.target===document.activeElement&&n&&g.preventDefault(),g.key){case we.ArrowUp:p(({previousElementSibling:S})=>{S&&S instanceof HTMLElement&&(S.scrollIntoView&&S.scrollIntoView({block:"nearest"}),S.focus())});break;case we.ArrowDown:p(({nextElementSibling:S})=>{S&&S instanceof HTMLElement&&(S.scrollIntoView&&S.scrollIntoView({block:"nearest"}),S.focus())});break;case we.Home:{h(S=>{const T=S[0];T&&T instanceof HTMLElement&&T.focus()});break}case we.End:{h(S=>{if(S){const T=S[S.length-1];T&&T instanceof HTMLElement&&T.focus()}});break}case we.Esc:{o(!1);break}case we.Tab:{!g.shiftKey&&(t!=null&&t.current)?t.current.focus():s||o(!1);break}case we.Enter:p(S=>S.click());break}}},listboxRef:c,optionAttributes:{role:"option",tabIndex:-1},anchorAttributes:{"aria-haspopup":"listbox"},anchorRef:d}},[r,t])},Ut=e=>e!=null;var Xw=(e=>(e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box",e))(Xw||{});const w0=e=>{if(e)return e instanceof HTMLElement?e:e.current};function Bm(e,t){const[s,n]=j.useState({});B.useEffect(()=>{const i=w0(e.ref),l=s&&Object.values(s).filter(Ut).filter(c=>c!==0).length!==0;t.current&&i&&e.box==="border-box"&&!l&&n({width:i.offsetWidth,height:i.offsetHeight})},[n]);const r=w0(e.ref),{ref:o}=n5({...e,onResize:i=>{const l=i&&Object.values(i).filter(Ut).filter(c=>c!==0).length!==0;requestAnimationFrame(()=>{if(t.current)if(l)n(i),e.onResize&&e.onResize(i);else{const c={...i};r&&(c.width=r.offsetWidth,c.height=r.offsetHeight),n(c),e.onResize&&e.onResize(c)}})}})??{ref:null};return{ref:o,...s}}const Cn=e=>{const t=B.useRef(),s=B.useRef(!1),n=B.useRef(!1),[,r]=B.useState(0);s.current&&(n.current=!0),B.useEffect(()=>(s.current||(t.current=e(),s.current=!0),r(o=>o+1),()=>{n.current&&t.current&&t.current()}),[])},Poe=[0,0],Qw=({anchor:e,className:t,isVisible:s,strategy:n="absolute",onClose:r,offset:o=Poe,"data-testid":i,onClickOutside:l,popperOptions:c={},...d})=>{const p={...l?{onClickOutside:l}:{},...r?{onHidden:r}:{}};return a.jsx("div",{className:t,"data-testid":i,children:a.jsx(r5,{interactive:!0,arrow:!1,maxWidth:"none",animation:!1,offset:o,visible:s,...p,...d,popperOptions:c,children:e})})},J1=({placement:e="bottom",...t})=>a.jsx(Qw,{placement:e,...t}),koe=({theme:{shape:e,colors:t}})=>`border: ${e.borderWidth.primary}px solid ${t.border.primary};`,Zo=({theme:e})=>e.shape.borderRadius.secondary,Moe=4,$oe=A(J1)`
  width: 100%;
`,Zw=A.button`
  height: ${({theme:e,variant:t})=>e.components.Dropdown.Anchor[t].height}px;
  width: 100%;
  ${koe}
  border-radius: ${Zo}px;
  padding: 0 ${({theme:{space:e}})=>e.xSmall};
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: normal;
  color: ${({theme:{colors:e}})=>e.text.primary};
  white-space: nowrap;

  ${({theme:{colors:e}})=>Ms({variants:{[Pe.primary]:{background:e.background.primary},[Pe.secondary]:{background:e.background.secondary},[Pe.tertiary]:{background:e.selected.secondary.background,border:`1px solid ${e.selected.secondary.main}`}}})}

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    ${Ms({variants:{[Pe.tertiary]:{height:34}}})}
  }

  :disabled {
    cursor: default;
  }
`,joe=A.div`
  ${({theme:{colors:e,shape:t}})=>Ms({variants:{[Pe.primary]:{border:`${t.borderWidth.primary}px solid ${e.border.primary}`},[Pe.secondary]:{border:`${t.borderWidth.primary}px solid ${e.border.primary}`},[Pe.tertiary]:{border:`${t.borderWidth.primary}px solid ${e.border.tertiary}`}}})}
  border-radius: ${Zo}px;
  width: ${({width:e})=>`${e}px`};
`,Boe=A.ul`
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: auto;
  width: 100%;
  max-height: ${({theme:e,variant:t})=>e.components.Dropdown.ListItem[t].height*Moe}px;
  border-radius: ${Zo}px;

  ${({theme:{colors:e}})=>Ms({variants:{[Pe.primary]:{background:e.background.primary},[Pe.secondary]:{background:e.background.secondary},[Pe.tertiary]:{background:e.selected.secondary.background}}})}

  ${({theme:{colors:e},variant:t})=>br.scrollbar({background:t===Pe.tertiary?e.scrollbar.background.tertiary:e.background[t],thumb:t===Pe.tertiary?e.scrollbar.thumb.tertiary:void 0})}

  ::-webkit-scrollbar-track {
    border-top-right-radius: ${Zo}px;
    border-bottom-right-radius: ${Zo}px;
  }
`,Foe=A.li`
  cursor: pointer;
  width: 100%;
  height: ${({theme:e,variant:t})=>e.components.Dropdown.ListItem[t].height}px;
  border: ${({theme:{shape:e}})=>e.borderWidth.secondary}px solid transparent;

  padding: 0 ${({theme:{space:e}})=>e.xSmall};

  :focus {
    border-color: ${({theme:{colors:e}})=>e.action.focus};
  }

  &:hover {
    border-color: ${({theme:e})=>e.colors.action.focus};
  }

  ${({selected:e,theme:t})=>e&&t.mixins.selectedListItem()}

  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: normal;
  font-size: ${({theme:{fontSizes:e}})=>e.medium};
  ${({selected:e,theme:{colors:t}})=>e&&`color: ${t.selected.primary.contrastText};`}
`,Ei=({values:e,onListItemClick:t,getListItemKey:s,renderListItemContent:n,renderAnchorButtonContent:r,selectedItemIndex:o,className:i,anchorAriaLabel:l,customIcon:c,tabIndex:d=0,variant:u=Pe.primary,height:h=40,renderHeader:p,isDisabled:m,appendTo:g="parent",defaultWidth:S=110,...T})=>{const{isVisible:y,setIsVisible:b,anchorRef:E,anchorAttributes:v,listboxRef:D,listboxAttributes:w,optionAttributes:N}=zw({selectedItemIndex:o}),L=j.useRef(null),P=j.useRef(!1);Cn(()=>(P.current=!0,()=>{P.current=!1}));const{width:F}=Bm({ref:E,box:Xw.BORDER_BOX},P),O=a.jsx(joe,{variant:u,ref:L,width:F||S,children:a.jsx(Boe,{ref:D,variant:u,...w,className:"in-app-scrollbar-dropdowns",children:e.map((H,C)=>{const M=C===o;return a.jsx(Foe,{"data-testid":`${T["data-testid"]}:${s(H)}`,variant:u,onClick:()=>{b(!1),M||t(H)},...N,selected:M,"aria-selected":M,children:n(H)},s(H))})})});return a.jsx($oe,{"data-testid":T["data-testid"],anchor:a.jsxs(Zw,{tabIndex:d,"aria-label":l,onClick:()=>b(H=>!H),ref:E,variant:u,"data-testid":`${T["data-testid"]}-value`,disabled:m,...v,children:[r(),!m&&(c||a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6.5 6.5",dataTestId:"arrow-dropdown-icon"}))]}),content:a.jsxs("div",{children:[p!==void 0&&p,O]}),isVisible:y,className:i,onClickOutside:()=>b(!1),appendTo:g})},Cl=A(Ei)`
  min-width: 136px;
  width: auto;
`,O0=[Jd.YES,Jd.NO],Hoe=e=>{const t=s=>a.jsx("div",{children:__(s)});return a.jsx(Cl,{"data-testid":"full-range-dropdown",renderAnchorButtonContent:()=>__(e.selectedFullRange),values:O0,getListItemKey:s=>s,onListItemClick:e.selectFullRange,renderListItemContent:t,anchorAriaLabel:"Full Range",selectedItemIndex:O0.indexOf(e.selectedFullRange)})},R0=[Ap.YES,Ap.NO],Uoe=e=>{const t=s=>a.jsx("div",{children:__(s)});return a.jsx(Cl,{"data-testid":"show-only-today-dropdown",renderAnchorButtonContent:()=>__(e.selectedShowOnlyToday),values:R0,getListItemKey:s=>s,onListItemClick:e.selectShowOnlyToday,renderListItemContent:t,anchorAriaLabel:"Show Only Today",selectedItemIndex:R0.indexOf(e.selectedShowOnlyToday)})},Voe=({isValid:e,isValidOnChange:t,valueStep:s,value:n,onUpdateValue:r,dataTestId:o})=>a.jsx(er,{isValid:e,isValidOnChange:t,valueStep:s,value:n,onUpdateValue:r,dataTestId:o}),Fd=is((e,t,s,n,r)=>{var l;const o=((l=$r[t])==null?void 0:l.defaultPlotParams)??sw(n);return Object.entries(e).map(([c,d])=>{if(d.colorOptions.type===Ae.INCREASING_HISTOGRAM){const u=d.colorOptions,h=o[c].colorOptions,p=h.type===Ae.INCREASING_HISTOGRAM?h:vu,m={...u};return u.isEdited||(m.NegativeAndDown=s?p.PositiveAndUp:p.NegativeAndDown,m.NegativeAndUp=s?p.PositiveAndDown:p.NegativeAndUp,m.PositiveAndDown=s?p.NegativeAndUp:p.PositiveAndDown,m.PositiveAndUp=s?p.NegativeAndDown:p.PositiveAndUp),[c,{...d,colorOptions:m}]}else if(d.colorOptions.type===Ae.CANDLE){const u=d.colorOptions,h=r==Qt.DARK?Au:vx,p={...u};return u.isEdited||(p.BorderUp=s?h.BorderDown:h.BorderUp,p.BorderDown=s?h.BorderUp:h.BorderDown,p.FillUp=s?{...h.FillDown,a:0}:h.FillUp,p.FillDown=s?{...h.FillUp,a:100}:h.FillDown),[c,{...d,colorOptions:p}]}else if(d.colorOptions.type===Ae.AREA){const u=d.colorOptions,h=o[c].colorOptions,p=h.type===Ae.AREA?h:Iu,m={...u};return u.isEdited||(m.AreaNegative=s?p.AreaPositive:p.AreaNegative,m.AreaPositive=s?p.AreaNegative:p.AreaPositive,m.LinePositive=s?p.LineNegative:p.LinePositive,m.LineNegative=s?p.LinePositive:p.LineNegative),[c,{...d,colorOptions:m}]}else if(d.colorOptions.type===Ae.INCREASING_VALUE){const u=d.colorOptions,h=o?o[c].colorOptions:void 0,p=h&&h.type===Ae.INCREASING_VALUE?h:rc,m={...u};return u.isEdited||(m.Decreasing=s?p.Increasing:p.Decreasing,m.Increasing=s?p.Decreasing:p.Increasing),[c,{...d,colorOptions:m}]}else if(d.colorOptions.type===Ae.CROSSOVER){const u=d.colorOptions,h=r==Qt.DARK?Am:Ix,p={...u};return u.isEdited||(p.Above=s?h.Below:h.Above,p.Below=s?h.Above:h.Below),[c,{...d,colorOptions:p}]}else return[c,d]}).reduce((c,d)=>({...c,[d[0]]:d[1]}),{})},fs),Woe=(e,t,s,n,r)=>{if(!t)return[];const o=Math.round(s.invert(n+r)),i=Math.max(0,o);return t.map(c=>{var h;const d=[],u=e.get(c.id);return u!==void 0?(((h=$r[u.name])==null?void 0:h.plotNames)??Object.keys(u.plotParameters)).forEach(m=>{const g=c.plots.find(S=>S.name===m);if(g!==void 0){const S={...g,index:i};d.push(S)}}):c.plots.forEach(p=>{d.push({...p,index:i})}),{studyId:c.id,studyName:(u==null?void 0:u.name)??me.SIMPLE_MOVING_AVG,plots:d}})},Jw=e=>(t,s)=>{e(n=>({...n,[t]:s}))},eO=(e,t)=>s=>{e(n=>{const r=s.reduce((l,c)=>{const d=l[c.plotName];return{...l,[c.plotName]:{...d,[c.plotParam]:c.value}}},n),o=ic(),i=Md();return Fd(r,t,o,void 0,i)})},tO=e=>(t,s)=>{e(n=>({...n,[t]:s}))},sO=e=>t=>{e(s=>({...s,[je.AVERAGE_TYPE]:t}))},nO=e=>t=>{e(s=>({...s,[je.TRUE_RANGE_AVERAGE_TYPE]:t}))},rO=e=>t=>{e(s=>({...s,[je.TIME_FRAME]:t}))},oO=e=>t=>{e(s=>({...s,[je.FULL_RANGE]:t}))},aO=e=>t=>{e(s=>({...s,[je.SHOW_ONLY_TODAY]:t}))},iO=e=>(t,s)=>{e(n=>({...n,[t]:s}))},Goe=e=>/(^(-?\d*)$|^$)/.test(e),Yoe=e=>!isNaN(e)&&e>=-2147483647&&e<=2147483647,lO=A.span`
  max-width: 112px;
  ${({theme:e})=>e.mixins.ellipsis}
`,qoe=e=>{const t=n=>a.jsx("div",{children:__(Xl(n))}),s=()=>a.jsx(lO,{children:__(Xl(e.selectedItem))});return a.jsx(Cl,{"data-testid":`${e.name}-dropdown`,renderAnchorButtonContent:s,values:e.items,getListItemKey:n=>n,onListItemClick:e.onItemClick,renderListItemContent:t,anchorAriaLabel:e.name,selectedItemIndex:e.items.indexOf(e.selectedItem)})},Koe=({text:e})=>a.jsx("span",{children:e}),zoe=({studyParametersInfo:e,updateDynamicParam:t,dispatch:s,value:n})=>{if(e.name===void 0||e.type===void 0)return null;const r=i=>l=>{s({type:i,value:l}),t(i,l)};let o;switch(e.type){case Qs.INTEGER:case Qs.DOUBLE:case Qs.PRICE:{o=a.jsx(Voe,{isValid:()=>!0,isValidOnChange:e.type===Qs.INTEGER?Goe:i=>Yoe(Number(i)),valueStep:e.type===Qs.DOUBLE?.1:1,value:Number(n),onUpdateValue:r(e.name),dataTestId:`${e.name}-numeric-stepper`});break}case Qs.ENUM:{if(e.enumValues===void 0)break;o=a.jsx(qoe,{name:e.name,items:e.enumValues,onItemClick:r(e.name),selectedItem:n.toString()});break}case Qs.SYMBOL:case Qs.PREDEFINED_CONST:case Qs.TEXT:default:{o=a.jsx(Koe,{text:n.toString()});break}}return a.jsxs("div",{className:"study-parameter",children:[a.jsx("div",{className:"study-parameter-label","data-testid":"study-parameter-label",children:__(i3(e.name))}),o]},e.name)},D0=[Zl.DAY,Zl.WEEK,Zl.MONTH],Xoe=e=>{const t=s=>a.jsx("div",{children:__(s)});return a.jsx(Cl,{"data-testid":"time-frame-dropdown",renderAnchorButtonContent:()=>__(e.selectedTimeFrame),values:D0,getListItemKey:s=>s,onListItemClick:e.selectTimeFrame,renderListItemContent:t,anchorAriaLabel:"Time Frame",selectedItemIndex:D0.indexOf(e.selectedTimeFrame)})},L0=e=>{const t=s=>a.jsx("div",{children:__(s)});return a.jsx(Cl,{"data-testid":"price-type-dropdown",renderAnchorButtonContent:()=>__(e.selectedChartPriceType),values:Object.values(uo),getListItemKey:s=>s,onListItemClick:e.selectChartPriceType,renderListItemContent:t,anchorAriaLabel:"Chart Price Type",selectedItemIndex:Object.values(uo).indexOf(e.selectedChartPriceType)})},Te=(...e)=>e.filter(t=>t!==!1&&t!==void 0).join(" "),Vt=({h:e,s:t,l:s,a:n})=>`hsla(${e}, ${t}%, ${s}%, ${n})`,wn=e=>{const{r:t,g:s,b:n,a:r}=e,o=t/255,i=s/255,l=n/255,c=Math.min(o,i,l),d=Math.max(o,i,l),u=d-c;let h=0,p=0,m=0,g=1;return u===0?h=0:d===o?h=(i-l)/u%6:d===i?h=(l-o)/u+2:h=(o-i)/u+4,h=Math.round(h*60),h<0&&(h+=360),m=(d+c)/2,p=u===0?0:u/(1-Math.abs(2*m-1)),p=+(p*100).toFixed(1),m=+(m*100).toFixed(1),g=+(r/255).toFixed(2),{h,s:p,l:m,a:g}},Rr=e=>{const{h:t,s,l:n,a:r}=e,o=s/100,i=n/100,l=(1-Math.abs(2*i-1))*o,c=l*(1-Math.abs(t/60%2-1)),d=i-l/2;let u=0,h=0,p=0,m=0;return 0<=t&&t<60?(u=l,h=c,p=0):60<=t&&t<120?(u=c,h=l,p=0):120<=t&&t<180?(u=0,h=l,p=c):180<=t&&t<240?(u=0,h=c,p=l):240<=t&&t<300?(u=c,h=0,p=l):300<=t&&t<360&&(u=l,h=0,p=c),u=Math.round((u+d)*255),h=Math.round((h+d)*255),p=Math.round((p+d)*255),m=Math.round(r*255),{r:u,g:h,b:p,alpha:m}},sp=(e,t=1)=>{let s="0",n="0",r="0";e.length==4?(s="0x"+e[1]+e[1],n="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):e.length==7&&(s="0x"+e[1]+e[2],n="0x"+e[3]+e[4],r="0x"+e[5]+e[6]);const o=parseInt(s)/255,i=parseInt(n)/255,l=parseInt(r)/255,c=Math.min(o,i,l),d=Math.max(o,i,l),u=d-c;let h=0,p=0,m=0;return u==0?h=0:d==o?h=(i-l)/u%6:d==i?h=(l-o)/u+2:h=(o-i)/u+4,h=Math.round(h*60),h<0&&(h+=360),m=(d+c)/2,p=u==0?0:u/(1-Math.abs(2*m-1)),p=+Math.round(p*100),m=+Math.round(m*100),{h,s:p,l:m,a:t}},Qoe=e=>{const{r:t,g:s,b:n}=Rr(e);let r=t.toString(16),o=s.toString(16),i=n.toString(16);return r.length==1&&(r="0"+t),o.length==1&&(o="0"+s),i.length==1&&(i="0"+n),"#"+r+o+i},Zoe=({hslColor:e,className:t,style:s,...n})=>a.jsx("button",{...n,className:Te(t,"edit-color-button"),style:{...s,backgroundColor:Vt(e)},"data-testid":"edit-color-button"}),Joe=A(o5)`
  box-shadow: unset !important;
  background-color: ${({theme:e})=>e.colors.background.primary} !important;

  /* Hue/saturation sliders */
  > div:nth-child(2) {
    > div > div {
      border: ${({theme:e})=>e.shape.borderWidth.primary}px solid
        ${({theme:e})=>e.colors.border.primary} !important;
      border-radius: ${({theme:e})=>e.shape.borderRadius.tertiary}px;
    }

    > div:nth-child(2) {
      width: 28px !important;
      height: 28px !important;
    }
  }

  /* RGBA inputs */
  > div:nth-child(3) {
    input {
      color: ${({theme:e})=>e.colors.text.primary} !important;
      background-color: ${({theme:e})=>e.colors.background.secondary};
      box-shadow: ${({theme:e})=>e.colors.border.primary} 0px 0px 0px
        ${({theme:e})=>e.shape.borderWidth.primary}px inset !important;
    }

    span {
      color: ${({theme:e})=>e.colors.text.primary} !important;
    }
  }

  /* Color swatches */
  > div:nth-child(4) {
    border-top: ${({theme:e})=>e.shape.borderWidth.primary}px solid
      ${({theme:e})=>e.colors.border.primary} !important;

    span {
      div {
        box-shadow: ${({theme:e})=>e.colors.border.primary} 0px 0px 0px
          ${({theme:e})=>e.shape.borderWidth.primary}px inset !important;
      }
    }
  }
`,eae=({h:e,s:t,l:s,a:n=1})=>({h:e,s:t*100,l:s*100,a:n}),cO=({initialColor:e,onChangeComplete:t})=>a.jsx(Joe,{width:"auto",color:e,onChangeComplete:({hsl:s})=>t(eae(s)),"data-testid":"color-picker"}),tae=({fieldName:e,currentColor:t,updateColor:s,returnToMainWindow:n,closeWindow:r})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"edit-study-color-window__button-row",children:[a.jsxs("button",{className:"edit-study-color-window__back-button","aria-label":"Return to main study editor window",onClick:n,"data-testid":"edit-study-color-window__back-button",children:[a.jsx(X,{type:Y.ChevronLeft,width:12,height:8,viewBox:"5 9 14 9",fill:"icon.secondary_reverse",className:"edit-study-color-window__chevron-icon",dataTestId:"chevron-left-icon"}),__(e)]}),r&&a.jsx("button",{className:"edit-study-color-window__close-button","aria-label":"Close study color editor",onClick:r,"data-testid":"edit-study-color-window__close-button",children:__("Close",{namespace:"ChartInfo"})})]}),a.jsx(cO,{initialColor:t,onChangeComplete:s})]}),_0=[xe.candle,xe.area,xe.line,xe.bar],sae=e=>{const t=s=>a.jsx("div",{children:__(s)});return a.jsx(Cl,{"data-testid":"plot-type-dropdown",renderAnchorButtonContent:()=>__(e.selectedPlotType),values:_0,getListItemKey:s=>s,onListItemClick:e.selectPlotType,renderListItemContent:t,anchorAriaLabel:`Change ${e.plotName} Plot Type`,selectedItemIndex:_0.indexOf(e.selectedPlotType)})},N0=[On.Simple,On.Exponential,On.Weighted,On.Wilders,On.Hull],P0=e=>{const t=n=>a.jsx("div",{children:__(n)}),s=()=>a.jsx(lO,{children:__(e.selectedAverageType)});return a.jsx(Cl,{"data-testid":e.studyName===je.TRUE_RANGE_AVERAGE_TYPE?"true-range-average-type-dropdown":"average-type-dropdown",renderAnchorButtonContent:s,values:N0,getListItemKey:n=>n,onListItemClick:e.selectAverageType,renderListItemContent:t,anchorAriaLabel:"Average Type",selectedItemIndex:N0.indexOf(e.selectedAverageType)})},ds=A.div({boxSizing:"border-box",minWidth:0},t1(s1,n1,r1,o1,a1,i1,nx,rx,l1,a5)),Be=A(ds)({display:"flex"},i5),nae=A.div`
  height: 22px;
  width: 22px;
  position: relative;
`,Td=A.span`
  position: absolute;
  cursor: pointer;
  height: 16px;
  width: 16px;
  border-width: 2px;
  border-style: solid;
  border-radius: 4px;
  background: ${({theme:{colors:e}})=>e.checkbox.primary.background};
  border-color: ${({theme:{colors:e}})=>e.checkbox.primary.borderColor};
`,rae=A.input`
  &:hover ~ ${Td} {
    border-color: ${({theme:e})=>e.colors.selected.primary.background};
  }

  &:not(:checked) ~ ${Td} > svg {
    display: none;
  }

  &:disabled ~ ${Td} {
    background: ${({theme:{colors:e}})=>e.checkbox.primary.borderColor};
    border-color: ${({theme:{colors:e}})=>e.checkbox.primary.borderColor};
    cursor: default;

    & svg path {
      fill: ${oe.ALPHA_WHITE_50};
    }
  }

  &:checked ~ ${Td} > svg {
    display: block;
    position: absolute;
    top: 37%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
`,oae=A.div`
  display: flex;
  align-self: baseline;
  color: ${({theme:e,disabled:t})=>t?e.colors.text.disabled:e.colors.text.primary};
`,Mn=({id:e,ariaLabel:t,label:s,checkBoxRef:n,isChecked:r,onChange:o,disabled:i,className:l})=>a.jsxs(Be,{className:l,alignItems:"center",children:[a.jsx(nae,{children:a.jsxs(Be,{as:"label",alignItems:"center",justifyContent:"center",children:[a.jsx(rae,{id:e,"data-testid":e,ref:n,"aria-label":t,type:"checkbox",checked:r,onChange:o,disabled:i}),a.jsx(Td,{"aria-hidden":!0,children:a.jsx(X,{type:Y.Checkbox,dataTestId:"checkbox-icon",width:16,height:16,viewBox:"0 0 16 16"})})]})}),s&&a.jsx(oae,{disabled:i,children:a.jsx(Be,{as:"label",alignSelf:"baseline",htmlFor:e,children:__(s)})})]}),aae=A.input`
  background: ${({theme:{colors:e}})=>e.background.primary};
  padding: 9px 5px;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  color: ${({theme:{colors:e}})=>e.text.primary};

  border: ${({theme:{shape:e}})=>`${e.borderWidth.primary}px solid}`};
  border-color: ${({theme:{colors:e}})=>e.border.primary};
  border-radius: ${({theme:{shape:e}})=>e.borderRadius.primary}px;
  max-width: 50%;
`,iae=A(Mn)`
  margin-top: ${({theme:e})=>e.space.xSmall};
  margin-left: -3px;
`,lae=A.div`
  padding-top: ${({studyName:e})=>e===me.VOLUME?"5px":0};
  align-self: flex-start;
`,cae=e=>e.type===me.ADX||e.type===G.BOLLINGER_BANDS||e.type===me.PRICE_CHANNEL||e.type===me.DMI||e.type===me.RSI||e.type===me.CCI||e.type===me.TRIX||e.type===G.ATR||e.type===me.KELTNER_CHANNELS||e.type===G.MONEY_FLOW_INDEX||e.type===G.TTM_SQUEEZE||e.type===me.STANDARD_DEV_CHANNEL&&e[je.FULL_RANGE]===Jd.NO||wu(e.type),dae=e=>e.type===G.BOLLINGER_BANDS||e.type===me.RSI||e.type===me.KELTNER_CHANNELS||e.type===me.TRIX||e.type===G.TTM_SQUEEZE||e.type===me.STANDARD_DEV_CHANNEL||e.type===me.LINEAR_REG_TRENDLINE||wu(e.type),uae=e=>e.type===me.KELTNER_CHANNELS,Fm=e=>e.type!==me.CCI&&e.type!==G.ON_BALANCE_VOLUME&&e.type!==G.IMPLIED_VOLATILITY,hae=e=>e.type===me.VWAP||e.type===me.PIVOT_POINTS,pae=e=>e.type===me.PIVOT_POINTS,mae=(e,t)=>({...e,[t.type]:t.value}),vn=({children:e,field:t})=>a.jsxs("div",{className:"study-parameter",children:[a.jsx("div",{className:"study-parameter-label",children:__(bf[t])}),e]},t),dO=e=>{const{study:t,dynamicStudy:s,deleteStudy:n,updateNumericParameters:r,updateAverageType:o,updateTrueRangeAverageType:i,updateChartPriceType:l,updateStudiesTimeFrame:c,updateStudiesFullRange:d,updateStudiesShowOnlyToday:u,updateDynamicParam:h,closeWindow:p}=e,[m,g]=j.useState(null),[S,T]=j.useReducer(mae,e.study.parameters),y=U=>Se=>{T({type:U,value:Se}),r(U,Se)},b=U=>Se=>{T({type:U,value:Se}),l(U,Se)},E=U=>{T({type:je.AVERAGE_TYPE,value:U}),o(U)},v=U=>{T({type:je.TRUE_RANGE_AVERAGE_TYPE,value:U}),i(U)},D=U=>{T({type:je.TIME_FRAME,value:U}),c(U)},w=U=>{T({type:je.FULL_RANGE,value:U}),d(U)},N=U=>{T({type:je.SHOW_ONLY_TODAY,value:U}),u(U)},L=(U,Se)=>{const be=String(Se).toUpperCase().trimStart();T({type:U,value:be}),h(U,be)},P=(U,Se)=>{T({type:U,value:Se}),h(U,Se)},F=U=>{switch(U.key){case we.ArrowRight:case we.ArrowLeft:U.stopPropagation()}},O=(U,Se)=>be=>{var We,He,Dt;const le=(We=e.plotParameters[U])==null?void 0:We.colorOptions;if(ru.hasKey(le,Se)){const Jt=D9(le,Se,be),ve=((He=e.plotParameters[U])==null?void 0:He.plotType)??xe.line,Ue=((Dt=e.plotParameters[U])==null?void 0:Dt.savedColors)??Yb;e.updatePlotParameters([{plotName:U,plotParam:so.COLOR_OPTIONS,value:Jt},{plotName:U,plotParam:so.SAVED_COLORS,value:{...Ue,[ve]:Jt}}])}},H=j.useCallback(()=>{const U=[];Object.keys(e.plotParameters).forEach(Se=>{var le;const be=(le=e.plotParameters[Se])==null?void 0:le.colorOptions;t.name===me.PIVOT_POINTS?U.push({plotName:Se,plotParam:so.COLOR_OPTIONS,value:$r[t.name].defaultPlotParams[Se].colorOptions}):t.name===G.VOLUME_PROFILE?U.push({plotName:Se,plotParam:so.COLOR_OPTIONS,value:_1.colorOptions}):be.isPreset?(U.push({plotName:Se,plotParam:so.COLOR_OPTIONS,value:{...Ef[be.type],isPreset:!0}}),U.push({plotName:Se,plotParam:so.SAVED_COLORS,value:Yb})):U.push({plotName:Se,plotParam:so.COLOR_OPTIONS,value:_9(be.type)})}),e.updatePlotParameters(U)},[e]),C=U=>Se=>{var Dt,Jt,ve;const be={plotName:U,plotParam:so.PLOT_TYPE,value:Se},le=((Dt=t6[Se])==null?void 0:Dt.validColorStrategies[0])??Ae.SINGLE,We={plotName:U,plotParam:so.COLOR_OPTIONS,value:((ve=(Jt=e.plotParameters[U])==null?void 0:Jt.savedColors)==null?void 0:ve[Se])??Ef[le]},He=[be,We];e.updatePlotParameters(He)},M=U=>U>0&&U<=2147483647,q=U=>!isNaN(U)&&U>=-2147483647&&U<=2147483647,W=U=>/(^(-?\d*)$|^$)/.test(U),z=(U,Se,be,le)=>a.jsx(vn,{field:le,children:a.jsx(er,{isValid:U,isValidOnChange:W,valueStep:1,value:Se,onUpdateValue:be,dataTestId:le})},le),re=U=>{switch(U){case je.LENGTH:return cae(S)?z(M,S.length,y(U),U):null;case je.FAST_LENGTH:case je.SLOW_LENGTH:case je.MACD_LENGTH:return S.type===me.MACD?z(M,S[U],y(U),U):null;case je.MOVING_AVERAGE_LENGTH:return S.type===G.MONEY_FLOW_INDEX?z(M,S[U],y(U),U):null;case je.SIGNAL_LENGTH:return S.type===me.TRIX?z(M,S[U],y(U),U):null;case je.AVERAGE_TYPE:return Fm(S)?a.jsx(vn,{field:U,children:a.jsx(P0,{studyName:e.study.name,selectAverageType:E,selectedAverageType:S[je.AVERAGE_TYPE]})},U):null;case je.PRICE:return dae(S)?a.jsx(vn,{field:U,children:a.jsx(L0,{studyId:e.studyId,selectChartPriceType:b(U),selectedChartPriceType:S[je.PRICE]})},U):null;case je.TRUE_RANGE_AVERAGE_TYPE:return uae(S)?a.jsx(vn,{field:U,children:a.jsx(P0,{studyName:e.study.name,selectAverageType:v,selectedAverageType:S[je.TRUE_RANGE_AVERAGE_TYPE]})},U):null;case je.SHOW_ONLY_TODAY:return pae(S)?a.jsx(vn,{field:U,children:a.jsx(Uoe,{studyId:e.studyId,selectShowOnlyToday:N,selectedShowOnlyToday:S[je.SHOW_ONLY_TODAY]})},U):null;case je.TIME_FRAME:return hae(S)?a.jsx(vn,{field:U,children:a.jsx(Xoe,{studyId:e.studyId,selectTimeFrame:D,selectedTimeFrame:S[je.TIME_FRAME]})},U):null;case je.DISPLACE:return S.type===G.BOLLINGER_BANDS||S.type===me.PRICE_CHANNEL||S.type===me.KELTNER_CHANNELS?a.jsx(vn,{field:U,children:a.jsx(er,{isValid:q,isValidOnChange:W,valueStep:1,value:S.displace,onUpdateValue:y(U),dataTestId:U})},U):null;case je.FACTOR:return S.type===me.KELTNER_CHANNELS?a.jsx(vn,{field:U,children:a.jsx(er,{isValid:q,valueStep:.1,value:S[je.FACTOR],onUpdateValue:y(U),dataTestId:U})},U):null;case je.NUM_DEV_DN:return a.jsx(vn,{field:U,children:a.jsx(er,{isValid:q,valueStep:.1,value:S[je.NUM_DEV_DN],onUpdateValue:y(U),dataTestId:U})},U);case je.NUM_DEV_UP:return a.jsx(vn,{field:U,children:a.jsx(er,{isValid:M,valueStep:.1,value:S[je.NUM_DEV_UP],onUpdateValue:y(U),dataTestId:U})},U);case je.DEVIATIONS:return S.type===me.STANDARD_DEV_CHANNEL?a.jsx(vn,{field:U,children:a.jsx(er,{isValid:M,valueStep:.1,value:S[je.DEVIATIONS],onUpdateValue:y(U),dataTestId:U})},U):null;case je.STD_DEV:return S.type===me.PROBABILITY_OF_EXPIRING_CONE?a.jsx(vn,{field:U,children:a.jsx(er,{isValid:M,valueStep:.1,value:S[U],onUpdateValue:y(U),dataTestId:U})},U):null;case je.FULL_RANGE:return S.type===me.STANDARD_DEV_CHANNEL?a.jsx(vn,{field:U,children:a.jsx(Hoe,{studyId:e.studyId,selectFullRange:w,selectedFullRange:S[je.FULL_RANGE]})},U):null;case je.OVERBOUGHT:case je.OVERSOLD:return S.type===me.RSI||S.type===me.STOCHASTIC||S.type===me.CCI||S.type===G.MONEY_FLOW_INDEX?a.jsx(vn,{field:U,children:a.jsx(er,{isValid:S.type===me.CCI?q:M,isValidOnChange:W,valueStep:1,value:S[U],onUpdateValue:y(U),dataTestId:U})},U):null;case je.K_PERIOD:case je.D_PERIOD:case je.SLOWING_PERIOD:return S.type===me.STOCHASTIC?a.jsx(vn,{field:U,children:a.jsx(er,{isValid:M,isValidOnChange:W,valueStep:1,value:S[U],onUpdateValue:y(U),dataTestId:U})},U):null;case je.PRICE_C:case je.PRICE_H:case je.PRICE_L:return S.type===me.STOCHASTIC?a.jsx(vn,{field:U,children:a.jsx(L0,{studyId:e.studyId,selectChartPriceType:b(U),selectedChartPriceType:S[U]})},U):null;case je.NK:case je.NBB:case je.ALERTLINE:return S.type===G.TTM_SQUEEZE?a.jsx(vn,{field:U,children:a.jsx(er,{isValid:M,valueStep:.1,value:S[U],onUpdateValue:y(U),dataTestId:U})},U):null;case je.VOLATILITY_ADJUST:return S.type==me.PROBABILITY_OF_EXPIRING_CONE?a.jsx(vn,{field:U,children:a.jsx(er,{isValid:q,valueStep:.1,value:S[U],onUpdateValue:y(U),dataTestId:U})},U):null;case je.SECONDARY_SECURITY:return a.jsx(vn,{field:U,children:a.jsx(aae,{"aria-label":"Type secondary security",value:S[U],"data-testid":"secondary-security",onChange:Se=>L(U,Se.target.value),onKeyDown:F,placeholder:__("Type symbol")})},U);default:return null}},ae=(U,Se,be)=>{const le=e.plotParameters[U];switch(Se){case so.COLOR_OPTIONS:return a.jsx(j.Fragment,{children:Object.keys(le[Se]).filter(We=>We!=="type"&&We!=="isEdited"&&We!=="isPreset").map(We=>{const He=ru.hasKey(le.colorOptions,We)&&We!=="type"&&We!=="isEdited"&&We!=="isPreset"?le.colorOptions[We]:Re.lightGray,Dt=Fw(We);let Jt,ve;return be&&Ac(be)?(Jt=Hw(be,Dt),ve=`${__(Jt)}`):ve=`${__(U)}${__(" ")}${__(Dt)}`,a.jsxs("div",{className:"study-parameter",children:[a.jsx(lae,{studyName:be,className:"study-parameter-label",children:ve}),a.jsxs("div",{children:[a.jsx(Zoe,{hslColor:He,"aria-label":`Edit ${U} ${Jt||Dt} ${We!=="color"?"Color":""}`,onClick:()=>g({plotName:U,field:We})}),be===me.VOLUME&&a.jsx(iae,{id:"color-as-symbol-ticks-checkbox",ariaLabel:bf[je.COLOR_AS_SYMBOL_TICKS],label:bf[je.COLOR_AS_SYMBOL_TICKS],isChecked:S[je.COLOR_AS_SYMBOL_TICKS],onChange:Ue=>P(je.COLOR_AS_SYMBOL_TICKS,Ue.target.checked)})]})]},`${U}-${Se}-${We}`)})},`${U}-${Se}`);case so.PLOT_TYPE:return U!=="Price"?null:a.jsxs("div",{className:"study-parameter",children:[a.jsx("div",{className:"study-parameter-label",children:`${__(U)}${__(" ")}${__("Plot Type")}`}),a.jsx(sae,{plotName:U,selectedPlotType:e.plotParameters[U].plotType,selectPlotType:C(U)})]},`${U}-${Se}`);default:return null}},Me=Object.keys(t.parameters).filter(U=>U!=="type").sort((U,Se)=>Vb[U]-Vb[Se]),he=Yo(t.name)&&s||!Yo(t.name);return a.jsx("div",{className:"window-content native-scroll",children:m!==null?gae(t.name,e.plotParameters,m.plotName,m.field,O(m.plotName,m.field),()=>g(null),p):a.jsx(a.Fragment,{children:he?a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"study-name","data-testid":"study-name",children:Yo(t.name)?__(oc[t.name].readableName,{namespace:"AddStudyMenu"}):__($r[t.name].readableName,{namespace:"AddStudyMenu"})}),Me.map(Yo(t.name)?(U,Se)=>s!==void 0&&s.parameters!==void 0&&s.parameters[U]!==void 0&&t.name!==G.VOLUME_PROFILE?a.jsx(zoe,{studyParametersInfo:s.parameters[U],updateDynamicParam:h,dispatch:T,value:S[U]},`${s.parameters[U]}-${Se}`):null:re),Object.keys(t.plotParameters).map(U=>{const Se=t.plotParameters[U];return Se.plotType===xe.histogram&&Se.colorOptions.type!==Ae.SINGLE?null:a.jsx(j.Fragment,{children:Object.keys(t.plotParameters[U]).map(be=>ae(U,be,t.name))},U)}),a.jsx("div",{className:"study-parameter",children:a.jsx("button",{className:"study-parameter__action",onClick:H,children:__("Reset Colors")})}),e.studyId!==dr&&e.studyId!==cr&&a.jsx("div",{className:"study-parameter",children:a.jsx("button",{className:"study-parameter__action",onClick:n,children:__("Remove Study")})})]}):a.jsx("div",{className:"loader"})})})},gae=(e,t,s,n,r,o,i)=>{const l=t[s],c=Fw(n);let d;return e&&Ac(e)?d=`${__(Hw(e,c))}`:d=`${__(s)}${__(" ")}${__(c)}`,(l.plotType!==xe.histogram||l.colorOptions.type===Ae.SINGLE)&&ru.hasKey(l.colorOptions,n)&&n!=="type"&&n!=="isEdited"&&n!=="isPreset"&&a.jsx(tae,{fieldName:d,currentColor:l.colorOptions[n],updateColor:r,returnToMainWindow:o,closeWindow:i})},Sae=e=>e.chartData.timestamps.map((t,s)=>({y:{open:e.chartData.opens[s],close:e.chartData.closes[s],high:e.chartData.highs[s],low:e.chartData.lows[s],volume:e.chartData.volumes[s]},x:jp(t)})),fae=e=>{const t=e.timestamps.map((n,r)=>({y:{open:e.opens[r],close:e.closes[r],high:e.highs[r],low:e.lows[r]},x:jp(n)})),s=e.timestamps.map((n,r)=>({y:e.volumes[r],x:jp(n)}));return{price:{id:dr,plots:[{studyId:dr,name:"Price",values:t}]},volume:{id:cr,plots:[{studyId:cr,name:"Volume",values:s}]}}},uO={candles:void 0,studies:void 0,newCandles:void 0,volumes:void 0,symbol:null},hO={candles:void 0,studies:void 0,newCandles:void 0,volumes:void 0,priceLevelPreviewValue:void 0,expansionDataCount:0,gainAndLossPLDateTime:et(),hoveredPriceChartDate:void 0,symbol:null},Tae=()=>{const e=mj(),t=gj();let s=Yt();return e.keySeq().toArray().forEach(n=>{if(!n.startsWith(zn)){const r=e.get(n),o={...hO,...r};s=s.set(n,o)}}),t.keySeq().toArray().forEach(n=>{if(n.startsWith(zn)){const r=t.get(n),o={...uO,...r};s=s.set(n,o)}}),s},yae=(e=Tae(),t)=>{var s;switch(t.type){case f.SymbolSelected:case f.ChartSymbolsSelected:return e.map((n,r)=>r.startsWith(zn)?n:{...n,candles:void 0,studies:void 0,newCandles:void 0,volumes:void 0});case f.ChangeCrossingType:{const{chartId:n,studyId:r}=t,o=e.get(n);if(o===void 0)return e;const i=o.studies??[],l=i.find(c=>c.id===r);return l&&(l.plots[0].values=l.plots[0].values.map(c=>({x:c.x,y:0}))),e.set(n,{...o,studies:i.length===0?void 0:i})}case f.ChartReceived:{const n=t.chartId,r=e.get(n);if(r===void 0)return e;const o=Sae(t),i=fae(t.chartData),l=i.price,c=i.volume,d=t.chartData.studies;return e.set(n,{...r,studies:d.length===0?void 0:d,candles:o.length===0?void 0:o,newCandles:l,volumes:c})}case f.SaveChartSymbol:{const{chartId:n,symbol:r}=t,o=e.get(n);return o===void 0?e:e.set(n,{...o,symbol:r})}case f.AddCharts:return e.merge(t.charts);case f.RemoveCharts:return e.deleteAll(t.chartIds);case f.ChangeChartSymbol:{const{chartId:n,symbol:r}=t,o=e.get(n);return o===void 0?e:e.set(n,{...o,candles:void 0,studies:void 0,newCandles:void 0,volumes:void 0,symbol:r})}case f.SetSparkChart:{const{chartId:n,symbol:r}=t,o=e.get(n);return o===void 0?e:e.set(n,{...o,candles:void 0,studies:void 0,newCandles:void 0,volumes:void 0,symbol:r})}case f.AddChartExpansion:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,expansionDataCount:r.expansionDataCount+t.count})}case f.RemoveChartExpansion:{const n=t.chartId,r=e.get(n);if(r===void 0)return e;const o=Math.max(0,r.expansionDataCount-t.count);return e.set(n,{...r,expansionDataCount:o})}case f.ChartRangeSelected:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,range:t.range,expansionDataCount:0,candles:void 0,studies:void 0,newCandles:void 0,volumes:void 0})}case f.ChartAggregationSelected:{const n=t.chartId,r=e.get(n),{aggregation:o}=t;return r===void 0?e:e.set(n,{...r,aggregations:{...r.aggregations,[r.range]:o},expansionDataCount:0,candles:void 0,studies:void 0,newCandles:void 0,volumes:void 0})}case f.SetShowExtendedHours:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,extendedHours:t.extendedHours})}case f.SetShowAlerts:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,showAlerts:t.showAlerts})}case f.SetShowOptionPositions:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,showOptionPositions:t.showOptionPositions})}case f.SetShowChartHighLow:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,showChartHighLow:t.showChartHighLow})}case f.SetShowEarningsPreview:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,showEarningsPreview:t.showEarningsPreview})}case f.SetShowEarningsIcon:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,showEarningsIcon:t.showEarningsIcon})}case f.SetShowDividendsIcon:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,showDividendsIcon:t.showDividendsIcon})}case f.SetFitStudiesInYAxis:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,fitStudiesInYAxis:t.fitStudiesInYAxis})}case f.SetShowWorkingOrders:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,showWorkingOrders:t.showWorkingOrders})}case f.SetShowTradePrice:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,showTradePrice:t.showTradePrice})}case f.SaveStudies:{const{studies:n,chartId:r}=t,o=e.get(r);return o===void 0?e:e.set(r,{...o,studiesParams:n})}case f.SetStudyParameters:{const{parameters:n,plotParameters:r,id:o,chartId:i}=t,l=e.get(i);if(l===void 0)return e;const{studiesParams:c,studies:d}=l,u=c.get(o);if(u===void 0)return e;const h=u.name,p=c.set(u.id,{...u,name:wu(h)&&Fm(n)?Gx[n.averageType]:h,parameters:{...u.parameters,...n},plotParameters:r}),m=d==null?void 0:d.map(g=>{if(g.id!==o)return g;const S=g.plots.map(T=>({...T,...r[T.name]}));return{...g,plots:S}});return e.set(i,{...l,studiesParams:p,studies:m})}case f.DeleteStudy:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,studies:(s=r.studies)==null?void 0:s.filter(o=>o.id!==t.id)})}case f.SetPriceLevelPreviewValue:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,priceLevelPreviewValue:t.payload})}case f.SetGainAndLossChartDateTime:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,gainAndLossPLDateTime:t.dateTime})}case f.SetPriceChartHoveredDate:{const n=t.chartId,r=e.get(n);return r===void 0?e:e.set(n,{...r,hoveredPriceChartDate:t.date})}default:return e}},jp=e=>{const t="America/Chicago",s=Ja(e).tz(t).format("YYYY"),n=Ja(e).tz(t).format("M"),r=Ja(e).tz(t).format("D"),o=new Date(e);return o.setFullYear(parseInt(s)),o.setMonth(parseInt(n)-1),o.setDate(parseInt(r)),o},Ws=(e,t,s)=>{let n=Yt();e.keySeq().toArray().forEach(r=>{const o=e.get(r);if(o!==void 0){const i=pO(o,t,r,s);n=n.set(r,i)}}),fj(n)},Cae=(e,t,s,n)=>{let r=Yt();e.keySeq().toArray().forEach(o=>{const i=e.get(o);if(i!==void 0)if(o.startsWith(zn)){const l=t===o?{range:i.range,aggregations:i.aggregations,extendedHours:i.extendedHours,studiesParams:i.studiesParams,symbol:i.symbol,...s}:{range:i.range,aggregations:i.aggregations,extendedHours:i.extendedHours,studiesParams:i.studiesParams,symbol:i.symbol};r=r.set(o,l)}else{const l=pO(i,t,o,n);r=r.set(o,l)}}),Sj(r)},pO=(e,t,s,n)=>t===s?{range:e.range,aggregations:e.aggregations,extendedHours:e.extendedHours,showAlerts:e.showAlerts,showOptionPositions:e.showOptionPositions,showWorkingOrders:e.showWorkingOrders,showTradePrice:e.showTradePrice,studiesParams:e.studiesParams,showChartHighLow:e.showChartHighLow,showEarningsPreview:e.showEarningsPreview,showEarningsIcon:e.showEarningsIcon,showDividendsIcon:e.showDividendsIcon,fitStudiesInYAxis:e.fitStudiesInYAxis,symbol:e.symbol,...n}:{range:e.range,aggregations:e.aggregations,extendedHours:e.extendedHours,showAlerts:e.showAlerts,showOptionPositions:e.showOptionPositions,showWorkingOrders:e.showWorkingOrders,showTradePrice:e.showTradePrice,showChartHighLow:e.showChartHighLow,showEarningsPreview:e.showEarningsPreview,showEarningsIcon:e.showEarningsIcon,showDividendsIcon:e.showDividendsIcon,fitStudiesInYAxis:e.fitStudiesInYAxis,studiesParams:e.studiesParams,symbol:e.symbol},da=(e,t,s)=>e===zs?s:t.symbol,mO=()=>({...hO,...Nf}),bae=()=>({...uO,...fd}),Eae=e=>e.reduce((t,s,n)=>{const r=n.split("-"),o=Number(r.pop());return!isNaN(o)&&o>t&&(t=o),t},0),Ps=e=>`${qi}-${e}`,k0=e=>e.reduce((t,{symbol:s},n)=>(s===null||(t.hasOwnProperty(s)||(t[s]=[]),t[s].push(n)),t),{}),M0=(e,t,s)=>e.reduce((n,r,o)=>((r.symbol===t||o===zs&&s===t)&&n.push(o),n),[]),gO=e=>e===ge.Charts,Aae=(e,t)=>gO(e)&&t===1,SO=(e,t)=>gO(e)&&t>1,vae=e=>{const s=(e.studies??[]).reduce((o,i)=>{const l=al();return o.set(i.id,{id:l,plots:i.plots.map(c=>({...c,studyId:l,values:[]}))})},ke()),n=s.valueSeq().toArray(),r=e.studiesParams.mapEntries(([o,i])=>{var c;const l=((c=s.get(o))==null?void 0:c.id)??o;return[l,{...i,id:l}]});return{...mO(),extendedHours:e.extendedHours,showAlerts:e.showAlerts,showOptionPositions:e.showOptionPositions,showWorkingOrders:e.showWorkingOrders,showTradePrice:e.showTradePrice,showChartHighLow:e.showChartHighLow,showEarningsPreview:e.showEarningsPreview,showEarningsIcon:e.showEarningsIcon,showDividendsIcon:e.showDividendsIcon,fitStudiesInYAxis:e.fitStudiesInYAxis,range:e.range,aggregations:e.aggregations,studies:n.length?n:void 0,studiesParams:r}},Iae=(e,t)=>{let s=t==null?void 0:t.plots;if(s)return e===G.TTM_SQUEEZE&&(s=s.map(n=>{var r,o,i,l;return(n==null?void 0:n.name)==="SqueezeAlert"&&((o=(r=n==null?void 0:n.plotSettings)==null?void 0:r.defaultValue)!=null&&o.paintingStyle)&&((l=(i=n==null?void 0:n.plotSettings)==null?void 0:i.defaultValue)!=null&&l.paintingType)&&(n.plotSettings.defaultValue.paintingStyle=At.BOOLEAN_POINTS,n.plotSettings.defaultValue.paintingType=kd.BOOLEAN),n})),s},fO=(e,t)=>{var s;return((s=e.charts.get(t))==null?void 0:s.range)??y1},TO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.range)??y1},xae=(e,t)=>{var s;return((s=e.charts.get(t))==null?void 0:s.aggregations)??C1},yO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.aggregations)??C1},CO=x(fO,xae,(e,t)=>t[e]),bO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.showOptionPositions)??!0},EO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.showWorkingOrders)??!0},AO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.showTradePrice)??!0},vO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.showAlerts)??!0},wae=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.extendedHours)??!0},IO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.showChartHighLow)??!0},xO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.showEarningsPreview)??!0},wO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.showEarningsIcon)??!0},OO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.showDividendsIcon)??!0},RO=e=>t=>{var s;return((s=t.charts.get(e))==null?void 0:s.fitStudiesInYAxis)??!0},Oae=e=>t=>{var s;return(s=t.charts.get(e))==null?void 0:s.priceLevelPreviewValue},Rae=(e,t)=>{var s;return((s=e.charts.get(t))==null?void 0:s.gainAndLossPLDateTime)??et()},Dae=(e,t)=>{var s;return(s=e.charts.get(t))==null?void 0:s.hoveredPriceChartDate},bl=(e,t)=>e.charts.get(t),Hm=e=>t=>t.charts.get(e),Lae=x(bl,e=>e==null?void 0:e.candles),_ae=x(bl,e=>e==null?void 0:e.studies),Nae=x(bl,e=>(e==null?void 0:e.studiesParams)??Yt()),Pae=x(bl,e=>(e==null?void 0:e.studiesParams.map(t=>{const{plotParameters:s,...n}=t;return n}).valueSeq().toArray())??[]),kae=x(bl,e=>(e==null?void 0:e.expansionDataCount)??0),DO=(e,t,s,n)=>{if(e===void 0||t===void 0||s===void 0||n===void 0)return[];const r=(e==null?void 0:e.filter(o$(t)))??[],o=jx(r,new Date),i=Fx(s,o,n);return r.map(i)},ey=x(_ae,Nae,CO,kae,DO),an=e=>x(mt,Hm(e),(t,s)=>e===zs?t:(s==null?void 0:s.symbol)??null),hs=e=>e.charts.delete(zs).filter((t,s)=>!s.startsWith(zn)),Ru=x(hs,e=>{var t;return((t=e.get(Ps(1)))==null?void 0:t.symbol)??null}),Um=x(hs,mt,(e,t)=>{const s=e.reduce((n,r,o)=>(o===Ps(1)&&r.symbol===null&&t!==null?n.add(t):r.symbol!==null&&n.add(r.symbol),n),new Set);return Array.from(s)}),El=x(ms,mt,hs,(e,t,s)=>{var n;return e===ge.Charts?((n=s.get(Ps(1)))==null?void 0:n.symbol)??null:t}),ty=e=>e.selectedSymbol.chartSelectedSymbol,Os=x(ms,mt,ty,(e,t,s)=>e===ge.Charts?s:t);var Ot=(e=>(e.SINGLE="SINGLE",e.BLAST_ALL="BLAST_ALL",e.OCO="OCO",e.FIRST_TRIGGERS_ALL="FIRST_TRIGGERS_ALL",e.FIRST_TRIGGERS_SEQ="FIRST_TRIGGERS_SEQ",e.FIRST_TRIGGERS_OCO="FIRST_TRIGGERS_OCO",e.FIRST_TRIGGERS_2_OCO="FIRST_TRIGGERS_2_OCO",e.FIRST_TRIGGERS_3_OCO="FIRST_TRIGGERS_3_OCO",e.PAIR="PAIR",e))(Ot||{});const dc=e=>{if(e===void 0)return"";let t=e;switch(e){case"SINGLE":t=__("Single");break;case"BLAST_ALL":t=__("Blast All");break;case"OCO":t=__("OCO");break;case"FIRST_TRIGGERS_ALL":t=__("1st trgs All");break;case"FIRST_TRIGGERS_SEQ":t=__("1st trgs Seq");break;case"FIRST_TRIGGERS_OCO":t=__("1st trgs OCO");break;case"FIRST_TRIGGERS_2_OCO":t=__("1st trgs 2 OCO");break;case"FIRST_TRIGGERS_3_OCO":t=__("1st trgs 3 OCO");break;case"PAIR":t=__("Pair");break}return t},Mae=e=>{if(e===void 0)return"";let t=e;switch(e){case"SINGLE":t=__("Single");break;case"BLAST_ALL":t=__("Blast All");break;case"OCO":t=__("OCO");break;case"FIRST_TRIGGERS_ALL":t=__("First triggers All");break;case"FIRST_TRIGGERS_SEQ":t=__("First triggers Seq");break;case"FIRST_TRIGGERS_OCO":t=__("First triggers OCO");break;case"FIRST_TRIGGERS_2_OCO":t=__("First triggers 2 OCO");break;case"FIRST_TRIGGERS_3_OCO":t=__("First triggers 3 OCO");break;case"PAIR":t=__("Pair");break}return t},Oc=e=>{if(e.length===0)return"SINGLE";switch(e[0]){case rs.THEN:switch(e[1]){case rs.AND:return"FIRST_TRIGGERS_ALL";case rs.OR:return"FIRST_TRIGGERS_OCO";case rs.THEN:return"FIRST_TRIGGERS_SEQ";default:return"FIRST_TRIGGERS_ALL"}case rs.OR:return"OCO";case rs.AND:return"BLAST_ALL"}},Pr=(e,t,s)=>e?t:s,$ae=(e,t)=>{switch(e){case Ot.BLAST_ALL:return t.length===0?[rs.AND]:t.map(s=>rs.AND);case Ot.OCO:return t.length===0?[rs.OR]:t.map(s=>rs.OR);case Ot.FIRST_TRIGGERS_SEQ:return t.length<2?[rs.THEN,rs.THEN]:t.map(s=>rs.THEN);case Ot.FIRST_TRIGGERS_ALL:return t.length<2?[rs.THEN,rs.AND]:t.map((s,n)=>n===0?rs.THEN:rs.AND);case Ot.FIRST_TRIGGERS_OCO:return t.length<2?[rs.THEN,rs.OR]:t.map((s,n)=>n===0?rs.THEN:rs.OR);default:return t}},Hf=2,LO=3,$0=(e,t)=>{switch(e){case Ot.BLAST_ALL:case Ot.OCO:return t<Hf;case Ot.FIRST_TRIGGERS_SEQ:case Ot.FIRST_TRIGGERS_ALL:case Ot.FIRST_TRIGGERS_OCO:return t<LO;default:return!1}},jae=(e,t,s)=>{let n=0;return e.forEach(r=>{var h;const o=s.get(r.symbol),i=(o==null?void 0:o.spc)??1,c=((h=t.filter(p=>p.symbol===r.symbol)[0])==null?void 0:h.quantity)??0,d=r.quantity;r.instrumentType===k.STOCK&&r.direction===pe.Sell&&d>c&&(n+=Pr(c>0,d-c,d)*i)}),n},Bae=(e,t,s)=>{let n=0;return e.forEach(r=>{var p;const o=s.get(r.symbol),i=(o==null?void 0:o.spc)??100,c=((p=t.filter(m=>m.symbol===r.symbol)[0])==null?void 0:p.quantity)??0,d=r.quantity,u=r.instrumentType===k.OPTION&&r.optionType===dt.Put&&r.direction===pe.Buy&&d>=Math.abs(c),h=r.instrumentType===k.OPTION&&r.optionType===dt.Call&&r.direction===pe.Sell&&d>=Math.abs(c);u?n+=Pr(c<0,d+c,d)*i:h&&(n+=Pr(c>0,d-c,d)*i)}),n},j0=(e=0,t,s=0)=>e*Math.abs(t)*s/360,Fae=__("Securities in this order are subject to a HTB fee."),Hae=__("This security is currently hard-to-borrow. Short sale orders for HTB securities may not be accepted during non-market hours due to short sale locate requirements."),Uae=__("The underlying security of this option is currently hard-to-borrow. Short sale orders for HTB securities may not be accepted during non-market hours due to short sale locate requirements."),Vae=__("TD Ameritrade, Inc. is the broker-dealer for your account and is controlled by the issuer of this security, The Charles Schwab Corporation."),Wae=__("Additional Forex execution data available by request by contacting the Trade Desk"),Gae=__("Orders with less than 1 shares must be of type MARKET."),Yae=(e,t)=>__(`The estimated annualized rate to sell short is ${t}. The estimated daily fee for your order is $${ur(e)}. Please note that you will be charged one day's interest even if the order doesn't execute, as shares are reserved at the time of order entry. By selecting 'Send', you are agreeing to pay this fee. More details can be found at www.schwab.com/shortsale`),qae=(e,t)=>__(`The underlying security of this option is currently considered hard to borrow. If this order results in a short position due to assignment or exercise, a daily borrow fee will be charged. The current borrow rate is ${t}. If all shares of this option were assigned or exercised, the daily fee would be $${ur(e)} based on yesterday's closing price. The borrow rate and fee are subject to change daily based upon market conditions`),_O=e=>e.createTrade.events,So=e=>e.createTrade.trade,Kae=x(So,e=>Array.from(e.entries()).map(t=>t[0])),Rc=(e,t)=>{var s;return(s=e.createTrade.trade.get(t))==null?void 0:s[0]},Vm=(e,t)=>{var s,n;return(n=(s=e.createTrade.trade.get(t))==null?void 0:s[0])==null?void 0:n.orders[0]},Hr=(e,t,s)=>{var n,r;return(r=(n=e.createTrade.trade.get(t))==null?void 0:n[0])==null?void 0:r.orders[s]},NO=e=>e.createTrade.orderConfirmation,zae=e=>e.workingOrders,PO=x(_O,Pa,(e,t)=>t?e.filter(s=>s.accountCode===t):e),Xae=x(e=>e.trades,e=>e.map(t=>t.filter(s=>s.status===de.Completed)).filter(t=>t.length>0)),kO=x(e=>e.positions.spreadGrouping&&Js(Cs.SPREAD_GROUPING)?e.groupedPositionTrades:e.trades,e=>e.map(t=>t.filter(s=>s.status===de.Completed)).filter(t=>t.length>0)),Qae=x(e=>e.trades,mt,(e,t)=>t!==null?e.get(t):void 0),Zae=x(So,Os,(e,t)=>t!==null?e.get(t):void 0),sy=x(NO,Os,(e,t)=>t!=null&&e!==void 0?e.get(t):void 0),Dc=x(So,Os,(e,t)=>{var s,n;return t!=null&&e!==void 0?(n=(s=e.get(t))==null?void 0:s[0])==null?void 0:n.orders[0]:void 0}),MO=x(Tr,Dc,(e,t)=>{const s=e.find(n=>t!==void 0&&t.account===n.code);return!(s!=null&&s.tradeable)}),B0="808513",Jae=x(sy,e=>e.instruments,e=>e.quotes,e=>e.positions.orderAccountPositions,e=>e.positions.positions,Pa,Dc,(e,t,s,n,r,o,i)=>{var S,T;const l=(i==null?void 0:i.legs)??[],c=l.some(y=>{var v;const b=t.get(y.symbol);return((v=b==null?void 0:b.cusip)==null?void 0:v.slice(0,B0.length))===B0}),d=[...(e==null?void 0:e.warnings)??[]];((S=l[0])==null?void 0:S.instrumentType)===k.FOREX&&d.push(Wae),c&&d.push(Vae);const h=(T=i==null?void 0:i.legs[0])==null?void 0:T.rootSymbol,p=h!==void 0?s.get(h):void 0,m=p==null?void 0:p.borrowStatus,g=p==null?void 0:p.close;if(m!==void 0&&m==="HTB"){const b=p==null?void 0:p.shortSaleBorrowingRate;let E=b!==void 0&&b!=="null"?Number(b==null?void 0:b.replace(/%$/,""))/100:9.99;if((Math.abs(E)===9.99||isNaN(E))&&(E=void 0),(e==null?void 0:e.orderSummaries)&&(e==null?void 0:e.orderSummaries.length)>1&&m!==void 0&&m==="HTB")return d.push(Fae),d;const D=o===(i==null?void 0:i.account)?r.valueSeq().toArray():n.valueSeq().toArray(),w=jae(l,D,t),N=Bae(l,D,t);let L=!1,P=!1;const F=E===void 0||E===0||g===void 0||g===0;w!==0&&F&&(d.push(Hae),L=!0),N!==0&&F&&(d.push(Uae),P=!0);let O,H;w!==0&&!L&&(O=j0(E,w,g)),N!==0&&!P&&(H=j0(E,N,g)),O!==void 0&&d.push(Yae(O,b)),H!==void 0&&d.push(qae(H,b))}return d??[]}),$O=x(So,Os,(e,t)=>{var n,r;if(t===null)return;const s=(r=(n=e.get(t))==null?void 0:n[0])==null?void 0:r.orders;if(s)return s.map(({legs:o,quantity:i})=>{const l=o.some(d=>d.direction===pe.Buy),c=o.some(d=>d.direction===pe.Sell);return l&&c?i!==void 0?i>0?"buy":"sell":"":l?"buy":"sell"})}),Ur=Tm(c1,l5),Ai=e=>e.quotes,eie=e=>e.quoteSymbols,tie=x(Qae,e=>{const t=(e==null?void 0:e.map(s=>s.symbol).filter(Ut))??[];return Xr(t)}),sie=x(eie,v9,tie,(e,t,s)=>{const n=e.filter((o,i)=>t.includes(i));return Xr([...s,...c5(n.toArray().map(([o,i])=>i))])}),nie=e=>x(an(e),Ai,(t,s)=>t?s.get(t):void 0),jO=e=>e.optionChain.optionChainMap,rie=e=>e.optionChain.columnWidths,BO=e=>e.optionChain.optionChainNames,Du=e=>e.optionChain.locked,Lu=e=>e.optionChain.centeredOnOptionValue,ny=e=>e.optionChain.centeredOnField,Uf=Ur(Ai,mt,(e,t)=>{var s;return t?((s=e.get(t))==null?void 0:s.mark)??0:0}),oie=e=>e.optionChain.fractionalTypes,aie=x(oie,mt,(e,t)=>e.get(t??"")??Bs.x10),bn=e=>e.instruments,Wm=e=>{const t=(e==null?void 0:e.fractionalType)??Bs.x10,s=t!==Bs.x10;return{fractionalType:t,showFractionalPricing:s}},iie=["/ZF:XCBT","/ZT:XCBT"],Vs=(e,t)=>t===k.OPTION&&!iie.includes(e),Vr=(e,t)=>e.instruments.get(t),pn=x(Vr,Wm),FO=x(Xae,bn,Pa,(e,t,s)=>t.reduce((n,r)=>{const o=e.get(r.rootSymbol),i=o==null?void 0:o.find(c=>c.symbol===r.symbol),l=(i==null?void 0:i.status)===de.Completed&&(i==null?void 0:i.account)===s||s===void 0;return i&&l&&(n=n.set(r.symbol,r)),n},ke())),lie=x(kO,bn,Pa,(e,t,s)=>t.reduce((n,r)=>{const o=e.get(r.rootSymbol),i=o==null?void 0:o.find(c=>c.symbol===r.symbol),l=(i==null?void 0:i.status)===de.Completed&&(i==null?void 0:i.account)===s||s===void 0;return i&&l&&(n=n.set(r.symbol,r)),n},ke())),Ro=x(bn,El,(e,t)=>t!==null?e.get(t):void 0),Al=x(bn,Os,(e,t)=>t!==null?e.get(t):void 0),ry=x(bn,(e,t)=>t,(e,t)=>t!==null?e.get(t):void 0),_u=e=>x(bn,an(e),(t,s)=>s!==null?t.get(s):void 0),vl=x(Ro,e=>(e==null?void 0:e.rootSymbol)??""),Lc=x(Al,e=>(e==null?void 0:e.rootSymbol)??""),cie=x(ry,e=>(e==null?void 0:e.rootSymbol)??""),Gm=e=>x(_u(e),t=>(t==null?void 0:t.rootSymbol)??""),HO=x(Ro,bn,(e,t)=>(e==null?void 0:e.type)===k.PRODUCT&&(e==null?void 0:e.activeSymbol)!==void 0?t.get(e.activeSymbol):void 0);x(Al,bn,(e,t)=>(e==null?void 0:e.type)===k.PRODUCT&&(e==null?void 0:e.activeSymbol)!==void 0?t.get(e.activeSymbol):void 0);const die=e=>x(_u(e),bn,(t,s)=>(t==null?void 0:t.type)===k.PRODUCT&&(t==null?void 0:t.activeSymbol)!==void 0?s.get(t.activeSymbol):void 0),UO=Ur(BO,e=>!!e.length),uie=Ur(HO,e=>e!==void 0&&e.type!==k.OPTION&&(e==null?void 0:e.tradeable)),na=x(Ro,e=>e!==void 0&&e.type===k.PRODUCT&&e.activeSymbol!==void 0&&e.activeSymbol!==""?k.FUTURE:e==null?void 0:e.type),Ym=x(Al,e=>e!==void 0&&e.type===k.PRODUCT&&e.activeSymbol!==void 0&&e.activeSymbol!==""?k.FUTURE:e==null?void 0:e.type),hie=x(ry,e=>e!==void 0&&e.type===k.PRODUCT&&e.activeSymbol!==void 0&&e.activeSymbol!==""?k.FUTURE:e==null?void 0:e.type),oy=e=>x(_u(e),t=>t!==void 0&&t.type===k.PRODUCT&&t.activeSymbol!==void 0&&t.activeSymbol!==""?k.FUTURE:t==null?void 0:t.type),VO=x(Ro,e=>(e==null?void 0:e.displaySymbol)??""),pie=x(Ro,HO,(e,t)=>{const s=((t==null?void 0:t.tradeable)&&!t.composite)??!1;return(e==null?void 0:e.type)===k.PRODUCT?s:(e==null?void 0:e.tradeable)&&!(e!=null&&e.composite)}),WO=e=>x(_u(e),die(e),(t,s)=>{const n=((s==null?void 0:s.tradeable)&&!s.composite)??!1;return(t==null?void 0:t.type)===k.PRODUCT?n:(t==null?void 0:t.tradeable)&&!(t!=null&&t.composite)}),mie=e=>Ur(bn,t=>e?t.get(e):void 0),GO=e=>e?e.type===k.PRODUCT&&e.activeSymbol!==void 0&&e.activeSymbol!==""?k.FUTURE:e.type:k.NONE,YO=x(Al,e=>GO(e)),gie=new Intl.DateTimeFormat("en-US",{timeZone:"America/Chicago",timeZoneName:"long"}),Sie=e=>gie.format(e).includes("Daylight");function qm(){return new Date}const ho=(e,t,s)=>(typeof e=="number"&&(e=new Date(e)),e===void 0?"No Value":t?N6(e,s):ll(e)),fie=60*60*1e3,cS=3600*1e3*24,ay=e=>{const t=qm(),n=(Sie(t)?5:6)*fie,r=t.getTime()-n,o=r-r%cS,i=e.getTime()-e.getTime()%cS;return Math.floor((i-o)/cS)};function iy(e,t){const s=t!==void 0,n=e.reduce((r,o)=>o!==void 0&&(!s||o.rootSymbol===t)&&o.daysToExpiration!==void 0&&o.type!==k.PRODUCT?Math.min(o.daysToExpiration,r):r,Number.MAX_SAFE_INTEGER);return n===Number.MAX_SAFE_INTEGER?void 0:n}const Km=(e,t)=>e&&t?Zs.All:e?Zs.Filled:Zs.Working,qO=e=>e.trades,KO=e=>e.filters.tradeFilter,zO=e=>e.filter(t=>t.checked),XO=({showWorking:e,showCompleted:t})=>s=>{switch(Km(t,e)){case Zs.All:return s;case Zs.Filled:return s.filter(r=>r.status===de.Completed||r.status===de.Draft);case Zs.Working:return s.filter(r=>r.status===de.Pending||r.status===de.Draft)}},Cr=x(qO,Os,KO,(e,t,s)=>{if(t){const n=e.get(t);return n?zO(XO(s)(n)):[]}return[]}),Tie=e=>x(qO,e,KO,(t,s,n)=>{if(s){const r=t.get(s);return r?zO(XO(n)(r)):[]}return[]}),ly="SPX",Zr=e=>e.positions.positions,yie=e=>e.positions.groupedPositions.reduce((t,s)=>(s.positionGroups.forEach(n=>{n.positions.forEach(r=>{t=t.set(r.id,r)})}),t),ke()),Nu=e=>e.positions.spreadGrouping&&Js(Cs.SPREAD_GROUPING)?yie(e):Zr(e),Il=x(Zr,e=>e.valueSeq().toArray()),QO=x(Nu,e=>e.valueSeq().toArray()),Cie=x(Zr,Cr,(e,t)=>t.filter(n=>n.status===de.Completed).map(n=>e.get(n.positionId))),bie=x(Il,mt,(e,t)=>e.filter(s=>s.rootSymbol===t||s.underlyingSymbol===t||s.symbol===t)),ZO=e=>x(Il,t=>t.filter(s=>s.rootSymbol===e||s.underlyingSymbol===e||s.symbol===e)),Eie=(e,t,s,n)=>(t===n||s===n)&&[k.STOCK,k.FUTURE,k.ETF].includes(e),Aie=(e,t,s,n)=>(t===n||s===n)&&[k.STOCK,k.FUTURE,k.ETF,k.FOREX].includes(e),JO=(e,t,s)=>t===s&&k.OPTION===e,eR=e=>x(Il,an(e),Pa,(t,s,n)=>t.filter(r=>(Eie(r.type,r.symbol,r.rootSymbol,s)||JO(r.type,r.symbol,s))&&(n?r.account===n:!0))),vie=e=>x(Il,an(e),Pa,(t,s,n)=>t.filter(r=>(Aie(r.type,r.symbol,r.rootSymbol,s)||JO(r.type,r.symbol,s))&&(n?r.account===n:!0))),Iie=x(FO,e=>e!==void 0&&e.size>0?iy(e):void 0),xie=x(Il,e=>{const t=e.map(({rootSymbol:s})=>s).sort();return t.length?t[0]:ly}),Bp=x(p9,xie,(e,t)=>e??t),zm=e=>e.positions.spreadGrouping,wie=e=>e.positions.groupedPositions,tR=e=>x(wie,t=>t.valueSeq().toArray().filter(s=>s.symbol===e)),Oie=e=>e.positions.groupedPositions.reduce((t,s)=>(s.positionGroups.forEach(n=>{t=t.set(n.id,n)}),t),ke()),Fp=e=>x(Oie,t=>t.get(e)),Rie=e=>{const t=tR(e);return x(t,s=>s.reduce((n,r)=>(r.positionGroups.forEach(o=>{n=n.set(o.id,o.positions.length)}),n),ke()))},Die=e=>{const t=tR(e);return x(t,s=>s.reduce((n,r)=>n+r.spreadGroupingLength,0))},sR=e=>e.positions.positionsSymbolInfo,Lie=(e,t,s,n,r,o,i,l)=>{let c;return e&&(c=`&leg1=${e}`,t&&(c+=`&leg2=${t}`,s&&(c+=`&leg3=${s}`,n&&(c+=`&leg4=${n}`)))),c!==void 0&&(r&&(c+=`&orderType=${r}`),o&&(c+=`&limitPrice=${o}`),i&&(c+=`&stopPrice=${i}`),l&&(c+=`&orderTif=${l}`)),c},F0=e=>{const{route:t,symbol:s=ly,leg1:n,leg2:r,leg3:o,leg4:i,orderType:l,limitPrice:c,stopPrice:d,orderTif:u}=T1(e),h=Lie(n,r,o,i,l,c,d,u);switch(t){case ut.TRADE:case ut.CHARTS:return h!==void 0?`${t}?symbol=${s}${h}`:`${t}?symbol=${s}`;case ut.TRANSACTIONS:case ut.SCANS:case ut.WATCHLIST:return t;default:return ut.ROOT}},H0=(e,t)=>{if(t==null)return"";const s=[];for(const[r,o]of Object.entries(t))s.push(`${r}=${o}`);e!==ut.ROOT&&Object.values(ut).includes(e)&&s.push(`route=${e}`);const n=s.join("&");return`&state=${encodeURIComponent(n)}`},nR=e=>({type:f.DraftTradeChecked,symbol:e}),U0=(e,t)=>({type:f.PositionsReceived,positions:e,aggregateValues:t}),_ie=e=>({type:f.OrderAccountPositionsReceived,positions:e}),V0=(e,t)=>({type:f.GroupedPositionsReceived,groupedPositions:e,aggregateValues:t}),rR=e=>({type:f.UpdatePositionsInstrumentsComparisonSymbols,positionsInstrumentsComparisonSymbols:e}),Nie=e=>({type:f.UpdateSpreadGrouping,isSpreadGroupingEnabled:e}),yh=e=>({type:f.ChangePositionsSubscriptionType,subscriptionType:e}),Pie=(e,t)=>({type:f.UpdatePositionsSymbolInfo,column:e,value:t}),kie=()=>({type:f.ResetPositionsSymbolInfo}),Mie=({connect:e,sessionStorage:t})=>()=>s=>n=>{n.type===f.Connect&&(e(n.tradingSystem),t.setItem("tradingSystem",n.tradingSystem)),s(n)},dS=(e,t,s,n,r)=>async o=>{var l;const i=o.userSegment===Bn.TOSPM;if(o.permissions!==void 0&&s.setItem("permissions",JSON.stringify(o.permissions)),o.quotePermissions!==void 0&&e.dispatch({type:f.QuotePermissionsReceived,quotePermissions:o.quotePermissions}),o.token!==void 0&&o.userId!==void 0){if(s.removeItem(ya.accountLT),s.removeItem(ya.accountPM),s.removeItem(ya.prevAccountLT),s.removeItem(ya.prevAccountPM),await Pw(o),e.dispatch(m1(t,(l=o.userId)==null?void 0:l.toString(),o.userCode,o.userSegment,o.userCdDomainId,o.userDomain,o.schwabAccountMigrationValue,o.permissions)),s.setItem("tradingSystem",t),i&&t===gt.LiveTrading){e.dispatch({type:f.SetTradingSystem,tradingSystem:gt.PaperMoney});return}o.userCdi&&Mw(o.userCdi),s.setItem("token",o.token),o.refreshToken&&s.setItem("refreshToken",o.refreshToken);const c=s.getItem(nc.SSO_EXPIRED);Nw(e,c),pw(new Date),mx(t),Ye({category:Ve.Authentication,action:Le.LogInSuccess,label:t}),n&&Ye({category:Ve.Authentication,action:Le.Referral,label:n}),r&&Ye({category:Ve.Authentication,action:Le.Referral,label:ks.Webcast})}else e.dispatch({type:f.LogInFailure,loginFailurePoint:ga.TokenOrUserIdUndefined})},$ie=({login:e,loginWithoutCafe:t,disconnect:s,setSessionEndHandler:n,getNewAccessToken:r,sessionStorage:o,loginLMS:i})=>{let l=0;return c=>d=>u=>{switch(u.type){case f.LogInWithoutCafe:{c.dispatch(lS()),t(u.username,u.password,dS(c,u.tradingSystem,o),h=>{s(),c.dispatch({type:f.LogInFailure,errorReason:h,loginFailurePoint:ga.LoginErrorCallback})});break}case f.LogIn:{c.dispatch(lS()),n(()=>{s(),c.dispatch({type:f.RedirectToCafe})}),e(u.authToken,dS(c,u.tradingSystem,o,u.referralCode,u.isWebcast),h=>{const p=o.getItem("refreshToken");p!==null&&l<1?(l++,r(p,m=>{o.setItem("authToken",m),o.setItem("lastAuthTokenRefreshTime",new Date().toString()),Et.unstable_batchedUpdates(()=>{c.dispatch({type:f.Connect,tradingSystem:u.tradingSystem}),c.dispatch({type:f.LogIn,authToken:m,tradingSystem:u.tradingSystem})})},()=>{c.dispatch({type:f.LogInFailure,loginFailurePoint:ga.GetNewAccessTokenErrorCallback})})):(s(),c.dispatch({type:f.LogInFailure,errorReason:h,loginFailurePoint:ga.RefreshTokenOrRetryError}))});break}case f.LogInLMS:{c.dispatch(lS()),n(()=>{s(),c.dispatch({type:f.RedirectToLms})}),i(u.code,u.clientId,u.redirectUri,dS(c,u.tradingSystem,o,u.referralCode,u.isWebcast),h=>{o.getItem("refreshToken")!==null&&l<1?(l++,c.dispatch(Dw(m=>{c.dispatch({type:f.ExchangeCodeForToken,code:m.code,params:{}})},()=>{c.dispatch({type:f.LogInFailure,loginFailurePoint:ga.GetNewAuthCodeErrorCallback})}))):(s(),c.dispatch({type:f.LogInFailure,errorReason:h,loginFailurePoint:ga.RefreshTokenOrRetryError}))});break}}return d(u)}},jie=({disconnect:e,revokeToken:t,sessionStorage:s,schwabLogoff:n})=>()=>r=>o=>{var i;if(o.type===f.LogOut){const l=s.getItem("refreshToken"),c=s.getItem("isGP"),d=c==="true"?rr.lmsGuestPassApiKey:rr.lmsApiKey;l!==null&&n(d,l),s.clear(),(i=f1())==null||i.close(),e();{const u=c==="true"?ut.GUEST_PASS_REDIRECT:ut.ROOT;window.location.href=window.location.origin+u;return}}return r(o)},Bie=({reconnect:e,connect:t,disconnect:s,setSessionEndHandler:n,sessionStorage:r})=>o=>i=>{const l=r.getItem("token"),c=ou(r.getItem("tradingSystem"));return l!==null&&l!==""?(setTimeout(()=>{n(()=>{s(),o.dispatch({type:f.RedirectToLms})}),o.dispatch({type:f.Reconnect})}),t(c),e(l,async d=>{var u;d.token!==void 0?(d.userCdi&&Mw(d.userCdi),r.setItem("token",d.token),d.quotePermissions!==void 0&&o.dispatch({type:f.QuotePermissionsReceived,quotePermissions:d.quotePermissions}),await Pw(d),o.dispatch(m1(c,(u=d.userId)==null?void 0:u.toString(),d.userCode,d.userSegment,d.userCdDomainId,d.userDomain,d.schwabAccountMigrationValue,d.permissions)),mx(c),Ye({category:Ve.Authentication,action:Le.Reconnect,label:c})):o.dispatch({type:f.LogInFailure,loginFailurePoint:ga.ReconnectTokenUndefined})},d=>{s(),o.dispatch({type:f.LogInFailure,errorReason:d,loginFailurePoint:ga.ReconnectErrorCallback})})):r.clear(),i},ou=e=>{switch(e){case gt.PaperMoney:return gt.PaperMoney;case gt.LiveTrading:default:return gt.LiveTrading}},Fie=({exchangeCodeForToken:e,redirectToCafe:t,redirectToLms:s,sessionStorage:n,disconnect:r})=>o=>i=>l=>{var c,d,u;switch(l.type){case f.ExchangeCodeForToken:{const h=l.params!==void 0&&l.params.isWebcast==="true",p=(c=l.params)==null?void 0:c.r,g=p&&g0(p)?p:void 0,S=ou(n.getItem("tradingSystem"));e(l.code,T=>{n.setItem("lastAuthTokenRefreshTime",new Date().toString()),n.setItem("authToken",T.authToken),n.setItem("refreshToken",T.refreshToken),Et.unstable_batchedUpdates(()=>{o.dispatch({type:f.Connect,tradingSystem:S}),o.dispatch({type:f.LogIn,authToken:T.authToken,tradingSystem:S,referralCode:g,isWebcast:h})});const y=localStorage.getItem("useSchwab");(y===null||y==="true")&&(localStorage.setItem("useSchwab","false"),Ye({category:Ve.Authentication,action:Le.UseSchwab,label:"false"}));const b=F0(window.location.search);us.push(b)});break}case f.ExchangeLmsCodeForToken:{const h=l.params!==void 0&&l.params.isWebcast==="true",p=(d=l.params)==null?void 0:d.r,g=p&&g0(p)?p:void 0,S=l.params!==void 0&&l.params.isGP==="true",T=S?rr.lmsGuestPassApiKey:rr.lmsApiKey;S?n.setItem("isGP","true"):n.removeItem("isGP");const y=S?gt.PaperMoney:ou(n.getItem("tradingSystem"));Et.unstable_batchedUpdates(()=>{o.dispatch({type:f.Connect,tradingSystem:y}),o.dispatch($b(l.code,T,window.location.origin+ut.OAUTH,y,g,h))});const b=localStorage.getItem("useSchwab");(b===null||b==="false")&&(localStorage.setItem("useSchwab","true"),Ye({category:Ve.Authentication,action:Le.UseSchwab,label:"true"}));const E=F0(window.location.search);us.push(E);break}case f.LogInFailure:{const h=n.getItem("isGP"),p=l.errorReason?` ${l.errorReason}`:"";if(il(`${l.loginFailurePoint}${p}`,li.LoginError),h==="true"){window.location.href=window.location.origin+ut.GUEST_PASS_REDIRECT;return}o.dispatch({type:f.RedirectToLms});break}case f.RedirectToCafe:{const h={...l.params,isSchwab:"false"};n.clear(),t(h,l.clientVersion);break}case f.RedirectToLms:{const h={...l.params,isSchwab:"true"};n.clear(),s(h,l.clientVersion);break}case f.RedirectToLmsGuestPass:{const h={...l.params,isSchwab:"true",isGP:"true"};n.clear(),s(h,l.clientVersion);break}case f.SetTradingSystem:{const h=((u=o.getState().userSettings)==null?void 0:u.userSegment)??Bn.ADVNCED,p=n.getItem("tradingSystem"),m=p||gt.LiveTrading;if(m===gt.PaperMoney&&o.dispatch(rR([])),h===Bn.TOSPM&&m===gt.PaperMoney)break;n.getItem("refreshToken")&&o.dispatch(Dw(S=>{r(),n.removeItem("token"),Et.unstable_batchedUpdates(()=>{o.dispatch({type:f.Connect,tradingSystem:l.tradingSystem}),o.dispatch($b(S.code,rr.lmsApiKey,window.location.origin+ut.OAUTH,l.tradingSystem))})},yr));break}}return i(l)};class Hie extends j.Component{constructor(s){super(s);R(this,"render",()=>null);const n=yp.get("accessToken");yp.erase("accessToken"),n!==null?s.login(n):us.push(ut.ROOT)}}const Uie=e=>({login:t=>{const s=ou(sessionStorage.getItem("tradingSystem"));sessionStorage.setItem("authToken",t),e({type:f.Connect,tradingSystem:s}),e({type:f.LogIn,authToken:t,tradingSystem:s})}}),Vie=se(null,Uie)(Hie);var te=(e=>(e.LOGIN="login",e.LOGIN_SCHWAB="login/schwab",e.LOGOFF_SCHWAB="logoff/schwab",e.ACCOUNTS="accounts",e.STATEMENT="statement",e.PLACE_ORDER="place_order",e.CANCEL_ORDER="cancel_order",e.ORDER_EVENTS="order_events",e.USER_PROPERTIES="user_properties",e.USER_PROPERTIES_SET="user_properties/set",e.QUOTES="quotes",e.INSTRUMENTS="instruments",e.FUTURE_SERIES="future_series",e.INSTRUMENT_SEARCH="instrument_search",e.POSITIONS="positions",e.GROUPED_POSITIONS="grouped_positions",e.OPTION_SERIES="optionSeries",e.OPTION_STRIKES="optionStrikes",e.OPTION_SYMBOLS="optionSymbols",e.OPTION_CHAIN_GET="option_chain/get",e.QUOTES_OPTIONS="quotes/options",e.QUOTES_SNAPSHOT="quotes/get",e.OPTION_SERIES_QUOTES="optionSeries/quotes",e.OPTIONS_STATISTICS="options_statistics",e.UNSUBSCRIBE="unsubscribe",e.CHART="chart",e.WATCHLIST_CATEGORIES="watchlist/categories",e.WATCHLIST_SYMBOLS="watchlist/get",e.WATCHLIST_ADD_SYMBOLS="watchlist/add",e.WATCHLIST_CREATE="watchlist/create",e.WATCHLIST_REARRANGE="watchlist/rearrange",e.WATCHLIST_REMOVE_SYMBOL="watchlist/remove",e.WATCHLIST_DELETE="watchlist/delete",e.STUDIES_GET="studies/get",e.STUDY_CATEGORIES="study/categories",e.STUDY_SUBSCRIBE="study/subscribe",e.ALERTS_SUBSCRIBE="alerts/subscribe",e.ALERTS_LOOKUP="alerts/lookup",e.ALERTS_CANCEL="alerts/cancel",e.MARKET_DEPTH="market_depth",e.MARKET_HOURS="market_hours",e.NEWS_HEADERS_GET="news_headers/get",e.NEWS_HEADERS_GET_RELEVANT="news_headers/get_relevant",e.NEWS_HEADERS_SUBSCRIBE="news_headers/subscribe",e.NEWS_HEADERS_SUBSCRIBE_RELEVANT="news_headers/subscribe_relevant",e.NEWS_BODY="news_body",e.DRAWING_SETS="drawing_sets",e.DRAWINGS="drawings",e.DRAWING_DELETE="drawing/delete",e.DRAWING_UPDATE="drawing/update",e.DRAWING_CREATE="drawing/create",e.DRAWING_SET_DELETE="drawing_set/delete",e.DRAWING_SET_CREATE="drawing_set/create",e.CREATE_ALERT="alerts/create",e.TRANSACTIONS="transactions",e.DISCLOSURES="disclosures",e.ACCEPT_DISCLOSURES="disclosures/accept",e.TIME_SALES="time_sales",e.CALENDAR_EVENTS="calendar_events",e.HISTORICAL_CALENDAR_EVENTS="historical_calendar_events",e.ADJUST_CASH="demo_account/adjust_cash",e.SET_BALANCE="demo_account/set_balance",e.EXCHANGE_RT_FOR_EAT="access_token/get",e.EXCHANGE_RT_FOR_AUTH_CODE="auth_code/get",e.STOCK_HACKER="stock_hacker",e.CREATE_SUPPORT_CHAT="chat/create",e.CLOSE_SUPPORT_CHAT="chat/close",e.SUPPORT_CHATS="support_chats",e.SEND_SUPPORT_MESSAGE="chat/send_message",e.GET_SUPPORT_CHAT_GLOBAL_MESSAGE="chat_global/messages",e.SCAN_FILTER_PARAMETERS="scan_filter/parameters",e.SCAN_QUERY_GET="scan_query/get",e.SCAN_QUERY_SAVE="scan_query/save",e.BALANCES_HISTORY="balances_history",e.ANALYST_REPORTS="analyst_reports",e.ANALYST_REPORTS_ACCESS_TOKEN="analyst_reports/token",e.MESSAGE_CENTER_GET="message_center/get",e.MESSAGE_CENTER_SUBSCRIBE="message_center/subscribe",e.FUNDAMENTALS_CURRENT="fundamentals/current",e))(te||{});const Wie=(e,t,s)=>{e([{header:{service:te.LOGOFF_SCHWAB,id:"logoff/schwab",ver:0},params:{clientId:t,refreshToken:s}}])},Gie=e=>(t,s)=>Wie(e,t,s),oR=e=>({close:()=>e.then(t=>t.close()),request:(t,s)=>e.then(n=>n.request(t,s)),heartbeat:t=>e.then(s=>s.heartbeat(t)),sessionEnd:t=>e.then(s=>s.sessionEnd(t))}),qe=e=>new Tc("sgwArray",t=>d5.is(t)&&t.every(e.is),(t,s)=>t?Nt(e).validate(t,s).chain(n=>ai(n)):ai([]),e.encode===_b?_b:t=>t.map(e.encode));function W0(e,t){return Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t)}const Yie=new Tc("sgwLastTradingDate",e=>e instanceof Date,(e,t)=>_.validate(e,t).chain(s=>{const n=new Date(s),o=W0(n,12),i=u5.tz.zone("America/Chicago");if(i===null)return d1(s,t);const l=i.parse(o)/60,c=15;return ai(new Date(W0(n,c+l)))}),e=>`${e.toISOString()}`),np={JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11},qie=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],uS=e=>np.hasOwnProperty(e),Kie=new Tc("sgwDate",e=>e instanceof Date,(e,t)=>_.validate(e,t).chain(s=>{const n=s.split(/\s+/);let r;switch(n.length){case 2:{const[o,i]=n;uS(o)&&(r=new Date(Date.UTC(2e3+ +i,np[o],1,20)));break}case 3:{{const[o,i,l]=n;uS(i)&&(r=new Date(Date.UTC(2e3+ +l,np[i],+o,20)))}{const[o,i,l]=n;uS(o)&&(r=new Date(Date.UTC(2e3+ +l,np[o],+i.replace(/'/g,""),20)))}break}}return r!==void 0&&!isNaN(r.getTime())?ai(r):d1(s,t)}),e=>`${e.getUTCDate()} ${qie[e.getUTCMonth()]} ${e.getUTCFullYear()-2e3}`),ss=new Tc("sgwIsoDate",e=>e instanceof Date,(e,t)=>_.validate(e,t).chain(s=>ai(new Date(s))),e=>e.toISOString()),st=new Tc("sgwString",_.is,(e,t)=>e?_.validate(e,t):ai(""),e=>e),aR=Fe([I("STOCK"),I("FUTURE"),I("FOREX"),I("INDEX"),I("FUND"),I("BOND"),I("CASH"),I("MANUAL"),I("WARRANT"),I("RIGHT"),I("CRYPTO"),I("ETF"),I("PRODUCT"),I("UNDEFINED")]),iR=Fe([I("AMEX"),I("CFE"),I("CME"),I("FOREX"),I("FUTURES"),I("ICE"),I("ICE_EU"),I("LIFFE"),I("NASDAQ"),I("NYSE"),I("OPTIONS"),I("OTHER"),I("STOCK"),I("UNDEFINED")]),lR=Fe([I("X10"),I("X32"),I("X64"),I("X128"),I("X256")]),cR=I("OPTION"),zie=Fe([aR,cR]),dR=Ze([ee({instrumentType:cR,fractionalType:lR,symbol:st,description:st,underlyingSymbol:st,underlyingDisplaySymbol:st,rootSymbol:st,displaySymbol:st,seriesName:Fe([_,Or]),strike:$,multiplier:$,optionType:Qr({CALL:null,PUT:null}),tradeable:Xe,expiration:Kie,daysToExpiration:$,settlementType:Fe([I("AM"),I("PM")])}),Ie({cusip:st,priceTick:$,priceTickValue:$,sourceType:iR,spc:$,futureOption:Xe})]),uR=Ze([ee({instrumentType:aR,fractionalType:lR,symbol:st,rootSymbol:st,displaySymbol:st,description:st,tradeable:Xe,multiplier:$,hasOptions:Xe}),Ie({activeSymbol:_,hasTradableOptions:Xe,daysToExpiration:$,lastTradeDate:ss,cusip:st,expiration:_,priceTick:$,priceTickValue:$,sourceType:iR,spc:$,futureOption:Xe})]);Fe([uR,dR]);const Xie=Fe([uR,Ze([dR,ee({lastTradeDate:Yie})])]),Qie=Ze([ee({service:I("instruments"),requestId:_,instruments:qe(Xie)}),Ie({normalizedSymbols:on(_,_),compositeSymbols:qe(ee({symbol:_})),error:_})]),Zie=ee({symbol:_,deltaBetaWeighting:$}),Jie=Ze([ee({instrumentType:zie,symbol:st,description:st,rootSymbol:st}),Ie({underlyingSymbol:st,cusip:st,priceTick:$,priceTickValue:$})]),ele=ee({instrument:Jie,aggregated:Xe,betaWeightings:Fe([Nt(Zie),Or]),values:Ie({MARK:$,QUANTITY:$,OPEN_PRICE:$,NET_LIQ:$,PL_OPEN:$,PL_YTD:$,PL_DAY:$,ITM:$,DELTA:$,GAMMA:$,THETA:$,VEGA:$,BP_EFFECT:$,OPEN_COST:$,MARK_CHANGE:$,MARGIN:$}),account:st}),G0=ee({symbol:_,values:Ie({MARK:$,MARK_TREND:Fe([I("Neutral"),I("Negative"),I("Positive"),I("StronglyPositive"),I("StronglyNegative")]),MARK_CHANGE:$,MARK_PERCENT_CHANGE:$,BID:$,ASK:$,HIGH52:$,LOW52:$,HIGH:$,LOW:$,OPEN:$,BID_SIZE:$,ASK_SIZE:$,LAST_SIZE:$,VOLUME:$,VWAP:$,VOLATILITY_INDEX:$,HISTORICAL_VOLATILITY_30_DAYS:$,MARKET_CAP:$,DELTA:$,GAMMA:$,THETA:$,VEGA:$,RHO:$,IMPLIED_VOLATILITY:$,LAST:$,NET_CHANGE:$,NET_CHANGE_PERCENT:$,MARKET_MAKER_MOVE:$,PUT_CALL_RATIO:$,PERCENTILE_IV:$,BETA:$,PE:$,INITIAL_MARGIN:$,BID_EXCHANGE:_,ASK_EXCHANGE:_,LAST_EXCHANGE:_,BORROW_STATUS:_,DIV_AMOUNT:$,EPS:$,EXD_DIV_DATE:$,YIELD:$,FRONT_VOLATILITY:$,BACK_VOLATILITY:$,VOLATILITY_DIFFERENCE:$,CLOSE:$,PROBABILITY_ITM:$,INTRINSIC:$,EXTRINSIC:$,SHARES:$,RETURN_ON_CAPITAL:$,RETURN_ON_RISK:$,SHORT_SALE_BORROWING_RATE:_,OPEN_INT:$})}),tle=ee({session:_}),Y0=qe(Ze([ee({name:_,isAllowed:Xe}),Ie({children:qe(Ze([ee({name:_,isAllowed:Xe}),Ie({children:qe(ee({name:_,isAllowed:Xe}))})]))})])),sle=ee({newsCode:_,time:_,title:_,symbols:qe(_)}),nle=ee({newsCode:_,time:_,title:_,relevance:$}),q0=qe(sle),rle=qe(nle),ole=ee({service:I(te.NEWS_HEADERS_GET_RELEVANT),requestId:_,requestVer:$}),K0=ee({news:rle}),ale=Ie({tradeTime:_,execTime:_,type:_,description:_,amount:$,balance:$,miscFees:$,commissionsAndFees:$,symbol:_}),ile=Ze([ee({id:$,title:_,version:$,lastPublishDate:_,userNotificationType:_,text:_}),Ie({acceptanceTime:_})]),z0=Ze([ee({id:$,time:$,closeTime:$,status:Fe([I("ACTIVE"),I("CANCELED"),I("EXPIRED"),I("NEW"),I("TRIGGERED"),I("WAIT_TRG")])}),Ie({market:ee({field:_,operator:_,threshold:$,components:qe(ee({symbol:_}))})})]),lle=ee({requestId:_,service:I("demo_account/adjust_cash"),requestVer:$,type:st,error:st}),cle=ee({requestId:_,service:I("demo_account/set_balance"),requestVer:$,type:st,error:st}),dle=ee({symbol:_,values:Ie({MARK:$,QUANTITY:$,OPEN_PRICE:$,NET_LIQ:$,PL_OPEN:$,PL_YTD:$,PL_DAY:$,ITM:$,DELTA:$,GAMMA:$,THETA:$,VEGA:$,BP_EFFECT:$,OPEN_COST:$,MARK_CHANGE:$,MARGIN:$})}),ule=ee({title:_,account:_,balances:qe(dle),orderId:$,values:Ie({MARK:$,QUANTITY:$,OPEN_PRICE:$,NET_LIQ:$,PL_OPEN:$,PL_YTD:$,PL_DAY:$,ITM:$,DELTA:$,GAMMA:$,THETA:$,VEGA:$,BP_EFFECT:$,OPEN_COST:$,MARK_CHANGE:$,MARGIN:$})}),hle=ee({symbol:_,balanceGroups:qe(ule),values:on(_,$)}),ple=Ze([ee({positions:qe(hle)}),Ie({title:_})]);var vo=(e=>(e.CONFERENCE_CALL="confCall",e.DIVIDEND="dividend",e.EARNING="earning",e.SPLIT="split",e))(vo||{}),yd=(e=>(e.CONFERENCE_CALL="CONFERENCE_CALL",e.DIVIDEND="DIVIDEND",e.EARNINGS="EARNINGS",e.SPLIT="SPLIT",e))(yd||{}),ao=(e=>(e.CONFERENCE_CALLS="confCalls",e.DIVIDENDS="dividends",e.EARNINGS="earnings",e.SPLITS="splits",e))(ao||{}),Vf=(e=>(e.ACTUAL="ACTUAL",e.CANCELLED="CANCELLED",e))(Vf||{}),$i=(e=>(e.ANNUAL="ANNUAL",e.MONTHLY="MONTHLY",e.QUARTERLY="QUARTERLY",e.SEMI_ANNUAL="SEMI_ANNUAL",e.SPECIAL="SPECIAL",e.UNKNOWN="UNKNOWN",e))($i||{}),Ho=(e=>(e.NULL="NULL",e.Q1="Q1",e.Q1T="Q1T",e.Q2="Q2",e.Q2T="Q2T",e.Q3="Q3",e.Q3T="Q3T",e.Q4="Q4",e.Q4T="Q4T",e))(Ho||{}),lo=(e=>(e.AFTER_MARKET="AFTER_MARKET",e.BEFORE_MARKET="BEFORE_MARKET",e.DURING_MARKET="DURING_MARKET",e.NULL="NULL",e.UNSPECIFIED="UNSPECIFIED",e))(lo||{}),rp=(e=>(e.NULL="NULL",e.UNCONFIRMED="UNCONFIRMED",e.VERIFIED="VERIFIED",e))(rp||{});const hS="WatchlistCalendarEvent",qa=Fe([I(Vf.ACTUAL),I(Vf.CANCELLED)]),Hp=Fe([I(Ho.NULL),I(Ho.Q1),I(Ho.Q1T),I(Ho.Q2),I(Ho.Q2T),I(Ho.Q3),I(Ho.Q3T),I(Ho.Q4),I(Ho.Q4T)]),hR=Fe([I($i.ANNUAL),I($i.MONTHLY),I($i.QUARTERLY),I($i.SEMI_ANNUAL),I($i.SPECIAL),I($i.UNKNOWN)]),pR=Fe([I(lo.AFTER_MARKET),I(lo.BEFORE_MARKET),I(lo.DURING_MARKET),I(lo.NULL),I(lo.UNSPECIFIED)]),mR=Fe([I(rp.NULL),I(rp.UNCONFIRMED),I(rp.VERIFIED)]),mle=Ze([ee({symbol:_}),Ie({confCall:Ie({symbol:_,time:ss,number:_,passCode:_,confCallWebsite:_,companyName:_,website:_,status:qa}),dividend:Ie({symbol:_,amount:$,announcedDate:ss,recordDate:ss,payableDate:ss,exDividendDate:ss,companyName:_,website:_,status:qa,frequency:hR,time:ss}),earning:Ie({symbol:_,estimatedQuarter:Hp,estimatedEps:$,estimatedDate:ss,estimatedTime:pR,estimatedEtype:mR,estimatedUrl:_,actualDate:ss,actualEps:$,actualEpsOc:$,actualCurrency:_,actualQuarter:Hp,actualUrl:_,companyName:_,status:qa,fiscalYear:$,time:ss,website:_}),split:Ie({symbol:_,numerator:$,denominator:$,announcedDate:ss,recordDate:ss,splitDate:ss,splitExDate:ss,companyName:_,website:_,status:qa,time:ss})})]),gle=Ie({confCalls:Nt(Ie({symbol:_,time:ss,number:_,passCode:_,confCallWebsite:_,companyName:_,website:_,status:qa})),dividends:Nt(Ie({symbol:_,amount:$,announcedDate:ss,recordDate:ss,payableDate:ss,exDividendDate:ss,companyName:_,website:_,status:qa,frequency:hR,time:ss})),earnings:Nt(Ie({symbol:_,estimatedQuarter:Hp,estimatedEps:$,estimatedDate:ss,estimatedTime:pR,estimatedEtype:mR,estimatedUrl:_,actualDate:ss,actualEps:$,actualEpsOc:$,actualCurrency:_,actualQuarter:Hp,actualUrl:_,companyName:_,status:qa,fiscalYear:$,time:ss,website:_})),splits:Nt(Ie({symbol:_,numerator:$,denominator:$,announcedDate:ss,recordDate:ss,splitDate:ss,splitExDate:ss,companyName:_,website:_,status:qa,time:ss}))});var Kt=(e=>(e.ASK="ASK",e.ASK_SIZE="ASK_SIZE",e.BACK_VOL="BACK_VOL",e.BETA="BETA",e.BID="BID",e.BID_SIZE="BID_SIZE",e.CALL_VOLUME_INDEX="CALL_VOLUME_INDEX",e.CLOSE="CLOSE",e.EPS="EPS",e.FRONT_VOL="FRONT_VOL",e.HIGH="HIGH",e.LAST="LAST",e.LAST_SIZE="LAST_SIZE",e.LOW="LOW",e.MARK="MARK",e.MARKET_CAP="MARKET_CAP",e.MARKET_MAKER_MOVE="MARKET_MAKER_MOVE",e.NET_CHANGE="NET_CHANGE",e.OPEN="OPEN",e.OPTION_VOLUME_INDEX="OPTION_VOLUME_INDEX",e.PE="PE",e.PERCENT_CHANGE="PERCENT_CHANGE",e.PUT_CALL_RATIO="PUT_CALL_RATIO",e.PUT_VOLUME_INDEX="PUT_VOLUME_INDEX",e.SHARES="SHARES",e.VOLUME="VOLUME",e.VOL_DIFF="VOL_DIFF",e.VOL_INDEX="VOL_INDEX",e.WEIGHTED_BACK_VOL="WEIGHTED_BACK_VOL",e.YIELD="YIELD",e))(Kt||{}),gR=(e=>(e.BOOK_VALUE_PER_SHARE="BOOK_VALUE_PER_SHARE",e.BOOK_VALUE_PER_SHARE_2="BOOK_VALUE_PER_SHARE_2",e.CASH_FLOW_PER_SHARE_CURRENT="CASH_FLOW_PER_SHARE_CURRENT",e.CURRENT_RATIO="CURRENT_RATIO",e.DIVIDEND_PAYOUT="DIVIDEND_PAYOUT",e.DIVIDEND_PAYOUT_PER_SHARE="DIVIDEND_PAYOUT_PER_SHARE",e.DIVIDEND_YIELD="DIVIDEND_YIELD",e.EARNINGS_PER_SHARE="EARNINGS_PER_SHARE",e.EARNINGS_PER_SHARE_TTM="EARNINGS_PER_SHARE_TTM",e.FINANCIAL_LEVERAGE="FINANCIAL_LEVERAGE",e.FIXED_CHARGE_COVERAGE_RATIO="FIXED_CHARGE_COVERAGE_RATIO",e.FREE_CASH_FLOW_PER_SHARE="FREE_CASH_FLOW_PER_SHARE",e.GROSS_PROFIT_MARGIN="GROSS_PROFIT_MARGIN",e.INTEREST_RATE="INTEREST_RATE",e.INVENTORY_TURNOVER="INVENTORY_TURNOVER",e.LONG_TERM_DEBT_TO_CAPITAL="LONG_TERM_DEBT_TO_CAPITAL",e.MARKET_CAP_TO_COMMON_EQUITY_RATIO="MARKET_CAP_TO_COMMON_EQUITY_RATIO",e.NET_INCOME="NET_INCOME",e.NET_PROFIT_MARGIN="NET_PROFIT_MARGIN",e.OPERATING_PROFIT_MARGIN="OPERATING_PROFIT_MARGIN",e.PRICE_TO_BOOK_VALUE_RATIO="PRICE_TO_BOOK_VALUE_RATIO",e.PRICE_TO_CASH_FLOW_RATIO="PRICE_TO_CASH_FLOW_RATIO",e.PRICE_TO_EARNINGS_RATIO="PRICE_TO_EARNINGS_RATIO",e.QUICK_RATIO="QUICK_RATIO",e.RETURN_ON_ASSETS="RETURN_ON_ASSETS",e.RETURN_ON_EQUITY="RETURN_ON_EQUITY",e.REVENUE="REVENUE",e.SALES_PER_SHARE="SALES_PER_SHARE",e.TAX_RATE="TAX_RATE",e.TOTAL_ASSET_TURNOVER="TOTAL_ASSET_TURNOVER",e))(gR||{}),SR=(e=>(e.ASK="ASK",e.ASK_SIZE="ASK_SIZE",e.BACK_VOL="BACK_VOL",e.BETA="BETA",e.BID="BID",e.BID_SIZE="BID_SIZE",e.CALL_VOLUME_INDEX="CALL_VOLUME_INDEX",e.CLOSE="CLOSE",e.COVERED_RETURN="COVERED_RETURN",e.DAYS_TO_EXP="DAYS_TO_EXP",e.DELTA="DELTA",e.DIV="DIV",e.DIV_FREQ="DIV_FREQ",e.EPS="EPS",e.EXTRINSIC="EXTRINSIC",e.FRONT_VOL="FRONT_VOL",e.GAMMA="GAMMA",e.HIGH="HIGH",e.H_52HIGH="H_52HIGH",e.H_52LOW="H_52LOW",e.IMPL_VOL="IMPL_VOL",e.INTRINSIC="INTRINSIC",e.LAST="LAST",e.LAST_SIZE="LAST_SIZE",e.LOW="LOW",e.MARK="MARK",e.MARKET_CAP="MARKET_CAP",e.MARKET_MAKER_MOVE="MARKET_MAKER_MOVE",e.MARK_PER_UNDER="MARK_PER_UNDER",e.MAX_COVERED_RETURN="MAX_COVERED_RETURN",e.MAX_PROFIT="MAX_PROFIT",e.NET_CHANGE="NET_CHANGE",e.OPEN="OPEN",e.OPEN_INT="OPEN_INT",e.OPTION_TYPE="OPTION_TYPE",e.OPTION_VOLUME_INDEX="OPTION_VOLUME_INDEX",e.O_ASK="O_ASK",e.O_BID="O_BID",e.O_LAST="O_LAST",e.O_MARK="O_MARK",e.O_NET_CHANGE="O_NET_CHANGE",e.O_OPEN_INT="O_OPEN_INT",e.O_PERCENT_CHANGE="O_PERCENT_CHANGE",e.O_VOLUME="O_VOLUME",e.PE="PE",e.PERCENT_CHANGE="PERCENT_CHANGE",e.PERCENT_ITM="PERCENT_ITM",e.PERCENT_OTM="PERCENT_OTM",e.PL_MARGIN="PL_MARGIN",e.PROB_OF_EXPIRING="PROB_OF_EXPIRING",e.PROB_OF_TOUCHING="PROB_OF_TOUCHING",e.PROB_OTM="PROB_OTM",e.PROFIT_PROB="PROFIT_PROB",e.PUT_CALL_RATIO="PUT_CALL_RATIO",e.PUT_VOLUME_INDEX="PUT_VOLUME_INDEX",e.RETURN_ON_CAPITAL="RETURN_ON_CAPITAL",e.RETURN_ON_RISK="RETURN_ON_RISK",e.RHO="RHO",e.SHARES="SHARES",e.SO_SIZZLE="SO_SIZZLE",e.SPREAD="SPREAD",e.STRIKE="STRIKE",e.SYMBOL="SYMBOL",e.THETA="THETA",e.TIME="TIME",e.UNDERLYING_PRICE="UNDERLYING_PRICE",e.VEGA="VEGA",e.VOLATILITY="VOLATILITY",e.VOLUME="VOLUME",e.VOL_DIFF="VOL_DIFF",e.VOL_INDEX="VOL_INDEX",e.WEIGHTED_BACK_VOL="WEIGHTED_BACK_VOL",e.YIELD="YIELD",e.BOOK_VALUE_PER_SHARE="BOOK_VALUE_PER_SHARE",e.BOOK_VALUE_PER_SHARE_2="BOOK_VALUE_PER_SHARE_2",e.CASH_FLOW_PER_SHARE_CURRENT="CASH_FLOW_PER_SHARE_CURRENT",e.CURRENT_RATIO="CURRENT_RATIO",e.DIVIDEND_PAYOUT="DIVIDEND_PAYOUT",e.DIVIDEND_PAYOUT_PER_SHARE="DIVIDEND_PAYOUT_PER_SHARE",e.DIVIDEND_YIELD="DIVIDEND_YIELD",e.EARNINGS_PER_SHARE="EARNINGS_PER_SHARE",e.EARNINGS_PER_SHARE_TTM="EARNINGS_PER_SHARE_TTM",e.FINANCIAL_LEVERAGE="FINANCIAL_LEVERAGE",e.FIXED_CHARGE_COVERAGE_RATIO="FIXED_CHARGE_COVERAGE_RATIO",e.FREE_CASH_FLOW_PER_SHARE="FREE_CASH_FLOW_PER_SHARE",e.GROSS_PROFIT_MARGIN="GROSS_PROFIT_MARGIN",e.INTEREST_RATE="INTEREST_RATE",e.INVENTORY_TURNOVER="INVENTORY_TURNOVER",e.LONG_TERM_DEBT_TO_CAPITAL="LONG_TERM_DEBT_TO_CAPITAL",e.MARKET_CAP_TO_COMMON_EQUITY_RATIO="MARKET_CAP_TO_COMMON_EQUITY_RATIO",e.NET_INCOME="NET_INCOME",e.NET_PROFIT_MARGIN="NET_PROFIT_MARGIN",e.OPERATING_PROFIT_MARGIN="OPERATING_PROFIT_MARGIN",e.PRICE_TO_BOOK_VALUE_RATIO="PRICE_TO_BOOK_VALUE_RATIO",e.PRICE_TO_CASH_FLOW_RATIO="PRICE_TO_CASH_FLOW_RATIO",e.PRICE_TO_EARNINGS_RATIO="PRICE_TO_EARNINGS_RATIO",e.QUICK_RATIO="QUICK_RATIO",e.RETURN_ON_ASSETS="RETURN_ON_ASSETS",e.RETURN_ON_EQUITY="RETURN_ON_EQUITY",e.REVENUE="REVENUE",e.SALES_PER_SHARE="SALES_PER_SHARE",e.TAX_RATE="TAX_RATE",e.TOTAL_ASSET_TURNOVER="TOTAL_ASSET_TURNOVER",e))(SR||{}),fR=(e=>(e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING",e))(fR||{}),cy=(e=>(e.STOCKS="STOCKS",e.OPTIONS="OPTIONS",e.STOCKS_AND_OPTIONS="STOCKS_AND_OPTIONS",e))(cy||{}),ni=(e=>(e.STOCK="STOCK",e.OPTION="OPTION",e.STUDY="STUDY",e.CUSTOM="CUSTOM",e.FUNDAMENTAL="FUNDAMENTAL",e))(ni||{}),Yr=(e=>(e.ACTIVE="active",e.SAVED="saved",e))(Yr||{});const Sle=Ze([ee({field:Fe([Qr(Kt),Qr(gR)]),type:Fe([I("STOCK"),I("FUNDAMENTAL")])}),Ie({low:Fe([$,Or]),high:Fe([$,Or]),name:Fe([_,Or])})]),TR={ASK:{name:"Ask",field:"ASK"},ASK_SIZE:{name:"Ask Size",field:"ASK_SIZE"},BACK_VOL:{name:"Back Volatility",field:"BACK_VOL"},BETA:{name:"Beta",field:"BETA"},BID:{name:"Bid",field:"BID"},BID_SIZE:{name:"Bid Size",field:"BID_SIZE"},CALL_VOLUME_INDEX:{name:"Call Volume Index",field:"CALL_VOLUME_INDEX"},CLOSE:{name:"Close",field:"CLOSE"},EPS:{name:"EPS",field:"EPS"},FRONT_VOL:{name:"Front Volatility",field:"FRONT_VOL"},HIGH:{name:"High",field:"HIGH"},LAST:{name:"Last",field:"LAST"},LAST_SIZE:{name:"Last Size",field:"LAST_SIZE"},LOW:{name:"Low",field:"LOW"},MARK:{name:"Mark",field:"MARK"},MARKET_CAP:{name:"Market Cap",field:"MARKET_CAP"},MARKET_MAKER_MOVE:{name:"Market Maker Move",field:"MARKET_MAKER_MOVE"},NET_CHANGE:{name:"Net Change",field:"NET_CHANGE"},OPEN:{name:"Open",field:"OPEN"},OPTION_VOLUME_INDEX:{name:"Option Volume Index",field:"OPTION_VOLUME_INDEX"},PE:{name:"PE",field:"PE"},PERCENT_CHANGE:{name:"Percent Change",field:"PERCENT_CHANGE"},PUT_CALL_RATIO:{name:"Put/Call Ratio",field:"PUT_CALL_RATIO"},PUT_VOLUME_INDEX:{name:"Put Volume Index",field:"PUT_VOLUME_INDEX"},VOLUME:{name:"Volume",field:"VOLUME"},SHARES:{name:"Shares",field:"SHARES"},VOL_DIFF:{name:"Volatility Difference",field:"VOL_DIFF"},VOL_INDEX:{name:"Volatility Index",field:"VOL_INDEX"},WEIGHTED_BACK_VOL:{name:"Weighted Back Volatility",field:"WEIGHTED_BACK_VOL"},YIELD:{name:"Yield",field:"YIELD"}},yR={BOOK_VALUE_PER_SHARE:{name:"Book Value Per Share",field:"BOOK_VALUE_PER_SHARE",type:"FUNDAMENTAL"},BOOK_VALUE_PER_SHARE_2:{name:"Book Value Per Share Growth",field:"BOOK_VALUE_PER_SHARE_2",type:"FUNDAMENTAL"},CASH_FLOW_PER_SHARE_CURRENT:{name:"Cash Flow Per Share",field:"CASH_FLOW_PER_SHARE_CURRENT",type:"FUNDAMENTAL"},CURRENT_RATIO:{name:"Current Ratio",field:"CURRENT_RATIO",type:"FUNDAMENTAL"},DIVIDEND_PAYOUT:{name:"Dividend Payout",field:"DIVIDEND_PAYOUT",type:"FUNDAMENTAL"},DIVIDEND_PAYOUT_PER_SHARE:{name:"Dividend Payout Per Share",field:"DIVIDEND_PAYOUT_PER_SHARE",type:"FUNDAMENTAL"},DIVIDEND_YIELD:{name:"Dividend Yield",field:"DIVIDEND_YIELD",type:"FUNDAMENTAL"},EARNINGS_PER_SHARE:{name:"Earnings Per Share",field:"EARNINGS_PER_SHARE",type:"FUNDAMENTAL"},EARNINGS_PER_SHARE_TTM:{name:"Earnings Per Share - TTM",field:"EARNINGS_PER_SHARE_TTM",type:"FUNDAMENTAL"},FINANCIAL_LEVERAGE:{name:"Financial Leverage (Assets/Equity)",field:"FINANCIAL_LEVERAGE",type:"FUNDAMENTAL"},FIXED_CHARGE_COVERAGE_RATIO:{name:"Fixed Charge Coverage Ratio",field:"FIXED_CHARGE_COVERAGE_RATIO",type:"FUNDAMENTAL"},FREE_CASH_FLOW_PER_SHARE:{name:"Free Cash Flow Per Share",field:"FREE_CASH_FLOW_PER_SHARE",type:"FUNDAMENTAL"},GROSS_PROFIT_MARGIN:{name:"Gross Profit Margin",field:"GROSS_PROFIT_MARGIN",type:"FUNDAMENTAL"},INTEREST_RATE:{name:"Interest Rate - Estimated Average",field:"INTEREST_RATE",type:"FUNDAMENTAL"},INVENTORY_TURNOVER:{name:"Inventory Turnover",field:"INVENTORY_TURNOVER",type:"FUNDAMENTAL"},LONG_TERM_DEBT_TO_CAPITAL:{name:"Long-term Debt to Capital",field:"LONG_TERM_DEBT_TO_CAPITAL",type:"FUNDAMENTAL"},MARKET_CAP_TO_COMMON_EQUITY_RATIO:{name:"Market Cap / Common Equity Ratio",field:"MARKET_CAP_TO_COMMON_EQUITY_RATIO",type:"FUNDAMENTAL"},NET_INCOME:{name:"Net Income",field:"NET_INCOME",type:"FUNDAMENTAL"},NET_PROFIT_MARGIN:{name:"Net Profit Margin",field:"NET_PROFIT_MARGIN",type:"FUNDAMENTAL"},OPERATING_PROFIT_MARGIN:{name:"Operating Profit Margin",field:"OPERATING_PROFIT_MARGIN",type:"FUNDAMENTAL"},PRICE_TO_BOOK_VALUE_RATIO:{name:"Price / Book Value Ratio",field:"PRICE_TO_BOOK_VALUE_RATIO",type:"FUNDAMENTAL"},PRICE_TO_CASH_FLOW_RATIO:{name:"Price / Cash Flow Ratio",field:"PRICE_TO_CASH_FLOW_RATIO",type:"FUNDAMENTAL"},PRICE_TO_EARNINGS_RATIO:{name:"Price / Earnings Ratio",field:"PRICE_TO_EARNINGS_RATIO",type:"FUNDAMENTAL"},QUICK_RATIO:{name:"Quick Ratio",field:"QUICK_RATIO",type:"FUNDAMENTAL"},RETURN_ON_ASSETS:{name:"Return on Assets (ROA)",field:"RETURN_ON_ASSETS",type:"FUNDAMENTAL"},RETURN_ON_EQUITY:{name:"Return on Equity (ROE)",field:"RETURN_ON_EQUITY",type:"FUNDAMENTAL"},REVENUE:{name:"Revenue",field:"REVENUE",type:"FUNDAMENTAL"},SALES_PER_SHARE:{name:"Sales Per Share",field:"SALES_PER_SHARE",type:"FUNDAMENTAL"},TAX_RATE:{name:"Tax Rate",field:"TAX_RATE",type:"FUNDAMENTAL"},TOTAL_ASSET_TURNOVER:{name:"Total Asset Turnover",field:"TOTAL_ASSET_TURNOVER",type:"FUNDAMENTAL"}},fle={...TR,...yR},Tle=[{title:"Stock Filters",filters:TR},{title:"Fundamental Filters",filters:yR}];var Gn=(e=>(e.ASCENDING_TRIANGLE="ASCENDING_TRIANGLE",e.CHANNEL_DOWN="CHANNEL_DOWN",e.CHANNEL_UP="CHANNEL_UP",e.DESCENDING_TRIANGLE="DESCENDING_TRIANGLE",e.DOUBLE_BOTTOM="DOUBLE_BOTTOM",e.DOUBLE_TOP="DOUBLE_TOP",e.FALLING_WEDGE="FALLING_WEDGE",e.FLAG="FLAG",e.HEAD_AND_SHOULDERS="HEAD_AND_SHOULDERS",e.INVERSE_HEAD_AND_SHOULDERS="INVERSE_HEAD_AND_SHOULDERS",e.PENNANT="PENNANT",e.RECTANGLE="RECTANGLE",e.RISING_WEDGE="RISING_WEDGE",e.TRIANGLE="TRIANGLE",e.TRIPLE_BOTTOM="TRIPLE_BOTTOM",e.TRIPLE_TOP="TRIPLE_TOP",e))(Gn||{}),op=(e=>(e.BEARISH="BEARISH",e.BOTH="BOTH",e.BULLISH="BULLISH",e))(op||{}),ap=(e=>(e.BOTH="BOTH",e.CONTINUATION="CONTINUATION",e.REVERSAL="REVERSAL",e))(ap||{}),ip=(e=>(e.BOTH="BOTH",e.COMPLETE="COMPLETE",e.EMERGING="EMERGING",e))(ip||{});const yle=1e3,lp=["PERCENT_CHANGE","YIELD","FRONT_VOL","BACK_VOL","VOL_DIFF","VOL_INDEX","WEIGHTED_BACK_VOL"],Cle=ee({service:I(te.SCAN_FILTER_PARAMETERS),requestId:_,requestVer:$}),ble=Ie({fundamentals:on(_,Ie({fundamentalType:_,fundamentalsValueTypes:Nt(_),historicalPeriods:Nt(Fe([I("ANNUAL"),I("QUARTERLY")])),type:_,low:$,high:$})),studies:on(_,Ie({name:_,parameters:Nt(Ie({name:_,type:Fe([I("PRICE"),I("BOOLEAN"),I("INTEGER"),I("DOUBLE"),I("TEXT"),I("ENUM"),I("PREDEFINED_CONST"),I("SYMBOL")]),defaultValue:_,enumValues:Nt(_)})),scriptType:Fe([I("STUDY"),I("PUBLIC"),I("CUSTOM")]),scriptBody:_,type:_})),patterns:Ie({type:_,patternNames:Nt(Fe([I(Gn.ASCENDING_TRIANGLE),I(Gn.CHANNEL_DOWN),I(Gn.CHANNEL_UP),I(Gn.DESCENDING_TRIANGLE),I(Gn.DOUBLE_BOTTOM),I(Gn.DOUBLE_TOP),I(Gn.FALLING_WEDGE),I(Gn.FLAG),I(Gn.HEAD_AND_SHOULDERS),I(Gn.INVERSE_HEAD_AND_SHOULDERS),I(Gn.PENNANT),I(Gn.RECTANGLE),I(Gn.RISING_WEDGE),I(Gn.TRIANGLE),I(Gn.TRIPLE_BOTTOM),I(Gn.TRIPLE_TOP)])),direction:Nt(Fe([I(op.BEARISH),I(op.BOTH),I(op.BULLISH)])),trend:Nt(Fe([I(ap.BOTH),I(ap.CONTINUATION),I(ap.REVERSAL)])),breakout:Nt(Fe([I(ip.BOTH),I(ip.COMPLETE),I(ip.EMERGING)])),minLength:_,maxLength:_,initialTrend:_,breakoutStrength:_,volumeIncrease:_,uniformity:_,clarity:_,timeFrame:on(_,Nt(Fe([I(ie.DAY),I(ie.DAY2),I(ie.DAY3),I(ie.DAY4),I(ie.HOUR1),I(ie.HOUR2),I(ie.HOUR4),I(ie.MIN1),I(ie.MIN10),I(ie.MIN15),I(ie.MIN2),I(ie.MIN20),I(ie.MIN3),I(ie.MIN30),I(ie.MIN4),I(ie.MIN5),I(ie.MONTH),I(ie.OPT_EXP),I(ie.QUARTER),I(ie.WEEK),I(ie.YEAR)])))})}),Ele=Ie({type:_,field:_,low:Fe([$,Or]),high:Fe([$,Or]),fundamentalType:Fe([_,Or]),name:Fe([_,Or])}),Ale=Ie({allGroupFilters:Nt(Ele),queryName:_,scanInWatchlist:$}),vle=Ze([ee({queryName:_}),Ie({watchlistId:$})]),Ile=ee({name:_,studies:qe(_)});var ar=(e=>(e.SERVICE="SERVICE",e.USER="USER",e))(ar||{});const au={SERVICE:"Admin",USER:"You"};var iu=(e=>(e.JPG="jpg",e.PNG="png",e))(iu||{}),dy=(e=>(e.ERROR="error",e.WARNING="warning",e))(dy||{}),lu=(e=>(e.TEXT="text",e.IMAGE="image",e))(lu||{}),Wf=(e=>(e.START_CHAT="Start Chat",e.IN_PROGRESS="IN-PROGRESS",e))(Wf||{}),pr=(e=>(e[e.CHAT_ENDED=-2]="CHAT_ENDED",e[e.CHAT_NOT_STARTED=-1]="CHAT_NOT_STARTED",e))(pr||{});const xle="TOS_WEB_SUPPORT",wle=10*1024*1024,uy={right:48,bottom:48},Ole=ee({service:I("chat/close"),requestId:_,requestVer:$}),Rle=Ie({succeeded:Xe}),Dle=Ze([ee({type:Fe([I("text"),I("image")])}),Ie({bytes:_,text:_,imageType:Fe([I(iu.PNG),I(iu.JPG)]),height:$,width:$})]),Lle=Ie({chatId:$,name:_,status:Fe([I("OPEN"),I("CLOSED")]),lastMessageTime:_,lastMessageText:_,assisted:Xe,numberOfUnreadMessages:$,lastMessage:Ie({messageId:$,nickname:_,userId:$,messageParts:Nt(Dle)})}),_le=ee({service:I(te.GET_SUPPORT_CHAT_GLOBAL_MESSAGE),requestId:_,requestVer:$}),Nle=ee({open:Xe,fromTime:_,toTime:_}),CR=on(Fe([I("SUNDAY"),I("MONDAY"),I("TUESDAY"),I("WEDNESDAY"),I("THURSDAY"),I("FRIDAY"),I("SATURDAY")]),Nle),Ple=Ie({hoursSchedule:_,chatHours:CR}),bR=Ie({calls:$,puts:$,total:$}),kle=Ie({callsPercent:$,putsPercent:$,totalPercent:$}),Mle=Ie({values:bR}),Ch=Ie({values:bR,percents:kle}),$le=Ie({symbol:st,pcRatio:$,totalVolume:Mle,bidOrBelow:Ch,askOrAbove:Ch,betweenTheMarket:Ch,delta:Fe([Ie({}),on(st,Ch)])}),jle=Ie({time:$,netLiq:$,totalCash:$,forexCash:$}),Ble=qe(jle),Fle=ee({balancesHistoryData:Ble}),Hle=Fe([I("HKASIA"),I("INVEST"),I("SG"),I("SWIMADMIN"),I("SYSTEM"),I("TDA"),I("TDW"),I("TOS"),I("UNDEFINED")]),Ule=Fe([I("ADVCLNT"),I("ADVNCED"),I("AMER"),I("AVAM"),I("CTRUST"),I("DMM"),I("HKASIA"),I("INTL"),I("INVTOOL"),I("SING"),I("SUNGRD"),I("TDAIS"),I("TDWC"),I("TOSAUST"),I("TOSPM"),I("TOSSNGP"),I("UK"),I("UNDEFINED")]),Vle=Ie({messageId:$,messageTime:_,userId:$,priority:Ie({name:_,value:$}),language:Ie({name:_,locale:_}),text:_,originalText:_,fontSize:$,fontColor:Ie({red:$,green:$,blue:$,alpha:$,rgb:$,transparency:$}),domainSegment:Ie({domain:Hle,segment:Ule}),accountDictionaryId:$,accountDictionaryName:_,roleName:_,alert:Xe,scheduleDateTime:$,title:_,recurrenceStartDateTime:$,recurrenceEndDateTime:$,recurrenceRule:_,responsibleUser:$,userName:_}),ER=qe(Vle),Wle=ee({service:I(te.MESSAGE_CENTER_GET),requestId:_,requestVer:$}),Gle=Ie({messages:ER}),Yle=ee({service:I(te.MESSAGE_CENTER_SUBSCRIBE),requestId:_,requestVer:$}),qle=Ie({messages:ER}),Kle=Ze([ee({requestId:_,requestVer:$,service:I("market_hours")}),Ie({schwabMarketHours:Ie({OPTION:Ie({EQO:Ie({sessionHours:Ie({regularMarket:qe(Ie({start:_,end:_}))})})})}),error:_})]),zle=ee({uuid:_,accessToken:_,grantType:_,refreshIntervalMillis:$}),Xle=Ie({symbol:_,values:Ie({COMPANY_BUSINESS_DESCRIPTION:_})}),Qle=ee({code:st,description:st,tradeable:Xe,cdi:st}),Zle=new Tc("sgwArrayNumber",$.is,(e,t)=>$.validate(e,t).fold(()=>ai(0),s=>isNaN(s)?d1(s,t):ai(s)),e=>e),Jle=ee({symbol:st,displaySymbol:st,daysToExpiration:$,lastTradeDate:ss,isActive:Xe,expiration:_}),ece=Ze([ee({name:st,optionPairs:qe(ee({strike:$,callSymbol:st,putSymbol:st}))}),Ie({expirationString:st,daysToExpiration:$,spc:$})]),tce=Ze([ee({underlying:st,expirationStyle:Fe([I("REGULAR"),I("WEEKLYS"),I("QUARTERLYS"),I("EOM")]),expiration:ss,lastTradeDate:ss,name:st,settlementType:Fe([I("AM"),I("PM")])}),Ie({spc:$,multiplier:$,additionalUnderlyings:_})]),sce={[G.VOLUME_AVG]:null},nce=on(_,on(Qr(sce),$)),rce=ee({service:I("study/subscribe"),requestId:_,requestVer:$,values:nce}),bh=Fe([I(At.ARROWS_DOWN),I(At.ARROWS_UP),I(At.AUTO),I(At.BOOLEAN_ARROWS_DOWN),I(At.BOOLEAN_ARROWS_UP),I(At.BOOLEAN_POINTS),I(At.BOOLEAN_WEDGES_DOWN),I(At.BOOLEAN_WEDGES_UP),I(At.DASHED_LINE),I(At.HISTOGRAM),I(At.HISTOGRAM_WITH_GAPS),I(At.HORIZONTAL_LINE),I(At.LINE_WITH_POINTS),I(At.LINE_WITH_SQUARES),I(At.LINE_WITH_TRIANGLES),I(At.POINTS),I(At.SIMPLE_LINE),I(At.SQUARES),I(At.TRIANGLES),I(At.VALUES_ABOVE),I(At.VALUES_BELOW)]),X0=Fe([I(Ul.FIRM),I(Ul.LONG_DASH),I(Ul.MEDIUM_DASH),I(Ul.POINTS),I(Ul.SHORT_DASH)]),oce=Fe([I(kd.AUTO),I(kd.BOOLEAN),I(kd.NUMERICAL)]),ace=Ie({name:_,plotSettings:Ie({isAutoStyleAllowed:Xe,defaultValue:Ie({curveStyle:X0,paintingStyle:bh,paintingType:oce}),paintingStyles:Ie({AUTO:qe(bh),NUMERICAL:qe(bh),BOOLEAN:qe(bh)}),curveStyles:qe(X0),width:$,color:Ie({r:$,g:$,b:$,alpha:$})})}),ice=Ie({name:_,type:Fe([I(Qs.BOOLEAN),I(Qs.DOUBLE),I(Qs.ENUM),I(Qs.INTEGER),I(Qs.PREDEFINED_CONST),I(Qs.PRICE),I(Qs.SYMBOL),I(Qs.TEXT)]),defaultValue:_,enumValues:qe(_)}),lce=Ie({service:I("studies/get"),requestId:_,type:Fe([I("error"),I("patch"),I("snapshot")]),studiesGetResponseJTOS:qe(Ie({name:Fe([I(G.ACCELERATION_BANDS),I(G.ACCUM_DIST_PR_VOL),I(G.ACC_DIST),I(G.ADVANCE_DECLINE),I(G.ADX_CROSSOVER),I(G.ATR),I(G.BOLLINGER_BANDS),I(G.BOLLINGER_BANDS_CROSSOVER),I(G.BOLLINGER_BANDWIDTH),I(G.BOLLINGER_PERCENT_B),I(G.CHAIKIN_MONEY_FLOW),I(G.CHAIKIN_OSC),I(G.CHAIKIN_OSCILLATOR),I(G.CHAIKIN_VOLATILITY),I(G.CSI),I(G.CUMULATIVE_VOLUME_INDEX),I(G.DAILY_SMA),I(G.DEMA),I(G.DEMAND_INDEX),I(G.DETRENDED_PRICE_OSC),I(G.DISPLACED_EMA),I(G.DMA),I(G.EASE_OF_MOVEMENT),I(G.EHLERS_SUPER_SMOOTHER_FILTER),I(G.FOUR_PERCENT_MODEL),I(G.HISTORICAL_VOLATILITY),I(G.HL_VOLATILITY),I(G.IMPLIED_VOLATILITY),I(G.KLINGER_OSCILLATOR),I(G.LEGACY_EMA),I(G.LINEAR_REG_CH100),I(G.LINEAR_REG_CH50),I(G.LINEAR_REG_CH_VAR),I(G.LINEAR_REG_CURVE),I(G.MACD_HISTOGRAM_CROSSOVER),I(G.MARKET_FORECAST),I(G.MARKET_SENTIMENT),I(G.MC_CLELLAN_OSCILLATOR),I(G.MC_CLELLAN_SUMMATION_INDEX),I(G.MEDIAN_AVERAGE),I(G.MESA_SINE_WAVE),I(G.MOMENTUM_CROSSOVER),I(G.MONEY_FLOW_INDEX),I(G.MONEY_FLOW_INDEX_CROSSOVER),I(G.MOVING_AVG_CROSSOVER),I(G.MOV_AVG_ADAPTIVE),I(G.MOV_AVG_TRIANGULAR),I(G.NEGATIVE_VOLUME_INDEX),I(G.ON_BALANCE_VOLUME),I(G.PARABOLIC_SAR),I(G.PARABOLIC_SAR_CROSSOVER),I(G.PERCENT_CHANGE),I(G.POSITIVE_VOLUME_INDEX),I(G.PPS),I(G.PRICE_AND_VOLUME_TREND),I(G.PRICE_AVERAGE_CROSSOVER),I(G.RAINBOW_AVERAGE),I(G.RATE_OF_CHANGE_CROSSOVER),I(G.RELATIVE_VOLATILITY_INDEX),I(G.REVERSE_ENGINEERING_MACD),I(G.RSI_CROSSOVER),I(G.STANDARD_DEVIATION),I(G.STANDARD_ERROR_BANDS),I(G.STANDARD_ERROR_CHANNEL),I(G.STOCHASTIC_CROSSOVER),I(G.TEMA),I(G.TIME_SERIES_FORECAST),I(G.TRADE_VOLUME_INDEX),I(G.TTM_LRC),I(G.TTM_SCALPER_ALERT),I(G.TTM_SQUEEZE),I(G.TTM_WAVE),I(G.ULCER_INDEX),I(G.VARIABLE_MA),I(G.VOLATILITY_STD_DEV),I(G.VOLATILITY_SWITCH),I(G.VOLUME_AVG),I(G.VOLUME_OSC),I(G.VOLUME_PROFILE),I(G.VOLUME_RATE_OF_CHANGE),I(G.WEAKNESS_IN_A_STRONG_TREND),I(G.ZIG_ZAG_HIGH_LOW),I(G.ZIG_ZAG_PERCENT),I(G.ZIG_ZAG_SIGN),I(G.ZIG_ZAG_STEP_PATTERN),I(G.AROON_INDICATOR),I(G.AROON_OSCILLATOR),I(G.FORECAST_OSCILLATOR),I(G.HEIKIN_ASHI_DIFF),I(G.LBR_THREE_TEN_OSCILLATOR),I(G.LINEAR_REGR_REVERSAL),I(G.LINEAR_REGRESSION_SLOPE),I(G.MACD_HISTOGRAM),I(G.MACD_TWO_LINES),I(G.ONSET_TREND_DETECTOR),I(G.POLARIZED_FRACTAL_EFFICIENCY),I(G.PRICE_OSC),I(G.Q_STICK),I(G.R_SQUARED),I(G.TREND_NOISE_BALANCE),I(G.TREND_PERIODS),I(G.TREND_QUALITY),I(G.VERTICAL_HORIZONTAL_FILTER),I(G.VOLUME_FLOW_INDICATOR),I(G.VOLUME_WEIGHTED_MACD),I(G.VORTEX_INDICATOR),I(G.ZIG_ZAG_TREND_PERCENT),I(G.ZIG_ZAG_TREND_SIGN)]),plots:qe(ace),parameters:qe(_),parametersInfo:qe(ice)}))});var Xm=(e=>(e.STATIC="STATIC",e.OPTION_SCAN="OPTION_SCAN",e.STOCK_SCAN="STOCK_SCAN",e.SPECIAL="SPECIAL",e))(Xm||{});const cce=Fe([I("STATIC"),I("OPTION_SCAN"),I("STOCK_SCAN"),I("SPECIAL")]),dce=ee({name:st,id:$,type:cce}),uce=ee({name:st,watchlists:qe(dce)}),hce=ee({service:I("watchlist/categories"),requestId:_,requestVer:$,categories:qe(uce)}),pce=ee({service:I("watchlist/get"),requestId:_,requestVer:$,watchlist:Ze([ee({name:st}),Ie({symbols:qe(_)})])}),mce=Ze([ee({service:I("watchlist/add"),requestId:_,requestVer:$}),Ie({watchlist:ee({name:st,symbols:qe(_)})}),Ie({error:_})]),gce=Ze([ee({service:I("watchlist/delete"),requestId:_,requestVer:$}),Ie({error:_})]),Sce=Ze([ee({service:I("watchlist/create"),requestId:_,requestVer:$}),Ie({watchlist:Ze([ee({name:st,id:$}),Ie({symbols:qe(_)})])}),Ie({error:_})]),fce=Ze([ee({service:I("watchlist/rearrange"),requestId:_,requestVer:$}),Ie({error:_})]),Tce=Ze([ee({service:I("watchlist/remove"),requestId:_,requestVer:$}),Ie({error:_})]),yce=ee({symbol:_,values:Ie({ASK:$,BID:$})});var ji=(e=>(e.HIDDEN="HIDDEN",e.ALWAYS="ALWAYS",e.ON_HOVER="ON_HOVER",e))(ji||{}),Bi=(e=>(e.LEFT="LEFT",e.RIGHT="RIGHT",e.MIDDLE="MIDDLE",e))(Bi||{}),Wr=(e=>(e.SOLID="SOLID",e.LONG_DASHED="LONG_DASHED",e.SHORT_DASHED="SHORT_DASHED",e))(Wr||{}),AR=(e=>(e.NONE="NONE",e.LEFT="LEFT",e.RIGHT="RIGHT",e.TWO_SIDED="TWO_SIDED",e))(AR||{}),hy=(e=>(e.BOLD="BOLD",e.BOLD_ITALIC="BOLD_ITALIC",e.ITALIC="ITALIC",e.PLAIN="PLAIN",e))(hy||{});const vR="Open Sans CJK Emoji";var py=(e=>(e.FIRST_LINE="FIRST_LINE",e.FULL="FULL",e.ICON="ICON",e))(py||{}),nn=(e=>(e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.TOP="TOP",e.RIGHT="RIGHT",e))(nn||{}),J=(e=>(e.AndrewsPitchfork="AndrewsPitchfork",e.Arrow="Arrow",e.Channel="Channel",e.CycleBrackets="CycleBrackets",e.FibonacciArcs="FibonacciArcs",e.FibonacciExtensions="FibonacciExtensions",e.FibonacciFans="FibonacciFans",e.FibonacciRetracements="FibonacciRetracements",e.FibonacciSpiral="FibonacciSpiral",e.FibonacciTimeExtensions="FibonacciTimeExtensions",e.FibonacciTimeRatios="FibonacciTimeRatios",e.FibonacciTimeSeries="FibonacciTimeSeries",e.GannFans="GannFans",e.Oval="Oval",e.PriceLevel="PriceLevel",e.QuadrantLines="QuadrantLines",e.Rectangle="Rectangle",e.RegressionChannel="RegressionChannel",e.RegressionLine="RegressionLine",e.TextNote="TextNote",e.TimeLevel="TimeLevel",e.Trendline="Trendline",e.Unsupported="Unsupported",e))(J||{}),mr=(e=>(e.EndPoint="EndPoint",e.ExpansionControl="ExpansionControl",e.HeightControl="HeightControl",e.MiddlePoint="MiddlePoint",e))(mr||{}),Yn=(e=>(e.none="none",e.bothSide="bothSide",e.leftExtended="leftExtended",e.rightExtended="rightExtended",e.topExtended="topExtended",e.bottomExtended="bottomExtended",e))(Yn||{}),Tt=(e=>(e.start="start",e.end="end",e))(Tt||{}),xs=(e=>(e.expansionStart="expansionStart",e.expansionEnd="expansionEnd",e))(xs||{}),$n=(e=>(e.height="height",e))($n||{}),Rn=(e=>(e.middle="middle",e))(Rn||{});const Cce=e=>{switch(e){case"Trendline":return"Trendline";case"TimeLevel":return"Time Level";case"PriceLevel":return"Price Level";case"FibonacciRetracements":return"Fibonacci Retracements";case"FibonacciExtensions":return"Fibonacci Extensions";case"TextNote":return"Text";case"Channel":return"Channel";default:return e}};var qr=(e=>(e.Create="Create",e.Edit="Edit",e.None="None",e))(qr||{});const bce=(e,t)=>e.find(n=>n.guid===t)??e.find(n=>n.isDefault),Ece={BOTTOM:null,LEFT:null,TOP:null,RIGHT:null},Ace=e=>{switch(e){case"BOTTOM":return nn.BOTTOM;case"TOP":return nn.TOP;case"RIGHT":return nn.RIGHT;case"LEFT":default:return nn.LEFT}},vce=(e,t,s)=>{const n=[...e];switch(s.drawing.type){case J.TimeLevel:{const{endValue:r,...o}=s.drawing;n[t]={...o,guid:s.drawingGuid,curve:{...s.drawing.curve,color:wn({...s.drawing.curve.color,a:s.drawing.curve.color.alpha})},end:{time:o.start.time,value:r}};break}case J.PriceLevel:{const{endTime:r,...o}=s.drawing;n[t]={...o,guid:s.drawingGuid,curve:{...s.drawing.curve,color:wn({...s.drawing.curve.color,a:s.drawing.curve.color.alpha})},end:{time:r,value:o.start.value}};break}case J.Trendline:{const r=s.drawing;n[t]={...r,guid:s.drawingGuid,curve:{...s.drawing.curve,color:wn({...s.drawing.curve.color,a:s.drawing.curve.color.alpha})}};break}case J.FibonacciExtensions:case J.FibonacciRetracements:{const{trendCurve:r,...o}=s.drawing;n[t]={...o,guid:s.drawingGuid,curve:{...s.drawing.trendCurve,color:wn({...s.drawing.trendCurve.color,a:s.drawing.trendCurve.color.alpha})},fibonacciCurves:o.fibonacciCurves.map(i=>({...i,color:wn({...i.color,a:i.color.alpha})}))};break}case J.Rectangle:{const{topLeft:r,downRight:o,color:i,...l}=s.drawing;n[t]={...l,guid:s.drawingGuid,curve:{color:wn({...i,a:i.alpha})},start:r,end:o};break}case J.TextNote:{const{color:r,position:o,...i}=s.drawing;n[t]={...i,guid:s.drawingGuid,curve:{color:wn({...r,a:r.alpha})},start:o,end:o};break}case J.Channel:{const r=s.drawing;n[t]={...r,guid:s.drawingGuid,curve:{...s.drawing.curve,color:wn({...s.drawing.curve.color,a:s.drawing.curve.color.alpha})},channelCurves:r.channelCurves.map(o=>({...o,color:wn({...o.color,a:o.color.alpha})}))};break}}return n},Vl=ee({r:$,g:$,b:$,alpha:$}),ki=ee({color:Vl,style:_,width:$}),Ice=ee({requestId:_,service:I("drawings"),drawings:qe(Fe([ee({type:I(J.Trendline),name:_,guid:_,arrowStyle:_,curve:ki,labelLocation:_,leftExtended:Xe,rightExtended:Xe,labelStyle:_,start:ee({time:_,value:$}),end:ee({time:_,value:$})}),ee({nameStyle:_,priceStyle:_,type:I(J.PriceLevel),name:_,guid:_,curve:ki,leftExtended:Xe,rightExtended:Xe,start:ee({time:_,value:$}),endTime:_}),ee({nameStyle:_,timeStyle:_,type:I(J.TimeLevel),name:_,guid:_,curve:ki,topExtended:Xe,bottomExtended:Xe,start:ee({time:_,value:$}),endValue:$}),ee({type:I(J.FibonacciRetracements),name:_,guid:_,trendCurve:ki,fibonacciCurves:Nt(ee({visible:Xe,coeff:$,color:Vl,style:_,width:$})),coeffStyle:_,priceStyle:_,leftExtended:Xe,rightExtended:Xe,start:ee({time:_,value:$}),end:ee({time:_,value:$})}),ee({type:I(J.FibonacciExtensions),name:_,guid:_,indicatorId:_,trendCurve:ki,extensionCurve:ki,extension:Xe,fibonacciCurves:Nt(ee({visible:Xe,coeff:$,color:Vl,style:_,width:$})),coeffStyle:_,priceStyle:_,start:ee({time:_,value:$}),end:ee({time:_,value:$}),middle:ee({time:_,value:$})}),ee({type:I(J.Rectangle),name:_,guid:_,indicatorId:_,color:Vl,topLeft:ee({time:_,value:$}),downRight:ee({time:_,value:$})}),ee({type:I(J.TextNote),name:_,guid:_,indicatorId:_,color:Vl,position:ee({time:_,value:$}),text:_,font:Ie({name:_,style:Qr({BOLD_ITALIC:null,BOLD:null,ITALIC:null,PLAIN:null}),size:$}),align:Qr(Ece),showArrow:Xe,textStyle:Qr({FIRST_LINE:null,FULL:null,ICON:null})}),ee({type:I(J.Channel),name:_,guid:_,indicatorId:_,labelLocation:_,labelStyle:_,leftExtended:Xe,rightExtended:Xe,start:ee({time:_,value:$}),end:ee({time:_,value:$}),height:$,curve:ki,channelCurves:Nt(ee({visible:Xe,coeff:$,color:Vl,style:_,width:$}))}),ee({type:Fe([I(J.Oval),I(J.AndrewsPitchfork),I(J.Arrow),I(J.CycleBrackets),I(J.FibonacciArcs),I(J.FibonacciFans),I(J.FibonacciSpiral),I(J.FibonacciTimeExtensions),I(J.FibonacciTimeRatios),I(J.FibonacciTimeSeries),I(J.GannFans),I(J.QuadrantLines),I(J.RegressionChannel),I(J.RegressionLine)])})]))}),xce=Ze([ee({exchangeCode:_,size:$,sequence:$}),Ie({symbol:st,price:$,time:ss})]),wce=ee({requestId:_,service:I("time_sales"),symbol:st,timeSales:Nt(xce)}),Oce=ee({accessExpiresIn:$,accessToken:_,refreshToken:_}),Rce=Ie({code:_}),Dce=Ie({provider:Ie({name:_,code:_,ratingValues:qe(_)}),rating:_,url:_,date:ss}),Lce=qe(Dce),_ce=Ie({symbol:_,reports:Lce,error:_}),Nce={login:Ze([ee({service:I("login"),requestId:_}),Ie({error:_,isTerminal:Xe,message:_,userId:$,userCode:_,userCdi:_,authenticated:Xe,token:_,userSegment:_,userDomain:_,schwabAccountMigrationValue:_,permissions:Ie({isSchwabIntegrationHubLinkAllowed:Xe,isPlaceQuantityLinkOrdersAllowed:Xe}),quotePermissions:Y0})]),"login/schwab":Ze([ee({service:I("login/schwab"),requestId:_}),Ie({error:_,userId:$,userCode:_,userCdi:_,authenticated:Xe,token:_,userSegment:_,userDomain:_,schwabAccountMigrationValue:_,permissions:Ie({isSchwabIntegrationHubLinkAllowed:Xe,isPlaceQuantityLinkOrdersAllowed:Xe}),quotePermissions:Y0,accessTokenInfo:ee({refreshToken:_})})]),"logoff/schwab":ee({service:I("logoff/schwab"),requestId:_}),accounts:ee({service:I("accounts"),requestId:_,items:qe(Qle)}),"watchlist/categories":hce,statement:ee({service:I("statement"),requestId:_,values:Ie({CASH_AVAI_FOR_WITHDRAWAL:$,CASH_AND_SWEEP:$,NET_LIQ:$,OPTION_BP:$,STOCK_BP:$,FOREX_BP:$,DT_LEFT:$,DTBP:$})}),"watchlist/get":pce,"watchlist/add":mce,"watchlist/create":Sce,"watchlist/rearrange":fce,"watchlist/remove":Tce,"watchlist/delete":gce,"alerts/create":Ze([ee({service:I("alerts/create"),requestId:_,requestVer:$}),Ie({error:_,alert:ee({id:$,time:$,closeTime:$,status:_,market:ee({field:_,operator:_,threshold:$})})})]),place_order:Ze([ee({service:I("place_order"),requestId:_,requestVer:$,orders:qe(Ze([ee({compositeSymbol:st,priceStep:$,descriptionToShare:st}),Ie({quantity:$,priceType:_,tifs:ee({values:qe(_),selection:$}),error:_,bidPrice:$,askPrice:$,priceLocked:Xe,legs:qe(ee({symbol:_})),cost:$,commissions:$,fees:qe(ee({type:_,value:$})),midPrice:$,stopPrice:$,stopPriceLink:_,stopType:_,stopPriceOffset:$,types:ee({values:qe(_),selection:$}),spreadName:_,triggerTime:_,cancelTime:_})]))}),Ie({validationError:_}),Ie({confirmation:Ze([ee({rows:qe(Ze([ee({value:st,title:st}),Ie({numericValues:qe($)})]))}),Ie({cost:Fe([$,Or]),commission:Fe([$,Or]),fee:Fe([$,Or]),warnings:qe(ee({message:_}))})]),error:_})]),cancel_order:Ze([ee({service:I("cancel_order"),requestId:_,result:_}),Ie({error:_})]),order_events:ee({service:I("order_events"),requestId:_,orders:qe(Ze([ee({eventType:st,orderId:$,status:st,quantity:$,description:st,descriptionToShare:st,eventTime:$,rootSymbol:st,underlyingSymbol:Fe([_,Or]),underlyingType:st,spreadName:st,legs:qe(ee({symbol:st,quantity:$,positionEffect:_,instrumentType:st})),groupMarker:st,unionId:$,groupId:$}),Ie({accountCode:st,side:st,tif:st,priceType:st,orderType:_,compositeSymbol:_,comment:_,spreadName:_,price:$,stopPrice:$,stopPriceLink:st,stopPriceOffset:$,avgFillPrice:$,triggerTime:_,triggerOrderId:$,cancelTime:_,triggerConditions:Nt(Ze([ee({method:_,trigger:_,symbol:_}),Ie({price:$})])),cancelConditions:Nt(Ze([ee({method:_,trigger:_,symbol:_}),Ie({price:$})]))})])),type:_}),user_properties:Ze([ee({service:I("user_properties"),requestId:_,requestVer:$}),Ie({defaultAccountCode:_,stocksOrderDefaultType:_,stocksOrderDefaultQuantity:$,optionsOrderDefaultType:_,optionsOrderDefaultQuantity:$,futuresOrderDefaultType:_,futuresOrderDefaultQuantity:$,futureOptionsOrderDefaultType:_,futureOptionsOrderDefaultQuantity:$,forexOrderDefaultType:_,forexOrderDefaultQuantity:$,plDisplayMethod:Fe([I("EXECUTION_PRICE"),I("GAINSKEEPER_COST"),I("NOT_DEFINED")])})]),"user_properties/set":Ze([ee({service:I("user_properties/set"),requestId:_,requestVer:$}),Ie({error:_})]),quotes:ee({service:I("quotes"),requestId:_,items:qe(G0)}),"quotes/get":ee({service:I("quotes/get"),requestId:_,items:qe(G0)}),"study/subscribe":rce,"studies/get":Ze([lce,Ie({error:_})]),"study/categories":Ze([ee({service:I("study/categories"),requestId:_,type:Fe([I("error"),I("patch"),I("snapshot")]),categories:qe(Ile)}),Ie({error:_})]),instruments:Qie,positions:Ze([ee({service:I("positions"),requestId:_,type:Fe([I("error"),I("patch"),I("snapshot")]),items:qe(ele)}),Ie({error:_})]),grouped_positions:Ze([ee({service:I("grouped_positions"),requestId:_,type:Fe([I("error"),I("patch"),I("snapshot")]),groups:qe(ple)}),Ie({error:_})]),transactions:Ze([ee({service:I("transactions"),requestId:_,type:Fe([I("error"),I("patch"),I("snapshot")]),transactions:qe(ale)}),Ie({error:_})]),"option_chain/get":ee({service:I("option_chain/get"),requestId:_,optionSeries:qe(ece)}),"quotes/options":ee({service:I("quotes/options"),requestId:_,items:qe(yce)}),optionSeries:ee({service:I("optionSeries"),requestId:_,series:qe(tce)}),future_series:ee({service:I("future_series"),requestId:_,series:qe(Jle)}),optionStrikes:ee({service:I("optionStrikes"),requestId:_,strikes:qe($)}),optionSymbols:ee({requestId:_,service:I("optionSymbols"),option:qe(ee({seriesName:st,underlying:st,strike:$,type:Qr({CALL:null,PUT:null}),symbol:st}))}),"optionSeries/quotes":ee({service:I("optionSeries/quotes"),requestId:_,requestVer:$,series:qe(ee({name:st,values:Ie({IMPLIED_VOLATILITY:$,SERIES_EXPECTED_MOVE:$})}))}),options_statistics:Ze([ee({service:I("options_statistics"),requestId:_,requestVer:$}),$le]),instrument_search:ee({service:I("instrument_search"),requestId:_,instruments:qe(ee({symbol:st,displaySymbol:st,description:st}))}),unsubscribe:ee({service:I("unsubscribe"),requestId:_,error:Fe([_,Or])}),chart:ee({service:I("chart"),requestId:_,requestVer:$,candles:ee({opens:qe($),highs:qe($),lows:qe($),closes:qe($),volumes:qe(Zle),timestamps:qe($)}),studies:qe(Ze([ee({studyName:_,plots:qe(ee({plotName:_,values:qe(Fe([$,h5]))}))}),Ie({profiles:qe(ee({bars:qe(ee({value:$})),minPaintingPrice:$,priceStep:$}))})]))}),"alerts/subscribe":Fe([ee({service:I("alerts/subscribe"),requestId:_,result:_}),ee({service:I("alerts/subscribe"),requestId:_,alertDescription:_,alert:z0}),ee({service:I("alerts/subscribe"),requestId:_,changedAlert:z0}),ee({service:I("alerts/subscribe"),requestId:_,expiredAlert:ee({})}),ee({service:I("alerts/subscribe"),requestId:_,expiredAlertsCount:$})]),"alerts/lookup":ee({service:I("alerts/lookup"),requestId:_,requestVer:$,alerts:qe(Ze([ee({id:$,time:$,closeTime:$,status:Fe([I("ACTIVE"),I("CANCELED"),I("EXPIRED"),I("NEW"),I("TRIGGERED"),I("WAIT_TRG")])}),Ie({market:ee({field:_,operator:_,threshold:$,components:qe(ee({symbol:_}))})})]))}),"alerts/cancel":Ze([ee({service:I("alerts/cancel"),requestId:_,requestVer:$}),Ie({result:_,error:_})]),market_depth:Ze([ee({requestId:_,requestVer:$,service:I("market_depth"),askQuotes:qe(Ie({name:_,price:$,size:$})),bidQuotes:qe(Ie({name:_,price:$,size:$}))}),Ie({error:_})]),[te.NEWS_HEADERS_GET]:ee({requestId:_,requestVer:$,service:I(te.NEWS_HEADERS_GET),news:q0}),[te.NEWS_HEADERS_SUBSCRIBE]:ee({requestId:_,requestVer:$,service:I(te.NEWS_HEADERS_SUBSCRIBE),news:q0}),news_body:ee({requestId:_,requestVer:$,service:I("news_body"),newsCode:_,text:_}),drawing_sets:ee({requestId:_,symbol:_,service:I("drawing_sets"),drawingSets:Nt(ee({guid:_,name:_,isDefault:Xe}))}),"drawing_set/create":Ze([ee({service:I("drawing_set/create"),requestId:_,requestVer:$}),Ie({drawingSet:ee({guid:_,name:_,isDefault:Xe}),error:_})]),"drawing/delete":Ze([ee({service:I("drawing/delete"),requestId:_,requestVer:$}),Ie({error:_})]),"drawing/update":ee({service:I("drawing/update"),requestId:_,requestVer:$}),"drawing/create":ee({service:I("drawing/create"),requestId:_,requestVer:$}),"drawing_set/delete":ee({requestId:_,service:I("drawing_set/delete")}),drawings:Ice,disclosures:ee({service:I("disclosures"),requestId:_,disclosures:qe(ile)}),"disclosures/accept":Ze([ee({service:I("disclosures/accept"),requestId:_,type:Fe([I("error"),I("patch"),I("snapshot")])}),Ie({message:_})]),time_sales:wce,calendar_events:Ze([ee({service:I("calendar_events"),requestId:_,requestVer:$}),Ie({items:qe(mle)})]),historical_calendar_events:Ze([ee({service:I("historical_calendar_events"),requestId:_,requestVer:$}),gle]),stock_hacker:Ze([ee({service:I("stock_hacker"),requestId:_,requestVer:$}),Ie({symbols:qe(_)})]),[te.SCAN_QUERY_GET]:Ze([ee({service:I("scan_query/get"),requestId:_,requestVer:$}),Ale]),[te.SCAN_QUERY_SAVE]:Ze([ee({service:I(te.SCAN_QUERY_SAVE),requestId:_,requestVer:$}),vle]),"demo_account/adjust_cash":lle,"demo_account/set_balance":cle,"access_token/get":Ze([ee({service:I("access_token/get"),requestId:_,requestVer:$}),Oce]),"auth_code/get":Ze([ee({service:I("auth_code/get"),requestId:_,requestVer:$}),Rce,Ie({error:_})]),[te.CREATE_SUPPORT_CHAT]:Ze([ee({service:I(te.CREATE_SUPPORT_CHAT),requestId:_,requestVer:$}),Ie({succeeded:Xe,chatRoom:Ie({chatId:$,name:_,status:_,chatBroadcastingActivity:_,userCount:$})})]),[te.SUPPORT_CHATS]:Ze([ee({service:I(te.SUPPORT_CHATS),requestId:_,requestVer:$}),Ie({chatRooms:Nt(Lle)})]),[te.CLOSE_SUPPORT_CHAT]:Ze([Ole,Rle]),[te.GET_SUPPORT_CHAT_GLOBAL_MESSAGE]:Ze([_le,Ple]),[te.SEND_SUPPORT_MESSAGE]:Ze([ee({service:I(te.SEND_SUPPORT_MESSAGE),requestId:_,requestVer:$}),Ie({succeeded:Xe,messageId:$})]),[te.SCAN_FILTER_PARAMETERS]:Ze([Cle,ble]),[te.NEWS_HEADERS_GET_RELEVANT]:Ze([ole,K0]),[te.NEWS_HEADERS_SUBSCRIBE_RELEVANT]:Ze([ee({service:I(te.NEWS_HEADERS_SUBSCRIBE_RELEVANT),requestId:_,requestVer:$}),K0]),[te.BALANCES_HISTORY]:Ze([ee({service:I(te.BALANCES_HISTORY),requestId:_,requestVer:$}),Fle]),[te.ANALYST_REPORTS]:Ze([ee({service:I(te.ANALYST_REPORTS),requestId:_,requestVer:$}),_ce]),[te.ANALYST_REPORTS_ACCESS_TOKEN]:Ze([ee({service:I(te.ANALYST_REPORTS_ACCESS_TOKEN),requestId:_,requestVer:$}),zle]),[te.MESSAGE_CENTER_GET]:Ze([Wle,Gle]),[te.MESSAGE_CENTER_SUBSCRIBE]:Ze([Yle,qle]),[te.MARKET_HOURS]:Kle,[te.FUNDAMENTALS_CURRENT]:Ze([ee({service:I(te.FUNDAMENTALS_CURRENT),requestId:_,requestVer:$}),Xle])},Q0=ee({heartbeat:$});var Up=(e=>(e.Snapshot="snapshot",e.Patch="patch",e.Error="error",e))(Up||{});const Pce=ee({payload:Nt(ee({header:ee({id:_})}))}),Z0="heartbeat",kce="session_expired",J0=new Map,io=new Map,IR=e=>new Promise(t=>{const s=new Map;e.onOpen(()=>e.send('{"ver":  "27.*.*", "fmt": "json-patches-structured", "heartbeat": "2s"}')),e.onMessage(n=>{const r=p5.parse(n);if(tle.decode(r).isRight())t({request:(i,l)=>{e.send(JSON.stringify({payload:i})),i.forEach(c=>{const d=c.header.service;io.set(c.header.id,c.header.ver),s.set(c.header.id,u=>{let h;if(u.header.type===Up.Error)h={service:u.header.service,requestId:u.header.id,requestVer:u.header.ver,type:u.header.type,error:u.body.message};else if(u.header.type===Up.Snapshot)h=u.body,Object.assign(h,{service:u.header.service,requestId:u.header.id,requestVer:u.header.ver,type:u.header.type});else{if(u.body.patches===void 0||u.body.patches.length===0)return;const m=J0.get(c.header.id);h=m!==void 0?m:{};try{h=m5(h,u.body.patches,!1,!1).newDocument,Object.assign(h,{service:u.header.service,requestId:u.header.id,requestVer:u.header.ver,type:u.header.type})}catch{const S=g5(u.body.patches,h);Mr(S.stack)}}const p=Nce[d].decode(h);if(p.isRight()){const m=p.value;l&&l(m),J0.set(c.header.id,m)}else Mr(sa.report(p))})})},close:()=>e.close(),heartbeat:i=>s.set(Z0,l=>{const c=Q0.decode(l);c.isRight()&&i!==void 0&&i(c.value)}),sessionEnd:i=>s.set(kce,()=>{i()})});else if(Q0.decode(r).isRight()){const i=s.get(Z0);i!==void 0&&i(r)}else{const i=Pce.decode(r);if(i.isRight())if(i.value.payload.length===1){const l=i.value.payload[0],c=s.get(l.header.id);c!==void 0&&c(l)}else i.value.payload.forEach(l=>{const c=s.get(l.header.id);c!==void 0&&c(l)});else Mr(sa.report(i))}})}),Mce={type:"LiveTrading"},$ce=()=>Object.assign({},oR(Lr().then(e=>{const t=e.serviceGatewayUrlsSchwab.livetrading,s=new WebSocket(t);return IR({send:n=>s.send(n),close:()=>s.close(),onOpen:n=>s.addEventListener("open",n),onMessage:n=>s.addEventListener("message",r=>n(r.data))})})),Mce),jce={type:"PaperMoney"},Bce=()=>Object.assign({},oR(Lr().then(e=>{const t=e.serviceGatewayUrlsSchwab.papermoney,s=new WebSocket(t);return IR({send:n=>s.send(n),close:()=>s.close(),onOpen:n=>s.addEventListener("open",n),onMessage:n=>s.addEventListener("message",r=>n(r.data))})})),jce),Fce="/assets/bell-ZuSJZuyB.wav",Hce="/assets/alertTriggeredBell-5iKoG53r.wav",Uce="/assets/orderRejectedBell-CSWYeR2R.wav",Vce="/assets/tradeFilledBell-D9uYqwNH.wav";function Wce(){document.visibilityState==="visible"&&new Audio(Fce).play()}function Gce(){document.visibilityState==="visible"&&new Audio(Vce).play()}function Yce(){document.visibilityState==="visible"&&new Audio(Hce).play()}function qce(){document.visibilityState==="visible"&&new Audio(Uce).play()}function xR(e,t){return Math.ceil(tw()*(t-e))+e}const Kce=128,zce=43,Xce=()=>{const e=document.createElement("iframe");return e.id="lmsLoginScreen",e.title="Login Screen",e.style.cssText="position:fixed; top:0; left:0; bottom:0; right:0; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; z-index:999999;",e},Qce=(e,t)=>({exchangeCodeForToken:(s,n)=>{Lr().then(r=>{const o=nj();o&&(oj(),fetch(`${r.apiUrl}/oauth2/token?apikey=${r.apiKey}`,{method:"POST",body:Qg.stringify({code:s,code_verifier:o,redirect_uri:window.location.origin+ut.OAUTH,client_id:r.apiKey,grant_type:"authorization_code",access_type:"offline"}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(i=>{i.ok?i.json().then(l=>{n({type:Ep.CAFE,authToken:l.access_token,refreshToken:l.refresh_token})}):n({type:Ep.CAFE,authToken:"",refreshToken:""})}))})},getNewAccessToken:(s,n,r)=>{Lr().then(o=>{fetch(`${o.apiUrl}/oauth2/token?apikey=${o.apiKey}`,{method:"POST",body:Qg.stringify({client_id:o.apiKey,grant_type:"refresh_token",refresh_token:s}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(i=>{i.ok?i.json().then(l=>{n(l.access_token)}):r&&r()})})},redirectToCafe:(s,n)=>{Lr().then(r=>{const o=r.apiKey,i=r.cafeAuthUrl,l=xR(zce,Kce),c=al(l),d=ZT(c).toString(S5.enc.Base64).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");rj(c);const u=Date.now()+1e3*60*30;let h=`response_type=code&client_id=${encodeURIComponent(o)}&code_challenge=${d}&code_challenge_method=S256&exp=${u}&redirect_uri=${encodeURIComponent(window.location.origin+ut.OAUTH)}`;n!==void 0&&(h+=`&cv=${n}`);const p=yp.get("language");if(p){const m=p.toLowerCase();h+=`&lang=${m}`}h+=H0(window.location.pathname,s),window.location.href=`${i}?${h}`})},redirectToLms:(s,n)=>{Lr().then(r=>{const o=s&&s.isGP&&s.isGP==="true"?r.lmsGuestPassAuthUrl:r.lmsAuthUrl,i=s&&s.isGP&&s.isGP==="true"?"/tos-guest-pass-favicon.png":"/tos_logo_schw.png";if(!o){window.location.href=ut.ERROR;return}const l=s&&s.isGP&&s.isGP==="true"?rr.lmsGuestPassApiKey:rr.lmsApiKey,c=Md();let d=`clientID=${encodeURIComponent(l)}&redirectUri=${encodeURIComponent(window.location.origin+ut.OAUTH)}`;r.region&&(d=`${d}&region=${r.region}`),c&&c.toLowerCase()==="light"&&(d=`${d}&theme=${c.toLowerCase()}`),d+=H0(window.location.pathname,s);let u=document.querySelector("link[rel~='icon']");u?u.href=i:(u=document.createElement("link"),u.rel="icon",u.href=i,document.head.appendChild(u));let h=document.querySelector("#lmsLoginScreen");h?h.src=`${o}?${d}`:(h=Xce(),h.src=`${o}?${d}`,document.body.appendChild(h))})},revokeToken:s=>{Lr().then(n=>{fetch(`${n.apiUrl}/oauth2/revoke`,{method:"POST",body:Qg.stringify({token:s,client_id:n.apiKey}),headers:{"Content-Type":"application/x-www-form-urlencoded"}})})}}),Zce=()=>({request:(e,t)=>{const s=sessionStorage.getItem("feedbackEat");Lr().then(n=>{fetch(n.feedbackUrl,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}}).then(r=>{r.ok?t("OK"):t("NOT_OK")}).catch(()=>{t("NOT_OK")})})}}),wR=(e,t)=>s=>{if(s.error!==void 0&&s.error.length>0){const n=s.error.split(": ")[0];return t(n)}return e({token:s.token,userId:s.userId,userCode:s.userCode,userSegment:s.userSegment,userCdi:s.userCdi,userCdDomainId:s.userCdi,userDomain:s.userDomain,schwabAccountMigrationValue:s.schwabAccountMigrationValue,permissions:s.permissions,quotePermissions:DR(s.quotePermissions)})},OR=(e,t,s,n,r)=>{e([{header:{service:te.LOGIN,id:"login",ver:0},params:{domain:"TOS",platform:"PROD",token:t,accessToken:s,tag:"TOSWeb"}}],wR(n,r))},Jce=(e,t,s,n,r,o)=>{e([{header:{service:te.LOGIN_SCHWAB,id:"login/schwab",ver:0},params:{clientId:s,tag:"TOSWeb",redirectUri:n,authCode:t}}],i=>{var l;if(i.error!==void 0&&i.error.length>0){const c=i.error.split(": ")[0];return o(c)}r({type:Ep.LMS,token:i.token,userId:i.userId,userCdi:i.userCdi,userCode:i.userCode,userSegment:i.userSegment,userDomain:i.userDomain,schwabAccountMigrationValue:i.schwabAccountMigrationValue,permissions:i.permissions,quotePermissions:DR(i.quotePermissions),refreshToken:(l=i.accessTokenInfo)==null?void 0:l.refreshToken})})},ede=e=>(t,s,n)=>OR(e,"",t,s,n),tde=e=>(t,s,n,r,o)=>Jce(e,t,s,n,r,o),RR=e=>(t,s,n)=>OR(e,t,"",s,n),sde=e=>(t,s,n,r)=>{e([{header:{service:te.LOGIN,id:"login",ver:0},params:{domain:"TOS",platform:"PROD",tag:"TOSWeb",token:"",accessToken:"",login:t,password:s}}],wR(n,r))},DR=e=>{const t=[];return e!==void 0&&e.forEach(s=>{if(s.name==="Level I"){if(s.children===void 0)return;s.children.forEach(n=>{const r=n.children??[];t.push({...n,children:r})})}}),t},LR=e=>{throw new Error("Illegal value: "+e)},nde=({liveTrading:e,paperMoney:t})=>{let s;return{connect:n=>{switch(n){case gt.PaperMoney:s=t();break;case gt.LiveTrading:s=e();break;default:LR(n)}},request:(n,r)=>s==null?void 0:s.request(n,r),close:()=>s.close(),heartbeat:n=>s.heartbeat(n),sessionEnd:n=>s.sessionEnd(n)}};var Je=(e=>(e.Filled="FILLED",e.Rejected="REJECTED",e.Cancelled="CANCELED",e.Working="WORKING",e.Expired="EXPIRED",e.WaitForTrigger="WAIT TRG",e.WaitStop="WAIT STOP",e.WaitCond="WAIT COND",e.WaitReview="WAIT REV",e.None="NONE",e))(Je||{});const _R=["WORKING","WAIT COND","WAIT REV","WAIT STOP"];var Hd=(e=>(e.REAL_TIME="Realtime",e.DELAYED="Delayed",e.PARTIALLY_DELAYED="Partially delayed",e))(Hd||{}),tl=(e=>(e.Disconnected="Disconnected",e.Connecting="Connecting",e.LoggedIn="LoggedIn",e.Retry="Retry",e))(tl||{});const rde={status:"Disconnected",privacyModeEnabled:!1},ode=(e=rde,t)=>{switch(t.type){case f.LogInWithoutCafe:case f.LogIn:case f.LogInLMS:return{status:"Connecting",privacyModeEnabled:n0()};case f.LogInFailure:{const{errorReason:s,loginFailurePoint:n}=t,r=s!==void 0?`${n} ${s}`:n;return Ye({category:Ve.Authentication,action:Le.LogInFailure,label:r}),{...e,status:"Retry",errorReason:t.errorReason}}case f.Connected:return{...e,status:"LoggedIn",tradingSystem:t.tradingSystem,username:t.username,userCode:t.userCode,userSegment:t.userSegment,userCdDomainId:t.userCdDomainId,userDomain:t.userDomain,schwabAccountMigrationValue:t.schwabAccountMigrationValue,permissions:t.permissions,privacyModeEnabled:n0()};case f.Reconnect:return{...e,status:"Connecting",errorReason:void 0};case f.SetPrivacyMode:return gw(t.privacyModeEnabled),{...e,privacyModeEnabled:t.privacyModeEnabled};case f.SetTradingSystem:return{...e,tradingSystem:t.tradingSystem};default:return e}},ka=e=>e.userSettings,ade=x(ka,e=>e.permissions);x(ka,e=>e.userCdDomainId);const ide=x(ka,e=>e.username),xl=x(ka,e=>e.userSegment),Mo=x(ka,e=>e.tradingSystem),_c=x(ka,e=>e.status===tl.LoggedIn),Ma=x(ka,e=>e.privacyModeEnabled),NR=x(ka,e=>e.userCode);x(_c,Ma,NR,(e,t,s)=>e&&s!==void 0?t?C6:s:"Settings");const Pu=e=>e.currentTime;var rn=(e=>(e.Open="Open",e.Close="Close",e.Unknown="Unknown",e))(rn||{});const lde=e=>e.exchangeStatus.selectorState,my=e=>lde(e).marketTimes,gy=x(Pu,my,(e,t)=>t===void 0?rn.Unknown:e<t.open?rn.Open:e<t.close?rn.Close:rn.Unknown),cde=x(my,Pu,gy,(e,t,s)=>{if(e!==void 0)switch(s){case rn.Open:return e.open.getTime()-t.getTime();case rn.Close:return e.close.getTime()-t.getTime();case rn.Unknown:return}}),dde=x(my,Pu,gy,(e,t,s)=>{if(e!==void 0)switch(s){case rn.Open:return;case rn.Close:return t.getTime()-e.open.getTime();case rn.Unknown:return t.getTime()-e.close.getTime()}}),ude={marketTimes:void 0},hde=(e=ude,t)=>{switch(t.type){case f.ExchangeStatusReceived:return{marketTimes:t.marketTimes};default:return e}},pde=x(e=>e.quotePermissions,e=>e.every(n=>n.isAllowed)?Hd.REAL_TIME:e.every(n=>!n.isAllowed)?Hd.DELAYED:Hd.PARTIALLY_DELAYED),mde=x(So,Os,(e,t)=>{var r,o;if(t===null)return!1;const s=(o=(r=e.get(t))==null?void 0:r[0])==null?void 0:o.orders;if(!s)return!1;let n=!1;return s.forEach(({legs:i})=>{if(n=i.some(l=>[k.STOCK,k.ETF,k.FUND].includes(l.instrumentType)),n)return!0}),n}),gde=x(Os,Al,e=>e.quotePermissions,Mo,mde,(e,t,s,n,r)=>{if(n===gt.PaperMoney||!r)return!0;const o=s.find(c=>c.name==="Stock");if(!(o!=null&&o.isAllowed))return!1;const i=t==null?void 0:t.sourceType,l=o.children.find(c=>c.name===i);return!!(l!=null&&l.isAllowed)}),Sde=(e,t,s,n)=>r=>o=>i=>{switch(o(i),i.type){case f.MuteAllNotifications:{const l=i.isMuteAllChecked;Q7(l);break}case f.ToggleMarketBell:{const l=i.isMarketBellEnabled;K7(l);break}case f.ToggleAlertTriggeredBell:{const l=i.isAlertTriggeredBellEnabled;X7(l);break}case f.ToggleOrderRejectedBell:{const l=i.isOrderRejectedBellEnabled;ej(l);break}case f.ToggleTradeFilledBell:{const l=i.isTradeFilledBellEnabled;sj(l);break}case f.Tick:{const{isMuteAllChecked:l,isMarketBellEnabled:c}=r.getState().audioNotifications,d=dde(r.getState());c&&!l&&d!==void 0&&d<1e3&&e();break}case f.OrderEventsReceived:{const l=i==null?void 0:i.events.length,c=i==null?void 0:i.events[l-1],{isMuteAllChecked:d,isOrderRejectedBellEnabled:u,isTradeFilledBellEnabled:h}=r.getState().audioNotifications,p=c!==void 0&&c.eventTime>mw();!d&&!i.isSnapShot&&p&&(u&&c.status===Je.Rejected&&t(),h&&c.status===Je.Filled&&s());break}case f.AlertNotificationReceived:{const{isMuteAllChecked:l,isAlertTriggeredBellEnabled:c}=r.getState().audioNotifications;c&&!l&&n();break}}},fde=e=>t=>s=>(setTimeout(()=>t.dispatch({type:f.Tick,time:e()}),0),setInterval(()=>{t.dispatch({type:f.Tick,time:e()})},1e3),s);function Gf(e){const t=new Date(e.year,e.month-1,e.day+1);return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}const Tde=e=>(t,s)=>{e([{header:{service:te.MARKET_HOURS,id:"market_hours-"+Date.now(),ver:0},params:{markets:["OPTION"],date:t}}],n=>{var o,i,l,c,d,u;const r=(c=(l=(i=(o=n==null?void 0:n.schwabMarketHours)==null?void 0:o.OPTION)==null?void 0:i.EQO)==null?void 0:l.sessionHours)==null?void 0:c.regularMarket;r&&((d=r[0])!=null&&d.start)&&((u=r[0])!=null&&u.end)?s({open:new Date(r[0].start),close:new Date(r[0].end)}):s(void 0)})},yde=e=>{const{day:t,month:s,year:n}=e,r=String(n).padStart(4,"20"),o=String(s).padStart(2,"0"),i=String(t).padStart(2,"0");return`${r}-${o}-${i}`},PR=e=>e.exchangeStatus.middlewareState,Yf=e=>PR(e).whenToFetchMarketTimes,Cde=(e,t)=>e==="today"?t:e,bde=e=>({year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate()}),Ede=e=>Cde(PR(e).dayToFetchMarketTimesFor,bde(Pu(e))),Ade=e=>Yf(e.getState())==="immediately",vde=(e,t)=>Yf(e.getState())!=="don't worry about it"&&t.time>=Yf(e.getState()),Ide=({requestMarketHours:e})=>t=>s=>n=>{s(n);let r=0;const o=500,i=_c(t.getState());if(n.type===f.Tick&&i&&(Ade(t)||vde(t,n))){t.dispatch({type:f.ExchangeStatusPending});const l=Ede(t.getState()),c=h=>new Promise(p=>{e(yde(h),m=>{p(m)})}),d=h=>c(h),u=(h,p)=>{p.then(m=>{m!==void 0?t.dispatch({type:f.ExchangeStatusReceived,marketTimes:m,day:h}):r<10&&setTimeout(()=>{r+=1,u(Gf(h),d(Gf(h)))},o*Math.pow(2,r))}).catch(()=>Mr("Error getting exchange status"))};u(l,d(l))}},xde={whenToFetchMarketTimes:"immediately",dayToFetchMarketTimesFor:"today"},wde=(e=xde,t)=>{switch(t.type){case f.ExchangeStatusPending:return{dayToFetchMarketTimesFor:e.dayToFetchMarketTimesFor,whenToFetchMarketTimes:"don't worry about it"};case f.ExchangeStatusReceived:return{whenToFetchMarketTimes:t.marketTimes.close,dayToFetchMarketTimesFor:Gf(t.day)};default:return e}};var Io=(e=>(e.Empty="Empty",e.Pending="Pending",e.OK="OK",e.BadResponse="BadResponse",e))(Io||{});const Ode=e=>t=>s=>n=>{if(n.type===f.SendFeedback){const r=ym(n,"type"),o=Rde(t);t.dispatch({type:f.SetFeedbackSendingStatus,status:Io.Pending});const i=sessionStorage.getItem("feedbackEatExpireTime");Dde(i)?t.dispatch({type:f.GetEatForFeedback,callback:l=>{const c=Date.now()+l.accessExpiresIn*1e3;sessionStorage.setItem("feedbackEatExpireTime",c.toString()),sessionStorage.setItem("feedbackEat",l.accessToken),sessionStorage.setItem("refreshToken",l.refreshToken),e(r,o)},errorCallback:()=>{t.dispatch({type:f.SetFeedbackSendingStatus,status:Io.BadResponse})}}):e(r,o)}return s(n)},Rde=e=>t=>{e.dispatch({type:f.SetFeedbackSendingStatus,status:t==="OK"?Io.OK:Io.BadResponse}),Ye({category:Ve.Drawers,action:Le.SubmitFeedback,label:t})},Dde=e=>e===null?!0:(Number(e)-Date.now())/(1e3*60)<=1;var ps=(e=>(e.TRADE_TICKET="TRADE_TICKET",e.FEEDBACK_WINDOW="FEEDBACK_WINDOW",e.USER_MENU_WINDOW="USER_MENU_WINDOW",e.SUPPORT_WINDOW="SUPPORT_WINDOW",e.NOTIFICATION_WINDOW="NOTIFICATION_WINDOW",e.ORDER_CONFIRMATION="ORDER_CONFIRMATION",e.SCHWAB_WINDOW="SCHWAB_WINDOW",e.QUOTE_MONITOR_MENU="QUOTE_MONITOR_MENU",e))(ps||{});const eE={focusedId:void 0},kR=Na({name:"focus",initialState:eE,reducers:{unFocusAC:()=>eE,setFocusAC:{reducer:(e,t)=>{e.focusedId=t.payload.focusedId},prepare:e=>({payload:{focusedId:e}})}}}),{unFocusAC:Lde,setFocusAC:Us}=kR.actions,_de=()=>e=>t=>s=>{switch(s.type){case f.TriggerFocus:{const n=s.ref;if(n==null)return;n.current!==void 0&&n.current!==null&&(n.current.focus(),e.dispatch(Lde()));break}}t(s)},Nde=()=>e=>t=>s=>{switch(s.type){case f.DraftTradeUnchecked:e.dispatch({type:f.HideOrderConfirmation,symbol:s.symbol});break}t(s)},Pde=()=>()=>e=>t=>{t.type===f.ColumnSortClicked&&t.table===ko.Position&&O7(t.columnSort),e(t)},MR=e=>({type:f.OptionChainQuotesReceived,quotes:e}),kde=e=>(D7(`${e}`),{type:f.SetStrike,strike:e}),Mde=()=>({type:f.LoadStrike}),$de=(e,t)=>({type:f.OptionChainFractionalTypeReceived,symbol:e,fractionalType:t}),jde=e=>({type:f.CenteredOnFieldChange,centeredOnField:e}),qf=(e,t)=>({type:f.OptionChainCenteredOn,centeredOnField:e,centeredOnFieldValue:t}),Bde=e=>({type:f.OptionChainCenteredOnReceived,centeredOn:e}),Fde=(e,t)=>({type:f.RequestOptionSeriesQuotes,symbol:e,requestId:t}),Hde=e=>({type:f.UnsubscribeFromOptionSeriesQuotes,requestId:e}),Ude=e=>({type:f.OptionChainExpirationClicked,expirationId:e}),Vde=()=>({type:f.LogOptionChainGammaExposure}),Wde=e=>({type:f.CenteredOnOptionValueSet,centeredOnOptionValue:e}),Kf=(e,t)=>({type:f.NearStrikeSetLockedState,targetState:e,centeredOnOptionValue:t}),$R=(e,t)=>({type:f.OptionSeriesQuotesReceived,symbol:e,optionSeriesQuotes:t}),Gde=(e,t)=>({type:f.SpreadPairMoreClicked,minStrike:e,maxStrike:t}),Yde=(e,t)=>({type:f.GetStrikeChangeQuotes,minStrike:e,maxStrike:t}),qde=e=>({type:f.OptionChainTableColumnWidthChanged,columnWidthInfo:e}),Kde=e=>({type:f.UpdateOptionChainColumnsSet,columns:e}),zde=()=>e=>t=>s=>{switch(s.type){case f.UpdateColumns:{const{columns:n,label:r,table:o}=s,i={position:x7,trade:B7,watchlist:_7,optionChain:L7,futuresChain:$7,scans:k7};r&&Ye({category:Ve.ColumnCustomization,action:vc(o),label:r}),o===ko.OptionChain?(i[o](n),e.dispatch(Kde(n))):i[o](n);break}}t(s)};var bt=(e=>(e.Profile="Profile",e.Support="Support",e.Feedback="Feedback",e.Notification="Notification",e.Menu="Menu",e.QuoteExchange="QuoteExchange",e.None="None",e.Schwab="Schwab",e.QuoteMonitorMenu="QuoteMonitorMenu",e))(bt||{});const Xde=e=>({type:f.ShowDrawerWindow,windowToShow:e}),En=()=>({type:f.HideDrawerWindow}),Qde=()=>({type:f.ShowTransactions}),jR=()=>({type:f.HideTransactions}),BR=(e,t,s,n,r)=>({type:f.GetTransactions,account:e,startTime:t,endTime:s,transactionTypes:n,symbol:r}),Zde=e=>({type:f.TransactionsError,errorMessage:e}),Jde=e=>({type:f.TransactionsAccountSelected,account:e}),eue=e=>({type:f.SymbolSelected,symbol:e}),yo=(e,t,s)=>({type:f.ChartReceived,chartId:e,chartData:s,symbol:t}),tue=(e,t)=>({type:f.SetPriceLevelPreviewValue,chartId:e,payload:t}),sue=(e,t)=>({type:f.AddStudy,chartId:e,name:t}),nue=(e,t)=>({type:f.AddDynamicStudy,chartId:e,name:t}),rue=(e,t)=>({type:f.ChartRangeSelected,chartId:e,range:t}),oue=(e,t)=>({type:f.ChartAggregationSelected,chartId:e,aggregation:t}),aue=(e,t)=>({type:f.ChangeCrossingType,chartId:e,studyId:t}),FR=(e,t,s,n)=>({type:f.SetStudyParameters,chartId:e,id:t,parameters:s,plotParameters:n}),iue=(e,t)=>({type:f.SetGainAndLossChartDateTime,chartId:e,dateTime:t}),lue=(e,t)=>({type:f.SetPriceChartHoveredDate,chartId:e,date:t}),cue=(e,t)=>({type:f.AddChartExpansion,chartId:e,count:t}),due=(e,t)=>({type:f.RemoveChartExpansion,chartId:e,count:t}),uue=(e,t)=>({type:f.SetShowExtendedHours,chartId:e,extendedHours:t}),hue=(e,t)=>({type:f.SetShowAlerts,chartId:e,showAlerts:t}),pue=(e,t)=>({type:f.SetShowOptionPositions,chartId:e,showOptionPositions:t}),mue=(e,t)=>({type:f.SetShowWorkingOrders,chartId:e,showWorkingOrders:t}),gue=(e,t)=>({type:f.SetShowTradePrice,chartId:e,showTradePrice:t}),Sue=(e,t)=>({type:f.SetShowChartHighLow,chartId:e,showChartHighLow:t}),HR=(e,t,s)=>({type:f.SetShowEarningsPreview,chartId:e,showEarningsPreview:t,showEarningsIcon:s}),fue=(e,t)=>({type:f.SetShowEarningsIcon,chartId:e,showEarningsIcon:t}),Tue=(e,t)=>({type:f.SetShowDividendsIcon,chartId:e,showDividendsIcon:t}),yue=(e,t)=>({type:f.SetFitStudiesInYAxis,chartId:e,fitStudiesInYAxis:t}),td=(e,t)=>({type:f.SaveStudies,chartId:e,studies:t}),UR=(e,t)=>({type:f.DeleteStudy,chartId:e,id:t}),Cue=(e,t)=>({type:f.ChartSymbolsSelected,firstChartSymbol:e,multiChartIds:t}),ui=(e,t)=>({type:f.SaveChartSymbol,chartId:e,symbol:t}),bue=(e,t)=>({type:f.SetSparkChart,chartId:e,symbol:t}),Eue=e=>({type:f.UnsubscribeFromSparkChart,chartId:e}),Aue=e=>({type:f.SetNumCharts,numCharts:e}),vue=e=>({type:f.AddCharts,charts:e}),Iue=e=>({type:f.RemoveCharts,chartIds:e}),Ia=(e,t)=>({type:f.ChangeChartSymbol,chartId:e,symbol:t}),Jo=e=>({type:f.ChangeChartSelectedSymbol,symbol:e}),xue=()=>e=>t=>s=>{var n;switch(s.type){case f.OpenSection:{switch(e.dispatch(En()),s.section){case ge.Positions:{e.dispatch(jR());break}case ge.Trade:{const r=s.symbol??Bp(e.getState());e.dispatch(eue(r)),hs(e.getState()).size===1&&e.dispatch(ui(Ps(1),r));break}case ge.Charts:{const r=s.symbol??Bp(e.getState()),o=hs(e.getState()),i=o.keySeq().toArray(),l=Ps(1);let c=((n=o.get(l))==null?void 0:n.symbol)??null;c===null&&(c=r,e.dispatch(ui(l,c))),e.dispatch(Cue(c,i));break}case ge.Transactions:{e.dispatch(Qde());break}}break}case f.ToggleSidebar:{const r=!e.getState().layout.isSidebarOpened;r0(r),Ye({category:Ve.Layout,action:r?Le.LeftSidebarExpanded:Le.LeftSidebarCollapsed});break}case f.AccountSummaryDividerPressed:{const r=!e.getState().layout.isAccountSummaryDividerPressed;o0(r),Ye({category:Ve.Layout,action:r?Le.AccountSummaryExpanded:Le.AccountSummaryCollapsed});break}case f.TogglePortfolio:{const r=!e.getState().layout.isPortfolioOpened;E7(r),Ye({category:Ve.Expansion,action:Le.Right_Rail,label:r?ks.Expand:ks.Collapse});break}case f.ResetLayout:{r0(!0),o0(!0);break}}t(s)},wue=()=>e=>t=>s=>{s.type===f.SetActiveTraderInputQty&&hj(e.getState().activeTrader.setIn([s.tradingSystem,s.symbol],s.inputQuantity)),t(s)},Oue=()=>e=>(us.listen((t,s)=>{s==="POP"&&e.dispatch({type:f.LocationPop})}),t=>s=>t(s));class Rue{constructor(){R(this,"restorableStates",[]);R(this,"registerRestorableState",t=>{this.restorableStates.push(t)});R(this,"restoreStateMiddleware",()=>t=>s=>n=>{const r=t.getState();this.restorableStates.forEach(o=>{const i=JSON.stringify(o.actionSelector(n));JSON.stringify(o.stateSelector(r))!==i&&i!==void 0&&o.dataSaver(o.actionSelector(n));const c=d=>{const u=o.stateSelector(r),h=o.actionSelector(d);return u!==h?s(d):d};o.dataRestore(n,c)}),s(n)})}}const VR=new Rue,Due=VR.restoreStateMiddleware;class Lue{constructor(t,s){R(this,"measurement",{});R(this,"id");R(this,"startId");R(this,"endId");R(this,"options",{logThrottleMs:2500,keysToLog:["average","maxTime","minTime"],shouldLog:!0});R(this,"_logThrottle",xa(console.log,this.options.logThrottleMs));this.id=t??"RANDOM_ID",this.startId=`${this.id}_start`,this.endId=`${this.id}_end`,this.options={...this.options,...s}}start(){performance.mark(this.startId)}end(){performance.mark(this.endId),performance.measure(this.id,this.startId,this.endId),this._calculateDataValues(),this.options.shouldLog&&this._logMeasurements()}getAverageTiming(){const{totalTime:t,markCount:s}=this.measurement,n=s&&t?t/s:0;return this._round(n)}get data(){return{...this.measurement,id:this.id,average:this.getAverageTiming()}}_calculateDataValues(){var n,r,o;const t=this.id,s=performance.getEntriesByName(t).slice(-1)[0];if(s){const i=(n=this.measurement)!=null&&n.totalTime?this.measurement.totalTime+s.duration:s.duration,l=(r=this.measurement)!=null&&r.markCount?((o=this.measurement)==null?void 0:o.markCount)+1:1,c=this._round(Math.min(this.measurement.minTime??Number.MAX_VALUE,s.duration)),d=this._round(Math.max(this.measurement.maxTime??-1,s.duration));this.measurement={totalTime:i,markCount:l,minTime:c,maxTime:d}}}_logMeasurements(){this._logThrottle(this._dataToLog)}get _dataToLog(){return ox(this.data,this.options.keysToLog??[])}_round(t){return Math.round((t+Number.EPSILON)*100)/100}}const pS=[],Ki={},_ue=()=>e=>t=>{return performance.mark,e(t);let s;const n=pS.length===0;if(n||pS.includes(t.type)){Ki[t.type]||(Ki[t.type]=new Lue(t.type,{shouldLog:!1}));const o=Ki[t.type];o.start(),s=e(t),o.end()}else s=e(t);return(n||pS.length>0)&&t.type===f.Tick&&Nue(),s};function Nue(){const e=Object.keys(Ki).sort((t,s)=>{const{data:n}=Ki[t],{data:r}=Ki[s];return n.average>r.average?1:-1}).map(t=>{const{data:s}=Ki[t];return`${s.average}ms | ${s.markCount} | ${s.id} - (${s.minTime}ms to ${s.maxTime}ms)`});console.log("average action timings: ",e)}var Pue={};const WR=[Oue(),Due(),Nde(),_de(),zde(),xue(),wue(),Pde()];Pue.PERF_MIDDLEWARE&&WR.push(_ue);const kue=e=>({type:f.HeartbeatReceived,time:e}),tE=()=>({type:f.ReconnectAttempt}),Mue=()=>({type:f.ReconnectGiveUp}),$ue=(e,t,s,n)=>r=>o=>i=>{o(i);const l=r.getState();switch(i.type){case f.Connected:{e(()=>{r.dispatch(kue(new Date))});break}case f.Tick:{!l.heartbeat.connectionStatus&&!l.heartbeat.isReconnecting&&!l.heartbeat.hasGivenUp&&r.dispatch(tE());break}case f.ReconnectAttempt:{l.heartbeat.connectionStatus||(l.heartbeat.isReconnecting&&l.heartbeat.attemptNumber<=3?(jue(t,s,n,r.dispatch),setTimeout(()=>r.dispatch(tE()),xR(10,20)*1e3)):r.dispatch(Mue()));break}}},jue=(e,t,s,n)=>{const r=sessionStorage.getItem("token"),o=ou(sessionStorage.getItem("tradingSystem"));r!==null&&r!==""&&(e(),t(o),s(r,async i=>{var l;i.token!==void 0&&(sessionStorage.setItem("token",i.token),await Ln.identify(f1(),_w(i)).catch(yr),n(m1(o,(l=i.userId)==null?void 0:l.toString(),i.userCode,i.userSegment,i.userCdDomainId,i.userDomain,i.schwabAccountMigrationValue)))},yr))},Bue=e=>t=>{e([{header:{service:te.ACCOUNTS,id:"accounts",ver:0},params:{}}],s=>{t(s.items.map(n=>({code:n.code,description:n.description,tradeable:n.tradeable,cdi:n.cdi})))})},_t=window.devicePixelRatio,Sy=oe.BRIGHT_NAVY_BLUE,GR=oe.LIGHT_DENIM,sE=oe.FRENCH_SKY_BLUE,Ca=wt.WHITE,hi=wt.BLACK,YR=2,Fue=300,Hue=3,Uue=150,nE=1.6,rE=1,oE=.25,Vue=.75,zf=.25,Wue=16*_t,aE=14*_t,iE=100*_t,Gue=44*_t,Yue=28*_t,Xf=16*_t,que=44*_t,fe={pointer:{font:`${13*_t}px TDASans, sans-serif`,lineColor:"lightgrey",pillColor:"green",pillTextColor:Ca,pillPadding:10*_t,xLabelHeight:20*_t,xLabelStartY:6*_t,labelYAreaSafariHeight:12*_t,labelYAreaDefaultHeight:14*_t},chartInfo:{font:"12px TDASans, sans-serif",textColor:hi,backgroundColor:"rgba(255, 255, 255, 0.5)"},chart:{font:`${12*_t}px TDASans, sans-serif`,sellColor:"red",buyColor:"green",gridColor:"lightgrey",axisLabelTextColor:"grey",volumeColor:"rgba(255, 255, 255, 0.3)"},optionPill:{font:`${12*_t}px TDASans, sans-serif`,pillTextColor:"grey",sellColor:"red",buyColor:"green",pillBackColor:hi},xAxisLabelFormat:"h:mmA",xAxisHeight:24*_t,xAxisTickWidth:170*_t,yAxisTickHeight:80*_t,ABBREVIATED_CHART_WIDTH:400*_t,dashSize:2*_t,drawPriceXAxisOffset:6*_t,drawLowerXAxisOffset:4*_t,DPR:_t,bubblePrice:{font:`${10*_t}px TDASans, sans-serif`,lineWidth:30*_t,circleRadius:2*_t,textMargin:40*_t},dynamicContent:{padding:12*_t,leading:8*_t,textHeight:8*_t,iconWidth:16*_t},hoverTooltip:{padding:8*_t,leading:8*_t,textHeight:8*_t,iconWidth:16*_t,paddingFromIcon:_t,paddingStartY:4*_t}},pt={top:0,left:0,right:16*_t,bottom:fe.xAxisHeight},fy="-drawing",Ty="-alert",wr="-working",yy="-earnings",Cy="-dividends",by="-historicalEarnings",Ey="-historicalDividends",Ka="-close",Qm="-study",Do=3*_t,Kue=5*_t,zue=4*_t,Zm=_t,qR=2*_t,Xue=2,Que=[ne.LIMIT,ne.LOC,ne.STOP,ne.TRAILSTOP],Cd=fe.DPR,Zue=24*Cd,Ay=30,KR=360,kr={top:0,left:0,right:0,bottom:Zue},Qf={pointer:{font:`${13*Cd}px TDASans, sans-serif`,lineColor:"lightgrey",pillColor:"green",pillTextColor:"white"},chartInfo:{font:"12px TDASans, sans-serif",textColor:"black",backgroundColor:"rgba(255, 255, 255, 0.5)"},chart:{font:`${12*Cd}px TDASans, sans-serif`,sellColor:"red",buyColor:"green",sellStrokeColor:"red",buyStrokeColor:"green",chartLineColor:"white",gridColor:"lightgrey",axisLabelTextColor:"grey"},optionPill:{font:`${12*Cd}px TDASans, sans-serif`,pillTextColor:"grey",sellColor:"red",buyColor:"green",pillBackColor:"black"},dashSize:2*Cd,xAxisLabelFormat:"h:mmA"},Jue=(e,t)=>{const s=e.find(d=>d!==null)??0,n=t.find(d=>d!==null)??0,r=t.map(d=>d===null?null:(d-n)/Math.abs(n)),o=r.map(d=>d===null?null:s*(1+d)),i={values:t,plotName:Ji.COMPARISON},l={values:o,plotName:Ji.COMPARISON_PERCENT},c={values:r,plotName:Ji.RAW_PERCENT};return[i,l,c]},ehe=(e,t)=>{let s=Math.floor((e<=0?0:e-1)/t);return s*t+t<e&&(s+=1),s},the=(e,t,s,n)=>n===s?0:(e-t)/(s-n),vy=is(the),lE=(e,t)=>vy(Yl(t),Yl(e),Ud(t),Ud(e)),Ud=e=>(e==null?void 0:e.price)??0,Yl=e=>(e==null?void 0:e.gain)??0,she=(e,t,s,n,r,o)=>{const i=o?(o-Ud(n[0]))/s:e,l=n.length,c=ehe(i,t),d=c<l?c:l-1,u=Ud(n[d]),h=s*i+Ud(n[0]),p=d===n.length-1?d:d+1,m=d===0?d:d-1,g=u<h?p:m;if(d===g)return{price:h,profitToday:Yl(n[d]),profitExpiration:Yl(r[d])};const S=lE(r[d],r[g]),y=lE(n[d],n[g])*(h-u)+Yl(n[d]),b=S*(h-u)+Yl(r[d]);return{price:h,profitToday:y,profitExpiration:b}},nhe=(e,t)=>e&&t-Ay<KR,Zf=(e,t)=>t===0||isNaN(t)?e:Math.round(e/t)*t,cu=(e,t,s)=>{if(t===0)return s?gr(e):e.toString();if(isNaN(t))return e.toString();const n=Qo(t),r=Number.parseFloat(e.toFixed(n));return s?gr(r):Lx(e,n)},rhe=(e,t)=>e>=t?"sell":"buy",ohe=(e,t)=>{const s=[],n=[],r=e!==null?e.remove(dr).remove(cr):null,o=(r==null?void 0:r.toArray().filter(([,l],c,d)=>{const{name:u,parameters:h}=l,p=u===G.VOLUME_PROFILE,m=(u===me.COMPARISON||u===me.COMPARISON_PERCENT)&&!h.secondarySecurity;return!(t===k.INDEX&&p)&&!(t===k.FOREX&&p)&&!(t===k.FUND&&p)&&!m&&u!==me.PROBABILITY_OF_EXPIRING_CONE}))??[],i=o==null?void 0:o.map(l=>{s.push(l[0]);const c=l[1];let d=c.name;n.push(d),c.name===me.COMPARISON_PERCENT&&(d=me.COMPARISON);const{id:u,parameters:h,plotParameters:p,...m}=c;return{...m,name:d,parameters:X4(h)}});return{ids:s,sgwStudies:i,uiStudyNames:n}},ahe=(e,t,s,n,r,o)=>e.map((i,l)=>{var p;const c=t.get(s[l]);if(c===void 0)return{id:s[l],plots:[]};if(c.name===G.VOLUME_PROFILE)return{id:s[l],plots:[{studyId:s[l],name:L1,values:[],volumeProfiles:r}]};if(c.name===me.COMPARISON_PERCENT){const m=e[l].plots.find(g=>g.plotName===Qb[Ji.COMPARISON]);m&&e[l].plots.push(...Jue(o,m.values))}const d=i.plots.reduce((m,g)=>(m[g.plotName]=g.values,m),{}),h=(((p=$r[c.name])==null?void 0:p.plotNames)??Object.keys(c.plotParameters)).map(m=>{const g=Qb[m];let S=d[m]||d[g]||[];if(!S.length&&c8.includes(c.name)&&Fm(c.parameters)){const y=d8[c.name];S=d[y]??[]}return{values:S.map((y,b)=>({x:jp(n[b]),y})),studyId:s[l],name:m}});return{id:s[l],plots:h}}),ihe=(e,t)=>{const s={isInRange:!0,isAboveVisibleChart:!1},[n,r]=e;return t<Math.ceil(n)&&(s.isInRange=!1),t>Math.floor(r)&&(s.isInRange=!1,s.isAboveVisibleChart=!0),s},lhe=e=>(t,s,n,r,o,i,l,c=0,d)=>{const{sgwStudies:u,ids:h,uiStudyNames:p}=ohe(i,d);e([{header:{service:te.CHART,id:`${t}`,ver:c},params:{symbol:s,timeAggregation:r,studies:u,range:n,extendedHours:o}}],m=>{const g=io.get(m.requestId),{opens:S,closes:T,highs:y,lows:b,timestamps:E,volumes:v}=m.candles;if(g!==m.requestVer)return;const{mappedStudies:D,volumeProfiles:w}=che(m.studies,u,p);if(!i)return;const N=ahe(D,i,h,E,w,T);l({opens:S,closes:T,highs:y,lows:b,timestamps:E,volumes:v,studies:N})})},che=(e=[],t=[],s)=>{const n=[],r=[...e],o=e.filter(l=>l.studyName===me.COMPARISON||l.studyName===me.COMPARISON_PERCENT);return t.forEach((l,c)=>{var g,S;const d=l.name,u=((g=r[c])==null?void 0:g.studyName)??"",h=l.parameters[Xh.SECONDARY_SECURITY],p=(S=r[c])==null?void 0:S.symbol,m=d===me.COMPARISON&&u===me.COMPARISON;if(u!==d||m&&p!==h){const T=d===me.COMPARISON?l.parameters[Xh.SECONDARY_SECURITY]:void 0;r.splice(c,0,{studyName:d,plots:[],symbol:T})}if((s[c]===me.COMPARISON||s[c]===me.COMPARISON_PERCENT)&&d===me.COMPARISON){const T=o.find(y=>y.symbol===l.parameters[Xh.SECONDARY_SECURITY]&&y.plots.length!==0);T&&r.splice(c,1,{...T,studyName:s[c]})}}),{mappedStudies:r.map(l=>{const{studyName:c}=l;if(c===G.VOLUME_PROFILE&&(l!=null&&l.profiles)&&l.profiles[0]){const{bars:d,minPaintingPrice:u,priceStep:h}=l.profiles[0];n.push({bars:d,minPaintingPrice:u,priceStep:h})}return l}),volumeProfiles:n}},dhe=(e,{requestId:t,symbols:s,watchlistId:n,callback:r,fields:o,refreshRate:i})=>{const l=o!==void 0?o:[ze.MARK,ze.MARK_CHANGE,ze.MARK_PERCENT_CHANGE,ze.NET_CHANGE,ze.NET_CHANGE_PERCENT,ze.BID,ze.BID_EXCHANGE,ze.ASK,ze.ASK_EXCHANGE,ze.BID_SIZE,ze.ASK_SIZE,ze.VOLUME,ze.OPEN,ze.HIGH52,ze.LOW52,ze.HIGH,ze.LOW,ze.VWAP,ze.VOLATILITY_INDEX,ze.IMPLIED_VOLATILITY,ze.MARKET_MAKER_MOVE,ze.PUT_CALL_RATIO,ze.PERCENTILE_IV,ze.HISTORICAL_VOLATILITY_30_DAYS,ze.MARKET_CAP,ze.BETA,ze.PE,ze.INITIAL_MARGIN,ze.LAST,ze.LAST_SIZE,ze.LAST_EXCHANGE,ze.RHO,ze.BORROW_STATUS,ze.DELTA,ze.GAMMA,ze.THETA,ze.VEGA,ze.DIV_AMOUNT,ze.EPS,ze.EXD_DIV_DATE,ze.YIELD,ze.FRONT_VOLATILITY,ze.BACK_VOLATILITY,ze.VOLATILITY_DIFFERENCE,ze.CLOSE,ze.INTRINSIC,ze.EXTRINSIC,ze.SHARES,ze.RETURN_ON_CAPITAL,ze.RETURN_ON_RISK,ze.SHORT_SALE_BORROWING_RATE,ze.OPEN_INT],c=s===void 0||s.length===0;n===void 0&&c||e([{header:{service:te.QUOTES,id:t,ver:0},params:{account:"COMBINED ACCOUNT",symbols:s,watchlistId:n,refreshRate:i,fields:l}}],d=>{r(Om(l,d.items))})},sl=e=>t=>{dhe(e,t)};let uhe=0;const hhe=(e,{requestId:t,symbols:s,callback:n,fields:r})=>{const o=r!==void 0?r:[ze.BID,ze.BID_SIZE,ze.BID_EXCHANGE,ze.ASK,ze.ASK_SIZE,ze.ASK_EXCHANGE,ze.LAST,ze.LAST_SIZE,ze.LAST_EXCHANGE,ze.VOLUME];if(!(s===void 0||s.length===0))return e([{header:{service:te.QUOTES_SNAPSHOT,ver:uhe++,id:`${t}-${Qn()}`},params:{symbols:s,fields:o}}],l=>n(Om(o,l.items)))},phe=e=>t=>{hhe(e,t)},Nc=e=>{const t=e.toUpperCase();return t!=="WORKING"&&t.includes("WORKING")},Iy=e=>{const t=e.toUpperCase();return t!=="EXPIRED"&&t.includes("EXPIRED")},xy=e=>{const t=e.toUpperCase();return t!=="CANCELED"&&t.includes("CANCELED")},Eh=e=>{switch(e.toUpperCase()){case"PENDING_ACKNOWLEDGEMENT":case"AWAITING_PARENT_ORDER":case"AWAITING_CONDITION":case"AWAITING_UR_OUT":case"PENDING_ACTIVATION":case"WORKING":case"ACCEPTED":case"QUEUED":case"PENDING":case"PENDING CANCEL":case"PENDING REPLACE":case"PENDING_RECALL":case"SUBMITTING":return Je.Working;case"WAIT TRG":return Je.WaitForTrigger;case"WAIT STOP":return Je.WaitStop;case"WAIT COND":return Je.WaitCond;case"WAIT REV":return Je.WaitReview;case"FILLED":return Je.Filled;case"CANCELED":case"DONE":case"NOT SENT":case"REPLACED":return Je.Cancelled;case"EXPIRED":return Je.Expired;case"REJECTED":return Je.Rejected;default:return Nc(e)?Je.Working:Iy(e)?Je.Expired:xy(e)?Je.Cancelled:Je.None}},mhe=e=>{const t=e.match(/(\+|-)?\d+/g);return t===null?null:Number(t.join(""))},zR=(e,t)=>{if(Nc(t)||Iy(t)||xy(t)){const s=mhe(t);return s===null?e:e.replace(/\d+(,\d+)*/,Math.abs(s).toString())}return e},ghe=e=>(t,s)=>{e([{header:{service:te.ORDER_EVENTS,id:"order_events",ver:0},params:{account:t,types:["WORKING","QUEUED","FILLED","CANCELED","FINAL","EXECUTION"]}}],n=>{const r=new Date;n.orders.filter(c=>Eh(c.status)===Je.Rejected&&c.eventTime>r.getTime()-5e3).forEach(c=>{Ye({category:Ve.Errors,action:Le.OrderEventError,label:c.comment})});const i=new Set(n.orders.filter(c=>c.eventType==="FILLED").map(({orderId:c})=>c)),l=n.orders.filter(c=>c.eventType==="EXECUTION"&&!i.has(c.orderId));s(n.orders.filter(c=>Eh(c.status)!==Je.None&&c.accountCode!==""&&c.eventType!=="EXECUTION").concat(l).map(c=>({eventType:c.eventType,accountCode:c.accountCode??t,compositeSymbol:c.compositeSymbol,orderId:c.orderId,direction:Pr(["BUY","BOT"].includes(c.side),pe.Buy,pe.Sell),quantity:c.quantity,description:zR(c.description,c.status),status:Eh(c.status),sgwStatus:c.status,instrument:{symbol:c.legs[0].symbol,instrumentType:Pr(c.legs[0].instrumentType==="STOCK",k.STOCK,k.OPTION),rootSymbol:c.rootSymbol},eventTime:c.eventTime,id:c.orderId+(c.side??"")+Eh(c.status)+c.eventTime,orderType:c.orderType,comment:c.comment,avgFillPrice:c.avgFillPrice,price:c.price,tif:c.tif,spreadName:Pr(c.spreadName!==void 0,cl(c.spreadName),void 0),legs:c.legs.map(d=>{const u=d.quantity??0;return{...d,quantity:u,direction:Pr(u>=0,pe.Buy,pe.Sell)}}),unionId:c.unionId,groupId:c.groupId,priceType:c.priceType,triggerTime:c.triggerTime,triggerOrderId:c.triggerOrderId,groupMarker:c.groupMarker})),n.type===Up.Snapshot)})},She=e=>(t,s={code:"COMBINED ACCOUNT",description:"",tradeable:!0})=>{e([{header:{service:te.STATEMENT,id:s.code,ver:0},params:{account:s.code}}],n=>{t({cashAvaiForWithdrawal:n.values.CASH_AVAI_FOR_WITHDRAWAL,cashAndSweep:n.values.CASH_AND_SWEEP,netLiquidity:n.values.NET_LIQ,optionBuyingPower:n.values.OPTION_BP,stockBuyingPower:n.values.STOCK_BP,forexBuyingPower:n.values.FOREX_BP,dayTradesLeft:n.values.DT_LEFT,dayTradeBuyingPower:n.values.DTBP})})},fhe=(e,{requestId:t,symbols:s,studies:n,scriptType:r,callback:o})=>{const i=s===void 0||s.length===0,l=n[0].parameters!==void 0&&n[0].parameters.length!==void 0?n[0].parameters.length:"50";i||e([{header:{service:te.STUDY_SUBSCRIBE,id:t,ver:0},params:{symbols:s,account:"COMBINED ACCOUNT",type:r,studies:[{name:n[0].name,plot:n[0].plot,aggregationPeriod:n[0].aggregationPeriod,parameters:{length:l}}]}}],c=>{o(c.values)})},The=e=>t=>{fhe(e,t)};var za=(e=>(e[e.ACCOUNT_POSITIONS=-2]="ACCOUNT_POSITIONS",e[e.WORKING_ORDERS=-3]="WORKING_ORDERS",e))(za||{});const yhe=["Browse Categories","TOP10"];var jn=(e=>(e.ACCOUNT_POSITIONS="ACCOUNT_POSITIONS",e.INDUSTRY="INDUSTRY",e.LOVERS_AND_LOSERS="LOVERS_AND_LOSERS",e.OTHER="OTHER",e.PERSONAL="PERSONAL",e.TOP10="TOP10",e.WORKING_ORDERS="WORKING_ORDERS",e.PUBLIC="PUBLIC",e.ACTIVE_ON_SOCIAL="ACTIVE_ON_SOCIAL",e))(jn||{}),cp=(e=>(e.ALL_ACCOUNT_POSITIONS="All Account Positions",e.WORKING_ORDERS="Working Orders",e.TOP10_ACTIVE_NYSE="Top10 Active NYSE",e))(cp||{});const cE=(e,...t)=>{if(e!==void 0)return e(...t)},du=e=>e.type===Xm.STATIC,Jm=e=>e.id!==za.ACCOUNT_POSITIONS&&e.id!==za.WORKING_ORDERS,Che=e=>e.rootCategory===jn.PERSONAL,bhe=e=>t=>{e([{header:{service:te.WATCHLIST_CATEGORIES,id:"watchlist/categories",ver:0},params:{categories:[jn.ACCOUNT_POSITIONS,jn.LOVERS_AND_LOSERS,jn.PERSONAL,jn.TOP10,jn.WORKING_ORDERS,jn.INDUSTRY,jn.PUBLIC,jn.ACTIVE_ON_SOCIAL]}}],s=>{t(s.categories)})},Ehe=e=>(t,s)=>{e([{header:{service:te.WATCHLIST_SYMBOLS,id:`watchlist/get-${t}`,ver:0},params:{watchlistId:t}}],n=>{s(n.watchlist.symbols)})},Ahe=e=>(t,s,n,r)=>{n?e([{header:{service:te.WATCHLIST_ADD_SYMBOLS,id:`watchlist/add-${Qn()}`,ver:0},params:{watchlistId:t,symbols:[s]}}],o=>{cE(r,o.error)}):e([{header:{service:te.INSTRUMENTS,ver:0,id:`searchForSymbol-${Qn()}`},params:{symbols:[s]}}],o=>{var c;if(o.error!==void 0)return;let i;const l=o.instruments.find(d=>d.symbol===s);l!==void 0?i=l.symbol:i=((c=o.normalizedSymbols)==null?void 0:c[s])??s,i!==void 0&&e([{header:{service:te.WATCHLIST_ADD_SYMBOLS,id:`watchlist/add-${Qn()}`,ver:0},params:{watchlistId:t,symbols:[i]}}],()=>{cE(r)})})},vhe=e=>(t,s)=>{e([{header:{service:te.WATCHLIST_REARRANGE,id:"watchlist/rearrange",ver:0},params:{symbols:s,watchlistId:t}}])},Ihe=e=>(t,s)=>{e([{header:{service:te.WATCHLIST_REMOVE_SYMBOL,id:"watchlist/remove",ver:0},params:{symbols:s,watchlistId:t}}])},xhe=e=>({watchlistName:t,symbols:s,handleSuccessCallback:n,handleErrorCallback:r})=>{e([{header:{service:te.WATCHLIST_CREATE,ver:0,id:`watchlist/create-${Qn()}`},params:{watchlistName:t,symbols:s}}],o=>{if(o.error!==void 0)r(o.error);else{const{watchlist:i}=o;if(i===void 0)return;n({id:i.id,description:i.name,type:Xm.STATIC,rootCategory:jn.PERSONAL})}})},whe=e=>t=>{e([{header:{service:te.WATCHLIST_DELETE,ver:0,id:"watchlist/delete"},params:{watchlistId:t}}])};var Gt=(e=>(e.Active="ACTIVE",e.Canceled="CANCELED",e.Expired="EXPIRED",e.New="NEW",e.Triggered="TRIGGERED",e.Wait_Trg="WAIT_TRG",e))(Gt||{});const Vp=e=>{switch(e){case"ACTIVE":return Gt.Active;case"CANCELED":return Gt.Canceled;case"EXPIRED":return Gt.Expired;case"NEW":return Gt.New;case"TRIGGERED":return Gt.Triggered;case"WAIT_TRG":return Gt.Wait_Trg}},dE=e=>{var i,l;const t=Vp(e.status),{id:s,time:n,closeTime:r,market:o}=e;return((i=o==null?void 0:o.components)==null?void 0:i.length)===1?{id:s,time:n,closeTime:r,status:t,field:o==null?void 0:o.field,operator:o==null?void 0:o.operator,threshold:o==null?void 0:o.threshold,symbol:(l=o==null?void 0:o.components[0])==null?void 0:l.symbol}:void 0},Ohe=(e,t,s)=>{e([{header:{service:te.ALERTS_SUBSCRIBE,id:"alerts_subscribe",ver:0},params:{alertTypes:["CHANGED_ALERT","TRIGGERED_ALERT","EXPIRED_ALERT","MULTIPLE_EXPIRED_ALERTS"]}}],n=>{if("alert"in n){const r=Vp(n.alert.status);if(r===Gt.Triggered){const{alertDescription:o,alert:i}=n;t({id:String(i.id),status:r,alertDescription:o,time:i.time},dE(i))}}else if("changedAlert"in n){const r=Vp(n.changedAlert.status);if(r===Gt.Active||r===Gt.Canceled){const o=dE(n.changedAlert);o!==void 0&&s(o)}}})},uE=e=>(t,s,n)=>{e([{header:{service:te.ALERTS_LOOKUP,id:`${s?s+"_":""}${t}_alerts_lookup`,ver:0},params:{status:t,symbol:s}}],r=>{const o=[];r.alerts.forEach(i=>{var l,c,d,u,h;((l=i.market)==null?void 0:l.components.length)===1&&o.push({id:i.id,time:i.time,closeTime:i.closeTime,status:Vp(i.status),field:(c=i.market)==null?void 0:c.field,operator:(d=i.market)==null?void 0:d.operator,threshold:(u=i.market)==null?void 0:u.threshold,symbol:(h=i.market)==null?void 0:h.components[0].symbol})}),n(o)})},Rhe=e=>(t,s)=>{e([{header:{service:te.ALERTS_CANCEL,id:"cancel_alert",ver:0},params:{alertId:t}}],()=>s(t))},Dhe=e=>({type:f.AlertNotificationReceived,alertNotification:e}),Lhe=e=>({type:f.PriceAlertNotificationReceived,symbol:e}),_he=e=>({type:f.HideNotification,id:e}),XR=(e,t,s,n,r,o)=>({type:f.CreateAlert,alert:e,fractionalType:t,showFractionalPricing:s,isOption:n,successCallback:r,errorCallback:o}),Nhe=(e,t,s,n,r,o)=>({type:f.SuccessAlert,symbol:e,id:t,alert:s,fractionalType:n,showFractionalPricing:r,isOption:o}),Phe=e=>({type:f.ErrorAlert,id:e}),Jf=e=>({type:f.ClearAlertNotification,id:e}),QR=e=>({type:f.GetAlerts,alertStatus:e}),Pc=e=>({type:f.ShowAlertBook,showAlertBook:e}),Vd=e=>({type:f.ActiveAlertsReceived,activeAlerts:e}),ZR=e=>({type:f.TriggeredAlertsReceived,triggeredAlerts:e}),JR=e=>({type:f.CanceledAlertsReceived,canceledAlerts:e}),khe=e=>({type:f.UpdateAlertSymbols,alertPayload:e}),wy=(e,t)=>({type:f.CancelAlert,alertId:e,symbol:t}),Mhe=(e,t,s)=>({type:f.CancelAlertSuccess,symbol:e,notificationMessage:s,alertId:t}),$he=e=>({type:f.CreateAlertReceived,symbol:e}),jhe=e=>t=>s=>n=>{switch(n.type){case f.Connected:Ohe(e,(r,o)=>{if(t.dispatch(Dhe(r)),o!==void 0){const i=eT(o,t.getState().alerts.activeAlerts),l=mS(o,t.getState().alerts.triggeredAlerts);Et.unstable_batchedUpdates(()=>{t.dispatch(Vd(i)),t.dispatch(ZR(l)),t.dispatch(Lhe(o.symbol))})}},r=>{switch(r.status){case Gt.Active:{const o=mS(r,t.getState().alerts.activeAlerts);t.getState().alerts.triggeredAlerts.find(c=>c.id===r.id)!==void 0||Et.unstable_batchedUpdates(()=>{t.dispatch(Vd(o)),t.dispatch($he(r.symbol))});break}case Gt.Canceled:{const o=eT(r,t.getState().alerts.activeAlerts),i=mS(r,t.getState().alerts.canceledAlerts);Et.unstable_batchedUpdates(()=>{t.dispatch(Vd(o)),t.dispatch(JR(i))});break}}});break}s(n)},eT=(e,t)=>t.filter(s=>s.id!==e.id).reverse(),mS=(e,t)=>(t=eT(e,t),t.push(e),t);var eD=(e=>(e.ASK="ASK",e.BID="BID",e.CLOSE="CLOSE",e.LAST="LAST",e.MARK="MARK",e.VOL_INDEX="VOL_INDEX",e.FRONT_VOL="FRONT_VOL",e.BACK_VOL="BACK_VOL",e.VOL_DIFF="VOL_DIFF",e))(eD||{});const Bhe=e=>{switch(e){case"MARK":return V.MARK;case"LAST":return V.LAST;case"ASK":return V.ASK;case"BID":return V.BID;case"VOL_INDEX":return V.VOLATILITY_INDEX;case"FRONT_VOL":return V.FRONT_VOLATILITY;case"BACK_VOL":return V.BACK_VOLATILITY;case"VOL_DIFF":return V.VOLATILITY_DIFFERENCE;case"CLOSE":return V.CLOSE}throw Error("Invalid Quote key "+e)},tT=e=>{if(e!==void 0)switch(e){case"ASK":return __("Ask");case"BID":return __("Bid");case"CLOSE":return __("Close",{namespace:"Alerts"});case"LAST":return __("Last");case"MARK":return __("Mark");case"VOL_INDEX":return __("Vol Index");case"FRONT_VOL":return __("Front Vol");case"BACK_VOL":return __("Back Vol");case"VOL_DIFF":return __("Vol Diff");case"SIZZLE_IDX":return __("Sizzle Idx");default:return __(e)}},Ah=e=>{switch(e){case Gt.Active:return __("Active");case Gt.Triggered:return __("Triggered");case Gt.Canceled:return __("Canceled",{namespace:"Alerts"})}},Oy=e=>e.reduce((t,s)=>s.symbol!==void 0?Xr([...t,s.symbol]):t,[]),Wp=e=>{switch(e){case"GREATER_OR_EQUAL":case"AT OR ABOVE":return{operator:">=",a11yOperator:"Greater than or equal to"};case"LESS_OR_EQUAL":case"AT OR BELOW":return{operator:"<=",a11yOperator:"Less than or equal to"};case"GREATER":case"ABOVE":return{operator:">",a11yOperator:"Greater than"};case"LESS":case"BELOW":return{operator:"<",a11yOperator:"Less than"}}throw Error("Invalid Operator"+e)},Fhe=e=>t=>s=>n=>{switch(n.type){case f.Connected:{uE(e)(Gt.Active,void 0,r=>{t.dispatch(Vd(r))});break}case f.GetAlerts:{uE(e)(n.alertStatus,void 0,r=>{switch(n.alertStatus){case Gt.Active:t.dispatch(Vd(r));break;case Gt.Triggered:t.dispatch(ZR(r));break;case Gt.Canceled:t.dispatch(JR(r))}});break}case f.CancelAlert:{const r=t.getState(),o=r.alerts.activeAlerts.find(i=>i.id===n.alertId);if(o){const{symbol:i,field:l,operator:c,threshold:d}=o,{showFractionalPricing:u,fractionalType:h}=pn(r,i),p=r.instruments.get(i),m=(p==null?void 0:p.rootSymbol)??"",g=`${i} ${tT(l)} ${c!==void 0&&Wp(c).operator} ${Nd(u,d,h,Vs(m,p==null?void 0:p.type))}`;Rhe(e)(n.alertId,S=>{t.dispatch(Mhe(n.symbol,S,g)),setTimeout(()=>t.dispatch(Jf(S.toString())),5e3)})}break}}s(n)};let Hhe=0;const Uhe=e=>(t,s)=>{e([{header:{service:te.DRAWING_SETS,id:`drawing_sets-${Hhe++}`,ver:0},params:{symbol:t}}],n=>{s(n)})},Vhe=e=>(t,s,n,r)=>{e([{header:{service:te.DRAWING_SET_CREATE,id:"drawing_set_create",ver:0},params:{symbol:t,name:s}}],o=>{o.drawingSet?n(o.drawingSet):o.error&&r(o.error)})},Whe=e=>(t,s,n)=>{e([{header:{service:te.DRAWING_SET_DELETE,id:"drawing_set_delete",ver:0},params:{guid:t,symbol:s}}],r=>{n()})},Ghe=e=>(t,s)=>{e([{header:{service:te.DRAWINGS,id:`drawings_${t}`,ver:0},params:{guid:t}}],n=>{const r=n.drawings.map(o=>{switch(o.type){case J.Trendline:return{...o,curve:{...o.curve,color:wn({...o.curve.color,a:o.curve.color.alpha})}};case J.TimeLevel:{const{endValue:i,...l}=o;return{...l,curve:{...o.curve,color:wn({...o.curve.color,a:o.curve.color.alpha})},end:{time:o.start.time,value:i}}}case J.PriceLevel:{const{endTime:i,...l}=o;return{...l,curve:{...o.curve,color:wn({...o.curve.color,a:o.curve.color.alpha})},end:{time:i,value:o.start.value}}}case J.FibonacciExtensions:case J.FibonacciRetracements:{const{trendCurve:i,...l}=o;return{...l,curve:{...i,color:wn({...o.trendCurve.color,a:o.trendCurve.color.alpha})},fibonacciCurves:o.fibonacciCurves.map(c=>({...c,color:wn({...c.color,a:c.color.alpha})}))}}case J.Rectangle:return{...o,start:o.topLeft,end:o.downRight,curve:{color:wn({...o.color,a:o.color.alpha})}};case J.TextNote:{const i=o.font.size;return{...o,textStyle:py.FULL,align:Ace(o.align),font:{size:i!==void 0&&i!==1?i:11,name:o.font.name??vR,style:hy.PLAIN},curve:{color:wn({...o.color,a:o.color.alpha})},start:o.position,end:o.position}}case J.Channel:return{...o,curve:{...o.curve,color:wn({...o.curve.color,a:o.curve.color.alpha})},channelCurves:o.channelCurves.map(i=>({...i,color:wn({...i.color,a:i.color.alpha})}))};default:return{...o,type:J.Unsupported}}});s(t,r)})},Yhe=e=>(t,s,n)=>{if(s!==null){const r={...n,guid:null};e([{header:{service:te.DRAWING_UPDATE,id:"drawing/update",ver:0},params:{drawingSetGuid:t,drawingGuid:s,drawing:r}}],yr)}},qhe=e=>(t,s,n)=>{const r={...s,indicatorId:"Symbol",guid:null};e([{header:{service:te.DRAWING_CREATE,id:"drawing/create",ver:0},params:{drawingSetGuid:t,drawing:r}}],()=>n(t))},Khe=e=>(t,s)=>{e([{header:{service:te.DRAWING_DELETE,ver:0,id:"drawing/delete"},params:{drawingGuid:t.drawingGuid,drawingSetGuid:t.drawingSetGuid}}],()=>s(t))},zhe=e=>e.map(t=>({tradeTime:t.tradeTime?If(new Date(t.tradeTime)):"",execTime:t.execTime?If(new Date(t.execTime)):"",type:t.type??"-",description:t.description??"-",miscFees:ph(t.miscFees),commissionsAndFees:ph(t.commissionsAndFees),amount:ph(t.amount),balance:ph(t.balance)})),Xhe=({itemCount:e,selector:t,headerHeight:s})=>{var o;if(e===0)return 56;let n=(o=document.querySelector(t))==null?void 0:o.clientHeight;n===void 0?n=316:n-=s+50;const r=e*26+55;return r<n?r:n},tD=e=>{if(typeof e!="string"){let s=e;const{startTime:n,endTime:r}=e.range,o=new Date,i=new Date(n),l=new Date(r),c=Qi(o,-1*(nw-1));return Nb(i,c)&&(s={...s,range:{...s.range,startTime:c.toISOString()}}),Nb(l,c)&&(s={...s,range:{...s.range,endTime:c.toISOString()}}),s}const t=e;return Lp.find(s=>s.label===t)??Lp[1]},Gp=(e,t=!1)=>{const s=new Date(new Date(e).setUTCHours(6,0,0,0)).toISOString();if(t){const n=Qi(new Date(s),1);return new Date(n.setMilliseconds(n.getMilliseconds()-1)).toISOString()}return s},hE={MaxDayInRange:{error:"Please select a range less than %S days",apiError:"max date range in days"}},Qhe=e=>{if(e){const[t,s]=e.split(": ");switch(t){case hE.MaxDayInRange.apiError:return __(hE.MaxDayInRange.error).replace("%S",s);default:return e}}return e},gS=e=>Math.abs(et(e.selection.startDate).diff(et(e.selection.endDate),"days"))<=370,Zhe=e=>et(e.selection.startDate).diff(et(e.selection.endDate),"days")>0,sD=e=>({startTime:t,endTime:s,symbol:n,transactionTypes:r,account:o,callback:i,errorCallback:l})=>{e([{header:{service:te.TRANSACTIONS,id:"transactions",ver:0},params:{startTime:t,endTime:s,account:o,symbol:n,transactionTypes:r}}],c=>{if(c.type==="error")l(Qhe(c.error));else{const d=c.transactions.filter(u=>{var h;return!((h=u.description)!=null&&h.startsWith("Futures cash balance"))||u.amount!==0});i(d)}})};var Ta=(e=>(e.EXECUTION_PRICE="EXECUTION_PRICE",e.GAINSKEEPER_COST="GAINSKEEPER_COST",e))(Ta||{});const Jhe=e=>{switch(e){case"EXECUTION_PRICE":return Ta.EXECUTION_PRICE;case"GAINSKEEPER_COST":return Ta.GAINSKEEPER_COST;case"NOT_DEFINED":return}},epe=e=>t=>{e([{header:{service:te.USER_PROPERTIES,id:"user_properties",ver:0},params:{}}],s=>{t({defaultAccountCode:s.defaultAccountCode,stocksOrderDefaultType:s.stocksOrderDefaultType,stocksOrderDefaultQuantity:s.stocksOrderDefaultQuantity,optionsOrderDefaultType:s.optionsOrderDefaultType,optionsOrderDefaultQuantity:s.optionsOrderDefaultQuantity,futuresOrderDefaultType:s.futuresOrderDefaultType,futuresOrderDefaultQuantity:s.futuresOrderDefaultQuantity,futureOptionsOrderDefaultType:s.futureOptionsOrderDefaultType,futureOptionsOrderDefaultQuantity:s.futureOptionsOrderDefaultQuantity,forexOrderDefaultType:s.forexOrderDefaultType,forexOrderDefaultQuantity:s.forexOrderDefaultQuantity,plDisplayMethod:s.plDisplayMethod!==void 0?Jhe(s.plDisplayMethod):void 0})})},tpe=e=>(t,s,n)=>{e([{header:{service:te.USER_PROPERTIES_SET,id:"user_properties/set",ver:0},params:t}],r=>{r.error!==void 0?n&&n():s&&s()})};var Dn=(e=>(e.orderDefaults="orderDefaults",e.audioNotifications="audioNotifications",e.mainSettings="mainSettings",e.none="none",e))(Dn||{});const spe={userProperties:{},userProfileWindow:"none"},nD=Na({name:"userProperties",initialState:spe,reducers:{userPropertiesReceivedAC:{reducer:(e,t)=>{e.userProperties=t.payload.userProperties},prepare:e=>({payload:{userProperties:e}})},setProfileWindowAC:{reducer:(e,t)=>{e.userProfileWindow=t.payload.userProfileWindow},prepare:e=>({payload:{userProfileWindow:e}})}}}),{userPropertiesReceivedAC:npe,setProfileWindowAC:Oa}=nD.actions,rpe=e=>t=>s=>n=>{switch(n.type){case f.Connected:case f.UserPropertiesGet:{epe(e)(r=>{t.dispatch(npe(r)),r.defaultAccountCode!==void 0&&n.type===f.Connected&&t.dispatch({type:f.AccountSelected,account:Rw(t.getState())})});break}case f.UserPropertiesSet:{const r=()=>{n.errorCallback!==void 0&&n.errorCallback()},o=()=>{n.successCallback!==void 0&&n.successCallback(),t.dispatch({type:f.UserPropertiesGet})};tpe(e)(n.userProperties,o,r);break}}s(n)},ope=e=>t=>s=>n=>{n.type===f.GetTransactions&&e({account:n.account,startTime:Gp(n.startTime),endTime:Gp(n.endTime,!0),symbol:n.symbol,transactionTypes:n.transactionTypes,callback:r=>{t.dispatch({type:f.TransactionsReceived,transactions:r})},errorCallback:r=>{t.dispatch(Zde(r))}}),n.type===f.TransactionsAccountSelected&&sessionStorage.setItem("transactionsSelectedAccount",JSON.stringify(n.account)),s(n)},ape=e=>t=>{e([{header:{service:te.DISCLOSURES,id:"disclosures",ver:0},params:{}}],s=>{t(s.disclosures)})},ipe=e=>(t,s,n)=>{e([{header:{service:te.ACCEPT_DISCLOSURES,id:"disclosures/accept",ver:0},params:{disclosureIds:t}}],r=>{r.type==="error"?n():s()})},lpe=e=>({type:f.DisclosuresReceived,disclosures:e}),cpe=e=>({type:f.AcceptDisclosures,disclosureIds:e}),dpe=()=>({type:f.AcceptDisclosuresSuccess}),upe=()=>({type:f.AcceptDisclosuresError}),hpe=e=>t=>s=>n=>{switch(n.type){case f.Connected:{ape(e)(r=>{t.dispatch(lpe(r))});break}case f.AcceptDisclosures:ipe(e)(n.disclosureIds,()=>{t.dispatch(dpe())},()=>{t.dispatch(upe())})}s(n)},ppe=e=>t=>s=>n=>{switch(n.type){case f.Connected:{e(r=>{t.dispatch({type:f.OverallStatementReceived,accountStatement:r})});break}case f.AccountsReceived:{n.accounts.forEach(r=>{e(o=>t.dispatch({type:f.AccountStatementReceived,accountStatement:o,accountCode:r.code}),r)});break}}s(n)},rD=e=>{const t=e.split(" ");return e.indexOf("MKT")!==-1?{orderType:ne.MARKET}:e.indexOf("TRSTPLMT")!==-1?{orderType:ne.TRAILSTOPLIMIT,price:parseFloat(t[0].substring(1))}:e.indexOf("TRSTP")!==-1?{orderType:ne.TRAILSTOP}:e.indexOf("STPLMT")!==-1?{orderType:ne.STOPLIMIT,price:parseFloat(t[0].substring(1)),activationPrice:parseFloat(t[2])}:e.indexOf("LMT")!==-1?{orderType:ne.LIMIT,price:parseFloat(t[0].substring(1))}:e.indexOf("STP")!==-1?{orderType:ne.STOP,price:parseFloat(t[1])}:e.indexOf("MOC")!==-1?{orderType:ne.MOC}:e.indexOf("LOC")!==-1?{orderType:ne.LOC,price:parseFloat(t[0].substring(1))}:{orderType:void 0}},mpe=e=>["WORKING","PENDING","ACCEPTED","QUEUED","WAIT COND","WAIT STOP","WAIT REV","WAIT TRG"].includes(e.toUpperCase())||Nc(e),gpe=e=>t=>s=>n=>{s(n);let r;switch(n.type===f.AccountSelected&&(r=n.account),n.type){case f.AccountSelected:case f.AccountSelectionCleared:e([{header:{service:te.ORDER_EVENTS,ver:0,id:"workingOrders"},params:{account:(r==null?void 0:r.code)??"COMBINED ACCOUNT",types:["WORKING"]}}],o=>t.dispatch({type:f.WorkingOrdersReceived,workingOrders:o.orders.filter(i=>mpe(i.status)).map(i=>{var g,S;const l=Nc(i.status),c=i.legs.map((T,y)=>{const b=T.quantity??0,E=b>=0?pe.Buy:pe.Sell;let v=b;return E===pe.Buy&&b<0?v=Math.abs(b):E===pe.Sell&&b>0&&(v=b*-1),{symbol:T.symbol,rootSymbol:i.rootSymbol,instrumentType:c0(T.instrumentType),quantity:v,id:y,direction:E}}),d=(g=i.triggerConditions)==null?void 0:g.map(T=>({symbol:T.symbol,price:T.price??0,method:p0(T.method),trigger:m0(T.trigger)})),u=(S=i.cancelConditions)==null?void 0:S.map(T=>({symbol:T.symbol,price:T.price??0,method:p0(T.method),trigger:m0(T.trigger)})),{orderType:h,price:p,activationPrice:m}=rD(i.priceType??"");return{orderType:h,isPartial:l,accountCode:i.accountCode??"COMBINED ACCOUNT",quantity:i.quantity,direction:i.quantity>=0?pe.Buy:pe.Sell,side:i.side==="BUY"?pe.Buy:pe.Sell,instrument:{symbol:c[0].symbol,rootSymbol:i.rootSymbol,underlyingSymbol:i.underlyingSymbol,instrumentType:c0(c[0].instrumentType)},legs:c,id:i.orderId,descriptionToShare:zR(i.descriptionToShare,i.status),priceType:i.priceType,price:i.price??p??0,activationPrice:i.stopPrice??m,compositeSymbol:i.compositeSymbol,spreadName:i.spreadName!==void 0?cl(i.spreadName):void 0,tif:i.tif!==void 0?dl(i.tif):void 0,groupMarker:i.groupMarker,triggerTime:i.triggerTime,stopPriceLink:i.stopPriceLink,stopPriceOffset:i.stopPriceOffset,cancelTime:i.cancelTime,triggerConditions:d,cancelConditions:u,_hiddenFromTradeTable:i.triggerOrderId!==0&&i.status==Je.WaitForTrigger}})}));break}},pE=(e,t,s)=>({type:f.StudyParametersAndPlotSettingsReceived,chartId:e,id:t,studyParametersAndPlotSettings:s}),Ry=(e,t,s,n)=>({type:f.GetStudyParametersAndPlotSettings,chartId:e,id:t,studyName:s,callback:n}),Spe=e=>({type:f.StudyParametersAndPlotSettingsError,errorMessage:e}),fpe=e=>e.studyCategories.categories,Tpe=x(fpe,e=>{var t;return(t=e.find(s=>s.name==="Upper Studies"))==null?void 0:t.studies}),oD=(e,t,s)=>{let n=ke();e.has(t)||(n=n.set(t,s)),e.forEach((r,o)=>{const i=t===o?s:r.minSize;n=n.set(o,i)}),Tj(n)},aD=e=>{const t=e.indexOf("("),s=e.indexOf(")");if(t!==-1){const n=e.substring(0,t),r=e.substring(t,s+1),o=e.substring(s+1);return __(`${n}\${dynamicField}${o}`).replace("${dynamicField}",r)}return __(e)},ype=new Intl.NumberFormat(void 0,{maximumFractionDigits:15}),wl=e=>{const{quantity:t,privacyModeEnabled:s,isDraft:n=!1}=e;if(t===void 0||t===0||isNaN(t))return Ht;if(s)return go;let r="";n&&(r=t>0?__("Buy"):__("Sell"),r+=" ");let o="";n||(o=t>0?"+":"");const i=n?Math.abs(t):t,l=ype.format(i);return r+o+l},Dy=e=>e===void 0?"":e.replace(/TRSTPLMT|TRSTP|MARK|BID|ASK|LAST|STP|BASE/g,t=>__(t)),Cpe=e=>{const t=e.match(/\((\+|-)?\d+\)/g);let s;return Nc(e)?s=Je.Working:Iy(e)?s=Je.Expired:xy(e)&&(s=Je.Cancelled),`${t} ${__(s||Je.Working)}`};var Ir=(e=>(e.Time="Time",e.Side="Side",e.Qty="Qty",e.Desc="Desc",e.Price="Price",e.TIF="TIF",e.Mark="Mark",e.Net_Prc="Net Prc",e.Status="Status",e.Symbol="Symbol",e.Pos_Effect="Pos Effect",e.Account="Account",e))(Ir||{});const sT=e=>{switch(e){case"Net Prc":return"Net Price";case"TIF":return"Time in Force";case"Desc":return"Description";case"Qty":return"Quantity";case"Pos Effect":return"Position Effect";default:return e}},Wd=Object.values(Ir),iD=Fe([I(Wd[0]),I(Wd[1]),...Wd.slice(2).map(e=>I(e))]),bpe=Nt(iD),Epe=ee({direction:Fe([I(Pt.ASCENDING),I(Pt.DESCENDING)]),column:iD}),Ape=e=>Epe.is(e),vpe=e=>bpe.is(e)&&e.length===Wd.length&&Wd.every(t=>e.includes(t)),Ipe=["Time","Side","Pos Effect","Qty","Symbol","Desc","Price","TIF","Mark","Net Prc","Status","Account"],mE=(e,t,s,{isMultiLeg:n},r,o,i)=>{var l,c;switch(e){case"Time":return If(new Date(t.eventTime));case"Side":return __(t.direction);case"Qty":return wl({quantity:t.quantity});case"Desc":return(s==null?void 0:s.topLevel)??Ht;case"Price":return t.price!==void 0&&t.orderType!==void 0?`${Vn(r,t.price,o,i)} ${SE(t.orderType)}`:t.priceType===void 0?Ht:t.status===Je.WaitForTrigger?Dy(t.priceType):t.orderType===ne.MARKET||t.orderType===ne.MOC?SE(t.priceType):Ht;case"TIF":return t.tif!==void 0&&t.tif!==""?__(nu(dl(t.tif))):Ht;case"Net Prc":return Vn(r,t.avgFillPrice,o,i);case"Mark":return"";case"Status":{const d=t.sgwStatus&&Nc(t.sgwStatus)?Cpe(t.sgwStatus):__(t.status);return t.comment!==void 0&&t.comment!==""?`${d} - ${aD(t.comment.replace(/(\n)/gm," "))}`:d}case"Symbol":return"";case"Pos Effect":return n?"":((c=(l=t.legs)==null?void 0:l[0])==null?void 0:c.positionEffect)!==void 0?__(t.legs[0].positionEffect):Ht;case"Account":return t.accountCode}},xpe=(e,t,s)=>{switch(e){case"Time":case"Price":case"TIF":case"Status":case"Symbol":case"Net Prc":case"Mark":return"";case"Desc":return s??Ht;case"Side":return __(t.direction);case"Qty":return wl({quantity:t.quantity});case"Pos Effect":return t.positionEffect!==void 0?__(t.positionEffect):Ht}},gE=(e,t)=>{var s,n,r;switch(t){case"Time":return e.eventTime;case"Side":return e.direction;case"Qty":return e.quantity;case"Desc":return e.description;case"Price":return e.price??0;case"TIF":return e.tif??"";case"Mark":return((s=e.markValue)==null?void 0:s.value)??0;case"Net Prc":return e.avgFillPrice??0;case"Status":return e.status;case"Symbol":return e.displaySymbol??e.instrument.rootSymbol;case"Pos Effect":return((r=(n=e.legs)==null?void 0:n[0])==null?void 0:r.positionEffect)??"";case"Account":return e.accountCode}},lD=e=>{switch(e){case Pt.ASCENDING:return(t,s)=>t>s?1:-1;case Pt.DESCENDING:return(t,s)=>t<s?1:-1;case Pt.NONE:return()=>0}},wpe=(e,t,s)=>{const n=lD(s);return e.sort((r,o)=>{const i=gE(r,t),l=gE(o,t);return n(i,l)})},Ly=e=>{switch(e){case Pt.ASCENDING:return Pt.DESCENDING;case Pt.DESCENDING:return Pt.NONE;case Pt.NONE:return Pt.ASCENDING}};var Yp=(e=>(e.HEADER="trades-header",e))(Yp||{});const Ope={column:"Time",direction:Pt.ASCENDING},SS=e=>{switch(e){case"Side":case"Qty":case"Pos Effect":return!0;default:return!1}},fS=e=>{switch(e){case pe.Buy:return"positive";case pe.Sell:return"negative"}},TS=e=>{switch(e){case"Desc":case"Status":case"TIF":case"Account":return"order-book__cell--align-left";case"Side":case"Pos Effect":case"Symbol":case"Price":case"Time":case"Net Prc":case"Mark":case"Qty":return"align-right"}},SE=e=>{switch(e){case ne.LOC:case ne.MOC:return __(e,{namespace:"OrderBook"});default:return __(e)}},nT=36;var uc=(e=>(e.Bid_Size="Bid Size",e.Ask_Size="Ask Size",e.Bid_Exchange="Bid Exchange",e.Ask_Exchange="Ask Exchange",e.Bid="Bid",e.Ask="Ask",e))(uc||{});const rT=["Bid Exchange","Bid Size","Bid"],oT=["Ask","Ask Size","Ask Exchange"],Rpe={Bid:"Bid","Bid Exchange":"EX","Bid Size":"BS",Ask:"Ask","Ask Exchange":"EX","Ask Size":"AS"},uu={Bid:"price","Bid Exchange":"name","Bid Size":"size",Ask:"price","Ask Exchange":"name","Ask Size":"size"},Dpe={column:"Ask",direction:Pt.ASCENDING},Lpe={column:"Bid",direction:Pt.DESCENDING},qp=e=>!0,_pe=(e,t)=>{const s=lD(t.direction);return[...e].sort((n,r)=>{const o=n[uu[t.column]]??0,i=r[uu[t.column]]??0;return s(o,i)})},ea=e=>({type:f.ChangeSelectedSymbol,symbol:e}),Npe=(e,t)=>{const{plotParameters:s,name:n}=e,r=ic(),o=Object.entries(s).reduce((l,[c,d])=>{const u=d.colorOptions.type,h=d.colorOptions.isPreset;if(h&&!d.colorOptions.isEdited){const p=e6[t][u];return{...l,[c]:{...d,colorOptions:{...p,isPreset:h}}}}return l},s),i=Fd(o,n,r,void 0,t);return{...e,plotParameters:i}},Ppe=(e,t)=>{let s=0;return n=>r=>o=>{var i;switch(o.type){case f.SymbolSelected:{const{charts:l}=n.getState(),{symbol:c}=o,d=l.get(zs);if(d!==void 0){const{range:u,aggregations:h,studiesParams:p,extendedHours:m}=d,{type:g}=Vr(n.getState(),c)||{};e(zs,c,u,h[u],m,p,S=>n.dispatch(yo(zs,c,S)),s++,g)}break}case f.ChartSymbolsSelected:{const l=n.getState().selectedSymbol.selectedSymbol;hs(n.getState()).forEach((d,u)=>{const h=da(u,d,l);if(h===null)return;const{range:p,aggregations:m,studiesParams:g,extendedHours:S}=d,{type:T}=Vr(n.getState(),h)||{};e(u,h,p,m[p],S,g,y=>{if(h!==null)return n.dispatch(yo(u,h,y))},s++,T)});break}case f.SetSparkChart:{const{charts:l}=n.getState(),{symbol:c,chartId:d}=o,u=l.get(d,bae());if(u!==void 0){u.symbol=c;const{range:h,aggregations:p,studiesParams:m,extendedHours:g}=u,{type:S}=Vr(n.getState(),c)||{};e(d,c,h,p[h],g,m,T=>n.dispatch(yo(d,c,T)),s++,S)}Cae(n.getState().charts,d,{},{});break}case f.UnsubscribeFromSparkChart:{t(o.chartId,te.CHART);break}case f.SetNumCharts:{let l=hs(n.getState());const c=o.numCharts-l.size;if(c>0){const d=Eae(l),u=l.get(Ps(1),mO()),p=Array(c).fill(d).map((m,g)=>m+g+1).reduce((m,g)=>{const S=vae(u);return m.set(Ps(g),S)},Yt());n.dispatch(vue(p)),p.forEach((m,g)=>{Ws(n.getState().charts,g,{})})}else if(c<0){const d=l.skip(o.numCharts).keySeq().toArray().filter(h=>!h.startsWith(zn));n.dispatch(Iue(d));for(const h of d)t(h,te.CHART),Ws(n.getState().charts,h,{}),Mf(h),oD(n.getState().timeSales,h,_p),Np(sn.LEVEL_2_BID_COLUMN_SET,{...lc(sn.LEVEL_2_BID_COLUMN_SET,qp,{[h]:rT}),[h]:rT}),Np(sn.LEVEL_2_ASK_COLUMN_SET,{...lc(sn.LEVEL_2_ASK_COLUMN_SET,qp,{[h]:oT}),[h]:oT});l=hs(n.getState());const u=Ps(1);if(l.size===1&&l.has(u)){const h=((i=l.get(u))==null?void 0:i.symbol)??null;n.dispatch(Jo(h)),n.dispatch(ea(h??""))}}break}case f.ChangeChartSymbol:{const{chartId:l,symbol:c}=o,d=hs(n.getState()),u=n.getState().charts.get(l);if(u===void 0||(u==null?void 0:u.symbol)===c)return;const{range:h,aggregations:p,studiesParams:m,extendedHours:g}=u,{type:S}=Vr(n.getState(),c)||{};e(l,c,h,p[h],g,m,T=>n.dispatch(yo(l,c,T)),s++,S),d.size===1&&d.has(Ps(1))&&n.dispatch(Jo(c)),Ws(n.getState().charts,l,{symbol:c});break}case f.SaveChartSymbol:{Ws(n.getState().charts,o.chartId,{symbol:o.symbol});break}case f.ChartAggregationSelected:{const{charts:l,selectedSymbol:c}=n.getState(),{chartId:d,aggregation:u}=o,h=l.get(d);if(h===void 0)return;const{range:p,studiesParams:m,extendedHours:g}=h;Ws(l,d,{aggregations:{...h.aggregations,[p]:u}});const S=da(d,h,c.selectedSymbol);if(S===null)break;const{type:T}=Vr(n.getState(),S)||{};e(d,S,p,u,g,m,y=>n.dispatch(yo(d,S,y)),s++,T);break}case f.ChartRangeSelected:{const{charts:l,selectedSymbol:c}=n.getState(),{chartId:d,range:u}=o,h=l.get(d);if(h===void 0)return;const{aggregations:p,studiesParams:m,extendedHours:g}=h;Ws(l,d,{range:u});const S=da(d,h,c.selectedSymbol);if(S===null)break;const{type:T}=Vr(n.getState(),S)||{};e(d,S,u,p[u],g,m,y=>n.dispatch(yo(d,S,y)),s++,T);break}case f.SetShowExtendedHours:{const{charts:l,selectedSymbol:c}=n.getState(),{extendedHours:d,chartId:u}=o,h=l.get(u);if(h===void 0)return;const{range:p,aggregations:m,studiesParams:g}=h;Ws(l,u,{extendedHours:d});const S=da(u,h,c.selectedSymbol);if(S===null)break;const{type:T}=Vr(n.getState(),S)||{};e(u,S,p,m[p],d,g,y=>n.dispatch(yo(u,S,y)),s++,T);break}case f.SetShowAlerts:{const{charts:l}=n.getState(),{chartId:c,showAlerts:d}=o;if(l.get(c)===void 0)return;Ws(l,c,{showAlerts:d});break}case f.SetShowOptionPositions:{const{charts:l}=n.getState(),{chartId:c,showOptionPositions:d}=o;if(l.get(c)===void 0)return;Ws(l,c,{showOptionPositions:d});break}case f.SetShowWorkingOrders:{const{charts:l}=n.getState(),{chartId:c,showWorkingOrders:d}=o;if(l.get(c)===void 0)return;Ws(l,c,{showWorkingOrders:d});break}case f.SetShowTradePrice:{const{charts:l}=n.getState(),{chartId:c,showTradePrice:d}=o;if(l.get(c)===void 0)return;Ws(l,c,{showTradePrice:d});break}case f.SetShowChartHighLow:{const{charts:l}=n.getState(),{chartId:c,showChartHighLow:d}=o;if(l.get(c)===void 0)return;Ws(l,c,{showChartHighLow:d});break}case f.SetShowEarningsPreview:{const{charts:l}=n.getState(),{chartId:c,showEarningsPreview:d,showEarningsIcon:u}=o;if(l.get(c)===void 0)return;if(u===!1){Ws(l,c,{showEarningsPreview:d,showEarningsIcon:u});break}Ws(l,c,{showEarningsPreview:d});break}case f.SetShowEarningsIcon:{const{charts:l}=n.getState(),{chartId:c,showEarningsIcon:d}=o;if(l.get(c)===void 0)return;if(!d){n.dispatch(HR(c,!1,!1));break}Ws(l,c,{showEarningsIcon:d});break}case f.SetShowDividendsIcon:{const{charts:l}=n.getState(),{chartId:c,showDividendsIcon:d}=o;if(l.get(c)===void 0)return;Ws(l,c,{showDividendsIcon:d});break}case f.SetFitStudiesInYAxis:{const{charts:l}=n.getState(),{chartId:c,fitStudiesInYAxis:d}=o;if(l.get(c)===void 0)return;Ws(l,c,{fitStudiesInYAxis:d});break}case f.SwapColors:{const{charts:l}=n.getState(),{swapped:c}=o,d=Md();l.keySeq().toArray().forEach(u=>{const h=l.get(u);if(h===void 0)return;const p=h.studiesParams.map(m=>{const g=Fd(m.plotParameters,m.name,c,void 0,d);return{...m,plotParameters:g}});n.dispatch(td(u,p)),Ws(n.getState().charts,u,{studiesParams:p})});break}case f.SetTheme:{const{charts:l}=n.getState(),{theme:c}=o;l.keySeq().toArray().forEach(d=>{const u=l.get(d);if(u===void 0)return;const h=u.studiesParams.map(p=>Npe(p,c));n.dispatch(td(d,h)),Ws(l,d,{studiesParams:h})});break}case f.AddStudy:{const{charts:l,selectedSymbol:c}=n.getState(),{chartId:d}=o,u=l.get(d);if(u===void 0)return;const{range:h,aggregations:p,studiesParams:m,extendedHours:g}=u,S=ic(),T=da(d,u,c.selectedSymbol);if(T===null)break;const y=o.name,b=Md(),E=Z6(y,m),v=Q6(y,E),D=ac(y,v,m,al()),w=Fd(D.plotParameters,D.name,S,void 0,b),N={...D,plotParameters:w},L=m.set(N.id,N);n.dispatch(td(d,L)),Ws(l,d,{studiesParams:L});const{type:P}=Vr(n.getState(),T)||{};e(d,T,h,p[h],g,L,F=>{n.dispatch(yo(d,T,F))},s++,P);break}case f.AddDynamicStudy:{const{chartId:l,name:c}=o,d=al();n.dispatch(Ry(l,d,c,u=>{const{charts:h,selectedSymbol:p}=n.getState(),{chartId:m}=o,g=h.get(m);if(g===void 0)return;const{range:S,aggregations:T,studiesParams:y,extendedHours:b}=g,E=ic(),v=da(m,g,p.selectedSymbol);if(v===null)return;const D=o.name,w=(W,z)=>{switch(z){case Qs.BOOLEAN:return W==="true";case Qs.DOUBLE:case Qs.INTEGER:case Qs.PRICE:return Number(W);default:return W}};if((u==null?void 0:u.parametersInfo)===void 0||(u==null?void 0:u.name)===void 0)return;const N=u.parametersInfo.reduce((W,z)=>(z.name!==void 0&&z.defaultValue!==void 0&&z.type!==void 0&&(W[z.name]=w(z.defaultValue,z.type)),W),{}),L=Tpe(n.getState());N.isLowerChart===void 0&&(L!=null&&L.length)&&(N.isLowerChart=!L.includes(D)),N.type=u.name;const P=Iae(D,u),F=ac(D,N,y,d,P),O=Md(),H=Fd(F.plotParameters,F.name,E,P,O),C={...F,plotParameters:H},M=y.set(C.id,C);n.dispatch(td(m,M)),Ws(h,m,{studiesParams:M});const{type:q}=Vr(n.getState(),v)||{};e(m,v,S,T[S],b,M,W=>{n.dispatch(yo(m,v,W))},s++,q)}));break}case f.DeleteStudy:{const{charts:l,selectedSymbol:c}=n.getState(),{chartId:d}=o,u=l.get(d);if(u===void 0)return;const{range:h,aggregations:p,studiesParams:m,extendedHours:g}=u,S=da(d,u,c.selectedSymbol);if(S===null)break;const T=m.delete(o.id);n.dispatch(td(d,T)),Ws(l,d,{studiesParams:T});const{type:y}=Vr(n.getState(),S)||{};e(d,S,h,p[h],g,T,b=>{n.dispatch(yo(d,S,b))},s++,y);break}case f.SetStudyParameters:{const{charts:l,selectedSymbol:c}=n.getState(),{chartId:d,parameters:u,plotParameters:h}=o,p=l.get(d);if(p===void 0)return;const{range:m,aggregations:g,studiesParams:S,extendedHours:T}=p,y=da(d,p,c.selectedSymbol);if(y===null)break;const b=S.get(o.id);if(b===void 0)break;const E=b.name;if(Ac(E)){const N=b.parameters,L=N==null?void 0:N.crossingType,P=u==null?void 0:u.crossingType;L!==P&&n.dispatch(aue(d,b.id))}const v={...b,name:wu(E)&&Fm(u)?Gx[u.averageType]:E,parameters:u,plotParameters:h},D=S.set(b.id,v);if(Ws(l,d,{studiesParams:D}),b.parameters===u)break;const{type:w}=Vr(n.getState(),y)||{};e(d,y,m,g[m],T,D,N=>{n.dispatch(yo(d,y,N))},s++,w);break}case f.OpenSection:{const l=n.getState().layout.activePage;let c=[];l===ge.Trade&&o.section!==ge.Trade?c=[zs]:l===ge.Charts&&o.section!==ge.Charts&&(c=hs(n.getState()).filter((h,p)=>da(p,h,null)!==null).keySeq().toArray()),c.forEach(d=>{t(d,te.CHART)});break}}r(o)}},kpe=(e,t)=>{if(e!==void 0&&e.type!==J.Unsupported)switch(t.type){case J.Trendline:{e.type===J.Trendline&&(t.start.time===""&&(t.start.time=e.start.time),t.end.time===""&&(t.end.time=e.end.time));break}case J.PriceLevel:{e.type===J.PriceLevel&&(t.start.time===""&&(t.start.time=e.start.time),t.endTime===""&&(t.endTime=e.end.time));break}case J.FibonacciRetracements:{e.type===J.FibonacciRetracements&&(t.start.time===""&&(t.start.time=e.start.time),t.end.time===""&&(t.end.time=e.end.time));break}case J.Rectangle:{e.type===J.Rectangle&&(t.topLeft.time===""&&(t.topLeft.time=e.start.time),t.downRight.time===""&&(t.downRight.time=e.end.time));break}case J.Channel:{e.type===J.Channel&&(t.start.time===""&&(t.start.time=e.start.time),t.end.time===""&&(t.end.time=e.end.time));break}}return t},Mpe=(e,t)=>({type:f.UpdateDrawing,setId:e,drawingGuid:t.guid,drawing:t}),$l=(e,t,s)=>({type:f.RequestDrawingSets,symbol:e,chartIds:t,newDrawingSet:s}),$pe=(e,t,s)=>({type:f.DrawingSetsReceived,drawingSets:e,chartIds:t,symbol:s}),yS=(e,t)=>({type:f.DrawingsReceived,setId:e,drawings:t}),jpe=e=>({type:f.DeleteDrawing,payload:e}),cD=(e,t,s)=>({type:f.SelectDrawingSet,chartId:e,setId:t,symbol:s}),Bpe=(e,t)=>({type:f.DeleteDrawingSet,setId:e,symbol:t}),Fpe=(e,t)=>({type:f.CreateDrawingSet,chartId:e,drawingSetName:t}),Hpe=e=>({type:f.ClearDrawingSetError,chartId:e}),Upe=(e,t)=>({type:f.CreateDrawingSetError,error:e,chartId:t}),Vpe=e=>({type:f.SaveSelectedDrawingSets,selectedDrawingSets:e}),Wpe=(e,t)=>({type:f.CreateDrawing,drawing:t,setId:e}),Gpe=(e,t)=>({type:f.CreateDrawingToolClicked,drawingType:e,chartId:t}),Ype=e=>({type:f.ClearDrawingMode,chartId:e}),qpe=(e,t,s,n,r,o,i)=>l=>c=>d=>{var u;switch(d.type){case f.SymbolSelected:{const{symbol:h}=d;Pb(h)||l.dispatch($l(h,[zs]));break}case f.ChangeChartSymbol:{const{chartId:h,symbol:p}=d;Pb(p)||l.dispatch($l(p,[h]));break}case f.ChartSymbolsSelected:{const h=hs(l.getState()),p=k0(h);for(const[m,g]of Object.entries(p))l.dispatch($l(m,g));break}case f.AddCharts:{const h=k0(d.charts);for(const[p,m]of Object.entries(h))l.dispatch($l(p,m));break}case f.RequestDrawingSets:{const{symbol:h,chartIds:p,newDrawingSet:m}=d,{drawings:g}=l.getState();e(h,S=>{const T=S.drawingSets;l.dispatch($pe(T,p,h)),p.forEach(y=>{var v;const b=y===(m==null?void 0:m.chartId)?m==null?void 0:m.setId:(v=g.selectedDrawingSets.get(y))==null?void 0:v.get(h),E=bce(T,b);E!==void 0&&l.dispatch(cD(y,E.guid,h))})});break}case f.SelectDrawingSet:{const{setId:h,chartId:p}=d,{drawings:m}=l.getState(),g=an(p)(l.getState());if(g){let S=m.selectedDrawingSets.get(p);S===void 0&&(S=ke());const T=S.set(g,h),y=m.selectedDrawingSets.set(p,T);G7(y),l.dispatch(Vpe(y))}t(h,(S,T)=>l.dispatch(yS(S,T)));break}case f.DeleteDrawingSet:{const{setId:h,symbol:p}=d,{charts:m,selectedSymbol:g}=l.getState();p!==null&&o(h,p,()=>{const S=M0(m,p,g.selectedSymbol);l.dispatch($l(p,S))});break}case f.UpdateDrawing:{const{setId:h,drawingGuid:p,drawing:m}=d,g=(u=l.getState().drawings.drawings.get(h))==null?void 0:u.find(T=>T.guid===p),S=kpe(g,m);h!==void 0&&s(h,p,S);break}case f.DeleteDrawing:{const{payload:h}=d;r(h,p=>{const{drawingSetGuid:m}=p;t(m,(g,S)=>l.dispatch(yS(g,S)))});break}case f.CreateDrawing:{n(d.setId,d.drawing,h=>{t(h,(p,m)=>l.dispatch(yS(p,m)))});break}case f.CreateDrawingSet:{const{drawingSetName:h,chartId:p}=d,m=an(p)(l.getState()),{charts:g,selectedSymbol:S}=l.getState();m!==null&&i(m,h,T=>{const y=M0(g,m,S.selectedSymbol);l.dispatch($l(m,y,{chartId:p,setId:T.guid}))},T=>{l.dispatch(Upe(T,p))});break}}c(d)},Kpe=e=>(t,s,n)=>{e([{header:{service:te.MARKET_DEPTH,id:`marketDepth-${s}`,ver:0},params:{symbol:t}}],r=>{n({bidQuotes:r.bidQuotes,askQuotes:r.askQuotes,error:r.error})})},Ks=e=>(t,s,n)=>e([{header:{service:te.UNSUBSCRIBE,id:`unsubscribe-${t}`,ver:0},params:{targetRequestId:t,targetService:s}}],()=>{n&&n()}),zpe=(e,t)=>({type:f.MarketDepthDataReceived,marketDepthData:e,chartId:t}),dD=(e,t)=>({type:f.RequestMarketDepth,symbol:e,chartId:t}),uD=e=>({type:f.UnsubscribeFromMarketDepth,chartId:e}),Xpe=e=>t=>s=>n=>{switch(n.type){case f.RequestMarketDepth:{Kpe(e)(n.symbol,n.chartId,r=>t.dispatch(zpe(r,n.chartId)));break}case f.UnsubscribeFromMarketDepth:{Ks(e)(`marketDepth-${n.chartId}`,te.MARKET_DEPTH);break}}s(n)},Qpe=300,Zpe=e=>(t,s,n,r)=>{e([{header:{service:te.TIME_SALES,id:`time_sales-${n}`,ver:0},params:{symbol:t,minSize:s,refreshRate:Qpe}}],o=>{if(o.symbol===t){const i=o.timeSales.map(l=>{const c=l.time;return{...l,time:c?new Date(c):void 0}}).sort((l,c)=>l.sequence-c.sequence);r(i)}})},Jpe=(e,t)=>({type:f.TimeSalesDataReceived,timeSalesData:e,chartId:t}),eme=(e,t,s)=>({type:f.RequestTimeSales,symbol:e,minSize:t,chartId:s}),tme=e=>({type:f.UnsubscribeFromTimeSales,chartId:e}),sme=e=>t=>s=>n=>{switch(n.type){case f.RequestTimeSales:{const r=t.getState().instruments.get(n.symbol);let o=n.symbol;r!==void 0&&r.type===k.PRODUCT&&(o=r.activeSymbol??n.symbol),oD(t.getState().timeSales,n.chartId,n.minSize),Zpe(e)(o,n.minSize,n.chartId,i=>{t.dispatch(Jpe(i,n.chartId))});break}case f.UnsubscribeFromTimeSales:{Ks(e)(`time_sales-${n.chartId}`,te.TIME_SALES);break}}s(n)},nme=e=>(t,s,n)=>{e([{header:{id:"adjust_cash",service:te.ADJUST_CASH,ver:0},params:{accountCode:t,cashAmount:s,description:`Transfer ${s} dollars`}}],r=>{n({success:r.type!=="error"})})},rme=e=>(t,s,n)=>{e([{header:{id:"set_balance",service:te.SET_BALANCE,ver:0},params:{accountCode:t,newBalance:s,resetAccount:!0}}],r=>{n({success:r.type!=="error"})})};var hD=(e=>(e.INSTRUMENT="INSTRUMENT",e.ORDER="ORDER",e.TRADE_TIME="TRADE_TIME",e))(hD||{}),pD=(e=>(e.ACCOUNT="ACCOUNT",e.CAPITALIZATION="CAPITALIZATION",e.INDUSTRY="INDUSTRY",e.INSTRUMENT_TYPE="INSTRUMENT_TYPE",e.NONE="NONE",e))(pD||{});const hc=e=>{const{plDay:t,plOpen:s,netLiquidity:n,openCost:r,plYtd:o}=e,i=s!==void 0&&r!==void 0?s/Math.abs(r):void 0,l=o!==void 0&&n!==void 0?o/Math.abs(n-o):void 0,c=t!==void 0&&n!==void 0?t/Math.abs(n-t):void 0;return{plOverallPercent:i,plYtdPercent:l,plDayPercent:c}},ome=e=>(t,s,n="COMBINED ACCOUNT",r=pD.ACCOUNT,o=hD.ORDER)=>{e([{header:{service:te.GROUPED_POSITIONS,id:"grouped_positions",ver:0},params:{account:n,fields:["MARK","QUANTITY","OPEN_PRICE","NET_LIQ","PL_OPEN","PL_YTD","PL_DAY","ITM","DELTA","GAMMA","THETA","VEGA","RHO","OPEN_COST","BP_EFFECT","MARK_CHANGE","MARGIN"],arrangeMode:o,groupingMode:r}}],i=>{if(i.type==="error")s(i.error);else{const l=[],c=i.groups.reduce((d,u)=>{const{positions:h}=u,p=h.reduce((m,g)=>{const{balanceGroups:S,symbol:T}=g;if(ame(g,S))return m;const y=S.filter(Se=>Se.title===k.FOREX?Se.values.QUANTITY!==0:!0);if(y.length===0)return m;const b=n==="COMBINED ACCOUNT"?y[0].account:n,E=y.filter(Se=>Se.title===k.STOCK),v=y.filter(Se=>Se.title!==k.STOCK&&Se.title!==k.FUTURE&&Se.title!==nt.FUTURES_CALENDAR),D=y.filter(Se=>Se.title===k.FUTURE||Se.title===nt.FUTURES_CALENDAR),w=D.length>0,N=mme(E),L={};D.forEach(Se=>{Se.balances.forEach(be=>{const le=be.symbol,We=L[le]??0;L[le]=We+(be.values.QUANTITY??0)})}),g.values.QUANTITY=ime(g,w,L,N);let P;E.length&&(P=dme(E,g,N,b));const F=lme(v,g),O=cme(D,g),{values:H}=g,{PL_OPEN:C,PL_YTD:M,PL_DAY:q,NET_LIQ:W}=H,re=F.some(Se=>{var be;return(be=Se==null?void 0:Se.positions)==null?void 0:be.some(le=>(le==null?void 0:le.type)===k.FUTURE||(le==null?void 0:le.type)===k.FOREX)})?0:H.OPEN_COST??0,{plDayPercent:ae,plYtdPercent:Me,plOverallPercent:he}=hc({plOpen:C,plYtd:M,openCost:re,netLiquidity:W,plDay:q});l.push({rootSymbol:g.symbol,buyingPowerEffect:H.BP_EFFECT,openPrice:H.OPEN_PRICE,quantity:H.QUANTITY,openCost:re,netLiquidity:W,plOpen:C,plOverallPercent:he,plYtd:M,plYtdPercent:Me,plDay:q,plDayPercent:ae,delta:H.DELTA,gamma:H.GAMMA,theta:H.THETA,vega:H.VEGA,margin:H.MARGIN}),P!==void 0&&F.unshift(P),O.length&&F.unshift(...O);const U=F.reduce((Se,{positions:be})=>Se+be.length+1,0);return[...m,{id:`${encodeURIComponent(b)}/${encodeURIComponent(T)}`,symbol:T,positionGroups:F,spreadGroupingLength:U}]},[]);return p.length===0?d:[...d,...p]},[]);t(c,l)}})},ame=(e,t)=>{const s=!t.some(n=>n.balances.find(r=>r.values.QUANTITY!==void 0&&r.values.QUANTITY!==0));return(e.values.QUANTITY===void 0||e.values.QUANTITY===0)&&s},ime=(e,t,s,n)=>{const r=Object.keys(s).length===1,o=Object.values(s)[0];return t?r?o:0:n},_y=(e,t,s,n,r=!1)=>e.filter(o=>o.values.QUANTITY!==0).map(o=>{const i=o.values.PL_OPEN,l=r?void 0:t.values.PL_YTD,c=o.values.PL_DAY,d=o.values.NET_LIQ,u=s.title===k.FUTURE||s.title===k.FOREX?0:o.values.OPEN_COST,{plDayPercent:h,plYtdPercent:p,plOverallPercent:m}=hc({plOpen:i,plYtd:l,openCost:u,netLiquidity:d,plDay:c});switch(s.title){case"STOCK":case"BOND":case"CASH":case"FOREX":case"FUND":case"FUTURE":case"INDEX":case"MANUAL":case"WARRANT":case"RIGHT":case"ETF":case"FUTURES_CALENDAR":case"FUT CALENDAR":case"UNDEFINED":{let g;switch(s.title){case"STOCK":g=k.STOCK;break;case"FUTURE":case"FUTURES_CALENDAR":case"FUT CALENDAR":g=k.FUTURE;break;case"FOREX":g=k.FOREX;break;case"INDEX":g=k.INDEX;break;case"FUND":g=k.FUND;break;case"CASH":g=k.CASH;break;case"MANUAL":g=k.MANUAL;break;case"WARRANT":g=k.WARRANT;break;case"RIGHT":g=k.RIGHT;break;case"ETF":g=k.ETF;break;case"BOND":g=k.BOND;break;case"UNDEFINED":g=k.NONE;break;default:return}return{id:`${encodeURIComponent(n)}/${encodeURIComponent(s.orderId)}/${encodeURIComponent(o.symbol)}`,type:g,account:n,symbol:o.symbol,rootSymbol:t.symbol,description:t.symbol,quantity:o.values.QUANTITY,openPrice:o.values.OPEN_PRICE,netLiquidity:d,plOpen:i,plYtd:l,plDay:c,plOverallPercent:m,plYtdPercent:p,plDayPercent:h,delta:o.values.DELTA,gamma:o.values.GAMMA,theta:o.values.THETA,vega:o.values.VEGA,openCost:u,buyingPowerEffect:t.values.BP_EFFECT,margin:void 0}}case"OPTION":case"SINGLE":case"DIAGONAL":case"DBL DIAG":case"CALENDAR":case"CONDOR":case"~CONDOR":case"IRON CONDOR":case"IRON_CONDOR":case"~IRON CONDOR":case"STRANGLE":case"VERTICAL":case"BACKRATIO":case"STRADDLE":case"BUTTERFLY":case"~BUTTERFLY":case"VERTICAL_ROLL":case"VERT ROLL":case"VERT_ROLL":case"~VERT ROLL":case"DOUBLE_DIAGONAL":case"UNBALANCED_BUTTERFLY":case"UNBALANCED_CONDOR":case"UNBALANCED_IRON_CONDOR":case"UNBALANCED_IRON CONDOR":case"UNBALANCED_VERTICAL_ROLL":case"UNBALANCED_VERT ROLL":case"COLLAR":case"COMBO":return{id:`${encodeURIComponent(n)}/${encodeURIComponent(s.orderId)}/${encodeURIComponent(o.symbol)}`,type:k.OPTION,account:n,symbol:o.symbol,description:t.symbol,rootSymbol:t.symbol,underlyingSymbol:t.symbol,quantity:o.values.QUANTITY,openPrice:o.values.OPEN_PRICE,netLiquidity:d,plOpen:i,plYtd:l,plDay:c,plOverallPercent:m,plYtdPercent:p,plDayPercent:h,inTheMoney:o.values.ITM,delta:o.values.DELTA,gamma:o.values.GAMMA,theta:o.values.THETA,vega:o.values.VEGA,openCost:u,buyingPowerEffect:t.values.BP_EFFECT,margin:void 0};case"CUSTOM":case"COVERED":return/^\./.test(o.symbol)?{id:`${encodeURIComponent(n)}/${encodeURIComponent(s.orderId)}/${encodeURIComponent(o.symbol)}`,type:k.OPTION,account:n,symbol:o.symbol,description:t.symbol,rootSymbol:t.symbol,underlyingSymbol:t.symbol,quantity:o.values.QUANTITY,openPrice:t.values.OPEN_PRICE,netLiquidity:d,plOpen:i,plYtd:l,plDay:c,plOverallPercent:m,plYtdPercent:p,plDayPercent:h,inTheMoney:o.values.ITM,delta:o.values.DELTA,gamma:o.values.GAMMA,theta:o.values.THETA,vega:o.values.VEGA,openCost:u,buyingPowerEffect:t.values.BP_EFFECT,margin:void 0}:{id:`${encodeURIComponent(n)}/${encodeURIComponent(s.orderId)}/${encodeURIComponent(o.symbol)}`,type:k.STOCK,account:n,symbol:o.symbol,rootSymbol:t.symbol,description:t.symbol,quantity:o.values.QUANTITY,openPrice:o.values.OPEN_PRICE,netLiquidity:d,plOpen:i,plYtd:l,plDay:c,plOverallPercent:m,plYtdPercent:p,plDayPercent:h,delta:o.values.DELTA,gamma:o.values.GAMMA,theta:o.values.THETA,vega:o.values.VEGA,openCost:u,buyingPowerEffect:t.values.BP_EFFECT,margin:void 0};default:return}}).filter(Ut),Ny=(e,t,s,n,r)=>{const{plDayPercent:o,plYtdPercent:i,plOverallPercent:l}=hc({plOpen:t.PL_OPEN,plYtd:t.PL_YTD,openCost:t.OPEN_COST,netLiquidity:t.NET_LIQ,plDay:t.PL_DAY}),c={underlyingSymbol:s.symbol,openPrice:t.OPEN_PRICE,openCost:t.OPEN_COST,netLiquidity:t.NET_LIQ,plOpen:t.PL_OPEN,plYtd:t.PL_YTD,plDay:t.PL_DAY,delta:t.DELTA,gamma:t.GAMMA,theta:t.THETA,vega:t.VEGA,plOverallPercent:l,plYtdPercent:i,plDayPercent:o,mark:t.MARK,markChange:t.MARK_CHANGE};return c.trendingMark=hme(`${encodeURIComponent(n)}/${encodeURIComponent(s.symbol)}/${encodeURIComponent(r)}/${encodeURIComponent(e)}`,c),c},lme=(e,t)=>e.reduce((s,n)=>{const{balances:r,account:o,title:i,values:l,orderId:c}=n,d=_y(r,t,n,o,!0);if(d.length===0)return s;const u=Ny(i,l,t,o,c),h={id:`${encodeURIComponent(n.account)}/${encodeURIComponent(n.orderId)}/${encodeURIComponent(n.title)}/${encodeURIComponent(t.symbol)}`,account:o,title:i,spreadGroupingAggregation:u,positions:d};return s.push(h),s},[]),cme=(e,t)=>{const s=e.reduce((n,r)=>{const{balances:o,account:i,title:l,values:c,orderId:d}=r,u=_y(o,t,r,i),h=Ny(l,c,t,i,d),p=`${encodeURIComponent(r.account)}/${encodeURIComponent(r.orderId)}/${encodeURIComponent(l)}`;return n[p]={id:p,account:i,title:l,spreadGroupingAggregation:h,positions:u.map(m=>(m.plYtd=void 0,m.buyingPowerEffect=void 0,m.margin=void 0,m.plYtdPercent=void 0,m))},n},{});return Object.values(s)},dme=(e,t,s,n)=>{const r=["openCost","netLiquidity","buyingPowerEffect","plOpen","plDay","delta","gamma","theta","vega","margin"];return e.reduce((o,i)=>{const{balances:l,account:c,title:d,values:u,orderId:h}=i,p=_y(l,t,i,c),m=Ny(d,u,t,c,h);p.forEach(y=>{if(Object.keys(o).length===0)o={id:`${encodeURIComponent(n)}/${encodeURIComponent(e[0].orderId)}/${encodeURIComponent(e[0].title)}/${encodeURIComponent(t.symbol)}`,title:e[0].title,account:n,spreadGroupingAggregation:m,positions:[{id:`${encodeURIComponent(n)}/${encodeURIComponent(t.symbol)}`,type:k.STOCK,account:n,symbol:t.symbol,rootSymbol:t.symbol,underlyingSymbol:t.symbol,quantity:s,openPrice:y.openPrice,openCost:y.openCost,netLiquidity:y.netLiquidity,buyingPowerEffect:y.buyingPowerEffect,plOpen:y.plOpen,plYtd:y.plYtd,plDay:y.plDay,delta:y.delta,gamma:y.gamma,theta:y.theta,vega:y.vega,margin:y.margin}]};else{const b=o.positions[0];ume(r,b,y)}});const{plDayPercent:g,plYtdPercent:S,plOverallPercent:T}=hc({plOpen:o.positions[0].plOpen,plYtd:o.positions[0].plYtd,openCost:o.positions[0].openCost,netLiquidity:o.positions[0].netLiquidity,plDay:o.positions[0].plDay});return o.positions[0].plDayPercent=g,o.positions[0].plYtdPercent=S,o.positions[0].plOverallPercent=T,o},{})},ume=(e,t,s)=>{e.forEach(n=>{if(t[n]&&s[n]){t[n]+=s[n];return}t[n]=s[n]})},fE={},hme=(e,t)=>{const s=fE[e],n=s==null?void 0:s.trendingMark,r=n!==void 0&&t.mark!==void 0?wf(s.mark,t.mark,n.trend):at.Neutral;return n!==void 0&&t.mark===n.value&&r===n.trend?n:(fE[e]=t,{value:t.mark,trend:r})},pme=e=>e%1!=0?e.toString().split(".")[1].length:0,mme=e=>{if(e.length===0)return 0;let t=0;const s=e.reduce((r,o)=>{const i=o.balances.reduce((l,c)=>{const d=c.values.QUANTITY??0,u=pme(d);return u>t&&(t=u),l+d},0);return r+i},0),n=new Intl.NumberFormat(void 0,{maximumFractionDigits:t,useGrouping:!1});return Number(n.format(s))},gme=(e,t,s)=>({type:f.RequestCalendarEvents,requestId:e,requestVersion:t,symbols:s}),CS=e=>({type:f.CalendarEventsReceived,calendarEvents:e}),TE=e=>({type:f.HistoricalCalendarEventsReceived,historicalCalendarEvents:e}),Sme=(e,t,s)=>{let n=0;return r=>o=>i=>{switch(i.type){case f.RequestCalendarEvents:{e(i.requestId,i.symbols,l=>{r.dispatch(CS(l))},i.requestVersion);break}case f.SymbolSelected:case f.ChangeChartSymbol:{const l=r.getState().calendar.events.get(i.symbol),c=r.getState().calendar.historicalEvents.get(i.symbol);if(l||e("calendarEvents",[i.symbol],d=>{r.dispatch(CS(d))},n++),!c){const u=new Date,h=Qi(u,5479*-1);t(i.symbol,h,u,[yd.EARNINGS,yd.DIVIDEND],p=>{r.dispatch(TE(p))})}break}case f.ChartSymbolsSelected:{const l=r.getState().calendar,c=Um(r.getState()),d=c.filter(h=>!l.events.get(h)),u=c.filter(h=>!l.historicalEvents.get(h));if(d.length&&e("calendarEvents",d,h=>{r.dispatch(CS(h))},n++),u.length){const p=new Date,m=Qi(p,5479*-1);for(const g of u)t(g,m,p,[yd.EARNINGS,yd.DIVIDEND],S=>{r.dispatch(TE(S))})}break}case f.OpenSection:{const l=r.getState().layout.activePage;(l===ge.Trade&&i.section!==ge.Trade||l===ge.Charts&&i.section!==ge.Charts)&&s("calendarEvents",te.CALENDAR_EVENTS);break}}o(i)}},fme=e=>({type:f.ScanQuotesReceived,quotes:e}),Tme=e=>({type:f.GetScansSymbols,scansParams:e}),yme=e=>({type:f.GetScanFilterParameters,scanFilterNames:e}),Cme=(e,t)=>({type:f.GetScansFilters,watchlistId:e,scansQuotesRequestId:t}),mD=e=>({type:f.SetWatchlistToScanIn,scanInWatchlistId:e}),gD=e=>({type:f.SetHasUnSupportedFilters,hasUnSupportedFilters:e}),bme=e=>({type:f.SetPrevScanFilters,prevScanFilters:e}),Eme=e=>({type:f.SetPrevSavedScanFilters,prevSavedScanFilters:e}),SD=e=>({type:f.SetScanFilterMenu,scanFilterMenu:e}),fD=e=>({type:f.SetScanFilterQueryName,queryName:e}),Ame=e=>({type:f.ScansSymbolsReceived,symbols:e}),vme=e=>({type:f.ScanFiltersReceived,filters:e}),Ime=()=>({type:f.ClearScanFilters}),xme=e=>({type:f.ScanFilterParametersReceived,scanFilterParameters:e}),wme=({queryName:e,watchlistType:t,filterMode:s,allGroupFilters:n,noneGroupFilters:r,scanInWatchlist:o,anyGroupFilters:i,limit:l,sort:c,callback:d})=>({type:f.SaveScanRequestReceived,queryName:e,scanInWatchlist:o,watchlistType:t,filterMode:s,allGroupFilters:n,noneGroupFilters:r,anyGroupFilters:i,limit:l,sort:c,callback:d});var qn=(e=>(e.ALL_SYMBOLS="All Symbols",e.ALL_STOCKS="All Stocks",e.ALL_INDICES="All Indices",e.ALL_FUTURES="All Futures",e.ALL_FUNDS="All Funds",e.ALL_FX_NON_COMMISSION_PAIRS="All FX Non-commission Pairs",e.ALL_FX_COMMISSION_PAIRS="All FX Commission Pairs",e.ALL_OTC_STOCKS="All OTC Stocks",e.ALL_LISTED_STOCKS="All Listed Stocks",e.ALL_OPTIONABLE="All Optionable",e.ALL_NYSE_STOCKS="All NYSE Stocks",e.ALL_NASDAQ_STOCKS="All NASDAQ Stocks",e))(qn||{});const bd={"All Symbols":50,"All Stocks":51,"All Indices":52,"All Futures":53,"All Funds":54,"All FX Non-commission Pairs":56,"All FX Commission Pairs":57,"All OTC Stocks":58,"All Listed Stocks":59,"All Optionable":60,"All NYSE Stocks":61,"All NASDAQ Stocks":62},yE=["All Symbols","All Stocks","All Indices","All Futures","All Funds","All FX Non-commission Pairs","All FX Commission Pairs","All OTC Stocks","All Listed Stocks","All Optionable","All NYSE Stocks","All NASDAQ Stocks"],Ome=Nt(Sle),Rme=e=>Ome.is(e),CE=(e,t,s,n=!1)=>!e||!e[s]?e:e.map((r,o)=>{if(s===o){const i=r.low,l=r.high;return{...r,low:i!==void 0?Pr(n,i/t,i*t):void 0,high:l!==void 0?Pr(n,l/t,l*t):void 0}}return r}),Py=(e,t)=>{let r=[...e].map(l=>({...l}));const o=r.findIndex(l=>l.field==Kt.MARKET_CAP);return o>-1&&(r=CE(r,1e6,o,t)),lp.forEach(l=>{const c=r.findIndex(d=>d.field==l);c>-1&&(r=CE(r,.01,c,t))}),r},TD=(e,t)=>e.reduce((s,n)=>{const r=Object.keys(t);if(n.type===ni.FUNDAMENTAL)if(r.length){const o=r.find(i=>t[i].fundamentalType===n.field);if(o&&t[o]){const{field:i,name:l,...c}=n,d={...c},u=t[o];d.fundamentalsValueType=u.fundamentalsValueTypes&&u.fundamentalsValueTypes[0],d.historicalPeriod=u.historicalPeriods&&u.historicalPeriods[0],d.fundamentalType=i,s.push(d)}}else{const{field:o,name:i,...l}={...n,fundamentalType:n.field,fundamentalsValueType:"CURRENT"};s.push(l)}else{const{name:o,...i}=n;s.push(i)}return s},[]),bS=(e,t)=>{if(e.length){const s=e.filter(n=>n.type===ni.FUNDAMENTAL);if(s.length>0){const n=s.map(r=>r.name||"").filter(Boolean);t(yme(n))}}},Dme=e=>{switch(e){case 50:return qn.ALL_SYMBOLS;case 51:return qn.ALL_STOCKS;case 52:return qn.ALL_INDICES;case 53:return qn.ALL_FUTURES;case 54:return qn.ALL_FUNDS;case 56:return qn.ALL_FX_NON_COMMISSION_PAIRS;case 57:return qn.ALL_FX_COMMISSION_PAIRS;case 58:return qn.ALL_OTC_STOCKS;case 59:return qn.ALL_LISTED_STOCKS;case 60:return qn.ALL_OPTIONABLE;case 61:return qn.ALL_NYSE_STOCKS;case 62:return qn.ALL_NASDAQ_STOCKS;default:return qn.ALL_STOCKS}},Lme=(e,t,s,n,r)=>o=>i=>l=>{switch(l.type){case f.GetScansSymbols:{const c=()=>{e({watchlistId:l.scansParams.watchlistId,matchAllFilters:l.scansParams.matchAllFilters,matchNoneFilters:l.scansParams.matchNoneFilters,matchAnyFilters:l.scansParams.matchAnyFilters,filterMode:l.scansParams.filterMode,limit:l.scansParams.limit,sort:l.scansParams.sort,callback:d=>{o.dispatch(Ame(d))}})};n("stock_hacker",te.STOCK_HACKER,c);break}case f.GetScanFilterParameters:{t({fundamentals:l.scanFilterNames,callback:c=>{c.fundamentals&&o.dispatch(xme(c.fundamentals))}});break}case f.GetScansFilters:{s({watchlistId:l.watchlistId,callback:c=>{const d=c.allGroupFilters??[],u=d.filter(T=>T&&T.type===ni.STOCK),h=d.filter(T=>T&&T.type===ni.FUNDAMENTAL).map(T=>{var v,D;const y="(Current)",E=(((v=T==null?void 0:T.name)==null?void 0:v.indexOf(y))||-1)>-1?(D=T==null?void 0:T.name)==null?void 0:D.replace(y,"").trim():T==null?void 0:T.name;return{type:T.type,low:T.low,high:T.high,field:T==null?void 0:T.fundamentalType,name:E}}),p=[...u,...h],m=new Set(p.map(T=>T.field)),g=p.filter(T=>m.has(T.field)),S=Py(g,!0);d.length&&o.dispatch(fD(c.queryName||"")),o.dispatch(gD(d.length>p.length||p.length!==S.length)),p.length>0&&Et.unstable_batchedUpdates(()=>{o.dispatch(vme(S)),c!=null&&c.scanInWatchlist&&o.dispatch(mD(c==null?void 0:c.scanInWatchlist)),o.dispatch(SD(Yr.ACTIVE)),n(l.scansQuotesRequestId,te.QUOTES)})}});break}case f.SaveScanRequestReceived:{r({queryName:l.queryName,scanInWatchlist:l.scanInWatchlist,watchlistType:l.watchlistType,allGroupFilters:l.allGroupFilters,noneGroupFilters:l.noneGroupFilters,anyGroupFilters:l.anyGroupFilters,filterMode:l.filterMode,limit:l.limit,sort:l.sort,callback:c=>{l.callback&&l.callback(c)}});break}}i(l)},_me=e=>({watchlistId:t,matchAllFilters:s,matchNoneFilters:n,matchAnyFilters:r,filterMode:o,limit:i,sort:l,callback:c})=>{e([{header:{service:te.STOCK_HACKER,id:"stock_hacker",ver:0},params:{filterMode:o,sort:l,watchlistId:t,matchAllFilters:s,matchNoneFilters:n,matchAnyFilters:r,limit:i}}],d=>{const u=d.symbols||[];c(u)})},Nme=e=>({fundamentals:t,studies:s,callback:n})=>{e([{header:{service:te.SCAN_FILTER_PARAMETERS,id:te.SCAN_FILTER_PARAMETERS,ver:0},params:{fundamentals:t,studies:s}}],r=>{n(r)})},Pme=e=>({watchlistId:t,callback:s})=>{e([{header:{service:te.SCAN_QUERY_GET,id:`${te.SCAN_QUERY_GET}-${Qn()}`,ver:0},params:{watchlistId:t}}],n=>{s(n)})},kme=e=>({queryName:t,watchlistType:s,allGroupFilters:n,noneGroupFilters:r,anyGroupFilters:o,filterMode:i,scanInWatchlist:l,limit:c=1e3,sort:d,callback:u})=>{e([{header:{service:te.SCAN_QUERY_SAVE,id:te.SCAN_QUERY_SAVE,ver:0},params:{queryName:t,watchlistType:s,allGroupFilters:n,noneGroupFilters:r,anyGroupFilters:o,filterMode:i,scanInWatchlist:l,limit:c,sort:d}}],h=>{u(h)})},Mme=(e,t,s,n,r,o)=>({type:f.CreateDraftTrade,rootSymbol:e,legs:t,orderType:s,limitPrice:n,stopPrice:r,orderTif:o}),pi=(e,t,s,n,r,o,i,l,c,d)=>({type:f.TradeInstrument,symbol:e,instrumentType:t,direction:s,price:n,orderType:r,priceType:o,orderStartedFrom:i,quantity:l,isAutoSend:c,isFuturesContract:d}),$me=({symbol:e,strike:t,expirationId:s,optionType:n,direction:r,price:o,orderType:i,priceType:l,orderStartedFrom:c,quantity:d,isAutoSend:u})=>({type:f.BuyOption,symbol:e,strike:t,expirationId:s,optionType:n,direction:r,price:o,orderType:i,priceType:l,orderStartedFrom:c,quantity:d,isAutoSend:u}),sd=(e,t)=>({type:f.DraftOrderModified,symbol:e,draftOrderIndex:t}),jme=e=>({type:f.GetFutureExpirations,symbol:e}),yD=(e,t)=>({type:f.FutureExpirationsReceived,symbol:e,futureExpirations:t}),ro=e=>(t,s)=>new Promise(n=>e([{header:{service:te.FUTURE_SERIES,id:`futureSeries-${Qn()}`,ver:0},params:{symbol:t}}],r=>{const o=r.series.map(i=>({symbol:i.symbol,displaySymbol:i.displaySymbol,daysToExpiration:i.daysToExpiration,expirationDate:i.lastTradeDate,isActive:i.isActive,lastTradeDate:i.lastTradeDate,expiration:i.expiration}));return s&&s(t,o),n(o)})),Bme=e=>{switch(e){case"REGULAR":return Sa.Regular;case"WEEKLYS":return Sa.Weekly;case"QUARTERLYS":return Sa.Quarterly;case"EOM":return Sa.EndOfMonth;default:return Sa.Regular}},CD=e=>{switch(e){case"AM":return wo.AM;case"PM":return wo.PM}},bD=e=>(t,s)=>{const n=t.availableOptionExpirations.get(s);return n!==void 0?new Promise(r=>r(n)):new Promise(r=>e([{header:{id:`optionSeries-${Qn()}`,service:te.OPTION_SERIES,ver:0},params:{underlying:s}}],o=>r(o.series.map(i=>({underlying:i.underlying,id:i.name,expirationDate:i.lastTradeDate,expirationDateForAM:i.expiration,expirationStyle:Bme(i.expirationStyle),spc:i.spc,multiplier:i.multiplier,additionalUnderlyings:i.additionalUnderlyings,settlementType:CD(i.settlementType)})))))},ED=e=>{switch(e){case"STOCK":return k.STOCK;case"OPTION":return k.OPTION;case"FUTURE":return k.FUTURE;case"FOREX":return k.FOREX;case"INDEX":return k.INDEX;case"FUND":return k.FUND;case"BOND":return k.BOND;case"CASH":return k.CASH;case"MANUAL":return k.MANUAL;case"WARRANT":return k.WARRANT;case"RIGHT":return k.RIGHT;case"CRYPTO":return k.CRYPTO;case"PRODUCT":return k.PRODUCT;case"ETF":return k.ETF;case"UNDEFINED":return k.NONE}},vh=e=>{switch(e){case"AMEX":return Jn.AMEX;case"CFE":return Jn.CFE;case"CME":return Jn.CME;case"FOREX":return Jn.FOREX;case"FUTURES":return Jn.FUTURES;case"ICE":return Jn.ICE;case"ICE_EU":return Jn.ICE_EU;case"LIFFE":return Jn.LIFFE;case"NASDAQ":return Jn.NASDAQ;case"NYSE":return Jn.NYSE;case"OPTIONS":return Jn.OPTIONS;case"OTHER":return Jn.OTHER;case"STOCK":return Jn.STOCK;default:return Jn.UNDEFINED}},AD=e=>{switch(e){case"CALL":return dt.Call;case"PUT":return dt.Put}},Ed=e=>{switch(e){case"X32":return Bs.x32;case"X64":return Bs.x64;case"X128":return Bs.x128;case"X256":return Bs.x256;default:return Bs.x10}},Fme=async(e,t,s,n,r)=>{const o=s.get(e);return o!==void 0?o.find(l=>l.symbol===t):(await n(e,r)).find(l=>l.symbol===t)},Ad=e=>e.includes("*")||e.includes("+")||e.includes("-"),Bo=async(e,t,s,n)=>{if(e.instruments!==void 0)return await Promise.all(e.instruments.map(async r=>{switch(r.instrumentType){case"OPTION":return{type:k.OPTION,fractionalType:Ed(r.fractionalType),symbol:r.symbol,displaySymbol:r.displaySymbol,underlyingSymbol:r.underlyingSymbol,underlyingDisplaySymbol:r.underlyingDisplaySymbol,rootSymbol:r.rootSymbol,description:r.description,daysToExpiration:r.daysToExpiration,expiration:r.lastTradeDate,expirationForAM:r.expiration,seriesName:r.seriesName,optionType:AD(r.optionType),strike:r.strike,multiplier:r.multiplier,tradeable:r.tradeable,priceTick:r.priceTick,gainPerTick:r.priceTickValue,futureOption:r.futureOption,composite:Ad(r.symbol),cusip:r.cusip,spc:r.spc,sourceType:vh(r.sourceType),settlementType:CD(r.settlementType)};case"FUTURE":return{type:k.FUTURE,fractionalType:Ed(r.fractionalType),symbol:r.symbol,displaySymbol:r.displaySymbol,rootSymbol:r.rootSymbol,description:r.description,tradeable:r.tradeable,composite:Ad(r.symbol),hasOptions:r.hasOptions,multiplier:r.multiplier,expiration:r.lastTradeDate,hasTradableOptions:(r==null?void 0:r.hasTradableOptions)??!1,priceTick:r.priceTick,gainPerTick:r.priceTickValue,lastTradeDate:r.lastTradeDate,futureExpiration:r.expiration,daysToExpiration:r.daysToExpiration,cusip:r.cusip,spc:r.spc,futureOption:r.futureOption,sourceType:vh(r.sourceType)};case"PRODUCT":{const o=e.instruments.find(u=>u.symbol===r.activeSymbol);let i,l,c;if(o!==void 0&&o.instrumentType===k.FUTURE)i=o.lastTradeDate,l=o.daysToExpiration,c=o.expiration;else{const u=await Fme(r.rootSymbol,r.activeSymbol??r.symbol,n,t,s);i=u==null?void 0:u.lastTradeDate,l=u==null?void 0:u.daysToExpiration,c=u==null?void 0:u.expiration}return{type:k.PRODUCT,fractionalType:Ed(r.fractionalType),symbol:r.symbol,displaySymbol:r.displaySymbol,rootSymbol:r.rootSymbol,description:r.description,tradeable:r.tradeable,composite:Ad(r.symbol),hasOptions:r.hasOptions,multiplier:r.multiplier,hasTradableOptions:r.hasTradableOptions!==void 0?r.hasTradableOptions:!1,activeSymbol:r.activeSymbol,priceTick:r.priceTick,gainPerTick:r.priceTickValue,lastTradeDate:i,futureExpiration:c,daysToExpiration:l,cusip:r.cusip,spc:r.spc,futureOption:r.futureOption,sourceType:vh(r.sourceType)}}case"UNDEFINED":default:return{type:ED(r.instrumentType),fractionalType:Ed(r.fractionalType),symbol:r.symbol,displaySymbol:r.displaySymbol,rootSymbol:r.rootSymbol,description:r.description,tradeable:r.tradeable,composite:Ad(r.symbol),hasOptions:r.hasOptions,hasTradableOptions:r.hasTradableOptions?r.hasTradableOptions:!1,priceTick:r.priceTick,multiplier:r.multiplier,cusip:r.cusip,spc:r.spc,futureOption:r.futureOption,sourceType:vh(r.sourceType)}}}))},ua=500,Hme=e=>t=>s=>{const n=(r,o)=>{t.dispatch(yD(r,o))};return r=>{const o=t.getState(),i=c=>!o.instruments.has(c),l=o.futureExpirations;switch(r.type){case f.PriceAlertNotificationReceived:case f.CreateAlertReceived:case f.CancelAlertSuccess:case f.SymbolSelected:case f.ChangeChartSymbol:{if(o.instruments.get(r.symbol))break;e([{header:{service:te.INSTRUMENTS,ver:0,id:`instrument/${encodeURIComponent(r.symbol)}`},params:{symbols:[r.symbol]}}],async d=>{const u=await Bo(d,ro(e),n,l);u!==void 0&&t.dispatch({type:f.InstrumentsReceived,instruments:u})});break}case f.ChartSymbolsSelected:{const d=Um(t.getState()).filter(u=>i(u));if(d.length===0)break;e([{header:{service:te.INSTRUMENTS,ver:0,id:`instrument/${encodeURIComponent(d.join("_"))}`},params:{symbols:d}}],async u=>{const h=await Bo(u,ro(e),n,l);h!==void 0&&t.dispatch({type:f.InstrumentsReceived,instruments:h})});break}case f.WorkingOrdersReceived:{const c=r.workingOrders.reduce((d,u)=>{var p;const h=((p=u.legs)==null?void 0:p.map(m=>m.symbol))??[];return Xr([...d,...h])},[]).filter(d=>i(d));if(c.length===0)break;e([{header:{service:te.INSTRUMENTS,ver:0,id:"instrument/workingOrderSymbols"},params:{symbols:c}}],async d=>{const u=await Bo(d,ro(e),n,l);u!==void 0&&t.dispatch({type:f.InstrumentsReceived,instruments:u})});break}case f.DraftOrderUpdated:{const c=r.draftOrders.reduce((d,u)=>{const h=u.legs.map(p=>p.symbol).filter(p=>i(p));return Xr([...d,...h])},[]);if(c.length===0)break;e([{header:{service:te.INSTRUMENTS,id:"instrument/draftOrderSymbols",ver:0},params:{symbols:c}}],async d=>{const u=await Bo(d,ro(e),n,l);u!==void 0&&t.dispatch({type:f.InstrumentsReceived,instruments:u})});break}case f.PositionsReceived:{const c=[...new Set([...r.positions.map(d=>d.symbol),...r.positions.map(d=>d.rootSymbol)])].filter(d=>!co(d)&&i(d));!fs(c,o.positions.positionsInstrumentsComparisonSymbols)&&c.length>0&&(t.dispatch(rR(c)),e([{header:{service:te.INSTRUMENTS,id:"instrument/positionSymbols",ver:0},params:{symbols:c}}],async d=>{const u=await Bo(d,ro(e),n,l);u!==void 0&&t.dispatch({type:f.InstrumentsReceived,instruments:u})}));break}case f.WatchlistSymbolsReceived:{const c=r.symbols.filter(i),d=c.length/ua;for(let u=0;u<d;u++){const h=[];for(let m=0;m<ua&&!(m>c.length-1);m++)h.push(c[u*ua+m]);const p=h.filter(m=>m!=null);e([{header:{service:te.INSTRUMENTS,id:`instrument/watchlistSymbols/batch-${u}`,ver:0},params:{symbols:p}}],async m=>{const g=await Bo(m,ro(e),n,l);g!==void 0&&t.dispatch({type:f.InstrumentsReceived,instruments:g})})}break}case f.ScansSymbolsReceived:{const c=r.symbols.filter(i),d=c.length/ua;for(let u=0;u<d;u++){const h=[];for(let m=0;m<ua&&!(m>c.length-1);m++)h.push(c[u*ua+m]);const p=h.filter(m=>m!=null);e([{header:{service:te.INSTRUMENTS,id:`instrument/scanSymbols/batch-${u}`,ver:0},params:{symbols:p}}],async m=>{const g=await Bo(m,ro(e),n,l);g!==void 0&&t.dispatch({type:f.InstrumentsReceived,instruments:g})})}break}case f.FuturesChainSymbolsReceived:{const c=r.symbols.filter(i),d=c.length/ua;for(let u=0;u<d;u++){const h=[];for(let m=0;m<ua&&!(m>c.length-1);m++)h.push(c[u*ua+m]);const p=h.filter(m=>m!=null);e([{header:{service:te.INSTRUMENTS,id:`instrument/futuresChainSymbols/batch-${u}`,ver:0},params:{symbols:p}}],async m=>{const g=await Bo(m,ro(e),n,l);g!==void 0&&t.dispatch({type:f.InstrumentsReceived,instruments:g})})}break}case f.OrderEventsReceived:{const c=r.events.map(m=>m.legs).filter(Ut).reduce((m,g)=>[...m,...g],[]).map(m=>m.symbol),d=r.events.map(m=>m.instrument).filter(Ut).map(m=>m.rootSymbol),u=Xr(c.concat(d)),h=new Set(u),p=Array.from(h);if(p.length===0)break;e([{header:{service:te.INSTRUMENTS,id:"instrument/orderEvents",ver:0},params:{symbols:p}}],async m=>{const g=await Bo(m,ro(e),n,l);g!==void 0&&t.dispatch({type:f.InstrumentsReceived,instruments:g})});break}case f.ActiveAlertsReceived:case f.TriggeredAlertsReceived:case f.CanceledAlertsReceived:{let c=[];r.type===f.ActiveAlertsReceived?c=r.activeAlerts:r.type===f.TriggeredAlertsReceived?c=r.triggeredAlerts:r.type===f.CanceledAlertsReceived&&(c=r.canceledAlerts);const d=c.map(h=>h.symbol).filter(Ut).filter(h=>i(h)),u=Xr(d);if(u.length===0)break;e([{header:{service:te.INSTRUMENTS,ver:0,id:"instrument/alertSymbols"},params:{symbols:u}}],async h=>{const p=await Bo(h,ro(e),n,l);p!==void 0&&t.dispatch({type:f.InstrumentsReceived,instruments:p})});break}}s(r)}},eg=e=>({type:f.UncheckAllTrades,rootSymbol:e}),Ume=(e,t)=>({type:f.CancelOrder,symbol:e,orderIds:t}),Vme=e=>({type:f.CancelOrdersFromPosition,orderIds:e}),Wme=e=>t=>s=>n=>{if(s(n),n.type===f.NavigateToSymbol)if(n.legs!==void 0&&!Ad(n.symbol)){const r=n.legs,o=r.reduce((l,c)=>(c!==void 0&&c.symbol!==void 0&&l.push(c.symbol),[...l]),[]),i=Xr([n.symbol,...o]);e([{header:{service:te.INSTRUMENTS,id:`searchForSymbol-${Qn()}`,ver:0},params:{symbols:i}}],l=>{var u;if(l.error!==void 0)return;const c=((u=l.normalizedSymbols)==null?void 0:u[n.symbol])??n.symbol;if(l.instruments.find(h=>h.symbol===c)!==void 0){if(!Gme(l,r,c)){t.dispatch(ws(n.section,c));return}const h=t.getState().userProperties.userProperties,{draftTradeLegs:p,areAllDraftTradeLegsValid:m}=Yme(l,r,h),g=p==null?void 0:p.reduce((S,T)=>(T==null?void 0:T.instrumentType)!==k.OPTION?++S:S,0);Et.unstable_batchedUpdates(()=>{t.dispatch(ws(n.section,c)),p.length&&m&&g<2&&setTimeout(()=>{t.dispatch(eg(c)),t.dispatch(Mme(c,p,n.orderType,n.limitPrice,n.stopPrice,n.orderTif)),t.dispatch(Us(ps.TRADE_TICKET))},1500)})}else t.dispatch(ws(ge.Positions)),us.replace(ut.ROOT)})}else{if(mt(t.getState())===n.symbol&&ms(t.getState())===n.section)return;t.getState().instruments.has(n.symbol)?Et.unstable_batchedUpdates(()=>{t.dispatch(ws(n.section,n.symbol))}):e([{header:{service:te.INSTRUMENTS,id:`searchForSymbol-${Qn()}`,ver:0},params:{symbols:[n.symbol]}}],r=>{if(r.error!==void 0)return;if(r.instruments.find(i=>i.symbol===n.symbol)!==void 0)Et.unstable_batchedUpdates(()=>{t.dispatch(ws(n.section,n.symbol))});else if(r.instruments.length)Et.unstable_batchedUpdates(()=>{var l;const i=((l=r.normalizedSymbols)==null?void 0:l[n.symbol])??n.symbol;t.dispatch(ws(n.section,i))});else if(n.isNavigatingFromUrl){const i=Ec(window.location.search);(i.symbol&&i.symbol===n.symbol||i.symbol&&i.symbol.trim().length)&&(t.dispatch(ws(ge.Positions)),us.replace(ut.ROOT))}})}else if(n.type===f.GetMatchingSymbolForCharts){const r=hs(t.getState()).size,o=qme(n.chartId,r);t.getState().instruments.has(n.symbol)?Et.unstable_batchedUpdates(()=>{t.dispatch(Ia(n.chartId,n.symbol)),o&&t.dispatch(ea(n.symbol))}):e([{header:{service:te.INSTRUMENTS,id:`searchForSymbol-${Qn()}`,ver:0},params:{symbols:[n.symbol]}}],i=>{if(i.error!==void 0)return;i.instruments.find(c=>c.symbol===n.symbol)!==void 0?Et.unstable_batchedUpdates(()=>{t.dispatch(Ia(n.chartId,n.symbol)),o&&t.dispatch(ea(n.symbol))}):i.instruments.length&&Et.unstable_batchedUpdates(()=>{var d;const c=((d=i.normalizedSymbols)==null?void 0:d[n.symbol])??n.symbol;t.dispatch(Ia(n.chartId,c)),o&&t.dispatch(ea(c))})})}},Gme=(e,t,s)=>{const n=e.instruments.find(r=>r.symbol===s);return n!==void 0?e.instruments.map(r=>{switch(n.instrumentType){case k.PRODUCT:case k.INDEX:return r.rootSymbol===n.rootSymbol;case k.FUTURE:return r.instrumentType===k.OPTION?r.underlyingSymbol===n.symbol&&r.tradeable:r.symbol===n.symbol&&r.tradeable;case k.OPTION:return t.length===1&&r.symbol===n.symbol&&r.tradeable;default:return r.rootSymbol===n.rootSymbol&&r.tradeable}}).every(Boolean):!1},Yme=(e,t,s)=>{var o;const n=[];let r=!0;for(const i of t)if(i!==void 0){const l=((o=e.normalizedSymbols)==null?void 0:o[i.symbol])??i.symbol,c=e.instruments.find(g=>g.symbol===l&&g.tradeable);if(c===void 0){r=!1;break}const d=ED(c.instrumentType),u=i.quantity,h=u!==void 0&&u<0?pe.Sell:pe.Buy,{quantity:p}=Pm(d,s),m={symbol:l,rootSymbol:c.rootSymbol,instrumentType:d,quantity:u!==void 0?Math.abs(u):p,direction:h};switch(c.instrumentType){case"OPTION":{n.push({...m,seriesName:c.seriesName,strike:c.strike,optionType:AD(c.optionType)});break}default:n.push(m)}}return{draftTradeLegs:n,areAllDraftTradeLegsValid:r}},qme=(e,t)=>e===Ps(1)&&t===1,Ih="N/A",Kme=e=>t=>{e({type:f.OptionChainReceived,optionChain:t})},zme=e=>(t,s,n,r=[])=>new Promise(()=>e([{header:{service:te.OPTION_CHAIN_GET,id:"option_chain/get",ver:0},params:{underlyingSymbol:t,filter:{strikeQuantity:s,seriesNames:r}}}],o=>{const i=o.optionSeries.map(l=>({name:l.name??Ih,daysToExpiration:l.daysToExpiration!==void 0?[l.daysToExpiration]:[],spreadPairs:(l.optionPairs??[]).map(c=>({spreadPair:{strikeName:c.strike!==void 0?c.strike.toString():Ih,callSymbol:c.callSymbol??Ih,putSymbol:c.putSymbol??Ih}}))}));n(i)})),Xme=(e,t,s)=>n=>{const r=n.map(o=>{const i=t.find(l=>l.id===o.name);return{...o,optionExpiration:i}});s($R(e,r))},Qme=e=>(t,s,n,r)=>{e([{header:{service:te.OPTION_SERIES_QUOTES,id:n,ver:0},params:{underlying:t,exchange:s,fields:a6}}],o=>{const i=o.series.map(l=>({name:l.name,impliedVolatility:l.values.IMPLIED_VOLATILITY,seriesExpectedMove:l.values.SERIES_EXPECTED_MOVE}));r(i)})},ul=(e,t)=>t.reduce((s,n)=>Math.abs(n-e)<Math.abs(s-e)?n:s,0),aT=(e,t)=>{const s=t[t.length-1],n=t[0];return e<=s&&e>=n},ky=(e,t,s)=>{let n=t.findIndex(r=>r>e);if(n<1&&!s){const r=t[t.length-1];return Math.floor(r)+1===e?r:e}else{if(n<1&&s){const o=t[t.length-1],i=o-t[t.length-2],l=o+i;if(e>=t[0]&&e<=l)n=t.length;else return Math.floor(o)+1===e?o:e}return t[n-1]}},dp=(e,t)=>e.minStrike===void 0||e.maxStrike===void 0||t.minStrike===void 0||t.maxStrike===void 0?t:{minStrike:Math.min(e.minStrike,t.minStrike),maxStrike:Math.max(e.maxStrike,t.maxStrike)},bE=()=>({optionChainMap:Yt(),quotes:ke(),optionChainNames:[],strikesRange:{},centeredOnField:$t.Strike,centeredOnOptionValue:0,locked:!1,centeredOnValues:ke(),expandedOptionExpirations:[],subscribedToOptionChainService:!1,strike:Number(Sw()),columnWidths:ke(),fractionalTypes:ke(),selectedSymbol:null}),Zme=(e=bE(),t)=>{switch(t.type){case f.LoadStrike:return{...e,strike:Number(Sw())};case f.SetStrike:return{...e,strike:t.strike};case f.SymbolSelected:return{...bE(),strike:e.strike,subscribedToOptionChainService:e.subscribedToOptionChainService,selectedSymbol:t.symbol};case f.SpreadPairMoreClicked:{const{minStrike:s,maxStrike:n}=t,r=e.strikesRange;return{...e,strikesRange:dp(r,{minStrike:s,maxStrike:n})}}case f.OptionChainReceived:return{...e,optionChainMap:t.optionChain.reduce((s,n)=>{const r=e.optionChainMap.get(n.name);return s.set(n.name,{...r,...n})},e.optionChainMap)};case f.OptionSeriesQuotesReceived:{if(e.selectedSymbol!==t.symbol)return{...e};const s={},n=t.optionSeriesQuotes.map(r=>r.name);return t.optionSeriesQuotes.forEach(r=>{var i;const o={...r,spreadPairs:((i=e.optionChainMap.get(r.name))==null?void 0:i.spreadPairs)??[]};s[r.name]=o}),{...e,optionChainMap:e.optionChainMap.merge(s),optionChainNames:fs(n,e.optionChainNames)?e.optionChainNames:n}}case f.OptionChainExpirationClicked:{const s=e.expandedOptionExpirations.findIndex(o=>o===t.expirationId),n=s!==-1?zl([s],e.expandedOptionExpirations):e.expandedOptionExpirations.concat(t.expirationId),r=e.optionChainNames&&e.optionChainNames.length>0?e.optionChainNames.filter(o=>n.includes(o)):n;return{...e,expandedOptionExpirations:r,strikesRange:n.length===0?{}:e.strikesRange,subscribedToOptionChainService:n.length>0}}case f.OptionChainQuotesReceived:{const s=t.quotes.reduce((n,r)=>{const o=n.get(r.symbol);return n.set(r.symbol,{...o,...r})},e.quotes);return{...e,quotes:s}}case f.OptionChainFractionalTypeReceived:return{...e,fractionalTypes:e.fractionalTypes.set(t.symbol,t.fractionalType)};case f.OptionChainTableColumnWidthChanged:{const{type:s,columnKey:n,width:r}=t.columnWidthInfo,i=(e.columnWidths.get(s)??ke()).set(n,r);return{...e,columnWidths:e.columnWidths.set(s,i)}}case f.CenteredOnFieldChange:return{...e,centeredOnField:t.centeredOnField};case f.OptionChainCenteredOn:return{...e,centeredOnOptionValue:t.centeredOnFieldValue};case f.OptionChainCenteredOnReceived:{const s=t.centeredOn||ke();return{...e,centeredOnValues:s}}case f.NearStrikeSetLockedState:return{...e,centeredOnOptionValue:t.centeredOnOptionValue,locked:t.targetState};case f.CenteredOnOptionValueSet:return{...e,centeredOnOptionValue:t.centeredOnOptionValue}}return e},Jme=(e,t,s)=>{const n=D1(e);switch(e){case ze.PROBABILITY_ITM:{const r=t.filter(i=>(i==null?void 0:i[n])===0).length,o=r===s.numZeroes;return o||(s.numZeroes=r),r===0||o}default:return t.every(r=>(r==null?void 0:r[n])!==void 0)}},xh=e=>t=>{e(MR(t))},ege=e=>(t,s,n,r,o,i=[],l,c,d,u="quotes/options")=>{const h=l;e([{header:{service:te.QUOTES_OPTIONS,id:u,ver:d},params:{underlyingSymbol:t,exchange:s,fields:h,filter:{strikeQuantity:n,seriesNames:i,minStrike:r,maxStrike:o}}}],p=>{const m=Om(h,p.items);c(m)})};let ES=0;const tge=e=>(t,s,n,r,o,i=[],l,c,d)=>{const u=++ES;let h=[],p=!1;const m={numZeroes:0},g=setTimeout(()=>{p=!0,u===ES&&c(h)},5e3);e([{header:{service:te.QUOTES_OPTIONS,id:"quotes/options/centered",ver:d},params:{underlyingSymbol:t,exchange:s,fields:[l],filter:{strikeQuantity:n,seriesNames:i,minStrike:r,maxStrike:o}}}],S=>{h=Om([l],S.items),!p&&Jme(l,h,m)&&(clearTimeout(g),p=!0,u===ES&&c(h))})};let jl=0;const sge=({getOptionExpirations:e,getOptionSeriesQuotes:t,unsubscribe:s,getOptionChainInfo:n,getOptionChainQuotes:r,getOptionChainCenteredOnQuotes:o,getFractionalTypeForOptionChain:i})=>l=>c=>async d=>{var u;switch(c(d),d.type){case f.SymbolSelected:{l.getState().optionChain.subscribedToOptionChainService&&(s("option_chain/get",te.OPTION_CHAIN_GET),s("quotes/options",te.QUOTES_OPTIONS));break}case f.SpreadPairMoreClicked:{const h=tp(),p=l.getState(),m=mt(p),g=p.optionChain,{minStrike:S,maxStrike:T}=d,y=g.strikesRange,E=dp(y,{minStrike:S,maxStrike:T});m!==null&&r(m,Pi,void 0,E.minStrike,E.maxStrike,g.expandedOptionExpirations,h,xh(l.dispatch),jl++);break}case f.OptionChainCenteredOn:{const h=d.centeredOnField,p=d.centeredOnFieldValue/100,m=l.getState(),g=mt(m),S=m.optionChain;g!==null&&o(g,Pi,void 0,1,oS,S.expandedOptionExpirations,h,T=>{s("quotes/options/centered",te.QUOTES_OPTIONS);const y=oge(T,p,h,S.expandedOptionExpirations);Et.unstable_batchedUpdates(()=>{l.dispatch(Bde(y)),l.dispatch(MR(T))})},jl++);break}case f.RequestOptionSeriesQuotes:{const h=l.getState(),p=await e(h.optionInstrumentDetails,d.symbol);yu(p)?l.dispatch($R(d.symbol,[])):t(d.symbol,Pi,d.requestId,Xme(d.symbol,p,l.dispatch));break}case f.UnsubscribeFromOptionSeriesQuotes:{s(d.requestId,te.OPTION_SERIES_QUOTES);break}case f.OptionChainExpirationClicked:{const h=l.getState(),p=mt(h),m=h.optionChain.expandedOptionExpirations.length;p!==null&&(m>0?n(p,oS,Kme(l.dispatch),h.optionChain.expandedOptionExpirations):(s("option_chain/get",te.OPTION_CHAIN_GET),s("quotes/options",te.QUOTES_OPTIONS)));break}case f.OptionChainReceived:{const h=l.getState(),p=mt(h);if(!p)break;const m=d.optionChain[0],g=(u=m==null?void 0:m.spreadPairs[0])==null?void 0:u.spreadPair.callSymbol;i(g,S=>{l.dispatch($de(p,S))});break}case f.NearStrikeSetLockedState:{const h=l.getState(),p=tp(),m=h.optionChain.expandedOptionExpirations.length;if(m!==0){const g=mt(h),S=h.optionChain.optionChainMap,T=d.targetState,y=Uf(h),b=d.centeredOnOptionValue,E=T?b:y,v=S.map(L=>L.spreadPairs.map(P=>parseFloat(P.spreadPair.strikeName))),D=[],w=h.optionChain.strike;v.forEach((L,P)=>{const F=ul(E,L),O=L.findIndex(W=>W===F),H=Math.floor(w/2),C=O-H,M=C<0?O+w:O+H,q=S.get(P);if(q!==void 0&&q.spreadPairs.length!==0){const W=q.spreadPairs.length,z=parseFloat(q.spreadPairs[C<0?0:C].spreadPair.strikeName),re=parseFloat(q.spreadPairs[M>=W?W-1:M].spreadPair.strikeName);D.push({minStrike:z,maxStrike:re})}});const N=D.reduce((L,P)=>dp(L,P),h.optionChain.strikesRange);g!==null&&m>0&&r(g,Pi,void 0,N.minStrike,N.maxStrike,h.optionChain.expandedOptionExpirations,p,xh(l.dispatch),jl++)}break}case f.GetStrikeChangeQuotes:{const h=tp(),p=l.getState(),m=mt(p),g=p.optionChain.expandedOptionExpirations.length;m!==null&&g>0&&r(m,Pi,void 0,d.minStrike,d.maxStrike,p.optionChain.expandedOptionExpirations,h,xh(l.dispatch),jl++);break}case f.LogOptionChainGammaExposure:{const h="quotes/options/gammaExposure";let p=!1;const m=l.getState(),{optionChain:{optionChainNames:g,expandedOptionExpirations:S},selectedSymbol:{selectedSymbol:T}}=m,[y]=g,b=v=>D=>{s(h,te.QUOTES_OPTIONS,()=>{p||(p=!0,nge(v,D))})},E=v=>{const[D]=v,{spreadPairs:w}=D,N=w.map(({spreadPair:P})=>parseInt(P.strikeName)),L=[Xn.GAMMA,Xn.OPEN_INT];r(T,Pi,void 0,Math.min(...N),Math.max(...N),[y],L,b(w),jl++,h)};if(T===ly&&y){const v=[...new Set([y,...S])];n(T,oS,E,v)}break}case f.UpdateOptionChainColumnsSet:{const h=l.getState(),p=d.columns,m=h.optionChain.expandedOptionExpirations.length;if(m!==0){const g=mt(h),S=h.optionChain.optionChainMap,T=Du(h),y=Uf(h),b=Lu(h),E=T?b:y,v=S.map(L=>L.spreadPairs.map(P=>parseFloat(P.spreadPair.strikeName))),D=[],w=h.optionChain.strike;v.forEach((L,P)=>{const F=ul(E,L),O=L.findIndex(W=>W===F),H=Math.floor(w/2),C=O-H,M=C<0?O+w:O+H,q=S.get(P);if(q!==void 0&&q.spreadPairs.length!==0){const W=q.spreadPairs.length,z=parseFloat(q.spreadPairs[C<0?0:C].spreadPair.strikeName),re=parseFloat(q.spreadPairs[M>=W?W-1:M].spreadPair.strikeName);D.push({minStrike:z,maxStrike:re})}});const N=D.reduce((L,P)=>dp(L,P),h.optionChain.strikesRange);g!==null&&m>0&&r(g,Pi,void 0,N.minStrike,N.maxStrike,h.optionChain.expandedOptionExpirations,p,xh(l.dispatch),jl++)}break}}},nge=(e,t)=>{const s=e.map(({spreadPair:n})=>{const r=t.find(c=>c.symbol===n.callSymbol),o=t.find(c=>c.symbol===n.putSymbol),i=r&&r.gamma&&r.openInt?Math.round(r.gamma*r.openInt):0,l=o&&o.gamma&&o.openInt?Math.round(-1*o.gamma*o.openInt):0;return{CALL:i,PUT:l.toString()==="-0"?0:l,STRIKE:Number(n.strikeName)}});console.table(s)},rge=e=>{if(!e)return;const t=e.indexOf(":");t!==-1&&(e=e.substr(0,t));for(let s=e.length-1;s>=0;s--)if(e[s].match(/[a-z]/i))if(e[s]==="C"||e[s]==="P"){const n=e.substr(0,s),r=Number(e.substr(s+1)),o=e[s];return{symbolAndExpiration:n,strike:r,optionType:o}}else break},oge=(e,t,s,n)=>{const r=new Map;let o=Number.MAX_VALUE,i=Number.MAX_VALUE,l,c=0,d={call:void 0,put:void 0};for(const u of e){let h=u[D1(s)];const p=rge(u.symbol);if(!h||!p)continue;h=Number(h);const m=Math.abs(t-Math.abs(h));l||(l=p.symbolAndExpiration),l!==p.symbolAndExpiration&&(r.set(n[c],d.call&&d.put?d:{call:void 0,put:void 0}),o=Number.MAX_VALUE,i=Number.MAX_VALUE,l=p.symbolAndExpiration,c++,d={call:void 0,put:void 0}),p.optionType===dt.Call&&m<o?(o=m,d.call={strike:p.strike,symbol:u.symbol,value:h}):p.optionType===dt.Put&&m<i&&(i=m,d.put={strike:p.strike,symbol:u.symbol,value:h})}if(l&&r.set(n[c],d.call&&d.put?d:{call:void 0,put:void 0}),r.size===0||n.length!==r.size)for(const u in n)r.set(n[u],{call:void 0,put:void 0});return r},age=e=>(t,s)=>{e([{header:{service:te.INSTRUMENTS,id:"instruments-option-chain-fractional-type",ver:0},params:{symbols:[t]}}],n=>{s(Ed(n.instruments[0].fractionalType))})},ige=e=>sge({getOptionExpirations:bD(e),getOptionSeriesQuotes:Qme(e),unsubscribe:Ks(e),getOptionChainInfo:zme(e),getOptionChainQuotes:ege(e),getOptionChainCenteredOnQuotes:tge(e),getFractionalTypeForOptionChain:age(e)}),lge=e=>t=>s=>n=>{if(n.type===f.SymbolSelected)e({symbols:[n.symbol],requestId:"studyRequest",scriptType:Df.STUDY,studies:[{name:G.VOLUME_AVG,plot:Aa.VOL_AVG,aggregationPeriod:ie.DAY,parameters:{length:"50"}}],callback:r=>{t.dispatch({type:f.StudiesReceived,studies:r})}});else if(n.type===f.ChartSymbolsSelected){const r=Um(t.getState());e({symbols:r,requestId:"studyRequest",scriptType:Df.STUDY,studies:[{name:G.VOLUME_AVG,plot:Aa.VOL_AVG,aggregationPeriod:ie.DAY,parameters:{length:"50"}}],callback:o=>{t.dispatch({type:f.StudiesReceived,studies:o})}})}s(n)},cge=e=>t=>t.studyParametersAndPlotSettings.defaults.get(e),dge=e=>t=>s=>n=>{switch(n.type){case f.GetStudyParametersAndPlotSettings:{const r=cge(n.studyName)(t.getState());r===void 0?e({studies:[n.studyName],callback:o=>{t.dispatch(pE(n.chartId,n.id,o)),n.callback&&n.callback(o)},errorCallback:o=>{t.dispatch(Spe(o))}}):(t.dispatch(pE(n.chartId,n.id,r)),n.callback&&n.callback(r));break}}s(n)},vD=e=>({type:f.QuotesReceived,quotes:e}),EE=e=>({type:f.UpdateQuoteSymbols,payload:e}),uge=100,hge=e=>t=>s=>n=>{switch(n.type){case f.Connected:{e({requestId:"primeRateQuotes",symbols:[xf],callback:xa(r=>{const o=r.find(i=>i.symbol===xf&&i.mark!==void 0);o!==void 0?(t.dispatch({type:f.QuotesReceived,quotes:r}),o.mark!==void 0&&W7(o.mark)):yw()===null?Ye({category:Ve.Errors,action:Le.GlobalRiskRateError,label:"Fell back to global risk free rate"}):Ye({category:Ve.Errors,action:Le.DynamicRiskRateFallBackError,label:"Fell back to local risk free rate"})},uge)});break}case f.SymbolSelected:case f.ChangeChartSymbol:{const r=t.getState().trades.get(n.symbol),o=(r==null?void 0:r.filter(i=>i.status!==de.Draft).map(i=>i.symbol))??[n.symbol];t.dispatch(EE({type:Is.trade,symbols:[...new Set([n.symbol,...o])]}));break}case f.ChartSymbolsSelected:{const r=Um(t.getState()),o=r.reduce((i,l)=>{const c=t.getState().trades.get(l),d=(c==null?void 0:c.filter(u=>u.status!==de.Draft).map(u=>u.symbol))??[n.firstChartSymbol];return i.concat(d)},r);t.dispatch(EE({type:Is.trade,symbols:[...new Set([n.firstChartSymbol,...o])]}));break}}s(n)},pge=e=>({clientId:t,redirectUri:s,refreshToken:n,scope:r,callback:o,errorCallback:i})=>{e([{header:{service:te.EXCHANGE_RT_FOR_EAT,id:"access_token/get",ver:0},params:{clientId:t,redirectUri:s,refreshToken:n,scope:r}}],l=>{l.accessToken?o({accessExpiresIn:l.accessExpiresIn,accessToken:l.accessToken,refreshToken:l.refreshToken}):i()})},mge=e=>({clientId:t,redirectUri:s,refreshToken:n,scope:r,callback:o,errorCallback:i})=>{e([{header:{service:te.EXCHANGE_RT_FOR_EAT,id:"access_token/get",ver:0},params:{clientId:t,redirectUri:s,refreshToken:n,scope:r}}],l=>{l.accessToken?o({accessExpiresIn:l.accessExpiresIn,accessToken:l.accessToken,refreshToken:l.refreshToken}):i()})},gge=e=>({clientId:t,redirectUri:s,appliesTo:n,issuedTo:r,refreshToken:o,scope:i,callback:l,errorCallback:c})=>{e([{header:{service:te.EXCHANGE_RT_FOR_AUTH_CODE,id:"auth_code/get",ver:0},params:{clientId:t,redirectUri:s,appliesTo:n,issuedTo:r,refreshToken:o,scope:i}}],d=>{d.code?l({code:d.code}):c()})};let Sge=0;const fge=e=>({studies:t,callback:s,errorCallback:n})=>{e([{header:{service:te.STUDIES_GET,id:`studiesGet-${Sge++}`,ver:0},params:{studies:t}}],r=>{r.type==="error"?n(r.error):r.studiesGetResponseJTOS&&r.studiesGetResponseJTOS.forEach(o=>{const i={name:o.name,plots:o.plots,parametersInfo:o.parametersInfo};s(i)})})},Tge=e=>({type:f.FuturesChainQuotesReceived,quotes:e}),yge=e=>({type:f.FuturesChainSymbolsReceived,symbols:e}),Cge=(e,t)=>s=>n=>r=>{switch(r.type){case f.GetFutureExpirations:{e(r.symbol,(o,i)=>{s.dispatch(yD(o,i));const l=i.map(c=>c.symbol);l.length&&(s.dispatch(yge(l)),t({requestId:"futuresChainQuotes",symbols:l,callback:c=>{s.dispatch(Tge(c))}}))});break}}n(r)},bge=()=>({type:f.GetStudyCategories}),Ege=e=>({type:f.StudyCategoriesReceived,categories:e}),Age=e=>t=>s=>n=>{switch(n.type){case f.SymbolSelected:case f.ChartSymbolsSelected:{t.getState().studyCategories.categories.length>0||t.dispatch(bge());break}case f.GetStudyCategories:{e({callback:r=>{t.dispatch(Ege(r))}});break}}s(n)},vge=e=>({callback:t})=>{e([{header:{service:te.STUDY_CATEGORIES,id:"study_categories",ver:0},params:{}}],s=>{s.type!=="error"&&t(s.categories)})};var Fi=(e=>(e.POSITIONS="positions",e.GROUPED_POSITIONS="grouped_positions",e))(Fi||{});const Ige=(e,t,s,n)=>{let r=ke();return e.forEach(o=>{const i=t(o),l=r.get(i);l===void 0?r=r.set(i,s(o)):r=r.set(i,n(l,s(o)))}),r},xge=4,wge=15,wh=(e,t)=>{e<=xge&&setTimeout(()=>{t()},wge**e)};let iT=!1;const Oge=(e,t,s)=>n=>r=>o=>{let i=0,l=0;const{subscriptionType:c,spreadGrouping:d}=n.getState().positions,u=Js(Cs.SPREAD_GROUPING),h=d&&u,p=c===Fi.GROUPED_POSITIONS&&(!d||!u)||c===Fi.POSITIONS&&d&&u;switch(o.type){case f.AccountSelectionCleared:{const m=Tr(n.getState()),g=G1(n.getState());if(m.length&&!g)break;const S=()=>{t((y,b)=>{const E=Rh(n,b);n.dispatch(V0(y,E))},()=>{l++,wh(l,S)})},T=()=>{Oh(!1),e((y,b)=>{if(iT)return;const E=Rh(n,b);n.dispatch(U0(y,E))},()=>{i++,wh(i,T)})};Oh(!0),h?(n.dispatch(yh(Fi.GROUPED_POSITIONS)),s("grouped_positions",te.GROUPED_POSITIONS,S),s("positions",te.POSITIONS,T)):(n.dispatch(yh(Fi.POSITIONS)),s("positions",te.POSITIONS,T),p&&s("grouped_positions",te.GROUPED_POSITIONS));break}case f.AccountSelected:{if(!o.account.tradeable)break;const g=()=>{t((T,y)=>{const b=Rh(n,y);n.dispatch(V0(T,b))},()=>{l++,wh(l,g)},o.account.code)},S=()=>{Oh(!1),e((T,y)=>{if(iT)return;const b=Rh(n,y);n.dispatch(U0(T,b))},()=>{i++,wh(i,S)},o.account.code)};Oh(!0),h?(n.dispatch(yh(Fi.GROUPED_POSITIONS)),s("grouped_positions",te.GROUPED_POSITIONS,g),s("positions",te.POSITIONS,S)):(n.dispatch(yh(Fi.POSITIONS)),s("positions",te.POSITIONS,S),p&&s("grouped_positions",te.GROUPED_POSITIONS));break}case f.UpdateSpreadGrouping:{bj(o.isSpreadGroupingEnabled);break}}r(o)},Oh=e=>iT=e,Rge=e=>{const t={},s=(r,o,i)=>{t[o]===void 0&&(t[o]={positions:[],count:0}),t[o].count+=1,t[o][r].push(i)};e.forEach(r=>{const{rootSymbol:o}=r;s("positions",o,r)});const n={};for(const[r,o]of Object.entries(t)){let i=!1;if(o.count>1&&(i=!0),o.count===1){if(o.positions.length!==1)i=!0;else if(o.positions.length===1){const l=o.positions[0].type;i=[k.OPTION].includes(l)}}n[r]=i}return n},Dge=e=>Ige(e,t=>t.rootSymbol,t=>{const s={};for(const n of Op){const r=t[n];s[n]===void 0&&(s[n]=[]),r!==void 0&&s[n].push(r)}return s},(t,s)=>{for(const n of Op)t[n]=[...t[n],...s[n]];return t}),Lge=(e,t)=>e.map((s,n)=>{const r={};for(const o of Op){const i=F1.includes(o),l=i&&s[o].length!==1,c=i&&t[n],d=s[o].length===0;if(l||d||c||wp.includes(o))continue;const u=s[o].reduce((h,p)=>AE(h)+AE(p),0);r[o]=u}for(const o of wp)if(s[o].length===1)r[o]=s[o][0];else{const i=r.netLiquidity;switch(o){case"plOverallPercent":{const l=r.plOpen,c=r.openCost;if(l===void 0||c===void 0)continue;r[o]=l/Math.abs(c);break}case"plDayPercent":{const l=r.plDay;if(l===void 0||i===void 0)continue;r[o]=l/Math.abs(i-l);break}case"plYtdPercent":{const l=r.plYtd;if(l===void 0||i===void 0)continue;r[o]=l/Math.abs(i-l);break}}}return r}),Rh=(e,t)=>{const s=e.getState(),n=QO(s),r=Rge(n),o=Dge(t);return Lge(o,r)},AE=e=>{if(e===void 0)throw new Error("this should never happen we filter out undefined numbers");return e},ID=e=>(t,s,n="COMBINED ACCOUNT",r="positions")=>{e([{header:{service:te.POSITIONS,ver:0,id:r},params:{account:n,betaWeightingSymbols:["SPX"],fields:["MARK","QUANTITY","OPEN_PRICE","NET_LIQ","PL_OPEN","PL_YTD","PL_DAY","ITM","DELTA","GAMMA","THETA","VEGA","RHO","OPEN_COST","BP_EFFECT","MARK_CHANGE","MARGIN"]}}],o=>{if(o.type==="error")s(o.error);else{const i=[],l=[];o.items.forEach(u=>{u.aggregated?l.push(u):i.push(u)});const c=i.map(u=>{var v,D;if(u.values.QUANTITY===void 0||u.values.QUANTITY===0)return;const h=u.values.PL_OPEN,p=u.values.ITM,m=u.values.PL_YTD,g=u.values.PL_DAY,S=u.values.NET_LIQ,T=Pr([k.FUTURE.valueOf(),k.FOREX.valueOf()].includes(u.instrument.instrumentType),0,u.values.OPEN_COST),{plDayPercent:y,plYtdPercent:b,plOverallPercent:E}=hc({plOpen:h,plYtd:m,openCost:T,netLiquidity:S,plDay:g});switch(u.instrument.instrumentType){case"STOCK":case"BOND":case"CASH":case"FOREX":case"FUND":case"FUTURE":case"INDEX":case"MANUAL":case"WARRANT":case"RIGHT":case"ETF":case"UNDEFINED":{let w;switch(u.instrument.instrumentType){case"STOCK":w=k.STOCK;break;case"FUTURE":w=k.FUTURE;break;case"FOREX":w=k.FOREX;break;case"INDEX":w=k.INDEX;break;case"FUND":w=k.FUND;break;case"CASH":w=k.CASH;break;case"MANUAL":w=k.MANUAL;break;case"WARRANT":w=k.WARRANT;break;case"RIGHT":w=k.RIGHT;break;case"ETF":w=k.ETF;break;case"BOND":w=k.BOND;break;case"UNDEFINED":w=k.NONE;break;default:return}return{id:`${encodeURIComponent(u.account)}/${encodeURIComponent(u.instrument.symbol)}`,type:w,account:u.account,symbol:u.instrument.symbol,rootSymbol:u.instrument.rootSymbol,description:u.instrument.description,quantity:u.values.QUANTITY,openPrice:u.values.OPEN_PRICE,netLiquidity:S,plOpen:h,plYtd:m,plDay:g,plOverallPercent:E,plYtdPercent:b,plDayPercent:y,delta:u.values.DELTA,gamma:u.values.GAMMA,theta:u.values.THETA,vega:u.values.VEGA,openCost:T,buyingPowerEffect:u.values.BP_EFFECT,margin:u.values.MARGIN,betaWeightingsSpx:(v=u.betaWeightings)==null?void 0:v[0].deltaBetaWeighting}}case"OPTION":return{id:`${encodeURIComponent(u.account)}/${encodeURIComponent(u.instrument.symbol)}`,type:k.OPTION,account:u.account,symbol:u.instrument.symbol,description:u.instrument.description,rootSymbol:u.instrument.rootSymbol,underlyingSymbol:u.instrument.underlyingSymbol,quantity:u.values.QUANTITY,openPrice:u.values.OPEN_PRICE,netLiquidity:S,plOpen:h,plYtd:m,plDay:g,inTheMoney:p,plOverallPercent:E,plYtdPercent:b,plDayPercent:y,delta:u.values.DELTA,gamma:u.values.GAMMA,theta:u.values.THETA,vega:u.values.VEGA,openCost:T,buyingPowerEffect:u.values.BP_EFFECT,margin:u.values.MARGIN,betaWeightingsSpx:(D=u.betaWeightings)==null?void 0:D[0].deltaBetaWeighting};default:return}}).filter(Ut),d=l.map(u=>{var v;const h=u.values.PL_OPEN,p=u.values.PL_YTD,m=u.values.PL_DAY,g=u.values.ITM,S=u.values.NET_LIQ,T=Pr([k.FUTURE.valueOf(),k.FOREX.valueOf(),k.PRODUCT.valueOf()].includes(u.instrument.instrumentType),0,u.values.OPEN_COST),{plDayPercent:y,plYtdPercent:b,plOverallPercent:E}=hc({plOpen:h,plYtd:p,openCost:T,netLiquidity:S,plDay:m});return{rootSymbol:u.instrument.rootSymbol,buyingPowerEffect:u.values.BP_EFFECT,openPrice:u.values.OPEN_PRICE,quantity:u.values.QUANTITY,openCost:T,netLiquidity:S,plOpen:h,plOverallPercent:E,plYtd:p,plYtdPercent:b,plDay:m,inTheMoney:g,plDayPercent:y,delta:u.values.DELTA,gamma:u.values.GAMMA,theta:u.values.THETA,vega:u.values.VEGA,margin:u.values.MARGIN,betaWeightingsSpx:(v=u.betaWeightings)==null?void 0:v[0].deltaBetaWeighting}});t(c,d)}})},hu=e=>({type:f.SetLiveSupportChatWindow,liveSupportChatWindow:e}),pu=e=>({type:f.SetLiveSupportDesktopChatWindowCoordinates,liveSupportWindowCoordinates:e}),_ge=e=>({type:f.StartLiveSupportChat,chatMessage:e}),Nge=e=>({type:f.SetLiveSupportChatHours,liveSupportChatHours:e}),AS=e=>({type:f.SetLiveSupportChatId,chatId:e}),xD=()=>({type:f.CloseLiveSupportChat}),Pge=()=>({type:f.ClearLiveSupportMessages}),vS=e=>({type:f.AddLiveSupportMessage,message:e}),kge=e=>({type:f.AddLiveSupportMessages,messages:e}),Mge=e=>({type:f.SendLiveSupportMessage,chatMessage:e}),pc=(e,t)=>({type:f.SetIsCloseChatPromptShown,isCloseChatPromptShown:e,nextActionAfterCloseChat:t}),wD={sun:{start:{hour:16,minute:0,second:0},end:{hour:19,minute:0,second:0}},mon:{start:{hour:6,minute:0,second:0},end:{hour:19,minute:0,second:0}},tues:{start:{hour:6,minute:0,second:0},end:{hour:19,minute:0,second:0}},wed:{start:{hour:6,minute:0,second:0},end:{hour:19,minute:0,second:0}},thurs:{start:{hour:6,minute:0,second:0},end:{hour:19,minute:0,second:0}},fri:{start:{hour:6,minute:0,second:0},end:{hour:17,minute:0,second:0}}},OD=({inputDate:e,rangeConfig:t=wD}={})=>{const s=e||new Date;let n=!1;const r=et.utc(s).tz(Po.America_Chicago),o=r.day(),i=Zh[o];if(t[i]){const l=t[i].start,c=t[i].end,d=r.clone().set("hours",l.hour).set("minutes",l.minute).set("seconds",l.second),u=r.clone().set("hours",c.hour).set("minutes",c.minute).set("seconds",c.second);r.isSame(d)||r.isSame(u)||r.isBetween(d,u)?n=!0:n=!1}return n};var Sr=(e=>(e.minimized="minimized",e.maximized="maximized",e.closed="closed",e))(Sr||{});const $ge={liveSupportChatWindow:"closed",chatId:pr.CHAT_NOT_STARTED,messages:[],liveSupportWindowCoordinates:uy,isCloseChatPromptShown:!1,liveSupportChatHours:wD},jge=(e=$ge,t)=>{switch(t.type){case f.SetLiveSupportChatWindow:return{...e,liveSupportChatWindow:t.liveSupportChatWindow};case f.SetLiveSupportChatId:return{...e,chatId:t.chatId};case f.AddLiveSupportMessage:return{...e,messages:[...e.messages,t.message]};case f.AddLiveSupportMessages:return{...e,messages:[...e.messages,...t.messages]};case f.ClearLiveSupportMessages:return{...e,messages:[]};case f.SetLiveSupportChatHours:return{...e,liveSupportChatHours:t.liveSupportChatHours};case f.SetLiveSupportDesktopChatWindowCoordinates:return{...e,liveSupportWindowCoordinates:t.liveSupportWindowCoordinates};case f.SetIsCloseChatPromptShown:return{...e,isCloseChatPromptShown:t.isCloseChatPromptShown,nextActionAfterCloseChat:t.nextActionAfterCloseChat};default:return e}},Bge=({chatId:e,allChatRooms:t})=>t.filter(s=>s.chatId===e),Fge=({requiredChatRooms:e})=>e.some(({status:t})=>t==="CLOSED"),Hge=({requiredChatRooms:e,existingMessages:t})=>t?e.filter(s=>!t.some(n=>{var r;return n.messageId&&n.messageId===((r=s==null?void 0:s.lastMessage)==null?void 0:r.messageId)})):e,Uge=(e,t=0,s)=>e.map(n=>{const r=n==null?void 0:n.lastMessage,o=r==null?void 0:r.nickname,i=t!==1&&s===String(r==null?void 0:r.userId)?ar.USER:ar.SERVICE,l=i===ar.USER?au[ar.USER]:o??au[ar.SERVICE],c=r!=null&&r.messageParts?{imageMessageParts:Vge(r==null?void 0:r.messageParts)}:{};return{message:n.lastMessageText??"",lastMessageTime:n.lastMessageTime,creator:i,messageId:r==null?void 0:r.messageId,creatorNickName:l,...c}}),Vge=e=>e.reduce((t,s)=>(s.type==="image"&&t.push({type:s.type,imageType:s.imageType||iu.PNG,height:s.height,bytes:s.bytes?s.bytes:"",width:s.width,text:s.text||"Image"}),t),[]),tg=e=>e.liveSupportChat.liveSupportChatWindow,RD=e=>e.liveSupportChat.liveSupportChatWindow===Sr.maximized,Wge=e=>e.liveSupportChat.liveSupportChatWindow===Sr.closed,ku=e=>e.liveSupportChat.chatId,sg=e=>e.liveSupportChat.liveSupportChatHours,Gge=e=>{const t=sg(e),s=Intl.DateTimeFormat().resolvedOptions().timeZone;let n,r=0;const o=et().tz(Po.America_Chicago),i=et().tz(s),l=Zh[i.day()],c=g=>{if(++r,r>7)return;const S=g.day(),T=Zh[S],y=t[T];if(n=T,y){const b=r-1,E=mh(y.end,b),v=mh(y.start,b);if(i.isBefore(E))return n=Zh[v.day()],y}return c(g.add(1,"days"))},d=c(o);if(!d)return{startTime:void 0,endTime:void 0,nextChatAvailableDay:void 0};const u=mh(d.start),h=mh(d.end),p=Ip(u.hour(),u.minute()),m=Ip(h.hour(),h.minute());return{startTime:p,endTime:m,nextChatAvailableDay:l===n?void 0:n}},Yge=e=>OD({rangeConfig:sg(e)}),qge=e=>{const{chatId:t}=e.liveSupportChat;return t===pr.CHAT_ENDED?!1:t>pr.CHAT_NOT_STARTED?!0:OD({rangeConfig:sg(e)})},DD=e=>e.liveSupportChat.messages,Kge=e=>e.liveSupportChat.liveSupportWindowCoordinates,zge=e=>e.liveSupportChat.isCloseChatPromptShown,Xge="23:59:59",Qge="00:00:00",Zge=e=>{if(!e)return{};if(!CR.decode(e).isRight())return{};const s=Object.entries(e);return cs.sortBy(s,([r])=>c6.indexOf(r)).reduce((r,[o,i],l)=>{const c=d6[o];return i!=null&&i.open&&(r={...r,[c]:{start:vE(i.fromTime),end:vE(i.toTime===Qge?Xge:i.toTime)}}),r},{})},vE=e=>{if(!e)return{};const t=e.split(":");return{hour:parseInt(t[0]),minute:parseInt(t[1]),second:parseInt(t[2])||0}},Jge=e=>{const n=atob(e.split(",")[1]).length*2;return Math.floor(n)},eSe=(e,t)=>{let s={message:t?"":e,creator:ar.USER,creatorNickName:au[ar.USER],lastMessageTime:new Date().toISOString()};if(t){if(Jge(e)>=wle)return s={...s,creator:ar.SERVICE,creatorNickName:au[ar.SERVICE],error:{title:"Can not send screenshot",description:"Window resolution is too large, decrease window size and try again",errorType:dy.ERROR}},s;const r=e.substring(e.indexOf("data:image/")+11,e.indexOf(";"));s.imageMessageParts=[{type:"image",bytes:e.split("base64,")[1],text:"",imageType:r}]}return s},tSe=(e,t,s,n,r,o)=>i=>l=>c=>{switch(c.type){case f.StartLiveSupportChat:{const d=ka(i.getState()).username;e({newChatName:c.chatMessage,body:c.chatMessage,callback:u=>{i.dispatch(AS(u)),i.dispatch(vS({message:c.chatMessage,creator:ar.USER,creatorNickName:au[ar.USER]})),s({callback:h=>{const p=Bge({chatId:u,allChatRooms:h});if(Fge({requiredChatRooms:p})){i.dispatch(AS(pr.CHAT_ENDED));return}const g=DD(i.getState()),S=Hge({existingMessages:g,requiredChatRooms:p});i.dispatch(kge(Uge(S,g.length,d)))}})}});break}case f.CloseLiveSupportChat:{const{chatId:d,nextActionAfterCloseChat:u}=i.getState().liveSupportChat;i.dispatch(pc(!1));const h=()=>{i.dispatch(AS(pr.CHAT_NOT_STARTED)),i.dispatch(Pge()),i.dispatch(hu(Sr.closed)),i.dispatch(pu(uy)),r(te.SUPPORT_CHATS,te.SUPPORT_CHATS),u&&i.dispatch(u)};d>pr.CHAT_NOT_STARTED?t({chatId:d,callback:p=>{h()}}):h();break}case f.SendLiveSupportMessage:{const{chatId:d}=i.getState().liveSupportChat,u=c.chatMessage.includes("base64,"),h=eSe(c.chatMessage,u);if(h.error){i.dispatch(vS(h));break}let p=c.chatMessage;u&&(p=`<img src="${c.chatMessage}"/>`),d>pr.CHAT_NOT_STARTED&&n({chatId:d,body:p,callback:m=>{h.messageId=m.messageId,i.dispatch(vS(h))}});break}case f.Connected:{o({callback:d=>{i.dispatch(Nge(Zge(d.chatHours)))}});break}}l(c)},sSe=e=>({body:t,newChatName:s,callback:n})=>{e([{header:{service:te.CREATE_SUPPORT_CHAT,id:te.CREATE_SUPPORT_CHAT,ver:0},params:{channel:xle,newChatName:s,body:t}}],r=>{var o;n((o=r==null?void 0:r.chatRoom)==null?void 0:o.chatId)})},nSe=e=>({callback:t})=>{e([{header:{service:te.SUPPORT_CHATS,id:te.SUPPORT_CHATS,ver:0},params:{}}],s=>{t(s.chatRooms||[])})},rSe=e=>({chatId:t,callback:s})=>{e([{header:{service:te.CLOSE_SUPPORT_CHAT,id:te.CLOSE_SUPPORT_CHAT,ver:0},params:{chatId:t}}],n=>{s(n)})},oSe=e=>({chatId:t,body:s,callback:n})=>{e([{header:{service:te.SEND_SUPPORT_MESSAGE,id:te.SEND_SUPPORT_MESSAGE,ver:0},params:{targetId:t,body:s}}],r=>{n({messageId:r.messageId,succeeded:r.succeeded})})},aSe=e=>({callback:t})=>{e([{header:{service:te.GET_SUPPORT_CHAT_GLOBAL_MESSAGE,id:te.GET_SUPPORT_CHAT_GLOBAL_MESSAGE,ver:0},params:{}}],s=>{t(s)})},iSe=e=>(t,s,n,r)=>{e([{header:{service:te.CALENDAR_EVENTS,id:t,ver:r},params:{symbols:s}}],o=>{if(io.get(o.requestId)!==o.requestVer)return;const c=(o.items===void 0?[]:o.items).map(d=>{var h,p;const u=d;return((h=d==null?void 0:d[vo.EARNING])==null?void 0:h.estimatedEtype)!==void 0&&(u[vo.EARNING].estimatedStatus=(p=d==null?void 0:d[vo.EARNING])==null?void 0:p.estimatedEtype),u});n(c)})},lSe=e=>(t,s,n,r,o)=>{e([{header:{service:te.HISTORICAL_CALENDAR_EVENTS,id:`historicalCalendarEvents-${t}`,ver:0},params:{symbol:t,startTime:s,endTime:n,corporateCategories:r}}],i=>{const l={symbol:t};if(i===void 0)return o(l);Object.keys(i).forEach(c=>{switch(c){case ao.CONFERENCE_CALLS:{l[ao.CONFERENCE_CALLS]=i.confCalls;break}case ao.EARNINGS:{if(i.earnings){const d=i.earnings.reduce((u,h)=>{const p={...h,estimatedStatus:h.estimatedEtype};return delete p.estimatedEtype,u.push(p),u},[]);l[ao.EARNINGS]=d}break}case ao.DIVIDENDS:{l[ao.DIVIDENDS]=i.dividends;break}case ao.SPLITS:{l[ao.SPLITS]=i.splits;break}}}),o(l)})},My=[jn.ACCOUNT_POSITIONS,jn.WORKING_ORDERS,jn.PERSONAL],LD=e=>e.watchlists.selectedWatchlistId,$y=e=>t=>({id:t.id,description:t.name,type:t.type,rootCategory:e}),jy=e=>e.watchlists.watchlistCategories,_D=e=>e.watchlists.selectedMenuTrail,ND=e=>e.watchlists.currentMenuTrail,cSe=x(_D,e=>!(e&&e.length>0)),dSe=e=>e.watchlists.areWatchlistSymbolsLoading,Mu=x(jy,e=>e==null?void 0:e.reduce((t,s)=>{var n;if(My.includes(s.name)){const r=(n=s.watchlists)==null?void 0:n.map($y(jn.PERSONAL));return[...t,...r]}return t},[])),uSe=x(Mu,e=>(e==null?void 0:e.filter(t=>t.type===Xm.STOCK_SCAN))??[]),hSe=(e,t)=>{var s;return(s=e.watchlists)==null?void 0:s.map($y(t),[])},PD=x(Mu,jy,(e,t)=>{const n={personal:{watchlists:e}};function r(o,i){var c,d;const l={};return((c=o.watchlists)==null?void 0:c.length)>0&&(l.watchlists=hSe(o,i)),(d=o==null?void 0:o.subcategories)==null||d.forEach(u=>{l[u.name]=r(u,i)}),l}return t==null||t.forEach(o=>{My.includes(o.name)||(n[o.name]=r(o,o.name))}),n}),kD=(e,t)=>{let s;return Object.keys(e).forEach(n=>{if(n!=="watchlists"&&n!=="personal"){if(n===t){s=e[n];return}s||(s=kD(e[n],t))}}),s},pSe=x(ND,PD,(e,t)=>{const s=e&&[...e],n=s==null?void 0:s.pop();return n&&n!=="Browse Categories"?kD(t,n):t}),mSe=(e,t)=>e==null?void 0:e.find(s=>s.id===t),gSe=(e,t)=>e==null?void 0:e.find(s=>s.id===t),By=(e,t)=>{let s=gSe(e==null?void 0:e.watchlists,t);if(!s){const n=(e==null?void 0:e.subcategories)||[];for(let r=0;r<n.length;r++)if(s=By(n[r],t),s)return s}return s},MD=x(LD,Mu,jy,(e,t,s)=>{let n;return e&&(n=mSe(t,e),n||s==null||s.forEach(r=>{if(My.includes(r.name))return;const o=By(r,e);o&&(n=$y(r.name)(o))})),n}),SSe=e=>({type:f.WatchlistReceived,watchlistCategories:e}),Hi=e=>({type:f.WatchlistSelected,currentWatchlistId:e}),fSe=e=>({type:f.RequestWatchlistQuotes,newWatchlistId:e}),TSe=e=>({type:f.UnsubscribeFromWatchlistQuotes,currentWatchlistId:e}),vd=e=>({type:f.WatchlistMenuTrailSelected,selectedMenuTrail:e}),ySe=e=>({type:f.WatchlistCurrentMenuTrailSelected,currentMenuTrail:e}),CSe=(e,t)=>({type:f.WatchlistAddSymbol,watchlistId:e,symbol:t}),bSe=e=>({type:f.WatchlistAddSymbolError,error:e}),ESe=({watchlistName:e,symbols:t=[],successCallback:s,errorCallback:n})=>({type:f.WatchlistCreate,watchlistName:e,symbols:t,successCallback:s,errorCallback:n}),ASe=e=>({type:f.WatchlistDelete,watchlistId:e}),vSe=e=>({type:f.WatchlistCreateError,error:e}),Fy=e=>({type:f.WatchlistClearError,errorToClear:e}),ISe=(e,t,s,n,r,o,i,l,c)=>d=>u=>h=>{const p=g=>{const S=g.find(y=>y.name===jn.TOP10),T=S==null?void 0:S.watchlists.find(y=>y.name===cp.TOP10_ACTIVE_NYSE);T!==void 0&&(d.dispatch(Hi(T.id)),d.dispatch(vd(yhe)))},m=g=>g==null?void 0:g.watchlists.find(S=>S.id===za.ACCOUNT_POSITIONS);switch(h.type){case f.Connected:{e(g=>{const S=g.find(b=>b.name===jn.ACCOUNT_POSITIONS),T=g.find(b=>b.name===jn.WORKING_ORDERS);if(S!==void 0){const b=m(S);b!==void 0&&(b.name=__(cp.ALL_ACCOUNT_POSITIONS))}if(T!==void 0){const b=T.watchlists.find(E=>E.id===za.WORKING_ORDERS);b!==void 0&&(b.name=__(cp.WORKING_ORDERS))}d.dispatch(SSe(g));const{tradingSystem:y}=d.getState().userSettings;if(y!==void 0){const b=i0(y),E=U7(y);let v=!1;if(b&&(v=g.some(D=>!!By(D,b))),E!==null&&d.dispatch(vd(E)),b!==null&&v){d.dispatch(Hi(b));return}if(S!==void 0){const D=m(S);if(D){t(D.id,w=>{w!=null&&w.length?Et.unstable_batchedUpdates(()=>{d.dispatch(Hi(D.id)),d.dispatch({type:f.WatchlistSymbolsReceived,symbols:w}),d.dispatch(vd(void 0))}):p(g)});return}}p(g);return}d.dispatch(Hi(za.ACCOUNT_POSITIONS))}),u(h);break}case f.WatchlistSelected:{const{tradingSystem:g}=d.getState().userSettings;g!==void 0&&H7(g,h.currentWatchlistId),u(h);break}case f.RequestWatchlistQuotes:{t(h.newWatchlistId,g=>{const S=g??[];d.dispatch({type:f.WatchlistSymbolsReceived,symbols:S})}),s({watchlistId:h.newWatchlistId,requestId:`watchlistQuotes-${h.newWatchlistId}`,callback:g=>{d.dispatch({type:f.WatchlistReceivedQuotes,quotes:g})}}),u(h);break}case f.UnsubscribeFromWatchlistQuotes:{c(`${te.WATCHLIST_SYMBOLS}-${h.currentWatchlistId}`,te.WATCHLIST_SYMBOLS),c(`watchlistQuotes-${h.currentWatchlistId}`,te.QUOTES),u(h);break}case f.WatchlistMenuTrailSelected:{const{tradingSystem:g}=d.getState().userSettings;g!==void 0&&V7(g,h.selectedMenuTrail),u(h);break}case f.WatchlistAddSymbol:{d.dispatch(Fy("addSymbol")),n(h.watchlistId,h.symbol,d.getState().instruments.has(h.symbol),g=>{d.dispatch({type:f.WatchlistAddSymbolClearLoading}),g!==void 0&&d.dispatch(bSe(g))}),u(h);break}case f.WatchlistCreate:{const g=T=>{d.dispatch(vSe(T)),h.errorCallback!==void 0&&h.errorCallback(T)},S=T=>{h.successCallback!==void 0&&h.successCallback(T),Et.unstable_batchedUpdates(()=>{d.dispatch(Hi(T.id)),d.dispatch(vd(void 0))})};r({watchlistName:h.watchlistName,symbols:h.symbols,handleSuccessCallback:S,handleErrorCallback:g}),u(h);break}case f.WatchlistDelete:{const{tradingSystem:g}=d.getState().userSettings;if(o(h.watchlistId),g!==void 0){const S=i0(g);S!==null&&S===h.watchlistId&&d.dispatch(Hi(za.ACCOUNT_POSITIONS))}u(h);break}case f.WatchlistRearrange:{i(h.watchlistId,h.symbols),u(h);break}case f.WatchlistRemoveSymbol:{l(h.watchlistId,h.symbols),u(h);break}default:u(h)}};var Id=(e=>(e.API="api",e.AUTHENTICATION="authentication",e.AUTHZ_API="authz-api",e.FEEDBACK="feedback",e.CLICKSTREAM="analyticsapi",e.UPDATE="update",e))(Id||{}),up=(e=>(e.CLIENT_ID="CustomerWeb",e.APPLIES_TO="urn:schwab:comsec:1.0:entity:CustomerWeb",e.ISSUED_TO="urn:schwab:comsec:1.0:entity:TOSWeb",e))(up||{}),hp=(e=>(e.CLIENT_ID="TOSWeb",e.APPLIES_TO="urn:schwab:comsec:1.0:entity:TOSWeb",e.ISSUED_TO="urn:schwab:comsec:1.0:entity:SWS",e))(hp||{});const xSe=(e,t,s)=>n=>r=>async o=>{switch(o.type){case f.GetAuthCodeForSsoToSchwab:case f.GetAuthCodeForSsoToMoveMoney:case f.GetAuthCodeForSsoToRealizedGainLoss:case f.GetAuthCodeForSsoToEducation:{const i=await Lr(),l=i.schwabSsoUrl,c=i.schwabLoginUrl,d=sessionStorage.getItem("refreshToken"),u=n.getState().tokenExchanges.isSsoAllowed;let h;o.type===f.GetAuthCodeForSsoToEducation?h=rr.eduSancParamValue:o.type===f.GetAuthCodeForSsoToMoveMoney?h=rr.moveMoneySancParamValue:o.type===f.GetAuthCodeForSsoToRealizedGainLoss&&(h=rr.realizedGainLossSancParamValue),d&&u?e({clientId:up.CLIENT_ID,redirectUri:window.location.origin+ut.OAUTH,appliesTo:up.APPLIES_TO,issuedTo:up.ISSUED_TO,refreshToken:d,scope:Id.AUTHENTICATION,callback:p=>{const m=`${l}?code=${p.code}`;window.open(h?`${m}&SANC=${h}`:m,"_blank")},errorCallback:()=>{window.open(h?`${c}?SANC=${h}`:c,"_blank")}}):window.open(h?`${c}?SANC=${h}`:c,"_blank");break}case f.GetEatForFeedback:{const{callback:i,errorCallback:l}=o,c=window.location.origin+ut.OAUTH,d=sessionStorage.getItem("refreshToken"),h=sessionStorage.getItem("isGP")==="true"?rr.lmsGuestPassApiKey:rr.lmsApiKey;d&&t({clientId:h,redirectUri:c,refreshToken:d,scope:Id.FEEDBACK,callback:i,errorCallback:l});break}case f.GetNewtForClickStream:{const{callback:i,errorCallback:l}=o,c=window.location.origin+ut.OAUTH,d=sessionStorage.getItem("refreshToken"),h=sessionStorage.getItem("isGP")==="true"?rr.lmsGuestPassApiKey:rr.lmsApiKey;d&&s({clientId:h,redirectUri:c,refreshToken:d,scope:Id.CLICKSTREAM,callback:i,errorCallback:l});break}case f.GetAuthCodeForTradingSystemSwitch:{const{callback:i,errorCallback:l}=o,c=sessionStorage.getItem("refreshToken");c&&e({clientId:hp.CLIENT_ID,redirectUri:window.location.origin+ut.OAUTH,appliesTo:hp.APPLIES_TO,issuedTo:hp.ISSUED_TO,refreshToken:c,scope:Id.API,callback:i,errorCallback:l});break}case f.DisableSso:{sessionStorage.setItem("ossExpired","true");break}case f.EnableSso:{sessionStorage.removeItem("ossExpired");break}}r(o)},Hy=e=>({type:f.ToggleSelectedWorkingOrders,ids:Array.isArray(e)?e:[e]}),wSe=(e,t,s)=>({type:f.OrderBookTrayEditButtonPressed,orderId:e,rootSymbol:s,symbol:t}),OSe=()=>({type:f.OrderBookAllCheckboxClicked}),RSe=e=>t=>s=>n=>{(n.type===f.CancelOrder||n.type===f.CancelOrdersFromPosition)&&(n.orderIds.forEach(r=>{e([{header:{service:te.CANCEL_ORDER,id:`cancel-${r}`,ver:0},params:{orderId:r}}])}),n.type===f.CancelOrdersFromPosition&&t.dispatch(Hy(n.orderIds)),n.type===f.CancelOrder&&t.dispatch({type:f.DeleteDraftOrder,symbol:n.symbol})),s(n)},DSe=e=>t=>(s,n)=>e([{header:{service:te.UNSUBSCRIBE,id:"unsubscribe-draft-order",ver:n},params:{targetService:te.PLACE_ORDER,targetRequestId:`update-draft-order-${s}`}}],()=>t({type:f.DraftOrderDeleted,rootSymbol:s})),LSe=e=>(t,s,n)=>e({type:f.DraftOrderCreated,rootSymbol:t,initialDraftOrder:s,isAutoSend:n});var Rs=(e=>(e.INIT_STOCK="INIT_STOCK",e.INIT_OPTION="INIT_OPTION",e.EDIT_ORDER="EDIT_ORDER",e.INIT_CANCEL_REPLACE="INIT_CANCEL_REPLACE",e))(Rs||{}),In=(e=>(e.CONFIRM="CONFIRM",e.SUBMIT="SUBMIT",e))(In||{});const _Se=()=>({type:f.ReconnectToPlaceOrder}),$D=(e,t,s)=>({type:f.OrderEventsReceived,events:e,currentTime:t,isSnapShot:s}),ng=(e,t,s,n=!0,r=!1)=>({type:f.DraftOrderSetLockedState,symbol:e,draftOrderIndex:t,targetState:s,closeConfirmation:n,updateAllOrders:r}),jD=e=>({type:f.AddContingentOrder,symbol:e}),BD=(e,t,s)=>({type:f.ChangeContingency,symbol:e,draftOrderIndex:t,contingency:s}),NSe=(e,t)=>({type:f.AdvancedOrderSelected,symbol:e,advancedOrderType:t}),PSe=(e,t)=>({type:f.AddOrderRule,orderPayload:{symbol:e,draftOrderIndex:t}}),kSe=(e,t,s)=>({type:f.SetOrderRules,orderPayload:{symbol:e,draftOrderIndex:t,orderRules:s}}),MSe=(e,t,s)=>({type:f.RemoveOrderRule,orderPayload:{symbol:e,draftOrderIndex:t,orderRuleIndex:s}}),$Se=(e,t,s)=>({type:f.UpdateOrderRule,orderPayload:{draftOrderIndex:e,orderRuleIndex:t,parameters:s}}),FD=(e,t)=>({type:f.DeleteTradeTicket,rootSymbol:e,draftOrderIndex:t}),jSe=(e,t,s)=>({type:f.SetTrailStopPriceOffset,symbol:e,draftOrderIndex:t,priceOffset:s}),BSe=(e,t,s)=>({type:f.SetTrailStopInputType,symbol:e,draftOrderIndex:t,trailStopInputType:s}),FSe=(e,t,s)=>({type:f.UpdateTradeQuantityOffset,symbol:e,quantityOffset:t,draftOrderIndex:s}),HSe=A.span(t1(s1,n1,r1,o1,a1,i1,l1)),USe=(e,t)=>{const{children:s,i18nOptions:n,...r}=e;return a.jsx(HSe,{...r,ref:t,children:typeof s=="string"?__(s,n):s})},ot=j.forwardRef(USe),un=e=>{const t=j.useRef(null);return j.useEffect(()=>{t.current=e},[e]),t.current},ec=({theme:e})=>e.shape.borderRadius.secondary,IE=({theme:e,variant:t})=>t===Pe.tertiary?e.colors.scrollbar.thumb.tertiary:void 0,IS=({theme:e,variant:t})=>t===Pe.tertiary?e.colors.scrollbar.background.tertiary:e.colors.background[t],HD=40,VSe=HD*5,UD=200,Wn=A.button`
  white-space: nowrap;
  ${({theme:{colors:e}})=>Ms({variants:{[Pe.tertiary]:{background:e.selected.secondary.background,border:`1px solid ${e.selected.secondary.main}`,borderRadius:"3px"}}})}
  :disabled {
    cursor: default;
  }
`,Uy=A.div`
  ${({theme:{colors:e,shape:t}})=>Ms({variants:{[Pe.primary]:{border:`${t.borderWidth.primary}px solid ${e.border.primary}`},[Pe.secondary]:{border:`${t.borderWidth.primary}px solid ${e.border.primary}`},[Pe.tertiary]:{border:`${t.borderWidth.primary}px solid ${e.border.tertiary}`}}})}
  border-radius: ${ec}px;
  min-width: ${({width:e})=>e??UD}px;
  width: auto;

  ${({hasFooter:e})=>e&&`
      border-bottom-right-radius: 0;
      border-bottom-left-radius: 0;
    `}
`,$u=A.ul`
  list-style-type: none;
  overflow-y: auto;
  overflow-x: hidden;
  margin: 0;
  padding: 0;
  max-height: ${VSe}px;
  border-radius: ${ec}px;
  width: auto;
  min-width: ${({width:e})=>e??150}px;
  background: ${({theme:{colors:e}})=>e.background.primary};
  ${({theme:{colors:e}})=>Ms({variants:{[Pe.tertiary]:{background:e.component.Trade.background.primary}}})}

  ::-webkit-scrollbar-track {
    border-top-right-radius: ${ec}px;
    border-bottom-right-radius: ${ec}px;
    background: ${IS};
  }

  ::-webkit-scrollbar-thumb {
    background-color: ${IE} !important;
    border: 3px solid ${IS};
  }

  /* For firefox only */
  scrollbar-color: ${IE} ${IS} !important;
`,WSe=Ss`
  background: ${({theme:{colors:e}})=>e.selected.primary.background};

  :nth-child(even) {
    background: ${({theme:{colors:e}})=>e.selected.primary.background};
  }

  :focus {
    background: ${({theme:{colors:e}})=>e.selected.primary.focus};
    border-color: transparent;
  }

  color: ${({theme:{colors:e}})=>e.selected.primary.contrastText};
`,Xa=A.li`
  cursor: pointer;
  border: ${({theme:{shape:e}})=>e.borderWidth.secondary}px solid transparent;

  ${({variant:e})=>br.stripedBackgroundList(e)}

  :focus {
    border-color: ${({theme:{colors:e}})=>e.action.focus};
  }

  &:hover {
    border-color: ${({theme:e})=>e.colors.action.focus};
  }

  ${({selected:e})=>e&&WSe}

  ${({disabled:e})=>e&&Ss`
      cursor: default;
      color: ${({theme:t})=>t.colors.action.disabled};
      border-color: transparent !important;
    `}

  padding-top: ${({theme:{space:e}})=>e.xSmall};
  padding-bottom: ${({theme:{space:e}})=>e.xSmall};
  padding-right: ${({theme:{space:e}})=>e.xSmall};
  padding-left: ${({theme:{space:e}})=>e.medium};
  min-height: ${HD}px;
  display: flex;
  align-items: center;
  font-weight: 500;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  ${({theme:{space:e}})=>Ms({variants:{[Pe.tertiary]:{paddingLeft:e.xSmall}}})}
`,VD=A.div`
  min-width: ${({width:e})=>e??UD}px;
`,GSe=A.div`
  background: ${({theme:{colors:e}})=>e.background.primary};
  border: ${({theme:{shape:e}})=>e.borderWidth.primary}px solid
    ${({theme:{colors:e}})=>e.border.primary};
  border-top: none;
  padding: ${({theme:{space:e}})=>e.xxSmall};
  border-bottom-left-radius: ${ec}px;
  border-bottom-right-radius: ${ec}px;
`,YSe=(e=0)=>[0,e],_n=({values:e,onListItemClick:t,getListItemKey:s,renderListItemContent:n,renderAnchorButtonContent:r,selectedItemIndex:o,className:i,placement:l="bottom-end",anchorAriaLabel:c,onAnchorClick:d,renderHeader:u,renderFooter:h,tabToRef:p,strategy:m,appendTo:g="parent",onClose:S,width:T,variant:y=Pe.primary,offset:b,isDisabled:E=!1,symbolSearchId:v,isForceOpened:D=!1,isForceClosed:w=!1,isFocusOnList:N=!1,popperOptions:L={},handleListItemKeyDown:P=C=>{},avoidDropdownCloseOnTab:F=!1,preventDefaultOnKeyDown:O=!0,...H})=>{const{isVisible:C,setIsVisible:M,anchorRef:q,anchorAttributes:W,listboxRef:z,listboxAttributes:re,optionAttributes:ae}=zw({selectedItemIndex:o,tabToRef:p,avoidCloseOnTab:F,preventDefaultOnKeyDown:O});B.useEffect(()=>{M(!!D)},[D,M]),B.useEffect(()=>{w&&M(!1)},[w]),B.useEffect(()=>{var U;if(N){const Se=(U=z.current)==null?void 0:U.children[0];Se!==void 0&&Se.focus()}},[N]);const Me=H.nonSelectableItemsIds??[],he=e.length>0&&a.jsx(Uy,{hasFooter:!!h,variant:y,width:T,children:a.jsx($u,{"data-testid":"selector-dropdown-listbox",ref:z,variant:y,width:T,className:"in-app-scrollbar-dropdowns",...re,children:e.map((U,Se)=>{const be=Se===o,le=!Me.includes(s(U));return a.jsx(Xa,{"data-testid":`${H["data-testid"]}:${s(U)}`,variant:y,onKeyDown:P,onClick:()=>{le&&(M(!1),be||t(U))},...ae,selected:be,disabled:!le,className:be?"selected-selector-dropdown-listbox-item":"","aria-selected":be,children:n(U)},s(U))})})});return a.jsx(J1,{"data-testid":H["data-testid"],anchor:v!==void 0?a.jsx("div",{"aria-label":c,role:"search",children:r()}):a.jsx(Wn,{"aria-label":c,onClick:()=>{M(U=>!U),d&&!C&&d()},ref:q,disabled:E,variant:y,"data-testid":`${H["data-testid"]}-value`,...W,children:r()}),content:a.jsxs(VD,{width:T,children:[u&&u(),he,h&&a.jsx(GSe,{children:h({setIsVisible:M,listboxRef:z})})]}),isVisible:C,className:i,onClickOutside:()=>M(!1),placement:l,onClose:S,offset:YSe(b),strategy:m,appendTo:g,popperOptions:L})},kc=A(_n)`
  width: inherit;
  height: inherit;
  margin-left: 3px;
  margin-right: 8px;
  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    margin-top: 6px;
    margin-bottom: 6px;
    height: 34px;
  }

  ${Wn} {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: ${({theme:e})=>e.fontSizes.medium};
    font-weight: normal;
    color: ${({theme:{colors:e}})=>e.text.primary};
    padding: 1px 10px;
  }
`,ju=A.div`
  padding-right: 5px;
`,Vy=125,lT=A.div`
  border: 1px solid ${({theme:e})=>e.colors.selected.secondary.main};
  padding: 4px 4px;
  border-radius: 8px;
  background-color: ${({theme:e})=>e.colors.selected.primary.main};
  display: flex;
  align-items: center;
`,qSe=A.div`
  display: flex;
  flex-wrap: wrap;
  align-items: center;

  .price-stepper {
    margin: 0;
  }

  > * {
    margin-top: 4px;
    margin-bottom: 4px;
    margin-right: 8px;
  }
`,WD=A(kc)`
  width: auto;
  min-width: ${Vy}px;
`,KSe=A(er)`
  display: flex;
  align-items: center;
  border: 1px solid ${({theme:e})=>e.colors.selected.secondary.main};
  border-radius: ${({theme:e})=>e.space.xxSmall};
  background: ${({theme:e})=>e.colors.component.Trade.background.primary};
  margin-left: ${({theme:e})=>e.space.xxxSmall};

  & .step {
    height: ${({theme:e})=>e.space.medium};
    width: ${({theme:e})=>e.space.medium};

    &:hover {
      background-color: ${({theme:e})=>e.colors.selected.secondary.hover};
    }
  }

  &:focus-within .step {
    background-color: ${({theme:e})=>e.colors.action.focus};
  }

  &:focus-within {
    border: 1px solid ${({theme:e})=>e.colors.action.focus};
  }

  & input {
    padding: ${({theme:e})=>e.space.xSmall};
    width: 78px;
    font-size: 1.4rem;
    color: ${({theme:e})=>e.colors.text.primary};
    background: ${({theme:e})=>e.colors.component.Trade.background.primary};
    border: none;
    height: 20px !important;
  }

  & input:focus {
    outline: none;
    border: none !important;
  }

  & button {
    background: ${({theme:e})=>e.colors.component.Trade.secondary.contrastText};
    display: flex;
    justify-content: center;
    align-items: center;
    margin: ${({theme:e})=>e.space.xxxSmall};
    padding: 0;
    border-radius: ${({theme:e})=>e.space.xxxSmall};

    & svg > g > g {
      stroke: ${({theme:e})=>e.colors.background.primary};
    }
  }
`;var ba=(e=>(e.AT_OR_ABOVE="AT OR ABOVE",e.AT_OR_BELOW="AT OR BELOW",e.ABOVE="ABOVE",e.BELOW="BELOW",e))(ba||{});const xE=["AT OR ABOVE","AT OR BELOW","ABOVE","BELOW"],zSe=e=>{const{orderRuleIndex:t,updateOrderRule:s,type:n,method:r,tickSize:o,midPrice:i,value:l,trigger:c,symbol:d,portalRef:u,showDoubleTickForFractionalPricing:h}=e,[p,m]=j.useState(Kp(c)),[g,S]=j.useState(typeof l=="number"?l:i),T=un(g);return j.useEffect(()=>{m(Kp(c))},[c]),j.useEffect(()=>{T!==null&&s(t,{type:n,symbol:d,method:r,trigger:QSe(p),value:g})},[d,g,p,r]),a.jsxs(a.Fragment,{children:[a.jsx(WD,{appendTo:u,"data-testid":"order-rule-trigger-dropdown",variant:Pe.tertiary,width:Vy,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(ot,{fontSize:5,children:p}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon",colorVariant:Pe.tertiary,"aria-hidden":"true"})]}),values:xE,getListItemKey:y=>`${y}`,onListItemClick:y=>p!==y&&m(y),renderListItemContent:y=>a.jsx(ot,{fontSize:5,children:y}),anchorAriaLabel:`Order Rule trigger: ${p}`,selectedItemIndex:xE.indexOf(p)}),a.jsx(KSe,{dataTestId:"price-order-rule-value",value:g,valueStep:o,onUpdateValue:S,isValid:y=>!isNaN(y),fractionalType:e.fractionalType,showFractionalPricing:e.showFractionalPricing,showDoubleTickForFractionalPricing:h})]})},XSe=j.memo(zSe,fs),Kp=e=>{switch(e){case hr.GreaterThan:return ba.ABOVE;case hr.LessThan:return ba.BELOW;case hr.LessThanOrEqualTo:return ba.AT_OR_BELOW;case hr.GreaterThanOrEqualTo:default:return ba.AT_OR_ABOVE}},QSe=e=>{switch(e){case ba.ABOVE:return hr.GreaterThan;case ba.BELOW:return hr.LessThan;case ba.AT_OR_ABOVE:return hr.GreaterThanOrEqualTo;case ba.AT_OR_BELOW:return hr.LessThanOrEqualTo}};function wE(e){return e.seconds(0).milliseconds(0)}function Wy(e=[]){return e.reduce((t,s)=>{const{value:n,trigger:r,method:o,symbol:i}=s;if(s.method===Ys.DATE_TIME&&typeof n!="number")s.type===Ls.Submit&&(t={...t,triggerTime:n.toISOString()}),s.type===Ls.Cancel&&(t={...t,cancelTime:n.toISOString()});else{if(s.type===Ls.Submit&&h0(s)){const l=t.triggerConditions??[];t={...t,triggerConditions:[...l,{price:n,trigger:r,method:o,symbol:i}]}}if(s.type===Ls.Cancel&&h0(s)){const l=t.cancelConditions??[];t={...t,cancelConditions:[...l,{price:n,trigger:r,method:o,symbol:i}]}}}return t},{})}const ZSe=e=>{var s,n;const t=[];if(e.triggerTime){const r={value:et(e.triggerTime),trigger:hr.EqualTo,method:Ys.DATE_TIME,type:Ls.Submit,symbol:(s=e==null?void 0:e.instrument)==null?void 0:s.rootSymbol};t.push(r)}if(e.cancelTime){const r={value:et(e.cancelTime),trigger:hr.EqualTo,method:Ys.DATE_TIME,type:Ls.Cancel,symbol:(n=e==null?void 0:e.instrument)==null?void 0:n.rootSymbol};t.push(r)}if(e.triggerConditions){const r=e.triggerConditions.map(o=>({type:Ls.Submit,value:o.price,trigger:o.trigger,method:o.method,symbol:o.symbol}));t.push(...r)}if(e.cancelConditions){const r=e.cancelConditions.map(o=>({type:Ls.Cancel,value:o.price,trigger:o.trigger,method:o.method,symbol:o.symbol}));t.push(...r)}return t};function JSe(e,t){let s;if(e.length===0)s={value:wE(et()),trigger:hr.EqualTo,method:Ys.DATE_TIME,type:Ls.Submit,symbol:t};else if(e.length===1){const n=e[0];s={value:wE(et()),trigger:hr.EqualTo,method:Ys.DATE_TIME,type:n.type===Ls.Cancel?Ls.Submit:Ls.Cancel,symbol:t}}return s}const efe=(e,t,s,n)=>(n==null?void 0:n.reduce((r,o)=>{const i=Ls.Cancel===o.type?"CANCEL":"SUBMIT";switch(o.method){case Ys.DATE_TIME:{r+=`${r.length>0?` ${__("AND")}`:""} ${__(i+" AT")} ${xm(new Date(o.value.toISOString()))}`;break}case Go.BID:{r+=xS(r,Go.BID,i,o,e,t,s);break}case Go.ASK:{r+=xS(r,Go.ASK,i,o,e,t,s);break}case Go.MARK:{r+=xS(r,Go.MARK,i,o,e,t,s);break}}return r},""))??"",xS=(e,t,s,n,r,o,i)=>`${e.length>0?` ${__("AND")}`:""} ${__(s+" WHEN")} ${__(t)} ${__(Kp(n.trigger))} ${Nd(o,Number(n.value),r,i)}`,tfe=(e,t)=>{let s=`Order will be ${t}ed `;const n=et(e),r=n.format("MMMM Qo, YYYY"),o=n.format("HH:mm A");return s+=` ${r} at ${o}`,s},sfe=(e,t,s)=>`Order will be ${s}ed ${t} at ${e}`,OE=e=>e.quantityOffset?e.legs.map(t=>({...t,quantity:e.quantity?Math.abs(e.quantity):t.quantity})):e.legs,RE=(e,t)=>e.quantityOffset&&e.quantity?Math.abs(e.quantity):t.quantity,nfe="Covered stocks trade in 100 share increments",rfe=(e,t,s,n)=>{let r,o,i;return e[t].instrumentType===k.STOCK||e[t].instrumentType===k.ETF?(o=s%n===0?s:e[t].quantity,r=s%n===0?Math.max(Math.floor(s/n),1):void 0,i=s%n===0?void 0:nfe):(r=s,o=s*n),e.map(c=>({...c,quantity:c.instrumentType==="STOCK"||c.instrumentType==="ETF"?o:r===void 0?c.quantity:r,optionStrikeError:c.instrumentType==="STOCK"||c.instrumentType==="ETF"?void 0:i}))},ofe=(e,t,s)=>{let n,r;return t===1?s%2===0?(r=s,n=s/2):(r=s,n=void 0):(r=s*2,n=s),e.map((o,i)=>({...o,quantity:i===1?r:n===void 0?o.quantity:n}))},afe=(e,t,s)=>{const n=t.filter(o=>o>e),r=s.filter(o=>o>e);if(!(n.length===0||r.length===0)){for(const o of n)if(r.includes(o))return o}},ife=(e,t)=>{var s;for(const n of t)if(!((s=n.availableOptionStrikes)!=null&&s.includes(e)))return!1;return!0},Wa=4,DE=100,LE=.01,Dh="orderAccountPositions",cT=(e,t)=>{let s=t;switch(e){case dt.Call:{s=t.replace(/(\d)P(?=\d)/g,"$1C");break}case dt.Put:{s=t.replace(/(\d)C(?=\d)/g,"$1P");break}}return s},wS=e=>e===pe.Sell?pe.Buy:pe.Sell,lfe=(e,t)=>{t.sort((n,r)=>n.expirationDate.getTime()-r.expirationDate.getTime());const s=t.findIndex(n=>n.id===e);return s===-1||s===t.length-1?t[t.length-1]:t[s+1]},_E=(e,t)=>e>=0?10*t:-10*t,NE=(e,t,s)=>{const n=Pr(e===Kr.BID,s,void 0);return Pr(e===Kr.ASK,t,n)},cfe=({getDefaultUserProperties:e,getDefaultOrderAccountSelector:t,getOptionExpirations:s,getOptionStrikes:n,getDefaultOptionOrderStrike:r,getHigherOptionStrike:o,getLowerOptionStrike:i,getOptionInstrument:l,getOptionInstrumentsList:c,getFutureExpirations:d,getFallbackOptionStrike:u,createDraftOrder:h,setOrderInstrumentDetails:p,setSeveralOrderInstrumentDetails:m,setSeveralOrderInstrumentDetailsFromLegs:g,updateDraftOrder:S,cancelDraftOrder:T,sendDraftOrder:y,resetOrderConfirmation:b,initializeOrder:E,getDefaultOptionLegQuantity:v,hideOrderConfirmation:D,legsLimitReached:w,requestPositions:N,unsubscribe:L})=>{let P=0,F=0;return O=>H=>async C=>{var q,W,z,re,ae,Me,he,U,Se,be,le,We,He,Dt,Jt,ve,Ue,ft,_e,ht,kt,yt,jt,It,Lt,Zt,ns,ct,qt;H(C);const M=O.getState();switch(C.type){case f.TradeInstrument:{D(O.dispatch)(C.symbol);const Q=M.instruments.get(C.symbol);if(Q===void 0)break;O.dispatch({type:f.ClearDeleteNotification}),b(O.dispatch)(Q.rootSymbol);const Z=Q.rootSymbol,K=C.symbol,Ee=C.isFuturesContract,ye=M.quotes.get(K),Ce=M.userProperties.userProperties,{quantity:Oe,orderType:ce}=e(C.instrumentType,Ce),De=C.quantity??Oe,ue=C.orderType||ce,$e=C.priceType,Ne=ue===ne.STOP||ue===ne.STOPLIMIT,Ke=ue===ne.TRAILSTOP,Qe=C.direction,St=Qe===pe.Buy?.1:-.1,Ge=t(M),rt=[{symbol:K,rootSymbol:Z,quantity:De,instrumentType:C.instrumentType,direction:Qe}],es=ye==null?void 0:ye.bid,Xt=ye==null?void 0:ye.ask,Wt=NE($e,Xt,es),gs=C.price!==void 0?C.price:Wt!==void 0?Wt:void 0,Mt={account:Ge,legs:rt,canChangeAccount:!0,orderType:ue,limitPrice:gs,activationPrice:Ne?gs:void 0,orderStartedFrom:C.orderStartedFrom};if(h(O.dispatch)(Ee?Z:K,Mt,C.isAutoSend),(C.instrumentType===k.FUTURE||C.instrumentType===k.PRODUCT)&&Z===K){const Bt=await d(C.symbol),ls=Bt.find(An=>An.isActive);ls!==void 0&&(rt[0].symbol=ls.symbol,p(O.dispatch)(Z,0,0,{instrumentType:C.instrumentType,futureExpiration:ls,availableFutureExpirations:Bt}))}if(Ee){const Bt=O.getState().futureExpirations.get(Z),ls=Bt==null?void 0:Bt.find(An=>An.symbol===K);ls!==void 0&&(rt[0].symbol=ls.symbol,p(O.dispatch)(Z,0,0,{instrumentType:C.instrumentType,futureExpiration:ls,availableFutureExpirations:Bt}))}try{await E(O.dispatch)(Ee?Z:K,{accountCode:Ge,action:In.CONFIRM,orders:[{requestType:Rs.INIT_STOCK,limitPrice:gs,activationPrice:Ne?gs:void 0,stopType:Ke?"MARK":void 0,stopPriceLink:Ke?"MARK":void 0,stopPriceOffset:Ke?St:void 0,legs:rt,orderType:ue}]},P++),C.isAutoSend&&O.dispatch({type:f.SendOrder,symbol:K})}catch{C.isAutoSend&&O.dispatch({type:f.DraftOrderDeleted,rootSymbol:K})}break}case f.CreateDraftTrade:{D(O.dispatch)(C.rootSymbol);const Q=C.legs;if(Q===void 0)break;const Z=M.instruments.get(C.rootSymbol);if(Z===void 0)break;O.dispatch({type:f.ClearDeleteNotification}),b(O.dispatch)(C.rootSymbol);const K=Z.type===k.OPTION||Z.type===k.FUTURE?Z.symbol:Z.rootSymbol,Ee=M.userProperties.userProperties;let{orderType:ye}=e(C.legs[0].instrumentType??k.NONE,Ee);ye=ye===ne.TRAILSTOP||ye===ne.NONE?ne.LIMIT:ye;const Ce=t(M),Oe=C.orderType||ye,ce=Oe===ne.STOP||Oe===ne.STOPLIMIT,De=C.stopPrice,ue=C.limitPrice!==void 0?C.limitPrice:ce?De:void 0,$e=ce?De!==void 0?De:C.limitPrice:void 0,Ne=Q.map(Qe=>({symbol:Qe.symbol,rootSymbol:Qe.rootSymbol,instrumentType:Qe.instrumentType,quantity:Qe.quantity,direction:Qe.direction})),Ke={account:Ce,legs:Ne,orderType:Oe,limitPrice:ue,activationPrice:$e,canChangeAccount:!0};h(O.dispatch)(K,Ke);for(const[Qe,St]of Q.entries()){const Ge=St.instrumentType,rt=St.seriesName,es=St.strike,Xt=St.optionType,Wt=St.rootSymbol,gs=St.symbol;if(Ge===void 0)break;switch(Ge){case k.OPTION:{if(rt===void 0||es===void 0||Xt===void 0)break;const Mt=await s(M.optionInstrumentDetails,Z.rootSymbol);if(Mt.length<1)break;const Bt=Mt.find(An=>An.id===rt);if(Bt===void 0)break;const ls=await n(M.optionInstrumentDetails,Z.rootSymbol,Bt.id);if(ls===void 0)break;p(O.dispatch)(K,Qe,0,{instrumentType:k.OPTION,availableOptionExpirations:Mt,optionExpiration:Bt,availableOptionStrikes:ls,optionStrike:es,optionType:Xt});break}case k.FUTURE:case k.PRODUCT:if(C.rootSymbol===Wt){const Mt=await d(Z.rootSymbol);if(Mt.length<1)break;const Bt=Mt.find(ls=>ls.symbol===gs);Bt!==void 0&&p(O.dispatch)(K,Qe,0,{instrumentType:Ge,futureExpiration:Bt,availableFutureExpirations:Mt})}}}E(O.dispatch)(K,{accountCode:Ce,action:In.CONFIRM,orders:[{requestType:Z.type===k.OPTION?Rs.INIT_OPTION:Rs.INIT_STOCK,legs:Ne,orderType:Oe,limitPrice:ue,activationPrice:$e,tif:C.orderTif}]},P++);break}case f.EditWorkingOrder:case f.OrderBookTrayEditButtonPressed:{const Z=M.workingOrders.find(ce=>ce.id===C.orderId);if(Z===void 0||Z.orderType===void 0)break;O.dispatch({type:f.ClearDeleteNotification});const K=C.type===f.EditWorkingOrder&&C.orderType!==void 0?C.orderType:Z.orderType;let Ee={id:Z.id,orderType:K,legs:Z.legs!==void 0?Z.legs.map(ce=>({...ce,quantity:C.type===f.EditWorkingOrder&&C.quantity!==void 0?Math.abs(C.quantity):Math.abs(ce.quantity)})):[],account:Z.accountCode,canChangeAccount:!1,orderStartedFrom:C.type===f.EditWorkingOrder?C.orderStartedFrom:void 0,isPartial:Z.isPartial};const ye=mt(M),Ce=ye!==null?ye:Z.instrument.rootSymbol,Oe=YO(M);if((Oe===k.FUTURE||Oe===k.PRODUCT)&&Ce===ye){const ce=await d(Ce);if(Z.legs!==void 0){const De=Ee.legs.map(ue=>{var Ke;const $e=(Ke=mie(ue.symbol)(M))==null?void 0:Ke.expiration,Ne=ce.find(Qe=>(Qe==null?void 0:Qe.expirationDate.getTime())===($e==null?void 0:$e.getTime()));return{...ue,futureExpiration:Ne,availableFutureExpirations:ce}});Ee={...Ee,legs:De}}}Et.unstable_batchedUpdates(async()=>{h(O.dispatch)(Ce,Ee,C.type===f.EditWorkingOrder?C.isAutoSend:!1);const ce=[ZSe(Z)];O.dispatch(kSe(Ce,0,ce[0]));const De=K===ne.TRAILSTOP?{stopType:"MARK",stopPriceLink:Z.stopPriceLink,stopPriceOffset:Z.stopPriceOffset}:void 0,ue=C.type===f.EditWorkingOrder&&C.price!==void 0?C.price:Z.price;try{await S(O.dispatch)(Ce,{account:Z.accountCode,contingencies:[],orderRules:ce,orders:[{...Ee,...De,legs:Ee.legs,id:Z.id,tif:Z.tif,price:K===ne.LIMIT||K===ne.STOP||K===ne.STOPLIMIT||K===ne.LOC?ue:void 0,activationPrice:K===ne.STOPLIMIT?Z.activationPrice:void 0,priceLocked:!0,allowedOrderTypes:[],allowedTifs:[],triggerTime:Z.triggerTime,cancelTime:Z.cancelTime}]},P++),C.type===f.EditWorkingOrder&&C.isAutoSend&&O.dispatch({type:f.SendOrder,symbol:Ce})}catch{C.type===f.EditWorkingOrder&&C.isAutoSend&&O.dispatch({type:f.DraftOrderDeleted,rootSymbol:Ce})}});for(const[ce,De]of Ee.legs.entries()){const ue=M.instruments.get(De.symbol);if(ue===void 0||ue.type!==k.OPTION||ue.seriesName===void 0)break;const $e=await s(M.optionInstrumentDetails,ue.underlyingSymbol),Ne=await n(M.optionInstrumentDetails,ue.underlyingSymbol,ue.seriesName),Ke=$e.find(Qe=>Qe.id===ue.seriesName);if(Ke===void 0)break;p(O.dispatch)(ye!==null?ye:ue.underlyingSymbol,ce,0,{instrumentType:k.OPTION,availableOptionExpirations:$e,optionExpiration:Ke,availableOptionStrikes:Ne,optionStrike:ue.strike,optionType:ue.optionType})}break}case f.ClosePositions:{if(C.positions.length===0)break;O.dispatch({type:f.ClearDeleteNotification});const Q=mt(M),Z=C.positions[0].account,K=C.positions.map(ue=>{const $e=ue.quantity>0?pe.Sell:pe.Buy,Ne=Math.abs(ue.quantity);return{symbol:ue.symbol,rootSymbol:ue.rootSymbol,quantity:Ne,direction:$e,instrumentType:ue.type}}),Ee=C.positions[0].type,ye=M.userProperties.userProperties;let{orderType:Ce}=e(Ee,ye),Oe;C.isFromFlatten&&(Ce=ne.MARKET),Ce!==ne.MARKET&&Math.abs(K[0].quantity)<1&&(Oe=Gae,Ce=ne.MARKET);const ce={account:Z,legs:K,orderType:Ce,canChangeAccount:!1,minimumQuantityError:Oe};h(O.dispatch)(C.rootSymbol,ce),E(O.dispatch)(C.rootSymbol,{accountCode:Z,action:In.CONFIRM,orders:[{requestType:Rs.EDIT_ORDER,legs:K,orderType:Ce}]},P++);let De;for(const[ue,$e]of C.positions.entries()){const Ne=M.instruments.get($e.symbol);if(Ne===void 0||Ne.type!==k.OPTION||Ne.seriesName===void 0)continue;De===void 0&&(De=await s(M.optionInstrumentDetails,Ne.underlyingSymbol));const Ke=await n(M.optionInstrumentDetails,Ne.underlyingSymbol,Ne.seriesName),Qe=De.find(St=>St.id===Ne.seriesName);if(Qe===void 0)break;p(O.dispatch)(Q!==null?Q:Ne.underlyingSymbol,ue,0,{instrumentType:k.OPTION,availableOptionExpirations:De,optionExpiration:Qe,availableOptionStrikes:Ke,optionStrike:Ne.strike,optionType:Ne.optionType})}break}case f.RollPositions:{const Q=Zr(M),Z=C.positions.map(Ge=>Q.get(Ge)).filter(Boolean);if(Z.length===0)return;O.dispatch({type:f.ClearDeleteNotification});const K=mt(M),Ee=C.rootSymbol,ye=K!==null?K:Ee,Ce=Z.map(Ge=>({symbol:Ge.symbol,rootSymbol:Ge.rootSymbol,quantity:Math.abs(Ge.quantity),instrumentType:Ge.type,direction:Ge.quantity>0?pe.Sell:pe.Buy})),Oe=[],ce=[],De=[],ue=[],$e=await s(M.optionInstrumentDetails,Ee);for(const Ge of Ce){const rt=M.instruments.get(Ge.symbol);if(rt===void 0||rt.type!==k.OPTION||rt.seriesName===void 0)return;const es=lfe(rt.seriesName,$e),Xt=$e.find(An=>An.id===rt.seriesName),Wt=await n(M.optionInstrumentDetails,Ee,es.id),gs=await n(M.optionInstrumentDetails,Ee,rt.seriesName),Mt=u(rt.optionType,rt.strike,Wt),Bt=await l(rt.rootSymbol,es,Mt.strike,rt.optionType);if(Bt===void 0||Xt===void 0)break;Oe.push(Ge),De.push({...Ge,availableOptionStrikes:gs,optionStrike:rt.strike,optionType:rt.optionType,optionExpiration:Xt});const ls={symbol:Bt,rootSymbol:rt.rootSymbol,quantity:Ge.quantity,instrumentType:Ge.instrumentType,direction:Ge.direction===pe.Sell?pe.Buy:pe.Sell};ce.push(ls),ue.push({...ls,availableOptionStrikes:Wt,optionStrike:Mt.strike,optionType:rt.optionType,optionExpiration:es})}const Ne=Z[0].account,Ke=Oe.concat(ce),Qe=De.concat(ue),St={account:Ne,legs:Ke,orderType:ne.LIMIT,canChangeAccount:!1};h(O.dispatch)(Ee,St),E(O.dispatch)(C.rootSymbol,{accountCode:Ne,action:In.CONFIRM,orders:[{requestType:Rs.EDIT_ORDER,legs:Ke}]},P++);for(const[Ge,rt]of Qe.entries()){if(rt.optionExpiration===void 0)break;p(O.dispatch)(ye,Ge,0,{instrumentType:k.OPTION,availableOptionExpirations:$e,optionExpiration:rt.optionExpiration,availableOptionStrikes:rt.availableOptionStrikes,optionStrike:rt.optionStrike,optionType:rt.optionType})}break}case f.BuyOption:{D(O.dispatch)(C.symbol),b(O.dispatch)(C.symbol);const Q=M.instruments.get(C.symbol);if(Q===void 0)break;const Z=Q.type===k.OPTION?Q.rootSymbol:C.symbol,K=await s(M.optionInstrumentDetails,Z),Ee=Q.type===k.OPTION?K.find(_i=>_i.id===Q.seriesName):C.expirationId!==void 0?K.find(_i=>_i.id===C.expirationId):K[0];if(Ee===void 0)break;let ye=0,Ce=[];const Oe=M.quotes.get(C.symbol),ce=Oe==null?void 0:Oe.mark,De=Oe==null?void 0:Oe.ask,ue=Oe==null?void 0:Oe.bid;if(Q.type===k.OPTION)ye=Q.strike,Ce=[Q.strike];else{if(Ce=await n(M.optionInstrumentDetails,C.symbol,C.expirationId!==void 0?C.expirationId:Ee.id),ce===void 0)break;ye=C.strike!==void 0?C.strike:r(ce,Ce,Ee,[])}const $e=Q,Ne=C.optionType!==void 0?C.optionType:Pr(($e==null?void 0:$e.optionType)!==void 0,$e.optionType,dt.Call),Ke=Q.type===k.OPTION?C.symbol:await l(C.symbol,Ee,ye,Ne);if(Ke===void 0||Ke==="")break;const Qe=M.userProperties.userProperties,St=Q.type===k.FUTURE||Q.type===k.PRODUCT,{quantity:Ge,orderType:rt}=e(k.OPTION,Qe,St),es=C.quantity??Ge,Xt=C.orderType||rt,Wt=C.priceType,gs=t(M),Mt=C.direction!==void 0?C.direction:pe.Buy,Bt=Mt===pe.Buy?.1:-.1,ls=NE(Wt,De,ue),An=C.price!==void 0?C.price:ls!==void 0?ls:void 0,Li=[{quantity:es,instrumentType:k.OPTION,symbol:Ke,rootSymbol:Z,direction:Mt}],la=Xt===ne.TRAILSTOP,Gc=Xt===ne.STOP||Xt===ne.STOPLIMIT,ih={account:gs,legs:Li,canChangeAccount:!0,limitPrice:An,orderType:Xt,orderStartedFrom:C.orderStartedFrom};h(O.dispatch)(C.symbol,ih,C.isAutoSend);const lh=Q.type===k.OPTION?[Ee]:K;p(O.dispatch)(C.symbol,0,0,{instrumentType:k.OPTION,availableOptionExpirations:lh,optionExpiration:Ee,availableOptionStrikes:Ce,optionStrike:ye,optionType:Ne});try{await E(O.dispatch)(C.symbol,{accountCode:gs,action:In.CONFIRM,orders:[{requestType:Rs.INIT_OPTION,legs:Li,limitPrice:An,activationPrice:Gc?An:void 0,stopType:la?"MARK":void 0,stopPriceLink:la?"MARK":void 0,stopPriceOffset:la?Bt:void 0,orderType:Xt}]},P++),C.isAutoSend&&O.dispatch({type:f.SendOrder,symbol:C.symbol})}catch{C.isAutoSend&&O.dispatch({type:f.DraftOrderDeleted,rootSymbol:C.symbol})}break}case f.BuyStrategy:{D(O.dispatch)(C.symbol),b(O.dispatch)(C.symbol,C.spreadName);const Q=M.instruments.get(C.symbol);if(Q===void 0)break;const Z=Q.type===k.FUTURE||Q.type===k.PRODUCT,K=await s(M.optionInstrumentDetails,C.symbol);if(K.length<1)break;const Ee=M.userProperties.userProperties,{quantity:ye,orderType:Ce}=e(k.OPTION,Ee,Z);switch(O.dispatch({type:f.ClearDeleteNotification}),C.spreadName){case nt.IRON_CONDOR:{const Oe=K[0],ce=await n(M.optionInstrumentDetails,C.symbol,Oe.id),De=M.quotes.get(C.symbol),ue=De==null?void 0:De.mark;if(ue===void 0)break;const $e=i(ue,ce),Ne=i(ue,ce,2),Ke=o(ue,ce),Qe=o(ue,ce,2);if(Ke===void 0||Qe===void 0||$e===void 0||Ne===void 0)break;const St=[{underlyingSymbol:C.symbol,expiration:Oe,strike:Ne,optionType:dt.Put},{underlyingSymbol:C.symbol,expiration:Oe,strike:$e,optionType:dt.Put},{underlyingSymbol:C.symbol,expiration:Oe,strike:Ke,optionType:dt.Call},{underlyingSymbol:C.symbol,expiration:Oe,strike:Qe,optionType:dt.Call}],Ge=await c(St);if(Ge===void 0)break;const[rt,es,Xt,Wt]=Ge;if(rt===void 0||rt===""||es===void 0||es===""||Xt===void 0||Xt===""||Wt===void 0||Wt==="")break;const gs=t(M),Mt={quantity:ye,instrumentType:k.OPTION,symbol:rt,rootSymbol:C.symbol,direction:pe.Buy},Bt={quantity:ye,instrumentType:k.OPTION,symbol:es,rootSymbol:C.symbol,direction:pe.Sell},ls={quantity:ye,instrumentType:k.OPTION,symbol:Xt,rootSymbol:C.symbol,direction:pe.Sell},An={quantity:ye,instrumentType:k.OPTION,symbol:Wt,rootSymbol:C.symbol,direction:pe.Buy},Li=[Mt,Bt,ls,An],la=Ce===ne.TRAILSTOP,Gc={account:gs,legs:Li,orderType:Ce,canChangeAccount:!0};h(O.dispatch)(C.symbol,Gc),m(O.dispatch)(C.symbol,0,[{legIndex:0,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:ce,optionStrike:Ne,optionType:dt.Put}},{legIndex:1,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:ce,optionStrike:$e,optionType:dt.Put}},{legIndex:2,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:ce,optionStrike:Ke,optionType:dt.Call}},{legIndex:3,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:ce,optionStrike:Qe,optionType:dt.Call}}]),E(O.dispatch)(C.symbol,{accountCode:gs,action:In.CONFIRM,orders:[{requestType:Rs.INIT_OPTION,legs:Li,stopType:la?"MARK":void 0,stopPriceLink:la?"MARK":void 0,stopPriceOffset:la?-.1:void 0,orderType:Ce}]},P++);break}case nt.VERTICAL:{const Oe=K[0],ce=await n(M.optionInstrumentDetails,C.symbol,Oe.id),De=M.quotes.get(C.symbol),ue=De==null?void 0:De.mark;if(ue===void 0)break;const $e=i(ue,ce),Ne=o(ue,ce);if(Ne===void 0||$e===void 0)break;const Ke=dt.Call,Qe=await l(C.symbol,Oe,$e,Ke),St=await l(C.symbol,Oe,Ne,Ke);if(Qe===void 0||Qe===""||St===void 0||St==="")break;const Ge=t(M),rt={quantity:ye,instrumentType:k.OPTION,symbol:Qe,rootSymbol:C.symbol,direction:pe.Buy},es={quantity:ye,instrumentType:k.OPTION,symbol:St,rootSymbol:C.symbol,direction:pe.Sell},Xt=[rt,es],Wt=Ce===ne.TRAILSTOP,gs={account:Ge,legs:Xt,orderType:Ce,canChangeAccount:!0};h(O.dispatch)(C.symbol,gs),m(O.dispatch)(C.symbol,0,[{legIndex:0,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:ce,optionStrike:$e,optionType:Ke}},{legIndex:1,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:ce,optionStrike:Ne,optionType:Ke}}]),E(O.dispatch)(C.symbol,{accountCode:Ge,action:In.CONFIRM,orders:[{requestType:Rs.INIT_OPTION,legs:Xt,stopType:Wt?"MARK":void 0,stopPriceLink:Wt?"MARK":void 0,stopPriceOffset:Wt?.1:void 0,orderType:Ce}]},P++);break}case nt.CALENDAR:{const Oe=K[0],ce=K[1],[De,ue]=await Promise.all([n(M.optionInstrumentDetails,C.symbol,Oe.id),n(M.optionInstrumentDetails,C.symbol,ce.id)]),$e=M.quotes.get(C.symbol),Ne=$e==null?void 0:$e.mark;if(Ne===void 0)break;const Ke=afe(Ne,De,ue);if(Ke===void 0)break;const Qe=Ke,St=Ke,Ge=dt.Call,rt=await l(C.symbol,ce,St,Ge),es=await l(C.symbol,Oe,Qe,Ge);if(rt===void 0||rt===""||es===void 0||es==="")break;const Xt=t(M),Wt={quantity:ye,instrumentType:k.OPTION,symbol:rt,rootSymbol:C.symbol,direction:pe.Buy},Mt=[{quantity:ye,instrumentType:k.OPTION,symbol:es,rootSymbol:C.symbol,direction:pe.Sell},Wt],Bt=Ce===ne.TRAILSTOP,ls={account:Xt,legs:Mt,orderType:Ce,canChangeAccount:!0};h(O.dispatch)(C.symbol,ls),m(O.dispatch)(C.symbol,0,[{legIndex:0,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:De,optionStrike:Qe,optionType:Ge}},{legIndex:1,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:ce,availableOptionStrikes:ue,optionStrike:St,optionType:Ge}}]),E(O.dispatch)(C.symbol,{accountCode:Xt,action:In.CONFIRM,orders:[{requestType:Rs.INIT_OPTION,legs:Mt,stopType:Bt?"MARK":void 0,stopPriceLink:Bt?"MARK":void 0,stopPriceOffset:Bt?.1:void 0,orderType:Ce}]},P++);break}case nt.DIAGONAL:{const Oe=K[0],ce=K[1],[De,ue]=await Promise.all([n(M.optionInstrumentDetails,C.symbol,Oe.id),n(M.optionInstrumentDetails,C.symbol,ce.id)]),$e=M.quotes.get(C.symbol),Ne=$e==null?void 0:$e.mark;if(Ne===void 0)break;const Ke=o(Ne,De);let Qe=o(Ne,ue,2);if(Ke===Qe&&(Qe=o(Ne,ue,3)),Ke===void 0||Qe===void 0)break;const St=dt.Call,[Ge,rt]=await Promise.all([l(C.symbol,ce,Qe,St),l(C.symbol,Oe,Ke,St)]);if(Ge===void 0||Ge===""||rt===void 0||rt==="")break;const es=t(M),Xt={quantity:ye,instrumentType:k.OPTION,symbol:Ge,rootSymbol:C.symbol,direction:pe.Buy},gs=[{quantity:ye,instrumentType:k.OPTION,symbol:rt,rootSymbol:C.symbol,direction:pe.Sell},Xt],Mt=Ce===ne.TRAILSTOP,Bt={account:es,legs:gs,orderType:Ce,canChangeAccount:!0};h(O.dispatch)(C.symbol,Bt),m(O.dispatch)(C.symbol,0,[{legIndex:0,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:De,optionStrike:Ke,optionType:St}},{legIndex:1,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:ce,availableOptionStrikes:ue,optionStrike:Qe,optionType:St}}]),E(O.dispatch)(C.symbol,{accountCode:es,action:In.CONFIRM,orders:[{requestType:Rs.INIT_OPTION,legs:gs,stopType:Mt?"MARK":void 0,stopPriceLink:Mt?"MARK":void 0,stopPriceOffset:Mt?.1:void 0,orderType:Ce}]},P++);break}case nt.COVERED:{const Oe=K[0],ce=Oe.spc!==void 0?Oe.spc:100,De=await n(M.optionInstrumentDetails,C.symbol,Oe.id),ue=M.quotes.get(C.symbol),$e=ue==null?void 0:ue.mark;if($e===void 0)break;const Ne=o($e,De);if(Ne===void 0)break;const Ke=dt.Call,Qe=await l(C.symbol,Oe,Ne,Ke);if(Qe===void 0||Qe==="")break;let St;const{quantity:Ge,orderType:rt}=e(k.STOCK,Ee);Ge<=100?St=100:Ge>100&&Number.isInteger(Ge/ce)?St=Ge:St=Math.floor(Ge/ce)*ce;const es=Math.floor(St/ce),Xt=t(M),Wt=M.instruments.get(C.symbol),gs={quantity:St,instrumentType:(Wt==null?void 0:Wt.type)??k.STOCK,symbol:C.symbol,rootSymbol:C.symbol,direction:pe.Buy},Mt={quantity:es,instrumentType:k.OPTION,symbol:Qe,rootSymbol:C.symbol,direction:pe.Sell},Bt=[gs,Mt],ls=rt===ne.TRAILSTOP,An={account:Xt,legs:Bt,orderType:rt,canChangeAccount:!0};h(O.dispatch)(C.symbol,An),p(O.dispatch)(C.symbol,1,0,{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:De,optionStrike:Ne,optionType:Ke}),E(O.dispatch)(C.symbol,{accountCode:Xt,action:In.CONFIRM,orders:[{requestType:Rs.INIT_STOCK,legs:Bt,stopType:ls?"MARK":void 0,stopPriceLink:ls?"MARK":void 0,stopPriceOffset:ls?.1:void 0,orderType:rt}]},P++);break}case nt.BUTTERFLY:{const Oe=K[0],ce=await n(M.optionInstrumentDetails,C.symbol,Oe.id),De=M.quotes.get(C.symbol),ue=De==null?void 0:De.mark;if(ue===void 0)break;const $e=i(ue,ce),Ne=i(ue,ce,2),Ke=o(ue,ce);if($e===void 0||Ke===void 0||Ne===void 0)break;const Qe=[{underlyingSymbol:C.symbol,expiration:Oe,strike:Ne,optionType:dt.Call},{underlyingSymbol:C.symbol,expiration:Oe,strike:$e,optionType:dt.Call},{underlyingSymbol:C.symbol,expiration:Oe,strike:Ke,optionType:dt.Call}],St=await c(Qe);if(St===void 0)break;const[Ge,rt,es]=St;if(Ge===void 0||Ge===""||rt===void 0||rt===""||es===void 0||es==="")break;const Xt=t(M),Wt={quantity:ye,instrumentType:k.OPTION,symbol:Ge,rootSymbol:C.symbol,direction:pe.Buy},gs={quantity:ye*2,instrumentType:k.OPTION,symbol:rt,rootSymbol:C.symbol,direction:pe.Sell},Mt={quantity:ye,instrumentType:k.OPTION,symbol:es,rootSymbol:C.symbol,direction:pe.Buy},Bt=[Wt,gs,Mt],ls=Ce===ne.TRAILSTOP,An={account:Xt,legs:Bt,orderType:Ce,canChangeAccount:!0};h(O.dispatch)(C.symbol,An),m(O.dispatch)(C.symbol,0,[{legIndex:0,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:ce,optionStrike:Ne,optionType:dt.Call}},{legIndex:1,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:ce,optionStrike:$e,optionType:dt.Call}},{legIndex:2,draftOrderInstrumentDetails:{instrumentType:k.OPTION,availableOptionExpirations:K,optionExpiration:Oe,availableOptionStrikes:ce,optionStrike:Ke,optionType:dt.Call}}]),E(O.dispatch)(C.symbol,{accountCode:Xt,action:In.CONFIRM,orders:[{requestType:Rs.INIT_OPTION,legs:Bt,stopType:ls?"MARK":void 0,stopPriceLink:ls?"MARK":void 0,stopPriceOffset:ls?.1:void 0,orderType:Ce}]},P++);break}}break}case f.BuyOptionLeg:{D(O.dispatch)(C.rootSymbol);const Q=(q=M.createTrade.trade.get(C.rootSymbol))==null?void 0:q[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(K===void 0||Z===void 0||(Q==null?void 0:Q.account)===void 0||K.legs.length>=Wa)break;O.dispatch({type:f.ClearStrategy,rootSymbol:C.rootSymbol}),O.dispatch({type:f.ClearDeleteNotification});const Ee=await s(M.optionInstrumentDetails,C.rootSymbol),ye=Ee[0],Ce=await n(M.optionInstrumentDetails,C.rootSymbol,ye.id),Oe=M.quotes.get(C.rootSymbol),ce=Oe==null?void 0:Oe.mark;if(ce===void 0)break;const De=r(ce,Ce,ye,K.legs);let ue=Array.from(K.legs);if(K.legs[0].instrumentType===k.STOCK||K.legs[0].instrumentType===k.ETF){let Ne=dt.Call;const Ke=ye.spc!==void 0?ye.spc:100;K.legs.length===2&&K.legs[1].optionType===dt.Call&&(Ne=dt.Put);const Qe=await l(C.rootSymbol,ye,De,Ne);if(Qe===void 0)break;const St=K.legs[0].quantity;let Ge;St<=100?Ge=100:K.legs[0].quantity>100&&Number.isInteger(St/Ke)?Ge=St:Ge=Math.floor(St/Ke)*Ke,ue=ue.map((Wt,gs)=>gs===0?{...Wt,quantity:Ge}:Wt);const rt=St<=100?1:Math.floor(St/Ke),es=ue.length===2?ue[1].quantity:rt,Xt=wS(K.legs[K.legs.length-1].direction);p(O.dispatch)(C.rootSymbol,K.legs.length,C.draftOrderIndex,{instrumentType:k.OPTION,availableOptionExpirations:Ee,optionExpiration:ye,availableOptionStrikes:Ce,optionStrike:De,optionType:Ne,quantity:rt,symbol:Qe,direction:Xt}),ue[K.legs.length]={symbol:Qe,rootSymbol:C.rootSymbol,quantity:es,instrumentType:k.OPTION,direction:Xt,optionType:Ne}}else{const Ne=dt.Call,Ke=await l(C.rootSymbol,ye,De,Ne);if(Ke===void 0)break;const Qe=v(K.legs);p(O.dispatch)(C.rootSymbol,K.legs.length,C.draftOrderIndex,{instrumentType:k.OPTION,availableOptionExpirations:Ee,optionExpiration:ye,availableOptionStrikes:Ce,optionStrike:De,optionType:Ne,quantity:Qe,symbol:Ke}),ue[K.legs.length]={symbol:Ke,rootSymbol:C.rootSymbol,quantity:Qe,instrumentType:k.OPTION,direction:pe.Buy}}const $e=Z.slice();$e[C.draftOrderIndex]={...K,legs:ue},E(O.dispatch)(C.rootSymbol,{accountCode:Q.account,action:In.CONFIRM,orders:$e.map(Ne=>({requestType:Rs.INIT_OPTION,legs:Ne.legs,orderType:Ne.orderType,tif:Ne.tif}))},P++),O.dispatch(sd(C.rootSymbol,C.draftOrderIndex));break}case f.AddSpreadOptionLeg:{D(O.dispatch)(C.symbol);const Q=0,Z=(W=M.createTrade.trade.get(C.rootSymbol))==null?void 0:W[0],K=Z==null?void 0:Z.orders,Ee=K==null?void 0:K[Q];if(K===void 0||Ee===void 0||(Z==null?void 0:Z.account)===void 0)break;const ye=C.symbol;if(ye===void 0)break;O.dispatch({type:f.ClearDeleteNotification}),O.dispatch({type:f.ClearStrategy,rootSymbol:C.rootSymbol});const Ce=Array.from(Ee.legs),Oe=Ce.findIndex(ue=>ue.symbol===ye);if(Oe===-1&&Ee.legs.length>Wa-1||Oe!==-1&&Ee.legs.length>Wa||Ee.legs[0].instrumentType===k.FUTURE)break;Oe===-1&&Ee.legs.length>=Wa-1||Oe!==-1&&Ee.legs.length>Wa?w(O.dispatch)(!0):w(O.dispatch)(!1);const ce=C.direction!==void 0?C.direction:pe.Buy;if(Oe===-1){const ue=await s(M.optionInstrumentDetails,C.rootSymbol),$e=ue.find(St=>St.id===C.expirationId);if($e===void 0)break;const Ne=C.expirationId!==void 0?C.expirationId:$e.id,Ke=await n(M.optionInstrumentDetails,C.rootSymbol,Ne),Qe=v(Ee.legs);p(O.dispatch)(C.rootSymbol,Ee.legs.length,0,{instrumentType:k.OPTION,availableOptionExpirations:ue,optionExpiration:$e,availableOptionStrikes:Ke,optionStrike:C.strike,optionType:C.optionType,symbol:ye,quantity:Qe,direction:ce}),Ce[Ee.legs.length]={symbol:ye,rootSymbol:C.rootSymbol,quantity:Qe,direction:ce,instrumentType:k.OPTION}}else if(Ce[Oe].direction===ce){if(Ce.splice(Oe,1),Ce.length===0){T(O.dispatch)(C.rootSymbol,F++);break}}else Ce[Oe]={...Ce[Oe],direction:ce};const De=K.slice();De[Q]={...Ee,legs:Ce},E(O.dispatch)(C.rootSymbol,{accountCode:Z.account,action:In.CONFIRM,orders:De.map((ue,$e)=>({requestType:$e===Q?Rs.INIT_OPTION:Rs.EDIT_ORDER,orderType:ue.orderType,tif:ue.tif,legs:ue.legs}))},P++);break}case f.UpdateTradeQuantity:{const Q=(z=M.createTrade.trade.get(C.symbol))==null?void 0:z[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex],Ee=M.createTrade.isEditMode;if(Z===void 0||K===void 0||Q===void 0)break;const ye=M.createTrade.fromStrategy.get(C.symbol),Ce=K.spreadName!==void 0?cl(K.spreadName):K.spreadName,Oe=ye===void 0?Ce:ye;let ce=Array.from(K.legs),De=!1;switch(Oe){case nt.FUTURES_CALENDAR:case nt.VERTICAL:case nt.CALENDAR:case nt.DIAGONAL:case nt.IRON_CONDOR:{(ye!==void 0||Ee)&&(ce=ce.map(Ne=>({...Ne,quantity:C.quantity})),g(O.dispatch)(C.symbol,C.draftOrderIndex,ce));break}case nt.BUTTERFLY:{(ye!==void 0||Ee)&&(ce=ofe(ce,C.legIndex,C.quantity),g(O.dispatch)(C.symbol,C.draftOrderIndex,ce));break}case nt.COLLAR:case nt.COVERED:{let Ne=DE;const Ke=ce.findIndex(Qe=>Qe.instrumentType==="OPTION");ce[Ke]!==void 0&&(ce.length>1&&(Ne=((re=ce[Ke].optionExpiration)==null?void 0:re.spc)??DE),ce=rfe(ce,C.legIndex,C.quantity,Ne),p(O.dispatch)(C.symbol,Ke,C.draftOrderIndex,{...ce[Ke]}));break}default:{De=K.legs.length>1?!0:K.priceLocked!==!0;const Ne=K.legs[C.legIndex];ce[C.legIndex]={...Ne,quantity:C.quantity};break}}const ue=K.orderType===ne.STOP||K.orderType===ne.STOPLIMIT||K.orderType===ne.MARKET||De?!0:K.priceLocked!==!0,$e=Z.slice();$e[C.draftOrderIndex]={...K,legs:ce,priceLocked:De?!De:K.priceLocked},S(O.dispatch)(C.symbol,{...Q,orders:$e},P++,ue);break}case f.UpdateTradeQuantityOffset:{const Q=(ae=M.createTrade.trade.get(C.symbol))==null?void 0:ae[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(Z===void 0||K===void 0||Q===void 0)break;const Ee=K.priceLocked!==!0,ye=K.orderType===ne.STOP||K.orderType===ne.STOPLIMIT||K.orderType===ne.MARKET||Ee?!0:K.priceLocked!==!0,Ce=Z.slice();Ce[C.draftOrderIndex]={...K,quantityOffset:C.quantityOffset,priceLocked:Ee?!Ee:K.priceLocked},S(O.dispatch)(C.symbol,{...Q,orders:Ce},P++,ye);break}case f.ToggleOrderDirection:{D(O.dispatch)(C.symbol);const Q=(Me=M.createTrade.trade.get(C.symbol))==null?void 0:Me[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(Z===void 0||K===void 0||Q===void 0)break;const Ee=K.orderType,ye=K.legs[C.legIndex],Ce=M.createTrade.fromStrategy.get(C.symbol),Oe=K.spreadName;let ce=Array.from(K.legs);Oe===nt.COVERED||Oe===nt.COLLAR||Ce===nt.IRON_CONDOR||Ce===nt.VERTICAL||Ce===nt.BUTTERFLY?ce=K.legs.map(ue=>({...ue,direction:wS(ue.direction)})):ce[C.legIndex]={...ye,direction:C.direction},O.dispatch({type:f.UpdateDraftOrderLegs,symbol:C.symbol,draftOrderIndex:C.draftOrderIndex,legs:ce});const De=Z.slice();De[C.draftOrderIndex]={...K,legs:ce,stopPriceOffset:Ee===ne.TRAILSTOP&&K.stopPriceOffset!==void 0?K.stopPriceOffset*-1:K.stopPriceOffset},S(O.dispatch)(C.symbol,{...Q,orders:De},P++,K.priceLocked!==!0);break}case f.UpdateOrderType:{D(O.dispatch)(C.symbol);const Q=(he=M.createTrade.trade.get(C.symbol))==null?void 0:he[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(Z===void 0||K===void 0||Q===void 0||K.bidPrice===void 0||K.askPrice===void 0||K.midPrice===void 0)break;const Ee=C.orderType===ne.LIMIT&&K.orderStartedFrom!==va.ACTIVE_TRADER?void 0:K.price,ye=M.instruments.get(C.symbol),Ce=(ye==null?void 0:ye.priceTick)??.01,Oe=C.orderType===ne.TRAILSTOP?{stopType:"MARK",stopPriceLink:$d.DOLLARS,stopPriceOffset:_E(K.quantity??0,Ce)}:void 0,ce=Z.slice();ce[C.draftOrderIndex]={...K,price:Ee,orderType:C.orderType,orderTypeError:C.orderTypeError,priceLocked:K.orderStartedFrom===va.ACTIVE_TRADER,...Oe},S(O.dispatch)(C.symbol,{...Q,orders:ce},P++,!0);const{symbol:De,draftOrderIndex:ue}=C;O.dispatch(sd(De,ue));break}case f.UpdateOrderTif:{const Q=(U=M.createTrade.trade.get(C.symbol))==null?void 0:U[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(Z===void 0||K===void 0||Q===void 0)break;const Ee=Z.slice();Ee[C.draftOrderIndex]={...K,tif:C.tif,tifError:C.tifError},S(O.dispatch)(C.symbol,{...Q,orders:Ee},P++,K.priceLocked!==!0);const{symbol:ye,draftOrderIndex:Ce}=C;O.dispatch(sd(ye,Ce));break}case f.SetTrailStopPriceOffset:{D(O.dispatch)(C.symbol);const Q=(Se=M.createTrade.trade.get(C.symbol))==null?void 0:Se[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(Z===void 0||K===void 0||Q===void 0)break;const Ee=Z.slice();Ee[C.draftOrderIndex]={...K,stopPriceOffset:C.priceOffset},S(O.dispatch)(C.symbol,{...Q,orders:Ee},P++,!1);break}case f.SetTrailStopInputType:{D(O.dispatch)(C.symbol);const Q=(be=M.createTrade.trade.get(C.symbol))==null?void 0:be[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(Z===void 0||K===void 0||Q===void 0)break;const Ee=M.instruments.get(C.symbol),ye=(Ee==null?void 0:Ee.priceTick)??.01,Ce=Z.slice(),Oe=(K.quantity??0)>=0,ce=C.trailStopInputType===qo.DOLLARS?$d.DOLLARS:$d.PERCENT;Ce[C.draftOrderIndex]={...K,stopPriceLink:ce,stopPriceOffset:C.trailStopInputType===qo.DOLLARS?_E(K.quantity??0,ye):Oe?LE:LE*-1},S(O.dispatch)(C.symbol,{...Q,orders:Ce},P++,!1);break}case f.OrderAccountSelected:{const Z=M.userSettings.tradingSystem===gt.PaperMoney?ya.prevAccountPM:ya.prevAccountLT,K=(le=M.createTrade.trade.get(C.symbol))==null?void 0:le[0],Ee=K==null?void 0:K.orders,ye=Ee==null?void 0:Ee[0];if(ye===void 0||Ee===void 0||K===void 0)break;io.set(`update-draft-order-${C.symbol}`,P);const Ce=()=>{N(De=>{O.dispatch(_ie(De))},()=>yr(),C.account.code,"orderAccountPositions")};L(Dh,te.POSITIONS,Ce),S(O.dispatch)(C.symbol,{...K,account:C.account.code,orders:Ee.map(De=>({...De,account:C.account.code}))},P++,ye.priceLocked!==!0);const ce=M.account.list.findIndex(De=>De.code===C.account.code).toString();sessionStorage.setItem(Z,ce);break}case f.UpdateTradePrice:{const Q=(We=M.createTrade.trade.get(C.symbol))==null?void 0:We[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(Z===void 0||K===void 0||Q===void 0)break;(K.priceLocked===!1||K.priceLocked===void 0)&&D(O.dispatch)(C.symbol);const Ee=Z.slice();Ee[C.draftOrderIndex]={...K,price:C.price!==void 0?C.price:K.price,activationPrice:C.activationPrice!==void 0?C.activationPrice:K.activationPrice},S(O.dispatch)(C.symbol,{...Q,orders:Ee},0,!1);break}case f.SelectOptionType:{D(O.dispatch)(C.symbol),io.set(`update-draft-order-${C.symbol}`,P);const Q=(He=M.createTrade.trade.get(C.symbol))==null?void 0:He[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(Z===void 0||K===void 0||Q===void 0)return;const Ee=K.spreadName,ye=M.createTrade.fromStrategy.get(C.symbol);let Ce=Array.from(K.legs);if(ye===nt.DIAGONAL||ye===nt.CALENDAR||ye===nt.VERTICAL||ye===nt.BUTTERFLY)Ce=Ce.map(ce=>{const De=cT(C.optionType,ce.symbol);return{...ce,symbol:De,optionType:C.optionType}}),g(O.dispatch)(C.symbol,C.draftOrderIndex,Ce);else{const ce=K.legs[C.legIndex];if(ce===void 0||ce.optionExpiration===void 0||ce.optionStrike===void 0||ce.instrumentType===void 0)break;p(O.dispatch)(C.symbol,C.legIndex,C.draftOrderIndex,{instrumentType:k.OPTION,optionType:C.optionType,availableOptionExpirations:ce.availableOptionExpirations??[],optionExpiration:ce.optionExpiration,availableOptionStrikes:ce.availableOptionStrikes??[],optionStrike:ce.optionStrike,optionStrikeError:ce.optionStrikeError});const De=cT(C.optionType,ce.symbol);Ee==="COVERED"?Ce[C.legIndex]={...Ce[C.legIndex],symbol:De,direction:wS(Ce[C.legIndex].direction)}:Ce[C.legIndex]={...Ce[C.legIndex],symbol:De}}O.dispatch({type:f.UpdateDraftOrderLegs,symbol:C.symbol,legs:Ce,draftOrderIndex:C.draftOrderIndex});const Oe=Z.slice();Oe[C.draftOrderIndex]={...K,priceLocked:!1,legs:Ce},S(O.dispatch)(C.symbol,{...Q,orders:Oe},P++);break}case f.SelectOptionStrike:{D(O.dispatch)(C.symbol),io.set(`update-draft-order-${C.symbol}`,P);const Q=(Dt=M.createTrade.trade.get(C.symbol))==null?void 0:Dt[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(Z===void 0||K===void 0||(Q==null?void 0:Q.account)===void 0)return;const Ee=M.createTrade.fromStrategy.get(C.symbol);let ye=Array.from(K.legs);const Ce=ife(C.optionStrike,ye);if(Ee===nt.CALENDAR&&Ce){const ce=[];ye=ye.map(Ne=>(Ne.optionExpiration!==void 0&&Ne.optionType!==void 0&&ce.push({underlyingSymbol:C.symbol,expiration:Ne.optionExpiration,strike:C.optionStrike,optionType:Ne.optionType}),{...Ne,optionStrike:C.optionStrike})),g(O.dispatch)(C.symbol,C.draftOrderIndex,ye);const De=await c(ce);if(De===void 0)break;const[ue,$e]=De;if(ue===void 0||ue===""||$e===void 0||$e==="")break;ye=[{...ye[0],symbol:ue},{...ye[1],symbol:$e}]}else{const ce=K.legs[C.legIndex];if(ce===void 0||ce.optionExpiration===void 0||ce.instrumentType===void 0||ce.optionType===void 0)break;p(O.dispatch)(C.symbol,C.legIndex,C.draftOrderIndex,{instrumentType:k.OPTION,optionType:ce.optionType,availableOptionExpirations:ce.availableOptionExpirations??[],optionExpiration:ce.optionExpiration,availableOptionStrikes:ce.availableOptionStrikes??[],optionStrike:C.optionStrike,optionStrikeError:void 0});let De;try{De=await l(C.symbol,ce.optionExpiration,C.optionStrike,ce.optionType)}catch{io.set(`update-draft-order-${C.symbol}`,P-1)}if(De===void 0||De==="")break;ye[C.legIndex]={...ye[C.legIndex],symbol:De}}O.dispatch({type:f.UpdateDraftOrderLegs,symbol:C.symbol,draftOrderIndex:C.draftOrderIndex,legs:ye});const Oe=Z.slice();Oe[C.draftOrderIndex]={...K,priceLocked:!1,legs:ye},S(O.dispatch)(C.symbol,{...Q,orders:Oe},P++);break}case f.SelectOptionExpiration:{D(O.dispatch)(C.symbol),io.set(`update-draft-order-${C.symbol}`,P);let Q=[];try{Q=await n(M.optionInstrumentDetails,C.symbol,C.optionExpiration.id)}catch{io.set(`update-draft-order-${C.symbol}`,P-1);break}const Z=(Jt=M.createTrade.trade.get(C.symbol))==null?void 0:Jt[0],K=Z==null?void 0:Z.orders,Ee=K==null?void 0:K[C.draftOrderIndex];if(K===void 0||Ee===void 0||Z===void 0)return;const ye=M.createTrade.fromStrategy.get(C.symbol);let Ce=Array.from(Ee.legs);if(ye===nt.IRON_CONDOR||ye===nt.VERTICAL||ye===nt.BUTTERFLY){const ce=[];Ce=Ce.map(ue=>{if(ue.optionType===void 0||ue.optionStrike===void 0)return ue;const{strike:$e,error:Ne}=u(ue.optionType,ue.optionStrike,Q);return ce.push({underlyingSymbol:C.symbol,expiration:C.optionExpiration,strike:$e,optionType:ue.optionType}),{...ue,optionExpiration:C.optionExpiration,availableOptionStrikes:Q,optionStrike:$e,optionStrikeError:Ne}}),g(O.dispatch)(C.symbol,C.draftOrderIndex,Ce);const De=await c(ce);if(De===void 0)break;switch(ye){case nt.IRON_CONDOR:{const[ue,$e,Ne,Ke]=De;if(ue===void 0||ue===""||$e===void 0||$e===""||Ne===void 0||Ne===""||Ke===void 0||Ke==="")break;Ce=[{...Ce[0],symbol:ue},{...Ce[1],symbol:$e},{...Ce[2],symbol:Ne},{...Ce[3],symbol:Ke}];break}case nt.VERTICAL:{const[ue,$e]=De;if(ue===void 0||ue===""||$e===void 0||$e==="")break;Ce=[{...Ce[0],symbol:ue},{...Ce[1],symbol:$e}];break}case nt.BUTTERFLY:{const[ue,$e,Ne]=De;if(ue===void 0||ue===""||$e===void 0||$e===""||Ne===void 0||Ne==="")break;Ce=[{...Ce[0],symbol:ue},{...Ce[1],symbol:$e},{...Ce[2],symbol:Ne}];break}}}else{const ce=Ee.legs[C.legIndex];if(ce===void 0||ce.optionStrike===void 0||ce.optionType===void 0||(Z==null?void 0:Z.account)===void 0)break;const{strike:De,error:ue}=u(ce.optionType,ce.optionStrike,Q);p(O.dispatch)(C.symbol,C.legIndex,C.draftOrderIndex,{instrumentType:k.OPTION,optionType:ce.optionType,availableOptionExpirations:ce.availableOptionExpirations??[],optionExpiration:C.optionExpiration,availableOptionStrikes:Q,optionStrike:De,optionStrikeError:ue});let $e;try{$e=await l(C.symbol,C.optionExpiration,De,ce.optionType)}catch{io.set(`update-draft-order-${C.symbol}`,P-1)}if($e===void 0||$e==="")break;Ce[C.legIndex]={...Ce[C.legIndex],symbol:$e,availableOptionStrikes:Q,optionStrike:De,optionStrikeError:ue,optionExpiration:C.optionExpiration}}O.dispatch({type:f.UpdateDraftOrderLegs,symbol:C.symbol,draftOrderIndex:C.draftOrderIndex,legs:Ce});const Oe=K.slice();Oe[C.draftOrderIndex]={...Ee,priceLocked:!1,legs:Ce},S(O.dispatch)(C.symbol,{...Z,orders:Oe},P++);break}case f.SelectFutureExpiration:{D(O.dispatch)(C.symbol);const Q=(ve=M.createTrade.trade.get(C.symbol))==null?void 0:ve[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(K===void 0||Z===void 0||(Q==null?void 0:Q.account)===void 0)break;const Ee=K.legs[C.legIndex],ye=C.futureExpiration.symbol;p(O.dispatch)(C.symbol,0,C.draftOrderIndex,{instrumentType:k.FUTURE,futureExpiration:C.futureExpiration,availableFutureExpirations:Ee.availableFutureExpirations});const Ce=Array.from(K.legs);Ce[C.legIndex]={...Ee,symbol:ye},O.dispatch({type:f.UpdateDraftOrderLegs,symbol:C.symbol,draftOrderIndex:C.draftOrderIndex,legs:Ce});const Oe=Z.slice();Oe[C.draftOrderIndex]={...K,legs:Ce,priceLocked:!1},S(O.dispatch)(C.symbol,{...Q,orders:Oe},P++);break}case f.DeleteDraftOrder:{const Q=(Ue=M.createTrade.trade.get(C.symbol))==null?void 0:Ue[0],Z=Q==null?void 0:Q.orders;if((Z==null?void 0:Z[0])===void 0||(Q==null?void 0:Q.account)===void 0||Z===void 0)break;T(O.dispatch)(C.symbol,F++),L(Dh,te.POSITIONS);break}case f.DeleteDraftLeg:case f.DeleteTradeTicket:{D(O.dispatch)(C.rootSymbol);const Q=(ft=M.createTrade.trade.get(C.rootSymbol))==null?void 0:ft[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(K===void 0||(Q==null?void 0:Q.account)===void 0||Z===void 0)break;const ye=C.type===f.DeleteTradeTicket&&Z.length===1,Ce=K.legs.length===1&&Z.length===1;if(ye||Ce){T(O.dispatch)(C.rootSymbol,F++),L(Dh,te.POSITIONS);break}O.dispatch({type:f.ClearStrategy,rootSymbol:C.rootSymbol});const ce=Array.from(K.legs),De=Z.slice();C.type===f.DeleteTradeTicket?delete De[C.draftOrderIndex]:(K.legs[C.legIndex]&&Ye({category:Ve.Trade,action:Le.DeleteDraftOrderLegTicket,label:K.legs[C.legIndex].instrumentType}),ce.splice(C.legIndex,1),De[C.draftOrderIndex]={...K,legs:ce}),E(O.dispatch)(C.rootSymbol,{accountCode:Q==null?void 0:Q.account,action:In.CONFIRM,orders:De.filter(ue=>ue.legs.length>0).map(ue=>({requestType:Rs.INIT_OPTION,legs:ue.legs,orderType:ue.orderType,tif:ue.tif,priceLocked:ue.priceLocked,limitPrice:ue.priceLocked?ue.price:void 0}))},P++);break}case f.DraftOrderSetLockedState:{C.closeConfirmation===!0&&D(O.dispatch)(C.symbol);const Q=(_e=M.createTrade.trade.get(C.symbol))==null?void 0:_e[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex];if(Z===void 0||K===void 0||Q===void 0)break;let Ee;C.updateAllOrders?Ee=Z.map(Oe=>({...Oe,priceLocked:C.targetState})):(Ee=Z.slice(),Ee[C.draftOrderIndex]={...K,priceLocked:C.targetState}),S(O.dispatch)(C.symbol,{...Q,orders:Ee},P++,!C.targetState);const{symbol:ye,draftOrderIndex:Ce}=C;O.dispatch(sd(ye,Ce));break}case f.SendOrder:{const Q=(ht=M.createTrade.trade.get(C.symbol))==null?void 0:ht[0];if(Q===void 0)break;const Z=O.getState().currentTime;y(O.dispatch)(C.symbol,Q,Z),L(Dh,te.POSITIONS);break}case f.AddContingentOrder:{D(O.dispatch)(C.symbol);const Q=(kt=M.createTrade.trade.get(C.symbol))==null?void 0:kt[0],Z=Q==null?void 0:Q.orders[0];if(Z===void 0||Q===void 0||Q.account===void 0)break;const K=Z.legs.map(ue=>({...ue,quantity:Z.quantityOffset&&Z.quantity?Math.abs(Z.quantity):ue.quantity,direction:ue.direction===pe.Buy?pe.Sell:pe.Buy,optionStrikeError:void 0})),Ee={...Z,legs:K},ye=M.quotes.get((yt=Z.legs[0])==null?void 0:yt.symbol),Ce=M.instruments.get((jt=Z.legs[0])==null?void 0:jt.symbol),Oe=(Ce==null?void 0:Ce.priceTick)??2,ce=ye==null?void 0:ye.mark,De=ce!==void 0?Zf(ce,Oe):Z.price;E(O.dispatch)(C.symbol,{accountCode:Q.account,action:In.CONFIRM,orders:[...((Q==null?void 0:Q.orders)||[]).slice(0,(Q==null?void 0:Q.orders.length)-1).map(ue=>({legs:OE(ue),orderType:ue.orderType,tif:ue.tif,priceLocked:ue.priceLocked,requestType:Rs.EDIT_ORDER,limitPrice:ue.price})),{requestType:Rs.INIT_STOCK,legs:Ee.legs,orderType:ne.LIMIT,tif:Z.tif,priceLocked:!0,limitPrice:De??0}],orderRules:Q.orderRules.concat([[]]),contingencies:Q.contingencies},P++);break}case f.ChangeContingency:{D(O.dispatch)(C.symbol);const Q=(It=M.createTrade.trade.get(C.symbol))==null?void 0:It[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[C.draftOrderIndex+1],Ee=Z==null?void 0:Z[0];if(K===void 0||Z===void 0||Q===void 0||Ee===void 0)break;const ye=Z.slice();if(!K.isModified){const Ce=C.contingency===rs.OR?ne.STOP:ne.LIMIT,Oe=Ee.legs.map(ce=>{const De=C.contingency===rs.THEN;let ue=ce.direction;return De&&(ue=ce.direction===pe.Buy?pe.Sell:pe.Buy),{...ce,direction:ue,optionStrikeError:void 0}});ye[C.draftOrderIndex+1]={...K,priceLocked:C.contingency===rs.THEN||C.contingency===rs.AND?!0:K.priceLocked,orderType:Ce,orderTypeError:void 0,tifError:void 0,legs:Oe}}S(O.dispatch)(C.symbol,{...Q,orders:ye},P++);break}case f.AddOrderRule:{const{symbol:Q,draftOrderIndex:Z}=C.orderPayload;Q&&Z&&O.dispatch(sd(Q,Z));break}case f.AdvancedOrderSelected:{D(O.dispatch)(C.symbol);const Q=(Lt=M.createTrade.trade.get(C.symbol))==null?void 0:Lt[0],Z=Q==null?void 0:Q.orders,K=Z==null?void 0:Z[0];if(K===void 0||Z===void 0||Q===void 0||Q.account===void 0)break;const Ee=C.advancedOrderType,ye=M.quotes.get((Zt=K.legs[0])==null?void 0:Zt.symbol),Ce=M.instruments.get((ns=K.legs[0])==null?void 0:ns.symbol),Oe=(Ce==null?void 0:Ce.priceTick)??2,ce=ye==null?void 0:ye.mark,De=ce!==void 0?Zf(ce,Oe):K.price,ue=Z.length-1;let Ne=Z[ue].allowedOrderTypes.length===0?ue:Z.length;if(Ee===Ot.FIRST_TRIGGERS_SEQ||Ee===Ot.FIRST_TRIGGERS_OCO||Ee===Ot.FIRST_TRIGGERS_ALL){const Ge=Z[ue-1];Ge!==void 0&&Ge.allowedOrderTypes.length===0&&(Ne=ue-1)}const Ke=Z.slice(0,Ne).map(Ge=>({legs:OE(Ge),orderType:Ge.orderType,tif:Ge.tif,priceLocked:Ge.priceLocked,requestType:Rs.EDIT_ORDER,limitPrice:Ge.price})),Qe=K.legs.map(Ge=>({...Ge,quantity:RE(K,Ge),optionStrikeError:void 0})),St=K.legs.map(Ge=>({...Ge,quantity:RE(K,Ge),direction:Ge.direction===pe.Buy?pe.Sell:pe.Buy,optionStrikeError:void 0}));switch(Ee){case Ot.BLAST_ALL:case Ot.OCO:{const Ge=Ee===Ot.OCO;Ke.length<Hf&&Ke.push({requestType:Rs.INIT_STOCK,legs:Qe,orderType:Ge?ne.STOP:ne.LIMIT,tif:K.tif,priceLocked:!0,limitPrice:Ge?void 0:De??0,activationPrice:Ge?De??0:void 0});break}case Ot.FIRST_TRIGGERS_SEQ:case Ot.FIRST_TRIGGERS_ALL:case Ot.FIRST_TRIGGERS_OCO:{if(Ke.length<Hf&&Ke.push({requestType:Rs.INIT_STOCK,legs:St,orderType:ne.LIMIT,tif:K.tif,priceLocked:!0,limitPrice:De??0}),Ke.length<LO){const Ge=Ee===Ot.FIRST_TRIGGERS_OCO,rt=Ee===Ot.FIRST_TRIGGERS_SEQ;Ke.push({requestType:Rs.INIT_STOCK,legs:rt?Qe:St,orderType:Ge?ne.STOP:ne.LIMIT,tif:K.tif,priceLocked:!0,limitPrice:Ge?void 0:De??0,activationPrice:Ge?De??0:void 0})}break}}E(O.dispatch)(C.symbol,{accountCode:Q.account,action:In.CONFIRM,orders:Ke,orderRules:Q.orderRules,contingencies:Q.contingencies},P++);break}case f.UpdateOrderRule:{const{parameters:Q,draftOrderIndex:Z}=C.orderPayload,{symbol:K}=C.orderPayload.parameters;D(O.dispatch)(K);const Ee=(ct=M.createTrade.trade.get(K))==null?void 0:ct[0],ye=Ee==null?void 0:Ee.orders,Ce=ye==null?void 0:ye[Z];if(Ee===void 0||Ce===void 0||ye===void 0)break;const Oe=ye.slice(),ce=Wy([Q]);Oe[Z]={...Ce,...ce},S(O.dispatch)(K,{...Ee,orders:Oe},P++);break}case f.RemoveOrderRule:{const{symbol:Q}=C.orderPayload;if(Q===void 0)break;D(O.dispatch)(Q);const Z=(qt=M.createTrade.trade.get(Q))==null?void 0:qt[0];if(Z===void 0)break;S(O.dispatch)(Q,{...Z},P++);break}case f.ReconnectToPlaceOrder:{const Q=Kae(M);if(!Q.length)break;Q.forEach(Z=>{var Ce;const K=(Ce=M.createTrade.trade.get(Z))==null?void 0:Ce[0],Ee=K==null?void 0:K.orders,ye=Ee==null?void 0:Ee[0];ye!==void 0&&Ee!==void 0&&K!==void 0&&S(O.dispatch)(Z,{...K},P++,ye.priceLocked!==!0)});break}}}},dfe=e=>{let t=1;return e.forEach(s=>{s.instrumentType===k.OPTION&&(t=s.quantity)}),t},ufe=(e,t,s,n)=>{const r=t.filter(o=>!n.some(i=>s!==void 0&&i.optionExpiration!==void 0&&i.optionExpiration.id===s.id&&i.optionStrike===o));return Math.min(...r.filter(o=>o>e),Math.max(...r))},GD=e=>{const t=Mo(e),s=Tr(e),n=t===gt.PaperMoney?ya.prevAccountPM:ya.prevAccountLT;let r="";const o=$w(sessionStorage.getItem(n)),i=s[o];return i!==void 0?r=i.code:s[0]!==void 0&&(r=s[0].code),e.selectedAccount==="COMBINED ACCOUNT"?r:e.selectedAccount},PE=(e,t)=>{if(e!==t)return __("The strike ${selectedStrike} is unavailable, updated to ${updatedStrike}").replace("${selectedStrike}",e.toString()).replace("${updatedStrike}",t.toString())},hfe=(e,t,s)=>{switch(e){case dt.Call:{const n=Math.min(Math.max(...s),...s.filter(r=>r>=t));return{strike:n,error:PE(t,n)}}case dt.Put:{const n=Math.max(Math.min(...s),...s.filter(r=>r<=t));return{strike:n,error:PE(t,n)}}}},pfe=(e,t,s=1)=>{if(t.length===0)return;const n=t.filter(o=>o>e);return n.length>=s?n[s-1]:t[t.length-1]},mfe=(e,t,s=1)=>{if(t.length===0)return;const n=t.filter(o=>o<e),r=n.length;return r>=s?n[r-s]:t[0]},gfe=e=>{switch(e){case dt.Call:return"CALL";case dt.Put:return"PUT"}},Sfe=e=>(t,s,n,r)=>new Promise(o=>e([{header:{service:te.OPTION_SYMBOLS,id:`optionSymbols-${Qn()}`,ver:0},params:{options:[{type:gfe(r),underlying:t,strike:n,seriesName:s.id}]}}],i=>o(i.option.length>0?i.option[0].symbol:void 0))),ffe=e=>{switch(e){case dt.Call:return"CALL";case dt.Put:return"PUT"}},Tfe=e=>t=>new Promise(s=>e([{header:{service:te.OPTION_SYMBOLS,id:`optionSymbols-${Qn()}`,ver:0},params:{options:t.map(n=>{const{strike:r,expiration:o,underlyingSymbol:i,optionType:l}=n;return{type:ffe(l),underlying:i,strike:r,seriesName:o.id}})}}],n=>s(n.option.length>=t.length?n.option.map(r=>r.symbol):void 0))),yfe=e=>(t,s,n)=>{const r=t.availableOptionStrikes.get(s),o=r!==void 0?r.get(n):void 0;return o!==void 0?new Promise(i=>i(o)):new Promise(i=>e([{header:{service:te.OPTION_STRIKES,id:`optionStrikes-${Qn()}`,ver:0},params:{underlying:s,seriesName:n}}],l=>i(l.strikes)))},YD=e=>({type:f.HideOrderConfirmation,symbol:e}),Cfe=e=>t=>e(YD(t)),qD=(e,t=.1)=>{const n=e&&e<0?-1:1;return Math.abs(t)*n},KD=(e,t,s,n,r)=>{if(t===ne.LIMIT||t===ne.STOP||t===ne.STOPLIMIT||t===ne.LOC)return e.length===1?e[0].direction===pe.Buy?n:s:r},zD=(e,t)=>{if(e.length===0)return{orderType:ne.NONE,error:void 0};const s=e.includes(t),n=s?t:e.includes(ne.LIMIT)?ne.LIMIT:e.includes(ne.MARKET)?ne.MARKET:ne.NONE,r=!s&&t!==ne.NONE?__("The order type ${selectedOrderType} is unavailable, updated to ${orderType}").replace("${selectedOrderType}",__(t)).replace("${orderType}",__(n)):void 0;return{orderType:n,error:r}},bfe=(e,t)=>{const s=Nm.DAY;if(t.length===0)return{tif:void 0,error:void 0};let n=e!==void 0?e:s,r;const o=t.includes(n);return e!==void 0&&!o&&(n=s,r="The ${selectedTif} Time-in-Force is unavailable, updated to ${defaultTif}".replace("${selectedTif}",__(nu(e))).replace("${defaultTif}",__(nu(s)))),{tif:n,error:r}},Efe=e=>t=>(s,n,r=0)=>new Promise((o,i)=>{const l=`update-draft-order-${s}`;return e([{header:{id:l,service:te.PLACE_ORDER,ver:r},params:{action:n.action,accountCode:n.accountCode,marker:n.contingencies!==void 0?Oc(n.contingencies):n.orders.length===1?Ot.SINGLE:Ot.BLAST_ALL,orders:n.orders.map(c=>{var u;const d=c.orderType===ne.TRAILSTOP?{stopType:c.stopType,stopPriceLink:c.stopPriceLink,stopPriceOffset:c.stopPriceOffset}:void 0;return{refOrderId:c.refOrderId,requestType:c.requestType,tif:c.tif,orderType:c.orderType!==ne.NONE?c.orderType:void 0,limitPrice:c.limitPrice!==void 0&&c.orderType!==ne.STOP&&c.orderType!==ne.TRAILSTOP?c.limitPrice:void 0,stopPrice:c.orderType===ne.STOP||c.orderType===ne.STOPLIMIT?c.activationPrice:void 0,...d,legs:(u=c.legs)==null?void 0:u.map(h=>({symbol:h.symbol,quantity:h.direction===pe.Sell?h.quantity*-1:h.quantity}))}})}}],c=>{if(io.get(c.requestId)!==c.requestVer)return;if(c.orders.length===0)return c.error!==void 0&&t({type:f.ConfirmOrder,symbol:s,orderConfirmation:{error:c.error,cost:0,orderSummary:"",canBeSent:!1}}),i();const u=c.orders[0],h=u.spreadName!==void 0?cl(u.spreadName):void 0,p=c.confirmation??{cost:0,commission:0,fee:0,rows:[]},m=p.rows.reduce((L,P)=>P.numericValues!==void 0?L.set(P.title,P.numericValues[0]):L,ke());let g=!1,S=-1,T,y,b=!1,E=-1,v,D;const w=c.orders.map((L,P)=>{var He,Dt,Jt,ve,Ue,ft,_e,ht,kt,yt,jt,It;const F=L.types,O=Aw((F==null?void 0:F.values)??[]),H=L.midPrice!==void 0?L.midPrice:0,C=L.bidPrice!==void 0?L.bidPrice:0,M=L.askPrice!==void 0?L.askPrice:0,q=((He=n.orders[P])==null?void 0:He.priceLocked)||(L==null?void 0:L.priceLocked)||((Dt=n.orders[P])==null?void 0:Dt.limitPrice)!==void 0;let W,z;const re=(Jt=n.orders[P])==null?void 0:Jt.orderType;if(re!==void 0){const Lt=zD(O,re);W=Lt.orderType,z=Lt.error}else W=F!==void 0&&F.values.length>0?_m(F.values[F.selection]):ne.NONE;const ae=((ve=n.orders[P])==null?void 0:ve.legs)??[],Me=((Ue=n.orders[P])==null?void 0:Ue.limitPrice)??KD(ae,W,C,M,H),he=re===ne.STOPLIMIT?((ft=n.orders[P])==null?void 0:ft.activationPrice)??Me:void 0,U=L.tifs!==void 0?Xr(L.tifs.values.map(dl)):[];let Se,be;if(((_e=n.orders[P])==null?void 0:_e.tif)!==void 0){const Lt=bfe((ht=n.orders[P])==null?void 0:ht.tif,U);Se=Lt.tif,be=Lt.error}else Se=L.tifs!==void 0?dl(L.tifs.values[L.tifs.selection]):void 0;const le=L.spreadName!==void 0?cl(L.spreadName):void 0;let We;return((kt=n.orders[P])==null?void 0:kt.orderType)===ne.TRAILSTOP&&(We=qD(L.quantity,(yt=n.orders[P])==null?void 0:yt.stopPriceOffset)),z!==void 0&&(g=!0,T=W,y=z,S=P),be!==void 0&&(b=!0,v=Se,D=be,E=P),{orderType:W,orderTypeError:z,price:Me,activationPrice:he,askPrice:M,bidPrice:C,midPrice:H,cost:L.cost,allowedOrderTypes:O,allowedTifs:U,legs:ae,priceStep:L.priceStep,priceType:L.priceType,quantity:L.quantity,priceLocked:q,tif:Se,tifError:be,orderError:L.error,spreadName:le,stopType:(jt=n.orders[P])==null?void 0:jt.stopType,stopPriceOffset:We,stopPriceLink:(It=n.orders[P])==null?void 0:It.stopPriceLink}});t({type:f.DraftOrderUpdated,rootSymbol:s,draftOrders:w}),g&&T!==void 0&&t({type:f.UpdateOrderType,symbol:s,draftOrderIndex:S,orderType:T,orderTypeError:y}),b&&v!==void 0&&t({type:f.UpdateOrderTif,symbol:s,draftOrderIndex:E,tif:v,tifError:D}),u.error!==void 0&&Ye({category:Ve.Errors,action:Le.TradeTicketError,label:u.error+" "+s+" "+(h??"")});const N=c.orders.map(L=>{var P;return{cost:L.cost,commission:L.commissions,fee:((P=L.fees)==null?void 0:P.reduce((F,O)=>F+O.value,0))??void 0}});t({type:f.ConfirmOrder,symbol:s,orderConfirmation:{cost:p.cost,commission:p.commission,fee:p.fee,buyingPowerForOptions:m.get("Resulting Buying Power for Options"),buyingPowerForStock:m.get("Resulting Buying Power for Stock"),buyingPowerEffectForForex:m.get("Forex Buying Power Effect"),buyingPowerForForex:m.get("Resulting Buying Power for Forex"),buyingPowerEffect:m.get("Buying Power Effect"),warnings:(p.warnings??[]).map(L=>L.message),canBeSent:p.rows.length>0,orderSummary:u.descriptionToShare,orderSummaries:c.orders.map(L=>L.descriptionToShare),quantity:u.quantity,spreadName:h,orderPaymentDetails:N}}),o()})}),Afe=e=>t=>e({type:f.LegsLimitReached,limitReached:t}),vfe=e=>(t,s)=>e({type:f.ConfirmOrder,symbol:t,orderConfirmation:{spreadName:s,canBeSent:!1}}),Ife=e=>t=>(s,n,r)=>{if(n.account===void 0)return;const o=Oc(n.contingencies),i=`update-draft-order-${s}`;e([{header:{ver:0,service:te.PLACE_ORDER,id:i},params:{accountCode:n.account,action:In.SUBMIT,marker:o,orders:n.orders.map((l,c)=>{const d=Wy(n.orderRules[c]),u=l.orderType===ne.TRAILSTOP?{stopType:l.stopType,stopPriceLink:l.stopPriceLink,stopPriceOffset:l.stopPriceOffset}:void 0,h=l.quantityOffset?{quantityLink:l.quantityLink,quantityOffset:l.legs[0].direction===pe.Buy?l.quantityOffset:l.quantityOffset*-1}:void 0;return{tif:l.tif,orderType:l.orderType,limitPrice:l.price!==void 0&&l.orderType!==ne.STOP?l.price:void 0,stopPrice:l.price!==void 0&&l.orderType===ne.STOP?l.price:l.orderType===ne.STOPLIMIT?l.activationPrice:void 0,requestType:Rs.EDIT_ORDER,refOrderId:l.id,legs:l.legs.map(p=>l.quantityOffset?{symbol:p.symbol}:{symbol:p.symbol,quantity:p.direction===pe.Buy?p.quantity:p.quantity*-1}),tag:"TOSWeb",...h,...u,...d}})}}],l=>{const c=l.error;if(c!==void 0){const d=n.orders[0],u={accountCode:n.account,description:c,direction:d.quantity!==void 0&&d.quantity>0?pe.Buy:pe.Sell,orderId:0,quantity:(d==null?void 0:d.quantity)??0,status:Je.Rejected,id:"submit"+d.legs[0].symbol,eventTime:r.getTime(),instrument:{symbol:d.legs[0].symbol,rootSymbol:d.legs[0].rootSymbol,instrumentType:d.legs[0].instrumentType}};t($D([u],r,!1)),Ye({category:Ve.Errors,action:Le.SendTradeError,label:c})}}),t({type:f.DraftOrderDeleted,rootSymbol:s})},xfe=e=>(t,s,n,r)=>e({type:f.DraftOrderInstrumentDetailsUpdated,rootSymbol:t,draftOrderIndex:n,instrumentDetailsList:[{legIndex:s,draftOrderInstrumentDetails:r}]}),wfe=e=>(t,s,n)=>e({type:f.DraftOrderInstrumentDetailsUpdated,rootSymbol:t,draftOrderIndex:s,instrumentDetailsList:n}),Ofe=e=>(t,s,n)=>{const r=n.map((o,i)=>({legIndex:i,draftOrderInstrumentDetails:{...o}}));return e({type:f.DraftOrderInstrumentDetailsUpdated,rootSymbol:t,draftOrderIndex:s,instrumentDetailsList:r})};let kE=-1;const Rfe=e=>t=>(s,n,r=0,o)=>new Promise((i,l)=>{const c=`update-draft-order-${s}`;n.account!==void 0&&n.account!==""&&e([{header:{id:c,ver:r,service:te.PLACE_ORDER},params:{action:In.CONFIRM,accountCode:n.account,marker:Oc(n.contingencies),orders:n.orders.map((d,u)=>{const h=Wy(n.orderRules[u]??[]),p=d.orderType===ne.TRAILSTOP?{stopType:d.stopType,stopPriceLink:d.stopPriceLink,stopPriceOffset:d.stopPriceOffset}:void 0,m=d.quantityOffset?{quantityLink:d.quantityLink,quantityOffset:d.legs[0].direction===pe.Buy?d.quantityOffset:d.quantityOffset*-1}:void 0;return{tif:d.tif,orderType:d.orderType!==ne.NONE?d.orderType:void 0,refOrderId:d.id,requestType:Rs.EDIT_ORDER,limitPrice:d.priceLocked===!1?void 0:d.price!==void 0&&d.orderType!==ne.STOP&&d.orderType!==ne.TRAILSTOP?d.price:void 0,stopPrice:d.priceLocked===!1?void 0:d.price!==void 0&&d.orderType===ne.STOP?d.price:d.activationPrice!==void 0&&d.orderType===ne.STOPLIMIT?d.activationPrice:void 0,...p,legs:d.legs.map(g=>d.quantityOffset?{symbol:g.symbol}:{symbol:g.symbol,quantity:g.direction===pe.Buy?g.quantity:g.quantity*-1}),...m,tag:"TOSWeb",...h}})}}],d=>{if(io.get(d.requestId)!==d.requestVer)return;if(n.account===void 0||n.account==="")return l();if(d.orders.length===0)return d.error!==void 0&&t({type:f.ConfirmOrder,symbol:s,orderConfirmation:{error:d.error,cost:0,orderSummary:"",canBeSent:!1}}),l();const h=d.orders[0],p=d.confirmation??{cost:0,commission:0,fee:0,rows:[]},m=p.rows.reduce((D,w)=>w.numericValues!==void 0?D.set(w.title,w.numericValues[0]):D,ke()),g=h.spreadName!==void 0?cl(h.spreadName):void 0;let S=!1;const T=kE!==d.requestVer&&o===void 0,y=n.orders,b=d.orders.map((D,w)=>{const N=y[w],L=D.types,P=Aw((L==null?void 0:L.values)??[]),F=D.midPrice,O=D.bidPrice,H=D.askPrice,C=N.triggerTime,M=N.cancelTime,q=zD(P,N.orderType),W=KD(N.legs,q.orderType,O,H,F),z=N.priceLocked===!0?N.price:o===!0||T?W:null,re=N.priceLocked===!0?N.activationPrice:o===!0||T?W:null;z===void 0&&(q.orderType===ne.LIMIT||q.orderType===ne.STOPLIMIT||q.orderType===ne.STOP||q.orderType===ne.LOC)&&(S=!0);const ae=D.spreadName!==void 0?cl(D.spreadName):void 0,Me=N.orderType===ne.TRAILSTOP;let he;Me&&(he=qD(D.quantity,N.stopPriceOffset),he!==N.stopPriceOffset&&t({type:f.SetTrailStopPriceOffset,symbol:s,draftOrderIndex:w,priceOffset:he}));const U={orderType:q.orderType,orderTypeError:N.orderTypeError,priceLocked:D.priceLocked,cost:D.cost,askPrice:H,bidPrice:O,midPrice:F,allowedOrderTypes:P,allowedTifs:D.tifs!==void 0?Xr(D.tifs.values.map(dl)):[],legs:N.legs,priceStep:D.priceStep!==void 0?D.priceStep:N.priceStep,priceType:D.priceType,quantity:D.quantity,tif:D.tifs!==void 0?dl(D.tifs.values[D.tifs.selection]):void 0,tifError:N.tifError,orderError:D.error,spreadName:ae,triggerTime:C,cancelTime:M,stopType:N.stopType,stopPriceOffset:he,stopPriceLink:N.stopPriceLink};return z!==null&&(U.price=z),re!==null&&(U.activationPrice=q.orderType===ne.STOPLIMIT?re??D.stopPrice:void 0),U});if(kE=d.requestVer,S)return l();const E={type:f.DraftOrderUpdated,rootSymbol:s,draftOrders:b};t(E),h.error!==void 0&&Ye({category:Ve.Errors,action:Le.TradeTicketError,label:h.error+" "+s+" "+(g??"")});const v=d.orders.map(D=>{var w;return{cost:D.cost,commission:D.commissions,fee:((w=D.fees)==null?void 0:w.reduce((N,L)=>N+L.value,0))??void 0}});t({type:f.ConfirmOrder,symbol:s,orderConfirmation:{cost:p.cost,commission:p.commission,fee:p.fee,buyingPowerForOptions:m.get("Resulting Buying Power for Options"),buyingPowerForStock:m.get("Resulting Buying Power for Stock"),buyingPowerEffectForForex:m.get("Forex Buying Power Effect"),buyingPowerForForex:m.get("Resulting Buying Power for Forex"),buyingPowerEffect:m.get("Buying Power Effect"),validationError:d.validationError,warnings:(p.warnings??[]).map(D=>D.message),canBeSent:p.rows.length>0,orderSummary:h.descriptionToShare,orderSummaries:d.orders.map(D=>D.descriptionToShare),quantity:h.quantity,spreadName:g,orderPaymentDetails:v}}),i()})}),Dfe=e=>cfe({getDefaultUserProperties:Pm,getDefaultOrderAccountSelector:GD,getDefaultOptionOrderStrike:ufe,getHigherOptionStrike:pfe,getLowerOptionStrike:mfe,getFallbackOptionStrike:hfe,getDefaultOptionLegQuantity:dfe,createDraftOrder:LSe,setOrderInstrumentDetails:xfe,setSeveralOrderInstrumentDetails:wfe,setSeveralOrderInstrumentDetailsFromLegs:Ofe,hideOrderConfirmation:Cfe,legsLimitReached:Afe,getOptionExpirations:bD(e),getFutureExpirations:ro(e),getOptionStrikes:yfe(e),getOptionInstrument:Sfe(e),getOptionInstrumentsList:Tfe(e),updateDraftOrder:Rfe(e),cancelDraftOrder:DSe(e),sendDraftOrder:Ife(e),resetOrderConfirmation:vfe,unsubscribe:Ks(e),initializeOrder:Efe(e),requestPositions:ID(e)}),Lfe=(e,t,s,n,r,o,i,l)=>({type:f.NavigateToSymbol,section:e,symbol:t,legs:s,orderType:n,limitPrice:r,stopPrice:o,orderTif:i,isNavigatingFromUrl:l}),XD=(e,t)=>({type:f.GetMatchingSymbolForCharts,chartId:e,symbol:t}),_fe=e=>({type:f.GetSuggestedSymbolsForNavigationSearch,pattern:e}),Nfe=e=>({type:f.GetSuggestedSymbolsForWatchlistSearch,pattern:e}),Pfe=e=>({type:f.GetSuggestedSymbolsForTransactionsSearch,pattern:e}),kfe=(e,t)=>({type:f.GetSuggestedSymbolsForChartSearch,pattern:e,chartId:t}),Mfe=e=>({type:f.SuggestedSymbolsReceivedForNavigation,navigationSearchSymbols:e}),$fe=e=>({type:f.SuggestedSymbolsReceivedForWatchlist,watchlistSearchSymbols:e}),jfe=e=>({type:f.SuggestedSymbolsReceivedForTransactions,transactionsSearchSymbols:e}),Bfe=(e,t)=>({type:f.SuggestedSymbolsReceivedForChart,chartSearchSymbols:e,chartId:t}),Ffe=e=>t=>s=>n=>{s(n),(n.type===f.GetSuggestedSymbolsForNavigationSearch||n.type===f.GetSuggestedSymbolsForWatchlistSearch||n.type===f.GetSuggestedSymbolsForTransactionsSearch||n.type===f.GetSuggestedSymbolsForChartSearch)&&e([{header:{service:te.INSTRUMENT_SEARCH,ver:0,id:`instrumentSearch-${Qn()}`},params:{limit:5,pattern:n.pattern}}],r=>{const o=new Map(r.instruments.map(l=>[l.symbol,l])),i=[];for(const l of o.values())i.push({symbol:l.symbol,displaySymbol:l.displaySymbol,description:l.description});n.type===f.GetSuggestedSymbolsForNavigationSearch&&t.dispatch(Mfe(i)),n.type===f.GetSuggestedSymbolsForWatchlistSearch&&t.dispatch($fe(i)),n.type===f.GetSuggestedSymbolsForTransactionsSearch&&t.dispatch(jfe(i)),n.type===f.GetSuggestedSymbolsForChartSearch&&t.dispatch(Bfe(i,n.chartId))})},Hfe=e=>t=>s=>n=>{switch(n.type){case f.Connected:{e("COMBINED ACCOUNT",(r,o)=>{const i=t.getState().currentTime;t.dispatch($D(r,i,o))});break}}s(n)},Ufe={"AT OR ABOVE":"GREATER_OR_EQUAL","AT OR BELOW":"LESS_OR_EQUAL",ABOVE:"GREATER",BELOW:"LESS"},Vfe=e=>t=>s=>n=>(n.type===f.CreateAlert&&e([{header:{service:te.CREATE_ALERT,ver:0,id:`alert-${Qn()}`},params:{alert:{market:{components:[{symbol:n.alert.symbol,quantity:1}],exchange:"BEST",threshold:n.alert.price,field:n.alert.priceType.toUpperCase(),operator:Ufe[n.alert.operator]||""}}}}],r=>{if(r.error)if(n.errorCallback)n.errorCallback();else{const o=al();t.dispatch(Phe(o)),setTimeout(()=>t.dispatch(Jf(o)),5e3)}else{const o=al();n.successCallback&&n.successCallback(),t.dispatch(Nhe(n.alert.symbol,o,n.alert,n.fractionalType,n.showFractionalPricing,n.isOption)),setTimeout(()=>t.dispatch(Jf(o)),5e3)}}),s(n)),Wfe=e=>[Fhe(e.request),Wme(e.request),Ffe(e.request),gpe(e.request),ppe(She(e.request)),Oge(ID(e.request),ome(e.request),Ks(e.request)),Hfe(ghe(e.request)),RSe(e.request),Dfe(e.request),rpe(e.request),i9(Bue(e.request),nme(e.request),rme(e.request)),ISe(bhe(e.request),Ehe(e.request),sl(e.request),Ahe(e.request),xhe(e.request),whe(e.request),vhe(e.request),Ihe(e.request),Ks(e.request)),Cge(ro(e.request),sl(e.request)),Hme(e.request),hge(sl(e.request)),lge(The(e.request)),Age(vge(e.request)),dge(fge(e.request)),ope(sD(e.request)),xSe(gge(e.request),pge(e.request),mge(e.request)),Lme(_me(e.request),Nme(e.request),Pme(e.request),Ks(e.request),kme(e.request)),tSe(sSe(e.request),rSe(e.request),nSe(e.request),oSe(e.request),Ks(e.request),aSe(e.request)),ige(e.request),Ppe(lhe(e.request),Ks(e.request)),$ue(e.heartbeat,e.close,e.connect,RR(e.request)),jhe(e.request),qpe(Uhe(e.request),Ghe(e.request),Yhe(e.request),qhe(e.request),Khe(e.request),Whe(e.request),Vhe(e.request)),Vfe(e.request),hpe(e.request),Xpe(e.request),sme(e.request),Sme(iSe(e.request),lSe(e.request),Ks(e.request))];var zt=(e=>(e.BuyCompleted="BuyCompleted",e.BuyPending="BuyPending",e.SellCompleted="SellCompleted",e.SellPending="SellPending",e.Cancelled="Cancelled",e.Rejected="Rejected",e.Alert="Alert",e))(zt||{});const Gfe=/^Instrument (.*) cannot be traded\.$/,Yfe=/^The minimum price increment of instrument (.*) is (.*)\. This order will not be accepted\.$/,qfe=/^Fractional quantities are not supported for (.*)/,Kfe=/^Note \(for (.*)TDA\): You may enter this opening trade, but if you close it today you will have done more than 3 day trades in 5 days and your account will be flagged as "pattern day trader"\. For more information, please see our FAQ on pattern day trading\. Click "Confirm and Send" if you want to enter this trade\./,zfe=/^BID (.*) is not allowed in order conditions because market centers can report arbitrarily low BID\./,Xfe=/^ASK (.*) is not allowed in order conditions because market centers can report arbitrarily high ASK\./,Qfe=/^Entering this order will cancel your open working orders \((.*)\)/,Zfe=/^The estimated annualized rate to sell short is (.*)\. The estimated daily fee for your order is \$(.*)\. Please note that you will be charged one day's interest even if the order doesn't execute, as shares are reserved at the time of order entry\. By selecting 'Send', you are agreeing to pay this fee\. More details can be found at www\.schwab\.com\/shortsale/,Jfe=/^The underlying security of this option is currently considered hard to borrow\. If this order results in a short position due to assignment or exercise, a daily borrow fee will be charged. The current borrow rate is (.*)\. If all shares of this option were assigned or exercised, the daily fee would be \$(.*) based on yesterday's closing price\. The borrow rate and fee are subject to change daily based upon market conditions/,QD=e=>{const t=e.match(Yfe);if(t!==null)return{key:"The minimum price increment of instrument {{instrument}} is {{price}}. This order will not be accepted.",interpolationArgs:{instrument:t[1],price:t[2]}};const s=e.match(Gfe);if(s!==null)return{key:"Instrument {{instrument}} cannot be traded.",interpolationArgs:{instrument:s[1]}};const n=e.match(qfe);if(n!==null)return{key:"Fractional quantities are not supported for {{symbol}}",interpolationArgs:{symbol:n[1]}};const r=e.match(Kfe);if(r!==null)return{key:'Note (for {{account}}TDA): You may enter this opening trade, but if you close it today you will have done more than 3 day trades in 5 days and your account will be flagged as "pattern day trader". For more information, please see our FAQ on pattern day trading. Click "Confirm and Send" if you want to enter this trade.',interpolationArgs:{account:r[1]}};const o=e.match(zfe);if(o!==null)return{key:"BID {{trigger}} is not allowed in order conditions because market centers can report arbitrarily low BID.",interpolationArgs:{trigger:o[1]}};const i=e.match(Xfe);if(i!==null)return{key:"ASK {{trigger}} is not allowed in order conditions because market centers can report arbitrarily high ASK.",interpolationArgs:{trigger:i[1]}};const l=e.match(Qfe);if(l!==null)return{key:"Entering this order will cancel your open working orders ({{orders}})",interpolationArgs:{orders:l[1]}};const c=e.match(Zfe);if(c!==null)return{key:"The estimated annualized rate to sell short is {{shortSaleBorrowingRate}}. The estimated daily fee for your order is ${{dailyEstimatedFee}}. Please note that you will be charged one day's interest even if the order doesn't execute, as shares are reserved at the time of order entry. By selecting 'Send', you are agreeing to pay this fee. More details can be found at www.schwab.com/shortsale",interpolationArgs:{shortSaleBorrowingRate:c[1],dailyEstimatedFee:c[2]}};const d=e.match(Jfe);return d!==null?{key:"The underlying security of this option is currently considered hard to borrow. If this order results in a short position due to assignment or exercise, a daily borrow fee will be charged. The current borrow rate is {{shortSaleBorrowingRate}}. If all shares of this option were assigned or exercised, the daily fee would be ${{dailyEstimatedFee}} based on yesterday's closing price. The borrow rate and fee are subject to change daily based upon market conditions",interpolationArgs:{shortSaleBorrowingRate:d[1],dailyEstimatedFee:d[2]}}:e},dT=e=>typeof e!="string"?__(e.key,{interpolationArgs:e.interpolationArgs}):__(e),vi=({warnings:e,validationError:t})=>e.length>0?a.jsx("div",{className:"warning-messages","data-testid":"warning-messages",children:e.filter(s=>s!==void 0&&s!=="").map((s,n)=>{const r=QD(s.replace(/[\r\n]+/g," ").replace(/\s+/g," "));return a.jsx("div",{className:`error ${t===s?"red-error":""}`,role:"alert","aria-live":"polite",title:`Warning ${dT(r)}`,"data-testid":`warning-message-${n}-${r}`,children:dT(r)},`${n}-${s}`)})}):null,eTe=e=>{const t=[Je.Filled,Je.Rejected,Je.Cancelled,Je.Expired],s=[pe.Buy,pe.Sell],n=["MARK","BID","ASK","LAST"],r=["TRSTPLMT","TRSTP"],o=["Replacing"],i=["SUBMIT AT","CANCEL AT"],l=["CALL","PUT","Weeklys"],c=["CALENDAR","DIAGONAL","IRON CONDOR","VERTICAL","CUSTOM","COMBO","CONDOR","BUTTERFLY","COVERED","STRANGLE","SINGLE","BACKRATIO","COLLAR/SYNTHETIC","VERT ROLL","COLLAR","COLLAR WITH STOCK","DBL DIAG","UNBALANCED","DEEP AND WIDE","STRADDLE"],d=e.replace(/[\r\n]+/g," ").replace(/\s+/g," "),u=QD(d);if(e.indexOf("Couldn't find Instrument by")!==-1){const h=[4,5],p="${dynamicField}",m=e.split(" "),g=m.map((T,y)=>h.includes(y)?p:T).join(" "),S=__(g);return h.reduce((T,y)=>T.replace(p,m[y]),S)}else return __(e)!==e?__(e):d!==u?dT(u):[...t,...s,...n,...r,...o,...i,...c,...l].reduce((p,m)=>{const g=__(m),S=new RegExp(m,"g");return p.replace(S,g)},e)},tTe=e=>{switch(e.status){case Je.Cancelled:case Je.Expired:return zt.Cancelled;case Je.Rejected:return zt.Rejected;case Je.Working:case Je.WaitForTrigger:case Je.WaitStop:case Je.WaitCond:return e.direction===pe.Buy?zt.BuyPending:zt.SellPending;default:return e.direction===pe.Buy?zt.BuyCompleted:zt.SellCompleted}},sTe=(e,t)=>e>t-5e3,nTe=(e,t)=>{const s=wm(e.eventTime)+" ",n=`${eTe(e.description)} ${__("has been submitted to")} ${e.accountCode} ${__("account")}${__(".")}`,r=`${s}${n}`,o=`${ho(e.eventTime,!0,!0)}. ${n}`,i={content:r,ariaLabel:o};return{type:tTe(e),id:e.id,eventTime:e.eventTime,textContent:e.comment?[i,{content:aD(e.comment.replace(/(\n)/gm," "))}]:[i],shouldAlert:sTe(e.eventTime,t),isPopupOnlyNotification:!1}},rTe=e=>{const{id:t,time:s,alertDescription:n}=e,r=__("__locale"),o=c=>{const d=["mark","bid","ask","last","vol index","front vol","back vol","vol diff","sizzle idx","close price"],u=["is above","is below","is at or above","is at or below"],h=[...d,...u].reduce((p,m)=>{const g=__(m),S=new RegExp(m,"g");return p.replace(S,g)},c);return r==="__locale"?h:h.replace(/\s+/g,"")},i=`${wm(s)} ${o(n)}`,l=`${ho(s,!0,!0)}. ${n}`;return{id:t,type:zt.Alert,eventTime:s,textContent:[{content:i,ariaLabel:l}],shouldAlert:!0,isPopupOnlyNotification:!1}},oTe="has been created successfully",ZD="There was an error creating this alert. Please try again",aTe="was deleted successfully",iTe=Yt(),lTe=(e=iTe,t)=>{switch(t.type){case f.OrderEventsReceived:{const s=t.currentTime.getTime(),n=new Set;t.events.forEach(l=>n.add(l.id));const r=e.toSeq().filter(l=>n.has(l.id)||l.type===zt.Alert),o=t.events.filter(l=>!e.has(l.id)),i=Yt(o.map(l=>{const c=nTe(l,s);return[c.id,c]}));return r.concat(i).toOrderedMap()}case f.HideNotification:return e.has(t.id)?e.setIn([t.id,"shouldAlert"],!1):e;case f.AlertNotificationReceived:{const s=rTe(t.alertNotification);return e.set(s.id,s)}case f.SuccessAlert:{const s=t.alert,n=`${__("Alert")} ${s.symbol} ${__(s.priceType)} ${Wp(s.operator).operator} ${Vn(t.showFractionalPricing,s.price,t.fractionalType,t.isOption)} ${__(oTe)}`;return e.set(t.id,{type:zt.Alert,id:t.id,eventTime:new Date().getTime(),textContent:[{content:n}],shouldAlert:!0,isPopupOnlyNotification:!0})}case f.ErrorAlert:return e.set(t.id,{type:zt.Alert,id:t.id,eventTime:new Date().getTime(),textContent:[{content:__(ZD)}],shouldAlert:!0,isPopupOnlyNotification:!0});case f.CancelAlertSuccess:return e.set(t.alertId.toString(),{type:zt.Alert,id:t.alertId.toString(),eventTime:new Date().getTime(),textContent:[{content:`${__("Alert")} ${t.notificationMessage} ${__(aTe)}`}],shouldAlert:!0,isPopupOnlyNotification:!0});case f.ClearAlertNotification:return e.has(t.id)?e.remove(t.id):e}return e},cTe=()=>({positions:ke(),groupedPositions:ke(),spreadGrouping:Cj(),subscriptionType:void 0,positionsInstrumentsComparisonSymbols:[],orderAccountPositions:ke(),positionsSymbolInfo:P7()}),dTe=(e=cTe(),t)=>{switch(t.type){case f.AccountSelected:case f.AccountSelectionCleared:return{...e,positions:ke(),groupedPositions:ke()};case f.PositionsReceived:return{...e,positions:t.positions.reduce((s,n)=>s.set(n.id,n),ke())};case f.OrderAccountPositionsReceived:return{...e,orderAccountPositions:t.positions.reduce((s,n)=>s.set(n.id,n),ke())};case f.GroupedPositionsReceived:return{...e,groupedPositions:t.groupedPositions.reduce((s,n)=>s.set(n.id,n),ke())};case f.UpdateSpreadGrouping:return{...e,spreadGrouping:t.isSpreadGroupingEnabled};case f.ChangePositionsSubscriptionType:return{...e,subscriptionType:t.subscriptionType};case f.UpdatePositionsSymbolInfo:return{...e,positionsSymbolInfo:{...e.positionsSymbolInfo,[t.column]:t.value}};case f.ResetPositionsSymbolInfo:return{...e,positionsSymbolInfo:eu}}return e},uTe=(e=ke(),t)=>{switch(t.type){case f.SymbolSelected:return e.set(zs,{bidQuotes:[],askQuotes:[]});case f.ChartSymbolsSelected:return t.multiChartIds.forEach(s=>e=e.set(s,{bidQuotes:[],askQuotes:[]})),e;case f.ChangeChartSymbol:return e.set(t.chartId,{bidQuotes:[],askQuotes:[]});case f.MarketDepthDataReceived:return e.set(t.chartId,t.marketDepthData);default:return e}},hTe=()=>({showAlertBook:!1,activeAlerts:[],triggeredAlerts:[],canceledAlerts:[],isLoading:!1}),pTe=(e=hTe(),t)=>{switch(t.type){case f.GetAlerts:return{...e,isLoading:!0};case f.ShowAlertBook:return{...e,showAlertBook:t.showAlertBook};case f.ActiveAlertsReceived:return{...e,activeAlerts:t.activeAlerts.reverse(),isLoading:!1};case f.TriggeredAlertsReceived:return{...e,triggeredAlerts:t.triggeredAlerts.sort((s,n)=>n.closeTime-s.closeTime),isLoading:!1};case f.CanceledAlertsReceived:return{...e,canceledAlerts:t.canceledAlerts.reverse(),isLoading:!1};case f.CancelAlertSuccess:{const s=e.activeAlerts.filter(n=>n.id!==t.alertId);return{...e,activeAlerts:s}}default:return e}},mTe=(e=ke(),t)=>{switch(t.type){case f.FutureExpirationsReceived:return e.set(t.symbol,t.futureExpirations);default:return e}},gTe={isSsoAllowed:!1},STe=(e=gTe,t)=>{switch(t.type){case f.EnableSso:return{isSsoAllowed:!0};case f.DisableSso:return{isSsoAllowed:!1};default:return e}},fTe={disclosures:[],aboutWebsiteDisclosures:[],snapShotReceived:!1};var uT=(e=>(e.RequireExplicitConsent="REQUIRE_EXPLICIT_CONSENT",e.ShowNotification="SHOW_NOTIFICATION",e))(uT||{});const TTe=e=>{const t=[];for(let s=0;s<e.length;s++){const n=e[s];n.acceptanceTime||(n.userNotificationType==="REQUIRE_EXPLICIT_CONSENT"||n.userNotificationType==="SHOW_NOTIFICATION")&&t.push(n)}return t},yTe=(e=fTe,t)=>{switch(t.type){case f.DisclosuresReceived:return{...e,disclosures:TTe(t.disclosures),aboutWebsiteDisclosures:t.disclosures,snapShotReceived:!0};case f.AcceptDisclosuresSuccess:case f.AcceptDisclosuresError:return{...e,disclosures:[]};default:return e}},CTe={list:[],statements:ke(),adjustCashSubmitDisabled:!1,adjustCashOpen:!1,adjustCashError:!1,isResetBalancesAndPositionsChecked:!0},bTe=(e=CTe,t)=>{switch(t.type){case f.AccountsReceived:return{...e,list:t.accounts};case f.AccountSelected:return{...e,selected:t.account};case f.AdjustCashAccountSelected:return{...e,adjustCashError:!1,adjustCashSelectedAccount:t.account};case f.AccountSelectionCleared:return{...e,selected:void 0};case f.AccountStatementReceived:return{...e,statements:e.statements.set(t.accountCode,t.accountStatement)};case f.ClearAdjustCashError:return{...e,adjustCashError:!1};case f.OverallStatementReceived:return{...e,statement:t.accountStatement};case f.AdjustCash:{const s=e.selected&&e.selected.code!="";return{...e,adjustCashOpen:!0,adjustCashSubmitDisabled:!1,adjustCashError:!1,adjustCashSelectedAccount:s?e.selected:e.list[0]}}case f.AdjustCashClose:return{...e,adjustCashOpen:!1};case f.AdjustCashSubmit:return{...e,adjustCashSubmitDisabled:!0};case f.AdjustCashSuccess:return{...e,adjustCashOpen:!1,adjustCashSubmitDisabled:!1,adjustCashError:!1};case f.AdjustCashFailure:return{...e,adjustCashSubmitDisabled:!1,adjustCashError:!0};case f.SetBalance:return{...e,adjustCashSubmitDisabled:!0};case f.SetIsResetBalancesAndPositionsChecked:return{...e,isResetBalancesAndPositionsChecked:t.isChecked};case f.SetBalanceSuccess:return{...e,adjustCashOpen:!1,adjustCashSubmitDisabled:!1,adjustCashError:!1};case f.SetBalanceFailure:return{...e,adjustCashSubmitDisabled:!1,adjustCashError:!0};default:return e}},ETe=(e=ke(),t)=>t.type===f.QuotesReceived?t.quotes.reduce((s,n)=>{const r=s.get(n.symbol);return s.set(n.symbol,{...r,...n})},e):e,ATe={workingOrders:{}},vTe=(e=ATe,t)=>{switch(t.type){case f.WorkingOrdersReceived:{const s=t.workingOrders.map(r=>r.id),n={};return s.forEach(r=>{n[r]=e.workingOrders.hasOwnProperty(r)?e.workingOrders[r]:!1}),xn("workingOrders",n,e)}case f.ToggleSelectedWorkingOrders:{if(t.ids.length===0)return e;const s=t.ids.map(r=>({[r]:!Xd(!1,r,e.workingOrders)}));let n=e.workingOrders;return s.forEach(r=>{n=kb(n,r)}),xn("workingOrders",n,e)}case f.OrderBookTrayEditButtonPressed:{const s={[t.orderId]:!Xd(!1,t.orderId,e.workingOrders)};let n=e.workingOrders;return n=kb(n,s),xn("workingOrders",n,e)}case f.ToggleSelectedWorkingOrdersAll:{const s=Object.entries(e.workingOrders),n={};return s.forEach(([r,o])=>{n[r]=t.checkAll}),xn("workingOrders",n,e)}case f.OrderBookAllCheckboxClicked:{const s=Object.entries(e.workingOrders),n=s.some(([,o])=>!o),r={};return s.forEach(([o,i])=>{r[o]=n}),xn("workingOrders",r,e)}default:return e}},ITe={studies:{}},xTe=(e=ITe,t)=>{switch(t.type){case f.StudiesReceived:return{...e,studies:t.studies};default:return e}},wTe=e=>{switch(e){case At.HISTOGRAM:return xe.histogram;case At.POINTS:case At.SQUARES:case At.TRIANGLES:return xe.dots;case At.HORIZONTAL_LINE:return xe.lineSegments;case At.BOOLEAN_ARROWS_DOWN:case At.BOOLEAN_ARROWS_UP:return xe.crossoverArrows;case At.SIMPLE_LINE:default:return xe.line}},OTe=e=>{if(e!==void 0)return e.reduce((t,s)=>{var r;if(s.name===void 0)return t;const n=s.plotSettings;return{...t,[s.name]:{plotType:wTe((r=n==null?void 0:n.defaultValue)==null?void 0:r.paintingStyle),linked:!1,colorOptions:{type:Ae.SINGLE,isPreset:!1,isEdited:!1,color:n!==void 0&&n.color!==void 0&&n.color.r!==void 0&&n.color.g!==void 0&&n.color.b!==void 0&&n.color.alpha!==void 0?wn({r:n.color.r,g:n.color.g,b:n.color.b,a:n.color.alpha}):Re.lightGray}}}},{})},RTe={activeStudies:ke(),defaults:ke()},DTe=(e=RTe,t)=>{var s,n;switch(t.type){case f.StudyParametersAndPlotSettingsReceived:{const r=t.studyParametersAndPlotSettings.name,o=t.studyParametersAndPlotSettings,i=(s=o.parametersInfo)==null?void 0:s.reduce((p,m)=>m.name?{...p,[m.name]:{...m,value:m.defaultValue}}:p,{}),l=OTe(o.plots),c={id:t.id,name:o.name,parameters:i,plotParameters:l},d=((n=e.activeStudies)==null?void 0:n.get(t.chartId))??ke(),u=e.activeStudies.set(t.chartId,d.set(t.id,c));return{defaults:r?e.defaults.set(r,o):e.defaults,activeStudies:u}}case f.DeleteStudy:{const r=e.activeStudies.get(t.chartId),o=r==null?void 0:r.delete(t.id);return o?{...e,activeStudies:e.activeStudies.set(t.chartId,o)}:e}default:return e}},LTe=()=>({position:R7()}),_Te=(e=LTe(),t)=>t.type===f.ColumnSortClicked?{position:t.columnSort}:e,NTe={trade:ke(),orderConfirmation:ke(),events:[],fromStrategy:ke(),deleteNotification:void 0,isEditMode:!1},PTe=(e=NTe,t)=>{var s,n,r;switch(t.type){case f.ClearStrategy:return{...e,fromStrategy:e.fromStrategy.remove(t.rootSymbol)};case f.BuyStrategy:return{...e,isEditMode:!1,fromStrategy:e.fromStrategy.set(t.symbol,t.spreadName)};case f.ClearDeleteNotification:return{...e,deleteNotification:void 0};case f.ConfirmOrder:return((s=e.trade.get(t.symbol))==null?void 0:s[0])===void 0?e:{...e,orderConfirmation:e.orderConfirmation.set(t.symbol,t.orderConfirmation)};case f.OrderEventsReceived:return{...e,events:t.events};case f.DraftOrderCreated:{const o={id:t.initialDraftOrder.id,legs:t.initialDraftOrder.legs,canChangeAccount:t.initialDraftOrder.canChangeAccount,allowedOrderTypes:[],allowedTifs:[],account:t.initialDraftOrder.account,orderType:t.initialDraftOrder.orderType,priceStep:.01,limitPrice:t.initialDraftOrder.limitPrice,activationPrice:t.initialDraftOrder.activationPrice,orderStartedFrom:t.initialDraftOrder.orderStartedFrom,quantityOffset:void 0,quantityLink:void 0,isPartial:t.initialDraftOrder.isPartial,minimumQuantityError:t.initialDraftOrder.minimumQuantityError},i={account:t.initialDraftOrder.account,orders:[o],contingencies:[],orderRules:[[]]};return{...e,orderConfirmation:e.orderConfirmation.remove(t.rootSymbol),trade:e.trade.set(t.rootSymbol,[i])}}case f.DraftOrderUpdated:{const o=(n=e.trade.get(t.rootSymbol))==null?void 0:n[0];if(o===void 0)return e;const i=t.draftOrders.map((l,c)=>{const d=o==null?void 0:o.orders[c],u=Array.from(l.legs).reduce((p,m,g)=>m===void 0||d===void 0?p:[...p,{...d.legs[g],...m,...m.optionStrikeError?{optionStrikeError:m.optionStrikeError}:{optionStrikeError:void 0}}],[]);return{...d,...l,legs:u,priceStep:l.priceStep!==void 0&&l.priceStep!==0?l.priceStep:d.priceStep}});return{...e,trade:e.trade.set(t.rootSymbol,[{...o,orders:i}])}}case f.DraftOrderInstrumentDetailsUpdated:{const o=(r=e.trade.get(t.rootSymbol))==null?void 0:r[0],i=o==null?void 0:o.orders,l=o==null?void 0:o.orders[t.draftOrderIndex];if(o===void 0||i===void 0||l===void 0)return e;const c=Array.from(l.legs);t.instrumentDetailsList.forEach(u=>{c[u.legIndex]={...l.legs[u.legIndex],...u.draftOrderInstrumentDetails}});const d=i.slice();return d[t.draftOrderIndex]={...l,legs:c},{...e,trade:e.trade.set(t.rootSymbol,[{...o,orders:d}])}}case f.DraftOrderDeleted:return{...e,fromStrategy:e.fromStrategy.remove(t.rootSymbol),trade:e.trade.remove(t.rootSymbol),orderConfirmation:e.orderConfirmation.remove(t.rootSymbol),isEditMode:!1};case f.DeleteDraftOrderNotification:return{...e,deleteNotification:t.deleteNotification};case f.SelectOptionExpiration:return{...e,trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.orders[t.draftOrderIndex],c=Array.from(l==null?void 0:l.legs);c[t.legIndex]={...l.legs[t.legIndex],optionExpiration:t.optionExpiration};const d=i.orders.slice();return d[t.draftOrderIndex]={...l,legs:c,isModified:!0},[{...i,orders:d}]})};case f.SelectOptionStrike:return{...e,trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.orders[t.draftOrderIndex],c=Array.from(l==null?void 0:l.legs);c[t.legIndex]={...l==null?void 0:l.legs[t.legIndex],optionStrike:t.optionStrike,optionStrikeError:t.error};const d=i.orders.slice();return d[t.draftOrderIndex]={...l,legs:c},[{...i,orders:d}]})};case f.SelectOptionType:return{...e,trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.orders[t.draftOrderIndex],c=Array.from(l==null?void 0:l.legs),d=c[t.legIndex],u=cT(t.optionType,d.symbol);c[t.legIndex]={...d,optionType:t.optionType,symbol:u};const h=i.orders.slice();return h[t.draftOrderIndex]={...l,legs:c,isModified:!0},[{...i,orders:h}]})};case f.SelectFutureExpiration:return{...e,trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.orders,c=l==null?void 0:l[t.draftOrderIndex],d=Array.from(c==null?void 0:c.legs);d[t.legIndex]={...c==null?void 0:c.legs[t.legIndex],futureExpiration:t.futureExpiration};const u=l.slice();return u[t.draftOrderIndex]={...c,legs:d,isModified:!0},[{...i,orders:u}]})};case f.UpdateTradePrice:return{...e,trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.orders[t.draftOrderIndex],c=i.orders.slice();return c[t.draftOrderIndex]={...l,price:t.price!==void 0?t.price:l==null?void 0:l.price,activationPrice:t.activationPrice!==void 0?t.activationPrice:l==null?void 0:l.activationPrice,isModified:!0},[{...i,orders:c}]})};case f.DraftOrderModified:return{...e,trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.orders[t.draftOrderIndex],c=i.orders.slice();return c[t.draftOrderIndex]={...l,isModified:!0},[{...i,orders:c}]})};case f.UpdateTradeQuantity:return{...e,trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.orders,c=l==null?void 0:l[t.draftOrderIndex],d=Array.from(c==null?void 0:c.legs);d[t.legIndex]={...c==null?void 0:c.legs[t.legIndex],quantity:t.quantity};const u=l.slice();return u[t.draftOrderIndex]={...c,legs:d,quantityOffset:void 0,quantityLink:void 0,isModified:!0},[{...i,orders:u}]})};case f.UpdateTradeQuantityOffset:return{...e,trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.orders,c=l==null?void 0:l[t.draftOrderIndex],d=l.slice();return d[t.draftOrderIndex]={...c,quantityOffset:t.quantityOffset,quantityLink:U1.MONEY_AMOUNT,isModified:!0},[{...i,orders:d}]})};case f.OrderAccountSelected:return{...e,trade:e.trade.update(t.symbol,o=>[{...o[0],account:t.account.code,orders:o[0].orders.map(i=>({...i,account:t.account.code}))}])};case f.UpdateDraftOrderLegs:return{...e,trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.orders[t.draftOrderIndex],c=i.orders.slice();return c[t.draftOrderIndex]={...l,legs:t.legs,isModified:!0},[{...i,orders:c}]})};case f.EditWorkingOrder:case f.OrderBookTrayEditButtonPressed:return{...e,isEditMode:!0};case f.AddContingentOrder:return{...e,fromStrategy:e.fromStrategy.remove(t.symbol),trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.orders[0],c=i.orders.slice();c[c.length]={orderType:ne.LIMIT,allowedOrderTypes:[],allowedTifs:[],priceLocked:!0,price:0,legs:l.legs.map(p=>({...p,direction:p.direction===pe.Buy?pe.Sell:pe.Buy,optionStrikeError:void 0}))};let d=rs.THEN;i.contingencies[1]!==void 0?d=i.contingencies[1]:i.contingencies[0]!==void 0&&(d=i.contingencies[0]);const u=[...i.contingencies,d],h=[...i.orderRules,[]];return[{...i,orders:c,contingencies:u,orderRules:h}]})};case f.ChangeContingency:return{...e,trade:e.trade.update(t.symbol,o=>{let l=o[0].contingencies.slice();l[t.draftOrderIndex]=t.contingency;const c=t.contingency;return c===rs.AND||c===rs.OR?l=l.map((d,u)=>u>=t.draftOrderIndex?c:d):l=l.map((d,u)=>t.draftOrderIndex===u&&t.draftOrderIndex===0||t.draftOrderIndex!==0?c:d),[{...o[0],contingencies:l}]})};case f.AdvancedOrderSelected:return{...e,trade:e.trade.update(t.symbol,o=>{const i=o[0],l=i.contingencies.slice(),c=t.advancedOrderType,d=$0(c,i.orders.length),u=i.orders[0],h=i.orders.slice();let p=i.orderRules.slice();return d&&(h.push({orderType:ne.LIMIT,allowedOrderTypes:[],allowedTifs:[],priceLocked:!0,price:0,legs:u.legs.map(m=>({...m,direction:m.direction===pe.Buy?pe.Sell:pe.Buy,optionStrikeError:void 0})),isModified:u.isModified}),p=[...i.orderRules,[]]),$0(c,h.length)&&(h.push({orderType:ne.LIMIT,allowedOrderTypes:[],allowedTifs:[],priceLocked:!0,price:0,legs:u.legs.map(m=>({...m,direction:m.direction===pe.Buy?pe.Sell:pe.Buy,optionStrikeError:void 0})),isModified:u.isModified}),p=[...i.orderRules,[]]),[{...i,orders:h,contingencies:$ae(c,l),orderRules:p}]})};case f.DeleteTradeTicket:case f.DeleteDraftLeg:return{...e,trade:e.trade.update(t.rootSymbol,o=>{var p;const i=o[0],l=i.orders[t.draftOrderIndex];if((l==null?void 0:l.legs)&&((p=l==null?void 0:l.legs)==null?void 0:p.length)>1&&t.type!==f.DeleteTradeTicket)return[{...i}];const d=i.contingencies.slice(),u=d.length-1<t.draftOrderIndex?d.length-1:t.draftOrderIndex;d.splice(u,1);const h=i.orderRules.slice()??[[]];return h.splice(t.draftOrderIndex,1),[{...i,contingencies:d,orderRules:h}]})};case f.SetOrderRules:{const{symbol:o,draftOrderIndex:i=0,orderRules:l}=t.orderPayload;return{...e,trade:o?e.trade.update(o,d=>{if(!d)return[];const h=d[0].orderRules.slice()??[[]];return h[i]=l,[{...d[0],orderRules:h}]}):e.trade}}case f.AddOrderRule:{const{symbol:o,draftOrderIndex:i=0}=t.orderPayload;return{...e,trade:o?e.trade.update(o,c=>{var m;const u=c[0].orderRules.slice()??[[]],h=((m=u[i])==null?void 0:m.slice())??[],p=JSe(h,o);return p&&h.push(p),u[i]=h,[{...c[0],orderRules:u}]}):e.trade}}case f.RemoveOrderRule:{const{symbol:o,draftOrderIndex:i=0,orderRuleIndex:l}=t.orderPayload;return{...e,trade:o?e.trade.update(o,d=>{const u=d[0],h=u.orderRules.slice(),p=h[i],m=p.slice(0,l).concat(p.slice(l+1));return h[i]=m,[{...u,orderRules:h}]}):e.trade}}case f.UpdateOrderRule:{const{draftOrderIndex:o,orderRuleIndex:i,parameters:l}=t.orderPayload;return{...e,trade:e.trade.get(l.symbol)?e.trade.update(l.symbol,d=>{var b,E;const u=d[0],h=u.orderRules.slice(),p=h[o].slice(),m=p.findIndex(v=>v.method===Ys.DATE_TIME&&v.method===p[i].method&&v!==p[i]),g=m>-1,S=l.type!==((b=p[i])==null?void 0:b.type),T=l.method!==((E=p[i])==null?void 0:E.method)&&l.method===Ys.DATE_TIME,y=p.findIndex((v,D)=>v.method===Ys.DATE_TIME&&v.type===l.type&&D!==i);return S&&g?p[m].type=p[m].type===Ls.Cancel?Ls.Submit:Ls.Cancel:T&&y>-1&&(p[y].type=l.type===Ls.Cancel?Ls.Submit:Ls.Cancel),p[i]=l,h[o]=p,[{...u,orderRules:h??[[]]}]}):e.trade}}default:return e}},kTe=(e=[],t)=>t.type===f.WorkingOrdersReceived?t.workingOrders:e,ME={watchlistCategories:void 0,selectedWatchlistId:void 0,quotes:[],error:{create:void 0,addSymbol:void 0},currentWatchlistSymbols:[],addingSymbol:{loading:!1},selectedMenuTrail:void 0,currentMenuTrail:void 0,areWatchlistSymbolsLoading:!1},MTe=za.ACCOUNT_POSITIONS,$Te=(e=ME,t)=>{switch(t.type){case f.WatchlistReceived:return xn("watchlistCategories",t.watchlistCategories,e);case f.WatchlistSymbolsReceived:return{...e,currentWatchlistSymbols:t.symbols,areWatchlistSymbolsLoading:!1};case f.WatchlistSelected:{const s=Xd(MTe,"currentWatchlistId",t);return s===e.selectedWatchlistId?e:{...e,selectedWatchlistId:s,currentWatchlistSymbols:[],areWatchlistSymbolsLoading:!0}}case f.WatchlistMenuTrailSelected:return xn("selectedMenuTrail",t.selectedMenuTrail,e);case f.WatchlistCurrentMenuTrailSelected:return xn("currentMenuTrail",t.currentMenuTrail,e);case f.WatchlistReceivedQuotes:return xn("quotes",t.quotes,e);case f.WatchlistCreateError:return xn("error.create",t.error,e);case f.WatchlistAddSymbolError:return xn("error.addSymbol",t.error,e);case f.WatchlistClearError:return t.errorToClear==="ALL"?xn("error",ME.error,e):xn(`error.${t.errorToClear}`,void 0,e);case f.WatchlistRearrange:return xn("currentWatchlistSymbols",t.symbols,e);case f.WatchlistAddSymbolLoading:return xn("addingSymbol",{loading:!0},e);case f.WatchlistAddSymbolClearLoading:return xn("addingSymbol",{loading:!1},e);case f.WatchlistRemoveSymbol:{const{currentWatchlistSymbols:s}=e,n=s.filter(r=>!t.symbols.includes(r));return xn("currentWatchlistSymbols",n,e)}default:return e}},jTe=30*60*1e3;var JD=(e=>(e.desc="desc",e.asc="asc",e))(JD||{});const Va=()=>({timeSales:[],timeOrder:"desc",minSize:_p}),BTe=()=>yj().reduce((t,s,n)=>t.set(n,{...Va(),minSize:s}),ke()),FTe=(e=BTe(),t)=>{switch(t.type){case f.SymbolSelected:{const s=e.get(zs)??Va();return e.set(zs,{...s,timeSales:[]})}case f.ChartSymbolsSelected:return t.multiChartIds.forEach(s=>{const n=e.get(s)??Va();e=e.set(s,{...n,timeSales:[]})}),e;case f.ChangeChartSymbol:{const s=e.get(t.chartId)??Va();return e.set(t.chartId,{...s,timeSales:[]})}case f.UnsubscribeFromTimeSales:{const s=e.get(t.chartId)??Va();return e.set(t.chartId,{...s,timeSales:[]})}case f.TimeSalesDataReceived:{const s=e.get(t.chartId)??Va(),n=s.timeSales[s.timeSales.length-1],r=t.timeSalesData.map((i,l,c)=>{const d=c[l-1]??n;if(d===void 0)return{...i,trend:at.Neutral};const u=i.price,h=d.price;if(h===void 0||u===void 0)return{...i,trend:at.Neutral};const p=u>h?at.Positive:u<h?at.Negative:at.Neutral;return{...i,trend:p}}),o=[...s.timeSales,...r].filter(({time:i})=>{const{time:l}=t.timeSalesData[t.timeSalesData.length-1];return i!==void 0&&l!==void 0?l.getTime()-i.getTime()<=jTe:!1});return e.set(t.chartId,{...s,timeSales:o})}case f.RequestTimeSales:{const s=e.get(t.chartId)??Va();return e.set(t.chartId,{...s,minSize:t.minSize})}default:return e}},HTe={events:ke(),historicalEvents:ke()},UTe=(e=HTe,t)=>{switch(t.type){case f.CalendarEventsReceived:return{...e,events:t.calendarEvents.reduce((s,n)=>{const r=s.get(n.symbol);return s.set(n.symbol,{...r,...n})},e.events)};case f.HistoricalCalendarEventsReceived:return{...e,historicalEvents:Object.values(ao).reduce((s,n)=>{const r=t.historicalCalendarEvents[n];if(r){const o=s.get(t.historicalCalendarEvents.symbol);return s.set(t.historicalCalendarEvents.symbol,{...o,symbol:t.historicalCalendarEvents.symbol,[n]:r})}return s},e.historicalEvents)};default:return e}},VTe=()=>({isMuteAllChecked:Z7(),isMarketBellEnabled:q7(),isAlertTriggeredBellEnabled:z7(),isOrderRejectedBellEnabled:J7(),isTradeFilledBellEnabled:tj()}),WTe=(e=VTe(),t)=>{switch(t.type){case f.MuteAllNotifications:{const s=t.isMuteAllChecked;return{...e,isMuteAllChecked:s}}case f.ToggleMarketBell:{const s=t.isMarketBellEnabled;return{...e,isMarketBellEnabled:s}}case f.ToggleAlertTriggeredBell:{const s=t.isAlertTriggeredBellEnabled;return{...e,isAlertTriggeredBellEnabled:s}}case f.ToggleOrderRejectedBell:{const s=t.isOrderRejectedBellEnabled;return{...e,isOrderRejectedBellEnabled:s}}case f.ToggleTradeFilledBell:{const s=t.isTradeFilledBellEnabled;return{...e,isTradeFilledBellEnabled:s}}default:return e}},GTe=(e={middlewareState:void 0,selectorState:void 0},t)=>({middlewareState:wde(e.middlewareState,t),selectorState:hde(e.selectorState,t)}),$E={feedback:{status:Io.Empty}},YTe=(e=$E,t)=>{switch(t.type){case f.SetFeedbackSendingStatus:return{...e,feedback:{status:t.status}};case f.SendFeedbackReceived:return{...e,feedback:{status:Io.OK}};case f.ResetFeedback:return{...$E};default:return e}},qTe=(e=ke(),t)=>{switch(t.type){case f.InstrumentsReceived:return t.instruments.reduce((s,n)=>s.set(n.symbol,n),e);default:return e}};var Gd=(e=>(e.Trades="Trades",e))(Gd||{}),nl=(e=>(e.Completed="Completed",e.Working="Working",e.All="All",e))(nl||{});const OS=(e,t)=>({type:f.Filter,table:e,filter:t}),KTe=e=>({type:f.OrderBookFilterClicked,filter:e}),zTe={tradeFilter:{showCompleted:!0,showWorking:!0},orderBookFilter:Je.Working},XTe=(e=zTe,t)=>{switch(t.type){case f.Filter:switch(t.table){case Gd.Trades:switch(t.filter){case nl.All:return{...e,tradeFilter:{...e.tradeFilter,showCompleted:!0,showWorking:!0}};case nl.Completed:return{...e,tradeFilter:{...e.tradeFilter,showCompleted:!0,showWorking:!1}};case nl.Working:return{...e,tradeFilter:{...e.tradeFilter,showCompleted:!1,showWorking:!0}}}}break;case f.OrderBookFilterClicked:return{...e,orderBookFilter:t.filter}}return e},QTe=()=>({lastHeartbeat:qm(),connectionStatus:!1,isReconnecting:!1,hasGivenUp:!1}),ZTe=(e=QTe(),t)=>{switch(t.type){case f.HeartbeatReceived:return{...e,lastHeartbeat:t.time,connectionStatus:!0,isReconnecting:!1,hasGivenUp:!1};case f.Tick:return{...e,connectionStatus:t.time.getTime()-e.lastHeartbeat.getTime()<=3e4};case f.ReconnectAttempt:return{...e,isReconnecting:!0,attemptNumber:e.isReconnecting?e.attemptNumber+1:1};case f.ReconnectGiveUp:return{...e,isReconnecting:!1,hasGivenUp:!0};default:return e}},JTe={primaryAccountCdi:null,selectedAccountCdi:void 0,accountCdis:{}},e1e=(e=JTe,t)=>{switch(t.type){case f.AccountCdiReceived:return{...e,primaryAccountCdi:e.primaryAccountCdi??t.accountCdi,selectedAccountCdi:e.selectedAccountCdi??t.accountCdi,accountCdis:{...e.accountCdis,[t.accountCode]:t.accountCdi}};case f.AccountCdiSelected:return{...e,selectedAccountCdi:t.accountCdDomainId};default:return e}},eL=()=>({position:w7(),trade:F7(),scans:M7(),watchlist:N7(),optionChain:tp(),futuresChain:j7()}),t1e=(e=eL(),t)=>{switch(t.type){case f.UpdateColumns:return{...e,[t.table]:t.columns}}return e};eL();const s1e=()=>({activePage:ge.Positions,isSidebarOpened:C7(!0),isAccountSummaryDividerPressed:b7(!0),isPortfolioOpened:Pf(),isWatchlistExpanded:!1,watchlistPreviouslyExpandedByClick:!1,isMobileView:!1}),n1e=(e=s1e(),t)=>{switch(t.type){case f.OpenSection:switch(t.section){case ge.Positions:case ge.Transactions:return{...e,activePage:t.section,isPortfolioOpened:!0,isWatchlistExpanded:!1};case ge.Watchlist:return{...e,activePage:t.section,isPortfolioOpened:Pf(),isWatchlistExpanded:!0,isSidebarOpened:!0};default:return{...e,activePage:t.section,isPortfolioOpened:Pf(),isWatchlistExpanded:!1}}case f.ToggleSidebar:return{...e,isSidebarOpened:!e.isSidebarOpened};case f.AccountSummaryDividerPressed:return{...e,isAccountSummaryDividerPressed:!e.isAccountSummaryDividerPressed};case f.TogglePortfolio:return{...e,isPortfolioOpened:!e.isPortfolioOpened};case f.ResetLayout:return{...e,isPortfolioOpened:!0,isSidebarOpened:!0,isAccountSummaryDividerPressed:!0,isWatchlistExpanded:!1,activePage:ge.Positions};case f.SetIsMobileView:return{...e,isMobileView:t.payload};case f.WatchlistPreviouslyExpandedByClick:return{...e,watchlistPreviouslyExpandedByClick:t.watchlistPreviouslyExpandedByClick};default:return e}},r1e=ke({[Is.position]:new Array,[Is.trade]:new Array,[Is.draftOrder]:new Array,[Is.order]:new Array,[Is.workingOrder]:new Array,[Is.news]:new Array,[Is.alerts]:new Array}),o1e=(e=r1e,t)=>{switch(t.type){case f.PositionsReceived:{const s=[...new Set([...t.positions.map(r=>r.symbol),...t.positions.map(r=>r.rootSymbol)])],n=e.get(Is.position);if(!fs(s,n))return e.set(Is.position,s);break}case f.DraftOrderUpdated:{const s=t.draftOrders.map(o=>o.legs.map(i=>i.symbol)),n=t.draftOrders.map(o=>o.legs.map(i=>i.rootSymbol)),r=[...s,...n].reduce((o,i)=>o.concat(i),[]);if(r.length!==0&&!fs(r,e.get(Is.draftOrder)))return e.set(Is.draftOrder,r);break}case f.OrderEventsReceived:{const s=t.events.map(n=>n.compositeSymbol).filter(Ut);return e.set(Is.order,s)}case f.WorkingOrdersReceived:{const s=t.workingOrders.reduce((o,i)=>{var d;const l=((d=i.legs)==null?void 0:d.map(u=>u.symbol))??[],c=i.compositeSymbol;return c!==void 0&&l.push(c),[...o,...l]},[]),n=t.workingOrders.map(o=>o.instrument.rootSymbol),r=Xr([...n,...s]);return e.set(Is.workingOrder,r)}case f.UpdateNewsSymbols:return e.set(Is.news,t.symbolPayload);case f.UpdateAlertSymbols:return e.set(Is.alerts,t.alertPayload);case f.UpdateQuoteSymbols:{const{type:s,symbols:n}=t.payload;return e.set(s,n)}}return e},a1e={drawingSets:ke(),drawings:ke(),selectedDrawingSets:Y7(),drawingStates:ke()},Bl=()=>({setsAreLoading:!1,createDrawingSetError:"",mode:qr.None,selectedDrawingTool:void 0}),i1e=(e=a1e,t)=>{switch(t.type){case f.RequestDrawingSets:return{...e,drawingStates:t.chartIds.reduce((s,n)=>s.set(n,{...Bl(),setsAreLoading:!0}),e.drawingStates)};case f.DrawingSetsReceived:return{...e,drawingSets:e.drawingSets.set(t.symbol,t.drawingSets),drawingStates:t.chartIds.reduce((s,n)=>{const r=s.get(n)??Bl();return s.set(n,{...r,setsAreLoading:!1})},e.drawingStates)};case f.DrawingsReceived:{const s=e.drawings.set(t.setId,t.drawings);return{...e,drawings:s}}case f.UpdateDrawing:{let s=e.drawings.get(t.setId)??[];const n=s.findIndex(o=>o.guid===t.drawingGuid);if(n===-1)return e;s=vce(s,n,t);const r=e.drawings.set(t.setId,s);return{...e,drawings:r}}case f.SaveSelectedDrawingSets:return{...e,selectedDrawingSets:t.selectedDrawingSets};case f.ClearDrawingSetError:{const s=e.drawingStates.get(t.chartId)??Bl();return{...e,drawingStates:e.drawingStates.set(t.chartId,{...s,createDrawingSetError:""})}}case f.CreateDrawingSetError:{const s=e.drawingStates.get(t.chartId)??Bl();return{...e,drawingStates:e.drawingStates.set(t.chartId,{...s,createDrawingSetError:t.error})}}case f.CreateDrawingToolClicked:{const s=e.drawingStates.get(t.chartId)??Bl();return{...e,drawingStates:e.drawingStates.set(t.chartId,{...s,mode:qr.Create,selectedDrawingTool:t.drawingType})}}case f.ClearDrawingMode:{const s=e.drawingStates.get(t.chartId)??Bl();return{...e,drawingStates:e.drawingStates.set(t.chartId,{...s,mode:qr.None,selectedDrawingTool:void 0})}}default:return e}},l1e=(e=pj(),t)=>t.type===f.SetActiveTraderInputQty?e.setIn([t.tradingSystem,t.symbol],t.inputQuantity):e,rg=e=>t=>s=>s.map(n=>e(n)?{...n,checked:t}:n),tL=e=>(t,s)=>rg(n=>n.status===de.Completed&&n.symbol===t&&n.account===s)(e),c1e=tL(!0),d1e=tL(!1),sL=e=>t=>rg(s=>s.status===de.Pending&&s.orderId===t)(e),u1e=sL(!0),h1e=sL(!1),nd=rg(()=>!0),nL=e=>t=>rg(s=>s.status===de.Draft&&s.rootSymbol===t)(e),jE=nL(!0),p1e=nL(!1),m1e=e=>t=>t.map(s=>({...s,checked:s.status!==de.Pending||e.indexOf(s.orderId)===-1})),g1e=e=>t=>t.filter(s=>s.status===de.Draft&&s.rootSymbol!==e||s.status!==de.Draft),no=(e,t,s)=>e.set(t,s(e.get(t,[]))),rL=e=>({status:de.Completed,symbol:e.symbol,checked:!0,account:e.account,positionId:e.id}),Wl=(e,t)=>s=>{const n=l=>l.status===de.Completed,r=l=>l.status===de.Pending,o=l=>l.status===de.Draft,i=t.map(l=>s.find(c=>{const{checked:d,...u}=c,{checked:h,...p}=l;return fs(u,p)})??l);switch(e){case de.Completed:return[...i,...s.filter(r),...s.filter(o)];case de.Pending:return[...s.filter(n),...i,...s.filter(o)];case de.Draft:return[...s.filter(n),...s.filter(r),...t];default:return[...s]}},pp=e=>({status:de.Draft,rootSymbol:e,checked:!0}),rd=e=>t=>t.map(s=>e(s)),S1e=(e=Yt(),t)=>{switch(t.type){case f.PositionsReceived:{const s=t.positions.reduce((o,i)=>(i.underlyingSymbol!==void 0&&o.push(i.underlyingSymbol),o),[]),n=t.positions.filter(o=>o.type===k.FUTURE).map(o=>o.symbol);return[...new Set([...t.positions.map(o=>o.rootSymbol),...n,...s,...e.keys()])].reduce((o,i)=>no(o,i,Wl(de.Completed,t.positions.filter(l=>l.symbol===i||l.rootSymbol===i||l.underlyingSymbol===i).map(rL))),e)}case f.CompletedTradeUnchecked:return e.map(s=>d1e(t.symbol,t.account)(s));case f.CompletedTradeChecked:return e.map(s=>c1e(t.symbol,t.account)(s));case f.WorkingOrdersReceived:{const s=t.workingOrders.reduce((o,i)=>(i.instrument.underlyingSymbol!==void 0&&o.push(i.instrument.underlyingSymbol),o),[]),n=t.workingOrders.filter(o=>o.instrument.instrumentType===k.FUTURE).map(o=>o.instrument.symbol);return[...new Set([...t.workingOrders.map(o=>o.instrument.rootSymbol),...s,...n,...e.keys()])].reduce((o,i)=>no(o,i,Wl(de.Pending,t.workingOrders.filter(l=>!l._hiddenFromTradeTable&&(l.instrument.symbol===i||l.instrument.rootSymbol===i||l.instrument.underlyingSymbol===i)).map(l=>({status:de.Pending,orderId:l.id,symbol:l.instrument.symbol,account:l.accountCode,checked:!0})))),e)}case f.PendingTradeChecked:return rd(u1e(t.orderId))(e);case f.PendingTradeUnchecked:return rd(h1e(t.orderId))(e);case f.DraftOrderUpdated:{const s=e.get(t.rootSymbol,[]).filter(n=>n.status===de.Draft).map(n=>({...pp(t.rootSymbol),checked:n.checked}));return no(e,t.rootSymbol,Wl(de.Draft,s))}case f.DraftOrderCreated:return t.isAutoSend?e:no(e,t.rootSymbol,Wl(de.Draft,[pp(t.rootSymbol)]));case f.ClosePositions:return no(e,t.rootSymbol,Wl(de.Draft,[pp(t.rootSymbol)]));case f.SendOrder:return no(e,t.symbol,nd(!0));case f.CheckAllTrades:return no(e,t.rootSymbol,nd(!0));case f.UncheckAllTrades:case f.OrderBookTrayEditButtonPressed:return no(e,t.rootSymbol,nd(!1));case f.SymbolSelected:{const s=e.get(t.symbol);return s&&s.some(r=>r.status===de.Draft)?rd(jE(t.symbol))(e):no(e,t.symbol,nd(!0))}case f.DraftTradeUnchecked:return rd(p1e(t.symbol))(e);case f.DraftTradeChecked:return rd(jE(t.symbol))(e);case f.DraftOrderDeleted:{const s=e.map(n=>g1e(t.rootSymbol)(n));return no(s,t.rootSymbol,nd(!0))}case f.CancelOrder:return no(e,t.symbol,m1e(t.orderIds));default:return e}},f1e={navigationSearchSymbols:[],watchlistSearchSymbols:[],transactionsSearchSymbols:[],watchlistSymbolsLoading:!1,navigationSymbolsLoading:!1,transactionsSymbolsLoading:!1,charts:ke()},T1e=(e=f1e,t)=>{switch(t.type){case f.GetSuggestedSymbolsForNavigationSearch:return{...e,navigationSymbolsLoading:!0,watchlistSymbolsLoading:!1,transactionsSymbolsLoading:!1,charts:e.charts.reduce((s,n,r)=>s.set(r,{...n,symbolsLoading:!1}),e.charts)};case f.GetSuggestedSymbolsForWatchlistSearch:return{...e,watchlistSymbolsLoading:!0,navigationSymbolsLoading:!1,transactionsSymbolsLoading:!1,charts:e.charts.reduce((s,n,r)=>s.set(r,{...n,symbolsLoading:!1}),e.charts)};case f.GetSuggestedSymbolsForTransactionsSearch:return{...e,transactionsSymbolsLoading:!0,watchlistSymbolsLoading:!1,navigationSymbolsLoading:!1,charts:e.charts.reduce((s,n,r)=>s.set(r,{...n,symbolsLoading:!1}),e.charts)};case f.GetSuggestedSymbolsForChartSearch:return{...e,transactionsSymbolsLoading:!1,watchlistSymbolsLoading:!1,navigationSymbolsLoading:!1,charts:e.charts.set(t.chartId,{searchSymbols:[],symbolsLoading:!0})};case f.WatchlistAddSymbol:return{...e,watchlistSymbolsLoading:!1};case f.NavigateToSymbol:return{...e,navigationSymbolsLoading:!1};case f.SuggestedSymbolsReceivedForNavigation:return{...e,navigationSearchSymbols:t.navigationSearchSymbols,watchlistSearchSymbols:[],transactionsSearchSymbols:[],navigationSymbolsLoading:!1,watchlistSymbolsLoading:!1,transactionsSymbolsLoading:!1,charts:e.charts.reduce((s,n,r)=>s.set(r,{searchSymbols:[],symbolsLoading:!1}),e.charts)};case f.SuggestedSymbolsReceivedForWatchlist:return{...e,watchlistSearchSymbols:t.watchlistSearchSymbols,navigationSearchSymbols:[],transactionsSearchSymbols:[],watchlistSymbolsLoading:!1,navigationSymbolsLoading:!1,transactionsSymbolsLoading:!1,charts:e.charts.reduce((s,n,r)=>s.set(r,{searchSymbols:[],symbolsLoading:!1}),e.charts)};case f.SuggestedSymbolsReceivedForTransactions:return{...e,transactionsSearchSymbols:t.transactionsSearchSymbols,navigationSearchSymbols:[],watchlistSearchSymbols:[],watchlistSymbolsLoading:!1,navigationSymbolsLoading:!1,transactionsSymbolsLoading:!1,charts:e.charts.reduce((s,n,r)=>s.set(r,{searchSymbols:[],symbolsLoading:!1}),e.charts)};case f.SuggestedSymbolsReceivedForChart:return{...e,transactionsSearchSymbols:[],navigationSearchSymbols:[],watchlistSearchSymbols:[],watchlistSymbolsLoading:!1,navigationSymbolsLoading:!1,transactionsSymbolsLoading:!1,charts:e.charts.set(t.chartId,{searchSymbols:t.chartSearchSymbols,symbolsLoading:!1})};default:return e}},y1e=(e=qm(),t)=>t.type===f.Tick?t.time:e,C1e=(e=[],t)=>t.type===f.QuotePermissionsReceived?t.quotePermissions:e,b1e={limitReached:!1},E1e=(e=b1e,t)=>{switch(t.type){case f.LegsLimitReached:return{limitReached:t.limitReached};default:return e}},A1e={availableOptionExpirations:ke(),availableOptionStrikes:ke()},v1e=(e=A1e,t)=>{if(t.type===f.DraftOrderInstrumentDetailsUpdated){const s=t.instrumentDetailsList.reduce((c,d)=>(d.draftOrderInstrumentDetails.instrumentType===k.OPTION&&c.push(d.draftOrderInstrumentDetails),c),[]);if(s.length===0)return e;const n=e.availableOptionStrikes.get(t.rootSymbol)??ke(),r=s.reduce((c,d)=>d.availableOptionExpirations!==void 0?d.availableOptionExpirations.reduce((u,h)=>u.set(h.id,h),c):c,ke()),o=s.reduce((c,d)=>d.optionExpiration!==void 0?c.set(d.optionExpiration.id,d.availableOptionStrikes):c,n),l=[...Object.values(r.toObject())].sort((c,d)=>c.expirationDate.valueOf()-d.expirationDate.valueOf());return{...e,availableOptionExpirations:e.availableOptionExpirations.set(t.rootSymbol,l),availableOptionStrikes:e.availableOptionStrikes.set(t.rootSymbol,o)}}return e},BE="COMBINED ACCOUNT",I1e=(e=BE,t)=>{switch(t.type){case f.AccountSelected:return t.account.code;case f.AccountSelectionCleared:return BE}return e},x1e=(e=f5(),t)=>{switch(t.type){case f.ShowOrderConfirmation:return e.add(t.symbol);case f.HideOrderConfirmation:return e.remove(t.symbol);case f.DraftOrderDeleted:return e.remove(t.rootSymbol);default:return e}},w1e=e=>{VR.registerRestorableState(e)};class O1e{constructor(t,s,n){R(this,"getValue",t=>this.getter(this.storage,t));R(this,"setValue",(t,s)=>{this.setter(this.storage,t,s)});this.storage=t,this.getter=s,this.setter=n}}const R1e=(e,t)=>{const s=new URL(window.location.href),n=s.pathname,r=s.searchParams.get(t);return{pathname:n,symbol:r!==null?r.replace(/\s/g,"+"):null}},D1e=(e,t,s)=>{const n=new URL(window.location.href),r=n.pathname,o=n.searchParams.get(t);let i={pathname:"/",symbol:null};if((typeof s.symbol=="string"||s.symbol===null)&&(i={pathname:s.pathname,symbol:s.symbol}),i.symbol===null||i.symbol===""){n.searchParams.delete(t),e.push(i.pathname);return}(r!==i.pathname||o!==i.symbol&&i.symbol!==null)&&(n.searchParams.set(t,i.symbol),e.push(`${i.pathname}?symbol=${encodeURIComponent(i.symbol)}`))},FE=new O1e(us,R1e,D1e),RS=()=>({selectedSymbol:null,tradeSymbol:v7(),chartSelectedSymbol:null}),L1e=(e=RS(),t)=>{switch(t.type){case f.SymbolSelected:case f.OrderBookTrayEditButtonPressed:case f.ChangeSelectedSymbol:{const s=t.type===f.SymbolSelected||t.type===f.ChangeSelectedSymbol?t.symbol:t.rootSymbol;return A7(s),Ye({category:Ve.SelectSymbol,action:Le.SymbolSelected,label:s}),s===""?{...RS(),chartSelectedSymbol:e.chartSelectedSymbol}:{...e,selectedSymbol:s,tradeSymbol:s}}case f.ChartSymbolsSelected:{const{multiChartIds:s}=t,n=s.length===1&&s.includes(Ps(1));return{...e,chartSelectedSymbol:n?t.firstChartSymbol:e.chartSelectedSymbol}}case f.OpenSection:return t.section===ge.Positions||t.section===ge.Watchlist||t.section===ge.Scans||t.section===ge.Transactions?{...RS(),chartSelectedSymbol:e.chartSelectedSymbol}:e;case f.ChangeChartSelectedSymbol:return{...e,chartSelectedSymbol:t.symbol};default:return e}};w1e({stateSelector:I9,actionSelector:T9,dataSaver:y9(S0,FE),dataRestore:C9(S0,FE)});const _1e=(e=ke(),t)=>{switch(t.type){case f.PositionsReceived:return t.aggregateValues;default:return e}},N1e=(e=bt.None,t)=>{switch(t.type){case f.ShowDrawerWindow:return Ye({category:Ve.Drawers,action:Le.ShowDrawer,label:t.windowToShow}),t.windowToShow;case f.HideDrawerWindow:return bt.None}return e},Er=x(e=>e.drawerWindowDisplayed,e=>e),P1e={quotes:[],currentFuturesChainSymbols:[]},k1e=(e=P1e,t)=>{switch(t.type){case f.FuturesChainSymbolsReceived:return xn("currentFuturesChainSymbols",t.symbols,e);case f.FuturesChainQuotesReceived:return xn("quotes",t.quotes,e);default:return e}},M1e={categories:[]},$1e=(e=M1e,t)=>{switch(t.type){case f.StudyCategoriesReceived:return{...e,categories:t.categories};default:return e}},j1e={symbols:[],prevScanFilters:[],prevSavedScanFilters:[],quotes:ke(),scanFilterMenu:Yr.ACTIVE,scanFilters:[],hasUnSupportedFilters:!1,scanFilterParameters:{},queryName:"",scanInWatchlistId:bd[qn.ALL_STOCKS]},B1e=(e=j1e,t)=>{switch(t.type){case f.ScansSymbolsReceived:return{...e,symbols:t.symbols};case f.SetWatchlistToScanIn:return{...e,scanInWatchlistId:t.scanInWatchlistId};case f.SetHasUnSupportedFilters:return{...e,hasUnSupportedFilters:t.hasUnSupportedFilters};case f.ScanFiltersReceived:return{...e,scanFilters:t.filters,symbols:[]};case f.ClearScanFilters:return{...e,scanFilters:[]};case f.SetScanFilterMenu:return{...e,scanFilterMenu:t.scanFilterMenu};case f.SetPrevScanFilters:return{...e,prevScanFilters:t.prevScanFilters};case f.SetPrevSavedScanFilters:return{...e,prevSavedScanFilters:t.prevSavedScanFilters};case f.ScanQuotesReceived:{const s=e.quotes;return{...e,quotes:t.quotes.reduce((n,r)=>{const o=n.get(r.symbol);return n.set(r.symbol,{...o,...r})},s)}}case f.ScanFilterParametersReceived:return{...e,scanFilterParameters:{...e.scanFilterParameters,...t.scanFilterParameters}};case f.SetScanFilterQueryName:return{...e,queryName:t.queryName};default:return e}},F1e=(e,t,s)=>e.filter(n=>n.symbol===t||!s.includes(t)&&n.positionGroups.find(r=>r.positions.find(o=>o.symbol===t))),H1e=e=>(t,s)=>(s.positionGroups.forEach(n=>{n.title===k.FUTURE||n.title===nt.FUTURES_CALENDAR?t.push(...n.positions.filter(r=>r.symbol===e||s.symbol===e)):t.push(...n.positions)}),t),U1e=(e,t)=>(e[t.id]=t,e),V1e=(e,t,s)=>Object.values(F1e(e,t,s).reduce(H1e(t),[]).reduce(U1e,{})),W1e=(e=Yt(),t)=>{switch(t.type){case f.GroupedPositionsReceived:{const s=t.groupedPositions.reduce((o,i)=>(i.symbol!==void 0&&o.push(i.symbol),o),[]),n=t.groupedPositions.reduce((o,i)=>(i.positionGroups.filter(l=>l.title===k.FUTURE||l.title===nt.FUTURES_CALENDAR).forEach(l=>{const c=l.positions.map(d=>d.symbol);o.push(...c)}),o),[]);return[...new Set([...n,...s,...e.keys()])].reduce((o,i)=>no(o,i,Wl(de.Completed,V1e(t.groupedPositions,i,s).map(rL))),e)}default:return e}},G1e={relevantNewsHeaders:Yt(),newsHeaders:Yt(),newsBody:ke(),currentNewsSymbol:null,isSymbolNewsLoading:!1,isRelevantNewsLoading:!1},oL=Na({name:"news",initialState:G1e,reducers:{getNewsHeadersAC:{reducer:(e,t)=>{e.isSymbolNewsLoading=!0},prepare:(e,t,s=100)=>({payload:{symbol:e,requestId:t,limit:s}})},getRelevantNewsHeadersAC:{reducer:(e,t)=>{e.isRelevantNewsLoading=!0},prepare:(e,t)=>({payload:{symbols:e,limit:t}})},newsHeadersReceivedAC:{reducer:(e,t)=>{const s=Yt(t.payload.newsHeaders.map(n=>[n.newsCode,n]));e.isSymbolNewsLoading=!1,e.currentNewsSymbol=t.payload.symbol,e.newsHeaders=s},prepare:(e,t)=>({payload:{newsHeaders:e,symbol:t}})},relevantNewsHeadersReceivedAC:{reducer:(e,t)=>{const s=Yt(t.payload.relevantNewsHeaders.map(n=>[n.newsCode,n]));e.isRelevantNewsLoading=!1,e.relevantNewsHeaders=s},prepare:e=>({payload:{relevantNewsHeaders:e}})},additionalNewsHeadersReceivedAC:{reducer:(e,t)=>{const s=Yt(t.payload.newsHeaders.map(n=>[n.newsCode,n]));e.isSymbolNewsLoading=!1,e.currentNewsSymbol=t.payload.symbol,e.newsHeaders=s.concat(e.newsHeaders).toOrderedMap()},prepare:(e,t)=>({payload:{newsHeaders:e,symbol:t}})},additionalRelevantNewsHeadersReceivedAC:{reducer:(e,t)=>{const s=Yt(t.payload.additionalRelevantNewsHeaders.map(n=>[n.newsCode,n]));e.relevantNewsHeaders=s.concat(e.relevantNewsHeaders).toOrderedMap().slice(0,15)},prepare:e=>({payload:{additionalRelevantNewsHeaders:e}})},getNewsBodyAC:{reducer:(e,t)=>{},prepare:e=>({payload:{newsCode:e}})},newsBodyReceivedAC:{reducer:(e,t)=>{e.newsBody=e.newsBody.set(t.payload.newsBody.newsCode,t.payload.newsBody)},prepare:e=>({payload:{newsBody:e}})}}}),{getNewsHeadersAC:aL,getRelevantNewsHeadersAC:iL,relevantNewsHeadersReceivedAC:Y1e,additionalRelevantNewsHeadersReceivedAC:q1e,newsHeadersReceivedAC:HE,additionalNewsHeadersReceivedAC:K1e,newsBodyReceivedAC:z1e,getNewsBodyAC:lL}=oL.actions,X1e={deltaIntervals:Ij(),optionsStatistics:ke()},cL=Na({name:"optionsStatistics",initialState:X1e,reducers:{setOptionsStatisticsDeltaIntervalsAC:{reducer:(e,t)=>{e.deltaIntervals!==t.payload.deltaIntervals&&(e.optionsStatistics=ke()),e.deltaIntervals=t.payload.deltaIntervals},prepare:e=>({payload:{deltaIntervals:e}})},getOptionsStatisticsAC:{reducer:(e,t)=>{},prepare:e=>({payload:{symbol:e}})},unsubscribeOptionsStatisticsAC:{reducer:(e,t)=>{},prepare:()=>({payload:{}})},optionsStatisticsReceivedAC:{reducer:(e,t)=>{t.payload.optionsStatistics.symbol!==void 0&&(e.optionsStatistics=e.optionsStatistics.set(t.payload.optionsStatistics.symbol,t.payload.optionsStatistics))},prepare:e=>({payload:{optionsStatistics:e}})}}}),{setOptionsStatisticsDeltaIntervalsAC:Q1e,getOptionsStatisticsAC:dL,optionsStatisticsReceivedAC:Z1e,unsubscribeOptionsStatisticsAC:uL}=cL.actions,J1e={reports:ke(),analystReportAccessToken:{uuid:"",accessToken:"",grantType:"",refreshIntervalMillis:0,expirationTimeMillis:0},isLoading:!0,lastRequestedSymbol:void 0},hL=Na({name:"analystReports",initialState:J1e,reducers:{getAnalystReportsAC:{reducer:(e,t)=>{e.isLoading=!0,e.lastRequestedSymbol=t.payload.symbol},prepare:e=>({payload:{symbol:e}})},getAnalystReportsAccessTokenAC:{reducer:(e,t)=>{},prepare:e=>({payload:{callback:e}})},analystReportsReceivedAC:{reducer:(e,t)=>{t.payload.analystReports.symbol!==void 0&&(e.reports=e.reports.set(t.payload.analystReports.symbol,t.payload.analystReports),t.payload.analystReports.symbol===e.lastRequestedSymbol&&(e.isLoading=!1))},prepare:e=>({payload:{analystReports:e}})},analystReportAccessTokenReceivedAC:{reducer:(e,t)=>{e.analystReportAccessToken=t.payload.analystReportAccessToken},prepare:e=>({payload:{analystReportAccessToken:e}})}}}),{analystReportsReceivedAC:eye,getAnalystReportsAC:pL,analystReportAccessTokenReceivedAC:tye,getAnalystReportsAccessTokenAC:mL}=hL.actions;var zp=(e=>(e.DAY="DAY",e.MONTH="MONTH",e.THREE_MONTH="THREE_MONTH",e.WEEK="WEEK",e.YEAR="YEAR",e.YTD="YTD",e))(zp||{});const sye={DAY:Wo.D1,MONTH:Wo.D30,WEEK:Wo.D7,THREE_MONTH:Wo.D90,YTD:Wo.YTD,YEAR:Wo.D365},nye=["FND","RAD","FSWP","EXP"],rye=(e,t,s)=>s.filter(n=>{const r=Jl(new Date(e),1,t).getTime(),o=new Date(n.execTime).getTime();return o>=e&&o<r}),oye=e=>[...e].sort((t,s)=>{const n=new Date(t.execTime),r=new Date(s.execTime);return n<r?-1:n>r?1:0}),aye=e=>[...e].sort((t,s)=>t.time-s.time),iye=e=>{const t=[];return e.forEach(s=>{if(Ut(s.execTime)){const n={...s,execTime:s.execTime};t.push(n)}}),t},lye=e=>{const t=[];return e.forEach(s=>{if(Ut(s.time)){const n={...s,time:s.time};t.push(n)}}),t},cye=(e,t,s)=>{const n=dye(e),r=e[0].netLiq??0;return uye(n,t,s,r)},dye=e=>{const t=[];return e.forEach((s,n)=>{t.push({timestamp:s.time,transactionsForAdjustedBalances:[],totalDayChange:0})}),t},uye=(e,t,s,n)=>{const r=[...e];return r.forEach((o,i,l)=>{const c=i===0?n:l[i-1].endBalance;o.startBalance=c,o.endBalance=c,rye(o.timestamp,s,t).forEach(u=>{var p;const h=u.amount??0;(p=o.transactionsForAdjustedBalances)==null||p.push(h),o.totalDayChange=h+((o==null?void 0:o.totalDayChange)??0),o.endBalance=h+((o==null?void 0:o.endBalance)??(o==null?void 0:o.startBalance)??0)})}),r},hye={balancesHistoryData:[],transactionsForAdjustedBalances:[],adjustedBalances:[],accountCode:void 0,timeAggregation:void 0,range:void 0},gL=Na({name:"balancesHistory",initialState:hye,reducers:{getBalancesHistoryAC:{reducer:(e,t)=>{},prepare:(e,t,s)=>({payload:{accountCode:e,range:t??zp.YEAR,timeAggregation:s??ie.DAY}})},balancesHistoryReceivedAC:{reducer:(e,t)=>{e.balancesHistoryData=t.payload.balancesHistoryData,e.accountCode=t.payload.accountCode,e.range=t.payload.range,e.timeAggregation=t.payload.timeAggregation},prepare:(e,t,s,n)=>{const r=lye(e);return{payload:{balancesHistoryData:aye(r),accountCode:t,range:s??zp.MONTH,timeAggregation:n??ie.DAY}}}},unsubscribeBalancesHistoryAC:()=>{},getTransactionsForAdjustedBalancesAC:{reducer:(e,t)=>{},prepare:(e,t,s)=>({payload:{accountCode:e,startTime:t,endTime:s}})},transactionsForAdjustedBalancesReceivedAC:{reducer:(e,t)=>{e.transactionsForAdjustedBalances=t.payload.transactionsForAdjustedBalances},prepare:e=>{const t=iye(e);return{payload:{transactionsForAdjustedBalances:oye(t)}}}}}}),{balancesHistoryReceivedAC:pye,getBalancesHistoryAC:SL,unsubscribeBalancesHistoryAC:hT,getTransactionsForAdjustedBalancesAC:fL,transactionsForAdjustedBalancesReceivedAC:mye}=gL.actions;var zr=(e=>(e.Regular="Regular",e.High="High",e.Urgent="Urgent",e))(zr||{});const UE={Regular:10,High:100,Urgent:1e3},gye=e=>({messageId:e.messageId||new Date().getTime(),messageTime:e.messageTime,priority:e.priority?{name:e.priority.name,value:e.priority.value}:void 0,originalText:e.originalText,language:e.language,alert:!0}),Sye=e=>e===UE[zr.Urgent]?zr.Urgent:e===UE[zr.High]?zr.High:zr.Regular,fye=e=>{var o;const t=e!=null&&e.messageTime?new Date(e==null?void 0:e.messageTime).getTime():new Date().getTime(),s=`${wm(t)} ${e.originalText||""}`,n=`${ho(t,!0,!0)}. ${e.originalText||""}`,r={content:s,ariaLabel:n};return{type:Sye((o=e==null?void 0:e.priority)==null?void 0:o.value),id:String(e.messageId),eventTime:t,textContent:[r],shouldAlert:!!e.alert,isPopupOnlyNotification:!1}},TL=(e,t)=>e.concat(t).sort((n,r)=>n.eventTime-r.eventTime).toOrderedMap(),yL=e=>e.type in zr,CL=e=>cs.isNumber(e)?e:parseInt(e),Tye=e=>{const t=bw();return e.map(s=>({...s,alert:!t[s.messageId]}))},yye={messages:Yt(),loading:!1},bL=Na({name:"messageCenter",initialState:yye,reducers:{getMessageCenterMessagesAC:{reducer:(e,t)=>{e.loading=!0},prepare:()=>({payload:{}})},hideMessageCenterMessageAC:{reducer:(e,t)=>{const s=CL(t.payload.messageId);e.messages.has(s)&&(e.messages=e.messages.setIn([s,"alert"],!1).toOrderedMap())},prepare:(e,t)=>({payload:{messageId:e,closedByUser:t}})},messageCenterMessagesReceivedAC:{reducer:(e,t)=>{const s=Yt(t.payload.messages.filter(n=>n==null?void 0:n.messageId).map(n=>[n.messageId,gye(n)]));e.loading=!1,e.messages=t.payload.appendMessages?s.concat(e.messages).toOrderedMap():Tye(s)},prepare:(e=[],t)=>({payload:{messages:e,appendMessages:t}})},subscribeMessageCenterAC:()=>{},unSubscribeMessageCenterAC:()=>{}}}),{getMessageCenterMessagesAC:VE,hideMessageCenterMessageAC:EL,messageCenterMessagesReceivedAC:WE,subscribeMessageCenterAC:GE,unSubscribeMessageCenterAC:YE}=bL.actions,Cye={fundamentalsCurrent:ke()},AL=Na({name:"fundamentals",initialState:Cye,reducers:{getFundamentalsCurrentAC:{reducer:(e,t)=>{},prepare:(e,t,s)=>({payload:{symbol:e,fields:t,time:s}})},fundamentalsCurrentReceivedAC:{reducer:(e,t)=>{var s;(s=t.payload.fundamentalsCurrent)!=null&&s.values&&(e.fundamentalsCurrent=e.fundamentalsCurrent.set(t.payload.fundamentalsCurrent.symbol,t.payload.fundamentalsCurrent))},prepare:e=>({payload:{fundamentalsCurrent:e}})}}}),{fundamentalsCurrentReceivedAC:bye,getFundamentalsCurrentAC:qE}=AL.actions,Eye={activeTraderSettingsButtons:Cw()},vL=Na({name:"activeTraderSettingsMenu",initialState:Eye,reducers:{addActiveTraderSettingsButtonsAC:{reducer:(e,t)=>{e.activeTraderSettingsButtons=e.activeTraderSettingsButtons.set(t.payload.tableName,t.payload.items),l0(ke(e.activeTraderSettingsButtons))},prepare:(e,t)=>({payload:{items:e,tableName:t}})},loadActiveTraderSettingsButtonsAC:{reducer:(e,t)=>{e.activeTraderSettingsButtons=ke().merge(e.activeTraderSettingsButtons).merge(t.payload.settings)},prepare:e=>({payload:{settings:e}})},removeActiveTraderSettingsButtonAC:{reducer:(e,t)=>{const n=(e.activeTraderSettingsButtons.has(t.payload.tableName)?e.activeTraderSettingsButtons.get(t.payload.tableName)??[]:P1).filter(r=>r!==t.payload.item);e.activeTraderSettingsButtons=e.activeTraderSettingsButtons.set(t.payload.tableName,n),l0(ke(e.activeTraderSettingsButtons))},prepare:(e,t)=>({payload:{item:e,tableName:t}})}}}),{addActiveTraderSettingsButtonsAC:Aye,loadActiveTraderSettingsButtonsAC:vye,removeActiveTraderSettingsButtonAC:Iye}=vL.actions,xye=e=>(t,s)=>e(s.type===f.LogOut||s.type===f.SetTradingSystem?void 0:t,s),wye=xye(T5({alerts:pTe,tokenExchanges:STe,exchangeStatus:GTe,currentTime:y1e,account:bTe,userSettings:ode,createTrade:PTe,quotes:ETe,quoteSymbols:o1e,aggregatedPositions:_1e,selectedSymbol:L1e,expandedOrderConfirmations:x1e,trades:S1e,groupedPositionTrades:W1e,workingOrders:kTe,instruments:qTe,positions:dTe,filters:XTe,symbolSearch:T1e,selectedAccount:I1e,optionChain:Zme,optionInstrumentDetails:v1e,feedback:YTe,charts:yae,marketDepth:uTe,drawerWindowDisplayed:N1e,watchlists:$Te,heartbeat:ZTe,quotePermissions:C1e,focus:kR.reducer,legsLimitReached:E1e,study:xTe,studyCategories:$1e,studyParametersAndPlotSettings:DTe,notifications:lTe,layout:n1e,selected:vTe,columns:t1e,tableSort:_Te,accountAnalytics:e1e,news:oL.reducer,drawings:i1e,futureExpirations:mTe,userProperties:nD.reducer,transactions:$8,disclosures:yTe,timeSales:FTe,calendar:UTe,audioNotifications:WTe,activeTrader:l1e,scans:B1e,futuresChain:k1e,liveSupportChat:jge,optionsStatistics:cL.reducer,analystReports:hL.reducer,balancesHistory:gL.reducer,fundamentalsCurrent:AL.reducer,messageCenter:bL.reducer,activeTraderSettingsMenu:vL.reducer})),IL=(e,t)=>{const s=e.map(n=>({newsCode:n.newsCode,time:n.time,title:n.title,relatedSymbols:n.symbols.map(r=>r)??[]}));t(s)},Oye=e=>(t,s,n=100,r)=>{e([{header:{service:te.NEWS_HEADERS_GET,id:s,ver:0},params:{symbol:t,limit:n}}],o=>{IL(o.news,r)})},Rye=e=>(t,s,n)=>{e([{header:{service:te.NEWS_HEADERS_SUBSCRIBE,id:s,ver:0},params:{symbol:t}}],r=>{IL(r.news,n)})},Dye=e=>(t,s)=>{e([{header:{service:te.NEWS_BODY,id:t,ver:0},params:{newsCode:t}}],n=>{s({newsCode:n.newsCode,text:n.text})})},Lye=e=>(t,s,n)=>{e([{header:{service:te.NEWS_HEADERS_GET_RELEVANT,id:te.NEWS_HEADERS_GET_RELEVANT,ver:0},params:{limit:t,symbols:s}}],r=>{n(r.news)})},_ye=e=>(t,s)=>{e([{header:{service:te.NEWS_HEADERS_SUBSCRIBE_RELEVANT,id:te.NEWS_HEADERS_SUBSCRIBE_RELEVANT,ver:0},params:{symbols:t}}],n=>{s(n.news)})},Nye=e=>{let t;e({actionCreator:aL,effect:async(s,n)=>{const{request:r}=n.extra.serviceGatewayManager,o=String(s.payload.requestId).replace(te.NEWS_HEADERS_SUBSCRIBE,te.NEWS_HEADERS_GET);Oye(r)(s.payload.symbol,o,s.payload.limit,i=>{var h;const l=i.length>0,c=n.getState(),u=((h=Ro(c))==null?void 0:h.rootSymbol)===s.payload.symbol;l&&u?(t&&clearTimeout(t),n.dispatch(HE(i,s.payload.symbol))):t=setTimeout(()=>{n.dispatch(HE([],s.payload.symbol))},1e4)}),Rye(r)(s.payload.symbol,s.payload.requestId,i=>{var u;const l=n.getState();((u=Ro(l))==null?void 0:u.rootSymbol)===s.payload.symbol&&n.dispatch(K1e(i,s.payload.symbol))})}}),e({actionCreator:iL,effect:async(s,n)=>{const{request:r}=n.extra.serviceGatewayManager,{limit:o,symbols:i}=s.payload;Lye(r)(o,i,l=>{n.dispatch(Y1e(l))}),_ye(r)(i,l=>{n.dispatch(q1e(l))})}}),e({actionCreator:lL,effect:async(s,n)=>{const{request:r}=n.extra.serviceGatewayManager;Dye(r)(s.payload.newsCode,o=>{n.dispatch(z1e(o))})}})},Pye=e=>(t,s,n)=>{e([{header:{service:te.OPTIONS_STATISTICS,id:"options_statistics",ver:0},params:{symbol:t,deltaIntervals:s}}],r=>{const o={symbol:r==null?void 0:r.symbol,pcRatio:r==null?void 0:r.pcRatio,totalVolume:r==null?void 0:r.totalVolume,bidOrBelow:r==null?void 0:r.bidOrBelow,askOrAbove:r==null?void 0:r.askOrAbove,betweenTheMarket:r==null?void 0:r.betweenTheMarket,delta:r==null?void 0:r.delta,deltaIntervals:s};n(o)})},kye=e=>{e({actionCreator:Q1e,effect:async(t,s)=>{vj(t.payload.deltaIntervals)}}),e({actionCreator:dL,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager,r=s.getState().optionsStatistics.deltaIntervals;Pye(n)(t.payload.symbol,r,o=>{s.dispatch(Z1e(o))})}}),e({actionCreator:uL,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager;Ks(n)(te.OPTIONS_STATISTICS,te.OPTIONS_STATISTICS)}})},Mye=e=>({callback:t})=>{e([{header:{service:te.MESSAGE_CENTER_GET,id:te.MESSAGE_CENTER_GET,ver:0},params:{}}],s=>{t(s==null?void 0:s.messages)})},$ye=e=>({callback:t})=>{e([{header:{service:te.MESSAGE_CENTER_SUBSCRIBE,id:te.MESSAGE_CENTER_SUBSCRIBE,ver:0},params:{}}],s=>{t(s==null?void 0:s.messages)})},jye=(e,t)=>e.messageCenter.messages.get(t),xL=e=>Yt([...e.messageCenter.messages].filter(([s,n])=>{var o,i;return n.language===void 0||n.language.locale===void 0&&n.language.name===void 0||((o=n.language)==null?void 0:o.locale)==="en_US"||((i=n.language)==null?void 0:i.name)==="ENGLISH"})).reduce((s,n,r)=>s.set(String(r),fye(n)),Yt()),Bye=x(xL,e=>e.filter(t=>t.shouldAlert)),Fye=e=>{e({type:f.Connected,effect:async(t,s)=>{s.dispatch(VE()),s.dispatch(GE())}}),e({type:f.LogOut,effect:async(t,s)=>{s.dispatch(YE())}}),e({actionCreator:VE,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager;Mye(n)({callback:r=>{s.dispatch(WE(r))}})}}),e({actionCreator:GE,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager;$ye(n)({callback:r=>{s.dispatch(WE(r,!0))}})}}),e({actionCreator:YE,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager;Ks(n)(te.MESSAGE_CENTER_SUBSCRIBE,te.MESSAGE_CENTER_SUBSCRIBE)}}),e({actionCreator:EL,effect:(t,s)=>{const{messageId:n,closedByUser:r}=t.payload,o=CL(n),i=jye(s.getState(),o);r&&i&&wj(i)}})},Hye=e=>({accountCode:t,range:s,timeAggregation:n,callback:r})=>{e([{header:{service:te.BALANCES_HISTORY,id:te.BALANCES_HISTORY,ver:0},params:{accountCode:t,range:s,timeAggregation:n}}],o=>{r(o.balancesHistoryData)})},Uye=e=>{e({actionCreator:SL,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager,{accountCode:r,range:o,timeAggregation:i}=t.payload;Hye(n)({accountCode:r,range:o,timeAggregation:i,callback:l=>{s.dispatch(pye(l,r,o,i))}})}}),e({actionCreator:hT,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager;Ks(n)(te.BALANCES_HISTORY,te.BALANCES_HISTORY)}}),e({actionCreator:fL,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager,{accountCode:r,startTime:o,endTime:i}=t.payload;sD(n)({account:r,startTime:Gp(o),endTime:Gp(i,!0),transactionTypes:[Gr.DEPOSIT,Gr.WITHDRAWAL,Gr.TRANSFER],callback:l=>{s.dispatch(mye(l))},errorCallback:()=>{}})}})},Vye=e=>({symbol:t,callback:s})=>{e([{header:{service:te.ANALYST_REPORTS,id:te.ANALYST_REPORTS,ver:0},params:{symbol:t}}],n=>{const r={symbol:n.symbol??t,reports:n.reports,error:n.error};s(r)})},Wye=e=>({callback:t})=>{e([{header:{service:te.ANALYST_REPORTS_ACCESS_TOKEN,id:te.ANALYST_REPORTS_ACCESS_TOKEN,ver:0},params:{}}],s=>{const n={uuid:s.uuid,accessToken:s.accessToken,grantType:s.grantType,refreshIntervalMillis:s.refreshIntervalMillis,expirationTimeMillis:Date.now()+s.refreshIntervalMillis};t(n)})},Gye=e=>{e({actionCreator:pL,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager,{symbol:r}=t.payload;Vye(n)({symbol:r,callback:o=>{s.dispatch(eye(o))}})}}),e({actionCreator:mL,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager;Wye(n)({callback:r=>{s.dispatch(tye(r)),t.payload.callback(r)}})}})};var wL=(e=>(e.ANNUAL="ANNUAL",e.QUARTERLY="QUARTERLY",e))(wL||{}),Gy=(e=>(e.COMPANY_BUSINESS_DESCRIPTION="COMPANY_BUSINESS_DESCRIPTION",e))(Gy||{});const Yye=e=>({symbol:t,fields:s,time:n,callback:r})=>{e([{header:{service:te.FUNDAMENTALS_CURRENT,id:te.FUNDAMENTALS_CURRENT,ver:0},params:{symbol:t,fields:s,time:n}}],o=>{const i={symbol:o.symbol??t,values:o.values};r(i)})},qye=e=>{e({actionCreator:qE,effect:async(t,s)=>{const{request:n}=s.extra.serviceGatewayManager,{symbol:r,fields:o,time:i}=t.payload;Yye(n)({symbol:r,fields:o,time:i,callback:l=>{s.dispatch(bye(l))}})}}),e({type:f.SymbolSelected,effect:async(t,s)=>{const n=mt(s.getState());n&&s.dispatch(qE(n,[Gy.COMPANY_BUSINESS_DESCRIPTION],wL.QUARTERLY))}})},Kye=e=>{e({type:f.SetTradingSystem,effect:async(t,s)=>{const n=Cw();s.dispatch(vye(n))}})};let DS;const zye=({serviceGatewayManager:e})=>{DS=y5({extra:{serviceGatewayManager:e}});const t=DS.startListening;return Nye(t),kye(t),Uye(t),Gye(t),qye(t),Fye(t),Kye(t),DS.middleware};let ts;const Xye=Qye({liveTrading:$ce,paperMoney:Bce,sessionStorage,now:qm,ringBell:Wce,ringOrderRejectedBell:qce,ringTradeFilledBell:Gce,ringAlertTriggeredBell:Yce});function Qye({liveTrading:e,paperMoney:t,sessionStorage:s,now:n,ringBell:r,ringOrderRejectedBell:o,ringTradeFilledBell:i,ringAlertTriggeredBell:l}){ts=nde({liveTrading:e,paperMoney:t});const c=Zce(),d=Qce(ts.request,ts.connect);return C5({reducer:wye,middleware:u=>[zye({serviceGatewayManager:ts}),...u({serializableCheck:!1,immutableCheck:!1}),...WR,...Wfe(ts),Bie({reconnect:RR(ts.request),disconnect:ts.close,sessionStorage:s,connect:ts.connect,setSessionEndHandler:ts.sessionEnd}),$ie({login:ede(ts.request),loginWithoutCafe:sde(ts.request),disconnect:ts.close,getNewAccessToken:d.getNewAccessToken,sessionStorage:s,setSessionEndHandler:ts.sessionEnd,loginLMS:tde(ts.request)}),jie({disconnect:ts.close,revokeToken:d.revokeToken,sessionStorage:s,schwabLogoff:Gie(ts.request)}),Mie({connect:ts.connect,sessionStorage:s}),Fie({exchangeCodeForToken:d.exchangeCodeForToken,redirectToCafe:d.redirectToCafe,redirectToLms:d.redirectToLms,sessionStorage:s,disconnect:ts.close}),Ide({requestMarketHours:Tde(ts.request)}),Sde(r,o,i,l),fde(n),Ode(c.request),a9],devTools:!1})}const Zye=(e,t=!1)=>{var r;const s=(r=e==null?void 0:e.current)==null?void 0:r.querySelectorAll('button:not([disabled]), [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!s)return;const n=Array.from(s);return t?n[0]:n.filter(o=>!o.closest('div[data-testid^="mobile"]'))[0]},Xp=A.button(({theme:e})=>({display:"inline-flex",alignItems:"center",boxSizing:"border-box",border:"none",fontSize:e.fontSizes.large,lineHeight:e.fontSizes.large,fontWeight:"500",borderRadius:"20px",backgroundColor:"transparent",userSelect:"none",whiteSpace:"nowrap"}),t1(s1,n1,r1,o1,a1,i1,nx,rx,l1)),tt=A(Xp)`
  cursor: pointer;
  outline: none;
  color: ${({theme:e})=>e.colors.text.primary};

  ${({theme:e})=>Ms({variants:{[Pe.primary]:{"&:disabled":{color:e.colors.action.disabled,cursor:"not-allowed"}},[Pe.secondary]:{border:`${e.shape.borderWidth.primary}px solid ${e.colors.text.primary}`,fontSize:e.fontSizes.medium,paddingLeft:e.space.xSmall,paddingRight:e.space.xSmall,lineHeight:"21px",fontWeight:500,color:e.colors.text.primary,whiteSpace:"nowrap","&:hover":{backgroundColor:e.colors.action.hover},"&:active":{backgroundColor:e.colors.action.active},"&:disabled":{borderColor:e.colors.action.disabled,backgroundColor:"transparent",color:e.colors.action.disabled,cursor:"default"}},link:{color:e.colors.action.focus,fontSize:e.fontSizes.small,padding:0,fontWeight:"bold","&:disabled":{color:e.colors.action.disabled,cursor:"not-allowed"}}}})}
`;tt.defaultProps={variant:Pe.primary};const Jye=A(Be)`
  align-items: center;
  padding: ${({theme:e})=>`${e.space.medium}`};
  order: 0;
`,eCe=A(Be)`
  align-items: center;
  margin-right: ${({theme:e})=>`${e.space.xSmall}`};
`,tCe=A.div`
  height: 28px;
  ${br.typography(sr.title2)}
`,sCe=A(Be)`
  flex: 1;
  align-items: center;
  justify-content: flex-end;
  margin-right: 20px;
`,nCe=A(tt)`
  padding: 0;
`,rCe=({title:e,drawerTitle:t,closeDrawer:s,icon:n,headerContent:r,showBackButton:o,onBackButtonClick:i,closeRef:l,handleKeyDown:c})=>a.jsxs(Jye,{children:[o&&a.jsx(tt,{"data-testid":"back-button",variant:"link",onClick:()=>i&&i(),"aria-label":"Return to main window",mr:3,children:a.jsx(X,{type:Y.ChevronLeft,width:12,height:8,viewBox:"5 9 14 9",fill:"icon.primary",dataTestId:"chevron-left-icon"})}),n&&a.jsx(eCe,{"data-testid":"drawer-title-icon",children:n}),a.jsx(tCe,{"data-testid":`drawer-title-${t}`,children:a.jsx(ot,{fontSize:8,children:e})}),a.jsx(sCe,{"data-testid":"drawer-header-content",children:r}),a.jsx(nCe,{"data-testid":`close-${t}`,"aria-label":`Close ${t} drawer`,onClick:()=>s(),onKeyDown:c,ref:l,children:a.jsx(X,{type:Y.Close,width:24,height:24,viewBox:"0 0 24 24",dataTestId:"close-icon",fill:"icon.primary"})})]}),oCe=A(ds)`
  position: absolute;
  top: ${({offsetTop:e})=>e}px;
  overflow: hidden;
  z-index: 11;

  ${({isFullHeight:e,offsetRight:t,offsetLeft:s,offsetTop:n})=>e?`right: 0; height: calc(100% - ${n}px);`:s?`left: ${s}px;`:`right: ${t}px;`}
  ${({isOpen:e})=>e?"":"pointer-events: none;"}
`,aCe=A(ds)`
  background-color: ${({theme:e})=>e.colors.background.secondary};
  pointer-events: initial;
  box-shadow: 5px 5px 10px ${({theme:e})=>e.colors.boxShadow.primary};
  /* Needed for box-shadow to appear since overflow is hidden */

  ${({isFullHeight:e})=>e?"margin: 0 0 0 15px; height: 100%;":"margin: 0 15px 15px"};

  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    ${({isFullHeight:e})=>e?"margin: 0 0 0 15px; height: 100%;":"margin: 0 0 15px 0"};
  }
`,iCe=A(Be)`
  box-shadow: inset 0 10px 9px -7px ${({theme:e})=>e.colors.boxShadow.primary};
  position: relative;

  ${({isFullHeight:e})=>e&&"height: 100%;"}
`,lCe=A(ds)`
  ${({theme:e,showDrawerHeader:t,isFullHeight:s})=>t&&s?`${e.breakpoints.below(lt.MOBILE_LARGE)} { 
        box-shadow: inset 0 10px 9px -7px ${e.colors.boxShadow.primary}; 
      }`:""}
`;var nr=(e=>(e.fromTop="down",e.fromBottom="up",e.fromRight="left",e.fromLeft="right",e))(nr||{});const cCe=e=>{const{title:t,icon:s,ariaLabel:n,children:r,headerContent:o,showBackButton:i,onBackButtonClick:l,isOpen:c,closeDrawer:d,isFullHeight:u,slideFrom:h="down",width:p="auto",offsetRight:m=100,offsetLeft:g=0,offsetTop:S=63,showDrawerHeader:T=!0}=e,y=j.useRef(null),b=j.useRef(null);B.useEffect(()=>{y&&y.current!==null&&c&&y.current.focus()},[c,y]);const E=B.useCallback(L=>{L.key===we.Esc&&d()},[d]),v=L=>{var F;E(L);const P=Zye(y);c&&(b!=null&&b.current)&&L.key===we.Tab&&L.shiftKey&&document.activeElement===P&&(L.preventDefault(),(F=b==null?void 0:b.current)==null||F.focus())},D=()=>{c&&d()},w=n!==void 0?n:t,N=L=>{c&&L.key===we.Tab&&(y!=null&&y.current)&&!L.shiftKey&&y.current.focus()};return a.jsx(oCe,{"data-testid":"drawer-wrapper",isOpen:c,offsetTop:S,offsetRight:m,offsetLeft:g,isFullHeight:u,"aria-hidden":!c,"aria-label":`${w} drawer`,tabIndex:-1,ref:y,onKeyDown:v,children:a.jsx(ax,{onClickAway:D,mouseEvent:c?"onClick":"onMouseUp",children:a.jsx(Cm,{direction:h,in:c,children:a.jsx(aCe,{isFullHeight:u,width:p,children:a.jsxs(iCe,{flexDirection:"column",isFullHeight:u,offsetTop:S,children:[a.jsx(lCe,{overflow:"auto",height:"100%",order:1,pt:0,showDrawerHeader:T,isFullHeight:u,children:r}),T&&a.jsx(rCe,{title:t,drawerTitle:w,closeDrawer:d,icon:s,headerContent:o,showBackButton:i,onBackButtonClick:l,closeRef:b,handleKeyDown:N})]})})})})})};let LS=window.innerWidth;var Es=(e=>(e[e.MOBILE_LARGE=767]="MOBILE_LARGE",e[e.TABLET_MIN=768]="TABLET_MIN",e[e.TABLET_LARGE=1223]="TABLET_LARGE",e[e.DESKTOP_MIN=1224]="DESKTOP_MIN",e[e.DESKTOP_MEDIUM_SMALL=1428]="DESKTOP_MEDIUM_SMALL",e[e.DESKTOP_LARGE=1920]="DESKTOP_LARGE",e))(Es||{});const dCe=(e,t)=>{const s=e>=t&&LS<t||e<t&&LS>=t;return LS=e,s},uCe="/assets/thinkorswim_Logo_liveTrading_DARK_FOR_SCHW-BWwAOj_s.svg",hCe="/assets/thinkorswim_Logo_liveTrading_LIGHT_FOR_SCHW-jIXnRN0P.svg",pCe="/assets/thinkorswim_Logo_paperMoney_DARK-9tZcR4mj.svg",mCe="/assets/thinkorswim_Logo_paperMoney_LIGHT-yeaCRoax.svg",OL=({quotePermissions:e,isDrawn:t})=>e.length===0?null:a.jsx("ul",{"data-testid":"quote-exchange-status",className:Te("native-scroll",t?"quote-exchange-status-drawn":"quote-exchange-status"),children:e.map(s=>a.jsxs("li",{className:"exchange-type-group",children:[a.jsxs("div",{className:"exchange-type",children:[a.jsx("div",{className:"name",children:__(s.name)}),a.jsx("div",{className:s.isAllowed?"realtime":"delayed",children:s.isAllowed?__("Realtime"):__("Delayed")})]}),a.jsx("ul",{className:"exchange-type-children",children:s.children.map(n=>a.jsx("li",{children:a.jsxs("div",{className:"exchange-data",children:[a.jsx("div",{className:"name",children:__(n.name)}),a.jsx("div",{className:n.isAllowed?"realtime":"delayed",children:n.isAllowed?__("Realtime"):__("Delayed")})]})},n.name))})]},s.name))}),gCe=e=>({quotePermissions:e.quotePermissions}),SCe=se(gCe)(OL),fCe="data:image/gif;base64,R0lGODlhDgANAOZJANLAq6J2QJVhIqN3QpNfH6J1P6Z7SO/u7NG/qvDw76R4Q7eWbtLBq+HYzcu2naV6R9LBrNjKuc+8pdnMu93Rw9nMvM+9pqFzPaJ2Qc25oNG/qe/u7fDv77aUbLiYcuDWy/Hw8Lqcd8GmhayGV9bHteLZzs66ot3SxOLZz93SxaR5RZhlKdrNvrqbduvn48u2nM67o97TxsSrjad9StC+p7CMX8y3npdkJpRgIK+KXt7Ux+Tc06Z8SZdkJ+rn4pVhI8y3nZRfIOPb0p1uNLeXcLyeesKnh5NeHvHx8f///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyOTNlNjI2ZS1mYTBhLTQxYjctYmQwNS1mMjk5MjUyNzI5OGMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Qjg1OENBQzkxODNFMTFFQTgyOUY4MjE3NEVFOEQ4MkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Qjg1OENBQzgxODNFMTFFQTgyOUY4MjE3NEVFOEQ4MkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1ZmUwNmNhZC02MzRkLTQ5ZjctOTJkYy05ODRkNWFlMzQxZmYiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoxNzYyY2U5OC1iNGJmLTM3NDYtYjNhMS1hMzRmNDY3NDQ0OGUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQFAABJACwAAAAADgANAAAHJ4BIgoOEhYaHiImKi4UARo+QkQCCAkeWl5gCgghFnZ6fk4yio6SlgQAh+QQFAABJACwBAAUACwAHAAAHKoBISAxJhYaFSEIEh4dILUcGRpKTRj43RxOMhTJHD5qFQ0cSn0kDAwekgQAh+QQFAABJACwBAAEABgALAAAHOIADAwlJhStHDYVJI0cOiiJHC4okRwVIDEkuR0cUBIUFSQFHBkiSmxNIDpsPSUgNmxKtCQMBB0mBACH5BAUAAEkALAEAAQAIAAsAAAdBgEgHGAEJSIdIEkdHDYhID4sOiBWLRwuIOUcBRwVIDEY/RxSLFARHDDRIBZpHPIgLlRWIDosPjg2LEo4JAwEHSIEAIfkEBQAASQAsAQABAAoACwAAB0mASIIHBQoggohIJkdHKImCCowZjxGMRx6IAEYGRwFHA0iaAowEJ0cEKQRHCEVFEEgXRwVHM48dliyPL4wGj0gfjBa+HAEDG0iBACH5BAUAAEkALAMAAQAKAAsAAAdIgEiCBwUKIIKISCZHRyiJggqMGY8RjEceiEZGBkcBRwNICAiWBCdHBCkEAkWsEEgXRwVHNY8dliyPL4wGj0gfjBa9HAEDG0iBACH5BAUAAEkALAUAAQAIAAsAAAc9gEiCBwEKCYKCMEdHJYhIKos2iBGLR0RIRkYGRwGcSJUEMYsuRaUQSAVHJI5IC0cirA5HI6wNRyusCQMDgQAh+QQFAABJACwHAAEABgALAAAHLYBISAcBCgmCMEdHJYIqikBIEYpHC0YGRxhHBYoEOkE4RUUQSBoagqeoqaqogQAh+QQFAABJACwIAAEABQAHAAAHGoBIgoOEgyEhghNHPUZGBkctR5IEO0WWDEiBADs=",TCe="data:image/gif;base64,R0lGODlhDgANAOZHAGVKJs6LMO+fM+ydM8+MMM2KMMaGL2VLJiQiHyEgH3NTJ8uJL6BvK2RJJkM1IldBJGpOJkE0ImNJJsiHL1RAJMyKMEw7I2ZLJp1tK0s6I+WZMltEJZhqK8mIL1I+JLd9LtKNMGxPJi0oIJlqK1M/JG9RJ2pNJm5QJ6NwLEU2IyEhH0o6IyMiH4phKSAgHz4yIrF5LS4oIHJSJ+udM0k5I+ibMsWGL+eaMj0xInFSJ+6eM0o5I694LcWFL9qSMZ9uK+6fM2hMJoJcKJVoKohgKfCgMx8fH////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyOTNlNjI2ZS1mYTBhLTQxYjctYmQwNS1mMjk5MjUyNzI5OGMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDIwOUJFRkEyOTdGMTFFQUI1MUVCNEE2NTg3MDU0MzUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDIwOUJFRjkyOTdGMTFFQUI1MUVCNEE2NTg3MDU0MzUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NzAwYTY1NC1hYmZhLTQ1N2MtODJhNS1jNDhkMjFiMzA5MGEiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpkZjAzYzAyZS1mMjZhLWZmNGEtOWRmNi0zYTI2N2JhMzJkYWYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQFAABHACwAAAAADgANAAAHJ4BGgoOEhYaHiImKi4UARI+QkQCCA0WWl5gDggdDnZ6fk4yio6SlgQAh+QQFAABHACwBAAUACwAHAAAHKoBGRg1HhYaFRi8Ch4dGI0UGRJKTRDE1RRSMhUJFE5qFPkUQn0cVBQikgQAh+QQFAABHACwBAAEABgALAAAHOIAFBQlHhRpFDoVHH0UKii1FDIobRQRGDUciRUUWAoUERwFFBkaSmxRGCpsTR0YOmxCtCQUBCEeBACH5BAUAAEcALAEAAQAIAAsAAAdBgEYIAQEJRodGEEVFDohGE4sKiCSLRQyIMEUBRQRGDUQzRRaLFgJFDUFGBJpFNogMlSSICosTjg6LEI4JBQEIRoEAIfkEBQAARwAsAQABAAoACwAAB0mARoIIBAsugohGJ0VFEYmCC4wljw+MRRiIAEQGRQFFBUaaA4wCGUUCKwJFB0NDEkYgRQRFPY8olh6PCowGj0YpjCa+KgEVLEaBACH5BAUAAEcALAMAAQAKAAsAAAdIgEaCCAQLLoKIRidFRRGJgguMJY8PjEUYiEREBkUBRQVGBweWAhlFAisCA0OsEkYgRQRFPI8olh6PCowGj0YpjCa9KgEVLEaBACH5BAUAAEcALAUAAQAIAAsAAAc9gEaCCAELCYKCIUVFEYhGHYs5iA+LRT9GREQGRQGcRpUCO4siQ6USRgRFG45GDEUtrApFH6wORRqsCQUFgQAh+QQFAABHACwHAAEABgALAAAHLYBGRggBCwmCIUVFEYIdijJGD4pFDEQGRQFFBIoCNEA6Q0MSRhcXgqeoqaqogQAh+QQFAABHACwIAAEABQAHAAAHGoBGgoOEgxwcghRFN0REBkUjRZICOEOWDUaBADs=",yCe=({isConnected:e,onClick:t,quoteStatus:s,isReconnecting:n,theme:r})=>{let o;n?o=__("Connecting"):e?o=__("Connected"):o=__("Disconnected");const i=a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"exchange-status-info",children:[n?a.jsx("img",{"data-testid":"connecting-img",alt:"",src:r==="DARK"?TCe:fCe,className:"connecting"}):a.jsx("span",{className:Te("dot",e?"connected":"disconnected")}),o,e&&t!==void 0&&a.jsx(X,{type:Y.ArrowDropDownAlt,width:6,height:4,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon"})]}),a.jsx("div",{"data-testid":"quote-status",className:Te("quote-status",s===Hd.REAL_TIME?"realtime":"delayed"),children:e||n?__(`${s} data`):null})]});return t!==void 0?a.jsx("button",{"data-testid":"exchange-status-button",className:"exchange-status-button",onClick:t,children:i}):a.jsx("div",{className:"exchange-status-text",children:i})},CCe=hn(yCe),bCe=e=>({isConnected:e.heartbeat.connectionStatus,quoteStatus:pde(e),isReconnecting:e.heartbeat.isReconnecting}),pT=se(bCe)(CCe);class ECe extends j.Component{constructor(s){super(s);R(this,"onMouseLeave",()=>{this.state.expanded&&this.setState({expanded:!this.state.expanded})});R(this,"openQuoteExchangeStatusDropdown",()=>{this.props.isConnected&&this.setState({expanded:!this.state.expanded})});R(this,"openQuoteExchangeStatusDrawer",()=>{this.props.isConnected&&this.props.isConnected&&this.props.openExchangeQuoteDrawer()});this.state={expanded:!1}}render(){return a.jsxs("div",{className:"exchange-status",onMouseLeave:this.onMouseLeave,"data-testid":"exchange-status",children:[a.jsxs("div",{className:"quote-exchange-status--desktop",children:[a.jsx(pT,{onClick:this.openQuoteExchangeStatusDropdown}),this.props.isConnected&&this.state.expanded&&a.jsx(SCe,{})]}),a.jsx("div",{className:"quote-exchange-status--mobile",children:a.jsx(pT,{onClick:this.openQuoteExchangeStatusDrawer})})]})}}const ACe=e=>({isConnected:e.heartbeat.connectionStatus}),vCe=e=>({openExchangeQuoteDrawer:()=>e({type:f.ShowDrawerWindow,windowToShow:bt.QuoteExchange})}),RL=se(ACe,vCe)(ECe);var oo=(e=>(e.center="center",e.left="left",e.right="right",e))(oo||{}),mT=(e=>(e.center="vertical-center",e.top="vertical-top",e.bottom="vertical-bottom",e))(mT||{});const DL=e=>{class t extends j.PureComponent{constructor(){super(...arguments);R(this,"isFullHeight",()=>this.props.slideFrom===nr.fromRight||this.props.isFullWidth);R(this,"getVerticalAlign",()=>{const r=this.props,o=r.verticalAlign;if(o!==void 0)return o;switch(r.slideFrom){case nr.fromBottom:return"vertical-bottom";case nr.fromTop:return"vertical-top";default:return"vertical-center"}});R(this,"handleClick",r=>{this.props.onClose!==void 0&&this.props.isOpened&&(this.props.onDrawerClose!==void 0&&this.props.onDrawerClose(),this.props.onClose())})}render(){const r=this.props;return a.jsx(cCe,{icon:r.icon,title:r.title,ariaLabel:r.ariaLabel,slideFrom:r.slideFrom,closeDrawer:this.handleClick,isOpen:r.isOpened,isFullHeight:r.slideFrom===nr.fromRight||r.isFullWidth,showDrawerHeader:r.showDrawerHeader,headerContent:r.headerContent,showBackButton:r.showBackButton,onBackButtonClick:r.onBackButtonClick,offsetRight:r.offsetRight,offsetLeft:r.offsetLeft,children:a.jsx(e,{...r})})}}return t},ICe=e=>a.jsx(gl,{minWidth:Es.DESKTOP_MEDIUM_SMALL,...e}),tc=e=>a.jsx(gl,{minWidth:Es.DESKTOP_MIN,...e}),xCe=e=>a.jsx(gl,{minWidth:Es.TABLET_MIN,maxWidth:Es.DESKTOP_MIN-1,...e}),mc=e=>a.jsx(gl,{maxWidth:Es.DESKTOP_MIN-1,...e}),jr=({children:e})=>a.jsx(gl,{minWidth:Es.TABLET_MIN,children:e}),fr=e=>a.jsx(gl,{maxWidth:Es.TABLET_MIN-1,...e});class $ze extends j.PureComponent{render(){const{onTablet:t,onMobile:s,onDesktop:n,children:r}=this.props;if(s&&n&&t)return r;if(!s&&!n&&!t)return null;const o=s?void 0:t?Es.TABLET_MIN:Es.DESKTOP_MIN,i=n?void 0:t?Es.DESKTOP_MIN-1:Es.TABLET_MIN-1;return a.jsx(gl,{minWidth:o,maxWidth:i,children:r})}}const ir=({onClick:e,ariaLabel:t,ariaExpanded:s,title:n,className:r,dataTestId:o,icon:i,id:l,navigationButtonRef:c,isActive:d,showIcon:u=!0})=>{const h=`nav-button ${r!==void 0?r:""}`;return a.jsxs("button",{"aria-label":t,"aria-expanded":s,"data-testid":o,className:h,id:l,onClick:p=>{p.stopPropagation(),e(p)},onTouchEnd:p=>{s&&p.preventDefault()},ref:c,children:[u&&a.jsx("div",{className:"nav-button-icon",children:i}),n!==void 0&&a.jsx("div",{"data-testid":"nav-button-content",className:Te("nav-button-content",d?"active":""),children:__(n)})]})};function og(e,t,s){return e===1?`1 ${__(t)}`:`${e} ${__(s)}`}function KE(e){return og(e,"second","seconds")}function wCe(e){return og(e,"minute","minutes")}function OCe(e){return og(e,"hour","hours")}function RCe(e){return og(e,"day","days")}const zE=e=>{const t=Ja.duration(e),s=t.days(),n=t.hours(),r=t.minutes(),o=t.seconds(),i=s>0,l=n>0,c=r>0,d=o>0;let u="";return i&&(u+=`${RCe(s)}${l?", ":""}`),l&&(u+=`${OCe(n)}${c&&!i?", ":""}`),!i&&c&&(u+=`${wCe(r)}${d&&!l?", ":""}`),!i&&!l&&c&&d&&(u+=`${KE(o)}`),!i&&!l&&!c&&(u+=`${KE(o)}`),u},XE=e=>{switch(e){case rn.Open:return" "+__("until regular session opens");case rn.Close:return" "+__("until regular session closes")}};function DCe(e,t){return t===rn.Unknown||e===void 0?"":__("__locale")==="__locale"?zE(e)+XE(t):XE(t)+zE(e)}function LCe(e){switch(e){case rn.Open:return"open";case rn.Close:return"close";default:return"open"}}function _Ce(e){switch(e){case rn.Open:return a.jsx(X,{type:Y.Hourglass,width:9,height:16,viewBox:"0 0 9 16",dataTestId:"hourglass-icon"});case rn.Close:return a.jsx(X,{type:Y.StopWatch,width:14,height:16,viewBox:"3 3 18 18",dataTestId:"stop-watch-icon"});default:return a.jsx(X,{type:Y.Hourglass,width:9,height:16,viewBox:"0 0 9 16",dataTestId:"hourglass-icon"})}}function NCe(e,t,s){if(t===rn.Unknown||e===void 0)return"";const n=Ja.duration(e),r=n.days(),o=n.hours(),i=n.minutes(),l=n.seconds(),c=r>0,d=t===rn.Open?__("until open"):t===rn.Close?__("until close"):"";return a.jsxs(a.Fragment,{children:[a.jsx("span",{role:"timer","aria-label":`Market Hours ${s}`,children:a.jsx("span",{"aria-hidden":!0,children:`${c?`${r}D `:""}${o}:${i<=9?"0"+i:i}:${l<=9?"0"+l:l}`})}),d!==""&&a.jsx("span",{"aria-hidden":!0,children:d})]})}const PCe=({nextEvent:e,timeUntilEvent:t})=>{const s=DCe(t,e);return a.jsx("div",{className:"market-status","data-testid":"market-status",children:a.jsxs("div",{className:"market-countdown",children:[e!==rn.Unknown&&a.jsx("div",{className:"time-icon",children:_Ce(e)}),a.jsx("div",{"data-testid":"market-status-time-compact",className:Te(LCe(e),"market-status-time-compact"),children:NCe(t,e,s)})]})})},LL=se(e=>({nextEvent:gy(e),timeUntilEvent:cde(e),currentTime:Pu(e)}))(PCe),Ol=e=>e.heartbeat.connectionStatus,_L=e=>e.heartbeat.connectionStatus&&!e.heartbeat.isReconnecting,kCe="/assets/loading_grey-icon_black-background-7mUBYOHn.gif",MCe="/assets/white-loading-C8Vc-Vjl.gif",$Ce=(e,t,s=!0)=>{const n=`${s?"":"i"}gm`,r=t.replace(/([\[()*+?.\\^$|])/g,"\\$1"),o=new RegExp(`(${r})`,n);return e.split(o)},jCe=A.mark`
  background-color: transparent;
  font-family: TDASans, sans-serif;
  font-weight: 500;
  color: ${({theme:e})=>e.colors.text.primary};
`;class mi extends B.PureComponent{render(){const{pattern:t,children:s}=this.props;let n;return t===""?n=s:n=$Ce(s,t,!1).reduce((o,i,l)=>(i.trim()!==""&&o.push(l%2===0?i:a.jsx(jCe,{children:i},l)),o),[]),a.jsx("span",{children:n})}}const $a=(e,t,s)=>{j.useEffect(()=>{const n=r=>{var i;const o=r.target;!e.current||o&&e.current.contains(o)||o&&((i=s==null?void 0:s.current)!=null&&i.contains(o))||t(r)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[e,t])};class BCe{get isSafari(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}const Br=new BCe,Yy=A(_n)`
  height: 40px;
  display: flex;
  flex-direction: row;
  align-items: center;
  ${$u} {
    max-height: 130px;
  }
  ${Xa} {
    padding-top: ${({theme:e})=>e.space.none};
    padding-bottom: ${({theme:e})=>e.space.none};
    font-weight: normal;
    padding-left: ${({theme:e})=>e.space.xSmall};
    background-color: ${({theme:e})=>e.colors.background.secondary};
  }
`,ag=A.input`
  border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.border.primary}`};
  border-radius: 3px;
  color: ${({theme:e})=>e.colors.text.disabled};
  font-size: ${({theme:e})=>e.fontSizes.large};
  line-height: 22px;
  height: 100%;
  padding-left: 34px;
  padding-right: 27px;
  background: none;
  width: 100%;

  :focus {
    border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.action.focus}`};
  }
`,ig=A.form`
  height: 40px;
  background-color: ${({theme:e})=>e.colors.background.primary};
  display: flex;
  flex-direction: row;
  align-items: center;
  position: relative;
  width: 322px;
`,lg=A.div`
  position: absolute;
  top: ${({theme:e})=>e.space.none};
  left: ${({theme:e})=>e.space.none};
  transform: translateX(10px) translateY(10px);
`,FCe=A.img`
  position: absolute;
  right: ${({theme:e})=>e.space.none};
  width: 20px;
  height: 20px;
  margin-right: ${({theme:e})=>e.space.xSmall};
`,qy=A.div`
  border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.border.primary}`};
  color: ${({theme:e})=>e.colors.text.active};
  border-radius: 0 0 ${({theme:e})=>e.shape.borderRadius.secondary}
    ${({theme:e})=>e.shape.borderRadius.secondary};
  overflow: hidden;
  background: ${({theme:{colors:e}})=>e.background.secondary};
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.5), 0 0 8px 0 rgba(0, 0, 0, 0.25);
`,Ky=A.div`
  display: flex;
  flex-direction: column;
  padding-top: ${({theme:e})=>e.space.xxSmall};
  padding-bottom: ${({theme:e})=>e.space.xxSmall};
  overflow: hidden;
  color: ${({theme:e})=>e.colors.text.active};
  min-height: 42px;
`,zy=A.div`
  font-size: ${({theme:e})=>e.fontSizes.medium};
`,Xy=A.div`
  font-size: ${({theme:e})=>e.fontSizes.small};
  white-space: nowrap;
`,Qy=A.div`
  font-size: ${({theme:e})=>e.fontSizes.medium};
  padding: ${({theme:e})=>e.space.xxSmall};
  padding-bottom: ${({theme:e})=>e.space.small};
`,HCe=A.button`
  position: absolute;
  right: ${({theme:e})=>e.space.none};
  height: 40px;
  width: 23px;
  margin-right: ${({theme:e})=>e.space.xSmall};
  margin-top: 6px;
  padding-right: 20px;
`,UCe=A(Yy)`
  ${VD} {
    width: 322px;
    margin-left: 5px;

    ${({theme:e})=>e.breakpoints.below(lt.DESKTOP_MEDIUM)} {
      width: 200px;
    }
    ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
      width: ${Br.isSafari?"125px":"150px"};
    }
    ${({theme:e})=>e.breakpoints.below(lt.MOBILE_SMALL)} {
      width: 100px;
    }
    ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
      margin-left: ${Br.isSafari?"3px":"1px"};
    }
  }
`,VCe=A(ag)`
  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    font-size: ${({theme:e})=>Br.isSafari?e.fontSizes.xSmall:e.fontSizes.medium};
  }
`,WCe=A(ig)`
  width: 322px;
  margin-left: 5px;
  ${({theme:e})=>e.breakpoints.below(lt.DESKTOP_MEDIUM)} {
    width: 200px;
  }
  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    width: ${Br.isSafari?"125px":"150px"};
  }
  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_SMALL)} {
    width: 100px;
  }
  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    margin-left: ${Br.isSafari?"3px":"1px"};
  }
`,cg=hn(e=>a.jsx(FCe,{"data-testid":"loading-indicator",src:e.theme===Qt.DARK?kCe:MCe,alt:"Searching"})),gi=(e,t)=>e.replace("${searchValue}",t),GCe=({searchForNavigationSymbol:e,navigateToSymbol:t,navigationSymbolsLoading:s,navigationSearchSymbols:n,isConnected:r,activePage:o})=>{const[i,l]=B.useState(""),[c,d]=B.useState(!1),[u,h]=B.useState(!1),p="navigation-symbol-search";B.useEffect(()=>{i!==""&&e(i)},[i]);const m=({displaySymbol:O,description:H})=>a.jsxs(Ky,{children:[a.jsx(zy,{children:a.jsx(mi,{"data-testid":"highlight",pattern:i,children:O})}),a.jsx(Xy,{children:a.jsx(mi,{"data-testid":"highlight-description",pattern:i,children:H})})]}),g=O=>{const H=O.target.value.toUpperCase();H!==" "&&l(H),c||d(!0),u&&h(!1)},S=O=>{switch(O.key){case we.ArrowRight:case we.ArrowLeft:case we.Enter:{O.stopPropagation();break}case we.ArrowDown:O.stopPropagation(),h(!0)}},T=n,y=()=>{T.length&&d(!0),h(!1)},b=O=>{O.preventDefault(),l(""),d(!1),t(i,o)},E=O=>{l(""),d(!1),t(O.symbol,o)},v=()=>a.jsxs(WCe,{id:"navigation-symbol-search-form",role:"search",autoComplete:"off",onSubmit:b,children:[a.jsx(VCe,{"aria-labelledby":"navigation-symbol-search-form","aria-label":__("Find a symbol"),id:p,onKeyDown:S,onChange:g,onFocus:y,value:i,placeholder:__("Find a Symbol")}),a.jsx(lg,{"aria-hidden":!0,children:a.jsx(X,{type:Y.SymbolSearch,width:18,height:18,viewBox:"1 1 20 20",dataTestId:"symbol-search-icon"})}),s&&r&&a.jsx(cg,{}),i!==""&&n.length>0&&a.jsx(HCe,{onClick:b,"aria-label":__("Submit Symbol"),children:a.jsx(X,{type:Y.SearchEnter,width:20,height:20,viewBox:"2 2 20 20",dataTestId:"search-enter-icon"})})]}),D="No results for ${searchValue}",w=__(D),N=()=>i!==""&&!s&&T.length<=0?a.jsx(qy,{role:"alert","aria-live":"polite",children:a.jsx(Qy,{"aria-label":gi(D,i),children:gi(w,i)})}):null,L={popperOptions:{modifiers:[{name:"sameWidth",enabled:!0,fn:({state:O})=>{O.styles.popper.width=`${O.rects.reference.width}px`},phase:"beforeWrite",requires:["computeStyles"],effect:({state:O})=>{O.elements.popper.style.width=`${O.elements.reference.clientWidth}px`}}]}},P=j.useRef(null);$a(P,()=>{l(""),d(!1)});const F=O=>{(O.key===we.Esc||O.key===we.Tab)&&(O.stopPropagation(),d(!1))};return a.jsx("div",{ref:P,onKeyDown:F,"data-testid":"navigation-symbol-search",children:a.jsx(UCe,{"data-testid":"symbol-search-dropdown",variant:Pe.secondary,renderHeader:N,renderAnchorButtonContent:v,values:i!==""?T:[],selectedItemIndex:-1,width:0,getListItemKey:O=>O.symbol,onListItemClick:E,renderListItemContent:m,anchorAriaLabel:"Navigation Search Symbol",symbolSearchId:p,isForceOpened:c,isFocusOnList:u,...L})})},YCe=e=>({searchForNavigationSymbol(t){e(_fe(t))},navigateToSymbol(t,s){Et.unstable_batchedUpdates(()=>{s===ge.Charts?e(XD(Ps(1),t)):e(Lfe(ge.Trade,t)),e({type:f.ClearDeleteNotification})})}}),qCe=e=>({isConnected:Ol(e),navigationSymbolsLoading:e.symbolSearch.navigationSymbolsLoading,navigationSearchSymbols:e.symbolSearch.navigationSearchSymbols,activePage:ms(e)}),KCe=se(qCe,YCe)(GCe),zCe=({logout:e,liveSupportChatId:t,setIsCloseChatPromptShown:s})=>{const n=()=>{if(t>pr.CHAT_NOT_STARTED){s(!0);return}e()};return a.jsx(ir,{dataTestId:"logout-button",onClick:n,icon:a.jsx(X,{type:Y.Logout,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"logout-icon"}),title:"Log Out"})},XCe=e=>({liveSupportChatId:ku(e)}),QCe={logout:g1,setIsCloseChatPromptShown:pc},NL=se(XCe,QCe)(zCe),dg="Profile",ZCe=e=>{const{isOpened:t,navigationButtonRef:s,displayProfileMenu:n}=e,r=()=>n(!t);return a.jsx(ir,{icon:a.jsx(X,{type:Y.User,width:15,height:15,viewBox:"0 0 20 20",dataTestId:"user-icon"}),dataTestId:"profile-button",onClick:r,ariaExpanded:t,title:dg,ariaLabel:"profile",navigationButtonRef:s})},JCe=e=>({isOpened:Er(e)===bt.Profile}),ebe=e=>({displayProfileMenu(t){t?(e({type:f.ShowDrawerWindow,windowToShow:bt.Profile}),e(Us(ps.USER_MENU_WINDOW)),e(Oa(Dn.mainSettings))):Et.unstable_batchedUpdates(()=>{e(Oa(Dn.none)),e(En())})}}),tbe=se(JCe,ebe)(ZCe);class ja extends j.Component{constructor(){super(...arguments);R(this,"handleKeyDo",s=>{const n=this.props;s.key===we.Esc&&n.isOpened&&(n.closeWindow(),n.reFocus(n.navigationButtonRef))})}render(){return a.jsx("div",{"data-testid":"flyover-window",role:"none",className:"flyover-window",onKeyDown:this.handleKeyDo,children:this.props.children})}}const Qp=(e,t,s)=>({type:f.UserPropertiesSet,userProperties:e,successCallback:t,errorCallback:s});function ug({value:e,onToggle:t,className:s="",label:n,leftValue:r,rightValue:o,children:[i,l],disable:c,name:d,renderContent:u,tabIndex:h=0,ariaLabel:p}){const m=["toggle",s],g=e===l,S=e===i,T=S?r:o;let y="";c&&(y=S?"only-left":"only-right");const b=c?Te(...m,"disabled",y):Te(...m),E=D=>()=>t(D),v=D=>{if(!c)switch(D.key){case we.ArrowRight:case we.ArrowLeft:case we.Space:case we.Enter:t(T)}};return a.jsxs("div",{tabIndex:h,className:b,"data-testid":"toggle","aria-label":p,onKeyDown:v,children:[a.jsx("input",{"data-testid":"toggle-left",tabIndex:-1,className:"off-screen",type:"checkbox",checked:S,name:d,id:d+"-left",disabled:c,"aria-label":r,value:r,onChange:E(r)}),a.jsx("input",{"data-testid":"toggle-right",tabIndex:-1,className:"off-screen toggle-input",type:"checkbox",checked:g,name:d,id:d+"-right",disabled:c,"aria-label":o,value:o,onChange:E(o)}),u===void 0?a.jsx("div",{className:"slider"}):a.jsx("div",{className:"toggle__content",children:u(e)}),a.jsxs("div",{className:"pills",children:[!c||S?a.jsx("label",{"aria-hidden":!0,htmlFor:d+"-left",className:"pill","data-testid":"pill-toggle-left",children:n(i)}):null,!c||g?a.jsx("label",{"aria-hidden":!0,htmlFor:d+"-right",className:"pill","data-testid":"pill-toggle-right",children:n(l)}):null]})]})}const Rl=A(ug)`
  position: relative;
  border: 1px solid ${({theme:e})=>e.colors.border.primary};
  background-color: ${({theme:e})=>e.colors.background.secondary};
  border-radius: 100px;
  height: 25px;
  width: 48px;
  cursor: pointer;
  user-select: none;

  & .pills {
    width: 100%;
    opacity: 0;
  }

  & .pill {
    width: 50%;
  }

  & .slider {
    ${br.elevation(Ua.level1)}
    margin: ${({theme:e})=>e.space.xxSmall};
    width: ${({theme:e})=>e.space.medium};
    height: ${({theme:e})=>e.space.medium};
  }

  & .toggle-input:not(:checked) ~ .slider {
    background-color: ${({theme:e})=>e.colors.action.disabled};
    transform: translateX(1px);
  }

  &.only-focus-toggle {
    & .toggle-input:not(:checked) ~ .slider {
      background-color: ${({theme:e})=>e.colors.action.focus};
      transform: translateX(1px);
    }
  }

  & .toggle-input:checked ~ .slider {
    background-color: ${({theme:e})=>e.colors.action.focus};
    transform: translateX(21px);
  }

  & input {
    width: 30px;
    padding: 1px;
  }

  &.disabled {
    width: 48px;
    cursor: not-allowed;

    & .slider,
    & .pill {
      cursor: not-allowed;
    }
  }
`,sbe=e=>{const[t,s]=B.useState(e.plDisplayMethod),n=()=>{const r=t===Ta.EXECUTION_PRICE?Ta.GAINSKEEPER_COST:Ta.EXECUTION_PRICE;s(r),e.updatePLDisplayMethod(r)};return a.jsxs(Rl,{ariaLabel:"P L display method toggle",className:"pl-display-method-toggle only-focus-toggle",leftValue:"Execution Price",rightValue:"Cost",value:t,name:"pl-display-method-selector",onToggle:n,disable:!1,label:()=>"",children:[Ta.EXECUTION_PRICE,Ta.GAINSKEEPER_COST]})},nbe=e=>({plDisplayMethod:e.userProperties.userProperties.plDisplayMethod??Ta.EXECUTION_PRICE}),rbe=e=>({updatePLDisplayMethod:t=>{e(Qp({plDisplayMethod:t}))}}),obe=se(nbe,rbe)(sbe),abe=A.div`
  margin-left: -2px;
  margin-bottom: 10px;
  /* stylelint-disable */
  label[for='spread-grouping-checkbox'] {
    margin-left: 12px;
  }
  /* stylelint-enable */
`,ibe=({spreadGrouping:e,handleChange:t,selectedAccount:s})=>{const n=r=>{const o=r.currentTarget.checked;t(o,s),Ye({category:Ve.PositionsSettings,action:Le.SpreadGrouping,label:o?"On":"Off"})};return a.jsx(abe,{children:a.jsx(Mn,{id:"spread-grouping-checkbox",label:__("Show Spread Grouping"),ariaLabel:__("Show Spread Grouping"),isChecked:e,onChange:n})})},lbe=e=>({spreadGrouping:zm(e),selectedAccount:Tl(e)}),cbe=e=>({handleChange:(t,s)=>{e(Nie(t)),s.code!==""?e({type:f.AccountSelected,account:s}):e({type:f.AccountSelectionCleared})}}),dbe=se(lbe,cbe)(ibe),Ar=b5,Tn=E5,ube=A(tt)`
  align-items: baseline;
  padding: ${({theme:e})=>`${e.space.none}`};
  margin-bottom: 20px;
`,hbe=()=>{const e=Ar();return a.jsxs(ube,{onClick:()=>e(Oa(Dn.audioNotifications)),"data-testid":"audio-notifications-button",children:[a.jsx(ot,{mr:it.space.xxSmall,children:__("Audio Notifications")}),a.jsx(X,{type:Y.ChevronRight,width:12,height:8,viewBox:"5 10 14 8",dataTestId:"chevron-right-icon"})]})},pbe=A(tt)`
  align-items: baseline;
  padding: ${({theme:e})=>`${e.space.none}`};
  margin-bottom: 20px;
`,mbe=()=>{const e=Ar();return a.jsxs(pbe,{onClick:()=>e(Oa(Dn.orderDefaults)),"data-testid":"order-defaults-button",children:[a.jsx(ot,{mr:it.space.xxSmall,children:"Order Defaults"}),a.jsx(X,{type:Y.ChevronRight,width:12,height:8,viewBox:"5 10 14 8",dataTestId:"chevron-right-icon"})]})},Lo=(e,t,s)=>{const[n,r]=j.useState(()=>lc(e,t,s));return j.useEffect(()=>{localStorage.setItem(e,JSON.stringify(n))},[n,e]),[n,r]},gbe=e=>{const[t,s]=Lo(sn.AUTO_LOGOUT_TIME_PERIOD,Ex,Ql.FIFTY_FIVE_MINUTES);return a.jsx(ds,{mb:5,children:a.jsx(Ei,{"data-testid":"auto-logout-dropdown",renderAnchorButtonContent:()=>a.jsx("div",{children:__(t,{namespace:"TimeFrame"})}),values:_d,getListItemKey:n=>n,onListItemClick:s,renderListItemContent:n=>__(n,{namespace:"TimeFrame"}),anchorAriaLabel:"Select Auto-Logout Time Period",selectedItemIndex:_d.findIndex(n=>n===t)})})},PL=e=>a.jsx("button",{"data-testid":"modal-close-button",className:"close-button","aria-label":"Close Window",onClick:()=>{e.closeWindow(),e.triggerFocus(e.navigationButtonRef)},children:a.jsx(X,{type:Y.Close,width:14,height:14,viewBox:"3.5 3.5 17 17",dataTestId:"modal-menu-close-icon",fill:"icon.primary"})}),od="modal",Yd={container:`${od}-container`,outsideClick:`${od}-outside-click`,closeButton:`${od}-close-button`,header:`${od}-header`,content:`${od}-content`};let Sbe=class extends j.PureComponent{constructor(){super(...arguments);R(this,"handleKeyDown",s=>{const n=this.props;s.key===we.Esc&&n.onCloseClick!==void 0&&(s.stopPropagation(),n.onCloseClick())})}render(){return a.jsxs(a.Fragment,{children:[a.jsx("div",{"data-testid":"modal-window",role:"none",onKeyDown:this.handleKeyDown,className:Te(Yd.container,this.props.className,"native-scroll"),children:a.jsx(A5,{children:a.jsx("div",{className:Yd.content,tabIndex:0,children:this.props.children})})}),a.jsx("div",{role:"none",className:Yd.outsideClick,onClick:this.props.onCloseClick})]})}},_S=document.getElementById("modal-root");const Dl=e=>{co(_S)&&(_S=document.getElementById("modal-root"));const{container:t,...s}=e,n=co(t)?_S:t;return co(n)?null:Cu.createPortal(a.jsx(Sbe,{...s}),n)},kL=e=>{const t=e.onCloseClick!==void 0;return a.jsxs(a.Fragment,{children:[a.jsx("div",{tabIndex:0,className:Yd.header,children:e.children}),t&&a.jsx("button",{className:Yd.closeButton,"data-testid":"modal-close-btn","aria-label":"Close Window",onClick:e.onCloseClick,children:a.jsx(X,{type:Y.Close,width:14,height:14,viewBox:"3.5 3.5 17 17",dataTestId:"modal-header-close-icon",fill:"icon.primary"})})]})},fbe=()=>a.jsxs("div",{"data-testid":"about-us",className:"about-us",children:[a.jsx("p",{children:"Use of this website is subject to the Client Agreement."}),a.jsx("p",{children:"We support only the current and previous major releases of Chrome, Firefox, Safari, and Microsoft Edge on a rolling basis."}),a.jsx("p",{children:"System availability and response times are subject to market conditions and mobile connection limitations."}),a.jsxs("p",{children:["This site is designed for U.S. residents. Non-U.S. residents are subject to country-specific restrictions. Learn more about our services for"," ",a.jsx("a",{href:"https://www.schwab.com/global-trading",target:"_blank noopener noreferrer",children:"non-U.S. residents"}),"."]}),a.jsxs("p",{children:["© ",new Date().getFullYear()," Charles Schwab & Co., Inc. All rights reserved."," ",a.jsx("a",{href:"https://www.sipc.org/",target:"_blank noopener noreferrer",children:"Member SIPC"}),". Unauthorized access is prohibited."]})]}),Tbe=()=>a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[a.jsx("a",{href:"https://tdameritrade.com.hk/tdaa/index.html#!/disclosures",target:"_blank noopener noreferrer",children:"Please refer to our website for relevant Disclosures and Policy Standards"}),"."]}),a.jsx("p",{children:"Use of this website is subject to the Client Agreement."}),a.jsx("p",{children:"We support only the current and previous major releases of Chrome, Firefox, Safari, and Microsoft Edge on a rolling basis."}),a.jsx("p",{children:"Investment involves risk. The price of a security may fluctuate, sometimes dramatically, and may move up or down. Consequently, losses may be incurred and a security may become valueless. Past performance is not an indication of future results."}),a.jsxs("p",{children:["Options are not suitable for all investors as the special risks inherent to options trading may expose investors to potentially rapid and substantial losses. Please read"," ",a.jsx("a",{href:"https://www.theocc.com/about/publications/character-risks.jsp",target:"_blank noopener noreferrer",children:"Characteristics and Risks of Standardized Options"})," ","before investing in options."]}),a.jsxs("p",{children:["Futures trading is speculative and is not suitable for all investors. Please read the"," ",a.jsx("a",{href:"https://tdameritrade.com.hk/tdaa/index.html#!/rds",target:"_blank noopener noreferrer",children:"Risk Disclosure Statement"})," ","prior to trading futures products. Futures trading privileges are subject to review and approval. Not all account owners will qualify. Futures accounts are not protected under the Securities Investor Protection Act."]}),a.jsx("p",{children:"Market volatility, volume, and system availability may delay account access and trade executions."}),a.jsx("p",{children:"TD Ameritrade Hong Kong Ltd. is registered with the Securities and Futures Commission (CE number BJO462) to carry out the regulated activities of dealing in securities and dealing in futures contracts and does not provide tax, legal or investment advice or recommendations. Regulated products are provided in Hong Kong by TD Ameritrade Hong Kong Ltd. and nothing in the published material is an offer or solicitation to conduct business in any other jurisdiction. TD Ameritrade is the trading name of TD Ameritrade Hong Kong Ltd."}),a.jsxs("p",{children:["The TD Ameritrade logo is a trademark jointly owned by TD Ameritrade IP Company, Inc. and The Toronto-Dominion Bank. © ",new Date().getFullYear()," TD Ameritrade"]})]}),ybe=()=>a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[a.jsx("a",{href:"https://www.tdameritrade.com.hk/tdaa/index.html#!/disclosures?locale=zh-CN",target:"_blank noopener noreferrer",children:"请访问我们的网站查看相关公开披露和政策"}),"。"]}),a.jsx("p",{children:"我们只支持Chrome、Firefox、Safari和Microsoft Edge浏览器当前和之前陆续发布的主要版本。"}),a.jsxs("p",{children:["期权不适合所有投资人，因为期权交易固有的风险可能使投资人面临潜在的、快速而巨大的损失。在投资期权之前，请阅读"," ",a.jsx("a",{href:"https://www.theocc.com/about/publications/character-risks.jsp",target:"_blank noopener noreferrer",children:"标准期权的特性与风险"}),"。"]}),a.jsxs("p",{children:["投资会涉及风险。一支证券的价格可能波动，有时会剧烈波动，且可涨可跌。因此，可能会造成损失，而且证券可能会变得毫无价值。过去的表现不预示未来的结果。 期货交易具有投机性且不适合所有投资人。在交易期货前，请阅读我们的",a.jsx("a",{href:"https://tdameritrade.com.hk/tdaa/index.html#!/rds",target:"_blank noopener noreferrer",children:"风险披露声明"}),"。期货交易权限须受审核和批准，不是所有客户都将符合资格。期货账户是受证券投资人保护法案(Securities Investor Protection Act)的保护。"]}),a.jsx("p",{children:"市场波动性、交易量和系统可用性会延迟账户使用和交易执行。"}),a.jsx("p",{children:"德美利证券香港有限公司为证券及期货事务监察委员会註册 (中央编号BJO462)，提供证券交易及期货合约交易受规管活动，并不负责提供税务、法律或投资意见或建议。受规管的產品由德美利证券香港有限公司负责在香港提供，而出版资料的任何内容不可在任何其他管辖区为了进行业务，用作要约或招揽的用途。德美利证券(TD Ameritrade)是德美利证券香港有限公司的交易名称。"}),a.jsxs("p",{children:["德美利证券标志是由TD Ameritrade IP Company, Inc.以及The Toronto-Dominion Bank共同拥有的商标。© ",new Date().getFullYear()," 德美利证券版权所有。"]})]}),Cbe=()=>a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[a.jsx("a",{href:"https://www.tdameritrade.com.hk/tdaa/index.html#!/disclosures?locale=zh-TW",target:"_blank noopener noreferrer",children:"請訪問我們的網站查看相關公開披露和政策"}),"。"]}),a.jsx("p",{children:"我們只支持Chrome、Firefox和Safari和Microsoft Edge瀏覽器當前和之前陸續發布的主要版本。"}),a.jsxs("p",{children:["期權不適合所有投資人，因為期權交易固有的風險可能使投資人面臨潛在的、快速而巨大的損失。在投資期權之前，請閱讀"," ",a.jsx("a",{href:"https://www.theocc.com/about/publications/character-risks.jsp",target:"_blank noopener noreferrer",children:"標準期權的特性與風險"}),"。"]}),a.jsxs("p",{children:["投資會涉及風險。一支證券的價格可能波動，有時會劇烈波動，且可漲可跌。因此，可能會造成損失，而且證券可能會變得毫無價值。過去的表現不預示未來的結果。 期貨交易具有投機性且不適合所有投資人。在交易期貨前，請閱讀我們的",a.jsx("a",{href:"https://tdameritrade.com.hk/tdaa/index.html#!/rds",target:"_blank noopener noreferrer",children:"風險披露聲明"}),"。期貨交易權限須受審核和批准，不是所有客戶都將符合資格。期貨賬戶是受證券投資人保護法案(Securities Investor Protection Act)的保護。"]}),a.jsx("p",{children:"市場波動性、交易量和系統可用性會延遲賬戶使用和交易執行。"}),a.jsx("p",{children:"德美利證券香港有限公司為證券及期貨事務監察委員會註冊 (中央編號BJO462)，提供證券交易及期貨合約交易受規管活動，並不負責提供稅務、法律或投資意見或建議。受規管的產品由德美利證券香港有限公司負責在香港提供，而出版資料的任何內容不可在任何其他管轄區為了進行業務，用作要約或招攬的用途。德美利證券(TD Ameritrade)是德美利證券香港有限公司的交易名稱。"}),a.jsxs("p",{children:["德美利證券標誌是由TD Ameritrade IP Company, Inc.以及The Toronto-Dominion Bank共同擁有的商標。 © ",new Date().getFullYear()," 德美利證券版權所有。"]})]}),bbe=()=>{const e=__("__locale");return e==="zh-CN"?a.jsx("div",{"data-testid":"about-us-hk",className:"about-us",children:a.jsx(ybe,{})}):e==="zh-TW"?a.jsx("div",{"data-testid":"about-us-hk",className:"about-us",children:a.jsx(Cbe,{})}):a.jsx("div",{"data-testid":"about-us-hk",className:"about-us",children:a.jsx(Tbe,{})})},Ebe=()=>a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[a.jsx("a",{href:"https://www.tdameritrade.com.sg/tdaa/index.html#!/disclosures",target:"_blank noopener noreferrer",children:"Please refer to our website for relevant Disclosures and Policy Standards"}),"."]}),a.jsx("p",{children:"Use of this website is subject to the Client Agreement."}),a.jsx("p",{children:"We support only the current and previous major releases of Chrome, Firefox, Safari, and Microsoft Edge on a rolling basis."}),a.jsxs("p",{children:["Options are not suitable for all investors as the special risks inherent to options trading may expose investors to potentially rapid and substantial losses. Please read"," ",a.jsx("a",{href:"https://www.theocc.com/about/publications/character-risks.jsp",target:"_blank noopener noreferrer",children:"Characteristics and Risks of Standard Options"})," ","before investing in options."]}),a.jsx("p",{children:"All prices in USD unless noted otherwise. Market volatility, volume and system availability may delay account access and trade executions."}),a.jsx("p",{children:"TD Ameritrade Singapore Pte. Ltd. (Reg. No. 200902152D) is licensed by the Monetary Authority of Singapore and does not provide tax, legal or investment advice or recommendations. Products and services offered in Singapore are provided by TD Ameritrade Singapore Pte. Ltd. and nothing in the published material is an offer or solicitation to conduct business in any other jurisdiction. TD Ameritrade Singapore Pte. Ltd. trading as TD Ameritrade."}),a.jsxs("p",{children:["The TD Ameritrade logo is a trademark jointly owned by TD Ameritrade IP Company, Inc. and The Toronto-Dominion Bank. © ",new Date().getFullYear()," TD Ameritrade."]})]}),Abe=()=>a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[a.jsx("a",{href:"https://www.tdameritrade.com.sg/tdaa/index.html#!/disclosures",target:"_blank noopener noreferrer",children:"请访问我们的网站查看相关公开披露和政策"}),"。"]}),a.jsx("p",{children:"该网站的使用需受客户协议的限制。"}),a.jsx("p",{children:"我们只支持Chrome、Firefox、Safari和Microsoft Edge浏览器当前和之前陆续发布的主要版本。"}),a.jsxs("p",{children:["期权不适合所有投资人，因为期权交易固有的风险可能使投资人面临潜在的、快速而巨大的损失。在投资期权之前，请阅读"," ",a.jsx("a",{href:"https://www.theocc.com/about/publications/character-risks.jsp",target:"_blank noopener noreferrer",children:"标准期权的特性与风险"}),"。"]}),a.jsx("p",{children:"除非另有说明，所有价格均以美元表示。市场波动性、交易量和系统可用性会影响账户使用和交易执行。"}),a.jsx("p",{children:"德美利证券新加坡有限公司（监管注册号码200902152D）由新加坡金融管理局授权执照，且不提供税务、法律或投资建议或推荐。在新加坡提供的产品和服务由德美利证券新加坡有限公司提供，而出版资料的任何内容不是在任何其他管辖区为了进行业务，而用作要约或招揽的用途 。TD Ameritrade是德美利证券新加坡有限公司的交易名称。"}),a.jsxs("p",{children:["德美利证券为TD Ameritrade IP Company, Inc. 与The Toronto-Dominion Bank共同拥有的商标。©"," ",new Date().getFullYear(),"德美利证券版权所有。"]})]}),vbe=()=>a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[a.jsx("a",{href:"https://www.tdameritrade.com.sg/tdaa/index.html#!/disclosures",target:"_blank noopener noreferrer",children:"請訪問我們的網站查看相關公開披露和政策"}),"。"]}),a.jsx("p",{children:"該網站的使用需受客戶協議的限制。"}),a.jsx("p",{children:"我們只支持Chrome、Firefox和Safari和Microsoft Edge瀏覽器當前和之前陸續發布的主要版本。"}),a.jsxs("p",{children:["期權不適合所有投資人，因爲期權交易固有的風險可能使投資人面臨潜在的、快速而巨大的損失。在投資期權之前，請閱讀"," ",a.jsx("a",{href:"https://www.theocc.com/about/publications/character-risks.jsp",target:"_blank noopener noreferrer",children:"標準期權的特性與風險"}),"。"]}),a.jsx("p",{children:"除非另有說明，所有價格均以美元表示。市場波動性、交易量和系統可用性會影響賬戶使用和交易執行。"}),a.jsx("p",{children:"德美利證券新加坡有限公司（監管註冊號碼200902152D）由新加坡金融管理局授權執照，且不提供稅務、法律或投資建議或推薦。在新加坡提供的產品和服務由德美利證券新加坡有限公司提供，而出版資料的任何內容不是在任何其他管轄區為了進行業務，而用作要約或招攬的用途 。TD Ameritrade是德美利證券新加坡有限公司的交易名稱。"}),a.jsxs("p",{children:["德美利證券為TD Ameritrade IP Company, Inc. 與The Toronto-Dominion Bank共同擁有的商標。©"," ",new Date().getFullYear(),"德美利證券版權所有。"]})]}),Ibe=()=>{const e=__("__locale");return e==="zh-CN"?a.jsx("div",{"data-testid":"about-us-sg",className:"about-us",children:a.jsx(Abe,{})}):e==="zh-TW"?a.jsx("div",{"data-testid":"about-us-sg",className:"about-us",children:a.jsx(vbe,{})}):a.jsx("div",{"data-testid":"about-us-sg",className:"about-us",children:a.jsx(Ebe,{})})},xbe=A(tt)`
  color: ${({theme:e})=>e.colors.action.disabled};
  font-size: ${({theme:e})=>e.fontSizes.medium};
  display: flex;
  align-items: center;
  padding: 0;
  white-space: normal;
  text-align: left;
  ${({isHeader:e})=>e?"width: 100%":""};
  ${({needsPadding:e})=>e?"padding: 10px 12px;":""};
`,Zy=A(X)`
  width: ${({theme:e})=>e.fontSizes.large};
  height: ${({theme:e})=>e.fontSizes.large};
  transition: 60ms ease-out;
  fill: ${({theme:e,isExpandedDown:t,isExpandedUp:s})=>t||s?e.colors.action.focus:e.colors.action.disabled};
  ${({isExpandedDown:e,isExpandedUp:t})=>e&&!t?"":"transform: rotate(-90deg);"}
  ${({isExpandedDown:e,isExpandedUp:t})=>!e&&t?"transform: rotate(-180deg)":""}
`,wbe=A.span`
  padding-left: ${({theme:e})=>e.space.xSmall};
`,$o=e=>{const{isExpandedDown:t,isExpandedUp:s,ariaLabel:n,isHeader:r,needsPadding:o,onClick:i}=e,l=()=>t===void 0?s!==void 0?s:!1:t;return a.jsxs(xbe,{"data-testid":"expander-btn","aria-label":n,onClick:i,"aria-expanded":l(),isHeader:r,needsPadding:o,children:[a.jsx("div",{children:a.jsx(Zy,{type:Y.ChevronDownCircle,width:16,height:16,viewBox:"2 2 20 20",dataTestId:"chevron-down-circle-icon",isExpandedDown:t,isExpandedUp:s})}),a.jsx(wbe,{children:e.children})]})},Obe=A.div`
  height: 100%;
  width: 100%;
  display: flex;
  flex-direction: column;
`,Rbe=A.div`
  color: ${({theme:e})=>e.colors.text.primary};
  padding: 16px;
  overflow-y: scroll;

  h1 {
    font-size: 2rem;
    min-width: max-content;
    margin: 8px 8px 16px 0;
    display: flex;
    align-items: center;
  }

  .disclosure-title {
    white-space: normal;
    text-align: left;
  }

  .disclosure-date-published {
    text-align: left;

    span {
      padding-right: 8px;
    }
  }

  .expander-title {
    display: flex;
    justify-content: space-between;

    ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
      flex-direction: column;
    }
  }
`,Dbe=A.div`
  margin-bottom: 8px;

  button,
  span {
    width: 100%;
  }

  button {
    align-items: flex-start;

    svg {
      margin-top: 2px;
    }
  }
`,ML=A.div`
  max-height: 200px;
  overflow: auto;
  padding: 8px 8px 0 8px;
  ${({theme:e})=>e.mixins.commonBorder()};
  border-radius: 2px;
  margin-top: 8px;
  background: ${({theme:{colors:e}})=>e.background.primary};
`,Lbe=A.section`
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  margin-top: 24px;

  * + * {
    margin-left: 0.8rem;
  }
`,_be=A.div`
  flex: 1 1 50%;
`,Nbe=A.hr`
  ${({theme:e})=>e.mixins.commonBorder()};
`,Pbe=A.div`
  padding-right: ${({theme:e})=>e.space.medium};
  ${({theme:e})=>e.breakpoints.above(lt.TABLET_SMALL)} {
    max-height: 430px;
    overflow-y: auto;
  }
`,kbe=A(ML)`
  padding: 8px;
  font-size: ${({theme:e})=>e.fontSizes.small};
`,Mbe=({isExpanded:e,onToggle:t,heading:s,text:n})=>a.jsxs("div",{className:"disclosure-component",children:[a.jsx($o,{isExpandedDown:e,onClick:()=>{t(!e)},children:s}),e&&a.jsx(kbe,{"data-testid":"about-disclosure-text",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:n.replace(/<\/?(html|pre)[^>]*>/gi,"")}})})]}),$be=()=>a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Futures and futures options trading involves substantial risk and is not suitable for all investors. Please read the"," ",a.jsx("a",{href:"https://www.tdameritrade.com/retail-en_us/resources/pdf/TDA611.pdf",target:"_blank noopener noreferrer",children:"Risk Disclosure Statement"})," ","prior to trading futures products."]}),a.jsxs("p",{children:["Forex trading involves leverage, carries a high level of risk and is not suitable for all investors. Please read the"," ",a.jsx("a",{href:"http://www.nfa.futures.org/NFA-investor-information/publication-library/forex.pdf",target:"_blank noopener noreferrer",children:"NFA booklet Trading Forex: What Investors Need to Know"})," ","prior to trading forex products"]}),a.jsx("p",{children:"Futures and Forex accounts are not protected by the Securities Investor Protection Corporation (SIPC)."}),a.jsx("p",{children:"Futures, futures options, and forex trading services provided by Charles Schwab Futures and Forex LLC. Trading privileges subject to review and approval. Not all clients will qualify."}),a.jsx("p",{children:"Additional Forex execution data available by request by contacting the Trade Desk"}),a.jsx("p",{children:"Charles Schwab Futures and Forex LLC, a CFTC-registered Futures Commission Merchant and NFA Forex Dealer Member. Charles Schwab Futures and Forex LLC is a subsidiary of The Charles Schwab Corporation."})]});var $L=(e=>(e.PaperMoney="PAPERMONEY",e.Quote="QUOTE",e.Stock="STOCK",e.Option="OPTION",e.FuturesAndForex="FUTURESANDFOREX",e.Thirdparty="THIRDPARTY",e.None="",e))($L||{});const jbe=e=>a.jsxs("div",{className:"disclosure-component",children:[a.jsx($o,{isExpandedDown:e.isExpanded,onClick:()=>{e.onToggle(e.disclosureType)},children:e.heading}),e.isExpanded&&a.jsx("div",{"data-testid":"about-disclosure-text",role:"none",className:Te("disclosure-text","native-scroll",e.isExpanded?"":"hidden"),children:e.children})]}),Bbe=e=>a.jsx(jbe,{onToggle:e.onToggle,disclosureType:$L.FuturesAndForex,heading:"Futures and Forex disclosure",isExpanded:e.isExpanded,children:a.jsx($be,{})}),Fbe=({disclosures:e})=>{const[t,s]=B.useState(""),n=r=>{s(r===t?"":r)};return a.jsxs(_be,{"data-testid":"disclosures",children:[a.jsx("h3",{children:__("Disclosures")}),a.jsxs(Pbe,{children:[e.map(r=>a.jsxs("div",{children:[a.jsx(Mbe,{isExpanded:t===r.title,onToggle:()=>n(r.title),heading:r.title,text:r.text}),a.jsx(Nbe,{"aria-hidden":!0})]},r.id)),a.jsx(Bbe,{onToggle:()=>n("futuresAndForex"),isExpanded:t==="futuresAndForex"})]})]})},jL=({disclosures:e})=>{const t=e.disclosures.map(r=>r.id),s=e.disclosures.findIndex(r=>r.userNotificationType===uT.RequireExplicitConsent)!==-1,n=e.disclosures.findIndex(r=>r.userNotificationType===uT.ShowNotification)!==-1;return{disclosureIds:t,disclosures:e.disclosures,requireExplicitConsent:s,showNotification:n}},Hbe=({disclosures:e})=>({disclosures:e.aboutWebsiteDisclosures}),Ube=({disclosures:e})=>e.snapShotReceived,Vbe=e=>{const{disclosures:t}=Hbe(e);return{disclosures:t}},Wbe=se(Vbe)(Fbe),NS="website-info",ad={websiteInfo:NS,control:{wrapper:`${NS}__control-wrapper`,content:`${NS}__control-content`}},Gbe=A(tt)`
  align-items: baseline;
  padding: ${({theme:e})=>`${e.space.none}`};
`;class Ybe extends j.PureComponent{constructor(s){super(s);R(this,"buttonRef",B.createRef());R(this,"closeClick",()=>{this.setState({showWebsiteInfo:!1},()=>{this.props.triggerFocus(this.buttonRef)})});R(this,"renderAboutUs",s=>{switch(s){case"SING":return a.jsx("div",{className:Te(ad.websiteInfo,"native-scroll"),children:a.jsx(Ibe,{})});case"HKASIA":return a.jsx("div",{className:Te(ad.websiteInfo,"native-scroll"),children:a.jsx(bbe,{})});default:return a.jsxs("div",{className:Te(ad.websiteInfo,"native-scroll"),children:[a.jsx(fbe,{}),a.jsx(Wbe,{})]})}});this.state={showWebsiteInfo:!1}}render(){const s=this.state,n=s.showWebsiteInfo?a.jsxs(Dl,{onCloseClick:this.closeClick,container:this.props.renderDestination,children:[a.jsx("div",{tabIndex:0,className:"modal-header","data-testid":"about-website",children:__("About This Website")}),this.renderAboutUs(this.props.userSegment),a.jsx(PL,{navigationButtonRef:this.buttonRef,closeWindow:this.closeClick,triggerFocus:this.props.triggerFocus})]}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:ad.control.wrapper,children:[a.jsx("hr",{"aria-hidden":"true",className:"h-sep"}),a.jsx(Gbe,{"data-testid":"about-this-website-button",ref:this.buttonRef,"aria-label":"About This Website","aria-expanded":s.showWebsiteInfo,className:ad.control.content,onClick:()=>this.setState({showWebsiteInfo:!0}),children:a.jsxs("span",{"aria-hidden":!0,children:[__("About This Website")," ",a.jsx(X,{type:Y.ChevronRight,width:12,height:8,viewBox:"5 10 14 8",dataTestId:"chevron-right-icon"})]})})]}),n]})}}const qbe=["off","on"],Kbe=e=>a.jsx(Rl,{ariaLabel:"Regional Color Preference Toggle",className:"buy-sell-swap-selector-toggle only-focus-toggle",leftValue:"USA: Green is Up and Red is Down",rightValue:"ASIA: Red is Up and Green is Down",value:e.areColorsSwapped?"on":"off",name:"buy-sell-swap-selector",onToggle:e.swapColors,disable:!1,label:()=>"",children:qbe}),zbe=hn(Kbe),Xbe=e=>a.jsx(ds,{mb:5,children:a.jsx(Ei,{"data-testid":"language-dropdown",renderAnchorButtonContent:()=>{var t;return(t=e.selectedLanguage)==null?void 0:t.label},values:e.languages,getListItemKey:t=>t.value,onListItemClick:e.setLanguage,renderListItemContent:t=>a.jsx(a.Fragment,{children:e.format(t)}),anchorAriaLabel:"Select Language",selectedItemIndex:e.languages.findIndex(t=>t.value===e.selectedLanguage.value)})}),Qbe=e=>a.jsxs(Rl,{ariaLabel:"Color Mode Toggle",className:"theme-selector-toggle only-focus-toggle",leftValue:Qt.DARK,rightValue:Qt.LIGHT,value:e.theme,name:"theme-selector",onToggle:()=>e.setTheme(e.theme===Qt.DARK?Qt.LIGHT:Qt.DARK),disable:!1,label:()=>"",children:[Qt.DARK,Qt.LIGHT]}),Zbe=hn(Qbe),Jbe="unavailable",hg=e=>{const{account:t,formatAccount:s}=e;return a.jsxs(a.Fragment,{children:[s(t),!t.tradeable&&a.jsx(ot,{children:Jbe})]})},Ra=e=>{if(!e.code||e.code==="")return e.description;let t=e.code.replace(/SCHW+$/,"");return t=`*${t.replace(/TDA+$/,"").slice(-3)}`,`${e.description} ${t}`},e0e=e=>a.jsx(ds,{"data-testid":"default-account-dropdown",mb:5,children:a.jsx(Ei,{"data-testid":"default-account-dropdown",variant:Pe.primary,values:e.accounts,getListItemKey:t=>t.code,onListItemClick:t=>e.selectDefaultAccount(t,e.selectedAccount),renderListItemContent:t=>a.jsx(hg,{account:t,formatAccount:Ra}),selectedItemIndex:e.accounts.findIndex(t=>{var s;return t.code===((s=e.selectedDefaultAccount)==null?void 0:s.code)}),renderAnchorButtonContent:()=>e.selectedDefaultAccount&&a.jsx("div",{children:Ra(e.selectedDefaultAccount)}),anchorAriaLabel:"select default account"})}),t0e=e=>({accounts:q1(e),selectedDefaultAccount:Rw(e),selectedAccount:Tl(e)}),s0e=e=>({selectDefaultAccount:(t,s)=>{t.code!==""?Et.unstable_batchedUpdates(()=>{e(Qp({defaultAccountCode:t.code})),(s==null?void 0:s.code)!==t.code&&e({type:f.AccountSelected,account:t})}):Et.unstable_batchedUpdates(()=>{e(Qp({defaultAccountCode:""})),(s==null?void 0:s.code)!==t.code&&e({type:f.AccountSelectionCleared})})}}),n0e=se(t0e,s0e)(e0e),gT=[{label:Ya==="en-US"||Ya===null?"English":`English | ${__("English")}`,ariaLabel:Ya==="en-US"||Ya===null?"English":`English ${__("English")}`,value:"en-US"},{label:`Simplified Chinese | ${__("Simplified Chinese",{locale:"zh-CN"})}`,ariaLabel:`Simplified Chinese ${__("Simplified Chinese",{locale:"zh-CN"})}`,value:"zh-CN"},{label:`Traditional Chinese | ${__("Traditional Chinese",{locale:"zh-TW"})}`,ariaLabel:`Traditional Chinese ${__("Traditional Chinese",{locale:"zh-TW"})}`,value:"zh-TW"}];function r0e(e){document.cookie=`language=${e.value}`,window.location.reload()}function o0e(e){return a.jsx("span",{"aria-label":e.ariaLabel,children:a.jsx("span",{"aria-hidden":!0,children:e.label})})}function a0e(e){const t=gT.find(s=>s.value===e);return t===void 0?gT[0]:t}class i0e extends B.PureComponent{constructor(){super(...arguments);R(this,"userMenuWindowRef",B.createRef());R(this,"handleFocus",()=>{const{shouldFocus:s}=this.props;s&&this.props.triggerFocus(this.userMenuWindowRef)});R(this,"renderThemeSelector",()=>a.jsxs("div",{children:[a.jsx("label",{className:"profile-menu-window__label",children:__("Color Mode")}),a.jsxs("div",{className:"toggle-section",children:[a.jsxs("div",{"aria-hidden":"true",className:"toggle-section-label-left",children:[a.jsx(X,{type:Y.DarkTheme,dataTestId:"dark-theme-icon"}),a.jsx("p",{className:"margin-left-1","data-testid":"color-mode-dark-label",children:__("Dark")})]}),a.jsx("div",{className:"toggle-section-toggle-wrapper",children:a.jsx(Zbe,{})}),a.jsxs("div",{"aria-hidden":"true",className:"toggle-section-label-right",children:[a.jsx("p",{className:"margin-right-1","data-testid":"color-mode-light-label",children:__("Light")}),a.jsx(X,{type:Y.LightTheme,dataTestId:"light-theme-icon"})]})]})]}));R(this,"renderBuySellSwapToggle",()=>a.jsxs("div",{children:[a.jsx("label",{className:"profile-menu-window__label",children:__("Regional Color Preference")}),a.jsxs("div",{className:"toggle-section",children:[a.jsxs("div",{"aria-hidden":"true",className:"toggle-section-label-left",children:[a.jsx("p",{className:"margin-right-1 color-buy-no-invert",children:"+1.00"}),a.jsx("p",{className:"color-sell-no-invert",children:"-1.00"})]}),a.jsx("div",{className:"toggle-section-toggle-wrapper",children:a.jsx(zbe,{})}),a.jsxs("div",{"aria-hidden":"true",className:"toggle-section-label-right",children:[a.jsx("p",{className:"margin-right-1 color-sell-no-invert",children:"+1.00"}),a.jsx("p",{className:"color-buy-no-invert",children:"-1.00"})]})]})]}));R(this,"renderLanguageDropdown",()=>a.jsxs(a.Fragment,{children:[a.jsx("label",{className:"profile-menu-window__label",children:__("Language")}),a.jsx(Xbe,{languages:gT,selectedLanguage:a0e(__("__locale")),disabled:!1,setLanguage:r0e,format:o0e})]}));R(this,"renderAutoLogoutDropdown",()=>a.jsxs(a.Fragment,{children:[a.jsx("label",{className:"profile-menu-window__label",children:__("Auto-Logout")}),a.jsx(gbe,{disabled:!1})]}));R(this,"renderDefaultAccountDropdown",()=>a.jsxs(a.Fragment,{children:[a.jsx("label",{className:"profile-menu-window__label",children:__("Default Account")}),a.jsx(n0e,{})]}));R(this,"renderPLDisplayMethodToggle",()=>a.jsxs("div",{children:[a.jsx("label",{"data-testid":"PL-display-header",className:"profile-menu-window__label",children:__("P/L Display Method")}),a.jsxs("div",{className:"toggle-section",children:[a.jsx("div",{"aria-hidden":"true",className:"toggle-section-label-left",children:a.jsx("p",{className:"margin-left-1",children:__("Execution Price")})}),a.jsx("div",{"data-testid":"PL-display-toggle",className:"toggle-section-toggle-wrapper",children:a.jsx(obe,{})}),a.jsx("div",{"aria-hidden":"true",className:"toggle-section-label-right",children:a.jsx("p",{className:"margin-right-1",children:__("Cost")})})]})]}))}componentDidUpdate(s,n,r){var o,i;this.handleFocus(),((o=this.props.flags)==null?void 0:o[Cs.SPREAD_GROUPING])!==((i=s.flags)==null?void 0:i[Cs.SPREAD_GROUPING])&&this.props.spreadGrouping&&this.props.changePositionsRequestType(this.props.selectedAccount)}render(){const{isOpened:s,hideProfileMenu:n,triggerFocus:r,navigationButtonRef:o,isLoggedIn:i,userSegment:l,showPLDisplayMethod:c,flags:d}=this.props;return a.jsx(ja,{isOpened:s,closeWindow:n,reFocus:r,navigationButtonRef:o,children:a.jsxs("div",{className:"profile-menu-window",children:[this.renderLanguageDropdown(),i&&this.renderDefaultAccountDropdown(),this.renderAutoLogoutDropdown(),this.renderBuySellSwapToggle(),this.renderThemeSelector(),i&&c&&this.renderPLDisplayMethodToggle(),i&&a.jsx(mbe,{}),i&&a.jsx(hbe,{}),i&&Js(Cs.SPREAD_GROUPING,d)&&a.jsx(dbe,{}),a.jsx(Ybe,{triggerFocus:r,userSegment:l})]})})}}const l0e=e=>({isLoggedIn:_c(e),isOpened:Er(e)===bt.Profile,shouldFocus:e.focus.focusedId===ps.USER_MENU_WINDOW,userSegment:xl(e),showPLDisplayMethod:e.userProperties.userProperties.plDisplayMethod!==void 0,spreadGrouping:zm(e),selectedAccount:Tl(e),tradingSystem:Mo(e)}),c0e=e=>({triggerFocus(t){e({type:f.TriggerFocus,ref:t})},hideProfileMenu(){e(En())},changePositionsRequestType:t=>{t.code!==""?e({type:f.AccountSelected,account:t}):e({type:f.AccountSelectionCleared})}}),BL=Ln.withConsumer()(se(l0e,c0e)(i0e)),d0e=e=>{const t=()=>{e.displaySchwabWindow(!e.isOpened)};return a.jsx(ir,{dataTestId:"schwab-button",onClick:t,ariaExpanded:e.isOpened,icon:a.jsx(X,{width:14,height:14,viewBox:"0 0 24 24",dataTestId:"schwab-cursor-icon",type:Y.SchwabCursor}),title:"Schwab.com",navigationButtonRef:e.navigationButtonRef})},u0e=e=>({isOpened:Er(e)===bt.Schwab}),h0e=e=>({displaySchwabWindow(t){t?(e({type:f.ShowDrawerWindow,windowToShow:bt.Schwab}),e(Us(ps.SCHWAB_WINDOW))):e(En())}}),p0e=se(u0e,h0e)(d0e),m0e=372,PS=A.span`
  text-decoration: underline;
`,FL=A.div`
  width: ${m0e}px;
  padding: 0 ${({theme:e})=>`${e.space.medium}`} ${({theme:e})=>`${e.space.medium}`};
  display: flex;
  flex-direction: column;
  align-items: flex-start;
`,kS=A.button`
  font-size: ${({theme:e})=>e.fontSizes.medium};
  font-weight: normal;
  padding-top: ${({theme:e})=>e.space.xxxSmall};
  padding-bottom: ${({theme:e})=>e.space.xxxSmall};
  padding-left: ${({theme:e})=>e.space.xxSmall};
`,g0e=e=>a.jsx(ja,{isOpened:e.isOpened,closeWindow:e.hideSchwabWindow,reFocus:e.triggerFocus,navigationButtonRef:e.schwabButtonRef,children:a.jsxs(FL,{children:[a.jsx(kS,{"data-testid":"go-to-schwab-button",onClick:e.handleSchwabSso,children:a.jsxs(PS,{children:[__("Go to")," Schwab.com"]})}),a.jsx(kS,{"data-testid":"move-money-button",onClick:e.handleMoveMoney,children:a.jsx(PS,{children:__("Move Money")})}),a.jsx(kS,{"data-testid":"realized-gain-loss-button",onClick:e.handleRealizedGainLoss,children:a.jsx(PS,{children:__("Realized Gain/Loss")})})]})}),S0e=e=>({isOpened:Er(e)===bt.Schwab}),f0e=e=>({triggerFocus(t){e({type:f.TriggerFocus,ref:t})},hideSchwabWindow(){e(En())},handleSchwabSso:()=>{e(Jj())},handleMoveMoney:()=>{e(s9())},handleRealizedGainLoss:()=>{e(n9())}}),HL=se(S0e,f0e)(g0e);function Bu(...e){return e.length===2?ZE(e[0],e[1])||null:e.slice(1).reduce((s,n)=>ZE(s,n),e[0])||null}const QE=new WeakMap;function ZE(e,t){if(e&&t){const s=QE.get(e)||new WeakMap;QE.set(e,s);const n=s.get(t)||(r=>{JE(e,r),JE(t,r)});return s.set(t,n),n}return e||t}function JE(e,t){typeof e=="function"?e(t):e.current=t}const UL=A.button`
  display: flex;
  align-items: center;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  color: ${({theme:{colors:e}})=>e.text.primary};

  svg {
    margin-right: ${({theme:{space:e}})=>e.xSmall};
  }
`,T0e=A.form`
  position: relative;
`,VL=50,Jy=A.input`
  width: 100%;
  border: none;
  background: ${({theme:{colors:e}})=>e.background.secondary};
  padding-right: ${VL}px;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  color: ${({theme:{colors:e}})=>e.text.primary};

  border: ${({theme:{shape:e}})=>`${e.borderWidth.primary}px solid}`};
  border-color: ${({hasError:e,theme:{colors:t}})=>e?t.error.primary:t.border.primary};
  border-radius: ${({theme:{shape:e}})=>e.borderRadius.primary}px;

  :focus {
    border-color: ${({hasError:e,theme:{colors:t}})=>e?t.error.primary:t.action.focus};
  }
`,y0e=A.button`
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: ${VL}px;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  color: ${({theme:{colors:e}})=>e.action.focus};
`,C0e=({close:e,error:t,clearError:s,createWatchlist:n,inputRef:r,onInputKeyDown:o,onLastElementKeyDown:i})=>{const[l,c]=j.useState(""),d=j.useRef(null),u=j.useRef(null);$a(u,()=>e()),Cn(()=>{d.current&&d.current.focus()}),j.useEffect(()=>()=>{t&&s()},[t,s]);const h=WL(l),p=S=>{S.key===we.Esc&&e()},m=S=>{t&&s(),c(S.currentTarget.value)},g=S=>{S.preventDefault(),h&&n(l,e.bind(null,l))};return a.jsxs("div",{ref:u,children:[a.jsxs(T0e,{"data-testid":"create-watchlist-form",onSubmit:g,children:[a.jsx(Jy,{ref:Bu(d,r),value:l,onChange:m,hasError:t!==void 0,onKeyDown:S=>{o&&o(S),!h&&i&&i(S),p(S)},placeholder:__("Watchlist name"),"data-testid":"create-watchlist-input"}),h&&a.jsx(y0e,{"data-testid":"watchlist-save-button",type:"submit",onKeyDown:S=>{p(S),i&&i(S)},children:__("Save")})]}),t&&a.jsx(vi,{warnings:[t]})]})},b0e=e=>{const{error:t,clearError:s,createWatchlist:n,firstElementRef:r,onCreateWatchlistButtonKeydown:o,onFirstElementKeyDown:i,onLastElementKeyDown:l,onSuccess:c}=e,[d,u]=j.useState(!1),h=j.useRef(null);return Cn(()=>(!d&&h.current&&h.current.focus(),()=>{u(!1)})),d?a.jsx(C0e,{close:p=>{u(!1),c&&p&&c(p)},error:t,clearError:s,createWatchlist:n,inputRef:r,onLastElementKeyDown:l,onInputKeyDown:i}):a.jsxs(UL,{ref:Bu(h,r),onClick:()=>u(!0),onKeyDown:p=>{i&&i(p),l&&l(p),o&&o(p)},"data-testid":"new-watchlist-button",children:[a.jsx(X,{type:Y.Add,width:16,height:16,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",fill:"icon.primary"}),__("New Watchlist")]})},WL=e=>e.trim()!=="",E0e=e=>({error:e.watchlists.error.create}),A0e=(e,{symbol:t})=>({clearError(){e(Fy("create"))},createWatchlist:(s,n)=>{e(ESe({watchlistName:s,successCallback:o=>{n()},symbols:co(t)?void 0:[t]}))}}),GL=se(E0e,A0e)(b0e),v0e=A(_n)`
  ${Wn} {
    padding: 0;
  }

  ${UL} {
    width: 100%;
    height: 40px;
    padding-right: ${({theme:{space:e}})=>e.xxLarge};
    padding-left: ${({theme:{space:e}})=>e.medium};
    text-align: left;
  }

  ${Jy} {
    height: 40px;
    padding-left: ${({theme:{space:e}})=>e.medium};
  }
`,I0e=A.span`
  background-color: inherit;
  word-break: break-word;
  white-space: pre-wrap;

  ${br.lineClamp()}
`,x0e=A.div`
  font-weight: normal;
  display: flex;
  align-items: center;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  color: ${({theme:{colors:e}})=>e.text.primary};

  svg {
    margin-left: ${({theme:{space:e}})=>e.xSmall};
  }
`;class w0e extends j.Component{constructor(s){super(s);R(this,"timeout");R(this,"getPartColor",s=>{const n=this.props,r=this.state,o=n.themeColors.NAV_DOT,i=n.themeColors.NAV_DOT_SELECTED;return s===r.currentItem?o:i});this.state={currentItem:8}}componentDidUpdate(){window.clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>{this.state.currentItem===1?this.setState({currentItem:8}):this.setState({currentItem:this.state.currentItem-1})},125)}componentWillUnmount(){window.clearTimeout(this.timeout)}render(){return a.jsxs("svg",{"data-testid":"loading-icon",className:this.props.className,height:"22",width:"19",viewBox:"0 0 19 22",fill:"inherit",children:[a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3237 0.665039L14.1436 1.05539L10.8418 11.0259L11.3237 0.665039Z",fill:this.getPartColor(1)}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.01172 6.87449L7.30254 5.28516L10.2668 11.5209L5.01172 6.87449Z",fill:this.getPartColor(2)}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.44922 12.6589L5.86986 10.0186L9.34554 11.9377L5.44922 12.6589Z",fill:this.getPartColor(3)}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.69971 19.6135L0 17.4695L9.86707 12.6084L1.69971 19.6135Z",fill:this.getPartColor(4)}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.0124 17.9395L8.19141 17.5479L10.4471 13.1201L11.0124 17.9395Z",fill:this.getPartColor(5)}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.0829 19.7162L15.7955 21.3048L11.1484 12.9482L18.0829 19.7162Z",fill:this.getPartColor(6)}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.314 11.9346L16.896 14.5751L11.957 12.3948L17.314 11.9346Z",fill:this.getPartColor(7)}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.0567 6.30566L18.7565 8.44643L11.3984 11.6819L17.0567 6.30566Z",fill:this.getPartColor(8)})]})}}const YL=hn(w0e),O0e=A.div`
  display: inline-flex;
  align-items: center;
  gap: ${({theme:{space:e}})=>e.xSmall};
`,R0e=A.div`
  width: 200px;
  border: ${({theme:{shape:e}})=>e.borderWidth.secondary}px solid
    ${({theme:{colors:e}})=>e.border.primary};
  border-radius: ${({theme:{shape:e}})=>e.borderRadius.secondary}px;
  background: ${({theme:{colors:e}})=>e.background.primary};
  padding: ${({theme:{space:e}})=>e.xSmall} ${({theme:{space:e}})=>e.medium};
  word-wrap: break-word;
  text-align: center;
`,D0e=[0,5],qL=({anchor:e,content:t,onClickOutside:s})=>a.jsx(Qw,{isVisible:!0,placement:"bottom-end",anchor:a.jsx(O0e,{children:e}),content:a.jsx(R0e,{role:"alert",children:t}),offset:D0e,onClickOutside:s}),L0e=__("Add to Watchlist"),eC=()=>a.jsxs(x0e,{children:[L0e,a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon"})]}),_0e=()=>a.jsx(qL,{anchor:a.jsx(eC,{}),content:a.jsx(YL,{})}),N0e=2500,KL=({close:e,children:t})=>(j.useEffect(()=>{const s=setTimeout(e,N0e);return()=>clearTimeout(s)},[e]),a.jsx(qL,{anchor:a.jsx(eC,{}),content:t,onClickOutside:e})),P0e=A.span`
  color: ${({theme:{colors:e}})=>e.text.disabled};
  white-space: pre-wrap;
`,k0e=({watchlistName:e,close:t})=>a.jsxs(KL,{close:t,children:[__("Added to")," ",a.jsx(P0e,{children:e})]}),M0e=({watchlists:e,selectedSymbol:t,addSymbolToWatchlist:s,addingSymbolLoading:n,clearCreateError:r,error:o})=>{const[i,l]=j.useState(null),c=j.useRef(null);return n?a.jsx(_0e,{}):o?a.jsx(KL,{close:r,children:o}):i?a.jsx(k0e,{watchlistName:i,close:()=>l(null)}):a.jsx(v0e,{"data-testid":"add-symbol-to-watchlist-dropdown",offset:5,values:$0e(e),getListItemKey:d=>String(d.id),onListItemClick:d=>{s(d.id,t),l(d.description)},renderListItemContent:d=>a.jsx(I0e,{title:d.description,children:d.description}),renderAnchorButtonContent:()=>a.jsx(eC,{}),placement:"bottom-start",renderFooter:({setIsVisible:d,listboxRef:u})=>a.jsx(GL,{symbol:t,onSuccess:h=>{l(h),d(!1)},firstElementRef:c,onCreateWatchlistButtonKeydown:h=>{h.key===we.Esc&&d(!1)},onFirstElementKeyDown:h=>{var p;if(h.shiftKey&&h.key===we.Tab){h.preventDefault();const m=(p=u.current)==null?void 0:p.children[0];m instanceof HTMLElement&&m.focus()}},onLastElementKeyDown:h=>{!h.shiftKey&&h.key===we.Tab&&d(!1)}}),tabToRef:c,popperOptions:{strategy:"fixed"}})},$0e=e=>(e==null?void 0:e.filter(t=>du(t)&&Jm(t)))??[],j0e=x(e=>e.watchlists.addingSymbol.loading,e=>e),B0e=x(e=>e.watchlists.error.addSymbol,e=>e),F0e=e=>({watchlists:Mu(e),addingSymbolLoading:j0e(e),error:B0e(e)}),H0e=e=>({addSymbolToWatchlist:(t,s)=>{Et.unstable_batchedUpdates(()=>{e({type:f.WatchlistAddSymbolLoading}),e({type:f.WatchlistAddSymbol,watchlistId:t,symbol:s})})},clearCreateError:()=>{e(Fy("create"))}}),zL=se(F0e,H0e)(M0e),U0e=e=>{let t;const s=(r,o)=>()=>{t=void 0,e.apply(r,o)};function n(...r){typeof t>"u"&&(t=requestAnimationFrame(s(this,r)))}return n.cancel=()=>{t!==void 0&&cancelAnimationFrame(t)},n},Zp=v5({strategy:"scroll"});class Da extends j.PureComponent{constructor(){super(...arguments);R(this,"element",j.createRef());R(this,"onResize",U0e(s=>this.props.onResize(s)));R(this,"onResizeDebounce",yc(this.onResize,this.props.rate??0))}componentDidMount(){this.element.current!==null&&Zp.listenTo(this.element.current,this.onResizeDebounce)}componentWillUnmount(){this.element.current!==null&&Zp.uninstall(this.element.current)}render(){const{className:s,onScroll:n,rate:r,onResize:o,...i}=this.props;return a.jsx("div",{onScroll:n,...i,className:Te(s,"resize-detector"),ref:this.element,children:this.props.children})}}const V0e="Not Available",tr=({value:e,privacyModeEnabled:t=!1,showWhenPrivacyMode:s,showZero:n,className:r,displayCreditOrDebit:o,dataTestId:i})=>e===void 0?a.jsx("span",{className:r,children:n?vp.format(0):Ht}):(c=>{const d=Fr(c),u=d!==void 0?t&&!s?go:vp.format(Math.abs(d)):Ht,h=c<0?{"aria-label":`${c}`}:{},p=u===Ht?{"aria-label":V0e}:h,m=()=>{let g=a.jsx(a.Fragment,{children:u});return o&&c!==0?g=a.jsxs(a.Fragment,{children:[u," ",__(c<0?"credit":"debit")]}):c<0&&(g=a.jsxs(a.Fragment,{children:["(",u,")"]})),a.jsx("span",{"data-testid":"currency-value","aria-hidden":u===Ht||c<0,children:g})};return a.jsx("span",{...p,role:"text",className:r,"data-testid":i,children:m()})})(e),W0e=A.div`
  padding-left: ${({theme:e})=>e.space.xxxSmall};
  color: ${({theme:e})=>e.colors.text.primary};
  font-weight: normal;
  font-size: ${({theme:e})=>e.fontSizes.medium};
`,tC=B.forwardRef((e,t)=>a.jsxs(tt,{ref:t,onClick:e.onClick,"data-testid":e.dataTestId,children:[a.jsx(X,{type:Y.BellAddAlert,width:16,height:21,viewBox:"4 0 18 21"}),a.jsx(W0e,{children:__("Create Alert")})]}));tC.displayName="CreateAlertButton";const eA=A(_n)`
  margin-right: ${({theme:e})=>e.space.xSmall};
  ${Wn} {
    height: 100%;
    display: flex;
    align-items: center;
    font-size: ${({theme:e})=>e.fontSizes.medium};
    font-weight: normal;
    color: ${({theme:{colors:e}})=>e.text.primary};
    border-radius: 3px;
    background-color: ${({theme:e})=>e.colors.background.secondary};
    border: 1px solid ${({theme:e})=>e.colors.border.primary};

    svg {
      margin-left: ${({theme:{space:e}})=>e.xSmall};
      font-size: ${({theme:e})=>e.fontSizes.small};
    }
  }
`,G0e=A(tt)`
  padding: 3px 42px 4px 42px;
  font-weight: normal;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  background-color: ${({theme:e,disabled:t})=>t?oe.GRAY_STONE:e.colors.border.secondary};
  border: ${({theme:e})=>`${e.shape.borderWidth.secondary}px solid ${e.colors.text.primary}`};
  border-radius: 15px;
  color: ${({theme:e})=>e.colors.text.tertiary};
  margin-left: ${({theme:e})=>e.space.xxSmall};
  ${({theme:e})=>({"&:disabled":{border:`${e.shape.borderWidth.secondary}px solid ${e.colors.text.primary}`,color:e.colors.text.tertiary}})}
`,Y0e=A(tt)`
  padding: 3px 42px 4px 42px;
  color: ${({theme:e})=>e.colors.text.primary};
  font-weight: normal;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  border: 2px solid
    ${({theme:e})=>e.colors.border.secondary};
  border-radius: 15px;
`,q0e=A.div`
  color: ${({theme:e})=>e.colors.text.primary};
`,K0e=A(Be)`
  margin-top: ${({theme:e})=>e.space.xSmall};
  margin-bottom: ${({theme:e})=>e.space.medium};
`,z0e=A(Be)`
  margin-bottom: ${({theme:e})=>e.space.xSmall};
  margin-left: 69px;
`,X0e=A(er)`
  button {
    height: 20px !important;
    width: 20px !important;
  }
`;var Jp=(e=>(e.MARK="Mark",e.LAST="Last",e.BID="Bid",e.ASK="Ask",e))(Jp||{}),em=(e=>(e.AT_OR_ABOVE="AT OR ABOVE",e.AT_OR_BELOW="AT OR BELOW",e.ABOVE="ABOVE",e.BELOW="BELOW",e))(em||{});const tA=Object.values(Jp),sA=Object.values(em),Q0e=e=>__(e),Z0e=e=>__(e),J0e=e=>{const{showFractionalPricing:t}=e,[s,n]=B.useState({priceType:"Mark",operator:"AT OR ABOVE",price:e.price,symbol:e.symbol}),[r,o]=B.useState(""),[i,l]=B.useState(!1),c=j.useCallback(y=>{t&&l(y)},[t]),d=()=>{o("")},u=y=>{d(),n(b=>({...b,operator:y}))},h=y=>{d(),n(b=>({...b,priceType:y}))},p=y=>{y!==s.price&&(d(),n(b=>({...b,price:y})))},m=y=>isNaN(y)?(l(!0),!1):(i&&l(!1),!0),g=()=>{o(ZD)},S=()=>{e.onClose()},T=()=>{const{fractionalType:y,showFractionalPricing:b,showDoubleTickForFractionalPricing:E}=e;d(),e.onCreate(s,y,b,E,S,g)};return B.useEffect(()=>{e.symbol!==s.symbol&&n(y=>({...y,symbol:e.symbol}))},[e.symbol]),Cn(()=>()=>{d(),e.onClose()}),a.jsxs("div",{"data-testid":"symbol-alert-form",children:[a.jsx(q0e,{children:__("Set Alert")}),a.jsxs(K0e,{children:[a.jsx(eA,{"data-testid":"price-type-dropdown",anchorAriaLabel:"Price Type",values:tA,onListItemClick:h,getListItemKey:y=>y,selectedItemIndex:tA.indexOf(s.priceType),renderListItemContent:Z0e,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[__(s.priceType),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon"})]})}),a.jsx(eA,{"data-testid":"operator-dropdown",anchorAriaLabel:"Operator",values:sA,onListItemClick:u,getListItemKey:y=>y,selectedItemIndex:sA.indexOf(s.operator),renderListItemContent:Q0e,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[__(s.operator),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon"})]})}),a.jsx(X0e,{dataTestId:"stepper",value:s.price,valueStep:e.tickSize,onUpdateValue:p,isValid:m,fractionalType:e.fractionalType,showFractionalPricing:e.showFractionalPricing,showDoubleTickForFractionalPricing:e.showDoubleTickForFractionalPricing,onFocus:()=>{c(!0)},onBlur:()=>{c(!1)}})]}),a.jsxs(z0e,{children:[a.jsx(Y0e,{onClick:e.onClose,children:__("Close",{namespace:"ChartInfo"})}),a.jsx(G0e,{onClick:T,disabled:i,"data-testid":`create-button-${i?"disabled":"enabled"}`,children:__("Submit",{namespace:"Alerts"})})]}),r&&a.jsx(vi,{warnings:[__(r)]})]})},eEe=(e,{onClose:t,symbol:s})=>{var o,i;const{showFractionalPricing:n,fractionalType:r}=pn(e,s);return{onClose:t,symbol:s,tickSize:((o=e.instruments.get(s))==null?void 0:o.priceTick)||1,price:((i=e.quotes.get(s))==null?void 0:i.mark)||0,showFractionalPricing:n,fractionalType:r,showDoubleTickForFractionalPricing:Vs(vl(e),na(e)),instrumentType:na(e)}},tEe={onCreate:XR},XL=se(eEe,tEe)(J0e),sEe=A.button`
  background: none;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px ${({theme:e})=>`${e.space.xSmall}`};
  ${({disabled:e,theme:t})=>e?`
        cursor: default;
        color: ${t.colors.text.disabled};`:"cursor: pointer;"};
`,nEe=A.div`
  min-width: fit-content;
  padding: ${({theme:e})=>`0 ${e.space.medium}`};

  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    padding: ${({theme:e})=>`0 ${e.space.xSmall}`};
  }
`,rEe=A.span`
  font-weight: ${({selected:e})=>e?"500;":"normal"};
  font-size: ${({theme:e})=>`${e.fontSizes.medium}`};
  white-space: nowrap;
`,oEe=A.div`
  position: absolute;
  bottom: 0;
  width: 90%;
  height: 3px;
  border-radius: ${({theme:e})=>`${e.fontSizes.xxSmall} ${e.fontSizes.xxSmall} 0 0;`};
  background: ${({theme:e})=>`${e.colors.action.focus}`};
`,aEe=A(_n)`
  ${Wn} {
    font-weight: normal;
    font-size: ${({theme:e})=>e.fontSizes.medium};
    padding: 16px 0 8px 8px;
  }
`,iEe=A(X)`
  margin-left: ${({theme:{space:e}})=>e.xSmall};
  margin-bottom: ${({theme:{space:e}})=>e.xxSmall};
`,Lh=e=>a.jsxs(sEe,{onClick:e.handleTabClick,disabled:e.isDisabled,title:e.title,"data-testid":`quote-details-menu-tab_${e.tabTestId}`,"data-isactivetab":e.isActiveTab,children:[a.jsx(nEe,{children:a.jsx(rEe,{selected:e.isActiveTab,"data-testid":`quote-details-menu-tab-text_${e.tabTestId}`,children:__(e.tab)})}),e.isActiveTab&&a.jsx(oEe,{"data-testid":`quote-details-menu-tab-active-indicator_${e.tabTestId}`})]}),lEe=A.div`
  overflow-x: hidden;
  display: flex;
  align-items: flex-end;
  padding-bottom: 1px;
  min-width: fit-content;
`,cEe=e=>{const t=o=>()=>{sessionStorage.setItem(nc.QUOTE_DETAILS_ACTIVE_TAB,o),e.setActiveTab(o),Ye({category:Ve.TradePage,action:Le.TabSelected,label:o})},s=o=>{sessionStorage.setItem(nc.QUOTE_DETAILS_ACTIVE_TAB,o),e.setActiveTab(o),Ye({category:Ve.TradePage,action:Le.TabSelected,label:o})},n=Object.values(kn).filter(o=>o===kn.FUNDAMENTALS?!e.showTabDropdown||e.isFundamentalsEnabled:o===kn.OPTION_STATS?e.hasOptionChain:!0),r=[];return e.isAnalystReportsEnabled||r.push(kn.ANALYST_REPORTS),e.isFundamentalsEnabled||r.push(kn.FUNDAMENTALS),a.jsx(a.Fragment,{children:e.showTabDropdown?a.jsx(aEe,{"data-testid":"Quote-details-options-dropdown",offset:5,selectedItemIndex:n.indexOf(e.activeTab),values:n,nonSelectableItemsIds:r,onListItemClick:s,getListItemKey:o=>`${o}`,renderListItemContent:o=>__(`${o}`),renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(ot,{ml:3,children:e.activeTab}),a.jsx(iEe,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",dataTestId:"quote-details-arrow-dropdown-icon"})]})}):a.jsxs(lEe,{"data-testid":"quote-details-menu",children:[a.jsx(Lh,{tab:kn.QUOTE_DETAILS,handleTabClick:t(kn.QUOTE_DETAILS),isDisabled:!1,isActiveTab:e.activeTab===kn.QUOTE_DETAILS,tabTestId:"quote-details"}),a.jsx(Lh,{tab:kn.ANALYST_REPORTS,handleTabClick:t(kn.ANALYST_REPORTS),isDisabled:!e.isAnalystReportsEnabled,isActiveTab:e.activeTab===kn.ANALYST_REPORTS,tabTestId:"analyst-reports",title:e.isAnalystReportsEnabled?"":__("Analyst Reports: Coming Soon!")}),a.jsx(Lh,{tab:kn.FUNDAMENTALS,handleTabClick:t(kn.FUNDAMENTALS),isDisabled:!e.isFundamentalsEnabled,isActiveTab:e.activeTab===kn.FUNDAMENTALS,tabTestId:"fundamentals",title:e.isFundamentalsEnabled?"":__("Fundamentals coming soon!")}),e.hasOptionChain&&a.jsx(Lh,{tab:kn.OPTION_STATS,handleTabClick:t(kn.OPTION_STATS),isDisabled:!1,isActiveTab:e.activeTab===kn.OPTION_STATS,tabTestId:"option-stats"})]})})},dEe=A.div`
  overflow: auto;
`,uEe=A.table`
  width: 100%;
  border-collapse: collapse;
  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    min-width: max-content;
  }
`,hEe=A.tr`
  font-weight: 500;
  border-top: 1px solid ${({theme:e})=>e.colors.background.tertiary};
  border-bottom: 1px solid ${({theme:e})=>e.colors.background.tertiary};
`,tm=A.th.attrs(e=>({colSpan:e.colSpan||1,scope:"col"}))`
  padding: ${({theme:e})=>e.space.xSmall};
  padding-left: ${({theme:e})=>e.space.medium};
  text-align: ${e=>e.textAlign||"center"};
  font-size: ${({theme:e})=>e.fontSizes.small};
  font-weight: 500;
  color: ${({theme:e})=>e.colors.text.disabled};
  border-right: ${({theme:e,borderRight:t})=>t?`1px solid ${e.colors.background.tertiary}`:"none"};
`,pEe=A(tm)`
  color: ${({theme:e})=>e.colors.optionStatsTable.calls};
`,mEe=A(tm)`
  color: ${({theme:e})=>e.colors.optionStatsTable.puts};
`,QL=A.tr.attrs(()=>({scope:"row"}))`
  padding-left: ${({theme:e})=>e.space.xSmall};
  border-top: ${({theme:e,borderTop:t})=>t?`1px solid ${e.colors.background.tertiary}`:"none"};
`,mu=A.td`
  padding: ${({theme:e})=>e.space.xSmall};
  text-align: right;
  font-size: ${({theme:e})=>e.fontSizes.small};
`,nA=A(mu)`
  color: ${({theme:e})=>e.colors.optionStatsTable.calls};
`,ZL=A(mu)`
  font-weight: 500;
  padding-left: ${({theme:e,isDeltaTitleRow:t})=>t?"40px":e.space.medium};
  text-align: left;
`,rA=A(mu)`
  color: ${({theme:e})=>e.colors.optionStatsTable.puts};
`,ha=({title:e,dataTestId:t,optionsStatisticsValues:s,isDeltaTitleRow:n})=>{var r,o,i,l,c,d,u,h,p;return a.jsxs(QL,{"data-testid":t,children:[a.jsx(ZL,{"data-testid":`${t}-title`,isDeltaTitleRow:n,children:__(e)}),a.jsx(nA,{"data-testid":`${t}-values-calls`,children:ep((r=s==null?void 0:s.values)==null?void 0:r.calls)}),a.jsx(nA,{"data-testid":`${t}-percents-calls`,children:(s==null?void 0:s.percents)&&((o=s==null?void 0:s.percents)==null?void 0:o.callsPercent)&&Jh(((i=s==null?void 0:s.percents)==null?void 0:i.callsPercent)/100)}),a.jsx(rA,{"data-testid":`${t}-values-puts`,children:ep((l=s==null?void 0:s.values)==null?void 0:l.puts)}),a.jsx(rA,{"data-testid":`${t}-percents-puts`,children:(s==null?void 0:s.percents)&&((c=s==null?void 0:s.percents)==null?void 0:c.putsPercent)&&Jh(((d=s==null?void 0:s.percents)==null?void 0:d.putsPercent)/100)}),a.jsx(mu,{"data-testid":`${t}-values-total`,children:ep((u=s==null?void 0:s.values)==null?void 0:u.total)}),a.jsx(mu,{"data-testid":`${t}-percents-total`,children:(s==null?void 0:s.percents)&&((h=s==null?void 0:s.percents)==null?void 0:h.totalPercent)&&Jh(((p=s==null?void 0:s.percents)==null?void 0:p.totalPercent)/100)})]})},gEe=({title:e,dataTestId:t})=>a.jsx(QL,{"data-testid":t,borderTop:!0,children:a.jsx(ZL,{"data-testid":`${t}-title`,colSpan:7,children:__(e)})}),Fo={"0...20":"0-20","21...40":"21-40","41...60":"41-60","61...80":"61-80","81...100":"81-100"},SEe=({symbol:e,getOptionsStatistics:t,unsubscribeOptionsStatistics:s,optionsStatistics:n})=>{var r,o,i,l,c;return Cn(()=>(e&&t(e),()=>s())),a.jsx(dEe,{"data-testid":"option-stats-table-wrapper",children:a.jsxs(uEe,{tabIndex:0,children:[a.jsx("thead",{children:a.jsxs(hEe,{"data-testid":"option-stats-table-head-tr-row",children:[a.jsx(tm,{textAlign:"left",borderRight:!0,children:__("Trade Analysis")}),a.jsx(pEe,{colSpan:2,children:__("Calls")}),a.jsx(mEe,{colSpan:2,children:__("Puts")}),a.jsx(tm,{colSpan:2,children:__("Total")})]})}),a.jsxs("tbody",{children:[a.jsx(ha,{title:"Traded at Bid or below",optionsStatisticsValues:n==null?void 0:n.bidOrBelow,dataTestId:"traded-at-bid-or-below-row"}),a.jsx(ha,{title:"Traded at Ask or above",optionsStatisticsValues:n==null?void 0:n.askOrAbove,dataTestId:"traded-at-ask-or-above-row"}),a.jsx(ha,{title:"Between the market",optionsStatisticsValues:n==null?void 0:n.betweenTheMarket,dataTestId:"between-the-market-row"}),a.jsx(ha,{title:"Total",optionsStatisticsValues:n==null?void 0:n.totalVolume,dataTestId:"total-volume-row"}),a.jsx(gEe,{title:"Delta Between",borderTop:!0,dataTestId:"delta-between-row"}),a.jsx(ha,{title:Fo["0...20"],optionsStatisticsValues:(r=n==null?void 0:n.delta)==null?void 0:r["0...20"],dataTestId:`delta-row-${Fo["0...20"]}`,isDeltaTitleRow:!0}),a.jsx(ha,{title:Fo["21...40"],optionsStatisticsValues:(o=n==null?void 0:n.delta)==null?void 0:o["21...40"],dataTestId:`delta-row-${Fo["21...40"]}`,isDeltaTitleRow:!0}),a.jsx(ha,{title:Fo["41...60"],optionsStatisticsValues:(i=n==null?void 0:n.delta)==null?void 0:i["41...60"],dataTestId:`delta-row-${Fo["41...60"]}`,isDeltaTitleRow:!0}),a.jsx(ha,{title:Fo["61...80"],optionsStatisticsValues:(l=n==null?void 0:n.delta)==null?void 0:l["61...80"],dataTestId:`delta-row-${Fo["61...80"]}`,isDeltaTitleRow:!0}),a.jsx(ha,{title:Fo["81...100"],optionsStatisticsValues:(c=n==null?void 0:n.delta)==null?void 0:c["81...100"],dataTestId:`delta-row-${Fo["81...100"]}`,isDeltaTitleRow:!0})]})]})})},fEe=(e,t)=>e.optionsStatistics.optionsStatistics.get(t),TEe=e=>{const t=mt(e);let s,n;if(t){const r=bn(e).get(t);s=r!==void 0&&(r==null?void 0:r.type)===k.PRODUCT?r.activeSymbol:t}return s&&(n=fEe(e,s)),{symbol:t,optionsStatistics:n}},yEe=e=>({getOptionsStatistics(t){e(dL(t))},unsubscribeOptionsStatistics(){e(uL())}}),CEe=se(TEe,yEe)(SEe),bEe=(e,t)=>e.analystReports.reports.get(t),EEe=e=>e.analystReports.analystReportAccessToken,AEe=e=>e.analystReports.isLoading,vEe=e=>{if(e===0)return!0;const t=e-Date.now(),s=1e3*60;return t/s<=15},oA=(e,t)=>{if(!t)return;const s={"Content-Type":"application/pdf",Authorization:`${e.grantType} ${e.accessToken}`};fetch(t,{method:"GET",headers:s}).then(n=>{const{ok:r,status:o,statusText:i}=n;if(!r){il(`Failed response for analyst report fetch ${o} ${i}`,li.AnalystReportMarkitDigital);return}n.blob().then(l=>{const c=window.URL.createObjectURL(l);c&&window.open(c,"_blank")})}).catch(n=>{il(`Unable to fetch the analyst report, url: ${t} error: ${n}`,li.AnalystReportMarkitDigital)})},aA=A(X)`
  fill: ${e=>e.isFilled?e.theme.colors.text.primary:e.theme.colors.text.disabled};

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    fill: ${e=>e.isFilled?e.theme.colors.text.primary:"transparent"};
    stroke: ${e=>e.isEmptyStar?e.theme.colors.text.primary:"none"};
  }
`,IEe=A.div`
  margin: ${({theme:e})=>`${e.space.medium}`};
  overflow-y: hidden;
  ${({isLoading:e})=>e?"height: 220px;":""};

  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    margin: 0;
    border-top: 1px solid ${({theme:{colors:e}})=>e.divider.primary};
    ${({isLoading:e})=>e?"height: 230px;":""};
  }
`,xEe=A.div`
  display: flex;
  flex-direction: column;

  &:not(:last-child) {
    margin-bottom: ${({theme:e})=>`${e.space.medium}`};
  }

  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    padding: ${({theme:e})=>`${e.space.medium}`};

    &:not(:last-child) {
      margin-bottom: 0;
      border-bottom: 1px solid ${({theme:e})=>e.colors.divider.primary};
    }
  }
`,wEe=A.div`
  display: flex;
  justify-content: space-between;
`,OEe=A.button`
  display: flex;
  color: ${({theme:e})=>e.colors.text.primary};
  margin-left: ${({theme:e})=>`${e.space.xSmall}`};
  padding: ${({theme:e})=>`${e.space.xxxSmall}`};
`,ra=A.div`
  display: flex;
  gap: ${({theme:e})=>`${e.space.xxxSmall}`};
  margin-top: ${({theme:e})=>`${e.space.xxSmall}`};
`,oa=A.div`
  background-color: ${e=>e.rating>0&&e.rating<=2?e.theme.colors.background.red:e.rating===3?e.theme.colors.background.warning:e.rating>3?e.theme.colors.background.green:e.theme.colors.background.secondary};
  border: 1px solid
    ${e=>e.rating>0&&e.rating<=2?e.theme.colors.text.red:e.rating===3?e.theme.colors.border.warning:e.rating>3?e.theme.colors.text.green:e.theme.colors.background.secondary};
  padding: ${({theme:e})=>`${e.space.xSmall}`};
  display: flex;
  flex: 1;
  justify-content: center;
  gap: ${({theme:e})=>`${e.space.xxSmall}`};
  color: ${({theme:e,isSelectedRating:t})=>t?e.colors.text.primary:e.colors.text.disabled};
`,REe=({ratingValues:e,rating:t})=>{const s="analyst-star-rating-wrapper",n=(r,o)=>r===o?o:0;return a.jsxs("div",{"data-testid":s,"aria-hidden":!0,children:[a.jsx(jr,{children:a.jsx(ra,{"aria-hidden":!0,"data-testid":s+"-desktop",children:e.map(r=>a.jsx(oa,{rating:n(r,t),children:Array.from({length:r},(o,i)=>a.jsx(aA,{type:Y.Star,width:16,height:16,viewBox:"-2 -2 24 24",isFilled:n(r,t)!==0},t+i+"-rating-start-icon"))},"rating-item-"+r))})}),a.jsx(fr,{children:a.jsx(ra,{"aria-hidden":!0,"data-testid":s+"-mobile",children:a.jsx(oa,{rating:t,children:Array.from({length:e.length},(r,o)=>a.jsx(aA,{type:Y.Star,width:16,height:16,viewBox:"-2 -2 24 24",isEmptyStar:o>=t,isFilled:o<t},t+o+"-rating-start-icon"))})})})]})},DEe=({rating:e,ratingValues:t})=>{const s="analyst-character-rating-wrapper",n=t??["F","D","C","B","A"],r=(o,i)=>o===i?n.indexOf(i)+1:0;return a.jsxs("div",{"data-testid":s,"aria-hidden":!0,children:[a.jsx(jr,{children:a.jsx(ra,{"aria-hidden":!0,"data-testid":s+"-desktop",children:n.map(o=>a.jsx(oa,{rating:r(o,e),isSelectedRating:r(o,e)!==0,children:o},"rating-item-"+o))})}),a.jsx(fr,{children:a.jsx(ra,{"aria-hidden":!0,"data-testid":s+"-mobile",children:a.jsx(oa,{rating:n.indexOf(e)+1,isSelectedRating:!0,children:e})})})]})},iA={Sell:2,Hold:3,Buy:4},LEe=({rating:e,ratingValues:t})=>{const s="analyst-buy-sell-rating-wrapper",n=t??["Sell","Hold","Buy"],r=(o,i)=>o===i?iA[i]:0;return a.jsxs("div",{"data-testid":s,"aria-hidden":!0,children:[a.jsx(jr,{children:a.jsx(ra,{"aria-hidden":!0,"data-testid":s+"-desktop",children:n.map(o=>a.jsx(oa,{rating:r(o,e),isSelectedRating:r(o,e)!==0,children:__(o)},"rating-item-"+o))})}),a.jsx(fr,{children:a.jsx(ra,{"aria-hidden":!0,"data-testid":s+"-mobile",children:a.jsx(oa,{rating:iA[e],isSelectedRating:!0,children:__(e)})})})]})},lA={Sell:1,Underperform:2,Hold:3,Outperform:4,Buy:5},_Ee=({rating:e,ratingValues:t})=>{const s="analyst-performance-rating-wrapper",n=t??["Sell","Underperform","Hold","Outperform","Buy"],r=(o,i)=>o===i?lA[i]:0;return a.jsxs("div",{"data-testid":s,"aria-hidden":!0,children:[a.jsx(jr,{children:a.jsx(ra,{"aria-hidden":!0,"data-testid":s+"-desktop",children:n.map(o=>a.jsx(oa,{rating:r(o,e),isSelectedRating:r(o,e)!==0,children:__(o)},"rating-item-"+o))})}),a.jsx(fr,{children:a.jsx(ra,{"aria-hidden":!0,"data-testid":s+"-mobile",children:a.jsx(oa,{rating:lA[e],isSelectedRating:!0,children:__(e)})})})]})},cA={Avoid:1,"Neutral From Avoid":3,"Neutral From Long":3,Long:4},NEe=({rating:e,ratingValues:t})=>{const s="analyst-avoid-neutral-rating-wrapper",n=t??["Avoid","Neutral From Avoid","Neutral From Long","Long"],r=(o,i)=>o===i?cA[i]:0;return a.jsxs("div",{"data-testid":s,"aria-hidden":!0,children:[a.jsx(jr,{children:a.jsx(ra,{"aria-hidden":!0,"data-testid":s+"-desktop",children:n.map(o=>a.jsx(oa,{rating:r(o,e),isSelectedRating:r(o,e)!==0,children:__(o)},"rating-item-"+o))})}),a.jsx(fr,{children:a.jsx(ra,{"aria-hidden":!0,"data-testid":s+"-mobile",children:a.jsx(oa,{rating:cA[e],isSelectedRating:!0,children:__(e)})})})]})},PEe=({symbol:e,getAnalystReports:t,displaySymbol:s,analystReports:n,analystReportAccessToken:r,isLoading:o})=>{var P;B.useEffect(()=>{e&&t(e)},[e]);const i=o&&!n,l=(n==null?void 0:n.error)||!((P=n==null?void 0:n.reports)!=null&&P.length),c=["1","2","3","4","5"],d=["F","D","C","B","A"],u=["Buy","Sell","Hold"],h=["Sell","Underperform","Hold","Outperform","Buy"],p=["Avoid","Neutral From Avoid","Neutral From Long","Long"],m=F=>{var O,H;return(H=(O=F.provider)==null?void 0:O.ratingValues)==null?void 0:H.every(C=>c.includes(C))},g=F=>{var O,H;return(H=(O=F.provider)==null?void 0:O.ratingValues)==null?void 0:H.every(C=>d.includes(C))},S=F=>{var O,H;return(H=(O=F.provider)==null?void 0:O.ratingValues)==null?void 0:H.every(C=>u.includes(C))},T=F=>{var O,H;return(H=(O=F.provider)==null?void 0:O.ratingValues)==null?void 0:H.every((C,M)=>h.includes(C)&&M===h.indexOf(C))},y=F=>{var O,H;return(H=(O=F.provider)==null?void 0:O.ratingValues)==null?void 0:H.every((C,M)=>p.includes(C)&&M===p.indexOf(C))},b=F=>{var O,H;return((H=(O=F.provider)==null?void 0:O.ratingValues)==null?void 0:H.map(C=>parseInt(C)))||[]},E=Ar(),v=F=>{F&&F.indexOf("markitdigital")===-1?window.open(F,"_blank"):vEe(r.expirationTimeMillis)?E(mL(O=>{oA(O,F)})):oA(r,F)},D=F=>m(F)&&F.rating?`Rating ${F.rating} out of ${b(F).length} stars,`:g(F)&&F.rating?`Rating is letter grade ${F.rating},`:F.rating&&(S(F)||T(F)||y(F))?`Rating is ${F.rating},`:"",w=()=>a.jsx("div",{"data-testid":"analyst-report-loader",className:"loader"},"loader"),N=()=>a.jsx(ot,{as:"div",textAlign:"center","data-testid":"analyst-report-error","aria-label":`There are no analyst reports for ${Ns(s)}`,m:it.space.medium,children:__("There are no analyst reports for {{symbol}}",{interpolationArgs:{symbol:s||""}})}),L=()=>{var F;return(F=n==null?void 0:n.reports)==null?void 0:F.map((O,H)=>{var C,M,q,W,z,re,ae;return a.jsxs(xEe,{"data-testid":`analyst-report-item-${H}`,"aria-label":`${(C=O.provider)==null?void 0:C.name} analyst report, ${D(O)} ${ho(O.date)}`,children:[a.jsxs(wEe,{children:[a.jsxs("div",{children:[a.jsx(ot,{"aria-hidden":!0,"data-testid":`analyst-report-provider-name-${H}`,fontWeight:"500",children:(M=O.provider)==null?void 0:M.name}),a.jsx(ot,{fontSize:it.fontSizes.small,color:"text.disabled",pl:it.space.xSmall,"data-testid":`analyst-report-date-${H}`,"aria-hidden":!0,children:a.jsx("span",{children:ti(O.date)})})]}),a.jsxs(OEe,{onClick:()=>v(O.url),"data-testid":`analyst-report-button-${H}`,"aria-label":`View ${(q=O.provider)==null?void 0:q.name} analyst report`,children:[a.jsx(X,{type:Y.NewTab,width:18,height:18,viewBox:"2 0 22 22",dataTestId:"new-tab-icon"}),a.jsx(ot,{pl:it.space.xSmall,children:"View"})]})]}),m(O)&&O.rating&&a.jsx(REe,{rating:parseInt(O.rating||"0"),ratingValues:b(O)}),g(O)&&O.rating&&a.jsx(DEe,{rating:O.rating,ratingValues:(W=O.provider)==null?void 0:W.ratingValues}),S(O)&&O.rating&&a.jsx(LEe,{rating:O.rating,ratingValues:(z=O.provider)==null?void 0:z.ratingValues}),T(O)&&O.rating&&a.jsx(_Ee,{rating:O.rating,ratingValues:(re=O.provider)==null?void 0:re.ratingValues}),y(O)&&O.rating&&a.jsx(NEe,{rating:O.rating,ratingValues:(ae=O.provider)==null?void 0:ae.ratingValues})]},H)})};return a.jsx(IEe,{"data-testid":"analyst-reports-wrapper",isLoading:i,children:i?w():l?N():L()})},kEe=e=>{const t=mt(e);let s,n,r;if(t){const o=bn(e).get(t);s=(o==null?void 0:o.type)===k.PRODUCT?o.activeSymbol:t,n=(o==null?void 0:o.displaySymbol)??t}return s&&(r=bEe(e,s)),{analystReportAccessToken:EEe(e),symbol:t,displaySymbol:n,analystReports:r,isLoading:AEe(e)}},MEe=e=>({getAnalystReports(t){e(pL(t))}}),$Ee=se(kEe,MEe)(PEe),jEe=e=>t=>t.fundamentalsCurrent.fundamentalsCurrent.get(e),BEe=A.div`
  padding: ${({theme:e})=>`${e.space.medium}`};
`,FEe=A(tt)`
  font-size: inherit;
  padding: 0 0 0 ${({theme:e})=>e.space.xxxSmall};
  color: ${({theme:e})=>e.colors.action.focus};
`,JL=A.span`
  position: absolute;
  bottom: 0;
  right: 1px;
  background: ${({theme:{colors:e}})=>e.background.primary};
`,HEe=A(ot)`
  /* stylelint-disable value-no-vendor-prefix, property-no-vendor-prefix */
  display: -webkit-box;
  -webkit-line-clamp: ${({truncateAfterTextLines:e,fullTextShown:t})=>t?"unset":e};
  -webkit-box-orient: vertical;
  /* stylelint-enable value-no-vendor-prefix, property-no-vendor-prefix */
  overflow: hidden;
  text-overflow: ellipsis;
  position: relative;
  padding-left: 1px;
  margin-bottom: ${({theme:e})=>`${e.space.xSmall}`};
  ${({fullTextShown:e})=>e&&Ss`
      & ${JL} {
        position: static;

        span {
          display: none;
        }
      }
    `}
`,UEe=({text:e="",truncateAfterLines:t=3,onShowMoreClick:s=()=>{},onShowLessClick:n=()=>{},ariaLabel:r})=>{const o=B.useRef(null),[i,l]=B.useState(!1),[c,d]=B.useState(!1),u=()=>{c?(d(!1),n()):(d(!0),s())},h=()=>{var p,m;o!=null&&o.current&&!c&&l(((p=o.current)==null?void 0:p.scrollHeight)>((m=o.current)==null?void 0:m.offsetHeight))};return B.useEffect(()=>{h()},[e,c]),e?a.jsxs(HEe,{truncateAfterTextLines:t,isTruncatePossible:i,ref:o,fullTextShown:c,as:"div","aria-label":r,role:"text","data-testid":"truncated-text-wrapper",children:[e,i&&a.jsxs(JL,{"aria-hidden":!0,children:[a.jsx("span",{children:"..."}),a.jsx(FEe,{onClick:u,"data-testid":"truncated-text-button",children:c?__("Show Less"):__("Show More")})]}),a.jsx(Da,{onResize:h})]}):null},VEe=e=>{const{symbol:t=""}=e,s=B.useRef(null),n=Tn(jEe(t)),r=Tn(Bw),o=n!=null&&n.values?n==null?void 0:n.values[Gy.COMPANY_BUSINESS_DESCRIPTION]:"",i=()=>{s!=null&&s.current&&s.current.scrollIntoView()};return a.jsx(BEe,{ref:s,"data-testid":"fundamentals-dsc-wrapper",children:a.jsx(UEe,{ariaLabel:"fundamental description",text:o,truncateAfterLines:r?4:2,onShowLessClick:i})})},WEe=j.memo(VEe),GEe=365,YEe=550;var kn=(e=>(e.QUOTE_DETAILS="Quote Details",e.ANALYST_REPORTS="Analyst Reports",e.FUNDAMENTALS="Fundamentals",e.OPTION_STATS="Option Stats",e))(kn||{});const qEe=e=>{const t=j.useRef(null),s=j.useRef(null),n=j.useRef(null),[r,o]=B.useState(0),[i,l]=B.useState(!1),[c,d]=B.useState(e.symbol),[u,h]=B.useState(!1),p=B.useRef(0),[m,g]=B.useState("Quote Details"),S=Js(Cs.SHOW_ANALYST_REPORTS_BLUE,e.flags),T=Js(Cs.SHOW_FUNDAMENTALS,e.flags),[y,b]=B.useState(!1);B.useEffect(()=>{const z=sessionStorage.getItem(nc.QUOTE_DETAILS_ACTIVE_TAB);g((()=>{switch(z){case"Option Stats":return e.hasOptionChain?"Option Stats":"";case"Analyst Reports":return S?"Analyst Reports":"";case"Fundamentals":return T?"Fundamentals":"";default:return"Quote Details"}})()||"Quote Details")},[e.hasOptionChain,S,T]),B.useEffect(()=>{e.symbol!==c&&d(e.symbol)},[e.symbol]);const E=z=>{z.preventDefault(),p.current=z.touches[0].clientX,l(!0)},v=z=>{const re=z.changedTouches[0].clientX,ae=p.current-re,he=e.type===k.STOCK?3:2;l(!1),ae>0?r<he-1&&o(U=>U+1):ae<0&&r>0&&o(U=>U-1)};B.useEffect(()=>{const z=s.current;return z&&(z.addEventListener("touchstart",E),z.addEventListener("touchend",v)),()=>{z&&(z.removeEventListener("touchstart",E),z.removeEventListener("touchend",v))}},[s,E,v]),B.useEffect(()=>{h(!1)},[e.symbol]);const D=()=>{const z=s.current;if(z){const ae=e.type===k.STOCK;z.scrollLeft=r===0?0:r===1&&ae?z.scrollWidth*.4:z.scrollWidth}const re=t.current;if(re){const ae=e.hasOptionChain?YEe:GEe,Me=(re.offsetWidth??0)<ae;y!==Me&&b(Me)}},w=z=>{o(z)},N=()=>{h(!0)},L=()=>{var z;(z=n.current)==null||z.focus(),h(!1)},P=()=>{e.logOptionChainGammaExposureAc()},F=e.type===k.STOCK,O=e.type===k.FUTURE,H=z=>Te("paginator__nav",r===z&&"selected"),C=O?__("Open Interest"):__("Beta"),M=Sn(O?e.openInterest:e.beta);!i&&D();const q=F?"stock_field":"field",W=F?"StockQuoteDetails":"QuoteDetails";return a.jsx(Da,{onResize:D,children:a.jsxs("div",{className:"QuoteDetailsSection__wrapper",ref:t,children:[a.jsx(fr,{children:u?a.jsx("div",{className:"alert-form",children:a.jsx(XL,{symbol:e.symbol||"",onClose:L})}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"QuoteDetails__description",children:e.description}),a.jsxs("div",{className:"QuoteDetails__addSymbolToWatchlist",children:[a.jsx(zL,{selectedSymbol:e.symbol||""}),a.jsx("span",{className:"symbol-action-separator",children:"|"}),a.jsx(tC,{ref:n,onClick:N,dataTestId:"create-alert-button"})]})]})}),a.jsx(cEe,{hasOptionChain:e.hasOptionChain,activeTab:m,setActiveTab:g,isAnalystReportsEnabled:S,isFundamentalsEnabled:T,showTabDropdown:y}),m==="Quote Details"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"QuoteDetails__container","data-testid":"quote-details-section_quote-details",role:"none",ref:s,children:a.jsxs("dl",{className:W,children:[a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Volume")}),a.jsx("dd",{className:"value",children:Sn(e.volume)})]}),a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:C}),a.jsx("dd",{className:"value",children:M})]}),e.type===k.PRODUCT||e.type===k.FUTURE?a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Margin Req.")}),a.jsx("dd",{className:"value",children:a.jsx(tr,{value:e.margin})})]}):a.jsxs("div",{"data-testid":"mark-cap-details",className:q,onClick:P,children:[a.jsx("dt",{className:"label",children:__("Mkt Cap")}),a.jsx("dd",{className:"value",children:e.marketCap!==void 0?Rx(e.marketCap):Ht})]}),e.type===k.PRODUCT||e.type===k.FUTURE?a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label","aria-label":"Last Trade Date",children:a.jsx("span",{"aria-hidden":!0,children:__("LTD")})}),a.jsx("dd",{className:"value","aria-label":ho(e.lastTradeDate),children:a.jsx("span",{"aria-hidden":!0,children:ti(e.lastTradeDate)})})]}):a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Yield")}),a.jsx("dd",{className:"value",children:gr(e.yield)})]}),F&&a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Put/Call Ratio")}),a.jsx("dd",{className:"value",children:e.putCallRatio})]}),a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("VWAP")}),a.jsx("dd",{className:"value",children:Sn(e.volumeWeightedAveragePrice)})]}),a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("IV")}),a.jsx("dd",{className:"value",children:gr(e.volatilityIndex)})]}),e.type===k.PRODUCT||e.type===k.FUTURE?a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Expiration")}),a.jsx("dd",{className:"value",children:e.futureExpiration?O6(e.futureExpiration):Ht})]}):a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("PE")}),a.jsx("dd",{className:"value",children:Sn(e.priceToEarningsRatio)})]}),e.priceTick!==void 0&&(e.type===k.PRODUCT||e.type===k.FUTURE)?a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Tick")}),a.jsx("dd",{className:"value",children:e.showFractionalPricing?Fs(e.priceTick,e.fractionalType,!1):Sn(e.priceTick)})]}):a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Dividend")}),a.jsx("dd",{className:"value",children:Sn(e.dividendAmount)})]}),F&&a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Market Maker Move")}),a.jsx("dd",{className:"value",children:Sn(e.marketMakerMove)})]}),a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("50-Day Avg. Volume")}),a.jsx("dd",{className:"value",children:e.volAvg!==void 0&&Sn(Math.trunc(e.volAvg))})]}),a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("HV")}),a.jsx("dd",{className:"value",children:gr(e.historicalVolatilityThirtyDays)})]}),e.type===k.PRODUCT||e.type===k.FUTURE?a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label","aria-label":"Days to Expiration",children:a.jsx("span",{"aria-hidden":!0,children:__("Days to Exp")})}),a.jsx("dd",{className:"value",children:(e.daysToExpiration??0)<=0?__("Expired"):e.daysToExpiration})]}):a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("EPS")}),a.jsx("dd",{className:"value",children:Sn(e.earningsPerShare)})]}),e.gainPerTick!==void 0?a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Gain Per Tick")}),a.jsx("dd",{className:"value",children:a.jsx(tr,{value:e.gainPerTick})})]}):a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Ex Date")}),a.jsx("dd",{className:"value","aria-label":ho(e.exDividendDate),children:a.jsx("span",{"aria-hidden":!0,children:ti(e.exDividendDate)})})]}),F&&a.jsxs("div",{className:q,children:[a.jsx("dt",{className:"label",children:__("Upcoming Earnings")}),a.jsx("dd",{className:"value","aria-label":ho(e.upcomingEarningsDate),children:a.jsx("span",{"aria-hidden":!0,children:ti(e.upcomingEarningsDate)})})]})]})}),a.jsxs("nav",{className:"paginator quote-details-bottom",children:[a.jsx("div",{"data-testid":"paginator-0",role:"none",className:H(0),onClick:()=>w(0)}),a.jsx("div",{"data-testid":"paginator-1",role:"none",className:H(1),onClick:()=>w(1)}),F&&a.jsx("div",{"data-testid":"paginator-2",role:"none",className:H(2),onClick:()=>w(2)})]})]}),m==="Analyst Reports"&&a.jsx($Ee,{}),m==="Fundamentals"&&a.jsx(WEe,{symbol:c}),m==="Option Stats"&&a.jsx(CEe,{})]})})},Fu=e=>e.calendar.events,e_=e=>e.calendar.historicalEvents,sC=x(mt,Fu,(e,t)=>{var s;return e!==null?(s=t.get(e))==null?void 0:s[vo.EARNING]:void 0}),KEe=e=>x(an(e),Fu,(t,s)=>{var n;return t!==null?(n=s.get(t))==null?void 0:n[vo.EARNING]:void 0}),zEe=e=>x(an(e),Fu,(t,s)=>{var n;return t!==null?(n=s.get(t))==null?void 0:n[vo.DIVIDEND]:void 0}),XEe=e=>x(an(e),e_,(t,s)=>{var n;return t!==null?(n=s.get(t))==null?void 0:n[ao.EARNINGS]:void 0}),QEe=e=>x(an(e),e_,(t,s)=>{var n;return t!==null?(n=s.get(t))==null?void 0:n[ao.DIVIDENDS]:void 0}),ZEe=x(Fu,e=>{let t=ke();return e.forEach(s=>{var n;(n=s[vo.DIVIDEND])!=null&&n.payableDate&&(t=t.set(s.symbol,s[vo.DIVIDEND].payableDate))}),t}),JEe=x(Fu,e=>{let t=ke();return e.forEach(s=>{var n,r;(n=s[vo.EARNING])!=null&&n.time&&(t=t.set(s.symbol,(r=s[vo.EARNING])==null?void 0:r.time))}),t}),nC="lock",hl={};hl.image=`${nC}__image`;hl.container=`${nC}__container`;hl.input={};hl.input.cn=`${nC}__input`;hl.input.container=`${hl.input.cn}-container`;const dA={UNLOCKED:"Disabled",LOCKED:"Enabled"};class t_ extends j.PureComponent{constructor(){super(...arguments);R(this,"toggleLockState",()=>{const s=this.props;s.setLockState(!s.isLocked)});R(this,"onContainerClick",()=>{this.toggleLockState()});R(this,"onKeyPressed",s=>{switch(s.key){case we.ArrowUp:case we.ArrowDown:case we.ArrowLeft:case we.ArrowRight:case we.Space:{s.preventDefault(),s.stopPropagation(),this.toggleLockState();return}default:return}});R(this,"onChange",()=>null);R(this,"handleKeyDown",s=>{s.key===we.Enter&&(s.stopPropagation(),this.onContainerClick())})}get lockedAriaLabel(){const s=this.props;return`${s.lockName}. ${dA.LOCKED}. ${s.ariaLabels.LOCKED}`}get unlockedAriaLabel(){const s=this.props;return`${s.lockName}. ${dA.UNLOCKED}. ${s.ariaLabels.UNLOCKED}`}render(){const s=this.props,n=s.isLocked?a.jsx(X,{type:Y.Lock,width:14,height:17,viewBox:"0 0 17 21",fill:s.lockColor,dataTestId:"lock-icon-locked"}):a.jsx(X,{type:Y.UnLock,width:14,height:17,viewBox:"0 0 17 21",fill:s.lockColor,dataTestId:"lock-icon-unlocked"});return a.jsxs("span",{className:Te(hl.container),onClick:this.onContainerClick,"aria-label":s.lockName,onKeyDown:this.handleKeyDown,role:"radiogroup",tabIndex:0,children:[n,a.jsxs("span",{className:"off-screen",children:[this.props.isLocked&&a.jsx("div",{"aria-live":"assertive","aria-label":this.lockedAriaLabel}),a.jsx("input",{type:"radio",checked:s.isLocked,name:s.lockName,onKeyDown:this.onKeyPressed,onChange:this.onChange,"aria-label":this.lockedAriaLabel}),a.jsx("input",{type:"radio",checked:!s.isLocked,name:s.lockName,onKeyDown:this.onKeyPressed,onChange:this.onChange,"aria-label":this.unlockedAriaLabel})]})]})}}const eAe={LOCKED:"Near strike will match the value you specified",UNLOCKED:"Near strike will match Mark price"},tAe=e=>{const{strike:t,...s}=e;return a.jsx("span",{className:"near-strike__lock",children:a.jsx(t_,{lockName:"near strike lock",lockColor:"icon.primary",ariaLabels:eAe,...s})})},sAe=j.memo(tAe),nAe=e=>({isLocked:Du(e)}),rAe=(e,t)=>({setLockState:yc(n=>e(Kf(n,t.strike)),300)}),oAe=se(nAe,rAe)(sAe),aAe=(e,t,s)=>e>s?s:e<t&&t===0?-e:e<t&&t!==0?t:e,iAe=A(_n)`
  height: 24px;

  ${Wn} {
    height: 100%;
    display: flex;
    align-items: center;
    margin-left: ${({theme:{space:e}})=>e.xSmall};
    font-size: ${({theme:e})=>e.fontSizes.small};
    color: ${({theme:{colors:e}})=>e.text.primary};
    border: 1px solid ${({theme:{colors:e}})=>e.border.primary};
    background-color: ${({theme:{colors:e}})=>e.background.primary};
    border-radius: 3px;
    text-transform: capitalize;
    border-top-right-radius: 0px;
    border-bottom-right-radius: 0px;
    margin-right: 0px;

    svg {
      margin-left: ${({theme:{space:e}})=>e.xSmall};
      margin-top: ${({theme:{space:e}})=>e.xxSmall};
      font-size: ${({theme:e})=>e.fontSizes.small};
    }
  }
`,lAe=A(X)`
  margin-top: 0 !important;
`,uA=Object.values($t),cAe=({id:e,strike:t,isLocked:s,onValueChange:n,centeredOnField:r,markPrice:o,onOptionChainCentering:i,onCenteredOnFieldChange:l,onLockState:c,tickSize:d,showFractionalPricing:u,fractionalType:h,precision:p})=>{const m=j.useRef(null),[g,S]=j.useState(t),[T,y]=j.useState(Zi(u,t,h,p,!1)),[b,E]=j.useState(!1),[v,D]=j.useState(!1);j.useEffect(()=>{!b&&g!==t&&(S(t),y(Zi(u,t,h,p,!1)))},[b,g,t]);const w=q=>{const W=q.currentTarget.value!==""?Af(q.currentTarget.value):0;if(W!==void 0){const{min:z,max:re}=sS[r];let ae=aAe(W,z,re);isNaN(ae)&&(ae=0),r!==$t.Strike?S(Af(tu(ae.toString(),!1))??0):y(ae.toString()),D(!0)}},N=()=>{const q=w1(T,h,!1),W=x1(q,h,d);W!==void 0&&!/\+/.test(q)&&(n(W,s),y(Im(W,h,!1)))},L=q=>{y(tu(q.target.value,!1)),D(!0)},P=q=>{q.key===we.Enter&&H()},F=()=>E(!0),O=q=>{setTimeout(()=>{var z;const W=(z=m.current)==null?void 0:z.value;W&&Ye({category:Ve.OptionChain,action:Le.CenteredOn,label:q||r,value:Number(W.replaceAll("'",""))})},500)},H=()=>{E(!1),v&&(u?N():n(r!==$t.Strike?g:parseFloat(T),s),i(r,g),D(!1),O())},C=q=>{const W=hh.includes(q)?50:o,z=!1;S(W),n(W,z),l(q),hh.includes(q)?i(q,W):(y(W.toString()),c(W)),O(q)};j.useEffect(()=>{hh.includes(r)&&m.current&&(m.current&&m.current.focus(),E(!0),m.current&&m.current.select())},[m,r]),Cn(()=>{l(r)});const M=r===$t.Strike?T:g.toString();return a.jsxs("div",{className:"near-strike__container",children:[a.jsx("label",{htmlFor:e,className:"near-strike__label",children:__("Centered On")}),a.jsx(iAe,{"data-testid":"option-chain-centered-on-dropdown",anchorAriaLabel:"Option Chain Centered On Value",selectedItemIndex:uA.indexOf(r),values:uA,onListItemClick:C,appendTo:document.body,getListItemKey:q=>`${q}`,renderListItemContent:q=>__(`${q}`),renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(ot,{ml:3,children:r}),a.jsx(lAe,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",dataTestId:"arrow-dropdown-icon"})]})}),a.jsx("input",{ref:m,id:e,tabIndex:0,min:sS[r].min,max:sS[r].max,step:d,"data-testid":"option-chain-centered-on-input",className:"near-strike__input",type:"text",value:M,onChange:q=>{r===$t.Strike&&u?L(q):w(q)},onKeyDown:q=>{q.key==="."&&r!==$t.Strike&&q.preventDefault()},onKeyPress:P,onFocus:F,onBlur:H}),!hh.includes(r)&&a.jsx(oAe,{strike:t})]})},s_=x(Ro,e=>(e==null?void 0:e.priceTick)||1),dAe=x(s_,e=>Qo(e??0)),uAe=e=>{const t=Du(e),s=Uf(e),n=Lu(e),r=dAe(e),o=mt(e),{showFractionalPricing:i,fractionalType:l}=pn(e,o??"");return{isLocked:t,markPrice:s,centeredOnField:ny(e),strike:t?n:parseFloat(s.toFixed(r)),tickSize:s_(e),showFractionalPricing:i,fractionalType:l,precision:r}},hAe=e=>({onValueChange:(o,i)=>{e(i?Wde(o):Kf(!0,o))},onCenteredOnFieldChange:o=>{e(jde(o))},onOptionChainCentering:(o,i)=>{o===$t.Delta?e(qf(ze.DELTA,i)):o===$t.ProbITM&&e(qf(ze.PROBABILITY_ITM,i))},onLockState:o=>{e(Kf(!1,o))}}),pAe=se(uAe,hAe)(cAe),Ll=(e,t,s)=>({type:f.UpdateColumns,table:e,columns:t,label:s}),n_=e=>{const t={position:Zx,trade:Jx,scans:j1,watchlist:$1,optionChain:Wx,futuresChain:B1};return{type:f.UpdateColumns,table:e,columns:t[e]}},mAe=e=>k1.filter(t=>!e.some(s=>s===t)),gAe=e=>e.slice().sort((t,s)=>{const n=yn[t].shortTitle.toLowerCase(),r=yn[s].shortTitle.toLowerCase();return n.localeCompare(r)}),r_=100,SAe=2,fAe={isLegsLimitReached:"You have reached the maximum number of legs for draft trade."},hA=e=>{const t=e.settlementType===wo.AM?e.expirationDateForAM:e.expirationDate,s=e.fullDay===!0,n=Ci(t),r=ay(e.expirationDate),o=s?r===1?__("day"):__("days"):__("d");return`${n} (${r}${o})`},o_=e=>{const t=e.settlementType===wo.AM?e.expirationDateForAM:e.expirationDate,s=ay(e.expirationDate);return`${ll(t)} (${s} ${s===1?__("day"):__("days")})`},rC=(e,t)=>t!==k.FUTURE&&e.spc!==e.multiplier?`${e.spc}/${e.multiplier}`:e.spc,TAe=e=>{const t=e.expirationStyle===Sa.Weekly?__("Weekly"):"",s=e.settlementType===wo.AM?__("AM"):"";return`${o_(e)} ${s} ${t} ${rC(e)} ${e.additionalUnderlyings!==void 0?"("+__(e.additionalUnderlyings)+")":""}`},yAe=e=>{if(e){const t=e.split(":");return t.length>1?t[0]:e}return e},a_=({optionExpiration:e,instrumentType:t})=>a.jsxs("div",{className:"option-expiration-item","data-testid":"option-expiration-item",children:[o_(e)," ",e.settlementType===wo.AM&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"color-non-standard-option",children:__("AM")})," "]}),e.expirationStyle===Sa.Weekly&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"color-non-standard-option",children:__("Weekly")})," "]}),rC(e,t)," ",t===k.FUTURE?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"option-chain-underlying-symbol",children:__(`${yAe(e.underlying)}`)})," "]}):null,e.additionalUnderlyings!==void 0?"("+e.additionalUnderlyings+")":""]}),CAe=(e,t)=>a.jsx(a_,{optionExpiration:e,instrumentType:t});var cn=(e=>(e.add="add",e.remove="remove",e.success="success",e.close="close",e))(cn||{});const bAe=A.button`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  margin: 0 ${({theme:e})=>e.space.xSmall};
  ${({theme:e,variant:t})=>t!=="success"&&t!=="close"&&` background-color: ${t==="remove"?e.colors.action.remove:e.colors.action.add}; padding: 3px;`};
`,Kn=e=>{const{variant:t}=e,s=()=>{switch(t){case"add":return a.jsx(X,{type:Y.Plus,width:10,height:10,viewBox:"0 0 10 10",dataTestId:"plus-icon"});case"remove":return a.jsx(X,{type:Y.Minus,width:10,height:2,viewBox:"0 0 10 2",dataTestId:"minus-icon"});case"success":return a.jsx(X,{type:Y.Check,width:16,height:12,viewBox:"4 7 16 12",dataTestId:"check-icon"});case"close":return a.jsx(X,{type:Y.CloseSolid,width:16,height:16,viewBox:"2 2 20 20",dataTestId:"close-solid-icon",fill:"component.InformationMessage.border"})}};return a.jsx(bAe,{...e,variant:t,children:s()})},EAe=11,sm=2/3,AAe=2,vAe=14,IAe=30,nm=22,ql=16,i_=20,xAe=24,wAe=17,OAe=12,pA=7,RAe=60,DAe=40,LAe=48,_Ae=20,l_=66,NAe=16,PAe=16,gu=16,oC=25,kAe=26,rl=48,MAe=21,$Ae=12,aC=A(Be)`
  bottom: 2px;
  height: initial;
  ${({activePage:e})=>(e===ge.Scans||e===ge.Watchlist||e==="AccountSummary")&&"height: 100%;"}
  ${({topOffset:e,isChartOverlay:t})=>e!==void 0&&!t?`top: ${e}px;`:""}

  ${({isChartOverlay:e,topOffset:t,listsAreStacked:s})=>e&&s===void 0&&`top: ${t}px; 
     `}

  ${({isChartOverlay:e,topOffset:t,studiesHeight:s,chartsHeight:n})=>!e||!s||!n?"":Ss`
      top: ${t}px;
    `}


  ${({isChartOverlay:e,theme:t,marketToolButtonContentVisible:s})=>e?s?`margin-left: ${ql}px;
          margin-right: 40px;
          min-width: 180px;
          border: ${t.colors.overlay.border.primary} 1px solid;
          ${t.breakpoints.below(lt.DESKTOP_SMALL)} {
             margin-left: ${ql}px;
             margin-right: 28px;
             min-width: 180px;
             border: ${t.colors.overlay.border.primary} 1px solid;

          }`:`margin-left: ${ql}px;
           margin-right: 40px;
           min-width: 180px;
           border: ${t.colors.overlay.border.primary} 1px solid;
           `:""}

  left: 0;
  right: 0;
  z-index: 10;
  ${({positionRelative:e})=>e?"position: relative;":"position: absolute;"}
  flex-direction: column;
  ${({theme:e,noPadding:t,isChartOverlay:s})=>t&&!s?"":t&&s?e.breakpoints.below(lt.MOBILE_SMALL)?`margin-left: ${ql}px; 
             margin-right: 28px; 
             min-width: 176px;
             border: ${e.colors.overlay.border.primary} 1px solid;`:`padding: ${e.space.none} ${e.space.medium} ${e.space.none} ${e.space.xxSmall}`:s?`padding: ${e.space.none} 20px ${e.space.xLarge} 20px`:`padding: ${e.space.none} 20px ${e.space.none} 20px`};
  @supports ((-webkit-backdrop-filter: none) or (backdrop-filter: none)) {
    backdrop-filter: blur(3px);
    background: ${({theme:e})=>e.colors.overlay.background.secondary};
  }

  /* slightly transparent fallback for Firefox (not supporting backdrop-filter) */
  @supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)) {
    background: ${({theme:e})=>e.colors.overlay.background.tertiary};
  }
  overflow-y: auto;
  overflow-x: hidden;
`,jAe=A(tt)`
  position: absolute;
  top: ${({positionTop:e})=>e?"0px":"10px"};
  right: 20px;
  padding: ${({theme:e})=>e.space.none};
`;function BAe(e){const{isOpen:t,title:s,hideTitle:n,excludeFocusTrap:r,screenReaderOnlyTitle:o,onClose:i,hideCloseButton:l,noPadding:c,topOffset:d,isChartOverlay:u,studiesHeight:h,chartsHeight:p,toggleButtonRef:m,chartsWrapperRef:g,marketToolButtonContentVisible:S,listsAreStacked:T,positionRelative:y,closeButtonTop:b,children:E,i18nOptions:v={},chartId:D,activePage:w,numCharts:N,className:L,...P}=e,F=j.useRef(null),O=j.useRef(null);$a(F,i,m),j.useEffect(()=>{var M,q,W;t&&O.current&&(g!=null&&g.current?(M=g.current)==null||M.scrollIntoView():((q=O==null?void 0:O.current)==null?void 0:q.scrollIntoView)!==void 0&&((W=O==null?void 0:O.current)==null||W.scrollIntoView()))},[t]);const H=M=>{we.Esc===M.key&&i()},C=()=>a.jsx(Cp,{in:t,timeout:300,unmountOnExit:!0,mountOnEnter:!0,ref:O,onExited:()=>{var M;(M=m==null?void 0:m.current)==null||M.focus()},children:a.jsxs(aC,{tabIndex:-1,ref:F,topOffset:d,isChartOverlay:u,studiesHeight:h,chartsHeight:p,marketToolButtonContentVisible:S,listsAreStacked:T,noPadding:c,positionRelative:y,onKeyDown:H,"aria-label":`${o||s}, ${t?"open":"closed"}`,chartId:D,activePage:w,numCharts:N,...P,className:"in-app-scrollbar "+L,children:[!n&&s&&a.jsx(ot,{as:"h3",fontWeight:"normal","data-testid":"main-title",i18nOptions:v,ml:c?it.space.small:0,mr:c?it.space.small:0,mb:it.space.small,children:s}),E,!l&&a.jsx(jAe,{mt:b?0:3,variant:"link",positionTop:b,onClick:i,"data-testid":"overlay-container-close",children:a.jsx(ot,{"aria-label":"close",i18nOptions:{namespace:"ChartInfo"},children:"Close"})})]})});return r?C():a.jsx(I5,{open:!0,getDoc:()=>document,isEnabled:()=>t,children:C()})}const Ii=j.memo(BAe),pg=({direction:e,className:t})=>{switch(e){case Pt.ASCENDING:return a.jsx("span",{className:Te(t,"sort-arrow"),"data-testid":"sort-arrow","aria-label":Pt.ASCENDING,children:a.jsx("span",{"aria-hidden":!0,children:"▲"})});case Pt.DESCENDING:return a.jsx("span",{className:Te(t,"sort-arrow"),"data-testid":"sort-arrow","aria-label":Pt.DESCENDING,children:a.jsx("span",{"aria-hidden":!0,children:"▼"})});default:return null}},c_=A.th`
  border: ${({isDragging:e,theme:t})=>e?`2px solid ${t.colors.action.focus}`:"none"};
  border-radius: ${({isDragging:e})=>e?"5px":"0"};
  display: ${({isDragging:e})=>e?"flex":"table-cell"};
  align-items: ${({isDragging:e})=>e?"center":""};
`,FAe=A(c_)`
  top: -2px;
  position: sticky;
  white-space: nowrap;
  padding: ${({theme:e})=>`${e.space.xSmall} ${e.space.small}`};
  background-color: ${({theme:e})=>e.colors.background.secondary};

  font-size: ${({theme:e})=>e.fontSizes.small};
  line-height: 20px;
  font-weight: normal;
`,HAe=A.div`
  display: flex;
  align-items: center;
  justify-content: space-evenly;
`,UAe=A(pg)`
  position: absolute;
  right: 4px;
`,Hu=A(tt)`
  background: ${({theme:e,selected:t})=>t?e.colors.selected.secondary.main:e.colors.background.secondary};
  ${({theme:e})=>e.mixins.commonBorder()};
  box-sizing: border-box;
  border-radius: 4px;
  display: flex;
  margin: 0;
  align-items: center;
  justify-content: space-between;
  max-width: ${({maxWidth:e=400})=>e}px;
  width: ${({width:e="100%"})=>e};
  padding: ${({theme:e})=>`${e.space.xSmall} ${e.space.small}`};
  height: ${({height:e=30})=>e}px;
  text-align: left;

  :hover,
  :focus {
    border-color: ${({theme:{colors:e}})=>e.action.focus};
    ${({theme:e})=>e.mixins.commonBorder(!0)};
  }

  ${({selected:e,theme:t})=>e&&t.mixins.selectedListItem(!0)}
`,d_=A(Be).attrs({flexDirection:"column"})`
  > ${Xp} + ${Xp} {
    margin-top: ${({theme:e})=>e.space.xSmall};
  }
`,ta=160,mg=parseInt(it.space.xSmall),VAe=176,WAe=2*ta+mg,GAe=.3,YAe=1,qAe=22,KAe=16,u_=40,mA="Find a Study",h_="study",p_="availableStudy",m_=A.div`
  display: flex;
  min-height: 0;
  flex-wrap: wrap;
  ${({isChartOverlay:e})=>e&&"padding-right: 16px"};
`,mp=A.div`
  min-height: 0;
  padding-top: 10px;
`,g_=A.div`
  margin-bottom: ${it.space.xLarge};
`,zAe=A.div`
  margin: 14px 0 ${it.space.xSmall} ${it.space.small};

  span {
    color: ${({theme:e})=>e.colors.text.primary};
  }
`,XAe=A(ig)`
  height: 36px;
  margin-bottom: ${({theme:e})=>e.space.medium};
  margin-left: ${({theme:e})=>e.space.small};
  margin-top: ${({listsAreStacked:e})=>e?"0":"-46px"};
  width: 240px;

  @media screen and (max-width: 444px) {
    width: 176px;
  }
  @media screen and (max-width: 320px) {
    width: 160px;
  }
  @media screen and (max-width: 767px) {
    margin-top: 0;
  }
`,ST=A(ds).attrs({ml:4,overflowX:"auto",pb:2,mb:4,mr:4})``,S_=A(tt)`
  position: absolute;
  top: 14px;
  right: 68px;

  ${({customizableListName:e,isTradePageOpen:t})=>e==="position"&&t?QAe:""}
`,QAe=Ss`
  ${({theme:{breakpoints:e}})=>e.between(e.desktopSmall,1410)} {
    top: 40px;
    right: ${({theme:e})=>e.space.xSmall};
  }
`,f_=A.span`
  margin-left: auto;
  align-self: center;
`,sc=A(Hu)`
  padding-right: ${({theme:e})=>e.space.none};
  padding-left: ${({theme:e})=>e.space.xxxSmall};
  touch-action: none;
  color: ${({selected:e})=>e&&wt.WHITE};
  margin-bottom: 7px;
  break-inside: avoid;

  ${({$isStudyItem:e,theme:t})=>e&&Ss`
      border: 1px solid ${t.colors.action.disabled};
      border-radius: ${t.shape.borderRadius.tertiary}px;
    `}

  ${({added:e,theme:t})=>e&&Ss`
      background: ${t.colors.component.InformationMessage.background};
    `}
`,fT=A(ds)`
  margin: 0 0 ${it.space.small} ${it.space.small};
  padding: ${it.space.xSmall};
  overflow-x: auto;
  width: min-content;
  background: ${({theme:e})=>e.colors.border.primary};
  border-radius: ${({theme:e})=>e.shape.borderRadius.tertiary}px;
  ${sc} {
    margin-bottom: 0;
  }
`,aa=A.div`
  column-width: ${ta}px;
  column-gap: ${mg}px;
  display: flex;
  flex-direction: column;
`,T_=A(ot)`
  ${br.typography(sr.captionEmphasized)}
  padding-left: ${({theme:e,actionButton:t})=>t?e.space.none:e.space.xLarge};

  ${({theme:e})=>e.mixins.ellipsis}
`,ZAe=A(Be)`
  min-width: 184px;
`,y_=A.div`
  ${({noOfVisibleItems:e,customizableListName:t})=>e>=12?Ss`
        flex-basis: 355px;
        ${()=>t===h_&&Ss`
            ${mp} {
              display: flex;
              & > .visible-study-container-column:only-child {
                flex-grow: 1;
                @media screen and (min-width: 412px) {
                  & ${fT} {
                    width: initial;
                    max-width: 350px;
                    & ${aa} {
                      column-width: 159px;
                    }
                  }
                }
              }
            }
          `}
      `:{}}
  ${aa} {
    overflow: hidden;
  }
`,JAe=A.span`
  height: 100%;
  width: 12px;
  margin-right: ${({theme:e})=>e.space.xxSmall};
  flex: 0;
`,eve=A(X)`
  ${({isHorizontal:e})=>!e&&"transform: rotate(90deg)"};
  display: block;
  fill: ${({theme:e,isDragging:t})=>t?e.colors.action.focus:e.colors.action.disabled};
  visibility: ${({isDragging:e})=>e?"visible":"hidden"};

  ${c_}:hover & {
    visibility: visible;
  }

  ${f_}.show-drag-handle & {
    visibility: visible;
  }
`,C_=({className:e,isDragging:t,isHorizontal:s=!1})=>a.jsx(JAe,{className:e,children:a.jsx(eve,{type:Y.Move,width:12,height:6,viewBox:"5 8 12 8",className:"move-icon",dataTestId:"move-icon",isDragging:t,isHorizontal:s})}),gp=({item:e,actionButton:t,showDragHandle:s=!1,settingsButton:n,isDragging:r=!1,closeButton:o,itemTitle:i=void 0})=>{const l=i??Rm(e);return a.jsxs(Be,{justifyContent:"space-between",ml:-2,width:`${ta}px`,tabIndex:-1,children:[a.jsxs(Be,{children:[t,a.jsx(T_,{title:l,actionButton:t,children:l})]}),s&&a.jsx(f_,{as:C_,className:`${s?"show-drag-handle":""}`,isDragging:r,isHorizontal:!0}),o,n]})},gg=e=>{const[t,s]=B.useState(""),{searchBarOptions:n,isOpen:r,onClose:o,visibleItems:i,availableItems:l,isListStacked:c,collapsibleCategories:d,collapsibleCategoryItems:u,setItems:h,resetItems:p,addedItem:m,addedItemTitle:g,closeAddedItemMsg:S,customizableListName:T,heading:y,mainItemsHeading:b,isTradePageOpen:E,topOffset:v,isChartOverlay:D,studiesHeight:w,chartsHeight:N,filterVisibleItems:L,renderItems:P,hideResetButton:F,hideCloseButton:O,hideAvailableButtonSection:H,hideVisibleItemsHeading:C,hideHeading:M,excludeFocusTrap:q,removeItem:W,editItem:z,toggleButtonRef:re,chartsWrapperRef:ae,marketToolButtonContentVisible:Me,chartId:he,activePage:U,numCharts:Se,noAvailableItemMessage:be}=e,le=uh(R5,{activationConstraint:{distance:10}}),We=uh(D5,{activationConstraint:{delay:250,tolerance:5}}),He=x5(le,We,uh(N5),uh(_5,{coordinateGetter:L5})),Dt=ct=>{const{active:qt,over:Q}=ct;if(qt.id!==(Q==null?void 0:Q.id)){const Z=i.indexOf(qt.id),K=i.indexOf(Q==null?void 0:Q.id);h(P5(i,Z,K))}},Jt=ct=>{h([...i,ct],`Add ${Rm(ct)} column`)},ve=ct=>{S&&S(ct)},Ue=j.useMemo(()=>[...l].filter(ct=>ct.toUpperCase().includes(t.toUpperCase().replace(/ /g,""))).sort(u8),[l,t]),ft=`${T}-visible-item`,_e=`${T}-available-item`,ht=L?i.filter(L):i,kt=(ct,qt)=>({...ct,[qt.categoryName]:!1}),[yt,jt]=B.useState((d==null?void 0:d.reduce(kt,{}))??{}),It=ct=>{const qt=ct.target.value.toUpperCase().trimStart();!qt.length&&!t.length||s(qt)},Lt=ct=>{ct.preventDefault()},Zt=()=>{o(),s("")},ns=be||(b&&T==="study"?"There are no studies that match your search criteria.":"There are no columns that match your search criteria.");return a.jsxs(Ii,{noPadding:!0,topOffset:v,isOpen:r,title:y||"Customize Columns",hideTitle:M,excludeFocusTrap:q,"data-testid":`${T}-customization-menu`,onClose:Zt,hideCloseButton:O,toggleButtonRef:re,chartsWrapperRef:ae,isChartOverlay:D,studiesHeight:w,chartsHeight:N,marketToolButtonContentVisible:Me,listsAreStacked:c,chartId:he,activePage:U,numCharts:Se,className:"overlay-container-customization-menu",children:[a.jsxs(m_,{className:"main-items-container",children:[a.jsx(y_,{noOfVisibleItems:ht.length,className:"visible-items-container",customizableListName:T,children:a.jsxs(mp,{className:"visible-item-list",searchBarShown:!!n,children:[!C&&a.jsx(ot,{id:ft,ml:it.space.small,mb:it.space.small,display:"block","data-testid":"main-visible-items-heading",children:"Visible Columns"}),a.jsx(ix,{sensors:He,collisionDetection:w5,onDragEnd:Dt,modifiers:[O5],children:P(ht,ft,W,z)})]})}),!H&&a.jsxs(ZAe,{"data-testid":"available-items-container",className:"available-items-container",flexGrow:1,flexDirection:"column",children:[a.jsxs(mp,{children:[n&&a.jsxs(XAe,{id:"available-items-search-form",role:"search",autoComplete:"off",onSubmit:Lt,listsAreStacked:c,children:[a.jsx(ag,{"aria-label":n.areaLabel,placeholder:n.placeHolder,"data-testid":`${T}-search`,onChange:It,value:t}),a.jsx(lg,{"aria-hidden":!0,children:a.jsx(X,{type:Y.SymbolSearch,width:18,height:18,viewBox:"1 3 20 20",dataTestId:"symbol-search-icon"})})]}),a.jsx(ot,{id:_e,ml:it.space.small,mb:it.space.small,display:"block","data-testid":"main-items-heading",children:b?t?__("All Studies",{namespace:rS}):b:"Available Columns"}),a.jsx(ST,{children:a.jsxs(aa,{"data-testid":"item-container",className:"item-container","aria-labelledby":_e,children:[t===""?Ue.filter(ct=>!(u!=null&&u.includes(ct))).map(ct=>{const qt=m===ct;return a.jsx(sc,{"aria-label":`${Pd(ct)}`,width:`${ta}px`,"data-testid":"custom-overlay-container-item",onClick:()=>qt?ve(ct):Jt(ct),added:qt,children:a.jsx(gp,{item:ct,actionButton:a.jsx(Kn,{as:"div",variant:qt?cn.success:cn.add}),itemTitle:qt?g:void 0,closeButton:qt?a.jsx(Kn,{as:"div",variant:cn.close}):void 0})},ct)}):Ue.map(ct=>{const qt=m===ct;return a.jsx(sc,{"aria-label":`${Pd(ct)}`,width:`${ta}px`,"data-testid":"custom-overlay-container-item",onClick:()=>qt?ve(ct):Jt(ct),added:qt,children:a.jsx(gp,{item:ct,actionButton:a.jsx(Kn,{as:"div",variant:qt?cn.success:cn.add}),itemTitle:qt?g:void 0,closeButton:qt?a.jsx(Kn,{as:"div",variant:cn.close}):void 0})},ct)}),!Ue.length&&a.jsx(ot,{"data-testid":"no-result-message",color:"text.disabled",mr:it.space.xxSmall,mb:it.space.small,display:"inline-flex",children:__(ns,{namespace:rS})})]})})]}),!t&&a.jsx(g_,{children:d==null?void 0:d.map(ct=>a.jsxs("div",{children:[a.jsx(zAe,{children:a.jsx($o,{ariaLabel:ct.categoryName,isExpandedDown:yt[ct.categoryName],onClick:()=>{jt({...yt,[ct.categoryName]:!yt[ct.categoryName]})},children:a.jsx(ot,{id:_e+"-"+ct.categoryName,display:"block",children:__(ct.categoryName,{namespace:rS})})})}),yt[ct.categoryName]&&a.jsx(mp,{children:a.jsx(ST,{children:a.jsx(aa,{className:"item-container","aria-labelledby":_e+"-"+ct.categoryName,children:ct.items.map(qt=>{const Q=m===qt;return a.jsx(sc,{"aria-label":`${Pd(qt)}`,width:`${ta}px`,"data-testid":"custom-overlay-container-item",onClick:()=>Q?ve(qt):Jt(qt),added:Q,children:a.jsx(gp,{item:qt,actionButton:a.jsx(Kn,{as:"div",variant:Q?cn.success:cn.add}),itemTitle:Q?g:void 0,closeButton:Q?a.jsx(Kn,{as:"div",variant:cn.close}):void 0})},qt)})})})})]},ct.categoryName))})]})]}),!F&&a.jsx(S_,{"aria-label":"Reset visible columns",variant:Pe.secondary,onClick:p,customizableListName:T,isTradePageOpen:E,children:a.jsx(ot,{children:"Reset"})})]})},Uu=()=>{const e=j.useRef(!1);return Cn(()=>{e.current=!0}),e.current},Su=e=>{const{item:t,onClick:s,isStudyItem:n,isDraggable:r=!0,actionButton:o,settingsButton:i,role:l,itemTitle:c}=e,{attributes:d,listeners:u,setNodeRef:h,transform:p,transition:m,isDragging:g}=k5({id:e.id,disabled:!r}),S={transform:M5.Transform.toString(p),transition:m},T=j.useRef(g),y=Uu();return j.useEffect(()=>{y&&g&&p&&(p.x!==0||p.y!==0)&&(T.current=!0)},[g,p]),a.jsx(sc,{as:t===me.PRICE||t===me.VOLUME?"div":void 0,ref:h,style:S,...u,...d,role:l,"data-testid":"custom-overlay-container-item","aria-label":`${Pd(t)}`,width:`${ta}px`,onClick:()=>{!T.current&&s(t),T.current=!1},$isStudyItem:n,children:a.jsx(gp,{itemTitle:c,item:t,actionButton:o,isDragging:g,showDragHandle:r,settingsButton:i})})},tve=({customizableTableName:e,topOffset:t,isOpen:s,onClose:n,filterVisibleItems:r,visibleItems:o,availableItems:i,resetItems:l,setItems:c,isTradePageOpen:d,additionalCustomizationItem:u=null})=>{const h=m=>{const g=o.indexOf(m),S=[...o];S.splice(g,1),c(S,`Remove ${Rm(m)} item`)},p=(m,g,S)=>a.jsx(ST,{children:a.jsxs(aa,{className:"visible-item-container","data-testid":"visibleItems",id:"visibleItems","aria-labelledby":g,children:[u,a.jsx(Qd,{items:m,strategy:Zd,children:m.map((T,y)=>a.jsx(Su,{id:T,item:T,onClick:b=>S(b,y),actionButton:a.jsx(Kn,{as:"div",variant:cn.remove})},T))})]})});return a.jsx(gg,{customizableListName:e,topOffset:t,isOpen:s,onClose:n,filterVisibleItems:r,visibleItems:o,availableItems:i,resetItems:l,setItems:c,isTradePageOpen:d,removeItem:h,renderItems:p})},sve=j.memo(tve),nve=(e,t)=>{const s=e.columns[t.customizableTableName],n=h8(s,t.customizableTableName);return{visibleItems:s,availableItems:n,isTradePageOpen:!!mt(e),isPortfolioOpened:$m(e),isSidebarOpened:K1(e),isWatchlistExpanded:y0(e),isPositionExpanded:mt(e)===null&&!y0(e)}},rve=(e,t)=>({resetItems(){e(n_(t.customizableTableName))},setItems(s,n){e(Ll(t.customizableTableName,s,n))}}),Vu=se(nve,rve,null,{areStatePropsEqual:fs})(sve),iC=(e,t)=>{if(t===void 0||t.length===0)return e>0?"buy":"sell";const s=t.some(r=>r.direction===pe.Buy),n=t.some(r=>r.direction===pe.Sell);return s&&n?"multi":s?"buy":"sell"},Si=({status:e,legs:t,shouldAlert:s,quantity:n,className:r})=>{switch(iC(n,t)){case"multi":if(e===de.Draft)return a.jsx(X,{type:Y.BuySellDraft,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"buy-sell-draft-icon",className:r});if(e===de.Pending)return a.jsx(X,{type:Y.BuySellPending,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"buy-sell-pending-icon",className:r});break;case"buy":if(e===de.Draft)return a.jsx(X,{type:Y.BuyDraft,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"buy-draft-icon",className:r});if(e===de.Pending)return a.jsx(X,{type:Y.BuyPending,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"buy-pending-icon",className:r});if(e===de.Completed)return a.jsx(X,{type:Y.BuyCompleted,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"buy-completed-icon",className:r});break;case"sell":if(e===de.Draft)return a.jsx(X,{type:Y.SellDraft,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"sell-draft-icon",className:r});if(e===de.Pending)return a.jsx(X,{type:Y.SellPending,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"sell-pending-icon",className:r});if(e===de.Completed)return a.jsx(X,{type:Y.SellCompleted,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"sell-completed-icon",className:r});break}return e===de.Cancelled||e===de.Expired?a.jsx(X,{type:Y.Canceled,width:14,height:14,viewBox:"2 2 20 20",className:r,dataTestId:"canceled-icon"}):e===de.Rejected?a.jsx(X,{type:Y.Rejected,width:14,height:14,viewBox:"2 2 20 20",className:r,dataTestId:"rejected-icon"}):null},ove=e=>e.reduce((t,{statusFlag:{status:s,quantity:n}})=>{const r=iC(n);return r===Oo.Buy?(s===de.Pending&&(t.workingLong=!0),s===de.Completed&&(t.positionLong=!0)):r===Oo.Sell&&(s===de.Pending&&(t.workingShort=!0),s===de.Completed&&(t.positionShort=!0)),t},{}),ave=(e,t="flag")=>{if(e.length===0)return null;const s=ove(e),{positionLong:n,positionShort:r,workingLong:o,workingShort:i}=s,l=Object.keys(s).length;return l===1||l===2&&!(n&&o||r&&i)?a.jsxs("div",{className:"flag-container",children:[n&&a.jsx(X,{type:Y.BuyCompleted,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"buy-completed-icon",className:t}),r&&a.jsx(X,{type:Y.SellCompleted,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"sell-completed-icon",className:t}),o&&a.jsx(X,{type:Y.BuyPending,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"buy-pending-icon",className:t}),i&&a.jsx(X,{type:Y.SellPending,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"sell-pending-icon",className:t})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flag-container",children:[n&&a.jsx(X,{type:Y.BuyCompleted,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"buy-completed-icon",className:t}),r&&a.jsx(X,{type:Y.SellCompleted,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"sell-completed-icon",className:t})]}),a.jsxs("div",{className:"flag-container",children:[o&&a.jsx(X,{type:Y.BuyPending,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"buy-pending-icon",className:t}),i&&a.jsx(X,{type:Y.SellPending,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"sell-pending-icon",className:t})]})]})},ive=e=>{switch(e){case lo.BEFORE_MARKET:return` ${__("Before Market")}`;case lo.DURING_MARKET:return` ${__("During Market")}`;case lo.AFTER_MARKET:return` ${__("After Market")}`;default:return""}},lve=e=>{const t=e.estimatedEps?` $${Ea.format(e.estimatedEps)} ${__("(est)")}`:"",s=e.actualEps?` $${Ea.format(e.actualEps)} ${__("(actual)")}`:"",n=e.time?` ${__("on")} ${xm(e.time)}`:"",r=ive(e.estimatedTime);return`${__("Earnings")}:${t}${s}${n}${r}`},cve=e=>!di(e)||e!==Xn.BID&&e!==Xn.ASK,Nn=Tm(c1,fs),gA=e=>{const t=e===void 0?void 0:e();return{current:t===void 0?null:t}};class Wu extends j.PureComponent{constructor(){super(...arguments);R(this,"portalRef",gA())}componentDidMount(){const s=this.props;this.portalRef=gA(()=>{let n=document.getElementById(s.portalId);return n===null&&(n=document.createElement("div"),n.id=s.portalId,document.body.appendChild(n)),n}),this.setState({})}render(){const s=this.props;return s.shouldRenderToPortal===!0&&this.portalRef.current?Cu.createPortal(s.children,this.portalRef.current):s.children}}const dve=e=>a.jsx("table",{children:a.jsx("thead",{children:a.jsx("tr",{children:e.children})})}),uve=e=>a.jsx(a.Fragment,{children:e.children}),b_=e=>a.jsx(Sl,{draggableId:e.draggableId,index:e.index,disableInteractiveElementBlocking:e.disableInteractiveElementBlocking,isDragDisabled:e.isDragDisabled,children:(t,s)=>{const{isDragging:n}=s,r=n?dve:uve,o=n?{}:{onClick:e.onClick};return a.jsx(Wu,{portalId:"options-chain-pairs-drag",shouldRenderToPortal:n,children:a.jsx(r,{children:a.jsxs("th",{className:Te(e.className,"spread-pairs-column__item",n&&"isDragging"),id:e.draggableId,ref:t.innerRef,...o,...t.draggableProps,...t.dragHandleProps,children:[a.jsx(Da,{onResize:i=>{e.onItemResize&&e.onItemResize(i.offsetWidth)}}),a.jsxs("div",{className:"value","aria-label":e.title,children:[a.jsx(X,{type:Y.Move,width:12,height:6,viewBox:"5 8 12 8",className:"move-icon",dataTestId:"move-icon"}),a.jsx("span",{"aria-hidden":!0,children:e.children})]})]},e.draggableId)})})}}),lC=e=>e===void 0?"":e.replace(/ %/gi," %").replace(/ \$/gi," $"),Mc=()=>window.NONCE_ID;class E_ extends j.PureComponent{render(){const t=this.props;return t.columns.map((s,n)=>a.jsx(Sl,{draggableId:`${TT.HEADER}-${s}`,index:n,children:(r,o)=>a.jsx(mC,{column:s,tableId:t.tableId,onClick:t.onColumnClick,snapshot:o,provided:r,columnSort:t.columnSort,isDraggable:!0,showDragHandle:t.drawerOpen,sortable:t.sortable},s)},`${TT.HEADER}-${s}`))}}const Gu=e=>{const{cssClass:t,onClick:s,ariaLabel:n,dataTestid:r,analyticsAction:o}=e,i=l=>{s(l),Ye({category:Ve.ColumnCustomization,action:o,label:ks.OpenMenu})};return a.jsx("button",{className:t,tabIndex:0,"data-testid":r,"aria-label":n,onClick:i,children:a.jsx(X,{type:Y.Settings,width:14,height:14,viewBox:"2 2 21 21",dataTestId:"settings-icon"})})},SA=A.span`
  ${({theme:e})=>e.mixins.ellipsis};
  display: block;
  width: 15rem;
  text-align: left;
`,mn=(e,t,s)=>{const n=t===Ht?{"aria-label":"No Value"}:t==="***"?{"aria-label":"***"}:{};return a.jsx("span",{"data-testid":"column-value-wrapper",...n,role:"text",className:s,children:a.jsx("span",{"data-testid":"column-value","aria-hidden":t===Ht||t==="***",children:t})})},hve=e=>{const{privacyModeEnabled:t,value:s,column:n,isNotTrend:r,showWhenPrivacyMode:o,showFractionalPricing:i,fractionalType:l,showDoubleTickForFractionalPricing:c}=e,{MARK:d,MARK_CHANGE:u,MARK_PERCENT_CHANGE:h,VOLUME:p,BID:m,ASK:g,HIGH52:S,LOW52:T,RHO:y,LAST:b,LOW:E,HIGH:v,DELTA:D,GAMMA:w,THETA:N,VEGA:L,BORROW_STATUS:P,BETA:F,CLOSE:O,OPEN:H,INTRINSIC:C,EXTRINSIC:M,PE:q,EPS:W,SHARES:z,PUT_CALL_RATIO:re,MARKET_CAP:ae,RETURN_ON_RISK:Me,RETURN_ON_CAPITAL:he,SHORT_SALE_BORROWING_RATE:U,DIV_AMOUNT:Se,OPEN_INT:be}=V;switch(n){case"expiration":case"upcomingEarningDate":case"exDividendDate":{const le=s;return mn(n,ti(le),Zn(n,le))}case"payableDate":{const le=s;return mn(n,w6(le),Zn(n,le))}case"plOverallPercent":case"plYtdPercent":case"plDayPercent":{const le=s;return mn(n,gr(le,t),Zn(n,le))}case"yield":case Me:case he:case"impliedVolatility":{const le=s;return mn(n,gr(le),Zn(n,le))}case"percentileIV":return mn(n,Jh(s));case h:{const le=s;return mn(n,R1(le),Zn(n,le))}case"marketMakerMove":return mn(n,xr(s,!1,"±"));case"description":{const le=s;return a.jsx("span",{children:le!==void 0?a.jsx(SA,{"data-testid":"column-value",title:le,"aria-label":n,role:"text",children:le}):a.jsx("span",{"aria-label":`${n} No Value`,role:"text",children:a.jsx(SA,{"aria-hidden":!0,children:Ht})})})}case U:case P:{let le=s;return le=le==="-"?void 0:le,mn(n,A6(le))}case u:case O:case H:{const le=s;return mn(n,i?Fs(le,l,c):xr(le,!1),Zn(n,le))}case re:case q:case W:case C:case y:case D:case w:case N:case M:case L:case F:{const le=s;return mn(n,ur(le,!1),Zn(n,le))}case Se:return mn(n,xr(s,!1));case"openPrice":{const le=s;let We;return i?We=Fs(le,l,c,t):We=le!==void 0&&le<1?Sn(le,t):ur(le,t),mn(n,We,Zn(n,le))}case p:case z:case be:{const le=s;return mn(n,ep(le),Zn(n,le))}case"quantity":{const le=s;return mn(n,wl({quantity:le,privacyModeEnabled:t}),Zn(n,le))}case d:case m:case g:case E:case v:case b:{const le=s;if(r)return mn(n,ur(le!==void 0?le.value:void 0,!1));{const We=le!==void 0&&le.value!==void 0?{}:{ariaLabel:"No Value",role:"text"};return a.jsx(ci,{...We,ariaHidden:!(le!==void 0&&le.value!==void 0),value:le!==void 0?le.value:void 0,trend:le!==void 0?le.trend:at.Neutral,renderer:i?He=>Fs(He,l,c):e.showEightDecimalFraction?Dx:xr})}}case S:case T:{const le=s;if(r)return mn(n,xr(le!==void 0?le.value:void 0,!1));{const We=He=>{if(He!==void 0&&He.value!==void 0&&He.trend!==void 0)switch(He.trend){case at.Positive:return`${He.value} New 52 week high`;case at.Negative:return`${He.value} New 52 week low`;default:return`${He.value}`}return"No Value"};return a.jsx(ci,{ariaLabel:We(le),ariaHidden:!0,role:"text",value:le!==void 0?le.value:void 0,trend:le!==void 0?le.trend:at.Neutral,renderer:He=>xr(He,!1)})}}case"daysToExpiration":{const le=t&&!o,We=s;return mn(n,Sn(We,le),Zn(n,We))}case"account":return mn(n,s??Ht);case"betaWeightingsSpx":{const le=ur(s,!1)??Ht;return mn(n,le,Zn(n,le))}case ae:{const le=Rx(s);return mn(n,le,Zn(n,le))}default:{const le=s;return a.jsx(tr,{className:Zn(n,le),value:le,showWhenPrivacyMode:o,privacyModeEnabled:t})}}},pve=(e,t)=>{const{showFractionalPricing:s,fractionalType:n}=pn(e,(t==null?void 0:t.symbol)??""),r=e.instruments.get(t.symbol??""),o=(r==null?void 0:r.rootSymbol)??"";return{privacyModeEnabled:Ma(e),showFractionalPricing:s,fractionalType:n,instrumentType:r==null?void 0:r.type,showDoubleTickForFractionalPricing:Vs(o,r==null?void 0:r.type)}},Yu=se(pve)(hve);class cC extends j.Component{constructor(s){super(s);R(this,"SAMPLE_LIMIT",0);R(this,"THROTTLE_TIMER",1e4);R(this,"ref",B.createRef());R(this,"setMinWidth",()=>{if(this.ref.current===null)return;const s=this.ref.current.querySelector("span");if(s===null)return;const n=s.offsetWidth;n>this.state.minWidth?this.setState({minWidth:n,sampleCount:this.state.sampleCount+1}):this.setState({sampleCount:this.state.sampleCount+1})});R(this,"getPaddings",()=>{const s="1.2rem",n=this.props.isLastColumn===!0?"4rem":"1.2rem";return{LEFT_PADDING:s,RIGHT_PADDING:n}});this.state={minWidth:0,sampleCount:0},this.setMinWidth=xa(this.setMinWidth,this.THROTTLE_TIMER)}getSnapshotBeforeUpdate(s){const n=this.props.isDragging&&!s.isDragging;if(this.ref.current&&!n)return{width:this.ref.current.getBoundingClientRect().width}}componentDidUpdate(s,n,r){var i,l;const o=this.ref;o.current&&((i=o.current)==null?void 0:i.style.width)!==r.width.toString()&&(o.current.style.width=`${r.width}px`),this.state.sampleCount<this.SAMPLE_LIMIT&&this.setMinWidth(),!this.props.isDragging&&((l=o.current)==null||l.style.removeProperty("width"))}render(){const{className:s,columnKey:n,isDragging:r,showWhenPrivacyMode:o,value:i,isNotTrend:l}=this.props,{LEFT_PADDING:c,RIGHT_PADDING:d}=this.getPaddings();return a.jsx("td",{"data-testid":"cell-td",ref:this.ref,className:Te(s,r&&"isDragging"),"data-column":n,style:{minWidth:`calc(${this.state.minWidth}px + ${c} + ${d})`},children:a.jsx(Yu,{column:n,value:i,showWhenPrivacyMode:o,isNotTrend:l})},n)}}const mve=({columns:e,cash:t,index:s})=>a.jsxs("tr",{className:Te("row","position",s%2===0?"even":"odd"),children:[a.jsx("th",{className:Te("row-header","stick","left","cell"),children:a.jsx("div",{className:"center-vertically not-expandable cash",children:__("Cash")})}),e.map((n,r)=>{const o=e.length,i=r===o-1;return a.jsx(cC,{className:"data align-right cell",columnKey:n,isDragging:!1,value:n==="openCost"||n==="netLiquidity"?t:void 0,isLastColumn:i},n)})]}),gve=e=>{const t=e.account.selected!==void 0?e.account.statements.get(e.account.selected.code):e.account.statement;return{cash:t!==void 0?t.cashAndSweep:void 0}},Sve=se(gve)(mve);class A_ extends j.Component{constructor(s){super(s);R(this,"SAMPLE_LIMIT",0);R(this,"THROTTLE_TIMER",1e4);R(this,"ref",B.createRef());R(this,"setMinWidth",()=>{if(this.ref.current===null)return;const s=this.ref.current.querySelector("span");if(s===null)return;const n=s.offsetWidth;n>this.state.minWidth?this.setState({minWidth:n,sampleCount:this.state.sampleCount+1}):this.setState({sampleCount:this.state.sampleCount+1})});R(this,"getPaddings",()=>{const s="1.2rem",n=this.props.isLastColumn===!0?"4rem":"1.2rem";return{LEFT_PADDING:s,RIGHT_PADDING:n}});this.state={minWidth:0,sampleCount:0},this.setMinWidth=xa(this.setMinWidth,this.THROTTLE_TIMER)}getSnapshotBeforeUpdate(s){const n=this.props.isDragging&&!s.isDragging;if(this.ref.current&&!n)return{width:this.ref.current.getBoundingClientRect().width}}componentDidUpdate(s,n,r){var i;const o=this.ref;o.current&&r&&o.current.style.width!==r.width.toString()&&(o.current.style.width=`${r.width}px`),this.state.sampleCount<this.SAMPLE_LIMIT&&this.setMinWidth(),!this.props.isDragging&&((i=o.current)==null||i.style.removeProperty("width"))}render(){const{className:s,column:n,isDragging:r,showWhenPrivacyMode:o,value:i,isNotTrend:l,symbol:c}=this.props,{LEFT_PADDING:d,RIGHT_PADDING:u}=this.getPaddings();return a.jsx("td",{ref:this.ref,className:Te(s,r&&"isDragging"),"data-column":n.id,"data-testid":"cell",style:{minWidth:`calc(${this.state.minWidth}px + ${d} + ${u})`},children:a.jsx(Yu,{column:n.id,value:i,showWhenPrivacyMode:o,isNotTrend:l,symbol:c})},n.id)}}const fve=[k.STOCK,k.INDEX,k.PRODUCT,k.ETF],Tve=(e,{column:t,reducerKey:s,isParentRow:n,isSpreadGrouping:r})=>{var o;if(s===void 0)return{value:void 0};switch(t.domain){case or.Instruments:{const i=e[t.domain].get(s);return t.id==="daysToExpiration"&&n&&i!==void 0&&fve.includes(i.type)?{value:iy(FO(e),s)}:{value:i==null?void 0:i[t.id]}}case or.Positions:{const l=(r?Nu(e):Zr(e)).get(s);return t.id==="account"&&l!==void 0?{value:Bd(l.account)(e).description}:{value:l==null?void 0:l[t.id]}}case or.Quotes:{const i=e[t.domain].get(s),l=b8(t.id);return{value:i==null?void 0:i[l]}}case or.WorkingOrders:{const i=parseInt(s),l=e[t.domain].find(d=>d.id===i),c=t.id;return l?c==="account"?{value:Bd(l.accountCode)(e).description}:{value:l==null?void 0:l[c]}:{value:void 0}}case or.AggregatedPositions:{const i=e[t.domain].get(s);if(t.id==="account"&&n){const l=ZO(s)(e),c=(o=l[0])==null?void 0:o.account,d=c&&l.every(u=>u.account===c);return{value:l.length===1||d?Bd(l[0].account)(e).description:Ht}}return{value:i==null?void 0:i[t.id]}}default:return{value:void 0}}},qd=se(Tve)(A_),yve=(e,{column:t,positionGroupItemId:s,account:n})=>{var r;if(t.domain===or.Positions){const o=Fp(s)(e);return t.id==="account"?{value:Bd(n)(e).description}:{value:(r=o==null?void 0:o.spreadGroupingAggregation)==null?void 0:r[t.id]}}else if(t.domain===or.Quotes&&(V.MARK===t.id||V.MARK_CHANGE===t.id)){const o=Fp(s)(e);if((o==null?void 0:o.title)===nt.STOCK||(o==null?void 0:o.title)===nt.FUTURE||(o==null?void 0:o.title)===nt.SINGLE)return{value:void 0};const i=o==null?void 0:o.spreadGroupingAggregation;return t.id==="mark"?{value:i==null?void 0:i.trendingMark}:{value:i==null?void 0:i[t.id]}}return{value:void 0}},Cve=se(yve)(A_),bve=e=>{const t=p=>{p.preventDefault(),e.onRowClick()},{columns:s,title:n,rowIndex:r,positionGroupItemId:o,account:i,symbol:l,highlighted:c,index:d,startIndex:u,endIndex:h}=e;return a.jsx("tr",{onClick:t,className:Te("trade-row row positions-row",`position${c?" highlighted":""}`,d%2===0?"even":"odd",d===u?"top-border":"",d===h?"bottom-border":""),"data-testid":`spread-grouping-header-${l}-${d}`,children:[a.jsx("td",{className:"row-header stick left",children:a.jsxs("div",{className:"row-header-wrapper",children:[a.jsx("div",{className:"indent"}),a.jsx("label",{"data-testid":"cell",className:"cell value",htmlFor:r.toString(),children:a.jsx("span",{"aria-hidden":"true",children:__(c3(n))})})]})},r.toString()),...s.map((p,m)=>{const g=m===s.length-1,S=en[p];return a.jsx(Cve,{positionGroupItemId:o,account:i,className:Te("data","align-right","cell"),column:S,isDragging:!1,isLastColumn:g,symbol:l??""},p)})]})},Eve=B.memo(bve),Ave=(e,{rootSymbol:t,positionGroupItemId:s})=>{const n=Fp(s)(e);return{positionGroupItemId:s,symbol:t,title:(n==null?void 0:n.title)??"",account:(n==null?void 0:n.account)??""}},vve=se(Ave,null,null,{areStatePropsEqual:fs})(Eve),Sg=e=>{const{instrument:t}=e;switch(t.type){case k.OPTION:{const s=t.settlementType===wo.AM?t.expirationForAM:t.expiration,n=Ci(s),r=t.daysToExpiration,o=t.underlyingSymbol!==t.rootSymbol?t.underlyingDisplaySymbol+" ":"",i=__("d");return`${o}${n} (${r}${i})`}default:return t.displaySymbol!==""?t.displaySymbol:t.symbol}},v_=e=>{const{instrument:t}=e;switch(t.type){case k.OPTION:{const s=Ci(t.expiration),n=t.daysToExpiration,r=t.strike,o=t.underlyingSymbol!==t.rootSymbol?Ns(t.underlyingDisplaySymbol):Ns(t.rootSymbol),i=__("days"),l=t.optionType===dt.Call?__("Calls"):__("Puts");return`${o} ${s}(${n}${i}) ${r} ${l}`}default:return t.displaySymbol!==""?Ns(t.displaySymbol):Ns(t.symbol)}},I_=e=>e?"("+__("edit")+") ":"",x_=e=>e!==void 0?rD(e):void 0,w_=(e,t,s,n,r)=>{const o=e||t||NaN;return isNaN(o)?"":`@${Vn(s,o,n,r)}`},O_=e=>{const t=e||ne.NONE;return t===ne.NONE?"":t===ne.MARKET||t===ne.MOC?` @ ${__(t)}`:`${__(t)}`},R_=(e,t,s,n,r)=>{const o=e||t||NaN;return isNaN(o)?void 0:Vn(s,o,n,r)},Ive=(e,t,s,n,r)=>{if(e===void 0||t===void 0||s===void 0||n===void 0)return"";const o=`${__(cc(n))} ${_6(r)}`;return n===nt.FUTURES_CALENDAR?o:`${Ns(e)} ${__(cc(n))} (${_x(s,!0)}) ${Nx(t)}`},xve=(e,t,s,n)=>{if(e===void 0||t===void 0||s===void 0)return"";const r=`${__(cc(s))} ${L6(n)}`;return s===nt.FUTURES_CALENDAR?r:`${__(cc(s))} (${_x(t,!1)}) ${Nx(e)}`},D_=(e,t="",s="",n="",r="",o="")=>{if(s in Nm&&(s=__(nu(s))),vw(e))return` ${[Dy(t)??"",s].join(" ")}`;const i=[n,r,o,s].filter(l=>l!=="");return i.length>0?` ${i.join(" ")}`:""},L_=(e,t,s,n,r,o)=>e?xve(t,s,n,o):r===void 0?"":Sg({instrument:r}),wve=(e,t,s,n,r,o,i)=>e?Ive(t,s,n,r,i):v_({instrument:o}),fg=(e,t)=>e||t.type!==k.OPTION?"":`${t.strike} ${__(t.optionType)}`,N_=(e,t,s,n)=>{const{isMultiLeg:r,isEditing:o,quantity:i,legStrikes:l,legDaysToExpiration:c,spreadName:d,legs:u}=n,h=I_(o),p=wl({quantity:i,isDraft:t.status===de.Draft,privacyModeEnabled:s}),m=d===nt.FUTURES_CALENDAR?u.map(S=>S.symbol):[],g=L_(r,l,c,d,e,m);return[h,p," ",g].join("")},P_=(e,t,s,n)=>{const{isMultiLeg:r,price:o,priceType:i,activationPrice:l,tif:c,groupMarker:d}=n,u=fg(r,e),h=Vs(e.rootSymbol,e.type),p=x_(i),m=w_(o,p==null?void 0:p.price,t,s,h),g=O_(p==null?void 0:p.orderType),S=R_(l,p==null?void 0:p.activationPrice,t,s,h),T=D_(p==null?void 0:p.orderType,i,c,m,g,S),y=dc(d),b=d!==Ot.SINGLE?y:"",E=b.length!==0?` [${b}]`:"";return[" ",u,T,E].join("")},Ove=(e,t)=>e.type===k.OPTION&&t!==void 0&&t>0,Rve=(e,t,s,n,r,o)=>{const{isEditing:i,quantity:l,isMultiLeg:c,underlyingDisplaySymbol:d,legStrikes:u,legDaysToExpiration:h,spreadName:p,price:m,priceType:g,activationPrice:S,tif:T,groupMarker:y,legs:b}=o,E=I_(i),v=wl({quantity:l,isDraft:t.status===de.Draft,privacyModeEnabled:s}),D=p===nt.FUTURES_CALENDAR?b.map(W=>W.symbol):[],w=wve(c,d,u,h,p,e,D),N=x_(g),L=Vs(e.rootSymbol,e.type),P=w_(m,N==null?void 0:N.price,n,r,L),F=O_(N==null?void 0:N.orderType),O=R_(S,N==null?void 0:N.activationPrice,n,r,L),H=D_(N==null?void 0:N.orderType,g,T,P,F,O),C=Mae(y),M=y!==Ot.SINGLE?C:"",q=M.length!==0?` [${M}]`:"";return[E,v," ",w,H,q].join("")};var dC=(e=>(e.SelectableTradeProps="SelectableTradeProps",e.NotSelectableTradeProps="NotSelectableTradeProps",e))(dC||{});class Dve extends B.PureComponent{constructor(){super(...arguments);R(this,"onRowClick",s=>{s.preventDefault(),this.props.onRowClick()});R(this,"handleToggleCheckbox",s=>{const{isFromPositions:n,onlyWorking:r,trade:o,onCheckboxClick:i}=this.props,l=s.target;n!==void 0&&n&&r!==void 0&&r&&o.status===de.Pending&&i!==void 0&&l!==null&&l.className.includes("checkbox")?i(o,r,n):this.onRowClick(s)});R(this,"renderTradeRow",(s,n)=>{const{columns:r,instrument:o,trade:i,privacyModeEnabled:l,direction:c,showFractionalPricing:d,fractionalType:u,isSpreadGrouping:h,positionsSymbolInfo:p}=s,{quantity:m,symbol:g,legs:S,_hiddenFromTradeTable:T,inTheMoney:y}=s.positionColumnCell;if(T)return null;const b=i.status===de.Completed?0:1,E=i.status===de.Completed?"Filled":i.status===de.Pending?"Working":i.status,v=Rve(o,i,l,d,u,s.positionColumnCell),D=N_(o,i,l,s.positionColumnCell),w=P_(o,d,u,s.positionColumnCell),N=Ove(o,y),L=s.isFromPositions?N&&p.showITM:N;return a.jsx("tr",{onClick:this.handleToggleCheckbox,className:Te("trade-row row positions-row",i.status===de.Draft&&s.type==="SelectableTradeProps"&&s.checked===!0?"trade initiated":`position${!s.displayCheckboxes&&s.highlighted?" highlighted":""}`,s.index%2===0?"even":"odd",s.type==="NotSelectableTradeProps"&&s.index===s.startIndex?"top-border":"",s.type==="NotSelectableTradeProps"&&s.index===s.endIndex&&S.length===b?"bottom-border":""),children:[a.jsx("td",{className:Te("row-header left",s.isFromPositions?"stick":"stickyCell"),children:a.jsxs("div",{className:"row-header-wrapper",children:[n&&a.jsx("div",{className:"indent"}),s.displayCheckboxes?a.jsx("div",{className:Te("checkbox-container center",c),children:!s.isSecondaryTrade&&a.jsxs(a.Fragment,{children:[a.jsx("input",{id:jd(i),"aria-label":`${E} ${v}`,className:"checkbox-input",type:"checkbox",checked:s.checked,onChange:()=>""}),a.jsx("span",{"aria-hidden":!0,className:Te("checkbox",qw(this.props.theme)),onClick:this.handleToggleCheckbox})]})}):null,m!==void 0&&a.jsx("div",{className:"status-flag-wrapper",children:a.jsx(Si,{status:i.status,legs:S,quantity:m})}),g!==void 0&&g!==""&&a.jsxs("label",{"data-testid":"cell",className:Te("cell value",this.props.isFromPositions?"link":""),htmlFor:jd(i),children:[a.jsx("span",{"aria-hidden":"true",children:D}),a.jsx("span",{"aria-hidden":"true",children:w})]}),L&&a.jsx("span",{"data-testid":`in-the-money-${g}`,className:"cell value in-the-money",title:__("This position is in the money."),children:"ITM"})]})},jd(i)),...r.map((P,F)=>{const O=F===r.length-1,H=en[P].domain;if(i.status===de.Draft)return a.jsx("td",{"aria-hidden":!0,className:Te("data","align-right","cell")},P);if(H===or.Instruments||H===or.Quotes)return a.jsx(qd,{className:Te("data","align-right","cell"),column:en[P],reducerKey:g??"",isDragging:!1,isLastColumn:O,symbol:g??""},P);let C="",M=en[P];switch(i.status){case de.Completed:C=i.positionId;break;case de.Pending:C=i.orderId.toString(),M=E8(P)?{id:P,domain:or.WorkingOrders,title:M.title}:M;break}return a.jsx(qd,{className:Te("data","align-right","cell"),column:M,reducerKey:C,isDragging:!1,isLastColumn:O,symbol:g??"",isSpreadGrouping:h},P)})]})});R(this,"renderLegRow",(s,n,r)=>{const o=this.props.legInstruments.find(p=>p.symbol===s.symbol);if(o===void 0)return null;const i=wl({quantity:s.quantity,privacyModeEnabled:this.props.privacyModeEnabled}),l=Sg({instrument:o}),c=fg(!1,o),d=v_({instrument:o}),u=`${i} ${l} ${c}`,h=i+" "+d;return a.jsx("tr",{onClick:this.props.onRowClick,className:Te("trade-row row",s.status===de.Draft?"trade initiated":"position",this.props.index%2===0?"even":"odd",this.props.type==="NotSelectableTradeProps"&&this.props.index===this.props.endIndex&&r===this.props.positionColumnCell.legs.length-1?"bottom-border":""),children:[a.jsx("td",{className:Te("row-header left",this.props.isFromPositions?"stick":"stickyCell"),children:a.jsxs("div",{className:"center-vertically",children:[a.jsx("div",{className:"indent multileg"}),a.jsx(Si,{status:s.status,quantity:s.quantity}),s.symbol!==""&&a.jsx("div",{className:"cell value","aria-label":h,children:u})]})},`leg-${s.status}-${s.symbol}`),n.map(p=>{const m=en[p].domain;return m===or.Instruments||m===or.Quotes?a.jsx(qd,{className:Te("data","align-right","cell"),column:en[p],reducerKey:s.symbol??"",isDragging:!1,symbol:s.symbol??""},p):a.jsx(cC,{className:"data align-right cell",columnKey:p,isDragging:!1,value:void 0},p)})]},s.symbol)})}render(){const s=!this.props.displayCheckboxes,{trade:n}=this.props,{legs:r}=this.props.positionColumnCell;return a.jsxs(a.Fragment,{children:[this.renderTradeRow(this.props,s),(s||n.status===de.Pending)&&r!==void 0&&r.length>1&&r.map((o,i)=>this.renderLegRow({...o},this.props.columns,i))]})}}const Lve=hn(Dve),uC=e=>e.instruments,k_=e=>e.workingOrders,M_=e=>e.createTrade,$_=(e,t)=>t,j_=(e,t,s)=>s,B_=(e,t,s,n,r,o,i)=>{var c,d,u,h,p,m,g,S,T;let l=[];switch(o.status){case de.Completed:{const y=t.get(o.positionId);if(y===void 0)break;const b=e.get(y.symbol),E=(b==null?void 0:b.type)===k.OPTION?b.underlyingDisplaySymbol:b==null?void 0:b.displaySymbol;l=[];const v=y==null?void 0:y.symbol,D=y.inTheMoney;return{symbol:v,underlyingDisplaySymbol:E,quantity:y.quantity,isEditing:!1,legs:l,inTheMoney:D,isMultiLeg:!1}}case de.Pending:{const y=s.find(N=>N.id===o.orderId);if(y===void 0)break;const b=r??y.instrument.rootSymbol,E=(d=(c=n.trade.get(b))==null?void 0:c[0])==null?void 0:d.orders[0],v=e.get(y.instrument.symbol),D=(v==null?void 0:v.type)===k.OPTION?v.underlyingDisplaySymbol:v==null?void 0:v.displaySymbol;let w="";return y.compositeSymbol!==void 0?w=y==null?void 0:y.compositeSymbol:((u=y.legs)==null?void 0:u.length)===1?w=(h=y==null?void 0:y.instrument)==null?void 0:h.symbol:w=(p=y==null?void 0:y.instrument)==null?void 0:p.rootSymbol,l=(y.legs??[]).map(N=>({...N,status:de.Pending})),{symbol:w,underlyingDisplaySymbol:D,quantity:y.quantity,priceType:y.priceType,price:y.price,activationPrice:y.activationPrice,legs:l,isMultiLeg:(y.legs??[]).length>1,legStrikes:(m=y.legs)==null?void 0:m.reduce((N,L)=>{const P=e.get(L.symbol);return P!==void 0&&P.type===k.OPTION&&N.push(P.strike),N},[]),legDaysToExpiration:(g=y.legs)==null?void 0:g.reduce((N,L)=>{const P=e.get(L.symbol);return P!==void 0&&P.type===k.OPTION&&N.push(P.daysToExpiration),N},[]),tif:y.tif,spreadName:y.spreadName,side:y.direction,isEditing:E!==void 0?E.id===o.orderId:!1,groupMarker:y.groupMarker,_hiddenFromTradeTable:y._hiddenFromTradeTable}}case de.Draft:{const y=i??0,b=r!==null?(S=n.trade.get(r))==null?void 0:S[0]:void 0,E=b==null?void 0:b.orders[y],v=r!==null?n.orderConfirmation.get(r):void 0;if(E===void 0||b===void 0||v===void 0||E.legs.length===0)break;const D=e.get(E.legs[0].symbol),w=D?D.type===k.OPTION?D.underlyingDisplaySymbol:D.displaySymbol:void 0;return l=(E.legs||[]).map(N=>({...N,status:o.status})),{symbol:(T=E==null?void 0:E.legs[0])==null?void 0:T.symbol,price:E.price,activationPrice:E.activationPrice,quantity:E.quantity,priceType:E.priceType,tif:E.tif,isEditing:E.id!==void 0,legs:l,isMultiLeg:E.legs.length>1,legStrikes:E.legs.reduce((N,L)=>{const P=e.get(L.symbol);return P!==void 0&&P.type===k.OPTION&&N.push(P.strike),N},[]),legDaysToExpiration:E.legs.reduce((N,L)=>{const P=e.get(L.symbol);return P!==void 0&&P.type===k.OPTION&&N.push(P.daysToExpiration),N},[]),spreadName:E.spreadName,groupMarker:Oc(b.contingencies),underlyingDisplaySymbol:w||void 0}}}return{isEditing:!1,legs:l,symbol:""}},_ve=x(uC,Zr,k_,M_,Os,$_,j_,B_),Nve=x(uC,Nu,k_,M_,mt,$_,j_,B_),F_={displaySymbol:"",symbol:"",rootSymbol:"",type:k.STOCK,fractionalType:Bs.x10,tradeable:!1,composite:!1,hasOptions:!1,hasTradableOptions:!1,description:"",sourceType:Jn.UNDEFINED},Pve=(e,t)=>t,kve=x(Pve,uC,(e,t)=>e.map(({symbol:s})=>t.get(s,void 0)).filter(Ut)),Mve=Nn(kve,e=>e),H_=Nn(_ve,e=>e),$ve=Nn(Nve,e=>e),jve=(e,t)=>{const s=t.isSpreadGrouping?$ve(e,t.trade,t.secondaryTradeIndex):H_(e,t.trade,t.secondaryTradeIndex),n=t.isFromPositions!==void 0&&t.isFromPositions&&t.onlyWorking!==void 0&&t.onlyWorking&&t.trade.status===de.Pending?{checked:e.selected.workingOrders[t.trade.orderId]}:{},{showFractionalPricing:r,fractionalType:o}=pn(e,s.symbol!==void 0?s.symbol:"");return{positionColumnCell:s,privacyModeEnabled:Ma(e),instrument:e.instruments.get(s.symbol!==void 0?s.symbol:"",F_),legInstruments:Mve(e,s.legs),...n,showFractionalPricing:r,fractionalType:o,positionsSymbolInfo:sR(e)}},Bve=e=>({onCheckboxClick(t,s,n){n===void 0||!n||s===void 0||!s||t===void 0||t.status!==de.Pending||e(Hy(t.orderId))}}),U_=se(jve,Bve,null,{areStatePropsEqual:fs})(Lve),V_=(e,t,s,n,r,o,i,l)=>{const c={key:jd(e),trade:e,onRowClick:n,columns:s,highlighted:t,type:dC.NotSelectableTradeProps,index:r%2===0?o+1:o,startIndex:r%2===0?1:0,endIndex:r%2===0?i:i-1,isFromPositions:!0,isSpreadGrouping:l};return a.jsx(U_,{...c})},Fve=({trades:e,columns:t,highlighted:s,onRowClick:n,symbolIndex:r,rowIndex:o,spreadGroupingLength:i})=>a.jsx(a.Fragment,{children:e.map((l,c)=>V_(l,s,t,n,r,o+c,i,!0))}),Hve=j.memo(Fve),Uve=(e,{positionGroupItemId:t})=>{const s=Fp(t)(e);return{trades:((s==null?void 0:s.positions)||[]).map(r=>({status:de.Completed,symbol:r.symbol,account:r.account,positionId:r.id}))}},Vve=se(Uve,null,null,{areStatePropsEqual:fs})(Hve),hC=e=>x(kO,t=>t.get(e,[])),Wve=e=>x(t=>t.selectedAccount,Nu,(t,s)=>t==="COMBINED ACCOUNT"?s.find(n=>n.symbol===e):s.find(n=>n.symbol===e&&n.account===t)),fA=e=>{if(e!==void 0){if(e>0)return"positive";if(e<0)return"negative"}};class Gve extends B.PureComponent{constructor(){super(...arguments);R(this,"getRowHeaderId",()=>`${this.props.rootSymbol}-row-header`);R(this,"renderMarks",()=>{const{condensed:s,trendingMark:n,markChange:r,tableIsSmall:o,showFractionalPricing:i,fractionalType:l,showDoubleTickForFractionalPricing:c,positionsSymbolInfo:d,rootSymbol:u}=this.props,h=this.props[V.MARK_PERCENT_CHANGE],p=d.showMark,m=d.showMarkChangeDollar,g=d.showMarkChangePercentage,S=a.jsxs(a.Fragment,{children:[n!==void 0&&p&&a.jsx(ci,{value:n.value,trend:n.trend,renderer:i?T=>Fs(T,l,c):T=>xr(T)}),m?a.jsx("span",{className:Te("mark-change",fA(r)),"data-testid":`symbolinfo-mark-change-${u}`,children:Vn(i,r,l,c)}):null,g?a.jsx("span",{className:Te("mark-change-percentage",fA(r)),"data-testid":`symbolinfo-mark-change-percentage-${u}`,children:R1(h)}):null]});return s||o?a.jsx("div",{className:"condensed",children:S}):a.jsx(a.Fragment,{children:S})});R(this,"renderQuantity",()=>{const{condensed:s,quantity:n,privacyModeEnabled:r,tableIsSmall:o,positionsSymbolInfo:i,rootSymbol:l}=this.props;return i.showQty?a.jsx("span",{className:Te("quantity",s||o?"condensed":void 0),"data-testid":`symbolinfo-quantity-${l}`,"aria-hidden":!0,children:wl({quantity:n,privacyModeEnabled:r})}):null})}render(){const{rootSymbol:s,expandable:n,displaySymbol:r,isSymbolSelected:o,tableIsSmall:i,isExpanded:l,isInTheMoney:c,handleSelect:d,handleCheckBoxClick:u,handleKeyPress:h,positionColumnRef:p,description:m,positionsSymbolInfo:g}=this.props,S=r!==void 0&&r!==""?r:s,T=Ns(r!==void 0&&r!==""?r:s);return a.jsx("th",{scope:"row",className:"row-header stick left cell",children:a.jsx("div",{role:"none",id:this.getRowHeaderId(),"data-testid":this.getRowHeaderId(),className:"root-symbol",onKeyPress:h,children:a.jsxs("div",{className:"center-vertically",children:[n&&a.jsx("input",{"aria-label":`Show ${Ns(s)} trades`,type:"checkbox",id:`position-${s}`,className:"checkbox-hide check-box",onChange:u,checked:l}),n&&a.jsx("label",{"aria-hidden":!0,htmlFor:`position-${s}`,"data-testid":`position-expander-${s}`,className:"expander","data-expanded":l,children:a.jsx(X,{type:Y.ChevronDownCircle,width:16,height:16,viewBox:"2 2 20 20",fill:l?"action.focus":"icon.primary",dataTestId:"chevron-down-circle-icon"})}),a.jsx("button",{tabIndex:-1,id:`${this.props.rootSymbol}-link`,className:Te("value ","link",n?"":"not-expandable"),onClick:d,ref:p,children:a.jsxs("div",{className:Te("position-column",(o||i)&&"position-column_two-rows"),children:[a.jsxs("div",{className:"position-column__item",children:[a.jsx("p",{"data-symbol":s,className:"symbol","aria-label":T,title:m,children:S}),this.renderQuantity()]}),a.jsxs("div",{className:"position-column__item","aria-hidden":!0,children:[this.renderMarks(),c&&g.showITM&&a.jsx("span",{"data-testid":`in-the-money-${s}`,className:"in-the-money",title:__("There is a position that is in the money."),children:"ITM"})]})]})})]})})},s)}}const Yve=(e,t)=>{const{rootSymbol:s}=t,n=hC(s),r=Nn(n,u=>u),o=u=>x(r,h=>h.filter(p=>p.status===de.Completed&&p.symbol===u)),i=u=>x(r,h=>h.filter(p=>p.status!==de.Completed||p.symbol!==u)),l=o(s),c=i(s),d=Wve(s);return u=>{const{fractionalType:h,showFractionalPricing:p}=pn(u,s),m=l(u),g=u.quotes.get(s),S=u.instruments.get(s),T=c(u),y=m.length>1||T.length>0,b=d(u);return{privacyModeEnabled:Ma(u),condensed:mt(u)!==null,trendingMark:g==null?void 0:g[V.MARK_TREND],markPercentChange:g==null?void 0:g.markPercentChange,markChange:g==null?void 0:g.markChange,quantity:y||b==null?void 0:b.quantity,showFractionalPricing:p,fractionalType:h,description:S==null?void 0:S.description,showDoubleTickForFractionalPricing:Vs(s,S==null?void 0:S.type),positionsSymbolInfo:sR(u)}}},qve=se(Yve)(Gve);class Kve extends B.Component{constructor(s){super(s);R(this,"positionColumnRef",B.createRef());R(this,"getLinkId",()=>`${this.props.rootSymbol}-link`);R(this,"getCheckboxId",()=>this.props.rootSymbol);R(this,"renderRowChildren",()=>{const{highlighted:s,children:n,expandable:r,rootSymbol:o,spreadGrouping:i,spreadGroupingLength:l,positionGroupItemIdsToPositionsLength:c,flags:d,isExpanded:u}=this.props;if(!(r&&u))return null;if(i&&Js(Cs.SPREAD_GROUPING,d)){let p=0;return c.keySeq().toArray().reduce((m,g)=>(m.push(a.jsx(vve,{positionGroupItemId:g,rootSymbol:o,columns:this.props.columns,highlighted:s??!1,onRowClick:this.handleSelect,index:this.props.index%2===0?p+1:p,rowIndex:p,startIndex:this.props.index%2===0?1:0,endIndex:this.props.index%2===0?l:l-1},g)),p++,m.push(a.jsx(Vve,{positionGroupItemId:g,columns:this.props.columns,highlighted:s??!1,onRowClick:this.handleSelect,symbolIndex:this.props.index,rowIndex:p,spreadGroupingLength:l},g+"-bodyRows")),p+=c.get(g)??0,m),[])}else return n.map((p,m)=>V_(p,s,this.props.columns,()=>{this.handlePositionRowSelect(p)},this.props.index,m,n.length))});R(this,"renderColumn",(s,n)=>{const r=this.props,o=n===r.columns.length-1,i=en[s].domain;if(i===or.Instruments||i===or.Quotes)return a.jsx(qd,{className:Te("data","align-right","cell"),column:en[s],reducerKey:r.rootSymbol,isDragging:!1,isLastColumn:o,isParentRow:!0,symbol:r.rootSymbol},s);let l=en[s];return l=ew(s)?{id:s,domain:or.AggregatedPositions,title:l.title}:l,a.jsx(qd,{className:Te("data","align-right","cell"),column:l,reducerKey:r.rootSymbol,isDragging:!1,isLastColumn:o,isParentRow:!0,symbol:r.rootSymbol},s)});R(this,"handleCheckBoxClick",s=>{this.props.onExpandClick&&this.props.onExpandClick(s.currentTarget.checked,this.props.rootSymbol,this.props.expandable)});R(this,"handleSelect",()=>{const{prevSelectedSymbol:s,rootSymbol:n,select:r,activePage:o,numCharts:i}=this.props;s!==n?r(o,i):s===n&&o===ge.Trade&&this.props.checkAllTrades()});R(this,"handlePositionRowSelect",s=>{const{prevSelectedSymbol:n,rootSymbol:r,select:o,activePage:i,numCharts:l,trades:c}=this.props;n!==r&&o(i,l),s&&this.props.handleRowSelect(c,s)});R(this,"handleKeyPress",s=>{const{charCode:n,target:r}=s,o=r.id===this.getCheckboxId(),i=r.id===this.getLinkId();n===13&&(o?this.props.onExpandClick&&this.props.onExpandClick(!r.checked,this.props.rootSymbol,this.props.expandable):i&&this.handleSelect())})}render(){const{highlighted:s=!1,columns:n,rootSymbol:r,displaySymbol:o,expandable:i,isSymbolSelected:l,tableIsSmall:c,isExpanded:d,isInTheMoney:u}=this.props;return a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:Te("row","position",this.props.index%2===0?"even":"odd",s&&"highlighted"),children:[a.jsx(qve,{rootSymbol:r,displaySymbol:o,expandable:i,isInTheMoney:u,isSymbolSelected:l,tableIsSmall:c,isExpanded:d,handleSelect:this.handleSelect,handleCheckBoxClick:this.handleCheckBoxClick,handleKeyPress:this.handleKeyPress,positionColumnRef:this.positionColumnRef}),n.map(this.renderColumn)]}),this.renderRowChildren()]})}}const zve=e=>e.trades,W_=x(e=>e.trades,El,(e,t)=>t!==null&&t!==""?e.get(t,[]).some(n=>n.status===de.Draft&&n.checked===!0):!1),Xve=x(e=>e.trades,Os,(e,t)=>t!==null&&t!==""?e.get(t,[]).some(n=>n.status===de.Draft&&n.checked===!0):!1),Qve=(e,t)=>e.trades.get(t),Zve=(e,t)=>{const{rootSymbol:s}=t,n=hC(s),r=Nn(n,l=>l),o=Rie(s),i=Die(s);return l=>{const c=El(l),d=l.instruments.get(s),u=r(l),h=c!==null&&c!=="",p=zm(l),m=o(l),g=i(l);return{isSymbolSelected:h,prevSelectedSymbol:c,displaySymbol:d==null?void 0:d.displaySymbol,children:u,highlighted:s===c,spreadGrouping:p,spreadGroupingLength:g,positionGroupItemIdsToPositionsLength:m,activePage:ms(l),numCharts:hs(l).size,trades:Qve(l,s)}}},Jve=(e,t)=>({select(s,n){Et.unstable_batchedUpdates(()=>{s===ge.Charts?(e(Ia(Ps(1),t.rootSymbol)),n===1&&e(ea(t.rootSymbol))):(e(ws(ge.Trade,t.rootSymbol)),n===1&&e(ui(Ps(1),t.rootSymbol))),e({type:f.ClearDeleteNotification})})},handleRowSelect(s,n){e({type:f.UncheckAllTrades,rootSymbol:t.rootSymbol}),s==null||s.find(r=>{if(r.status===de.Completed&&(r==null?void 0:r.positionId)===n.positionId)return e({type:f.CompletedTradeChecked,symbol:r.symbol,account:r.account}),!0})},checkAllTrades(){e({type:f.CheckAllTrades,rootSymbol:t.rootSymbol})}}),eIe=Ln.withConsumer()(se(Zve,Jve,null,{areStatePropsEqual:fs})(Kve)),G_=e=>a.jsxs("tr",{className:"totals-footer",children:[a.jsx("td",{className:Te("corner","stick","bottom","left","cell"),children:a.jsx("span",{className:"totals-label",children:e.label})}),e.columns.map((t,s)=>{const{columns:n,data:r,disableLastColumnPadding:o}=e,i=s===n.length-1;return a.jsx(cC,{className:Te("header","stick","bottom","align-right","cell",Zn(t,r[t])),columnKey:t,isDragging:!1,value:r[t],isNotTrend:t==="mark",isLastColumn:o===!0?!1:i},t)})]},`${e.symbol}-${e.checkedCount}`),tIe=e=>a.jsx(G_,{columns:e.columns,data:e,label:__("Totals:")}),sIe=(e,t)=>function(n){let r=null,o=null;return function(){return(r===null||arguments===null||!e(r,arguments))&&(o=n.apply(null,arguments)),r=arguments,o}},TA="rootSymbol",nIe=Pt.ASCENDING,rIe=(e,t,s,n)=>{const r=s[t],o=n[t];return ii(r)?1:ii(o)?-1:r>o?e?1:-1:e?-1:1},oIe=(e,t)=>{if(t===void 0||t.sortDirection===Pt.NONE)return e;const s=t.sortDirection===Pt.ASCENDING,n=nIe===Pt.ASCENDING;switch(t.column){case"daysToExpiration":return[...e].sort((r,o)=>rIe(s,t.column,r,o));default:return[...e].sort((r,o)=>{const i=r[t.column],l=o[t.column],c=r[TA],d=o[TA];return i===0&&l===0||i===l?c===d?0:c>d?n?1:-1:n?-1:1:ii(i)?s?-1:1:ii(l)||i>l?s?1:-1:s?-1:1})}},aIe=e=>(t,s)=>t+(s[e]??0),iIe=(e,t)=>(t==null?void 0:t.reduce(aIe(e),0))??0,lIe=e=>e.positions.spreadGrouping&&Js(Cs.SPREAD_GROUPING)?e.groupedPositionTrades:e.trades,Y_=e=>e.aggregatedPositions,cIe=e=>e.instruments,dIe=e=>e.quotes,pC=e=>e.tableSort.position,uIe=e=>e.status===de.Completed,hIe=x(lIe,Nu,lie,(e,t,s)=>e.entrySeq().filter(([n,r])=>r.length>0&&r.findIndex(o=>{const i=o.status===de.Draft?o.rootSymbol:o.symbol,l=s.get(i);return l!==void 0&&l.rootSymbol===n})!==-1).map(([n,r])=>[n,r.filter(uIe).map(o=>t.get(o.positionId)).filter(Ut)]).filter(([n,r])=>r.length>0).map(([n,r])=>{const o=iIe("quantity",r),i=r.length===1&&r[0].rootSymbol===r[0].symbol,l=iy(s,n);return{rootSymbol:n,account:"",quantity:i?o:void 0,daysToExpiration:l}}).toArray()),pIe=x(hIe,e=>e.filter(Ut)),mIe=(e,t)=>{if(e.length<2||t.length<2)return e===t;const s=e[1].length,n=t[1].length;let r=s===n;if(r){for(let o=0;o<s;o++)if(e[1][o].rootSymbol!==t[1][o].rootSymbol){r=!1;break}}return r&&fs(e[0],t[0])},gIe=sIe(mIe),SIe=Tm(gIe),fIe=["quantity","daysToExpiration"],TIe=SIe(pC,pIe,Y_,dIe,cIe,(e,t,s,n,r)=>{const o=e.column;return t.map(i=>{var c,d;let l;if(o==="rootSymbol"||fIe.includes(o))l=i[o];else if(ew(o))l=(c=s.get(i.rootSymbol))==null?void 0:c[o];else if(A8(o))l=(d=n.get(i.rootSymbol))==null?void 0:d[o];else if(v8(o)){const u=r.get(i.rootSymbol);l=u!==void 0&&Hj(u)?u[o]:void 0}return{rootSymbol:i.rootSymbol,[e.column]:l}})}),yIe=x(pC,TIe,(e,t)=>oIe(t,e).map(s=>s.rootSymbol)),CIe=Nn(e=>(e.positions.spreadGrouping&&Js(Cs.SPREAD_GROUPING)?e.groupedPositionTrades:e.trades).map(s=>s.filter(n=>n.status===de.Completed)).filter(s=>s.length>0).keySeq().toArray(),e=>e.length?e:["SPY"]),bIe=e=>e.account.selected!==void 0?e.account.statements.get(e.account.selected.code):e.account.statement,q_=x(Y_,bIe,Iie,(e,t,s)=>{const n=e.reduce((u,h)=>(y8.forEach(p=>{u[p]=(u[p]??0)+(h[p]??0)}),u),{}),r=(t==null?void 0:t.cashAndSweep)??0,o=(n==null?void 0:n.plOpen)??0,i=(n==null?void 0:n.plDay)??0,l=(n==null?void 0:n.plYtd)??0,c=((n==null?void 0:n.netLiquidity)??0)+r,d=((n==null?void 0:n.openCost)??0)+r;return{...n,netLiquidity:c,openCost:d,openPrice:void 0,plOverallPercent:o/Math.abs(d),plDayPercent:i/Math.abs(c-i),plYtdPercent:l/Math.abs(c-l),daysToExpiration:s}}),EIe=q_,AIe=se(EIe)(tIe),vIe=Xo.swap,IIe=25;var TT=(e=>(e.HEADER="positions-header",e.DRAWER="positions-drawer",e.COLUMN="positions-column",e))(TT||{});const yA="table-portal",yT="positions",xIe=()=>{let e=document.getElementById(yA);if(e!==null)return;e=document.createElement("table"),e.id=yA,e.classList.add("ryan-grid","positions-table","table-portal"),Object.assign(e.style,{margin:"0",marginTop:"-.4rem",padding:"0",border:"0",height:"0",width:"0",position:"absolute"});const t=document.createElement("tbody"),s=document.createElement("tr");t.appendChild(s),e.appendChild(t),document.body.appendChild(e)};class wIe extends B.Component{constructor(s){super(s);R(this,"headerRef",null);R(this,"setExpandedRows",()=>{const s=this.state.isExpanded?this.props.expandableSymbols:[];Jc(s),this.setState({expandedRows:s})});R(this,"toggleColumnSort",(s,n)=>{this.props.symbols.length>0&&this.props.setColumnSort({column:s,sortDirection:n})});R(this,"toggleDrawerOpen",s=>{s.stopPropagation(),this.props.openColumnCustomizationMenu()});R(this,"closeDrawer",()=>{this.setState({drawerOpen:!1})});R(this,"onBeforeDragStart",()=>{this.setState({isDragging:!0})});R(this,"onDragEnd",s=>{const{source:n,destination:r}=s,{columns:o,setColumns:i}=this.props;if(this.setState({isDragging:!1}),!(ii(r)||ii(n))&&!(n.droppableId==="positions-drawer"&&r.droppableId==="positions-drawer")){if(n.droppableId==="positions-drawer"&&r.droppableId==="positions-header"){const l=K_(s.draggableId),c=Xo.insert(o,l,r.index);i(c);return}if(n.droppableId==="positions-header"&&r.droppableId==="positions-drawer"){const l=zl([n.index],o);i(l);return}if(n.droppableId==="positions-header"&&r.droppableId==="positions-header"&&r.index!==n.index){const l=vIe(o,n.index,r.index);i(l)}}});R(this,"renderRows",()=>{const{symbols:s,columns:n}=this.props;return s.map((r,o)=>a.jsx(eIe,{rootSymbol:r,columns:n,index:o,expandable:this.props.expandableSymbols.includes(r),isInTheMoney:this.props.inTheMoneySymbols.includes(r),isExpanded:this.state.expandedRows.includes(r),tableIsSmall:this.isTableSmall(),onExpandClick:this.onChildrenExpandClick},r))});R(this,"renderFooter",(s,n)=>{let r;return n===void 0?r=a.jsx(AIe,{columns:s}):r=n(s.length+1),r});R(this,"handleCheckBoxClick",()=>{const s=this.state.isExpanded?[]:this.props.expandableSymbols;fh(!this.state.isExpanded),Jc(s),this.setState({isExpanded:!this.state.isExpanded,expandedRows:s})});R(this,"handleColumnClick",(s,{column:n,sortDirection:r})=>{s.stopPropagation(),r!==void 0&&this.toggleColumnSort(n,r)});R(this,"renderSettingsIcon",()=>a.jsx(Gu,{cssClass:"column-drawer-icon",onClick:this.toggleDrawerOpen,ariaLabel:`Column Configuration ${this.state.drawerOpen?"Expanded":"Collapsed"}`,dataTestid:"positions-table-customization-button",analyticsAction:vc("position")}));R(this,"renderTableHeaderPrefix",()=>{var n;if(!((n=this.props)!=null&&n.expandableSymbols.length))return null;const s=this.props.expandableSymbols.every(r=>this.state.expandedRows.includes(r));return a.jsxs(a.Fragment,{children:[a.jsx("input",{"aria-label":`${s?"Collapse":"Expand"} All Positions`,type:"checkbox","aria-expanded":s,"data-testid":"expand-all-positions",id:"expand-all-positions",className:"checkbox-hide check-box",onChange:this.handleCheckBoxClick,checked:s}),a.jsx("label",{"aria-hidden":!0,htmlFor:"expand-all-positions","data-testid":"expand-all-positions-expander",className:"expander prefix-expander","data-expanded":s,children:a.jsx(X,{type:Y.ChevronDownCircle,width:16,height:16,viewBox:"2 2 20 20",fill:s?"action.focus":"icon.primary",dataTestId:"chevron-down-circle-icon"})})]})});R(this,"onChildrenExpandClick",(s,n,r)=>{if(r){const o=s?[...this.state.expandedRows,n]:this.state.expandedRows.filter(i=>i!==n);this.props.expandableSymbols.every(i=>o.includes(i))?(fh(!0),this.setState({isExpanded:!0}),Jc(this.props.expandableSymbols)):o.length===0?(fh(!1),this.setState({isExpanded:!1}),Jc([])):o.length!==this.props.expandableSymbols.length&&(fh(!1),Jc(o)),this.setState({expandedRows:o})}});R(this,"isTableSmall",()=>this.state.tableWidth<Es.TABLET_MIN);const n=Ej(),r=Aj();this.state={positionColumnWidth:IIe,isDragging:!1,drawerOpen:!1,tableWidth:this.props.tableWidth,isExpanded:n,expandedRows:[...r]}}static getDerivedStateFromProps(s,n){return s.tableWidth!==n.tableWidth?{tableWidth:s.tableWidth}:null}componentDidUpdate(s,n){s.expandableSymbols.length!==this.props.expandableSymbols.length&&this.state.isExpanded&&this.setExpandedRows()}componentDidMount(){xIe(),this.setExpandedRows()}render(){const{symbols:s,condensed:n,rootSymbolLabel:r,footer:o,theme:i,columns:l,columnSort:c,unavailableAccount:d}=this.props,u=this.state,h=s.length>0;return a.jsx(fl,{onDragEnd:this.onDragEnd,onBeforeDragStart:this.onBeforeDragStart,nonce:Mc(),children:a.jsxs("table",{"aria-label":"Positions Table",className:"ryan-grid positions-table",children:[a.jsx("thead",{onMouseLeave:this.state.isDragging?void 0:this.closeDrawer,children:a.jsx(wa,{droppableId:"positions-header",direction:"horizontal",children:p=>{var m;return a.jsxs("tr",{ref:g=>{this.headerRef=g,p.innerRef(g)},...p.droppableProps,className:"table-header",children:[a.jsx(mC,{column:"rootSymbol",tableId:yT,minWidth:n||this.isTableSmall()?void 0:u.positionColumnWidth,onClick:this.handleColumnClick,columnSort:c,rootSymbolLabel:r,renderPrefix:this.renderTableHeaderPrefix,renderIcon:this.renderSettingsIcon,sortable:h,isDraggable:!1,isExpandAll:((m=this.props)==null?void 0:m.expandableSymbols.length)>0},"rootSymbolHeader"+i+this.state.drawerOpen),a.jsx(E_,{tableId:yT,columns:l,onColumnClick:this.handleColumnClick,columnSort:c,drawerOpen:u.drawerOpen,sortable:h})]})}})}),!d&&a.jsxs(a.Fragment,{children:[a.jsxs("tbody",{children:[this.renderRows(),a.jsx(Sve,{columns:l,index:s.length})]}),a.jsx("tfoot",{className:"trade-table-footer",children:this.renderFooter(l,o)})]})]})})}}const OIe=hn(wIe),RIe=(e,t)=>t===void 0||t.column!==e?Pt.ASCENDING:t.sortDirection===Pt.ASCENDING?Pt.DESCENDING:t.sortDirection===Pt.DESCENDING?Pt.NONE:Pt.ASCENDING;let mC=class extends j.Component{constructor(){super(...arguments);R(this,"handleClick",s=>{const{onClick:n,column:r,columnSort:o,fromDrawer:i}=this.props;n!==void 0&&n(s,{column:r,sortDirection:RIe(r,o),fromDrawer:i})});R(this,"handleKeyDown",s=>{s.key===we.Enter&&this.handleClick(s)})}render(){var q,W;const{column:s,columnSort:n,minWidth:r,rootSymbolLabel:o=__("Position"),provided:i,snapshot:l,isDraggable:c,renderPrefix:d,renderSuffix:u,renderIcon:h,showDragHandle:p,fromDrawer:m,sortable:g,tableId:S,isExpandAll:T}=this.props,y=r===void 0?{}:{minWidth:`${r}rem`},b={...i==null?void 0:i.draggableProps,...i==null?void 0:i.dragHandleProps},E=l!==void 0?l.isDragging:!1,v=()=>{if(n!==void 0)return n.column===s&&n.sortDirection!==Pt.NONE&&g?a.jsx(pg,{direction:n.sortDirection}):null},D=s==="rootSymbol"?o:lC(__(m===!0?(q=en[s])==null?void 0:q.title:Lf(s),{namespace:(W=en[s])==null?void 0:W.namespace})),w=s===(n==null?void 0:n.column)?n==null?void 0:n.sortDirection:Pt.NONE,N=s==="rootSymbol"?o:Pd(s),L=Lm(S,N,w,c,g),P=p&&c||g,F=P?{divProps:{role:"button",onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:0,...L.headerProps},spanProps:{"aria-hidden":!0}}:{divProps:{},spanProps:{}},{divProps:O,spanProps:H}=F,C=ym(b,[P?"tabIndex":"","aria-labelledby","role"]),M=a.jsx("th",{scope:"col",ref:i!==void 0?i.innerRef:null,className:Te("top","cell","column-heading",s==="rootSymbol"?"corner left":"header align-right",s==="description"?"left":"header align-right",E?"isDragging":"",p===!0?"show-handle":"",S===yT?"stick":"stickyCell",T?"prefix":""),...C,"data-column":s,"data-testid":"column-header",children:a.jsxs(Be,{justifyContent:`${s==="description"||s==="rootSymbol"?"space-between":"end"}`,width:"100%",children:[d!==void 0&&d(),a.jsxs("div",{"aria-live":"polite",...O,"data-testid":"header-content",className:"header-content",children:[L.AriaHeaderComponents,(c===!0||p===!0)&&a.jsx("span",{"aria-hidden":!0,className:"icon-wrapper",children:a.jsx(X,{type:Y.Move,width:12,height:6,viewBox:"5 8 12 8",className:"move-icon",dataTestId:"move-icon"})}),a.jsx("span",{role:"group",style:y,className:`header-text ${s==="description"?"header-left":"header-right"}`,...L.headerProps,...H,children:a.jsxs("span",{"aria-hidden":!0,children:[D,v()]})}),u!==void 0?u():null]}),h!==void 0?h():null]})});return a.jsx(Wu,{portalId:"tr-portal",shouldRenderToPortal:E,children:E?a.jsx("table",{children:a.jsx("thead",{children:a.jsx("tr",{children:M})})}):M})}};class DIe extends j.PureComponent{constructor(){super(...arguments);R(this,"renderColumn",(s,n)=>{const r=bA(this.props.drawerId,s),o=this.props.forTable!==Sp.OptionChain?this.props.columnOnClick:yr;return a.jsx(Sl,{draggableId:r,index:n,children:(i,l)=>a.jsx(mC,{tableId:this.props.drawerId,column:s,snapshot:l,provided:i,isDraggable:!0,columnSort:void 0,showDragHandle:!0,fromDrawer:!0,onClick:o},s)},r)});R(this,"renderResponseField",(s,n)=>{const r=yn[s],o=bA(this.props.drawerId,r.request),i=this.props.forTable===Sp.OptionChain?this.props.columnOnClick:yr,l=this.props.forTable?{onClick:c=>i(c,r.request)}:{};return a.jsx(b_,{title:`Column drawer ${r.title?__(r.title):__(r.shortTitle)}`,draggableId:o,index:n,...l,children:r.title?__(r.title):__(r.shortTitle)},r.request)});R(this,"renderDrawerContentFromColumns",s=>a.jsx("table",{"data-testid":"column-drawer-content-from-columns",className:"column-drawer__content","aria-hidden":!0,children:a.jsx("thead",{"aria-hidden":!0,children:a.jsx("tr",{role:"div",className:Te("column-container","common-drawer",this.getFlexBasisClassName(this.props.width)),"data-testid":"column-container","aria-label":"Unapplied Columns",tabIndex:0,children:s.map(this.renderColumn)})})}));R(this,"renderDrawerContentFromFields",s=>a.jsx("table",{"data-testid":"column-drawer-content-from-fields",className:"column-drawer__content","aria-hidden":!0,children:a.jsx("thead",{"aria-hidden":!0,children:a.jsx("tr",{role:"div",className:Te("column-container","common-drawer",this.getFlexBasisClassName(this.props.width)),"data-testid":"column-container","aria-label":"Unapplied Columns",tabIndex:0,children:s.map(this.renderResponseField)})})}));R(this,"handleResetClick",s=>{s.stopPropagation(),this.props.resetColumns()});R(this,"renderResetBtn",()=>a.jsx("button",{className:"reset-columns-button",onClick:this.handleResetClick,children:__("Reset")}));R(this,"renderHeader",()=>a.jsx("div",{className:"drawer-header",children:this.renderResetBtn()}));R(this,"renderEmptyDropArea",()=>a.jsxs("div",{className:"empty-box-wrapper",children:[a.jsx("div",{className:"empty-box-blur"}),a.jsx("div",{className:Te("empty-box-content"),children:__("Drag and drop columns")})]}));R(this,"getFlexBasisClassName",s=>s>1444?"basis-7":s>1e3?"basis-6":s>850?"basis-5":s>700?"basis-4":s>550?"basis-3":s>400?"basis-2":"basis-1")}render(){const s=this.props;let n;if(this.props.forTable===Sp.OptionChain){const r=gAe(mAe(this.props.columns));n=this.renderDrawerContentFromFields(r)}else{const r=Dm(C8(this.props.columns));n=this.renderDrawerContentFromColumns(r)}return a.jsxs("div",{role:"none",onClick:this.props.toggleOpen,className:"column-drawer-content",children:[s.isOpen&&this.renderEmptyDropArea(),s.isOpen&&this.renderHeader(),s.isOpen&&n]})}}var Sp=(e=>(e.OptionChain="option-chain",e.Trades="trade-table",e.Positions="positions-table",e))(Sp||{});const K_=e=>{const t=e.split("-");return t[t.length-1]},CA=e=>{const t=e.split("-");return t[t.length-1]},bA=(e,t)=>`${e}-${t}`;class Fze extends j.PureComponent{constructor(){super(...arguments);R(this,"drawerRef",null);R(this,"handleDrawerKeyDown",s=>{s.key===we.Esc&&this.props.closeDrawer(),s.key===we.Space&&!this.props.isOpen&&this.props.toggleOpen(s)})}render(){const{isOpen:s,width:n,toggleOpen:r}=this.props,o=n-8;return a.jsx("tr",{"data-testid":"column-drawer-row",className:"column-drawer-row",children:a.jsx(wa,{droppableId:this.props.drawerId,direction:"horizontal",ignoreContainerClipping:!0,children:(i,l)=>a.jsx("td",{ref:c=>{this.drawerRef=c,i.innerRef(c)},...i.droppableProps,className:Te("column-drawer",s?"expanded":"column-drawer--closed"),"aria-expanded":s,"data-testid":"column-drawer","aria-label":"Column Drawer",children:a.jsxs("div",{role:"none",style:{width:o+"px"},onKeyDown:this.handleDrawerKeyDown,"data-testid":"column-drawer-content-wrapper",children:[a.jsx("div",{"data-testid":"column-drawer__content-wrapper",className:"column-drawer__content-wrapper native-scroll",children:a.jsx(DIe,{...this.props})}),a.jsx("button",{"data-testid":"column-drawer-arrow-btn",className:"column-drawer-arrow-btn",onClick:r,"aria-expanded":s,"aria-label":`${s?"Close":"Open"} Column Configuration Drawer`,children:a.jsx(X,{type:Y.WideArrowDown,width:22,height:4,viewBox:"0 0 22 4",dataTestId:"wide-arrow-down",fill:"none",className:"drawer-arrow"})})," "]})})})})}}const LIe=A(ds)`
  position: sticky;
  top: 0;
  z-index: ${({inView:e})=>e===!1?2e4:-1};
  width: 100%;
  height: 0;
  pointer-events: ${({inView:e})=>e===!1?"all":"none"};
  opacity: ${({inView:e})=>e===!1?1:0};
`,EA=A(ds)`
  height: 30px;

  ::-webkit-scrollbar {
    display: none; /* Chrome and Safari */
  }

  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    height: 24px;
  }
`,CT=A(ds)`
  width: ${({width:e})=>e}px !important;
  flex-shrink: 0;
  flex-grow: 1;
`,AA=A(CT)`
  height: ${Br.isSafari?29:30}px;
  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    height: 24px;
  }
`,_Ie=({leftSideColumns:e,rightSideColumns:t,tableContainerWidth:s,callSideRef:n,putSideRef:r,columnWidths:o,centeredOnField:i,optionChainWidth:l,isCustomizationMenuOpen:c,toggleCustomizationMenuOpen:d})=>{const[u,h]=Cc(),p=document.getElementById("BIDcall"),m=p==null?void 0:p.getBoundingClientRect().width,g=document.getElementById("strike-head"),S=g==null?void 0:g.getBoundingClientRect().width,T=(y,b,E,v)=>{const D=b?E.length-3:2,w=y===Xn.BID,N=y===Xn.ASK,L=(w||N)&&l>724?i===$t.Strike?"centeredOnStrike col-sticky":"col-sticky":"",F=i!==$t.Strike&&D===v&&l>724?"centered-col":"";return[L,F]};return a.jsxs(a.Fragment,{children:[a.jsx(ds,{ref:u,height:0,position:"absolute",top:17}),a.jsxs(LIe,{display:"flex",inView:h||c,"aria-hidden":!0,children:[a.jsx(EA,{ref:n,display:"inline-flex",className:"chain-table-container expiration-header-row",width:s,overflow:"auto",children:a.jsx("table",{className:"chain-table",children:a.jsx("thead",{children:a.jsx("tr",{className:"expiration-header-row",children:e.map((y,b,E)=>{var N;const v=T(y,!0,e,b),D=(N=o.get("call"))==null?void 0:N.get(y);let w=b===E.length-2&&m?m+1:m;return D!==void 0&&(w=b===E.length-2?D+1:D),a.jsx("th",{className:`chain-table-caption cell call spread-pairs-column__item ${y.toLowerCase()} ${v[0]} ${v[1]}`,style:{minWidth:w},children:a.jsx(CT,{width:b===E.length-2&&m?m+1:m,textAlign:"right","data-testid":"left-side-column-header",children:a.jsx("div",{className:"value",children:a.jsx("span",{children:__(yn[y].shortTitle)})})})},`${y}-call-${b}`)})})})})}),a.jsx(ds,{height:29,className:"chain-table-container expiration-header-row",width:S,children:a.jsx(AA,{className:"chain-table-caption cell spread-pairs-column__item strike-column-header","data-testid":"strike-column-header",children:a.jsxs("div",{className:"value",children:[a.jsx("span",{children:__("Strike")}),!h&&a.jsx(Gu,{cssClass:`${i===$t.Strike?"settings-icon-button":"common-settings-icon-button"}`,onClick:d,ariaLabel:`Column Configuration ${c?"Expanded":"Collapsed"}`,dataTestid:"option-chain-customization-button",analyticsAction:vc("optionChain")})]})})}),i!==$t.Strike&&a.jsx(ds,{height:29,className:"chain-table-container expiration-header-row",width:S,children:a.jsx(AA,{className:"chain-table-caption cell spread-pairs-column__item strike-column-header","data-testid":"strike-column-header",children:a.jsx("div",{className:"value",children:a.jsx("span",{children:__("Strike")})})})}),a.jsx(EA,{ref:r,display:"inline-flex",className:"chain-table-container expiration-header-row",width:s,minWidth:0,overflow:"auto",children:a.jsx("table",{className:"chain-table",children:a.jsx("thead",{children:a.jsx("tr",{className:"expiration-header-row",children:t.map((y,b)=>{var w;const E=T(y,!1,t,b),v=(w=o.get("put"))==null?void 0:w.get(y);let D=b===1&&m?m+1:m;return v!==void 0&&(D=b===1?v+1:v),a.jsx("th",{className:`chain-table-caption cell put spread-pairs-column__item ${y.toLowerCase()} ${E[0]} ${E[1]}`,style:{minWidth:D},children:a.jsx(CT,{width:b===1&&m?m+1:m,textAlign:"right","data-testid":"right-side-column-header",children:a.jsx("div",{className:"value",children:a.jsx("span",{children:__(yn[y].shortTitle)})})})},`${y}-put-${b}`)})})})})})]})]})},NIe=x(rie,e=>e),PIe=e=>({columnWidths:NIe(e)}),kIe=se(PIe)(_Ie),MIe=e=>{var t;if(e.statusFlag.legs)return(t=e.statusFlag.legs[0])==null?void 0:t.direction};var bT=(e=>(e.LEFT="LEFT",e.RIGHT="RIGHT",e))(bT||{});const vA=e=>{const{flags:t,tradeFlag:s,direction:n}=e;if(t.length>1){if(s.statusFlag.status===de.Completed&&s.statusFlag.quantity<0)return"flag-adjust-negative-completed";if(s.statusFlag.status===de.Pending&&s.statusFlag.quantity>0&&t.findIndex(r=>r.statusFlag.status===de.Completed&&r.statusFlag.quantity>-1)!==-1)return"flag-adjust-left-pending";if(s.statusFlag.status===de.Pending&&s.statusFlag.quantity>0&&t.findIndex(r=>r.statusFlag.quantity<0||MIe(r)==="SELL")!==-1)return n==="LEFT"?"flag-adjust-pending":"flag-adjust-pending-right";if(s.statusFlag.quantity>-1)return n==="LEFT"?"flag-adjust-left":"flag-adjust-right"}return""},IA=e=>{const{strikePrice:t,callSymbol:s,putSymbol:n,optionType:r,dataTestId:o}=e,i=r===dt.Call?"Call":"Put",l=`${__("Copy")}${__(" ")}${t}${__(" ")}${__(i)}${__(" ")}${__("Symbol")}`,c=async()=>{const d=r===dt.Call?s:n;await navigator.clipboard.writeText(d)};return a.jsx(kp,{title:l,optionType:r,className:"copy-button","data-testid":o,onClick:c,children:a.jsx(X,{type:Y.Copy,dataTestId:"copy-button-icon"})})},$Ie=e=>{const{isBoundary:t,spreadPair:s,fractionalType:n,callFlags:r,putFlags:o,showDoubleTickForFractionalPricing:i}=e,{strikeName:l,callSymbol:c,putSymbol:d}=s,u=A1(e.showFractionalPricing,Number(l),n,i);return a.jsx("td",{className:Te("strike-cell",t&&"mark"),"data-testid":"strike-cell",children:a.jsxs(Ww,{className:"strike-container","data-testid":"strike-container",children:[a.jsx(IA,{optionType:dt.Call,strikePrice:u,callSymbol:c,putSymbol:d,dataTestId:"copy-call-option-button"}),r&&r.map((h,p)=>a.jsx(Si,{className:Te("strike-flag left",vA({flags:r,tradeFlag:h,direction:bT.LEFT})),status:h.statusFlag.status,quantity:h.statusFlag.quantity,legs:h.statusFlag.legs},p)),a.jsx("div",{className:"strike-value",children:a.jsx("div",{tabIndex:0,children:u})}),o&&o.map((h,p)=>a.jsx(Si,{className:Te("strike-flag right",vA({flags:o,tradeFlag:h,direction:bT.RIGHT})),status:h.statusFlag.status,quantity:h.statusFlag.quantity,legs:h.statusFlag.legs},p)),a.jsx(IA,{optionType:dt.Put,strikePrice:u,callSymbol:c,putSymbol:d,dataTestId:"copy-put-option-button"})]})})},jIe=B.memo($Ie),BIe=x(yl,Ai,(e,t)=>{var s;return(s=t.get(e))==null?void 0:s.mark}),z_=x((e,t)=>t,e=>e),FIe=x(z_,e=>e.spreadPair.strikeName),HIe=x(BIe,FIe,z_,(e,t,s)=>{const n=s.nextStrike?parseFloat(s.nextStrike):void 0,r=parseFloat(t);return e!==void 0&&n!==void 0&&r<=e&&e<n}),UIe=(e,t)=>{const s=mt(e),{fractionalType:n,showFractionalPricing:r}=pn(e,s!==null?s:"");return{isBoundary:HIe(e,t),fractionalType:n,showFractionalPricing:r,showDoubleTickForFractionalPricing:Vs(vl(e),na(e))}},VIe=se(UIe)(jIe),WIe=(e,t,s)=>e===gc.start?`${__("Add 5 strikes above")} ${s}`:`${__("Add 5 strikes below")} ${t}`,GIe=e=>{const{moreDirection:t,nextStrike:s,prevStrike:n,onMoreClick:r}=e;return a.jsx("td",{className:"strike-cell",children:a.jsx("div",{className:"strike-container",children:a.jsx("button",{tabIndex:0,className:"strike-show-more","data-testid":`strike-show-more-button-${t}`,onClick:r,"aria-label":WIe(t,n,s),children:__("More")})})})},YIe=B.memo(GIe);class MS extends B.PureComponent{constructor(){super(...arguments);R(this,"tableRef",B.createRef());R(this,"tableWidth",0);R(this,"handleResize",()=>{var n;const s=this.props;if(s.updateTableWidth!==void 0){const r=((n=this.tableRef.current)==null?void 0:n.offsetWidth)??0;this.tableWidth!==r&&(this.tableWidth=r,s.updateTableWidth(r))}});R(this,"handleColumnClick",(s,n)=>{s.stopPropagation(),this.props.onDrawerColumnClick(n)});R(this,"renderSettingsIcon",()=>a.jsx(Gu,{cssClass:"settings-icon-button",onClick:this.props.toggleCustomizationMenuOpen,ariaLabel:`Column Configuration ${this.props.isCustomizationMenuOpen?"Expanded":"Collapsed"}`,dataTestid:"option-chain-customization-button",analyticsAction:vc("optionChain")}));R(this,"renderStrikeHead",()=>{const n=yn["strike"],r=n.title?n.title:n.shortTitle,o=!!this.props.showSettingButton;return a.jsx("th",{className:"chain-table-caption spread-pairs-column__item strike-column-header",id:"strike-head",children:a.jsxs("div",{className:"value","aria-label":r,children:[__(n.shortTitle)," ",o&&this.renderSettingsIcon()]})})});R(this,"onMoreClick",s=>()=>{const n=this.getMoreDirection(s);n!==void 0&&this.props.centeredOnField===$t.Strike&&this.props.handleMoreClick&&this.props.handleMoreClick(n)});R(this,"getMoreDirection",s=>{const n=this.props,r=n.spreadPairsToShow.length,o=r-1,i=r<n.spreadPairsWholeLength&&(s===0&&n.startIndex>0||s===o&&n.endIndex<n.spreadPairsWholeLength),l=s===0&&n.startIndex>0?gc.start:gc.end;return i&&n.centeredOnField===$t.Strike?l:void 0});R(this,"renderStrikeColumn",()=>{const s=this.props;return s.spreadPairsToShow.map((n,r)=>{var u,h,p,m;const o=(u=s.spreadPairsToShow[r+1])==null?void 0:u.spreadPair.strikeName,i=(h=s.spreadPairsToShow[r-1])==null?void 0:h.spreadPair.strikeName,l=this.getMoreDirection(r),c=l&&this.onMoreClick(r),d=Te("spread-pairs-row",l!==void 0?"more-row":void 0);return a.jsx("tr",{className:d,children:l===void 0?a.jsx(VIe,{spreadPair:n.spreadPair,putFlags:(p=n.tradeOptions)==null?void 0:p.puts,callFlags:(m=n.tradeOptions)==null?void 0:m.calls}):a.jsx(YIe,{moreDirection:l,prevStrike:i,nextStrike:o,onMoreClick:c})},s.optionChainName+n.spreadPair.strikeName+r)})})}componentDidMount(){var s;(s=this.tableRef.current)==null||s.addEventListener("resize",this.handleResize)}componentWillUnmount(){var s;(s=this.tableRef.current)==null||s.removeEventListener("resize",this.handleResize)}componentDidUpdate(s){this.handleResize()}render(){return a.jsxs("table",{className:"chain-table chain-table__strike",ref:this.tableRef,children:[a.jsx("thead",{children:a.jsx("tr",{className:"expiration-header-row",tabIndex:0,children:this.renderStrikeHead()})}),a.jsx("tbody",{children:this.renderStrikeColumn()})]})}}const qIe=k1.reduce((e,t)=>(Object.assign(e,{[t]:yn[t].shortTitle}),e),{}),X_=(e,t,s,n)=>{switch(e){case"DELTA":case"EXTRINSIC":case"INTRINSIC":return ur;case"THEO_PRICE":case"LAST":case"MARK":case"MARK_CHANGE":return s?r=>Fs(r,t,n):ur;case"RETURN_ON_RISK":case"PROBABILITY_ITM":case"PROBABILITY_OTM":case"IMPLIED_VOLATILITY":case"RETURN_ON_CAPITAL":return gr;case"MARK_PERCENT_CHANGE":return R1;default:return Sn}},xA=(e,t,s,n=0,r,o,i,l,c)=>{switch(t){case"ASK":case"BID":{const d=e,u=`${d==null?void 0:d.value}-${s}-${n}`;return a.jsx("span",{"aria-labelledby":`warning ${u}`,role:"group",tabIndex:r,children:a.jsx(ci,{value:d==null?void 0:d.value,trend:d==null?void 0:d.trend,renderer:i?h=>Fs(h,o,l):c!=null&&c.startsWith("/6J")?Dx:ur,id:u,role:"button"})})}default:{const d=X_(t,o,i,l)(e);return a.jsx("span",{"data-testid":`${t}-cell-value`,className:"render-value","aria-hidden":!0,children:d})}}},KIe=e=>{const{isBoundary:t,isITM:s,isCall:n,valueKey:r,isSelected:o,value:i,symbol:l,strike:c,index:d,moreDirection:u,rootSymbol:h,buyOption:p,centeredOnField:m,displayStickyColumnsInCenter:g,expirationId:S,draftOrderHasLegs:T,fractionalType:y,showFractionalPricing:b,showDoubleTickForFractionalPricing:E,centeredOnColumn:v}=e,D=r===Xn.BID,w=r===Xn.ASK,N=B.useCallback(()=>{if((D||w)&&!u){const Se=D?pe.Sell:pe.Buy,be=n?dt.Call:dt.Put;if(!P6(i))throw new Error("Only columns with trending values can be used for starting trade");I7(!0),p({symbol:l,rootSymbol:h,strike:c,expirationId:S,optionType:be,direction:Se,price:i.value},T)}},[p,c,l,n,i,S,h,T,D,w,u]),L=t?"mark":!1,P=s?"itm":"otm",F=n?`call ${P}`:`put ${P}`,O=o?"selected":!1,H=(D||w)&&r.toLocaleLowerCase(),C=m===$t.Strike&&g&&(D||w)?"centeredOnStrike":"",W=Te("cell",F,H,C,g&&(D||w)?"col-sticky":"",L,v&&g?"centered-col":""),z=Te("value",u,O),re=n?"Call":"Put",ae=qIe[r],Me=(ae==="Bid"||ae==="Ask")&&o?__("Selected"):__("Unselected"),he=`Strike ${c}, ${re} ${ae} ${X_(r,y,b,E)(i)} ${Me}`,U=u===void 0?0:-1;return a.jsx("td",{tabIndex:U,className:W,children:D||w?a.jsx("button",{tabIndex:0,"aria-label":he,className:z,onClick:N,"data-testid":"buy-option-button",children:xA(i,r,c,d,U,y,b,E,h)}):a.jsx("div",{tabIndex:0,"aria-label":he,className:z,children:xA(i,r,c,d,U,y,b,E)})},c+d)},zIe=x(Dc,e=>e?e.legs.length!==0:!1),XIe=x(yl,zve,(e,t)=>t.get(e)??[]),QIe=x(XIe,e=>e.find(t=>t.status===de.Draft)),Q_=x(yl,Ai,(e,t)=>{var s;return(s=t.get(e))==null?void 0:s.mark}),ZIe=(e,t)=>e.optionChain.quotes.get(t.spreadPair.putSymbol),JIe=(e,t)=>e.optionChain.quotes.get(t.spreadPair.callSymbol),exe=x(ZIe,JIe,(e,t)=>({putValues:e,callValues:t})),txe=(e,t)=>t.spreadPair,Tg=(e,t)=>t.isCall,sxe=x(txe,Tg,(e,t)=>t?e.callSymbol:e.putSymbol),yg=(e,t)=>parseFloat(t.spreadPair.strikeName),gC=(e,t)=>yn[t.columnKey].request,nxe=(e,t)=>t.expirationId,rxe=x(QIe,Dc,Tg,nxe,yg,gC,(e,t,s,n,r,o)=>{let i=!1;const l=(e==null?void 0:e.checked)??!1;return s?i=l&&(t?t.legs.filter(c=>c.optionExpiration!==void 0&&c.optionExpiration.id===n&&c.optionType===dt.Call&&c.optionStrike===r&&(c.direction===pe.Buy&&o==="ASK"||c.direction===pe.Sell&&o==="BID")).length!==0:!1):i=l&&(t?t.legs.filter(c=>c.optionExpiration!==void 0&&c.optionExpiration.id===n&&c.optionType===dt.Put&&c.optionStrike===r&&(c.direction===pe.Buy&&o==="ASK"||c.direction===pe.Sell&&o==="BID")).length!==0:!1),i}),oxe=x(Tg,Q_,yg,(e,t,s)=>{const n=t!==void 0&&t>=s;return e?!n:n}),axe=(e,t)=>t.nextStrike,ixe=x(Q_,yg,axe,(e,t,s)=>{const n=s?parseFloat(s):void 0;return e!==void 0&&n!==void 0&&t<=e&&e<n}),lxe=x(ixe,e=>e),cxe=x(gC,Tg,exe,(e,t,{callValues:s,putValues:n})=>{const r=V[e];let o;if(t)switch(e){case ze.ASK:{o=s==null?void 0:s[V.ASK_TREND];break}case ze.BID:{o=s==null?void 0:s[V.BID_TREND];break}default:o=s==null?void 0:s[r]}else switch(e){case ze.ASK:{o=n==null?void 0:n[V.ASK_TREND];break}case ze.BID:{o=n==null?void 0:n[V.BID_TREND];break}default:o=n==null?void 0:n[r]}return o}),dxe=(e,t)=>{const s=aie(e);return{symbol:sxe(e,t),strike:yg(e,t),value:cxe(e,t),fractionalType:s,showFractionalPricing:s!==Bs.x10,isITM:oxe(e,t),isSelected:rxe(e,t),valueKey:gC(e,t),isBoundary:lxe(e,t),draftOrderHasLegs:zIe(e),rootSymbol:yl(e),showDoubleTickForFractionalPricing:Vs(vl(e),k.OPTION)}},uxe=e=>({buyOption:(t,s)=>{const{symbol:n,rootSymbol:r,strike:o,expirationId:i,optionType:l,direction:c,price:d}=t;s?(e({type:f.AddSpreadOptionLeg,symbol:n,rootSymbol:r,strike:o,expirationId:i,optionType:l,direction:c}),Ye({category:Ve.Trade,action:Le.AddOptionLeg,label:ks.OptionChain+" "+c})):(e({type:f.UncheckAllTrades,rootSymbol:r}),e({type:f.BuyOption,symbol:r,rootSymbol:r,strike:o,expirationId:i,optionType:l,direction:c,price:d}),Ye({category:Ve.Trade,action:Le.AddOptionTrade,label:ks.OptionChain+" "+c}))}}),hxe=se(dxe,uxe)(KIe),pxe=e=>{const{moreDirection:t,columns:s}=e,n=Te("spread-pairs-row",t&&"more-row"),r=t&&"none";return a.jsx("tr",{className:n,role:r,"data-testid":"option-chain-table-row",children:s.map((o,i)=>{const l=e.centeredOnField!==$t.Strike&&e.centeredOnFieldColumnIndex===i;return a.jsx(hxe,{columnKey:o,isCall:e.isCall,expirationId:e.expirationId,spreadPair:e.spreadPair,moreDirection:t,nextStrike:e.nextStrike,centeredOnField:e.centeredOnField,index:i,displayStickyColumnsInCenter:e.displayStickyColumnsInCenter,centeredOnColumn:l},`${o}-${i}`)})})},mxe=B.memo(pxe),gxe=e=>{const{updateTableWidth:t,headerColumnClicked:s,columns:n,isCustomizationMenuOpen:r,spreadPairsToShow:o,spreadPairsLength:i,endIndex:l,startIndex:c,isCallValue:d,expirationId:u,onHeaderItemResize:h,centeredOnField:p,optionChainWidth:m}=e,g=B.useRef(null),S=B.useMemo(()=>g.current!==null?g.current.offsetWidth:0,[]);B.useEffect(()=>{S===0&&t!==void 0&&t(S)},[S,t]);const T=d?n.length-3:2,y=m>724,b=n.map((w,N)=>{const L=d?"call":"put",P=yn[w],F=P.request,O=F===Xn.BID,H=F===Xn.ASK,C=F===Xn.DELTA,M=F===Xn.PROBABILITY_ITM,q=O||H?F.toLocaleLowerCase():!1,W=(O||H)&&p===$t.Strike&&y?"centeredOnStrike":"",z=(O||H)&&y?"col-sticky":"",re=p!==$t.Strike&&p===P.shortTitle&&T===N,ae=p!==$t.Strike&&(C||M)&&F.toLocaleLowerCase(),Me=re?y?"centered-col":"centered-col-not-movable":"",he=Te("chain-table-caption",r&&P.request!=="BID"&&P.request!=="ASK"&&"chain-table-caption--drawer-open","cell",L,q,W,z,Me,ae),U=be=>{switch(be){case"IntVal":return"Intrinsic Value";case"ExtVal":return"Extrinsic Value";case"Open Int":return"Open Interest";case"Prob ITM":return"Probability ITM";case"Prob OTM":return"Probability OTM";case"IV":return"Implied Volatility";case"RoC":return"Return on Capital";default:return be}},Se=w+L+N;return a.jsx(b_,{draggableId:Se,index:N,disableInteractiveElementBlocking:!0,isDragDisabled:P.movable===!1||re,title:`${L} ${P.title?P.title:U(P.shortTitle)}`,className:he,onClick:()=>s!==void 0&&s(N),onItemResize:be=>h({type:L,columnKey:w,width:be}),children:__(P.shortTitle)},Se)}),E=o.length,v=E-1,D=o.map((w,N)=>{var O;const L=E<i&&(N===0&&c>0||N===v&&l<i),P=N===0&&c>0?gc.start:gc.end,F=(O=o[N+1])==null?void 0:O.spreadPair.strikeName;return a.jsx(mxe,{spreadPair:w.spreadPair,moreDirection:L&&p===$t.Strike?P:void 0,expirationId:u,nextStrike:F,centeredOnField:p,centeredOnFieldColumnIndex:T,columns:n,displayStickyColumnsInCenter:y,isCall:d},w.spreadPair.strikeName+N)});return a.jsxs("table",{className:"chain-table",ref:g,children:[a.jsx(wa,{droppableId:e.isCallValue?ET.CALL:ET.PUT,direction:"horizontal",isDropDisabled:e.isDropDisabled,children:w=>a.jsx("thead",{ref:w.innerRef,...w.droppableProps,children:a.jsxs("tr",{className:"expiration-header-row",tabIndex:0,children:[b,a.jsx("td",{style:{display:"none"},children:a.jsx("div",{children:w.placeholder})})]})})}),a.jsx("tbody",{children:D})]})},Sxe=e=>({onHeaderItemResize:t=>{e(qde(t))}}),wA=se(null,Sxe)(gxe),ri=e=>Math.floor(e/2),fxe=(e,t,s,n)=>{const r=s%2!==0,o=t===e-1,i=e!==0&&t+ri(s)>e?e-s:t-ri(s),l=(i>0?i-1:i)-n;return o&&s!==1&&r?l-1:l},Txe=(e,t,s,n,r,o)=>{const l=s%2!==0?ri(s)+1:ri(s),c=e<0&&t===0?o+s:r+o+l;return c===n-1?c:c+1},yxe=({numberOfStrikes:e,boundaryIndex:t,strikeQuantityToShow:s})=>{if(e===0)return-1;const n=t+ri(s)>e?e-s:t-(ri(s)-(t>ri(s)?1:0));return n>0?n-1:n},Cxe=({numberOfStrikes:e,startIndex:t,boundaryIndex:s,strikeQuantityToShow:n})=>{if(e===0)return-1;const r=t<=0?n:s+ri(n);return r>e-1?e-1:r},OA=e=>{let t=null;const s=[],n=[];return e.forEach(({ref:r,type:o})=>{const i=r.current;if(!i)return;const l=d=>{t={el:d.target,type:o}};i.addEventListener("pointerenter",l);const c=d=>{(t==null?void 0:t.el)===d.target&&e.forEach(({ref:u,type:h})=>{const p=u.current;if(!(!p||!t||t.el===p))switch(h){case Gs.CALL:{p.scrollLeft=t.type===Gs.CALL?t.el.scrollLeft:t.el.scrollWidth-t.el.clientWidth-t.el.scrollLeft;break}case Gs.PUT:{p.scrollLeft=t.type===Gs.PUT?t.el.scrollLeft:t.el.scrollWidth-t.el.clientWidth-t.el.scrollLeft;break}}})};i==null||i.addEventListener("scroll",c),s.push({el:i,handler:l}),n.push({el:i,handler:c})}),{pointerEnterHandlers:s,scrollHandlers:n}},_h=5;var gc=(e=>(e.start="start",e.end="end",e))(gc||{}),ET=(e=>(e.CALL="option-chain-call",e.PUT="option-chain-put",e.STRIKE="option-chain-strike",e.DRAWER="option-chain-drawer",e))(ET||{});class bxe extends B.PureComponent{constructor(){super(...arguments);R(this,"state",{moreStart:0,moreEnd:0,width:0,isDragging:!1,draggedDroppableId:""});R(this,"callsSideRef",B.createRef());R(this,"putsSideRef",B.createRef());R(this,"stickyCallSideRef",B.createRef());R(this,"stickyPutSideRef",B.createRef());R(this,"pointerEnterHandlers",[]);R(this,"scrollHandlers",[]);R(this,"container",null);R(this,"getIsLoading",s=>{var n;return((n=s.spreadPairs)==null?void 0:n.length)===0});R(this,"getColumns",s=>{const n=this.props,r=[...n.columns],[o,i,...l]=n.columns;let c=Xn.DELTA;switch(n.centeredOnField){case $t.Delta:c=Xn.DELTA;break;case $t.ProbITM:c=Xn.PROBABILITY_ITM;break}return n.centeredOnField!==$t.Strike?s===Gs.PUT?(r.splice(2,0,c),r):[i,o,c,...l].reverse():s===Gs.PUT?n.columns:[i,o,...l].reverse()});R(this,"toggleCustomizationMenuOpen",s=>{s.stopPropagation(),this.props.setIsCustomizationMenuOpen(!this.props.isCustomizationMenuOpen)});R(this,"onDragEnd",s=>{this.setState({isDragging:!1,draggedDroppableId:""});const n=this.props,r=s.source.droppableId;let o=s.source.index;if(co(s.destination))return;const i=s.destination.droppableId;if(i===r){if(i!=="option-chain-drawer"){let l=s.destination.index;const c=SAe;if(r==="option-chain-call"&&(o=n.columns.length-1-o,l=n.columns.length-1-l),yn[n.columns[l]].movable===!1&&(l=c),o===l||yn[n.columns[o]].movable===!1)return;const d=Xo.swap(n.columns,o,l);n.setColumns(d)}}else if(i==="option-chain-drawer"){const l=zl([r==="option-chain-call"?n.columns.length-o-1:o],n.columns);n.setColumns(l)}else if(i==="option-chain-put"){const l=Xo.insert(n.columns,CA(s.draggableId),s.destination.index>=2?s.destination.index:2);n.setColumns(l)}else{const l=Xo.insert(n.columns,CA(s.draggableId),n.columns.length-s.destination.index>=2?n.columns.length-s.destination.index:2);n.setColumns(l)}});R(this,"onBeforeDragStart",()=>{this.setState({isDragging:!0})});R(this,"onDragStart",s=>{this.setState({draggedDroppableId:s.source.droppableId})});R(this,"headerColumnClicked",s=>n=>{if(this.props.isCustomizationMenuOpen){if(s===Gs.PUT&&n>=2){const r=zl([n],this.props.columns);this.props.setColumns(r)}else if(s===Gs.CALL&&this.props.columns.length-n-1>=2){const r=zl([this.props.columns.length-n-1],this.props.columns);this.props.setColumns(r)}}});R(this,"drawerColumnClicked",s=>{const n=[...this.props.columns,s];this.props.setColumns(n)});R(this,"getStartIndex",()=>{var o;const s=this.props,n=this.state,r=((o=s.spreadPairs)==null?void 0:o.length)??0;return fxe(r,s.boundaryIndex,s.strikeQuantity,n.moreStart)});R(this,"getEndIndex",()=>{var i;const s=this.props,n=this.state,r=this.getStartIndex(),o=((i=s.spreadPairs)==null?void 0:i.length)??0;return Txe(r,n.moreStart,s.strikeQuantity,o,s.boundaryIndex,n.moreEnd)});R(this,"getStartIndexBasedOnBoundaryIndex",s=>{var n;return yxe({numberOfStrikes:((n=this.props.spreadPairs)==null?void 0:n.length)??0,boundaryIndex:s,strikeQuantityToShow:this.props.strikeQuantity})});R(this,"getEndIndexBasedOnBoundaryIndex",(s,n)=>{var r;return Cxe({numberOfStrikes:((r=this.props.spreadPairs)==null?void 0:r.length)??0,startIndex:s,boundaryIndex:n,strikeQuantityToShow:this.props.strikeQuantity})});R(this,"getSpreadPairsToShow",(s,n)=>{const r=this.props;return r.spreadPairs?r.spreadPairs.length>r.strikeQuantity?r.spreadPairs.slice(s<=0?0:s,n):r.spreadPairs:[]});R(this,"getCenteredOnOtherThanStrikeParams",s=>{if(s.centeredOnField===$t.Strike)return{callStartIndex:-1,callEndIndex:-1,putStartIndex:-1,putEndIndex:-1,callSpreadPairsToShow:[],putSpreadPairsToShow:[]};const n=s.callBoundaryIndex?s.callBoundaryIndex+1:-1,r=s.putBoundaryIndex?s.putBoundaryIndex+1:-1,o=this.getStartIndexBasedOnBoundaryIndex(n),i=this.getEndIndexBasedOnBoundaryIndex(o,n),l=this.getStartIndexBasedOnBoundaryIndex(r),c=this.getEndIndexBasedOnBoundaryIndex(l,r),d=s.strikeQuantity%2===0,u=d?o:o-1,h=d?l:l-1,p=this.getSpreadPairsToShow(h,c),m=this.getSpreadPairsToShow(u,i);return{callStartIndex:u,callEndIndex:i,putStartIndex:h,putEndIndex:c,callSpreadPairsToShow:m,putSpreadPairsToShow:p}});R(this,"handleResize",()=>{var r;const s=((r=this.container)==null?void 0:r.clientWidth)??0;this.setState({width:s}),this.setInitialScrollLeftForCallsSide();const n=this.putsSideRef.current;n&&(n.scrollLeft=0)});R(this,"handleMoreClick",(s,n,r)=>o=>{const i=this.props;if(i.spreadPairs)switch(o){case"start":{const l=s-_h,c=parseFloat(i.spreadPairs[l<=0?0:l].spreadPair.strikeName),d=parseFloat(i.spreadPairs[n>=r?r-1:n].spreadPair.strikeName);this.setState({moreStart:this.state.moreStart+_h}),i.getMoreQuotes(c,d);break}case"end":{const l=n-1+_h,c=parseFloat(i.spreadPairs[s<0?0:s].spreadPair.strikeName),d=parseFloat(i.spreadPairs[l>=r?r-1:l].spreadPair.strikeName);this.setState({moreEnd:this.state.moreEnd+_h}),i.getMoreQuotes(c,d);break}}})}componentDidMount(){var o;if(this.container=document.getElementById("option-chain-filter"),this.container){const i=((o=this.container)==null?void 0:o.getBoundingClientRect().width)??0;this.setState({width:i}),this.container.addEventListener("resize",this.handleResize)}const s=this.props.rowContainerRef.current;s!==null&&Zp.listenTo(s,this.handleResize),this.setInitialScrollLeftForCallsSide();const{pointerEnterHandlers:n,scrollHandlers:r}=OA([{ref:this.callsSideRef,type:Gs.CALL},{ref:this.stickyCallSideRef,type:Gs.CALL},{ref:this.putsSideRef,type:Gs.PUT},{ref:this.stickyPutSideRef,type:Gs.PUT}]);this.pointerEnterHandlers=n,this.scrollHandlers=r}componentDidUpdate(s,n,r){var c,d,u,h,p,m,g,S;if(this.getIsLoading(s)&&!this.getIsLoading(this.props)){this.setInitialScrollLeftForCallsSide();const{pointerEnterHandlers:T,scrollHandlers:y}=OA([{ref:this.callsSideRef,type:Gs.CALL},{ref:this.stickyCallSideRef,type:Gs.CALL},{ref:this.putsSideRef,type:Gs.PUT},{ref:this.stickyPutSideRef,type:Gs.PUT}]);this.pointerEnterHandlers=T,this.scrollHandlers=y}const o=this.props.spreadPairs||[],i=(s.spreadPairs||[]).length===0&&o.length>0,l=o.length;if((this.props.centeredOnField===$t.Strike&&s.strikeQuantity!==this.props.strikeQuantity||s.nearStrikeIsLocked!==this.props.nearStrikeIsLocked||i)&&this.setState({moreStart:0,moreEnd:0}),s.centeredOnInput!==this.props.centeredOnInput||s.putBoundaryIndex!==this.props.putBoundaryIndex||s.callBoundaryIndex!==this.props.callBoundaryIndex||s.columns!==this.props.columns||s.strikeQuantity!==this.props.strikeQuantity||s.nearStrikeIsLocked!==this.props.nearStrikeIsLocked||i){const{centeredOnField:T,callBoundaryIndex:y,putBoundaryIndex:b}=this.props;if(T!==$t.Strike&&b&&y){const N=(o==null?void 0:o.length)??0,L=this.getStartIndexBasedOnBoundaryIndex(y),P=this.getEndIndexBasedOnBoundaryIndex(L,y),F=this.getStartIndexBasedOnBoundaryIndex(b),O=this.getEndIndexBasedOnBoundaryIndex(F,b),H=parseFloat(((d=(c=o[L<=0?0:L])==null?void 0:c.spreadPair)==null?void 0:d.strikeName)??0),C=parseFloat((u=o[P>=N?N-1:P])==null?void 0:u.spreadPair.strikeName),M=parseFloat(((p=(h=o[F<=0?0:F])==null?void 0:h.spreadPair)==null?void 0:p.strikeName)??0),q=parseFloat((m=o[O>=N?N-1:O])==null?void 0:m.spreadPair.strikeName),W=M<H?M:H,z=q>C?q:C;this.props.getStrikeChangeQuotes(W,z);return}const E=this.getStartIndex(),v=this.getEndIndex(),D=parseFloat(((S=(g=o[E<=0?0:E])==null?void 0:g.spreadPair)==null?void 0:S.strikeName)??0),w=parseFloat(o[v>=l?l-1:v].spreadPair.strikeName);this.props.getStrikeChangeQuotes(D,w)}}setInitialScrollLeftForCallsSide(){if(this.callsSideRef.current!==null){const s=this.callsSideRef.current;s.scrollLeft=s.scrollWidth}if(this.stickyCallSideRef.current!==null){const s=this.stickyCallSideRef.current;s.scrollLeft=s.scrollWidth}}componentWillUnmount(){this.container&&this.container.removeEventListener("resize",this.handleResize);const s=this.props.rowContainerRef.current;s!==null&&Zp.removeAllListeners(s),this.pointerEnterHandlers.forEach(({el:n,handler:r})=>{n==null||n.removeEventListener("pointerenter",r)}),this.scrollHandlers.forEach(({el:n,handler:r})=>{n==null||n.removeEventListener("scroll",r)})}render(){const s=this.props,n=this.state;if(!s.spreadPairs)return null;const r=this.getStartIndex(),o=this.getEndIndex(),i=this.getSpreadPairsToShow(r,o),l=s.spreadPairs.length,c=this.getCenteredOnOtherThanStrikeParams(s),d=s.strikeColumnWidth===0?r_:s.strikeColumnWidth,u=Math.floor((n.width-(s.centeredOnField===$t.Strike?d:d*2))/2),h=this.getIsLoading(s);return a.jsxs(a.Fragment,{children:[a.jsx(kIe,{tableContainerWidth:u,leftSideColumns:this.getColumns(Gs.CALL),rightSideColumns:this.getColumns(Gs.PUT),callSideRef:this.stickyCallSideRef,putSideRef:this.stickyPutSideRef,centeredOnField:s.centeredOnField,isCustomizationMenuOpen:s.isCustomizationMenuOpen,optionChainWidth:this.state.width,toggleCustomizationMenuOpen:this.toggleCustomizationMenuOpen}),a.jsx(Be,{marginBottom:29,children:h?a.jsx("div",{className:"expiration-row-loading",children:a.jsx(YL,{className:"loading-indicator"})}):a.jsxs(fl,{onBeforeDragStart:this.onBeforeDragStart,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,children:[a.jsx("div",{className:"chain-table-container",children:a.jsx("div",{ref:this.callsSideRef,className:"chain-table-container__other-columns native-scroll in-app-scrollbar",style:{width:`${u}px`},children:a.jsx(wA,{expirationId:s.name,columns:this.getColumns(Gs.CALL),spreadPairsToShow:s.centeredOnField===$t.Strike?i:c.callSpreadPairsToShow,spreadPairsLength:l,startIndex:s.centeredOnField===$t.Strike?r:c.callStartIndex,endIndex:s.centeredOnField===$t.Strike?o:c.callEndIndex,isCallValue:!0,isDropDisabled:n.draggedDroppableId==="option-chain-put",optionChainWidth:this.state.width,isCustomizationMenuOpen:this.props.isCustomizationMenuOpen,headerColumnClicked:this.headerColumnClicked(Gs.CALL),centeredOnField:s.centeredOnField})})}),a.jsx("div",{className:"chain-table-container",children:a.jsxs("div",{className:"strike-column-container",children:[s.centeredOnField!==$t.Strike&&a.jsx(MS,{optionChainName:s.name,spreadPairsToShow:c.callSpreadPairsToShow,spreadPairsWholeLength:l,startIndex:c.callStartIndex,endIndex:c.callEndIndex,centeredOnField:s.centeredOnField,updateTableWidth:s.updateTableWidth,isCustomizationMenuOpen:s.isCustomizationMenuOpen,toggleCustomizationMenuOpen:this.toggleCustomizationMenuOpen,onDrawerColumnClick:this.drawerColumnClicked}),s.centeredOnField!==$t.Strike&&a.jsx("button",{"aria-label":`Column Configuration ${s.isCustomizationMenuOpen?"Expanded":"Collapsed"}`,className:`${s.isCustomizationMenuOpen?"common-settings-icon-button-hidden":"common-settings-icon-button"}`,onClick:this.toggleCustomizationMenuOpen,tabIndex:0,children:a.jsx(X,{type:Y.Settings,width:14,height:14,viewBox:"2 2 21 21",dataTestId:"settings-icon"})}),s.centeredOnField===$t.Strike&&a.jsx(MS,{optionChainName:s.name,handleMoreClick:this.handleMoreClick(r,o,l),spreadPairsToShow:i,spreadPairsWholeLength:l,startIndex:r,endIndex:o,centeredOnField:s.centeredOnField,updateTableWidth:s.updateTableWidth,isCustomizationMenuOpen:s.isCustomizationMenuOpen,toggleCustomizationMenuOpen:this.toggleCustomizationMenuOpen,onDrawerColumnClick:this.drawerColumnClicked,showSettingButton:!0}),s.centeredOnField!==$t.Strike&&a.jsx(MS,{optionChainName:s.name,spreadPairsToShow:c.putSpreadPairsToShow,spreadPairsWholeLength:l,startIndex:c.putStartIndex,endIndex:c.putEndIndex,centeredOnField:s.centeredOnField,updateTableWidth:s.updateTableWidth,isCustomizationMenuOpen:s.isCustomizationMenuOpen,toggleCustomizationMenuOpen:this.toggleCustomizationMenuOpen,onDrawerColumnClick:this.drawerColumnClicked})]})}),a.jsx("div",{className:"chain-table-container",children:a.jsx("div",{ref:this.putsSideRef,className:"chain-table-container__other-columns native-scroll in-app-scrollbar",style:{width:`${u}px`},children:a.jsx(wA,{expirationId:s.name,columns:this.getColumns(Gs.PUT),spreadPairsToShow:s.centeredOnField===$t.Strike?i:c.putSpreadPairsToShow,spreadPairsLength:l,startIndex:s.centeredOnField===$t.Strike?r:c.putStartIndex,endIndex:s.centeredOnField===$t.Strike?o:c.putEndIndex,isCallValue:!1,isDropDisabled:n.draggedDroppableId==="option-chain-call",optionChainWidth:this.state.width,isCustomizationMenuOpen:this.props.isCustomizationMenuOpen,headerColumnClicked:this.headerColumnClicked(Gs.PUT),centeredOnField:s.centeredOnField})})})]})})]})}}const Exe=e=>e.optionChain.optionChainMap,Axe=e=>e.optionChain.strike,vxe=e=>e.trades,Ixe=e=>e.createTrade,xxe=e=>e.workingOrders,wxe=(e,t)=>t.get(e)??[],Qa=e=>{if(e.statusFlag.legs){const t=e.statusFlag.legs[0].direction==="SELL"?-1:1;return e.statusFlag.quantity*t}return e.statusFlag.quantity},RA=(e,t)=>{switch(e.statusFlag.status){case de.Completed:return!1;case de.Pending:return t.findIndex(n=>[de.Pending,de.Completed].includes(n.statusFlag.status)&&Qa(n)===Qa(e))!==-1;case de.Draft:return t.findIndex(n=>[de.Pending,de.Completed].includes(n.statusFlag.status)&&Qa(n)===Qa(e))!==-1;default:return!0}},Oxe=x(Exe,vxe,Zr,Ixe,xxe,yl,(e,t,s,n,r,o)=>{const l=wxe(o,t).reduce((c,d)=>{var u,h;switch(d.status){case de.Completed:{const p=s.get(d.positionId);if(p===void 0||p.type!==k.OPTION)return c;const m={symbol:p.symbol,statusFlag:{status:de.Completed,quantity:p.quantity}};return[...c,m]}case de.Pending:{const p=r.find(g=>g.id===d.orderId&&g.legs!==void 0&&g.legs.some(S=>S.instrumentType===k.OPTION));if(p===void 0)return c;const m=p.legs!==void 0?p.legs.filter(g=>g.instrumentType===k.OPTION).map(g=>({symbol:g.symbol,statusFlag:{status:de.Pending,quantity:g.quantity}})):[];return[...c,...m]}case de.Draft:{const p=o!==null?(h=(u=n.trade.get(o))==null?void 0:u[0])==null?void 0:h.orders[0]:void 0;if(p===void 0)return c;if(p.legs.some(m=>m.instrumentType===k.OPTION)){const m=p.legs.filter(g=>g.instrumentType===k.OPTION).map(g=>({symbol:g.symbol,statusFlag:{status:de.Draft,quantity:g.quantity,legs:[{direction:g.direction}]}}));return[...c,...m]}return c}default:return c}},[]);return e.reduce((c,d)=>{if(d!==void 0){const u=d.spreadPairs.map(h=>{const p=l.filter(b=>h.spreadPair.callSymbol===b.symbol),m=l.filter(b=>h.spreadPair.putSymbol===b.symbol),g=p[p.length-1],S=m[m.length-1],T=m.reduce((b,E)=>b.findIndex(v=>Qa(v)===Qa(E))!==-1||RA(E,b)?b:[...b,E],[]),y=p.reduce((b,E)=>b.findIndex(v=>Qa(v)===Qa(E))!==-1||RA(E,b)?b:[...b,E],[]);return{...h,tradeOptions:{call:g,put:S,puts:T,calls:y}}});return c.set(d.name,{...d,spreadPairs:u})}else return c},e)}),$c=e=>x(Oxe,t=>t.get(e)),Rxe=x(yl,Ai,(e,t)=>t.get(e)),Z_=x(Du,Lu,Rxe,(e,t,s)=>e?t:s==null?void 0:s.mark),Dxe=e=>x($c(e),Z_,(t,s)=>t?t.spreadPairs.map(({spreadPair:{strikeName:n}},r,o)=>{const i=parseFloat(n),l=o[r+1],c=l==null?void 0:l.spreadPair.strikeName,d=c?parseFloat(c):void 0;return s!==void 0&&d!==void 0&&i>=s&&s<d}):[]),Lxe=e=>x($c(e),t=>t?t.spreadPairs.length-1:-1),_xe=e=>x($c(e),t=>{const s=$5(t==null?void 0:t.spreadPairs);return s?parseFloat(s.spreadPair.strikeName):void 0}),Nxe=e=>x(_xe(e),Z_,(t,s)=>t!==void 0&&s!==void 0&&t<=s),Pxe=e=>x(Dxe(e),Nxe(e),Lxe(e),(t,s,n)=>{const r=t.findIndex(o=>o);return r!==-1?r:s?n:0}),kxe=e=>x($c(e),t=>t==null?void 0:t.spreadPairs),Mxe=e=>Nn(kxe(e),t=>t),$xe=e=>e.optionChain.centeredOnValues,jxe=e=>x($c(e),$xe,(t,s)=>s.get(t==null?void 0:t.name)),DA=(e,t)=>x($c(e),s=>{var n;return(n=s==null?void 0:s.spreadPairs)==null?void 0:n.findIndex(({spreadPair:{strikeName:r}})=>r===(t==null?void 0:t.toString()))}),Bxe=(e,t)=>{var r,o;const s=(r=t==null?void 0:t.call)==null?void 0:r.strike,n=(o=t==null?void 0:t.put)==null?void 0:o.strike;return x(DA(e,s),DA(e,n),(i,l)=>({callBoundaryIndex:i,putBoundaryIndex:l}))},Fxe=(e,t)=>{const s=Mxe(t.name),n=jxe(t.name),r=Pxe(t.name);return o=>{const i=Bxe(t.name,n(o));return{spreadPairs:s(o),nearStrikeIsLocked:Du(o),boundaryIndex:r(o),strikeQuantity:Axe(o),centeredOnInput:Lu(o),centeredOnField:ny(o),...i(o)}}},Hxe=e=>({getMoreQuotes:(t,s)=>{e(Gde(t,s))},getStrikeChangeQuotes:(t,s)=>{e(Yde(t,s))}}),Uxe=se(Fxe,Hxe)(bxe),Vxe=e=>{const{optionExpirationClicked:t,name:s,optionExpiration:n,seriesExpectedMove:r,impliedVolatility:o,strikeColumnWidth:i,updateTableWidth:l,columns:c,setColumns:d,centeredOnInput:u,centeredOnField:h,onOptionChainCentering:p,tradeOptions:m,earnings:g,instrumentType:S}=e,T=B.useRef(null),[y,b]=B.useState(!1),[E,v]=j.useState(!1);if(!n)return null;const D=()=>{t(s),h!==$t.Strike&&(h===$t.Delta?p(ze.DELTA,u):h===$t.ProbITM&&p(ze.PROBABILITY_ITM,u)),b(!y),!y&&Ye({category:Ve.Expansion,action:Le.OptionChainDTE,value:ay(n==null?void 0:n.expirationDate)})},w=TAe(n),N=o!==void 0?`${gr(o)}`:"",L=r!==void 0?`(±${Sn(r)})`:"",P={content:`${N} ${L}`,label:`Series volatility ${N}. Expected move ${L}`};return a.jsxs("li",{ref:T,className:"expiration-item",children:[a.jsxs("button",{tabIndex:0,"aria-label":`Show ${w} options. ${P.label}`,"aria-expanded":y,onClick:D,className:"expiration-row-caption","data-testid":"expiration-row-expand-button",children:[a.jsxs("div",{className:"row-caption",children:[a.jsx(Zy,{type:Y.ChevronDownCircle,width:16,height:16,viewBox:"2 2 20 20",dataTestId:"chevron-down-circle-icon",className:"expander",isExpandedDown:y}),a.jsx(a_,{optionExpiration:n,instrumentType:S}),ave(m)]}),a.jsxs("div",{className:"row-details",children:[g&&a.jsx("span",{title:lve(g),className:"earnings-description","data-testid":"earnings-description",children:a.jsx(X,{type:Y.Earnings,width:16,height:16,viewBox:"1 1 20 20",dataTestId:"earnings-icon"})}),P.content!==" "&&a.jsx("div",{className:"volatility",children:P.content})]})]}),y&&a.jsxs(a.Fragment,{children:[a.jsx(Vu,{customizableTableName:ko.OptionChain,topOffset:1,isOpen:E,onClose:()=>v(!1),filterVisibleItems:cve}),a.jsx(Uxe,{rowContainerRef:T,name:s,strikeColumnWidth:i,columns:c,setColumns:d,updateTableWidth:l,isCustomizationMenuOpen:E,setIsCustomizationMenuOpen:v})]})]})},Wxe=e=>e.trades,Gxe=e=>e.createTrade,Yxe=e=>e.workingOrders,qxe=(e,t)=>t.get(e)??[],J_=x(Wxe,Zr,Gxe,Yxe,yl,bn,(e,t,s,n,r,o)=>qxe(r,e).reduce((l,c)=>{var d,u;switch(c.status){case de.Completed:{const h=t.get(c.positionId);if(h===void 0||h.type!==k.OPTION)return l;const p={symbol:h.symbol,statusFlag:{status:de.Completed,quantity:h.quantity}};return[...l,p]}case de.Pending:{const h=n.find(m=>m.id===c.orderId&&m.legs!==void 0&&m.legs.some(g=>g.instrumentType===k.OPTION));if(h===void 0)return l;const p=h.legs!==void 0?h.legs.filter(m=>m.instrumentType===k.OPTION).map(m=>({symbol:m.symbol,statusFlag:{status:de.Pending,quantity:m.quantity}})):[];return[...l,...p]}case de.Draft:{const h=r!==null?(u=(d=s.trade.get(r))==null?void 0:d[0])==null?void 0:u.orders[0]:void 0;if(h===void 0)return l;if(h.legs.some(p=>p.instrumentType===k.OPTION)){const p=h.legs.filter(m=>m.instrumentType===k.OPTION).map(m=>({symbol:m.symbol,statusFlag:{status:de.Draft,quantity:m.quantity,legs:[{direction:m.direction}]}}));return[...l,...p]}return l}default:return l}},[])),Kxe=x(jO,J_,(e,t)=>e.reduce((s,n)=>{if(n!==void 0){const r=n.spreadPairs.map(o=>{const i=t.filter(u=>o.spreadPair.callSymbol===u.symbol),l=t.filter(u=>o.spreadPair.putSymbol===u.symbol),c=i[i.length-1],d=l[l.length-1];return{...o,tradeOptions:{call:c,put:d}}});return s.set(n.name,{...n,spreadPairs:r})}else return s},e)),SC=(e,t)=>t,fC=x(SC,Kxe,(e,t)=>t.get(e.name)),zxe=x(fC,e=>e==null?void 0:e.optionExpiration),Xxe=x(fC,e=>e==null?void 0:e.seriesExpectedMove),Qxe=x(fC,e=>e==null?void 0:e.impliedVolatility),Zxe=x(SC,J_,bn,(e,t,s)=>t.filter(n=>{const r=s.get(n.symbol);return!!r&&r.seriesName===e.name})),Jxe=x(SC,sC,(e,t)=>{if(!(!e.showEarnings||t===void 0))return t}),ewe=(e,t)=>({optionExpiration:zxe(e,t),seriesExpectedMove:Xxe(e,t),impliedVolatility:Qxe(e,t),tradeOptions:Zxe(e,t),centeredOnField:ny(e),centeredOnInput:Lu(e),earnings:Jxe(e,t)}),twe={optionExpirationClicked:Ude,onOptionChainCentering:qf},swe=se(ewe,twe)(Vxe),nwe=e=>e.legsLimitReached.limitReached,rwe=e=>a.jsx(a.Fragment,{children:e.isLegsLimitReached&&a.jsx("div",{"aria-live":"polite",id:"warning","aria-label":fAe.isLegsLimitReached})}),owe=e=>({isLegsLimitReached:nwe(e)}),awe=se(owe)(rwe),iwe=e=>{const[t,s]=B.useState(r_),{setColumns:n,columns:r,instrumentType:o}=e,i=B.useCallback(l=>{t!==l&&s(l)},[t]);return a.jsxs(a.Fragment,{children:[a.jsx(awe,{}),a.jsx("ul",{className:"expirations-list",children:e.optionChainNames.map((l,c)=>a.jsx(swe,{name:l,strikeColumnWidth:t,updateTableWidth:i,columns:r,setColumns:n,showEarnings:l===e.optionChainNameWithEarnings,instrumentType:o},`name-${c}`))})]})},lwe=e=>{const t=jO(e),s=BO(e),n=sC(e),r=new Date,o=s.find(i=>{var c;const l=(c=t.get(i))==null?void 0:c.optionExpiration;return l!==void 0&&n!==void 0&&n.time!==void 0&&n.time>r&&n.time<l.expirationDate});return{optionChainNames:s,optionChainNameWithEarnings:o,columns:e.columns.optionChain}},cwe=e=>({setColumns:t=>{e(Ll(ko.OptionChain,t))}}),dwe=se(lwe,cwe)(iwe),uwe=A.div`
  display: flex;
  justify-content: space-between;
  background-color: ${({theme:e})=>e.colors.component.InformationMessage.background};
  text-align: center;
  padding: 10px;
  border: 1px solid ${({theme:e})=>e.colors.component.InformationMessage.border};
  border-radius: 5px;
  margin: 10px 18px;

  ${({margin:e})=>(e==null?void 0:e.top)!==void 0&&`margin-top: ${e.top}px;`}
  ${({margin:e})=>(e==null?void 0:e.bottom)!==void 0&&`margin-bottom: ${e.bottom}px;`}
  ${({margin:e})=>(e==null?void 0:e.left)!==void 0&&`margin-left: ${e.left}px;`}
  ${({margin:e})=>(e==null?void 0:e.right)!==void 0&&`margin-right: ${e.right}px;`}

  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_SMALL)} {
    padding: 10px 2px;
    margin: 2px;
  }
`,hwe=A.button`
  height: 20px;
`,eN=e=>a.jsxs(uwe,{"data-testid":"informational-message-container",margin:e.margin,children:[a.jsx("div",{role:"alert","aria-live":"polite",className:"message",children:e.message}),e.canClose&&a.jsx(hwe,{"aria-label":"Close Message","data-testid":"information-close-button",onClick:e.closeInformation,children:a.jsx(X,{type:Y.CloseSolid,width:16,height:16,viewBox:"2 2 20 20",dataTestId:"close-solid-icon",fill:"component.InformationMessage.border"})})]}),tN=({localStorageKey:e,message:t,defaultValue:s=!1,margin:n,onClose:r})=>{let o,i;if(e&&([o,i]=Lo(e,Xe.is,s)),o)return null;const l=()=>{e&&i(!0),r&&r()};return a.jsx(eN,{message:__(t),closeInformation:l,margin:n,canClose:!!onclose||!!e})},TC=A(_n)`
  height: 34px;

  ${Wn} {
    height: 100%;
    display: flex;
    align-items: center;
    margin-left: ${({theme:{space:e}})=>e.xSmall};
    margin-right: ${({theme:{space:e}})=>e.xSmall};
    font-size: ${({theme:e})=>e.fontSizes.small};
    color: ${({theme:{colors:e}})=>e.text.primary};

    svg {
      margin-left: ${({theme:{space:e}})=>e.xSmall};
      margin-top: ${({theme:{space:e}})=>e.xxSmall};
      font-size: ${({theme:e})=>e.fontSizes.small};
    }
  }
`,pwe=A(X)`
  margin-top: 0 !important;
`,sN=[1,3,6,12,18,36],mwe=e=>sN.indexOf(e);function gwe(e){const t=s=>{e.onStrikeChange(s),Ye({category:Ve.OptionChain,action:Le.StrikeSelector,label:String(s)})};return a.jsx(TC,{"data-testid":"strike-dropdown",anchorAriaLabel:"Strike",selectedItemIndex:mwe(e.strike),values:sN,onListItemClick:s=>t(s),appendTo:document.body,getListItemKey:s=>`${s}`,renderListItemContent:s=>__(`${s}`),renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[__("Strikes"),a.jsx(ot,{ml:3,children:e.strike}),a.jsx(pwe,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",dataTestId:"arrow-dropdown-icon"})]})})}const Swe=e=>e.optionChain.strike,fwe=e=>({strike:Swe(e)}),Twe=e=>({onStrikeChange:t=>{e(kde(t))}}),ywe=se(fwe,Twe)(gwe),Cwe=A.div`
  display: flex;
  background-color: ${({theme:e})=>e.colors.paperMoney.secondary};
  color: ${wt.BLACK};
  border-radius: ${({theme:e})=>e.shape.borderRadius.secondary}px;
  margin: 8px 0;
  padding: 6px 2px;

  svg {
    margin: 1px 8px;
  }

  a {
    color: ${wt.BLACK};
  }
`,bwe=A(tt)`
  margin-left: auto;
  margin-right: 5px;
  padding: 0px;

  & > svg {
    margin: 0;
  }
`,yC=e=>a.jsxs(Cwe,{className:e.className,"aria-label":e.ariaLabel,"data-testid":e.dataTestId,children:[a.jsx("span",{"aria-hidden":!0,children:a.jsx(X,{type:Y.Info,height:18,width:18,viewBox:"2 2 20 20",dataTestId:"info-icon"})}),e.children,e.handleClose&&a.jsx(bwe,{"data-testid":"banner-close-button",onClick:e.handleClose,"aria-label":"close message",children:a.jsx(X,{type:Y.Close,width:20,height:20,viewBox:"2 2 20 20",dataTestId:"banner-close-icon",fill:"common.dark","aria-hidden":!0})})]}),Ewe="Banner: This account is not eligible to place trades within thinkorswim. Select another account or discover why in the Learning Center",Cg=()=>a.jsx(yC,{ariaLabel:Ewe,dataTestId:"unavailable-account-banner",children:a.jsxs("div",{children:[a.jsxs("span",{"aria-hidden":!0,children:[__("This account is not eligible to place trades within thinkorswim. Select another account or discover why in the")," "]}),a.jsxs("a",{"data-testid":"learning-center-link",href:"https://toslc.thinkorswim.com/center/howToTos/thinkManual/Getting-Started/Trading-on-thinkorswim",target:"_blank noopener noreferrer",children:[__("Learning Center"),__(".")]})]})});var nN=(e=>(e.trade="Trade",e))(nN||{});const Awe=(e,t=16)=>e/t,AT=(e,t=16)=>e*t,CC=()=>parseInt(getComputedStyle(document.querySelector("html")).fontSize,10),LA=e=>{document.title=`${e} | ${__(rr.tosWebTitle)}`},vwe=(e,t)=>{switch(e){case"price":return t==null?void 0:t.price;case"activationPrice":return t==null?void 0:t.activationPrice;default:return 0}},Iwe=(e,{symbol:t,priceKey:s,draftOrderIndex:n})=>{const r=Hr(e,t,n),o=vwe(s,r),i=(r==null?void 0:r.legs.length)===1?r==null?void 0:r.legs[0].instrumentType:void 0,{showFractionalPricing:l,fractionalType:c}=pn(e,t);return{price:o,priceStep:r==null?void 0:r.priceStep,priceLocked:r==null?void 0:r.priceLocked,showFractionalPricing:l,fractionalType:c,showDoubleTickForFractionalPricing:Vs(Lc(e),i)}},xwe=(e,{symbol:t,draftOrderIndex:s})=>({updatePrice(n,r,o){e({type:f.UpdateTradePrice,symbol:t,draftOrderIndex:s,[r]:n}),o===!1&&e(ng(t,s,!0))}}),vT=se(Iwe,xwe)(_oe),wwe=A(kc)`
  min-width: 110px;
`,_A=e=>a.jsx(a.Fragment,{children:__(e)});class Owe extends B.Component{constructor(){super(...arguments);R(this,"handleSelect",s=>{this.props.updateOrderType(s)})}render(){const{orderType:s,allowedOrderTypes:n,portalRef:r}=this.props;return n.length!==0&&a.jsx(wwe,{appendTo:r,variant:Pe.tertiary,width:110,placement:"bottom-start","data-testid":"order-type-dropdown",anchorAriaLabel:"Order Type",values:n,onListItemClick:this.handleSelect,getListItemKey:o=>o,selectedItemIndex:n.findIndex(o=>s===o),renderListItemContent:_A,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(ju,{children:s?_A(s):null}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",colorVariant:Pe.tertiary,dataTestId:"arrow-dropdown-icon"})]})})}}const Rwe=(e,{symbol:t,draftOrderIndex:s})=>{const n=Hr(e,t,s),r=(n==null?void 0:n.allowedOrderTypes)??[];return{orderType:n==null?void 0:n.orderType,allowedOrderTypes:r}},Dwe=(e,{symbol:t,draftOrderIndex:s})=>({updateOrderType:n=>{e({type:f.UpdateOrderType,symbol:t,draftOrderIndex:s,orderType:n})}}),NA=se(Rwe,Dwe)(Owe),rm=A.span`
  display: inline-block;
  margin-left: 5px;
  white-space: nowrap;
`,om=A.button`
  display: flex;
  align-items: center;
  border: none;
  font-size: ${({theme:e})=>e.fontSizes.small};
  color: var(--primary-btn);
  width: auto;
  padding: 7px 0 7px
    ${({theme:e,isOptionTrade:t})=>t?e.space.none:e.space.medium};
  height: 34px;
`,PA=e=>{switch(e){case pe.Buy:return __("Buy");case pe.Sell:return __("Sell")}},Lwe=e=>{switch(e){case pe.Sell:return pe.Buy;case pe.Buy:return pe.Sell}},_we=({direction:e=pe.Buy,symbol:t,toggleDirection:s,legIndex:n,isDisabled:r,draftOrderIndex:o})=>a.jsxs(ug,{className:"buy-sell-toggle",label:PA,value:e,leftValue:"Sell",rightValue:"Buy",name:`buy-sell-toggle-${o}-${n}-${PA(e)}`,onToggle:()=>s(t,o,n,Lwe(e)),disable:r,ariaLabel:"Buy Sell Toggle",children:[pe.Sell,pe.Buy]}),Nwe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>{var o;const r=Hr(e,t,n);return r===void 0?{direction:void 0}:{direction:(o=r.legs[s])==null?void 0:o.direction}},Pwe=e=>({toggleDirection:(t,s,n,r)=>e({type:f.ToggleOrderDirection,symbol:t,draftOrderIndex:s,legIndex:n,direction:r})}),kA=se(Nwe,Pwe)(_we),kwe=e=>a.jsx("div",{children:`${e.displaySymbol} ${ll(e.expirationDate)} (${e.daysToExpiration} ${__("days")})`}),Mwe=e=>a.jsx("div",{children:`${Ci(e.expirationDate)} (${e.daysToExpiration}${__("d")})`}),$we=A(kc)`
  min-width: 100px;
`;class jwe extends B.PureComponent{constructor(){super(...arguments);R(this,"handleSelect",s=>{this.props.futureSelected(s)})}render(){const{futureExpirations:s,selectedItem:n,portalRef:r}=this.props;return a.jsx($we,{appendTo:r,variant:Pe.tertiary,width:100,placement:"bottom-start","data-testid":"future-expiration-dropdown",anchorAriaLabel:"Future Contract",values:s,onListItemClick:this.handleSelect,getListItemKey:o=>o.expiration,selectedItemIndex:s.findIndex(o=>(n==null?void 0:n.expirationDate.getTime())===o.expirationDate.getTime()),renderListItemContent:kwe,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(ju,{children:n?Mwe(n):null}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",colorVariant:Pe.tertiary,dataTestId:"arrow-dropdown-icon"})]})})}}const Bwe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>{const r=Hr(e,t,n),o=r==null?void 0:r.legs[s],i=(o==null?void 0:o.availableFutureExpirations)??[],l=o==null?void 0:o.futureExpiration;return{futureExpirations:i,selectedItem:l}},Fwe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>({futureSelected:r=>e({type:f.SelectFutureExpiration,symbol:t,draftOrderIndex:n,legIndex:s,futureExpiration:r})}),MA=se(Bwe,Fwe,null,{forwardRef:!0})(jwe),Hwe=A(kc)`
  min-width: 134px;
  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    min-width: 120px;
  }
`;class Uwe extends B.PureComponent{constructor(){super(...arguments);R(this,"getSelectedValueAriaLabel",()=>{const{selectedItem:s}=this.props;if(s!==void 0)return hA({expirationDate:s.expirationDate,expirationDateForAM:s.expirationDateForAM,settlementType:s.settlementType,fullDay:!0})});R(this,"handleSelect",s=>{this.props.optionSelected(s)})}render(){const{optionExpirations:s,selectedItem:n,portalRef:r,isLocked:o}=this.props;return a.jsx(Hwe,{appendTo:r,variant:Pe.tertiary,width:134,placement:"bottom-start","data-testid":"option-expiration-dropdown",anchorAriaLabel:"Expiration Date",values:s,onListItemClick:this.handleSelect,getListItemKey:i=>i.id,selectedItemIndex:s.findIndex(i=>(n==null?void 0:n.id)===i.id),renderListItemContent:CAe,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(ju,{children:n?hA(n):null}),!o&&a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",colorVariant:Pe.tertiary,dataTestId:"arrow-dropdown-icon"})]}),isDisabled:o})}}const Vwe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>{const r=Hr(e,t,n),o=r==null?void 0:r.legs[s],i=(o==null?void 0:o.availableOptionExpirations)??[],l=o==null?void 0:o.optionExpiration;return{optionExpirations:i,selectedItem:l}},Wwe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>({optionSelected:r=>e({type:f.SelectOptionExpiration,symbol:t,optionExpiration:r,legIndex:s,draftOrderIndex:n})}),$A=se(Vwe,Wwe,null,{forwardRef:!0})(Uwe),Gwe=A(kc)`
  min-width: 81px;
  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    min-width: 71px;
  }
`,jA=e=>a.jsx(a.Fragment,{children:e});class Ywe extends B.PureComponent{constructor(){super(...arguments);R(this,"handleSelect",s=>{this.props.optionStrikeSelected(s)})}render(){const{optionStrikes:s,optionStrike:n,portalRef:r,isLocked:o}=this.props;return a.jsx(Gwe,{appendTo:r,variant:Pe.tertiary,width:81,placement:"bottom-start","data-testid":"option-strike-dropdown",anchorAriaLabel:"Strike",values:s,onListItemClick:this.handleSelect,getListItemKey:i=>i.toString(),selectedItemIndex:s.findIndex(i=>n===i),renderListItemContent:jA,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(ju,{children:n?jA(n):null}),!o&&a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",colorVariant:Pe.tertiary,dataTestId:"arrow-dropdown-icon"})]}),isDisabled:o})}}const qwe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>{const r=Hr(e,t,n),o=r==null?void 0:r.legs[s];return{optionStrikes:(o==null?void 0:o.availableOptionStrikes)??[],optionStrike:o==null?void 0:o.optionStrike}},Kwe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>({optionStrikeSelected:r=>e({type:f.SelectOptionStrike,symbol:t,legIndex:s,optionStrike:r,draftOrderIndex:n})}),BA=se(qwe,Kwe,null,{forwardRef:!0})(Ywe),$S=e=>{switch(e){case dt.Call:return __("Call");case dt.Put:return __("Put")}},zwe=e=>{switch(e){case dt.Call:return dt.Put;case dt.Put:return dt.Call}},Xwe=({legIndex:e,draftOrderIndex:t,optionType:s,toggleOptionType:n,isLocked:r})=>s===void 0?null:r===!0?a.jsxs("div",{className:"option-type-toggle toggle option-type-toggle__locked",children:[a.jsx("div",{className:"slider"}),a.jsx("div",{className:"pills",children:a.jsx("div",{className:"pill",children:$S(s)})})]}):a.jsxs(ug,{className:"option-type-toggle",label:$S,name:`option-type-toggle-${t}-${e}-${$S(s)}`,value:s,leftValue:"Call",rightValue:"Put",disable:!1,onToggle:()=>n(zwe(s)),ariaLabel:"Call Put Toggle",children:[dt.Call,dt.Put]}),Qwe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>{const r=Hr(e,t,n),o=r==null?void 0:r.legs[s];return{optionType:o==null?void 0:o.optionType}},Zwe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>({toggleOptionType:r=>e({type:f.SelectOptionType,symbol:t,legIndex:s,optionType:r,draftOrderIndex:n})}),FA=se(Qwe,Zwe)(Xwe),Jwe={LOCKED:"Limit price will match the value you specified",UNLOCKED:"Limit price will update and match <bid/ask/mid>. The price lock will lock at the time of order review."};class eOe extends B.PureComponent{render(){const{symbol:t,...s}=this.props;return a.jsx(t_,{lockColor:"action.focus",lockName:"price lock",ariaLabels:Jwe,...s})}}const tOe=(e,{symbol:t,draftOrderIndex:s})=>{const n=Hr(e,t,s);return{isLocked:(n==null?void 0:n.priceLocked)??!1}},sOe=(e,{symbol:t,draftOrderIndex:s})=>({setLockState:yc(r=>e(ng(t,s,r)),300)}),HA=se(tOe,sOe)(eOe),jS=({children:e,showFractionalPricing:t,fractionalType:s,showDoubleTickForFractionalPricing:n,dataTestId:r})=>e===void 0?a.jsx("div",{className:"price"}):a.jsx("div",{className:"price","data-testid":r,children:Vn(t,e,s,n)}),UA=({className:e="",ariaHidden:t="false",children:s})=>a.jsx("div",{"aria-hidden":t,className:`label ${e}`,children:s}),nOe=(e,t,s,n)=>{if(n!==void 0&&(n===ne.MARKET||n===ne.MOC))return"";if(e!==void 0&&t!==void 0&&s!==void 0){if(s<e)return"below-bid";if(s>t)return"above-ask"}return""},rOe=({bidPrice:e,askPrice:t,midPrice:s,bidExchange:n,askExchange:r,limitPrice:o,priceStep:i,updatePrice:l,priceLocked:c,orderType:d,showFractionalPricing:u=!1,fractionalType:h,showDoubleTickForFractionalPricing:p})=>{const m=nOe(e,t,o,d),g=o!==void 0?"price-range__value":"",S=d!==void 0&&!(d===ne.MARKET||d===ne.MOC||d===ne.TRAILSTOP),T=`${__("Bid")} ${e||null} ${n}`,y=`${__("Ask")} ${t||null} ${r}`,b=`${__("Mid")} ${s||null}`,E=e!==void 0?a.jsxs("button",{className:`bid-price ${g}`,onClick:S?()=>l(e,c):()=>null,"aria-label":T,"data-testid":"bid-price-button",children:[a.jsxs(UA,{ariaHidden:"true",children:[a.jsx(X,{type:Y.Triangle,width:7,height:7,viewBox:"0 0 7 7",dataTestId:"triangle-icon-flipped-horizontal",fill:"none",className:"flip-horizontal"}),__("Bid")]}),a.jsxs("div",{className:"price-container","aria-hidden":"true",children:[a.jsx("span",{className:"exchange-label bid",children:n}),a.jsx(jS,{dataTestId:"bid-price",showFractionalPricing:u,fractionalType:h,showDoubleTickForFractionalPricing:p,children:e})]})]}):null,v=t!==void 0?a.jsxs("button",{className:`ask-price ${g}`,onClick:S?()=>l(t,c):()=>null,"aria-label":y,"data-testid":"ask-price-button",children:[a.jsxs(UA,{ariaHidden:"true",children:[__("Ask"),a.jsx(X,{type:Y.Triangle,width:7,height:7,viewBox:"0 0 7 7",dataTestId:"triangle-icon",fill:"none"})]}),a.jsxs("div",{className:"price-container","aria-hidden":"true",children:[a.jsx(jS,{dataTestId:"ask-price",showFractionalPricing:u,fractionalType:h,showDoubleTickForFractionalPricing:p,children:t}),a.jsx("span",{className:"exchange-label ask",children:r})]})]}):null,D=()=>{if(e!==void 0&&t!==void 0&&i!==void 0&&s!==void 0&&d!==void 0){const H=(s-e)/(t-e)*100,C=H<15?{left:0,justifyContent:"flex-start"}:H>85?{right:"0",justifyContent:"flex-end"}:{left:`calc(${H}% - 1.9rem)`};if(d!==ne.MARKET&&d!==ne.MOC&&s>e&&s<t)return a.jsxs(a.Fragment,{children:[a.jsx("input",{tabIndex:-1,className:"slider mid-point","data-testid":"mid-point","aria-hidden":!0,type:"range",max:t,min:e,value:s,step:i,readOnly:!0}),a.jsx("div",{"aria-label":b,className:"mid-label",style:C,"data-testid":"mid-label-wrapper",children:a.jsx(jS,{dataTestId:"mid-label",showFractionalPricing:u,fractionalType:h,showDoubleTickForFractionalPricing:p,children:s})})]})}return null},w=e!==void 0?`${m==="below-bid"?__(". Trade Price Below the Bid"):""}${__(".")} ${__("Bid, ")}${e}${__(".")} `:"",N=()=>s!==void 0&&t!==void 0&&e!==void 0&&o!==void 0&&o>=e&&o<=t&&s>=e&&s<=t?`${__("Mid price")}, ${s}${__(".")} `:"",L=t!==void 0?`${m==="above-ask"?__("Trade Price Above the Ask. "):""}${__("Ask, ")}${t}${__(".")}`:"",P=`${w}${N()}${L}`,O=e!==void 0&&t!==void 0&&i!==void 0&&o!==void 0?a.jsx("input",{"data-testid":"price-slider",className:"slider price",type:"range","aria-label":"price",role:"slider",tabIndex:0,max:t,min:e,value:o,step:i,onChange:H=>l(Number(H.target.value),c)}):null;return a.jsx("div",{className:"price-slider-wrapper",children:a.jsxs("div",{className:`price-slider ${m}`,"aria-label":`${__("Bid")} ${__("Ask")} ${__("Slider")} ${T} ${y}`,"data-testid":"price-slider-wrapper",children:[E,S?a.jsxs("div",{className:Te("input-container"),"aria-label":P,role:"group","data-testid":"input-container",children:[D(),O]}):null,v]})})},oOe=(e,{rootSymbol:t,draftOrderIndex:s})=>{var c;const n=Hr(e,t,s),r=e.quotes.get(t),{showFractionalPricing:o,fractionalType:i}=pn(e,t),l=n&&((c=n.legs)==null?void 0:c.length)===1?n.legs[0].instrumentType:void 0;return{bidPrice:n==null?void 0:n.bidPrice,askPrice:n==null?void 0:n.askPrice,midPrice:n==null?void 0:n.midPrice,bidExchange:(r==null?void 0:r.bidExchange)??"",askExchange:(r==null?void 0:r.askExchange)??"",limitPrice:n==null?void 0:n.price,priceStep:n==null?void 0:n.priceStep,orderType:n==null?void 0:n.orderType,priceLocked:(n==null?void 0:n.priceLocked)??!1,showFractionalPricing:o,fractionalType:i,showDoubleTickForFractionalPricing:Vs(Lc(e),l)}},aOe=(e,{rootSymbol:t,draftOrderIndex:s})=>({updatePrice(n,r){e({type:f.UpdateTradePrice,symbol:t,draftOrderIndex:s,price:n}),r||e(ng(t,s,!0))}}),VA=se(oOe,aOe)(rOe),iOe=A(kc)`
  margin-left: 0;
  min-width: 110px;
`,lOe=e=>a.jsx("div",{children:__(nu(e))}),cOe=e=>{const t=o=>{e.updateTif(o)},{selectedTif:s,availableTifs:n,portalRef:r}=e;return n.length!==0&&a.jsx(iOe,{appendTo:r,variant:Pe.tertiary,width:110,placement:"bottom-start","data-testid":"tif-dropdown",anchorAriaLabel:"Time in Force",values:n,onListItemClick:t,getListItemKey:o=>o,selectedItemIndex:n.findIndex(o=>s===o),renderListItemContent:lOe,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(ju,{children:s?Vj(s):null}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",colorVariant:Pe.tertiary,dataTestId:"arrow-dropdown-icon"})]})})},dOe=(e,{symbol:t,draftOrderIndex:s})=>{const n=Hr(e,t,s),r=n!==void 0&&n.allowedTifs!==void 0?n.allowedTifs:[];return{selectedTif:n!==void 0?n.tif:void 0,availableTifs:r}},uOe=(e,{symbol:t,draftOrderIndex:s})=>({updateTif(n){e({type:f.UpdateOrderTif,symbol:t,draftOrderIndex:s,tif:n})}}),WA=se(dOe,uOe)(cOe);var Dr=(e=>(e.SHARES="# Shares",e.DOLLARS="$ Dollars",e))(Dr||{}),IT=(e=>(e.SHARES="1",e.DOLLARS="500.00",e))(IT||{});const hOe=A(_n)`
  height: 20px;

  ${Wn} {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: ${({theme:e})=>e.fontSizes.medium};
    font-weight: normal;
    color: ${({theme:{colors:e}})=>e.text.primary};
    padding: 1px 10px;
    border: 0;
  }

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    height: 100%;
  }
`,pOe=A.form`
  display: flex;
  border: 1px solid ${({theme:e})=>e.colors.selected.secondary.main};
  border-radius: 3px;
  background: ${({theme:e})=>e.colors.component.Trade.background.primary};

  input {
    height: 20px;
    width: 76px;
    font-size: ${({theme:e})=>e.fontSizes.medium};
    padding: 0 8px;
    /* stylelint-disable */
    -moz-appearance: textfield;
    /* stylelint-enable */
    display: block;
    color: ${({theme:e})=>e.colors.text.primary};
    border: none;
    outline: none;

    & :disabled {
      color: ${({theme:e})=>e.colors.input.disabled};
      cursor: not-allowed;
    }
  }

  button {
    padding: 0 0 0 4px !important;
  }

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    height: 34px;

    button {
      padding: 0 0 0 8px !important;
    }

    input {
      height: 100%;
    }
  }
`,mOe=A.div`
  margin-left: 4px;
  clip-path: polygon(0% 0%, 75% 0%, 100% 50%, 75% 100%, 0% 100%);
  background-color: ${({theme:{colors:e}})=>e.border.tertiary};
  width: 20px;
  height: 22px;
  display: flex;
  align-items: center;

  span {
    color: ${({theme:e})=>e.colors.component.Trade.icon.secondary};
    margin-left: 5px;
  }

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    height: 34px;
    width: 30px;
    margin-left: 8px;

    span {
      margin-left: 8px;
    }
  }
`,rN=[ne.LIMIT,ne.LOC,ne.STOP],fp={isDragging:!1,orderContext:{id:void 0,price:void 0,direction:void 0,details:void 0,isWorkingOrder:!1,orderType:void 0,quantity:void 0},targetPrice:void 0},gOe=(e,t)=>{const s=t.getBoundingClientRect();return{x:Math.round(e.clientX-s.left),y:Math.round(e.clientY-s.top)}},GA=(e,t,s,n,r)=>o=>{var d;const i=o.target,{x:l,y:c}=gOe(o,i);i.ondragend=yOe(t,s),i.style.borderColor=n[Ft.FOCUS],i.style.borderStyle="solid",(d=i.querySelector('[class*="CancelOrderButton"]'))==null||d.remove(),o.dataTransfer.effectAllowed="move",o.dataTransfer.setDragImage(i,l,c),r||(s.current=void 0),setTimeout(()=>{t(u=>({isDragging:!0,orderContext:e,targetPrice:r?u.targetPrice:void 0}))},0)},bC=(e,t)=>e.price!==t.price&&e.direction===t.direction,SOe=(e,t)=>s=>{bC(e,t)&&s.preventDefault()},fOe=(e,t)=>s=>{bC(e,t)&&s.preventDefault()},TOe=(e,t,s,n,r)=>o=>{bC(e,t)&&(s(i=>({...i,orderContext:{...i.orderContext,details:t.details},isDragging:!1,targetPrice:t.price})),n.current=t.price,r(Number(t.price))),o.preventDefault()},yOe=(e,t)=>()=>{t.current===void 0?e(fp):e(s=>({...s,isDragging:!1}))},COe=e=>e.length===1&&e[0].orderType!==void 0&&rN.includes(e[0].orderType),bOe=(e,t,s,n,r,o,i)=>e?t!==void 0?(Number(s)-n[0])/r*t*o:0:(Number(s)-n[0])*o*i,EOe=(e,t,s,n,r,o,i,l,c,d,u)=>{let h;const p=i??100;return l===k.OPTION?h=bOe(u,d,t,o,r,e,p):l===k.PRODUCT||l===k.FUTURE?h=c!==void 0?(Number(t)-n)/r*c*e:0:h=e*Number(t)-s,h.toFixed(2)},oN=(e,t,s,n)=>{const r=t===pe.Buy?"+":"",o=n?go:s,i=V1(e);return`${r}${o} ${i}`},AOe=(e,t)=>rN.includes(e.orderType)&&e.legs.length===1&&e.legs[0].instrumentType===t,EC=e=>e<.01?5:2,vOe=(e,t,s)=>{const n=EC(e),r=Math.floor(s/2);return new Array(s).fill(0).map((o,i)=>((i<=r?r-i:-(i-r))*e+t).toFixed(n))},IOe=(e,t,s)=>{if(!s)return Math.floor(e.length/2);const n=EC(t),r=s.toFixed(n);return e.findIndex(o=>o===r)},xOe=(e,t)=>e.filter((s,n)=>{const o=e.length/t/2;if(n>(o-1)*t&&n<(o+1)*t)return s}),AC=(e,t)=>{const s=e.replace(/^0*(\d)/,"$1"),n=Math.floor(Number(s));return n!==1/0&&String(n)===s&&n>=0||s===""?s:t},BS=Object.values(Kr),wOe=Fe([I(BS[0]),I(BS[1]),...BS.slice(2).map(e=>I(e))]),YA=e=>wOe.is(e),qA=e=>{switch(e){case Kr.ASK:return"ask";case Kr.BID:return"bid";case Kr.MARKET:return"market"}},KA=[__(Dr.SHARES),__(Dr.DOLLARS)];var ex,tx;class OOe extends j.Component{constructor(){super(...arguments);R(this,"state",{value:((ex=this.props.quantityOffset)==null?void 0:ex.toFixed(2))??((tx=this.props.quantity)==null?void 0:tx.toString())??"",focused:!1});R(this,"validateQuantityOffset",s=>{const n=nS(s);return!isNaN(+s)&&!(n>2)?s:this.state.value});R(this,"handleChange",s=>{const n=s.target.value;this.updateInput(n,void 0,this.sendUpdate)});R(this,"updateInput",(s,n,r)=>{let o;const{quantityType:i}=this.props;i===Dr.SHARES?o=AC(s,this.state.value):o=this.validateQuantityOffset(s),this.setState(n!==void 0?{value:o,...n}:{value:o},r)});R(this,"sendUpdate",yc(()=>{const{updateQuantity:s,updateQuantityOffset:n}=this.props,{value:r}=this.state,{quantityType:o}=this.props,i=Math.abs(Number(r));Number.isNaN(i)||i>Number.MAX_SAFE_INTEGER||i===0||(o===Dr.SHARES&&s(i),o===Dr.DOLLARS&&n(i))},300,{leading:!1,trailing:!0}));R(this,"resetValue",()=>{const{value:s}=this.state,{quantityType:n}=this.props,r=n===Dr.SHARES?IT.SHARES:IT.DOLLARS;Number(s)?n===Dr.SHARES?this.updateInput(s,{focused:!1}):this.updateInput(Number(s).toFixed(2),{focused:!1}):this.updateInput(r,{focused:!1},this.sendUpdate)});R(this,"updateQuantityType",s=>{const{defaultQuantity:n,updateQuantity:r,updateQuantityOffset:o}=this.props;s===__(Dr.DOLLARS)?(this.setState({value:"500.00"}),o(500)):(this.setState({value:n!==void 0?n.toString():""}),n!==void 0&&r(n))});R(this,"handleKeyDown",s=>{const{value:n}=this.state,{quantityType:r,isEditing:o,updateTradeDirection:i}=this.props,l=s.key,c=s.metaKey||s.ctrlKey;if(l==="+"&&(s.preventDefault(),o||i(pe.Buy)),l==="-"&&(s.preventDefault(),o||i(pe.Sell)),r===Dr.DOLLARS&&l===we.ArrowUp||l===we.ArrowDown){const u=nS(n),h=l===we.ArrowUp?(parseFloat(n)+1).toFixed(u):(parseFloat(n)-1).toFixed(u);s.preventDefault(),this.setState({value:h}),this.updateInput(h,void 0,this.sendUpdate)}if(l===we.ArrowUp||l===we.ArrowDown||l===we.ArrowLeft||l===we.ArrowRight||l===we.Backspace||l===we.Tab||l===we.Delete||l==="a"&&c||l==="1"&&c)return;(r===Dr.SHARES?/^[0-9]/:/^[0-9.]/).test(l)||s.preventDefault()});R(this,"setFocused",()=>this.setState({focused:!0}))}componentDidUpdate(s){const{quantity:n,isSpread:r,defaultQuantity:o,updateQuantity:i,quantityOffset:l,quantityType:c}=this.props,{value:d}=this.state,u=l&&!s.quantityOffset,h=nS(d);n!==void 0&&n!==s.quantity&&!l&&this.setState({value:n.toString()}),l!==s.quantityOffset&&this.setState({value:(l==null?void 0:l.toFixed(u?2:h))??(n==null?void 0:n.toString())??""}),r&&r!==s.isSpread&&c===Dr.DOLLARS&&(this.setState({value:o!==void 0?o.toString():""}),o!==void 0&&i(o))}render(){const{value:s}=this.state,{isSpread:n,isPlaceQuantityLinkOrdersAllowed:r,isEditing:o,quantityType:i,isPartial:l}=this.props;return a.jsxs(pOe,{onSubmit:c=>c.preventDefault(),children:[!n&&!o&&r&&a.jsx(hOe,{variant:Pe.tertiary,width:100,placement:"bottom-start","data-testid":"trade-quantity-type-dropdown",anchorAriaLabel:"Quantity Type",values:KA,onListItemClick:this.updateQuantityType,getListItemKey:c=>c,selectedItemIndex:i?KA.indexOf(__(i)):0,renderListItemContent:c=>a.jsx("div",{children:c}),renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",colorVariant:Pe.tertiary,dataTestId:"arrow-dropdown-icon"}),a.jsx(mOe,{children:a.jsx("span",{children:i==null?void 0:i.split(" ")[0]})})]})}),a.jsx("input",{disabled:l,"aria-label":"Quantity Input","data-testid":"trade-quantity-input",type:"number",step:"any",min:1,value:s,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onFocus:this.setFocused,onBlur:this.resetValue})]})}}const ROe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>{var l,c,d;const r=Hr(e,t,n);if(r===void 0)return{};const o=e.userProperties.userProperties,{quantity:i}=Pm((l=r.legs[s])==null?void 0:l.instrumentType,o);return{defaultQuantity:i,quantity:(c=r.legs[s])==null?void 0:c.quantity,quantityOffset:r.quantityOffset,quantityType:r.quantityOffset!==void 0?Dr.DOLLARS:Dr.SHARES,isSpread:r.legs.length>1,isPlaceQuantityLinkOrdersAllowed:(d=ade(e))==null?void 0:d.isPlaceQuantityLinkOrdersAllowed,isPartial:r.isPartial}},DOe=(e,{symbol:t,legIndex:s,draftOrderIndex:n})=>({updateQuantity(r){e({type:f.UpdateTradeQuantity,symbol:t,quantity:r,draftOrderIndex:n,legIndex:s})},updateQuantityOffset(r){e(FSe(t,r,n))},updateTradeDirection(r){e({type:f.ToggleOrderDirection,symbol:t,legIndex:s,direction:r,draftOrderIndex:n})}}),zA=se(ROe,DOe)(OOe),aN=e=>e.workingOrders,iN=e=>e.instruments,lN=e=>e.quotes,bg=x(So,mt,(e,t)=>{var s,n;if(t!==null)return(n=(s=e.get(t))==null?void 0:s[0])==null?void 0:n.orders[0]}),LOe=e=>x(So,e,(t,s)=>{var n,r;if(s!==null)return(r=(n=t.get(s))==null?void 0:n[0])==null?void 0:r.orders[0]}),XA=(e,t)=>{if(e.orderType!==void 0)switch(e.orderType){case ne.LIMIT:case ne.STOP:case ne.STOPLIMIT:case ne.TRAILSTOPLIMIT:case ne.LOC:return t===void 0?e.price:e.direction===pe.Buy?t.ask:t.bid;case ne.MARKET:case ne.MOC:case ne.TRAILSTOP:return t===void 0?void 0:e.direction===pe.Buy?t.ask:t.bid}},_Oe=(e,t)=>{if(e.orderType!==void 0)switch(e.orderType){case ne.LIMIT:case ne.STOP:case ne.STOPLIMIT:case ne.LOC:return t===void 0?e.price:e.legs[0].direction===pe.Buy?t.ask:t.bid;case ne.MARKET:case ne.MOC:return t===void 0?e.midPrice:e.legs[0].direction===pe.Buy?t.ask:t.bid}},NOe=e=>e.orderType===ne.LIMIT||e.orderType===ne.STOP?e.price:e.legs.length===1?e.legs[0].direction===pe.Buy?e.askPrice:e.bidPrice:e.midPrice,cN=(e,t,s,n,r,o)=>e.map(i=>{switch(i.status){case de.Completed:{const l=t.get(i.positionId);if(l===void 0)return;const c=o.get(l.symbol);if(l.type===k.OPTION){const d=s.get(l.symbol);return c===void 0||d===void 0||c.type!==k.OPTION?void 0:[{type:l.type,expirationDate:c.expiration,expirationDateForAM:c.expirationForAM,settlementType:c.settlementType,strikePrice:c.strike,quantity:l.quantity,optionType:c.optionType,daysToExpiration:c.daysToExpiration,openPrice:l.openPrice,multiplier:c.multiplier,impliedVolatility:d.impliedVolatility,symbol:c.symbol}]}else return c===void 0?void 0:[{type:l.type,quantity:l.quantity,multiplier:c.multiplier,openPrice:l.openPrice,symbol:c.symbol}]}case de.Draft:return r===void 0?void 0:r.legs.map(l=>{const c=NOe(r);if(l===void 0||l.symbol==="")return;const d=o.get(l.symbol);if(l.instrumentType===k.OPTION){const u=s.get(l.symbol),h=_Oe(r,u);return d===void 0||u===void 0||d.type!==k.OPTION?void 0:{type:d.type,expirationDate:d.expiration,expirationDateForAM:d.expirationForAM,settlementType:d.settlementType,strikePrice:d.strike,quantity:l.direction===pe.Buy?l.quantity:-l.quantity,optionType:d.optionType,openPrice:h===void 0?r.midPrice:h,impliedVolatility:u.impliedVolatility,multiplier:d.multiplier,daysToExpiration:d.daysToExpiration,limitPrice:c,symbol:d.symbol}}else return d===void 0?void 0:{openPrice:c,multiplier:d.multiplier,quantity:l.direction===pe.Buy?l.quantity:-l.quantity,symbol:d.symbol}}).filter(Ut);case de.Pending:{const l=n.find(c=>c.id===i.orderId);return l===void 0||l.legs===void 0||l.legs.length===0?void 0:l.legs.map(c=>{const d=s.get(c.symbol),u=o.get(c.symbol);return c.instrumentType===k.OPTION?u===void 0||d===void 0||u.type!==k.OPTION?void 0:{type:u.type,expirationDate:u.expiration,expirationDateForAM:u.expirationForAM,settlementType:u.settlementType,strikePrice:u.strike,quantity:c.quantity,openPrice:XA(l,d),optionType:u.optionType,multiplier:u.multiplier,impliedVolatility:d.impliedVolatility,daysToExpiration:u.daysToExpiration,limitPrice:l.price,symbol:u.symbol}:u===void 0?void 0:{type:u.type,openPrice:XA(l,d),multiplier:u.multiplier,quantity:l.quantity,symbol:u.symbol}}).filter(Ut)}default:return}}).filter(Ut).reduce((i,l)=>[...i,...l],[]),POe=x(Cr,Zr,lN,aN,bg,iN,cN),kOe=e=>x(Tie(e),Zr,lN,aN,LOe(e),iN,cN);var La=(e=>(e.Long="LONG",e.Short="SHORT",e))(La||{}),ys=(e=>(e.PriceChart="PriceChart",e.GainAndLossChart="GainAndLossChart",e.LowerStudy="LowerStudy",e.AccountHistory="AccountHistory",e))(ys||{});const MOe=e=>e.currentTime,vC=x(MOe,e=>e),Eg=e=>{const t=Os(e);return t!==null?e.quotes.get(t):void 0},$Oe=e=>x(an(e),xC,(t,s)=>t!==null?s.get(t):void 0),jOe=.015,IC=1e3*60*60*24,dN=IC*365.24,BOe=50,uN=e=>e.instruments,xC=e=>e.quotes,wC=e=>e.workingOrders,OC=x(Rae,Dae,(e,t)=>t!==void 0&&t.getTime()>new Date().getTime()?et(t):e),hN=Tm(c1,(e,t)=>{const s=e,n=t;if(s.length!==n.length)return!1;const r=i=>i.symbol+i.quantity,o={};s.forEach(i=>{o[r(i)]=!0});for(const i of n){const l=r(i);if(o[l]===void 0)return!1}return!0}),pN=hN(POe,e=>e),FOe=e=>hN(kOe(e),t=>t),HOe=Nn(Cr,uN,bg,wC,(e,t,s,n)=>e.map(r=>{var o;switch(r.status){case de.Draft:return((s==null?void 0:s.legs)??[]).map(l=>t.get(l.symbol));case de.Pending:{const i=n!==void 0?n.find(c=>c.id===r.orderId):void 0,l=i!==void 0&&i.legs!==void 0?(o=i.legs)==null?void 0:o.map(c=>t.get(c.symbol)):[];return[t.get(r.symbol),...l]}default:return[t.get(r.symbol)]}}).reduce((r,o)=>[...o,...r],[]).filter(Ut)),mN=x(HOe,e=>e.filter(t=>t.type===k.OPTION)),RC=Nn(mN,e=>e),gN=(e,t)=>((e instanceof Date?e:new Date(e)).getTime()-(t instanceof Date?t:new Date(t)).getTime())/dN,Ag=x(Eg,e=>e==null?void 0:e.mark),UOe=x(Eg,e=>e==null?void 0:e.ask),VOe=x(Eg,e=>e==null?void 0:e.bid),SN=e=>x($Oe(e),t=>t==null?void 0:t.mark),WOe=x(Ro,e=>e==null?void 0:e.priceTick),vg=x(RC,e=>e.length===0?30:e.reduce((t,s)=>s.daysToExpiration<t?s.daysToExpiration:t,Number.MAX_SAFE_INTEGER)),fN=x(Cr,bg,wC,Zr,(e,t,s,n)=>{const r={},o=l=>{r[l]===void 0&&(r[l]=0)},i={};return s.forEach(l=>i[l.id]=l),e.forEach(l=>{switch(l.status){case de.Completed:{o(l.symbol);const c=n.get(l.positionId);r[l.symbol]+=c!==void 0?c.quantity:0;break}case de.Pending:{const c=i[l.orderId];if(c===void 0||c.legs===void 0)break;for(const d of c.legs)o(d.symbol),r[d.symbol]+=d.quantity;break}case de.Draft:if(t!==void 0)for(const c of t.legs){if(c.symbol===void 0)continue;o(c.symbol);const d=c.direction===pe.Sell?0-c.quantity:c.quantity;r[c.symbol]+=d}break}}),r}),TN=x(fN,RC,(e,t)=>{let s=new Date(new Date().getTime()+IC*30);if(t.length!==0){const n=t.map(r=>{if(e[r.symbol]!==0)return r.settlementType===wo.AM?r.expirationForAM.valueOf():r.expiration.valueOf()}).filter(Ut);n.length>0&&(s=new Date(Math.min(...n)))}return s}),DC=Nn(TN,e=>e),GOe=x(mN,fN,(e,t)=>e.map(s=>{if(t[s.symbol]!==0)return s.strike}).filter(Ut)),YOe=({from:e,to:t})=>{const s=t-e;return{from:Math.max(0,e-.25*s),to:t+.25*s}},qOe=x(Eg,vC,DC,(e,t,s)=>{if(!(e===void 0||e.mark===void 0))return e.volatilityIndex!==void 0&&e.volatilityIndex<=Number.MAX_SAFE_INTEGER?e.volatilityIndex*e.mark*Math.sqrt(Math.max(gN(s,t),0)):.1*e.mark}),Ig=x(Ag,qOe,GOe,RC,(e,t,s,n)=>{if(e===void 0||t===void 0||n.length===0)return;const r=Math.min(e-t,...s),o=Math.max(e+t,...s),i=(o-r)*.1;return YOe({from:Math.floor(r-i),to:Math.ceil(o+i)})}),KOe=x(Ig,e=>{if(e!==void 0)return e.from}),zOe=x(Ig,e=>{if(e!==void 0)return e.to}),yN=x(KOe,zOe,(e,t)=>{if(e===void 0||t===void 0)return;if(e===t)return[e];const s=[],n=(t-e)/BOe;for(let r=e;r<t;r+=n)s.push(r);return s.push(t),s}),FS=(e=0,t=0,s=0)=>e*t*s,QA=e=>e.type===k.FUTURE||e.type===k.FOREX,CN=x(Cr,bg,wC,Zr,uN,xC,(e,t,s,n,r,o)=>{const i={};return s.forEach(l=>i[l.id]=l),e.reduce((l,c)=>{switch(c.status){case de.Completed:{const d=n.get(c.positionId);if(d===void 0)return l;const u=r.get(d.symbol);let h=0;return u!==void 0&&QA(u)?h=FS(d.quantity,d.openPrice,u.multiplier):d.openCost!==void 0&&(h=d.openCost),l+h}case de.Pending:{const d=i[c.orderId];if(d===void 0||d.legs===void 0||d.legs[0]===void 0)return l;const u=d.legs[0],h=r.get(u.symbol);if(h===void 0||h.multiplier===void 0)return l;let p;if(d.price===void 0){const m=d.compositeSymbol,g=m!==void 0?o.get(m):void 0;p=Xd(0,"mark",g)}else p=d.price;return l+FS(d.quantity,p,h.multiplier)}case de.Draft:{if(t===void 0)return l;let d=0;const u=t.legs.length>0?r.get(t.legs[0].symbol):void 0;if(u!==void 0&&QA(u)){const h=o.get(t.legs[0].symbol),p=t.price!==void 0?t.price:Xd(0,"mark",h);d=FS(t.quantity,p,u.multiplier)}else t.cost!==void 0&&(d=t.cost);return l+d}}return l},0)}),XOe=(e,t,s,n)=>{if(e===n.strikePrice&&(e+=e*1e-9),n.multiplier===void 0||n.impliedVolatility===void 0)return 0;const r=n.impliedVolatility===xx||n.impliedVolatility===wx?0:Math.abs(n.impliedVolatility),o=n.settlementType===wo.AM?n.expirationDateForAM:n.expirationDate,i=B5.blackScholes(e,n.strikePrice,Math.max(gN(o,t),0),r,s,n.optionType===dt.Call?"call":"put");return n.quantity*n.multiplier*i},QOe=()=>{const e=yw();return e!==null?e/100:jOe},ZOe=x(xC,e=>{const t=e.get(xf);return t!==void 0&&t.mark!==void 0?t.mark/100:QOe()}),bN=x(pN,ZOe,(e,t)=>(s,n)=>{const r=e.map(o=>o.type===k.OPTION?XOe(n,s,t,o):o.multiplier===void 0?0:n*o.quantity*o.multiplier);return j5(r)}),JOe=x(bN,yN,OC,(e,t,s)=>{const n=s.toDate();return t!==void 0?t.map(r=>{const o=e(n,r);return{price:r,theoValue:o}}):[]}),eRe=x(bN,yN,DC,(e,t,s)=>t!==void 0?t.map(n=>{const r=e(s,n);return{price:n,theoValue:r}}):[]),tRe=x(JOe,CN,(e,t)=>e.map(s=>({price:s.price,gain:s.theoValue-t}))),sRe=x(eRe,CN,(e,t)=>e.map(s=>({price:s.price,gain:s.theoValue-t}))),nRe=x(Lae,e=>{var t,s,n,r;if(e){const o=e.length-1,i=(s=(t=e[o])==null?void 0:t.y)==null?void 0:s.open,l=(r=(n=e[o])==null?void 0:n.y)==null?void 0:r.close;return i&&l?rhe(i,l):"buy"}return"buy"}),EN=x(pN,e=>e.filter(s=>s.type===k.OPTION).map(s=>({strike:s.strikePrice,optionType:s.optionType,longOrShort:s.quantity>=0?La.Long:La.Short}))),AN=x(EN,Ig,Ag,vg,DC,vC,ms,Ic,(e,t,s,n,r,o,i,l)=>n!==void 0&&t!==void 0&&r!==void 0&&e!==void 0&&o!==void 0&&s!==void 0&&i!==ge.Charts&&e.length>0&&!l),rRe=x(Ro,e=>(e==null?void 0:e.priceTick)??.01),vN=e=>x(_u(e),t=>(t==null?void 0:t.priceTick)??.01),oRe=x(OC,vC,(e,t)=>{const s=e.toDate(),r=(s.getTime()-t.getTime())/IC;return[Ci(s).toLocaleUpperCase(),Math.ceil(r).toString()+__("d")].join(" ")}),aRe=x(TN,vg,(e,t)=>[Ci(e).toLocaleUpperCase(),t+__("d")].join(" ")),iRe=A.div`
  position: relative;
  width: ${({pillWidth:e,pillCount:t})=>e*t}px;
  display: flex;
  height: 22px;
  font-size: ${({theme:e})=>e.fontSizes.small};
  line-height: 14px;
  border-radius: 100px;
  border: 1px solid ${({theme:e})=>e.colors.selected.secondary.main};
  background-color: ${({theme:e})=>e.colors.selected.secondary.background};
  flex-shrink: 0;

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    height: 32px;
  }
`,IN=A.div`
  width: ${({pillWidth:e})=>e-e/23}px;
  text-align: center;
  cursor: pointer;
  background-color: ${({theme:e})=>e.colors.action.focus};
  border-radius: 100px;
  transition: 0.2s ease-out;
  margin: 2px;

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    height: auto;
    width: ${({pillWidth:e,pillCount:t})=>e-e/(20/t)}px;
  }
`,lRe=A.div`
  display: flex;
  flex-direction: row;
  position: absolute;
  top: 0;
  bottom: 0;

  & ~ ${IN} {
    transform: translateX(
      ${({selectedIndex:e,pillWidth:t})=>e*t-2*e}px
    );

    ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
      transform: translateX(
        ${({selectedIndex:e,pillWidth:t})=>e*t+1*e}px
      );
    }
  }
`,cRe=A.label`
  width: ${({width:e})=>e-1}px;
  text-align: center;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  z-index: 1;
  height: 100% !important;
  color: ${({theme:e,checked:t})=>t?e.colors.selected.primary.contrastText:e.colors.component.Trade.secondary.contrastText};

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    height: 32px;
    width: ${({width:e})=>e}px;
  }
`,dRe=A.input`
  position: absolute;
  clip: rect(0, 0, 0, 0);
  pointer-events: none;
`;function uRe(e,t){const{children:s,selectedValue:n,onToggle:r,convertChildToInputValue:o,name:i,renderLabel:l,dataTestId:c,ariaLabel:d,pillWidth:u=45}=e,h=s.indexOf(n);return a.jsxs(iRe,{ref:t,tabIndex:-1,"data-testid":c,"aria-label":d,pillWidth:u,pillCount:s.length,children:[s.map((p,m)=>a.jsx(dRe,{type:"checkbox",tabIndex:-1,checked:p===n,value:o(p),onChange:()=>p!==n&&r(p),name:i,id:`row${m}`+i+o(p),"data-testid":`row-checkbox${m}`+i+o(p),"aria-label":o(p)},m)),a.jsx(lRe,{selectedIndex:h,pillWidth:u,children:s.map((p,m)=>a.jsx(cRe,{index:m,htmlFor:`row${m}`+i+o(p),checked:p===n,tabIndex:0,"aria-hidden":!0,width:u,onKeyDown:g=>{g.key===we.Enter&&r(p)},children:l(p)},m))}),a.jsx(IN,{pillWidth:u,pillCount:s.length})]})}const xN=j.forwardRef(uRe),hRe=wc.below(lt.TABLET_SMALL),pRe=bm(e=>{const{tda:t}=e;return{root:{borderRadius:"4px",position:"relative",fontSize:"1.4rem",width:"100%"},input:{width:"100%",maxWidth:"120px",height:"20px !important",boxSizing:"border-box",fontFamily:"TDASans, sans-serif",padding:"0 0 0 8px","&:focus":{border:"none !important"},"&::-webkit-calendar-picker-indicator":{display:"none"}},[hRe]:{input:{height:"32px !important"}},colorSecondary:{backgroundColor:t.colors.selected.secondary.background}}})(u1),mRe=A.div`
  display: flex;
  border-radius: 4px;

  ${({theme:e,showIncrementButtons:t})=>t&&`
      height: 26px;
      ${e.breakpoints.below(wc.tabletSmall)} {
        height: 38px;
      }
    `}

  ${({theme:{colors:e,shape:t}})=>Ms({variants:{[Pe.primary]:{border:`${t.borderWidth.primary}px solid ${e.icon.primary}`},[Pe.secondary]:{border:`${t.borderWidth.primary}px solid ${e.border.tertiary}`}}})}
`,ZA=A(tt)`
  display: flex;
  align-items: center;
  justify-content: center;
  height: 20px;
  width: 20px;
  margin: 2px;
  background-color: ${({theme:{colors:e}})=>e.action.disabled};
  border-radius: 2px;

  & svg > g > g {
    stroke: ${({theme:{colors:e}})=>e.background.primary};
  }

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    height: ${({theme:e})=>e.space.xLarge};
    width: ${({theme:e})=>e.space.xLarge};
  }
`,xT=e=>e.seconds(0).milliseconds(0),gRe=(e,t,s,n,r,o,i)=>l=>{var h;const[c,d,u]=(h=l.currentTarget.value)==null?void 0:h.split("-");if(d!==void 0&&u!==void 0&&c!==void 0){const p=t.clone();if(p.set("month",Number(d)-1),p.set("date",Number(u)),p.set("year",Number(c)),p.format("YYYY MM DD")!==t.format("YYYY MM DD")){const g=r!==void 0?r(p):!1,S=et().subtract(nw-1,"days"),T=g?et.max(S,p):o?et.max(et(),p):i?et.min(et(),p):p;s(xT(T)),n(xT(T))}}else s(et(e))},SRe=e=>{const{value:t,anchorId:s,label:n,ariaLabel:r,iconFillColor:o,onUpdate:i,disablePast:l,disableFuture:c,shouldDisableDate:d,colorVariant:u,showIncrementButtons:h,showDateFromProps:p,onOpen:m,onClose:g,container:S,customPopoverProps:T}=e,[y,b]=B.useState(!1),[E,v]=j.useState(et(t)),D=`datepicker-anchor-${s}`,w=j.useMemo(()=>{const C=`${E.get("month")+1}`.padStart(2,"0"),M=E.get("date").toString().padStart(2,"0");return`${E.get("year")}-${C}-${M}`},[E]),N=document.getElementById(D);B.useEffect(()=>{N===null&&b(!1)},[N,b]),B.useEffect(()=>{v(et(t))},[t]),B.useEffect(()=>{y?m&&m(y):g&&g(y)},[y]);const L=B.useCallback(()=>{const C=E.clone().add(1,"days");v(C),i(C)},[v,E,i]),P=B.useCallback(()=>{const C=E.clone().subtract(1,"days");v(C),i(C)},[v,E,i]),F=et(t),O=j.useMemo(()=>{const C=`${F.get("month")+1}`.padStart(2,"0"),M=F.get("date").toString().padStart(2,"0");return`${F.get("year")}-${C}-${M}`},[F]),H=j.useCallback(gRe(t,E,v,i,d,l,c),[t,E,v,i,d,l,c]);return a.jsx(F5,{"aria-label":r,open:y,label:n,leftArrowButtonProps:{"aria-label":"Previous month","aria-hidden":!1},rightArrowButtonProps:{"aria-label":"Next month","aria-hidden":!1},PopoverProps:{"data-testid":D,anchorEl:()=>document.getElementById(D),anchorOrigin:{vertical:"bottom",horizontal:"left"},container:S,...T},value:E,variant:"inline",onOpen:()=>{b(!0)},onClose:()=>{b(!1),setTimeout(()=>{var C;return(C=document.getElementById(D))==null?void 0:C.focus()})},onChange:C=>{v(et(C==null?void 0:C.toISOString())),i(et(C==null?void 0:C.toISOString()))},onAccept:C=>{const M=C??et(),q=l?et.max(M,et()):M;v(xT(q)),b(!1)},disablePast:l,disableFuture:c,shouldDisableDate:d,TextFieldComponent:C=>a.jsxs(mRe,{"data-testid":"date-picker",variant:u,showIncrementButtons:h,children:[h&&a.jsx(ZA,{"aria-label":`Decrease ${r}`,onClick:P,children:a.jsx(X,{type:Y.Minus,width:10,height:2,viewBox:"0 0 10 2",dataTestId:"minus-icon"})}),a.jsx(pRe,{type:"date",required:!0,id:D,inputProps:{"aria-label":`${r} Input`},defaultValue:p?O:w,color:u,onBlur:H,endAdornment:a.jsx(Be,{role:"button",tabIndex:0,pr:"10px",style:{cursor:"pointer"},"aria-label":"Open Calendar Widget",onClick:()=>b(!0),onKeyDown:M=>{M.key===we.Enter&&(M.stopPropagation(),b(!0))},children:a.jsx(X,{type:Y.Calendar,width:18,height:18,viewBox:"3 2 19 19",dataTestId:"calender-icon",fill:o})})},D),h&&a.jsx(ZA,{"aria-label":`Increase ${r}`,onClick:L,children:a.jsx(X,{type:Y.Plus,width:10,height:10,viewBox:"0 0 10 10",dataTestId:"plus-icon"})})]})})},wN=j.memo(SRe),fRe=wc.below(lt.TABLET_SMALL),TRe=bm(e=>{const{tda:t}=e;return{root:{borderRadius:"4px",position:"relative",backgroundColor:t.colors.selected.secondary.background,border:`1px solid ${t.colors.border.tertiary}`,fontSize:"1.4rem",width:"auto"},input:{width:"100%",maxWidth:"120px",height:"20px !important",boxSizing:"border-box",fontFamily:"TDASans, sans-serif",padding:"0 8px","&:focus":{border:"none !important"},"&::-webkit-calendar-picker-indicator":{display:"none"}},[fRe]:{input:{height:"32px !important"}}}})(u1),JA=e=>e.seconds(0).milliseconds(0),yRe=e=>{const{type:t,value:s,onDateTimeUpdate:n,orderRuleIndex:r,draftOrderIndex:o}=e,[i,l]=B.useState(!1),[c,d]=j.useState(()=>et(s)),u=`order-rule-${r}-${o}`,h=`order-rule-timepicker-anchor-${r}-${o}`,p=j.useRef(null),m=j.useMemo(()=>{const T=c.get("minute").toString().padStart(2,"0");return`${c.get("hour").toString().padStart(2,"0")}:${T}`},[c]),g=un(c),S=Uu();return B.useEffect(()=>{S&&g!==null&&!g.isSame(c)&&n(c)},[c,g]),a.jsxs(h1,{utils:p1,locale:et.locale(),children:[a.jsx(wN,{value:s,anchorId:u,label:"Order Rule Date",ariaLabel:`Order Rule ${t} Date`,iconFillColor:"action.focus",onUpdate:d,showIncrementButtons:!1,colorVariant:"secondary",disablePast:!0}),a.jsx(H5,{open:i,label:"Order Rule Time","aria-label":`Order Rule ${t} Time`,value:c,variant:"inline",autoOk:!0,PopoverProps:{"data-testid":h,anchorEl:()=>document.getElementById(h)},onOpen:()=>l(!0),onClose:()=>{l(!1),d(JA(et.max(p.current??et(),et()))),setTimeout(()=>{var T;return(T=document.getElementById(h))==null?void 0:T.focus()})},onChange:T=>{p.current=T},onAccept:yr,TextFieldComponent:()=>a.jsx(TRe,{type:"time",id:h,tabIndex:0,required:!0,inputProps:{"aria-label":`Order Rule ${t} Time Input`},defaultValue:m,onBlur:T=>{var E;const[y,b]=(E=T.currentTarget.value)==null?void 0:E.split(":");if(y!==void 0&&b!==void 0){const v=c.clone();if(v.set("hour",Number(y)),v.set("minute",Number(b)),v.format("LT")!==c.format("LT")){const w=et.max(et(),v);d(JA(w))}}},endAdornment:a.jsx(Be,{role:"button",tabIndex:0,pr:"10px","aria-label":"Open Time Widget",style:{cursor:"pointer"},onClick:()=>l(!0),onKeyDown:T=>{T.key===we.Enter&&(T.stopPropagation(),l(!0))},children:a.jsx(X,{type:Y.Time,width:16,height:16,viewBox:"1 2 21 21",dataTestId:"time-icon",fill:"action.focus"})})},h)})]})},CRe=j.memo(yRe),bRe=(e,{symbol:t})=>{const s=Vm(e,t),{showFractionalPricing:n,fractionalType:r}=pn(e,t);return{tickSize:(s==null?void 0:s.priceStep)??1,midPrice:(s==null?void 0:s.midPrice)??1,showFractionalPricing:n,fractionalType:r,showDoubleTickForFractionalPricing:Vs(Lc(e),Ym(e))}},ERe=se(bRe)(XSe),ARe=e=>{const{updateOrderRule:t,draftOrderIndex:s,removeOrderRule:n,symbol:r,index:o,type:i,method:l,trigger:c,value:d,portalRef:u,askPrice:h,bidPrice:p,markPrice:m}=e,[g,S]=j.useState(i),[T,y]=j.useState(l),[b,E]=j.useState(d),v=j.useRef(null),D=un(l),w=L=>{T!==Ys.DATE_TIME&&typeof b=="number"&&b!==void 0?t(o,{type:L,symbol:r,trigger:c,method:T,value:b}):T===Ys.DATE_TIME&&Ja.isMoment(b)&&t(o,{type:L,symbol:r,trigger:hr.EqualTo,method:Ys.DATE_TIME,value:b}),S(L)},N=L=>{t(o,{type:g,symbol:r,trigger:hr.EqualTo,method:Ys.DATE_TIME,value:L})};return j.useEffect(()=>{S(i)},[i]),j.useEffect(()=>{E(d)},[d]),j.useEffect(()=>{v.current&&v.current.focus()},[v]),j.useEffect(()=>{if(T===Ys.DATE_TIME){let L=d;D!==Ys.DATE_TIME&&D!==null&&(L=Ja()),E(L),D!==null&&t(o,{type:i,symbol:r,trigger:hr.EqualTo,method:Ys.DATE_TIME,value:L})}if(T!==Ys.DATE_TIME&&D===Ys.DATE_TIME){let L=0;switch(T){case Go.ASK:{L=h,E(h);break}case Go.BID:{L=p,E(p);break}case Go.MARK:L=m,E(m)}D!==null&&t(o,{type:i,symbol:r,trigger:c,method:T,value:L})}},[T]),a.jsxs(lT,{"data-testid":"order-rule","aria-label":T===Ys.DATE_TIME?tfe(d,i):sfe(d,Kp(c),i),children:[a.jsx(Kn,{variant:cn.remove,"aria-label":"Remove order rule",onClick:()=>n(o)}),a.jsxs(qSe,{children:[a.jsx(xN,{ref:v,dataTestId:"order-rule-submit-cancel-toggle",ariaLabel:"Order Rule Submit Cancel Toggle",selectedValue:g,convertChildToInputValue:L=>L,name:o.toString()+"OrderRuleInput"+s,pillWidth:60,onToggle:w,renderLabel:L=>__(L),children:[Ls.Submit,Ls.Cancel]}),a.jsx(ot,{children:"WHEN"}),a.jsx(WD,{appendTo:u,"data-testid":"order-rule-method-dropdown",variant:Pe.tertiary,width:Vy,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(ot,{fontSize:5,children:T}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",colorVariant:Pe.tertiary,dataTestId:"arrow-dropdown-icon"})]}),values:u0,getListItemKey:L=>`${L}`,onListItemClick:L=>{T!==L&&y(L)},renderListItemContent:L=>a.jsx(ot,{fontSize:5,children:L}),anchorAriaLabel:`Order Rule Method: ${T}`,selectedItemIndex:u0.indexOf(T)}),T===Ys.DATE_TIME&&typeof b!="number"&&a.jsx(CRe,{onDateTimeUpdate:N,orderRuleIndex:o,draftOrderIndex:s,type:g,value:b}),T!==Ys.DATE_TIME&&typeof b=="number"&&a.jsx(ERe,{portalRef:u,updateOrderRule:t,orderRuleIndex:o,draftOrderIndex:s,trigger:c,method:T,symbol:r,type:g,value:b})]})]})},vRe=j.memo(ARe,fs),IRe=(e,{symbol:t,index:s,draftOrderIndex:n})=>{const r=Rc(e,t),o=r==null?void 0:r.orderRules[n];let i;if((o==null?void 0:o.length)===2){const l=o[ORe(s)];l.method===Ys.DATE_TIME&&(i=l.type===Ls.Submit?Ls.Cancel:Ls.Submit)}return{askPrice:UOe(e)??1,bidPrice:VOe(e)??1,markPrice:Ag(e)??1,defaultDateTimeOrderRuleType:i}},xRe=(e,{symbol:t,draftOrderIndex:s})=>({updateOrderRule(n,r){e($Se(s,n,r))},removeOrderRule(n){e(MSe(t,s,n))}}),wRe=se(IRe,xRe)(vRe),ORe=e=>(e+1)%2,RRe=A.div`
  padding: ${({theme:e})=>e.space.xSmall};
  background-color: ${({theme:e})=>e.colors.selected.secondary.background};

  ${lT} + ${lT} {
    margin-top: ${({theme:e})=>e.space.xSmall};
  }
`,DRe=e=>{var i;const{draftOrderIndex:t,symbol:s,groupedOrder:n,portalRef:r}=e,o=(i=n==null?void 0:n.orderRules)==null?void 0:i[t];return a.jsx(RRe,{"data-testid":"order-rule-section",children:o==null?void 0:o.map((l,c)=>a.jsx(wRe,{portalRef:r,index:c,draftOrderIndex:t,symbol:s,trigger:l.trigger,value:l.value,method:l.method,type:l.type},c))})},LRe=j.memo(DRe),_Re=(e,{symbol:t})=>({groupedOrder:Rc(e,t)}),NRe=se(_Re,null,null,{areStatePropsEqual:fs})(LRe),PRe=A(er)`
  margin-left: ${({theme:e})=>e.space.xxSmall};
  margin-right: ${({theme:e})=>`${e.space.xxxSmall} !important`};
  background-color: ${({theme:e})=>e.colors.component.Trade.background.primary};
  border: none;

  :focus-within {
    border: none;
  }

  input {
    background-color: ${({theme:e})=>e.colors.component.Trade.background.primary};
  }

  button {
    background-color: ${({theme:e})=>e.colors.component.Trade.secondary.contrastText};
  }

  button:focus {
    background-color: ${({theme:e})=>e.colors.selected.primary.background};
  }

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    .step {
      height: 28px;
      width: 28px;
    }

    &.stepper {
      margin-top: 0;
      margin-bottom: 1px;
    }
  }
`,kRe=A.form`
  display: flex;
  border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.selected.secondary.main}}`};
  border-radius: 3px;
  background: ${({theme:e})=>e.colors.component.Trade.background.primary};
  margin-left: ${({theme:e})=>e.space.xSmall};
  margin-right: ${({theme:e})=>e.space.xSmall};

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    height: 34px;
  }

  :focus {
    background-color: ${({theme:e})=>e.colors.selected.primary.background};
  }
`,MRe=A(_n)`
  height: 22px;

  ${Wn} {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: ${({theme:e})=>e.fontSizes.medium};
    font-weight: normal;
    color: ${({theme:{colors:e}})=>e.text.primary};
    padding: 0;
    border: 0;
  }

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    height: 100%;
  }
`,$Re=A.div`
  margin-left: ${({theme:e})=>e.space.xxSmall};
  clip-path: polygon(0% 0%, 75% 0%, 100% 50%, 75% 100%, 0% 100%);
  background-color: ${({theme:{colors:e}})=>e.border.tertiary};
  width: 20px;
  height: 22px;
  display: flex;
  align-items: center;

  span {
    color: ${({theme:e})=>e.colors.component.Trade.icon.secondary};
    margin-left: 5px;
  }

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    height: 34px;
    width: 30px;

    span {
      margin-left: ${({theme:e})=>e.space.xSmall};
    }
  }
`,jRe=A(X)`
  margin-left: ${({theme:e})=>e.space.xxSmall};
`,ev=100,id={[qo.DOLLARS]:"$ Dollars",[qo.PERCENT]:"% Percent"},BRe=e=>e>=0,FRe=e=>e<=0,HRe=e=>{const{symbol:t,draftOrderIndex:s,priceStep:n,priceOffset:r,trailStopInputType:o,isPercent:i,setTrailStopInputType:l,quantity:c,setTrailStopPriceOffset:d,fractionalType:u,showFractionalPricing:h,showDoubleTickForFractionalPricing:p}=e,m=c!==void 0&&c>0,[g,S]=j.useState(r);j.useEffect(()=>{S(i?r*ev:r)},[i,r]);const T=j.useCallback(N=>{const L=Object.keys(id).find(P=>id[P]===N)??qo.DOLLARS;l(t,s,L)},[l,t,s]),y=N=>{if(N===0)return d(t,s,0);const L=i?+(N/ev).toFixed(4):N;d(t,s,L)},b=()=>Object.keys(id).indexOf(o),E=N=>N,v=N=>a.jsx(a.Fragment,{children:__(N)}),D=m?BRe:FRe,w=()=>a.jsxs(a.Fragment,{children:[a.jsx(jRe,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon","aria-hidden":"true",colorVariant:Pe.tertiary}),a.jsx($Re,{children:a.jsx("span",{children:o})})]});return a.jsxs(kRe,{onSubmit:N=>N.preventDefault(),children:[a.jsx(MRe,{width:100,placement:"bottom-start","data-testid":"trailstop-type-dropdown",variant:Pe.tertiary,anchorAriaLabel:`Trailstop in ${id[o]}`,values:Object.values(id),onListItemClick:T,getListItemKey:E,selectedItemIndex:b(),renderListItemContent:v,renderAnchorButtonContent:w}),a.jsx(PRe,{dataTestId:`trailstop-price-${s}`,onUpdateValue:y,isValid:D,isTrailStopSellOrder:!m,value:g,valueStep:n,fractionalType:u,showFractionalPricing:h,showDoubleTickForFractionalPricing:p,isPercent:i})]})},URe=1,VRe=.01,WRe=.1,GRe=(e,{symbol:t,draftOrderIndex:s})=>{const n=Hr(e,t,s),{showFractionalPricing:r,fractionalType:o}=pn(e,t),i=(n==null?void 0:n.stopPriceLink)===$d.PERCENT?qo.PERCENT:qo.DOLLARS,l=(n==null?void 0:n.priceStep)??VRe;return{priceOffset:(n==null?void 0:n.stopPriceOffset)??WRe,priceStep:i===qo.DOLLARS?l:URe,quantity:n==null?void 0:n.quantity,trailStopInputType:i,isPercent:i===qo.PERCENT,showFractionalPricing:r,fractionalType:o,showDoubleTickForFractionalPricing:Vs(Lc(e),Ym(e))}},YRe={setTrailStopPriceOffset:jSe,setTrailStopInputType:BSe},tv=se(GRe,YRe)(HRe),sv="limit-price",qRe="activation-price";class KRe extends B.Component{constructor(){super(...arguments);R(this,"timers",[]);R(this,"state",{offset:0,priceBeforeReview:0,quantityBeforeReview:0,isReviewExpanded:!1});R(this,"remValue",CC());R(this,"handleFocus",()=>{this.props.shouldFocus&&this.props.triggerFocus(this.props.tradeTicketRef)});R(this,"shouldLockOption",()=>{const{instrumentType:s}=this.props;return s===k.OPTION});R(this,"shouldLockOptionExpiration",()=>{const{instrumentType:s,isEditing:n}=this.props;return this.shouldLockOption()||s===k.FUTURE&&n});R(this,"isAllowsNegative",()=>{const{legs:s}=this.props;return s[0].instrumentType===k.PRODUCT||s[0].instrumentType===k.FUTURE||s.length>1});R(this,"renderMobileOrderWrapper",()=>{const{symbol:s,type:n,hasTradableOptions:r,legs:o,containerRef:i,draftOrderIndex:l,shouldShowAddOrderRule:c}=this.props;if(s===void 0||s==="")return null;const d=o.length===3&&(o[0].instrumentType===k.STOCK||o[0].instrumentType===k.ETF)||o.length===1&&o[0].instrumentType===k.FUTURE,u=r&&o.length<Wa&&!d,h=u||c;return a.jsxs("div",{className:Te("order-wrapper",this.props.hasOrderRule&&"border-top"),children:[h&&a.jsxs("div",{className:"trade-leg-buttons",children:[u&&a.jsx(wT,{multiLeg:!0,variant:Pe.secondary,symbol:s,draftOrderIndex:l,withIcon:!0,iconFillColor:"action.focus"}),c&&a.jsxs(om,{"aria-label":`Add ${__("Order Rule")}`,onClick:()=>this.props.addOrderRule(),"data-testid":"add-order-rule",children:[a.jsx(X,{type:Y.Add,width:16,height:16,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",fill:"action.focus"}),a.jsx(rm,{children:__("Order Rule")})]})]}),a.jsx(VA,{rootSymbol:s,draftOrderIndex:l}),a.jsxs("div",{className:"overall-trade-inputs",children:[(n===ne.LIMIT||n===ne.LOC||n===ne.STOP||n===ne.STOPLIMIT)&&a.jsx(vT,{symbol:s,draftOrderIndex:l,priceKey:"price",id:`${sv}-${l}`,allowsNegative:this.isAllowsNegative()}),(n===ne.LIMIT||n===ne.LOC||n===ne.STOP||n===ne.STOPLIMIT)&&a.jsx(HA,{symbol:s,draftOrderIndex:l}),n===ne.TRAILSTOP&&a.jsxs(a.Fragment,{children:[a.jsx("div",{children:__("MARK")}),a.jsx(tv,{symbol:s,draftOrderIndex:l})]}),a.jsx(NA,{portalRef:i,symbol:s,draftOrderIndex:l,onMount:this.onMount}),a.jsx(WA,{portalRef:i,symbol:s,draftOrderIndex:l,onMount:this.onMount})]})]})});R(this,"onMount",s=>{const n=window.setTimeout(()=>this.setState({offset:this.state.offset+s/this.remValue}),0);this.timers.push(n)})}componentDidUpdate(s,n){const{price:r,quantity:o,isReviewOrderExpanded:i}=this.props,{priceBeforeReview:l,quantityBeforeReview:c}=this.state;o&&r&&i&&!l&&!c&&this.setState({priceBeforeReview:r,quantityBeforeReview:o,isReviewExpanded:!0}),this.handleFocus()}componentDidMount(){this.handleFocus()}componentWillUnmount(){this.state.isReviewExpanded&&(this.props.price!==this.state.priceBeforeReview||this.props.quantity!==this.state.quantityBeforeReview)&&Ye({category:Ve.TradeTicket,action:Le.AdjustDuringReview,label:ks.AdjustedOrder}),this.timers.forEach(s=>window.clearTimeout(s))}render(){const{symbol:s,type:n,error:r,legs:o,hasTradableOptions:i,orderTypeError:l,tifError:c,minimumQuantityError:d,deleteDraftLeg:u,isEditing:h,closeButtonMessages:p,containerRef:m,draftOrderIndex:g,orderError:S,hasOrderRule:T,shouldShowAddOrderRule:y,unavailableAccount:b}=this.props,E=o.map(N=>N.optionStrikeError).concat([r,S,l,c,d]).filter(N=>N!==void 0),v=o.length===3&&(o[0].instrumentType===k.STOCK||o[0].instrumentType===k.ETF)||o.length===1&&o[0].instrumentType===k.FUTURE,D=this.shouldLockOption(),w=this.shouldLockOptionExpiration();return s!==void 0&&s!==""?a.jsxs("div",{className:"trade-ticket",ref:this.props.tradeTicketRef,id:`tradeTicket-${g}`,tabIndex:-1,children:[o.map((N,L)=>a.jsxs(j.Fragment,{children:[a.jsx(jr,{children:a.jsxs("div",{className:"leg trade-row center-vertically",children:[a.jsx(Kn,{variant:cn.remove,"data-testid":`remove-leg-button-trade#${g}-leg#${L}`,"aria-label":p[L],onClick:()=>u(s,L,o.length)}),a.jsx(kA,{symbol:s,draftOrderIndex:g,legIndex:L,isDisabled:h}),a.jsx(zA,{isEditing:h,symbol:s,draftOrderIndex:g,legIndex:L}),N.instrumentType===k.OPTION?a.jsxs(a.Fragment,{children:[a.jsx($A,{symbol:s,draftOrderIndex:g,legIndex:L,portalRef:m,isLocked:w}),a.jsx(BA,{symbol:s,draftOrderIndex:g,legIndex:L,hasError:N.optionStrikeError!==void 0&&N.optionStrikeError!=="",portalRef:m,isLocked:D}),a.jsx(FA,{symbol:s,draftOrderIndex:g,legIndex:L,isLocked:D})]}):(N.instrumentType===k.FUTURE||N.instrumentType===k.PRODUCT)&&N.availableFutureExpirations!==void 0&&N.futureExpiration!==void 0&&N.availableFutureExpirations.length>0?a.jsx(MA,{portalRef:m,symbol:s,draftOrderIndex:g,legIndex:L}):null]})}),a.jsxs(fr,{children:[a.jsxs("div",{className:"leg trade-row center-vertically",children:[a.jsx(Kn,{variant:cn.remove,"data-testid":`remove-leg-button-trade#${g}-leg#${L}`,"aria-label":p[L],onClick:()=>u(s,L,o.length)}),a.jsx(kA,{symbol:s,draftOrderIndex:g,legIndex:L,isDisabled:h}),a.jsx(zA,{isEditing:h,symbol:s,draftOrderIndex:g,legIndex:L})]},L+"mobile"),a.jsx("div",{className:"leg trade-row option-row center-vertically",children:N.instrumentType===k.OPTION?a.jsxs(a.Fragment,{children:[a.jsx($A,{symbol:s,draftOrderIndex:g,legIndex:L,portalRef:m,isLocked:w}),a.jsx(BA,{symbol:s,draftOrderIndex:g,legIndex:L,hasError:N.optionStrikeError!==void 0&&N.optionStrikeError!=="",portalRef:m,isLocked:D}),a.jsx(FA,{symbol:s,draftOrderIndex:g,legIndex:L,isLocked:D})]}):(N.instrumentType===k.FUTURE||N.instrumentType===k.PRODUCT)&&N.availableFutureExpirations!==void 0&&N.futureExpiration!==void 0&&N.availableFutureExpirations.length>0?a.jsx(MA,{portalRef:m,symbol:s,draftOrderIndex:g,legIndex:L}):null})]})]},L)),T&&a.jsx(NRe,{portalRef:m,symbol:s,draftOrderIndex:g},g),a.jsx(vi,{warnings:E}),b&&a.jsx(Cg,{}),a.jsxs(j.Fragment,{children:[a.jsxs(jr,{children:[a.jsxs("div",{className:Te("order-wrapper",this.props.hasOrderRule&&"border-top"),children:[a.jsxs("div",{className:"trade-leg-buttons",children:[i&&o.length<Wa&&!v&&a.jsx(a.Fragment,{children:a.jsx(wT,{multiLeg:!0,variant:Pe.secondary,symbol:s,draftOrderIndex:g,withIcon:!0,iconFillColor:"action.focus"})}),y&&a.jsxs(om,{"aria-label":`Add ${__("Order Rule")}`,onClick:()=>this.props.addOrderRule(),children:[a.jsx(X,{type:Y.Add,width:16,height:16,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",fill:"action.focus"}),a.jsx(rm,{children:__("Order Rule")})]})]}),a.jsx(VA,{rootSymbol:s,draftOrderIndex:g}),a.jsxs("div",{className:"lock-wrapper",children:[(n===ne.LIMIT||n===ne.LOC||n===ne.STOP||n===ne.STOPLIMIT)&&a.jsx(vT,{symbol:s,priceKey:"price",id:`${sv}-${g}`,draftOrderIndex:g,allowsNegative:this.isAllowsNegative()}),(n===ne.LIMIT||n===ne.LOC||n===ne.STOP||n===ne.STOPLIMIT)&&a.jsx(HA,{symbol:s,draftOrderIndex:g})]}),n===ne.TRAILSTOP&&a.jsxs(a.Fragment,{children:[a.jsx("div",{children:__("MARK")}),a.jsx(tv,{symbol:s,draftOrderIndex:g})]}),a.jsx(NA,{portalRef:m,symbol:s,draftOrderIndex:g,onMount:this.onMount}),a.jsx(WA,{portalRef:m,symbol:s,draftOrderIndex:g,onMount:this.onMount})]}),n===ne.STOPLIMIT&&a.jsx("div",{className:"order-wrapper activation",style:{paddingRight:`${this.state.offset+1.5}rem`},children:a.jsx(nv,{draftOrderIndex:g,symbol:s,allowsNegative:this.isAllowsNegative()})})]}),a.jsxs(fr,{children:[this.renderMobileOrderWrapper(),n===ne.STOPLIMIT&&a.jsx("div",{className:"order-wrapper activation",children:a.jsx(nv,{draftOrderIndex:g,symbol:s,allowsNegative:this.isAllowsNegative()})})]})]})]}):null}}const nv=({symbol:e,draftOrderIndex:t,allowsNegative:s})=>a.jsxs(a.Fragment,{children:[a.jsx("label",{className:"activation-label",children:__("Activation Price")}),a.jsx(vT,{symbol:e,draftOrderIndex:t,priceKey:"activationPrice",id:`${qRe}-${t}`,allowsNegative:s})]}),zRe=e=>e.createTrade.orderConfirmation,XRe=e=>e.focus.focusedId,QRe=x(XRe,e=>e===ps.TRADE_TICKET),LC=Ur(Os,So,(e,t)=>{var s,n;return e?(n=(s=t.get(e))==null?void 0:s[0])==null?void 0:n.orders[0]:void 0}),ZRe=Ur(LC,Al,(e,t)=>{const s=GO(t);return e&&s?e.legs.filter(n=>n.instrumentType===s).length===0&&e.legs.length<Wa:!1}),ON=Ur(LC,e=>e!==void 0?e.id!==void 0:!1),JRe=Ur(Os,zRe,(e,t)=>{const s=e?t.get(e):void 0;return s==null?void 0:s.error}),eDe=Ur(LC,Al,(e,t)=>{if(e===void 0)return[];const s=e.legs.length>1;return e.legs.map(n=>{const r=n.quantity?`${n.direction===pe.Buy?"+":"-"}${n.quantity} `:"",o=t===void 0?"":t.displaySymbol,{optionExpiration:i,optionStrike:l,optionType:c}=n,d=tDe(i,l,c);return`Delete ${r}${o}${d}${s?" Leg":""} from Draft Trade`})}),tDe=(e,t,s)=>{if(e&&t&&s){const n=e&&e.settlementType===wo.AM?e.expirationDateForAM:e.expirationDate;return` ${rC(e)}${e.expirationStyle===Sa.Weekly?" weekly":""} ${Ci(n)} ${t} ${s}`}else return""},sDe=(e,{symbol:t,draftOrderIndex:s})=>{var i,l;const n=Hr(e,t,s),r=Rc(e,t),o=((l=(i=r==null?void 0:r.orderRules)==null?void 0:i[s])==null?void 0:l.length)??0;return{symbol:t,...n,type:n==null?void 0:n.orderType,legs:(n==null?void 0:n.legs)??[],error:JRe(e),hasTradableOptions:UO(e),canAddUnderlyingLeg:ZRe(e),isEditing:ON(e),closeButtonMessages:eDe(e),shouldFocus:QRe(e),instrumentType:YO(e),hasOrderRule:o>0,shouldShowAddOrderRule:o<2,unavailableAccount:MO(e)}},nDe=(e,{symbol:t,draftOrderIndex:s})=>({deleteDraftLeg(n,r,o){o===1&&Ye({category:Ve.Trade,action:Le.DeleteDraftOrderTicket}),e({type:f.DeleteDraftLeg,rootSymbol:n,draftOrderIndex:s,legIndex:r})},triggerFocus(n){e({type:f.TriggerFocus,ref:n})},addOrderRule(){e(PSe(t,s))}}),rv=se(sDe,nDe)(KRe),rDe=({symbol:e,buyOption:t,multiLeg:s,isDisabled:n,isHidden:r,iconFillColor:o,withIcon:i})=>r?null:a.jsxs(om,{"aria-label":`Add ${s?__("Option Leg"):__("Option Trade")}`,onClick:()=>!n||s?t(e):null,"data-testid":"buy-option",isOptionTrade:!s,children:[i&&a.jsx(X,{type:Y.Add,width:16,height:16,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",fill:o}),a.jsx(rm,{children:s?__("Option Leg"):__("Option Trade")})]}),oDe=Ur(Os,So,(e,t)=>{var n,r;const s=e?(r=(n=t.get(e))==null?void 0:n[0])==null?void 0:r.orders[0]:void 0;return s?s.legs.length===1&&s.legs[0].instrumentType===k.OPTION:!1}),aDe=(e,{symbol:t,draftOrderIndex:s})=>{const n=oDe(e),r=ON(e);return{symbol:t,isDisabled:n,isHidden:r}},iDe=(e,t)=>({buyOption:async s=>{t.multiLeg?(e({type:f.BuyOptionLeg,draftOrderIndex:t.draftOrderIndex,rootSymbol:s}),Ye({category:Ve.Trade,action:Le.AddOptionLeg,label:ks.TradeTicket})):(Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:s}),e({type:f.BuyOption,symbol:s}),e(Us(ps.TRADE_TICKET))}),Ye({category:Ve.Trade,action:Le.AddOptionTrade,label:ks.TradeTicket}))}}),wT=se(aDe,iDe)(rDe);var vr=(e=>(e.Butterfly="Butterfly",e.Calendar="Calendar",e.Diagonal="Diagonal",e.Vertical="Vertical",e.IronCondor="Iron Condor",e.CoveredStock="Covered Stock",e))(vr||{});const ov=e=>{switch(e){case nt.BUTTERFLY:return __("Butterfly");case nt.CALENDAR:return __("Calendar");case nt.COVERED:return __("Covered Stock");case nt.DIAGONAL:return __("Diagonal");case nt.IRON_CONDOR:return __("Iron Condor");case nt.VERTICAL:default:return __("Vertical")}},lDe=({symbol:e,buyStrategy:t,spreadName:s,isDisabled:n=!1,iconClassName:r,withIcon:o=!0})=>e!==null?a.jsxs(om,{"aria-label":`Add ${ov(s)}`,onClick:()=>n?null:t(e,s),children:[o&&a.jsx(X,{type:Y.Add,width:16,height:16,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",className:r}),a.jsx(rm,{"data-testid":`trade-instrument-${s}-label`,children:ov(s)})]}):null,av=Ur(mt,e=>e),RN=e=>{switch(e){case nt.BUTTERFLY:return Le.AddButterflyTrade;case nt.CALENDAR:return Le.AddCalendarTrade;case nt.COVERED:return Le.AddCoveredStockTrade;case nt.DIAGONAL:return Le.AddDiagonalTrade;case nt.IRON_CONDOR:return Le.AddIronCondorTrade;case nt.VERTICAL:default:return Le.AddVerticalTrade}},cDe=(e,t)=>{const s=av(e),n=NO(e),r=s?n.get(s):void 0,o=r?r.spreadName===t.spreadName:!1;return{symbol:av(e),isDisabled:o}},dDe=e=>({buyStrategy:(t,s)=>{e({type:f.UncheckAllTrades,rootSymbol:t}),e({type:f.BuyStrategy,spreadName:s,symbol:t}),e(Us(ps.TRADE_TICKET)),Ye({category:Ve.Trade,action:RN(s),label:ks.TradeTicket})}}),HS=se(cDe,dDe)(lDe);class uDe extends B.Component{constructor(){super(...arguments);R(this,"spreadNameDisplayValues",[vr.Butterfly,vr.CoveredStock,vr.Calendar,vr.Diagonal,vr.IronCondor,vr.Vertical])}render(){const s=this.spreadNameDisplayValues.reduce((o,i)=>i===vr.CoveredStock&&this.props.instrumentType!==k.STOCK&&this.props.instrumentType!==k.ETF?o:[...o,i],[]),n=o=>this.props.spreadNameFromTrade===void 0?!1:o===vr.CoveredStock?o.split(" ")[0]===cc(this.props.spreadNameFromTrade):o===cc(this.props.spreadNameFromTrade),r=o=>{switch(o){case vr.Butterfly:return nt.BUTTERFLY;case vr.Calendar:return nt.CALENDAR;case vr.CoveredStock:return nt.COVERED;case vr.Diagonal:return nt.DIAGONAL;case vr.IronCondor:return nt.IRON_CONDOR;case vr.Vertical:return nt.VERTICAL}};return a.jsx(TC,{"data-testid":"strategy-dropdown",anchorAriaLabel:"Strategy",values:s,onListItemClick:o=>{this.props.symbol===void 0||n(o)||this.props.buyStrategyTrade(this.props.symbol,r(o))},getListItemKey:o=>o,appendTo:document.body,strategy:"fixed",renderListItemContent:o=>__(o),renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[__("Strategy"),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",dataTestId:"arrow-dropdown-icon"})]})})}}const hDe=x(mt,So,(e,t)=>{var n,r;const s=e?(r=(n=t.get(e))==null?void 0:n[0])==null?void 0:r.orders[0]:void 0;return s==null?void 0:s.spreadName}),pDe=Ur(mt,e=>e||void 0),mDe=e=>({symbol:pDe(e),spreadNameFromTrade:hDe(e)}),gDe=e=>({buyStrategyTrade:(t,s)=>{e({type:f.UncheckAllTrades,rootSymbol:t}),e({type:f.BuyStrategy,spreadName:s,symbol:t}),Ye({category:Ve.Trade,action:RN(s),label:ks.TradeTicket}),e(Us(ps.TRADE_TICKET))}}),SDe=se(mDe,gDe)(uDe),fDe=e=>{const[t,s]=B.useState(!1),[n,r]=B.useState(""),o=j.useRef(n);o.current=n;const i=p=>{const m=`optionSeriesQuotes-${p}-${Date.now()}`;return r(m),m};B.useEffect(()=>{n!==""&&e.unsubscribeFromOptionSeriesQuotes(n),e.requestOptionSeriesQuotes(e.symbol,i(e.symbol))},[e.symbol]),Cn(()=>()=>{e.unsubscribeFromOptionSeriesQuotes(o.current)});const{hasOptionChain:l,instrumentType:c}=e,d=()=>{s(p=>!p),!t&&Ye({category:Ve.Expansion,action:Le.OptionChain,label:ks.OpenOptionChain})},u=Te("option-chain-header",l&&"enabled"),h=()=>a.jsx("div",{className:"trade-buttons-row",children:a.jsxs("div",{className:"trade-buttons left",children:[(e.instrumentType===k.OPTION||e.hasOptionChain)&&a.jsx(wT,{symbol:e.symbol,multiLeg:!1,draftOrderIndex:0,withIcon:!0,iconClassName:"color-fill-disabled"}),e.hasOptionChain&&(e.instrumentType===k.STOCK||e.instrumentType===k.ETF)&&a.jsx("span",{className:"small-device-hide","data-testid":"covered-strategy",children:a.jsx(HS,{iconClassName:"color-fill-disabled",spreadName:nt.COVERED})}),e.hasOptionChain&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"small-device-hide",children:a.jsx(HS,{iconClassName:"color-fill-disabled",spreadName:nt.VERTICAL})}),a.jsx("span",{className:"small-device-hide",children:a.jsx(HS,{iconClassName:"color-fill-disabled",spreadName:nt.IRON_CONDOR})}),a.jsx(SDe,{instrumentType:e.instrumentType})]})]})});return l?a.jsxs("section",{className:"option-chain trade-component",children:[a.jsx($o,{ariaLabel:"Show Option Chain",isExpandedDown:t,isHeader:!0,onClick:d,children:a.jsx("h2",{className:u,children:__("Option Chain")})}),!t&&h(),t&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"table-main-caption",children:[a.jsx(tN,{localStorageKey:sn.OPTION_CHAIN_INFORMATION_CLOSED,message:"Select Bid or Ask to add up to 4 option legs."}),a.jsxs("div",{className:"main-caption-header",children:[a.jsx("div",{children:__("Calls")}),a.jsx("div",{children:__("Puts")})]})]}),a.jsxs("div",{className:"filter-row",id:"option-chain-filter",children:[a.jsx("div",{children:a.jsx("label",{htmlFor:"centered-on-input",className:"near-strike__label_mobile",children:__("Centered On")})}),a.jsxs("div",{className:"centered-on-input-shell",children:[a.jsx(pAe,{id:"centered-on-input"}),a.jsx(ywe,{})]})]}),a.jsx(dwe,{instrumentType:c}),h()]})]}):null},DN=e=>e.columns.trade,TDe=e=>e.columns.position,LN=(e,t)=>t==="COMBINED ACCOUNT"?e:e.filter(n=>n!=="account");x(DN,e=>e.selectedAccount,(e,t)=>LN(e,t));const yDe=x(TDe,e=>e.selectedAccount,(e,t)=>LN(e,t)),_N=x(mt,UO,(e,t)=>e===null?!1:t),CDe=e=>{const t=na(e);return{hasOptionChain:_N(e),instrumentType:t,columns:DN(e)}},bDe=e=>({requestOptionSeriesQuotes:(t,s)=>{e(Fde(t,s))},unsubscribeFromOptionSeriesQuotes:t=>{e(Hde(t))}}),EDe=se(CDe,bDe)(fDe),ADe=e=>e.quotes,vDe=e=>e.instruments,IDe=e=>e.study.studies,_C=(e,t)=>t,xg=x(ADe,_C,(e,t)=>e.get(t)),OT=x(vDe,_C,(e,t)=>e.get(t)),xDe=x(IDe,_C,(e,t)=>e[t]),wDe=(e,{symbol:t})=>{const s=xDe(e,t),n=xg(e,t),r=OT(e,t),o=sC(e),i=_N(e),l=(r==null?void 0:r.type)===k.PRODUCT&&(r==null?void 0:r.activeSymbol)!==void 0?OT(e,r.activeSymbol):void 0,{showFractionalPricing:c,fractionalType:d}=pn(e,t);return{...n,...r,...l,openInterest:n!==void 0?n.openInt:void 0,beta:n!==void 0&&r!==void 0&&r.type!==k.PRODUCT?n.beta:void 0,volAvg:s!==void 0?s.VolumeAvg:void 0,symbol:t,upcomingEarningsDate:o==null?void 0:o.time,showFractionalPricing:c,fractionalType:d,hasOptionChain:i}},ODe=e=>({logOptionChainGammaExposureAc:()=>e(Vde())}),RDe=Ln.withConsumer()(se(wDe,ODe)(qEe)),DDe=A(Be)`
  width: 100%;
  justify-content: flex-start;
  align-items: center;
  padding-left: ${({theme:e})=>e.space.medium};
  ${({theme:e})=>e.breakpoints.below(lt.DESKTOP_MEDIUM_SMALL)} {
    display: none;
  }
`,LDe=A(Be)`
  ${({theme:e})=>e.breakpoints.below(lt.DESKTOP_MEDIUM_SMALL_PLUS)} {
    display: none;
  }
`,_De=A(Be)`
  flex-direction: column;
  margin-left: ${({theme:e})=>e.space.xxSmall};
`,NDe=A(Be)`
  ${br.typography(sr.subhead1)}
`,NC=({value:e,showSign:t})=>a.jsxs("span",{"data-testid":"percent-value",className:e===void 0||e===0?"neutral":e>0?"positive":"negative",children:[t&&e!==void 0&&e>0?"+":"",e!==void 0&&gr(e)]}),NN=({children:e,value:t,className:s})=>a.jsx("span",{"data-testid":"sign-color-value",className:Te(s,t===void 0||t>=0?"positive":"negative"),"aria-hidden":!0,children:e}),PN=({value:e,fractionalType:t,showFractionalPricing:s,showDoubleTickForFractionalPricing:n})=>a.jsx("span",{"data-testid":"num-val",className:e===void 0||e===0?"neutral":e>0?"positive":"negative",children:e!==void 0&&Vn(s,e,t,n)}),PDe=e=>e&&Math.sign(e)!==1?Y.PerformanceDown:Y.PerformanceUp,kDe=A.div`
  display: flex;
  justify-content: center;
  align-content: center;
  padding: ${({theme:e})=>`${e.space.xSmall}`};
`,MDe=()=>a.jsx(kDe,{children:__("An error has occurred")});class vt extends j.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,s){const{onError:n}=this.props;n&&n(t,s),I4(t,s,li.ErrorBoundary)}render(){const{renderFallback:t,children:s}=this.props,{hasError:n}=this.state;return n?t?t():a.jsx(MDe,{}):s}}const $De=864e5,jDe=(e,t,s=[])=>{const n=Math.abs(Math.floor((t.getTime()-e.getTime())/$De));let r=0;for(let o=0;o<n;o++){const i=new Date;i.setTime(e.getTime()+o*24*60*60*1e3);let l=!0;s.forEach(c=>{i.getDate()===c[2]&&i.getMonth()===c[1]&&i.getFullYear()===c[0]&&(l=!1)}),i.getDay()!==0&&i.getDay()!==6&&l&&r++}return r},BDe=(e,t)=>{const[s,n]=[e,t].sort((o,i)=>{const l=o.getTime()-i.getTime();return l<0?-1:l>0?1:0}),r=Mx(s,n);return jDe(s,n,r)};var Un=(e=>(e.leftExtended="leftExtended",e.rightExtended="rightExtended",e.topExtended="topExtended",e.bottomExtended="bottomExtended",e))(Un||{});const FDe=A.div`
  position: relative;
  width: ${({width:e})=>`${e}px`};
  height: ${({height:e})=>`${e}px`};
`,HDe=A.div`
  display: flex;
  justify-content: center;

  position: absolute;
  margin: 1px;
  padding-top: 25px;
  width: ${({width:e})=>`${e-2}px`};
  height: ${({height:e})=>`${e-2}px`};
  z-index: 1;

  background-color: ${({theme:e})=>e.colors.background.primary};
  color: ${({theme:{colors:e}})=>e.text.secondary};
  cursor: default;
`,UDe=e=>a.jsxs("div",{className:"chart-actions","data-testid":"chart-actions",children:[a.jsx("button",{"aria-label":"Pan left",onClick:e.handlePanLeft,disabled:e.isPanLeftDisabled,className:Te("chart-actions__pan-left",e.isPanLeftDisabled&&"chart-actions__pan-left--disabled"),children:a.jsx(X,{type:Y.ArrowDropLeftAlt,dataTestId:"pan-left-icon",width:10,height:7,viewBox:"6.5 6.75 11 9"})}),a.jsxs("div",{className:"chart-actions__zooming",children:[a.jsx("button",{"aria-label":"Zoom out",disabled:e.isZoomOutDisabled,className:Te("chart-actions__zoom-out",e.isZoomOutDisabled&&"chart-actions__zoom-out--disabled"),onClick:e.handleZoomOut,children:a.jsx(X,{type:Y.ZoomOut,viewBox:"3 3 18 18",dataTestId:"zoom-out-icon"})}),a.jsx("button",{"aria-label":"Zoom in",disabled:e.isZoomInDisabled,className:Te("chart-actions__zoom-in",e.isZoomInDisabled&&"chart-actions__zoom-in--disabled"),onClick:e.handleZoomIn,children:a.jsx(X,{type:Y.ZoomIn,viewBox:"3 3 18 18",dataTestId:"zoom-in-icon"})})]}),a.jsx("button",{"aria-label":"Pan right",onClick:e.handlePanRight,disabled:e.isPanRightDisabled,className:Te("chart-actions__pan-right",e.isPanRightDisabled&&"chart-actions__pan-right--disabled"),children:a.jsx(X,{type:Y.ArrowDropRightAlt,dataTestId:"pan-right-icon",width:10,height:7,viewBox:"6 6.75 11 9"})})]}),VDe=j.memo(UDe),qs=e=>e.getContext("2d"),WDe=e=>t=>s=>{const n=t.canvas.getBoundingClientRect().left,r=t.canvas.getBoundingClientRect().top,o=s.clientY-r,i=s.clientX-n;return e(t,i,o),t},GDe=e=>t=>s=>{const n=s.touches[0],r=t.canvas.getBoundingClientRect().left,o=t.canvas.getBoundingClientRect().top,i=Math.round(n.clientY)-o,l=Math.round(n.clientX)-r;return e(t,l,i),t},YDe=e=>t=>(s=!0)=>()=>{if(s){const n=t.canvas.width,r=t.canvas.height;t.transform(1,0,0,1,0,0),t.clearRect(0,0,n,r)}e()},qDe=e=>t=>s=>{const n=t.canvas.getBoundingClientRect().left,r=t.canvas.getBoundingClientRect().top,o=Math.round(s.clientX)-n,i=Math.round(s.clientY)-r;return e(t,o,i),t},vs=fe.DPR,KDe=[we.ArrowUp,we.ArrowDown,we.ArrowLeft,we.ArrowRight],iv=50;class wg extends j.PureComponent{constructor(){super(...arguments);R(this,"chartRef",B.createRef());R(this,"chartPointerRef",B.createRef());R(this,"chartDynamicRef",B.createRef());R(this,"mouseMoveEventHandler");R(this,"touchEventHandler");R(this,"onClickEventHandler");R(this,"mouseLeaveHandler");R(this,"renderChartAndDynamic",()=>{var r,o;const s=this.props;let n=(r=s.chartHoverDetectRef)!=null&&r.current?qs((o=s.chartHoverDetectRef)==null?void 0:o.current):null;n=s.renderDynamic&&s.renderDynamic(s,this.chartDynamicRef.current,n),s.renderChart(s,this.chartRef.current,n)});R(this,"handleChartScaleAndResizeBasedOnDpr",()=>{const{chartHoverDetectRef:s,width:n,height:r}=this.props,o=this.chartRef.current,i=this.chartDynamicRef.current,l=this.chartPointerRef.current;let c=null;s&&(c=s.current);const d=o?qs(o):void 0,u=i?qs(i):void 0,h=l?qs(l):void 0,p=c?qs(c):void 0;o&&d&&(d.setTransform(vs,0,0,vs,0,0),o.style.width=`${n/vs}px`,o.style.height=`${r/vs}px`),i&&u&&(u.setTransform(vs,0,0,vs,0,0),i.style.width=`${n/vs}px`,i.style.height=`${r/vs}px`),l&&h&&(h.setTransform(vs,0,0,vs,0,0),l.style.width=`${n/vs}px`,l.style.height=`${r/vs}px`),c&&p&&(p.setTransform(vs,0,0,vs,0,0),c.style.width=`${n/vs}px`,c.style.height=`${r/vs}px`)});R(this,"handleMouseDown",()=>{this.props.onMouseDown&&this.props.onMouseDown()});R(this,"handleMouseUp",()=>{this.props.onMouseUp&&this.props.onMouseUp()});R(this,"handleMouseWheel",s=>{this.props.onMouseWheel&&Math.abs(s.deltaX)>Math.abs(s.deltaY)&&(s.stopPropagation(),s.preventDefault(),this.props.onMouseWheel(s.deltaX))});R(this,"handleClick",(s,n,r)=>{this.props.onClick&&this.props.onClick(this.props,s,n,r)});R(this,"handleMouseMove",(s,n,r)=>{const o=this.props;n=n*vs,r=r*vs,o.onMouseMove&&o.onMouseMove(s,n,r),o.renderOnMove(o,s,n,r)});R(this,"handleDragStart",s=>{s.preventDefault(),this.props.onDragStart&&this.props.onDragStart(s)});R(this,"handleDragEnd",()=>{this.props.onDragEnd&&this.props.onDragEnd()});R(this,"handleMouseEnter",()=>{this.props.onMouseEnter&&this.props.onMouseEnter()});R(this,"handleMouseLeave",()=>{this.props.onMouseLeave&&this.props.onMouseLeave()});R(this,"handleZoomIn",()=>{this.props.onZoomIn&&this.props.onZoomIn()});R(this,"handleZoomOut",()=>{this.props.onZoomOut&&this.props.onZoomOut()});R(this,"handlePanLeft",()=>{this.props.onPanLeft&&this.props.onPanLeft()});R(this,"handlePanRight",()=>{this.props.onPanRight&&this.props.onPanRight()});R(this,"handleKeyPress",s=>{if(KDe.includes(s.key))switch(s.preventDefault(),s.stopPropagation(),s.key){case we.ArrowDown:{this.handleZoomOut();break}case we.ArrowUp:{this.handleZoomIn();break}case we.ArrowLeft:{this.handlePanLeft();break}case we.ArrowRight:{this.handlePanRight();break}}})}componentDidUpdate(s){const n=this.props;(n.width!==s.width||n.height!==s.height)&&this.handleChartScaleAndResizeBasedOnDpr(),this.renderChartAndDynamic()}componentDidMount(){const s=this.props;this.renderChartAndDynamic();const n=WDe(this.handleMouseMove),r=GDe(this.handleMouseMove),o=YDe(this.handleMouseLeave),i=qDe(this.handleClick);if(this.chartPointerRef.current){const l=qs(this.chartPointerRef.current);if(l==null)return;const c=xa(n(l),iv),d=xa(r(l),iv),u=o(l),h=()=>{u(this.props.shouldClearCanvasOnMouseLeave??!0)()},p=i(l);this.mouseMoveEventHandler=c,this.touchEventHandler=d,this.mouseLeaveHandler=h,this.onClickEventHandler=p,l.canvas.addEventListener("mousemove",c),l.canvas.addEventListener("touchmove",d),l.canvas.addEventListener("mouseenter",this.handleMouseEnter),l.canvas.addEventListener("mouseleave",h),l.canvas.addEventListener("mousedown",this.handleMouseDown),l.canvas.addEventListener("wheel",this.handleMouseWheel),l.canvas.addEventListener("mouseup",this.handleMouseUp),l.canvas.addEventListener("dragstart",this.handleDragStart),l.canvas.addEventListener("click",p),l.canvas.addEventListener("click",this.handleDragEnd),s.enableKeyboardPanZoom&&l.canvas.addEventListener("keydown",this.handleKeyPress)}this.handleChartScaleAndResizeBasedOnDpr()}componentWillUnmount(){if(this.chartPointerRef.current&&this.mouseMoveEventHandler&&this.touchEventHandler&&this.mouseLeaveHandler&&this.onClickEventHandler){const s=this.chartPointerRef.current;s.removeEventListener("mousemove",this.mouseMoveEventHandler),s.removeEventListener("touchmove",this.touchEventHandler),s.removeEventListener("mouseenter",this.handleMouseEnter),s.removeEventListener("mouseleave",this.mouseLeaveHandler),s.removeEventListener("mousedown",this.handleMouseDown),s.removeEventListener("wheel",this.handleMouseWheel),s.removeEventListener("keydown",this.handleKeyPress),s.removeEventListener("mouseup",this.handleMouseUp),s.removeEventListener("dragstart",this.handleDragStart),s.removeEventListener("click",this.onClickEventHandler),s.removeEventListener("click",this.handleDragEnd)}}render(){const s=this.props,n=s.width,r=s.height;return a.jsxs("div",{className:"d3chart-container",style:{width:`${n/vs}px`,height:`${r/vs}px`},children:[s.shouldShowEnterSymbolToViewChart&&a.jsx(FDe,{width:n/vs,height:r/vs,children:a.jsx(HDe,{width:n/vs,height:r/vs,children:__("Enter symbol to view chart")})}),a.jsx(XDe,{width:n*vs,height:r*vs,chartRef:this.chartRef,chartDynamicRef:this.chartDynamicRef,chartPointerRef:this.chartPointerRef,chartHoverDetectRef:s.chartHoverDetectRef}),s.showZoomPanButtons&&a.jsx(VDe,{isPanLeftDisabled:s.isPanLeftDisabled??!1,isPanRightDisabled:s.isPanRightDisabled??!1,handlePanLeft:this.handlePanLeft,handlePanRight:this.handlePanRight,isZoomInDisabled:s.isZoomInDisabled??!1,isZoomOutDisabled:s.isZoomOutDisabled??!1,handleZoomIn:this.handleZoomIn,handleZoomOut:this.handleZoomOut})]})}}const zDe=e=>{const{width:t,height:s,chartRef:n,chartDynamicRef:r,chartPointerRef:o}=e;return a.jsxs(a.Fragment,{children:[a.jsx("canvas",{width:t,height:s,ref:n,className:"d3-chart","data-testid":"d3-chart"}),e.chartHoverDetectRef&&a.jsx("canvas",{width:t,height:s,ref:e.chartHoverDetectRef,className:"d3-hover","data-testid":"d3-hover"}),a.jsx("canvas",{width:t,height:s,ref:r,className:"d3-dynamic","data-testid":"d3-dynamic"}),a.jsx("canvas",{tabIndex:0,width:t,height:s,ref:o,draggable:!0,className:"d3-pointer","data-testid":"d3-pointer"})]})},XDe=j.memo(zDe),QDe=A.div`
  //width: 104px;
  position: absolute;
  z-index: 999;
  ${({tradeActionMenu:e})=>e&&`left: ${e.x}px; top: ${e.y}px`};
`,ZDe=e=>{const{tradeActionMenu:t,onClose:s,onBuyOrSell:n,toggleButtonRef:r,onAlert:o,onMouseEnter:i,onMouseLeave:l,onStudy:c}=e,d=j.useRef(null);return s&&$a(d,s,r),t?a.jsx(QDe,{ref:d,tradeActionMenu:t,onMouseEnter:i,onMouseLeave:l,"data-testid":"chart-action-menu",children:a.jsx(Uy,{hasFooter:!1,variant:Pe.primary,width:100,children:a.jsxs($u,{variant:Pe.primary,width:100,children:[e.isTradeable&&a.jsxs(a.Fragment,{children:[a.jsx(Xa,{selected:!1,variant:Pe.primary,onClick:u=>n&&n(u,pe.Buy),"data-testid":"chart-list-item",children:__("Buy")}),a.jsx(Xa,{selected:!1,variant:Pe.primary,onClick:u=>n&&n(u,pe.Sell),"data-testid":"chart-list-item",children:__("Sell")})]}),a.jsx(Xa,{selected:!1,variant:Pe.primary,onClick:o,"data-testid":"chart-list-item",children:__("Alert")}),e.hoveredStudies.map((u,h)=>{const p=Rm(u.studyName);return a.jsx(Xa,{selected:!1,variant:Pe.primary,onClick:c&&c(u.studyId),"data-testid":"chart-list-item",children:`${__(p)}${u.studyParamsString!==void 0?`, (${u.studyParamsString})`:""}`},`${p}-${h}`)})]})})}):null},JDe=j.memo(ZDe);class kN extends B.Component{constructor(){super(...arguments);R(this,"onKeyDown",s=>{!k9.includes(s.key)||!this.props.reactOnSpace&&s.key===we.Space||(s.key===we.Esc&&(s.preventDefault(),this.props.onClickOutside()),s.key===we.Tab||s.key===we.Enter?this.props.onKeyDown!==void 0&&this.props.onKeyDown(s):(s.preventDefault(),this.props.onKeyDown!==void 0&&this.props.onKeyDown(s)))})}componentDidMount(){window.addEventListener("click",this.props.onClickOutside)}componentWillUnmount(){window.removeEventListener("click",this.props.onClickOutside)}componentDidUpdate(s){s.onClickOutside!==this.props.onClickOutside&&(window.removeEventListener("click",s.onClickOutside),window.addEventListener("click",this.props.onClickOutside))}render(){return a.jsx("div",{role:"none",tabIndex:-1,onKeyDown:this.onKeyDown,onClick:s=>{this.props.onClickInside&&this.props.onClickInside(),s.stopPropagation()},className:this.props.className,children:this.props.children})}}const _a={closeImg:"M17.5,6.29289322 L6.54289322,17.25 L7.25,17.9571068 L18.2071068,7 L17.5,6.29289322 Z M6.29289322,7 L17.25,17.9571068 L17.9571068,17.25 L7,6.29289322 L6.29289322,7 Z",dividendsEventIcon:"M12.5195312,6.71428571 L11.2134088,6.71428571 L11.2134088,6.07142857 C11.2134088,5.71785714 10.9208374,5.42857143 10.5603476,5.42857143 L5.33585778,5.42857143 C4.97536798,5.42857143 4.68279656,5.71785714 4.68279656,6.07142857 L4.68279656,6.71428571 C4.68279656,7.06785714 4.97536798,7.35714286 5.33585778,7.35714286 L10.5603476,7.35714286 C11.6339802,7.39828571 12.5195312,8.32014286 12.5195312,9.36928571 L12.5195312,9.92857143 C12.5195312,10.9918571 11.6405108,11.8571429 10.5603476,11.8571429 L10.5603476,13.1428571 L9.25422513,13.1428571 L9.25422513,11.8571429 L6.64198023,11.8571429 L6.64198023,13.1428571 L5.33585778,13.1428571 L5.33585778,11.8571429 C4.21912309,11.8571429 3.37667411,11.0857143 3.37667411,10.0635714 L3.37667411,9.28571429 L4.68279656,9.28571429 L4.68279656,10.0635714 C4.68279656,10.547 5.22744962,10.5714286 5.33585778,10.5714286 L10.5603476,10.5714286 C10.9208374,10.5714286 11.2134088,10.2834286 11.2134088,9.92857143 L11.2134088,9.36928571 C11.2134088,9.017 10.8764292,8.65571429 10.5342251,8.64285714 L5.33585778,8.64285714 C4.25569452,8.64285714 3.37667411,7.77757143 3.37667411,6.71428571 L3.37667411,6.07142857 C3.37667411,5.00814286 4.25569452,4.14285714 5.33585778,4.14285714 L5.33585778,2.85714286 L6.64198023,2.85714286 L6.64198023,4.14285714 L9.25422513,4.14285714 L9.25422513,2.85714286 L10.5603476,2.85714286 L10.5603476,4.14285714 C11.6405108,4.14285714 12.5195312,5.00814286 12.5195312,6.07142857 L12.5195312,6.71428571 Z M8,0 C3.58266667,0 0,3.58266667 0,8 C0,12.4173333 3.58266667,16 8,16 C12.4186667,16 16,12.4173333 16,8 C16,3.58266667 12.4186667,0 8,0 L8,0 Z",earningsEventIcon:"M10.8573333,8.74493968 C10.7346667,8.86430476 10.6666667,9.02176508 10.6666667,9.18938413 L10.6666667,11.8090667 C10.6666667,12.8592254 9.77066667,13.7138286 8.66666667,13.7138286 L7.33333333,13.7138286 C6.23066667,13.7138286 5.33333333,12.8592254 5.33333333,11.8090667 L5.33333333,9.18938413 C5.33333333,9.02176508 5.26666667,8.86430476 5.14266667,8.74493968 C4.40666667,8.02874921 4,7.08652698 4,6.09478095 C4,3.99319365 5.79466667,2.28525714 8,2.28525714 C10.2066667,2.28525714 12,3.99319365 12,6.09478095 C12,7.08779683 11.5946667,8.02874921 10.8573333,8.74493968 L10.8573333,8.74493968 Z M8,0 C3.58266667,0 0,3.58133333 0,8 C0,12.4173333 3.58266667,16 8,16 C12.4186667,16 16,12.4173333 16,8 C16,3.58133333 12.4186667,0 8,0 L8,0 Z M8,3.42811429 C6.52933333,3.42811429 5.33333333,4.65828571 5.33333333,6.17097143 C5.33333333,6.88137143 5.604,7.55748571 6.096,8.07314286 C6.464,8.45988571 6.66666667,8.97142857 6.66666667,9.51314286 L6.66666667,10.2852571 L9.33333333,10.2852571 L9.33333333,9.51314286 C9.33333333,8.97142857 9.53733333,8.46125714 9.90533333,8.07314286 C10.396,7.55748571 10.6666667,6.88274286 10.6666667,6.17097143 C10.6666667,4.65828571 9.47066667,3.42811429 8,3.42811429 L8,3.42811429 Z M6.66666667,11.9995429 C6.66666667,12.3138286 6.96666667,12.5709714 7.33333333,12.5709714 L8.66666667,12.5709714 C9.03466667,12.5709714 9.33333333,12.3138286 9.33333333,11.9995429 L9.33333333,11.4281143 L6.66666667,11.4281143 L6.66666667,11.9995429 Z",alertImg:"M5.05529666,8.97435921 C5.05529666,9.53846164 4.58069101,10 4.00061741,10 C3.41527039,10 2.94593816,9.53846164 2.94593816,8.97435921 L2.94593816,8.97435921 Z M4.00065011,0 C4.43834201,0 4.7916595,0.343589698 4.7916595,0.769230609 L4.7916595,0.769230609 L4.7916595,1.11794847 C6.2998509,1.46666632 7.16468824,2.78461477 7.16468824,4.35897333 L7.16468824,4.35897333 L7.16468824,6.9230754 L7.84495606,7.58461348 C8.17718003,7.90769032 7.93987698,8.46153647 7.47054471,8.46153647 L7.47054471,8.46153647 L0.525481923,8.46153647 C0.0561496507,8.46153647 -0.175879799,7.90769032 0.156344166,7.58461348 L0.156344166,7.58461348 L0.836612289,6.9230754 L0.836612289,4.35897333 C0.836612289,2.77948654 1.69617595,1.46666632 3.20964073,1.11794847 L3.20964073,1.11794847 L3.20964073,0.769230609 C3.20964073,0.343589698 3.56295822,0 4.00065011,0 Z",expansionControlImg:"M0.457511 1.21092C0.380751 1.7571 0.759894 2.26024 1.30607 2.337L6.73982 3.10066L5.97615 8.53441C5.89939 9.08059 6.27854 9.58373 6.82471 9.66049C7.37089 9.73725 7.87403 9.3581 7.95079 8.81193L8.8542 2.38386C8.93096 1.83768 8.55181 1.33454 8.00564 1.25778L1.57757 0.354376C1.0454 0.279584 0.534271 0.664746 0.457511 1.21092 Z",hoveredUpArrow:"M5.362 0.237665L0.276226 4.89089C-0.307089 5.40792 0.0939399 6.30855 0.914226 6.30855H4.17714V16.3322C4.17714 17.2495 4.99743 18 6 18C7.00258 18 7.82286 17.2495 7.82286 16.3322V6.30855H11.0858C11.9061 6.30855 12.3071 5.40792 11.7238 4.89089L6.63801 0.237665C6.29166 -0.0792217 5.70834 -0.0792217 5.362 0.237665Z",upArrow:"M4.46833 0.211258L0.230188 4.34746C-0.255907 4.80704 0.0782832 5.6076 0.761855 5.6076H3.48095V14.5175C3.48095 15.3329 4.16452 16 5 16C5.83548 16 6.51905 15.3329 6.51905 14.5175V5.6076H9.23814C9.92172 5.6076 10.2559 4.80704 9.76981 4.34746L5.53167 0.211258C5.24305 -0.0704193 4.75695 -0.0704193 4.46833 0.211258Z",buyCompleted:"M1.33333 1.33301L8 7.99967L14.6667 14.6663H1.33333V1.33301Z",sellCompleted:"M14.6667 14.6663L1.33337 1.33301H14.6667V14.6663Z"},MN=(e,t,s)=>{const{PositiveAndUp:n,PositiveAndDown:r,NegativeAndUp:o,NegativeAndDown:i}=s;if(e===void 0||t===void 0)return Vt(n);const l=e.y!==null&&e.y>0,c=t===null||t.y===null||e.y===null||t.y<e.y;let d;return l?d=c?n:r:d=c?o:i,Vt(d)},$N=(e,t,s)=>{const{Increasing:n,Decreasing:r}=s;if(e===void 0||t===void 0)return Vt(n);const i=t===null||t.y===null||e.y===null||t.y<=e.y?n:r;return Vt(i)},eLe=(e,t)=>{const{True:s,False:n}=t;if(e===void 0)return Vt(s);const r=e.y===1?s:n;return Vt(r)},tLe=(e,t,s,n)=>{const r=t-s-n,o=e-s,i=r>0,l=o<0,c=1;return i?e-r-c:l?e+Math.abs(o)+c:e},jN=e=>{switch(e){case pa.Above:case pa.NegativeToPositive:case pa.Bullish:case pa.Oversold:return!0;case pa.Below:case pa.PositiveToNegative:case pa.Bearish:case pa.Overbought:return!1;default:return!1}},sLe=(e,t)=>e.map((s,n)=>{var r;if(t)return t[n]&&s.x&&((r=t==null?void 0:t[n])!=null&&r.x)&&s.x.getTime()===t[n].x.getTime()&&s.y?{x:s.x,y:t[n].y}:{x:s.x,y:null}}),nLe=(e,t,s,n,r)=>{if(!n||!r||!r.y)return null;const o=r==null?void 0:r.y,i=4;return n===xe.candle||n===xe.bar&&os(r.y)?s?t(o.low)-i:t(o.high)+i:s?t(o.close)-i:t(o.close)+i},US=62,lv=15,cv=12,rLe=18,oLe=15,aLe=22,dv=rLe+oLe+aLe+1,uv=80,hv=()=>window.innerWidth<=425,RT=document.createEvent("Event");RT.initEvent("dropdownOpen",!0,!0);const BN=document.createEvent("Event");BN.initEvent("studyWindowOpen",!0,!0);const xd=(e,t,s,n,r,o)=>a.jsxs("div",{className:"chart-info__item",children:[a.jsxs("span",{style:{color:s},className:"data-tooltip-label data-tooltip-label--study",children:[e,":"]}),a.jsxs("div",{children:[a.jsx("span",{style:{color:s},className:Te("data-tooltip-value",n?"":"non-chevron-study-value"),children:r(t,!1)}),n&&a.jsx(X,{type:Y.ChevronRight,width:12,height:8,viewBox:"5 9 14 9",className:"chevron-icon",dataTestId:"chevron-right-icon"})]})]},o),iLe=e=>{const{study:t,studyId:s,dynamicStudy:n,onDeleteStudy:r,onOpen:o,onClose:i,setStudyParameters:l,getStudyParametersAndPlotSettings:c,chartInfoValue:d,formatValue:u,theme:h,chartId:p,forceOpen:m}=e,[g,S]=j.useState(!1),[T,y]=j.useState({top:0,left:0}),[b,E]=j.useState(t.parameters),[v,D]=j.useState(t.plotParameters),w=B.useRef(null);B.useEffect(()=>{m!==void 0&&S(m)},[m,S]),B.useEffect(()=>{E(t.parameters)},[t.parameters]),B.useEffect(()=>{D(t.plotParameters)},[t.plotParameters]),B.useLayoutEffect(()=>{const q=w.current;if(q!==null&&g){const W=Math.floor(q.offsetTop/US)-1,z=q.offsetTop%US+US*W;y({top:z,left:lv+q.offsetWidth+cv-(hv()?uv:0)})}},[g]),Cn(()=>{const q=()=>{hv()&&w.current&&y(W=>({...W,left:lv+w.current.offsetWidth+cv-uv}))};return window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)});const N=B.useCallback(()=>{r(p,s),S(!1)},[p,s,r]),L=B.useCallback(()=>{g&&(S(!1),b!==void 0&&l(p,s,b,v),i&&i())},[p,l,b,s,g,i,v]);B.useEffect(()=>(window.addEventListener("studyWindowOpen",L),()=>{window.removeEventListener("studyWindowOpen",L)}),[L]);const P=B.useCallback(()=>{g||(S(!0),o&&o())},[g,o]),F=B.useCallback(q=>{g?L():(q.stopPropagation(),window.dispatchEvent(BN),window.dispatchEvent(RT),P(),Yo(t.name)&&!n&&c(p,s,t.name))},[L,P,g]),O=B.useCallback(()=>{l(p,s,b,v),S(!1),i&&i()},[p,s,b,l,i,v]),H=()=>a.jsx(kN,{onClickOutside:O,onClickInside:()=>{window.dispatchEvent(RT)},children:a.jsxs("div",{"data-testid":"manage-study-window",className:"manage-study-window",style:{left:T.left,top:T.top},children:[a.jsx("div",{className:"chart-study",children:a.jsx(dO,{study:t,dynamicStudy:n,deleteStudy:N,studyId:s,plotParameters:v,updateNumericParameters:Jw(E),updatePlotParameters:eO(D,t.name),updateChartPriceType:tO(E),updateAverageType:sO(E),updateTrueRangeAverageType:nO(E),updateStudiesTimeFrame:rO(E),updateStudiesFullRange:oO(E),updateStudiesShowOnlyToday:aO(E),updateDynamicParam:iO(E),closeWindow:O})}),a.jsx("div",{className:"before",style:{top:dv}}),a.jsx("div",{className:"after",style:{top:dv+3}})]})}),C=q=>a.jsx("button",{"data-testid":"manage-study-anchor",ref:w,className:Te("manage-study-anchor",s===dr||s===cr?"price-label":""),onClick:F,children:d.plots.map((W,z)=>{var le,We;let re=(le=W.values[W.index])==null?void 0:le.y;const ae=t.plotParameters[W.name],{secondarySecurity:Me}=t.parameters;let he=z===0;if(ae===void 0)return null;const U=ae.plotType;if(!re&&(U===xe.crossoverArrows||U===xe.booleanPoints))re=0;else if(d.studyName===me.COMPARISON_PERCENT&&W.name===Ji.COMPARISON_PERCENT){const He=d.plots.find(Dt=>Dt.name===Ji.COMPARISON);re=((We=He==null?void 0:He.values[W.index])==null?void 0:We.y)||null,he=!0}else if(U===xe.hidden)return null;const Se=!os(re)&&Ut(re)&&!W.volumeProfiles?u(re,!1,W.name,U):Ht;let be;if(W.studyId===dr||W.studyId===cr)be=h===Qt.DARK?"hsl(0, 0%, 100%)":"hsl(0, 0%, 0%)";else if(ae.colorOptions.type===Ae.SINGLE)be=Vt(ae.colorOptions.color);else if(ae.colorOptions.type===Ae.INCREASING_HISTOGRAM){const He=W.index>0?W.index-1:0;be=MN(W.values[W.index],W.values[He],ae.colorOptions)}else if(ae.colorOptions.type===Ae.INCREASING_VALUE){const He=W.index>0?W.index-1:0;be=$N(W.values[W.index],W.values[He],ae.colorOptions)}else if(ae.colorOptions.type===Ae.BOOLEAN)be=eLe(W.values[W.index],ae.colorOptions);else if(ae.colorOptions.type===Ae.CROSSOVER){const He=kx(t.parameters),Dt=jN(He);be=Vt(Dt?ae.colorOptions.Above:ae.colorOptions.Below)}else be=h===Qt.DARK?"hsl(0, 0%, 100%)":"hsl(0, 0%, 0%)";return W.name==="Price"&&re!==null&&os(re)?a.jsxs(j.Fragment,{children:[xd(__("Open",{alternativeEnglishValue:"O"}),re.open,be,!0,u),xd(__("High",{alternativeEnglishValue:"H"}),re.high,be,!1,u),xd(__("Low",{alternativeEnglishValue:"L"}),re.low,be,!1,u),xd(__("Close",{alternativeEnglishValue:"C"}),re.close,be,!1,u)]},W.name):a.jsxs("div",{className:"chart-info__item",children:[a.jsxs("span",{"data-testid":"sort-study-label",style:{color:be},className:Te("data-tooltip-label","data-tooltip-label--study"),children:[`${r$(t.name,W.name,Me)}`,":"]}),a.jsxs("div",{children:[a.jsx("span",{"data-testid":"data-tooltip-value","aria-label":q,style:{color:be},className:Te("data-tooltip-value",he?"":"non-chevron-study-value"),children:Se}),he&&a.jsx(X,{type:Y.ChevronRight,width:12,height:8,viewBox:"5 9 14 9",className:"chevron-icon",dataTestId:"chevron-right-icon"})]})]},W.name)})}),M=()=>{var q;return s!==dr&&s!==cr?a.jsx("button",{"data-testid":"manage-study-delete",className:"manage-study-delete",onClick:N,"aria-label":`delete ${((q=$r[t.name])==null?void 0:q.readableName)??t.name} study`,children:a.jsx(X,{type:Y.Close,width:9,height:9,viewBox:"4.5 4 16.5 16.5",dataTestId:"close-icon",fill:"icon.primary"})}):null};return a.jsxs("div",{className:"manage-study-dropdown",children:[M(),C(),g&&H()]})},lLe=hn(iLe),cLe={name:me.SIMPLE_MOVING_AVG,id:"",parameters:Wi,plotParameters:{}},dLe=(e,t)=>{var s,n,r;return{study:((s=bl(e,t.chartId))==null?void 0:s.studiesParams.get(t.studyId))??cLe,dynamicStudy:(r=(n=e.studyParametersAndPlotSettings.activeStudies)==null?void 0:n.get(t.chartId))==null?void 0:r.get(t.studyId)}},uLe={onDeleteStudy:UR,setStudyParameters:FR,getStudyParametersAndPlotSettings:Ry},VS=se(dLe,uLe)(lLe),hLe=(e,t)=>{const[s,n]=B.useState(!1),r=Te("chart-info__container",s&&"chart-info__container--shown"),o=e.studyValues.find(h=>h.studyId===dr),i=e.studyValues.find(h=>h.studyId===cr),l=(h,p,m,g)=>{if(g===xe.booleanPoints||g===xe.crossoverArrows)return E6(h);switch(m){case Aa.OPEN_INTEREST:case Aa.ON_BALANCE_VOLUME:return Sn(h,p);case Aa.IMPLIED_VOLATILITY:return cu(h,e.priceTick/100,!0);default:return e.showFractionalPricing&&e.fractionalType!==void 0?Fs(h,e.fractionalType,e.showDoubleTickForFractionalPricing,p):cu(h,e.priceTick)}},c=(h,p)=>e.showFractionalPricing&&e.fractionalType!==void 0?Fs(h,e.fractionalType,e.showDoubleTickForFractionalPricing,p):Sn(h,p),d=B.useCallback(()=>{n(!0),e.onChartInfoOpen&&e.onChartInfoOpen()},[n,e.onChartInfoOpen]),u=B.useCallback(()=>{n(!1),e.onManageStudyWindowClose&&e.onManageStudyWindowClose()},[n,e.onManageStudyWindowClose]);return B.useEffect(()=>{e.studyParameterToOpen!==void 0&&n(!0)},[e.studyParameterToOpen,n]),a.jsxs("div",{ref:t,className:r,"data-testid":"price-chart-info",children:[o&&a.jsx(VS,{chartId:e.chartId,studyId:dr,chartInfoValue:o,onClose:u,onOpen:d,formatValue:c},dr),i&&a.jsx(VS,{chartId:e.chartId,studyId:cr,chartInfoValue:i,onClose:u,onOpen:d,formatValue:Sn},cr),e.studyValues.map(h=>{if(h.studyId===dr||h.studyId===cr)return null;const p=e.studyParameterToOpen?h.studyId===e.studyParameterToOpen:!1;return a.jsx(VS,{chartId:e.chartId,studyId:h.studyId,chartInfoValue:h,onClose:u,onOpen:d,formatValue:l,forceOpen:p},`${h.studyId}`)}),e.hoveredTrendLineData!==void 0&&e.hoveredTrendLineData.map(h=>xd(h.name,h.price,Vt(h.color),!1,l,h.guid))]})},FN=j.memo(j.forwardRef(hLe)),pLe=A(_n)`
  ${Wn} {
    display: flex;
    align-items: center;
    font-size: ${({theme:e})=>e.fontSizes.small};
    color: ${({theme:e})=>e.colors.text.primary};
  }
`,mLe=A.span`
  display: inline-block;
  margin-right: 5px;
`,gLe=e=>function(){const s=`${__("Arrow",{namespace:"Drawings"})}: ${__((e==null?void 0:e.selectedLabel)??"",{namespace:"Drawings"})}`;return a.jsxs(a.Fragment,{children:[a.jsx(mLe,{children:s}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon"})]})};var PC=(e=>(e.OFF="OFF",e))(PC||{});const Tp={[nn.BOTTOM]:"Top",[nn.RIGHT]:"Right",[nn.TOP]:"Bottom",[nn.LEFT]:"Left",OFF:"Off"},pv=Object.keys(Tp),SLe=e=>{const[t,s]=B.useState();return B.useEffect(()=>{const n=pv.findIndex(o=>o===e.selectedValue),r=Tp[e.selectedValue];s({selectedIndex:n,selectedLabel:r})},[e.selectedValue]),a.jsx(pLe,{"data-testid":"arrow-position-dropdown",values:pv,onListItemClick:e.onSelect,getListItemKey:n=>Tp[n],anchorAriaLabel:"Text note arrow position",offset:5,selectedItemIndex:(t==null?void 0:t.selectedIndex)??0,renderListItemContent:n=>__(Tp[n],{namespace:"Drawings"}),renderAnchorButtonContent:gLe(t)})};class fLe extends j.Component{constructor(){super(...arguments);R(this,"state",{focused:!1});R(this,"handleFocus",()=>{this.setState({focused:!0})});R(this,"buildLabels",()=>[__("DATE/TIME"),__("Estimated Earnings Per Share"),__("Actual Earnings Per Share")]);R(this,"renderTable",()=>{const{historicalEarnings:s}=this.props,n=this.buildLabels();return a.jsxs("table",{children:[a.jsx("thead",{children:a.jsx("tr",{children:n.map(r=>a.jsx("th",{children:r},`earnings-table-header-${r}`))})}),a.jsx("tbody",{className:"no-height",children:s.map((r,o)=>{var i;return a.jsxs("tr",{children:[a.jsx("td",{children:r.actualDate&&ho(r.actualDate)}),a.jsx("td",{children:r.estimatedEps&&Ea.format(r.estimatedEps)}),a.jsx("td",{children:r.actualEps&&Ea.format(r.actualEps)})]},`earnings-table-${(i=r.estimatedDate)==null?void 0:i.getTime()}-${o}`)})})]})})}render(){return a.jsxs("div",{style:{position:"absolute",left:"-1000%"},"data-testid":"earnings-table",tabIndex:-1,onFocus:this.handleFocus,children:[a.jsx("h3",{style:{width:0,height:0,fontSize:0,margin:0,padding:0,position:"absolute",left:"-1000%"},children:__("Earnings Table")}),this.state.focused&&this.renderTable()]})}}class TLe extends j.Component{constructor(){super(...arguments);R(this,"state",{focused:!1});R(this,"handleFocus",()=>{this.setState({focused:!0})});R(this,"buildLabels",()=>[__("Ex-Dividend Date"),__("Amount")]);R(this,"renderTable",()=>{const{historicalDividends:s}=this.props,n=this.buildLabels();return a.jsxs("table",{children:[a.jsx("thead",{children:a.jsx("tr",{children:n.map(r=>a.jsx("th",{children:r},`dividends-table-header-${r}`))})}),a.jsx("tbody",{className:"no-height",children:s.map(r=>{var o;return a.jsxs("tr",{children:[a.jsx("td",{children:r.exDividendDate&&ho(r.exDividendDate)}),a.jsx("td",{children:r.amount&&Ea.format(r.amount)})]},`dividends-table-${(o=r.exDividendDate)==null?void 0:o.getTime()}`)})})]})})}render(){return a.jsxs("div",{style:{position:"absolute",left:"-1000%"},"data-testid":"dividends-table",tabIndex:-1,onFocus:this.handleFocus,children:[a.jsx("h3",{style:{width:0,height:0,fontSize:0,margin:0,padding:0,position:"absolute",left:"-1000%"},children:__("Dividends Table")}),this.state.focused&&this.renderTable()]})}}const am=(e,t,s)=>Math.min(s,Math.max(t,e)),kC=(e,t)=>Math.max(Math.floor(t/e*100)/100,1),DT=e=>{const t=fi(e);return kC(Fue,t)},LT=e=>{const t=fi(e);return kC(Hue,t)},yLe=(e,t,s,n,r)=>{const o=fi(r),i=pl(t,n,r),l=o+e;return{zoomLevel:t*l/o,offsetX:Math.floor(s+i*e)}},CLe=(e,t,s)=>{const n=fi(s),r=n-e,o=t*r/n;return am(o,DT(s),LT(s))},bLe=(e,t,s)=>{const n=fi(s),r=n-t;return e*r/n},Yi=(e,t)=>Math.round(e*(t-1)),ld=(e,t,s,n)=>{const r=Yi(t,s);return am(n+e,0,r)},fi=e=>{var s;const t=e==null?void 0:e[0];return((s=t==null?void 0:t.plots[0])==null?void 0:s.values.length)??0},pl=(e,t,s)=>{const n=fi(s);return e*t/n},ELe=(e,t,s,n,r)=>{const o=pl(t,n,r),i=pl(e,n,r),l=n/o,d=n/i-l,p=(s/o-d/2)*i;return Math.max(0,p)},_T=(e,t,s)=>{const n=Yi(s,e);return t>=n},ALe=(e,t,s,n,r)=>_T(t,s,n)?im(n,e):ELe(e,t,s,n,r),im=(e,t)=>Math.round(Math.max(0,(t-1)*e)),mv=(e=zf,t,s,n)=>{const r=pl(t,s,n);return Math.ceil(s*e/r)},gv=(e,t,s,n)=>pl(e,t,n)*s>=t*.5,vLe=(e,t,s)=>Math.floor(Vue*t/pl(e,t,s)),ILe=6.2,xLe=645,fu=()=>{const e=document.getElementById("trade-page"),t=e==null?void 0:e.offsetWidth;return t?t<xLe:!1},wLe=(e,t,s,n=!1)=>{let r=0,o;if(s?o=document.getElementById(`charts-wrapper-${s}`):n?o=document.getElementById("charts-wrapper-account-history"):o=document.querySelector(".charts-wrapper"),o){const i=window.innerWidth>Es.TABLET_LARGE&&!fu()&&!e&&!t,l=window.innerWidth>Es.TABLET_LARGE&&e&&t,c=window.innerWidth<=Es.TABLET_LARGE&&window.innerWidth>Es.MOBILE_LARGE&&t;i||l||c?r=Math.round((o.clientWidth-IAe-nm)/AAe):r=Math.round(n?o.clientWidth:o.clientWidth-vAe-nm)}return r},MC=(e,t)=>{if(e===void 0||t===void 0||t<=1)return 0;const s=document.querySelector(`#price-chart-wrapper-${e}`),n=s==null?void 0:s.querySelector(".chart-symbol-search-and-mark");return n&&[...n.children??[]].reduce((i,l)=>i+((l==null?void 0:l.offsetWidth)??0),0)>n.offsetWidth?kAe:0},OLe=(e,t,s,n,r)=>{const o=e!==void 0&&e>1;return s?o?13:31:o?NAe+gu+oC+MC(r,e)+3:PAe+1},RLe=(e,t,s,n,r,o,i,l,c,d=!1)=>{let u=e-(t+s),h=e*RAe/100,p=AT(wAe,n);l&&l>2&&(h=e*DAe/100,p=AT(OAe,n));const m=window.innerWidth<Es.MOBILE_LARGE;i===ge.Charts&&!m&&!d&&(u-=OLe(l,m,o,u,c)),u<h&&(u=h),u<p&&(u=p);const g=m&&i===ge.Trade&&!d?xAe+ql*2:0,S=u+(r&&r.length>0?t+g+s+nT:nT),T=o?S:u;return m?T-LAe-5:T},DLe=(e,t,s,n,r,o=!1)=>{const i=document.getElementById("quote-details"),l=ILe*t,c=window.innerHeight,d=r!==void 0&&r>1,u=d?0:(i==null?void 0:i.clientHeight)||EAe*t,h=Math.floor((c-l-u)*sm),p=Math.min(s.clientHeight,n)*sm,m=d?l_:0;let g=c-l-m-u-rl-MAe;return c>=860&&r&&r>2&&(g=(g-50)/2),e&&!o?g:Math.min(h,p)},LLe=e=>i_*((e==null?void 0:e.length)??0),HN=(e,t,s,n,r)=>{let o=e*_Ae/100-i_;if(Awe(o,t)<pA&&(o=AT(pA,t)),s===ge.Charts&&n!==void 0){const l=r!==void 0?kf(r)!==void 0:!1;n>1?o-=l?46:32:o-=17}return o},_Le=(e,t,s,n,r,o)=>HN(e,s,n,r,o)*((t==null?void 0:t.length)??0),_l=e=>{const t=({expanded:s,marketToolButtonContentVisible:n,isMarketTool:r,activePage:o,generalFontSize:i,lowerStudies:l,...c})=>{const[d,u]=j.useState({width:300,height:300*sm,lowerStudyHeight:300*sm/4});return j.useLayoutEffect(()=>{const h=document.getElementById("trade-page"),p=document.getElementById("charts-page"),m=document.getElementById("account-history-section"),g=c!=null&&c.isAccountHistoryChart?m:h||p,S=()=>{if(g){const T=wLe(s,n,c==null?void 0:c.chartId,c==null?void 0:c.isAccountHistoryChart),y=DLe(p,i,g,T,c==null?void 0:c.numCharts,c==null?void 0:c.isAccountHistoryChart),b=_Le(y,l,i,o,c==null?void 0:c.numCharts,c==null?void 0:c.chartId),E=LLe(l),v=RLe(y,b,E,i,l,r,o,c==null?void 0:c.numCharts,c==null?void 0:c.chartId,c==null?void 0:c.isAccountHistoryChart),D=HN(y,i,o,c==null?void 0:c.numCharts,c==null?void 0:c.chartId);u({width:!s||!r&&s?T*fe.DPR:T,height:!s||!r&&s?v*fe.DPR:v,lowerStudyHeight:!s||!r&&s?D*fe.DPR:D})}};return window.addEventListener("resize",S),window.addEventListener("resize_charts",S),()=>{window.removeEventListener("resize",S),window.removeEventListener("resize_charts",S)}},[s,i,n,l,r,o]),a.jsx(e,{...c,activePage:o,lowerStudies:l,lowerStudyHeight:d.lowerStudyHeight,width:d.width,height:d.height})};return t.displayName=`withChartDimensions(${e.displayName||e.name||"Component"})`,t},Og=e=>{const t=[];for(let s=0;s<e.length-1;++s){const n=e[s],r=e[s+1];if(n&&n.y===0)t.push(n.x);else if(r&&r.y===0)t.push(r.x);else if(n&&r&&n.y<0&&r.y>0||n.y>0&&r.y<0){const o=(r.y-n.y)/(r.x-n.x);t.push(n.x-n.y/o)}}return t},UN=(e,t)=>{const s=[];if(e.length===t.length)for(let n=0;n<e.length-1;++n){const r=e[n],o=e[n+1],i=t[n],l=t[n+1];if(r&&r.y===i.y&&o.y!==l.y)s.push({x:r.x,y:r.y});else if(r.y<i.y&&o.y>l.y||r.y>i.y&&o.y<l.y){const c=(o.y-r.y)/(o.x-r.x),d=(l.y-i.y)/(l.x-i.x),u=(r.y-i.y)/(d-c),h=r.x+u,p=r.y+c*u;s.push({x:h,y:p})}}return s},NLe=e=>e.chart,$C=e=>e.xAxisLabelFormat,Rg=e=>e.font,jC=e=>e.sellColor,VN=e=>e.buyColor,Dg=e=>e.gridColor,Lg=e=>e.axisLabelTextColor,PLe=e=>e.volumeColor,kLe=e=>e.sellStrokeColor,MLe=e=>e.buyStrokeColor,WN=e=>e.chartLineColor,$s=e=>e,Sv=.1,BC=x($s,e=>e.settings),jc=x(BC,e=>e.chart),qu=x(jc,Rg);x(jc,jC);x(jc,VN);const GN=x(jc,Dg),FC=x(jc,Lg);x(jc,PLe);const $Le=x(BC,$C),jLe=x($s,e=>e.width),BLe=x($s,e=>e.height),YN=x($s,e=>e.fitStudiesInYAxis),Nl=x($s,e=>e.zoomLevel),ln=x(jLe,e=>e-pt.left-pt.right),Bc=x(ln,Nl,(e,t)=>e*t),Xs=x(BLe,e=>e-pt.top-pt.bottom),jo=x($s,e=>e.offsetX),fo=x($s,e=>e.studies),FLe=x($s,e=>e.expansionItemsCount),HLe=x($s,e=>e.earnings),ULe=x($s,e=>e.hoveredEarnings),VLe=x($s,e=>e.historicalEarnings),WLe=x($s,e=>e.hoveredHistoricalEarnings),GLe=x($s,e=>e.dividends),YLe=x($s,e=>e.hoveredDividends),qLe=x($s,e=>e.historicalDividends),KLe=x($s,e=>e.hoveredHistoricalDividends),HC=x($s,e=>e.studiesParams),UC=x(Bc,fo,(e,t)=>{var r;const s=(t==null?void 0:t[0])??void 0;if(s===void 0)return e;const n=((r=s.plots[0])==null?void 0:r.values.length)??1;return e/n}),zLe=x(fo,e=>{var t,s;return((s=(t=e==null?void 0:e[0])==null?void 0:t.plots[0])==null?void 0:s.values.length)??0}),qN=x(jo,UC,(e,t)=>Math.max(0,Math.floor(e/t)-1)),KN=x(zLe,jo,ln,UC,(e,t,s,n)=>Math.min(e,Math.floor((t+s)/n)+1)),zN=x(fo,qN,KN,(e,t,s)=>e==null?void 0:e.map(n=>({...n,plots:n.plots.map(r=>({...r,values:r.values.slice(t,s)}))}))),XLe=x(zN,HC,YN,(e,t,s)=>{const n=e==null?void 0:e.map(r=>{const o=r.plots.filter(i=>{var c,d,u;const l=t.get(r.id);return!((c=l==null?void 0:l.plotParameters[i.name])!=null&&c.secondaryYScale)&&((d=l==null?void 0:l.plotParameters[i.name])==null?void 0:d.plotType)!==xe.hidden&&!Px((u=l==null?void 0:l.plotParameters[i.name])==null?void 0:u.plotType)&&!Ac(l==null?void 0:l.name)&&(s||!s&&(l==null?void 0:l.name)===me.PRICE)}).map(i=>Math.max(...i.values.filter(l=>l.y!==null).map(l=>os(l.y)?l.y.high:l.y)));return Math.max(...o)});return n?Math.max(...n):0}),QLe=x(zN,HC,YN,(e,t,s)=>{const n=e==null?void 0:e.map(r=>{const o=r.plots.filter(i=>{var c,d,u;const l=t.get(r.id);return!((c=l==null?void 0:l.plotParameters[i.name])!=null&&c.secondaryYScale)&&((d=l==null?void 0:l.plotParameters[i.name])==null?void 0:d.plotType)!==xe.hidden&&!Px((u=l==null?void 0:l.plotParameters[i.name])==null?void 0:u.plotType)&&!Ac(l==null?void 0:l.name)&&(s||!s&&(l==null?void 0:l.name)===me.PRICE)}).map(i=>Math.min(...i.values.filter(l=>l.y!==null).map(l=>os(l.y)?l.y.low:l.y)));return Math.min(...o)});return n?Math.min(...n):0}),ZLe=x(fo,HC,(e,t)=>{const s=e==null?void 0:e.map(n=>{const r=n.plots.filter(o=>{var i,l;return(l=(i=t.get(n.id))==null?void 0:i.plotParameters[o.name])==null?void 0:l.secondaryYScale}).map(o=>Math.max(...o.values.filter(i=>i.y!==null).map(i=>os(i.y)?i.y.high:i.y)));return Math.max(...r)});return s?Math.max(...s):0}),As=x(Xs,XLe,QLe,(e,t,s)=>{const n=t-s;return No().domain([s-Sv*n,t+Sv*n]).range([e-20,20])}),XN=x(Xs,ZLe,(e,t)=>No().domain([0,t]).range([e,.75*e])),JLe=x(Bc,UC,(e,t)=>[t/2,e-t/2]),_s=x(fo,JLe,(e,t)=>{var n,r;const s=((r=(n=e==null?void 0:e[0])==null?void 0:n.plots[0])==null?void 0:r.values.length)??1;return No().domain([0,s-1]).range(t)}),e_e=x(As,Xs,(e,t)=>{const s=Math.floor(t/fe.yAxisTickHeight);return e.ticks(s)}),t_e=x(_s,Bc,(e,t)=>{const s=Math.floor(t/fe.xAxisTickWidth),n=Math.max(s,YR);return e.ticks(n)}),s_e=x(_s,As,(e,t)=>bc().x((s,n)=>e(n)).defined(s=>s.y!==null).y(s=>s.y===null?Number.MAX_SAFE_INTEGER:os(s.y)?t(s.y.close):t(s.y)).curve(bu)),n_e=x(_s,XN,(e,t)=>bc().x((s,n)=>e(n)).defined(s=>s.y!==null).y(s=>s.y===null?Number.MAX_SAFE_INTEGER:os(s.y)?t(s.y.close):t(s.y)).curve(bu)),r_e=(e,t)=>e===0&&t>0||e>0&&t<0,o_e=(e,t)=>e===0&&t<0||e<0&&t>0,a_e=(e,t,s,n)=>{const r=e.reduce((l,c,d)=>(os(c.y)&&l.push({x:d,y:c.y.close}),l),[]),o=Og(r),i=[];return r.forEach((l,c)=>{const d=Math.max(0,l.y),u=Math.min(n,s(0)),h=t(l.x),p=s(d);if(c>0&&r_e(d,r[c-1].y)){const m={x:t(ky(l.x,o)),y0:u,y1:u};i.push(m)}i.push({x:h,y0:u,y1:p})}),i},i_e=(e,t,s)=>{const n=e.reduce((i,l,c)=>(os(l.y)&&i.push({x:c,y:l.y.close}),i),[]),r=Og(n),o=[];return n.forEach((i,l)=>{const c=Math.min(0,i.y),d=t(i.x),u=s(0),h=s(c);if(l>0&&o_e(c,n[l-1].y)){const p={x:t(ky(i.x,r)),y0:u,y1:u};o.push(p)}o.push({x:d,y0:u,y1:h})}),o},l_e=()=>lx().x(e=>e.x).y0(e=>e.y0).y1(e=>e.y1),fv=(e,t)=>t.find(s=>e.findIndex(n=>n.id===s.id)===-1),_g=x($s,e=>e.settings.pointer);x(_g,e=>e.font);const QN=x(_g,e=>e.lineColor);x(_g,e=>e.pillColor);x(_g,e=>e.pillTextColor);const Ng=x($s,e=>e.hoveredChart),VC=(e,t,s,n,r,o,i,l,c,d,u,h)=>{var D;const p=t.pointer.font,m=t.pointer.pillColor,g=t.pointer.pillTextColor,S=fe.pointer.pillPadding;e.font=p;const T=l?s/100:s,y=((D=T.toString().split(".")[1])==null?void 0:D.length)??0;let b;c&&!l?b=v1(n,y):u&&d!==void 0?b=Fs(n,d,h):b=cu(n,T,l);const E=e.measureText(b).width+2*S;e.save(),e.textBaseline="middle",e.fillStyle=m;const v=Br.isSafari?o-1:o+1;if(i!==void 0&&i>r-E){e.textAlign="right";const w=r-E+S;e.moveTo(w,o),e.lineTo(w-S,o-S),e.lineTo(w-E,o-S),e.lineTo(w-E,o+S),e.lineTo(w-S,o+S),e.closePath(),e.fill(),e.fillStyle=g,e.fillText(b,w-S-3,v)}else{e.textAlign="left";const w=r-E+S-3;e.moveTo(w-S,o),e.lineTo(w,o-S),e.lineTo(w+E,o-S),e.lineTo(w+E,o+S),e.lineTo(w,o+S),e.closePath(),e.fill(),e.fillStyle=g,e.fillText(b,w+3,v)}e.restore()};let cd=0;const WC=(e,t,s,n,r,o,i)=>{let c=e.measureText(t).width;cd<c?cd=c:c<cd&&(c=c+c*fe.DPR,c>cd&&(c=cd));const d=fe.pointer.xLabelHeight,u=o-fe.pointer.xLabelStartY,h=fe.pointer.pillPadding;e.save(),e.fillStyle=s,e.moveTo(i,u),e.lineTo(i+h,u+h),e.lineTo(i+5+c/2,u+h),e.lineTo(i+5+c/2,u+h+d),e.lineTo(i-5-c/2,u+h+d),e.lineTo(i-5-c/2,u+h),e.lineTo(i-h,u+h),e.closePath(),e.fill(),e.fillStyle=n,e.textAlign="center",e.textBaseline="middle",e.font=r;const p=Br.isSafari?o+fe.pointer.labelYAreaSafariHeight:o+fe.pointer.labelYAreaDefaultHeight;e.fillText(t,i,p),e.restore()},ZN=(e,t,s,n,r)=>{const o=t.pointer.font,i=t.pointer.pillColor,l=t.pointer.pillTextColor,c=t.xAxisLabelFormat,d=et(s).format(c);WC(e,d,i,l,o,n,r)},Pg=(e,t)=>{const{color:s,dash:n,level:r,line:o}=t;return e.save(),e.beginPath(),e.strokeStyle=s,e.textBaseline="middle",e.setLineDash(n),e.moveTo(r,o.from),e.lineTo(r,o.to),e.stroke(),e.restore(),e},GC=(e,t)=>{const{color:s,dash:n,level:r,line:o}=t;return e.save(),e.beginPath(),e.strokeStyle=s,e.textBaseline="middle",e.setLineDash(n),e.moveTo(o.from,r),e.lineTo(o.to,r),e.stroke(),e.restore(),e},Tv=(e,t,s,n)=>{const r=Ng(e),o=Bc(e),i=Xs(e),l=o+pt.left,c=i+pt.top;let d;if(e.isDragActive){t.clearRect(0,0,l+pt.right,c+pt.bottom);return}return t.clearRect(0,0,l+pt.right,c+pt.bottom),r===ys.PriceChart&&(JN(t,e,s),d=NT(t,e,n,s)),t.beginPath(),d},NT=(e,t,s,n)=>{const r=As(t),o=ln(t),i=Xs(t),l=QN(t),c=o+pt.left,d=i+pt.top;if(s<d&&s>pt.top){const u=r.invert(s-pt.top),h={color:l,level:s,line:{from:pt.left,to:c},dash:[fe.dashSize,fe.dashSize]};return GC(e,h),VC(e,t.settings,t.priceTick,u,c,s,n,void 0,void 0,t.fractionalType,t.showFractionalPricing,t.showDoubleTickForFractionalPricing),u}},JN=(e,t,s)=>{var h,p,m,g;const n=fo(t),r=_s(t),o=ln(t),i=Xs(t),l=QN(t),c=o+pt.left,d=i+pt.top,u=s-pt.left+t.offsetX;if(s<c&&s>pt.left){const S={color:l,level:s,line:{from:pt.top,to:d},dash:[fe.dashSize,fe.dashSize]};if(n&&n.length>0&&((h=n[0].plots[0])==null?void 0:h.values)!==void 0){Pg(e,S);const T=Math.round(r.invert(u)),y=(p=n[0].plots[0])==null?void 0:p.values.length,b=T<0?0:T>=y?y-1:T,E=((m=n[0].plots[0])==null?void 0:m.values[b])!==void 0?(g=n[0].plots[0])==null?void 0:g.values[b].x:new Date;ZN(e,t.settings,E,d,s)}return[r]}};function as(e){return t=>e.reduce((s,n)=>n(s),t)}const c_e=x($s,e=>e.hoveredPrice),d_e=x($s,e=>e.hoveredDateIndex),u_e=x($s,e=>e.options.length===0?void 0:e.options),h_e=x($s,e=>e.workingOrders),Ku=x(BC,e=>e.optionPill),p_e=x(Ku,e=>e.font),m_e=x(Ku,e=>e.pillTextColor),YC=x(Ku,e=>e.sellColor),qC=x(Ku,e=>e.buyColor),g_e=x(Ku,e=>e.pillBackColor),eP=x($s,e=>e.drawings),S_e=x($s,e=>e.drawingControls),Fc=e=>e,yv=.1,f_e=x(Fc,e=>e.settings),KC=x(Fc,e=>e.width),T_e=x(Fc,e=>e.height),zC=x(f_e,e=>e.chart),y_e=e=>e.buyColor,C_e=x(zC,jC),b_e=x(zC,y_e),E_e=x(T_e,e=>e-pt.top-pt.bottom),tP=x(Fc,e=>1),zu=x(Fc,e=>e.studies),sP=x(Fc,e=>e.studiesParams),XC=x(KC,zu,(e,t)=>{var r;const s=(t==null?void 0:t[0])??void 0;if(s===void 0)return e;const n=((r=s.plots[0])==null?void 0:r.values.length)??1;return e/n}),A_e=x(zu,e=>{var t,s;return((s=(t=e==null?void 0:e[0])==null?void 0:t.plots[0])==null?void 0:s.values.length)??0}),v_e=x(tP,XC,(e,t)=>Math.max(0,Math.floor(e/t)-1)),I_e=x(A_e,tP,KC,XC,(e,t,s,n)=>Math.min(e,Math.floor((t+s)/n)+1)),nP=x(zu,v_e,I_e,(e,t,s)=>e==null?void 0:e.map(n=>({...n,plots:n.plots.map(r=>({...r,values:r.values.slice(t,s)}))}))),x_e=x(nP,sP,(e,t)=>{const s=e==null?void 0:e.map(n=>{const r=n.plots.filter(o=>{const i=t.get(n.id);return(i==null?void 0:i.name)===me.PRICE}).map(o=>Math.max(...o.values.filter(i=>i.y!==null).map(i=>os(i.y)?i.y.close:i.y)));return Math.max(...r)});return s?Math.max(...s):0}),w_e=x(nP,sP,(e,t)=>{const s=e==null?void 0:e.map(n=>{const r=n.plots.filter(o=>{const i=t.get(n.id);return(i==null?void 0:i.name)===me.PRICE}).map(o=>Math.min(...o.values.filter(i=>i.y!==null).map(i=>os(i.y)?i.y.close:i.y)));return Math.min(...r)});return s?Math.min(...s):0}),rP=x(E_e,x_e,w_e,(e,t,s)=>{const n=t-s;return No().domain([s-yv*n,t+yv*n]).range([e+18*fe.DPR,10*fe.DPR])}),O_e=x(KC,XC,(e,t)=>[4*fe.DPR+t/2,e-6*fe.DPR-t/2]),oP=x(zu,O_e,(e,t)=>{var n,r;const s=((r=(n=e==null?void 0:e[0])==null?void 0:n.plots[0])==null?void 0:r.values.length)??1;return No().domain([0,s-1]).range(t)}),R_e=x(oP,rP,(e,t)=>bc().x((s,n)=>e(n)).defined(s=>s.y!==null).y(s=>s.y===null?Number.MAX_SAFE_INTEGER:os(s.y)?t(s.y.close):t(s.y)).curve(bu)),xi=(e,t)=>s=>{const[n,r]=s,o=e.width,i=e.height;return n.canvas.width=o,n.canvas.height=i,n.clearRect(0,0,o,i),r&&t&&(r.canvas.width=o,r.canvas.height=i,r.clearRect(0,0,o,i)),n},D_e=e=>t=>()=>{const[s,n]=t,r=e.width,o=e.height,i=pt.top,l=pt.bottom,c=pt.left,d=pt.left;return s.clearRect(0,0,r,i),s.clearRect(0,o-l,r,l),s.clearRect(0,0,c,o),s.clearRect(r-d,0,d,o),n&&(n.clearRect(0,0,r,i),n.clearRect(0,o-l,r,l),n.clearRect(0,0,c,o),n.clearRect(r-d,0,d,o)),s},Sc=e=>e.transform(1,0,0,1,0,0),Xu=(e,t)=>s=>(s.translate(e,t),s),kg=(e,t,s)=>n=>(n.beginPath(),n.strokeStyle=s,n.lineWidth=fe.DPR,n.strokeRect(0,0,e,t-fe.DPR),n),aP=(e,t,s,n)=>r=>(s&&(r.fillStyle=n,r.fillRect(0,0,e,t-1)),r),L_e=(e,t,s,n,r,o,i,l=0,c)=>d=>{if(!r)return d;const u=s(t);let h;switch(i.type){case Ae.SINGLE:h=Vt(c??i.color);break;case Ae.INCREASING_HISTOGRAM:h=MN(r,o,i);break;case Ae.INCREASING_VALUE:h=$N(r,o,i);break;default:h=Vt(Re.lightGray)}return d.beginPath(),d.fillStyle=h,d.strokeStyle=h,d.lineWidth=e*.9,d.moveTo(u,n(l)),d.lineTo(u,n(r.y!==null&&!os(r.y)?r.y:0)),d.stroke(),d.lineWidth=1,d},__e=(e,t,s,n,r)=>o=>{const i=r.type===Ae.SINGLE?Vt(r.color):Vt(Re.cyan);return o.beginPath(),o.fillStyle=i,o.strokeStyle=i,o.lineWidth=e*.9,o.moveTo(s,n),o.lineTo(s+t,n),o.stroke(),o.lineWidth=1,o},iP=(e,t,s,n,r,o,i)=>l=>{const c=t/e.length,d=e.map((u,h)=>{const p=h>0?e[h-1]:null,m=i&&i[h];return o(h)?L_e(c,h,s,n,u,p,r.colorOptions,0,m):()=>l});return as(d)(l)},N_e=(e,t,s,n,r,o,i)=>l=>{var b;const c=e.findIndex(E=>E.y!==null),d=e.findIndex(E=>E.y!==null)+i,{minPaintingPrice:u=0,priceStep:h=0}=o[0]||{},p=s(c),g=s(d)-p,S=n(u),T=n(0)-n(h),y=(((b=o[0])==null?void 0:b.bars)||[]).map(({value:E},v)=>{const D=p+E*g,w=D-p>=0?D-p:0,N=S-T*v;return __e(T,w,p,N,r.colorOptions)});return as(y)(l)},P_e=(e,t,s,n,r,o)=>i=>{const l=t/e.length*.5;let c;const d=e.map((u,h)=>(r.type===Ae.BOOLEAN&&(c=Vt(u.y===1?r.True:r.False)),o(h)&&typeof u.y=="number"?_o(s(h),n(0),l/2,c):()=>i));return as(d)(i)},k_e=(e,t)=>s=>{if(s===null)return s;const n=e.offsetX;return s.translate(-n,0),t&&t.translate(-n,0),s},M_e=e=>t=>(t.resetTransform(),e&&e.resetTransform(),t),lP=(e,t)=>s=>{const n=k_e(e,t),r=M_e(t),o=as(s);return as([n,o,r])},mo=(e,t,s,n,r,o=Zm,i=[0,0])=>l=>(l.save(),l.beginPath(),l.lineWidth=o,l.strokeStyle=r!==void 0?r:"rgba(0,0,0,0)",l.setLineDash(i),l.moveTo(e,t),l.lineTo(s,n),l.stroke(),l.restore(),l),_o=(e,t,s,n)=>r=>(r.save(),r.beginPath(),r.fillStyle=n,r.arc(e,t,Math.abs(s),0,Math.PI*2,!0),r.fill(),r.restore(),r),$_e=(e,t,s,n,r)=>o=>{let i;const l=r?6*fe.DPR:5*fe.DPR;let c;r?(i=_a.hoveredUpArrow,c=n?-9*fe.DPR:9*fe.DPR):(i=_a.upArrow,c=n?-8*fe.DPR:8*fe.DPR);const d=new Path2D(i);return o.save(),o.translate(e-l,t-c),o.scale(fe.DPR,fe.DPR),n||o.scale(1,-1),o.fillStyle=s,o.fill(d),o.restore(),o},Cv=(e,t,s,n)=>r=>(r.save(),r.fillStyle=n,r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y),r.lineTo(s.x,s.y),r.fill(),r.restore(),r),j_e=(e,t,s,n)=>r=>{const o=new Path2D(_a.expansionControlImg);return r.save(),r.translate(e,t),r.rotate((s+35)*Math.PI/180),r.translate(-5,-5),r.fillStyle=n?wt.WHITE:oe.DENIM,r.fill(o),r.restore(),r},B_e=(e,t,s,n)=>r=>{const o=new Path2D(_a.alertImg);return r.save(),r.translate(e,t),r.scale(fe.DPR,fe.DPR),r.fillStyle=n?GR:s,r.fill(o),r.restore(),r},F_e=(e,t,s)=>n=>{const r=new Path2D(_a.earningsEventIcon);return n.save(),n.translate(e,t),n.scale(fe.DPR,fe.DPR),n.fillStyle=s,n.fill(r),n.restore(),n},bv=(e,t,s,n=Y.BuyCompleted)=>r=>{const o=new Path2D(n===Y.BuyCompleted?_a.buyCompleted:_a.sellCompleted);return r.save(),r.translate(e,t),r.scale(fe.DPR,fe.DPR),r.fillStyle=s,r.fill(o),r.restore(),r},H_e=(e,t,s)=>n=>{const r=new Path2D(_a.dividendsEventIcon);return n.save(),n.translate(e,t),n.scale(fe.DPR,fe.DPR),n.fillStyle=s,n.fill(r),n.restore(),n},U_e=(e,t,s,n,r,o)=>{const{padding:i,leading:l,textHeight:c,iconWidth:d}=fe.dynamicContent,u=ic();n.font=fe.chart.font;let h="",p="";r&&(h=`${__("est")}: ${su.format(r)}`),o&&(p=`${__("act")}: ${su.format(o)}`);const m=n.measureText(h).width+2*i,g=n.measureText(p).width+2*i,S=Math.max(m,g),T=2*i+2*c+l,y=e+d/2-S/2,b=t-T;let E=b+i,v=b+i;r&&o?(E=b+i+c/2,v=E+c+l):r&&!o?E=b+T/2:!r&&o&&(v=b+T/2);const D=VP(s,u),w=WP(s,u),N=s?oe.OFF_BLACK:oe.GRAY_NICKEL;return Mg({x:y,y:b},{x:y+S,y:b+T},N,1,4,N)(n),n.textAlign="left",n.textBaseline="middle",n.fillStyle=s?wt.WHITE:wt.BLACK,r&&n.fillText(h,y+i,E),r&&o&&(n.fillStyle=o>=r?D:w),o&&n.fillText(p,y+i,v),n},V_e=(e,t,s,n,r,o,i,l,c,d,u)=>{u.font=o;const h=dm(r),p=um(h,e,t),m=u.measureText(p).width,g=QC(s,n,m,i,l,c,d,u);return cP(h,p,e,t,g,o,i,c,d,u),u},cP=(e,t,s,n,r,o,i,l,c,d)=>{const{paddingStartY:u}=fe.hoverTooltip;if(d.font=o,d.textAlign="left",d.textBaseline="middle",d.fillStyle=oe.AZURE,d.fillText(__("Earnings"),r.adjustedStartX+r.padding,r.startY+r.padding+u),s&&n&&s!==n&&!l){const h=e[1],p=e[2],m=e.slice(3).join(""),g=d.measureText(h).width,S=d.measureText(p).width,T=ic(),y=VP(i,T),b=WP(i,T);d.fillStyle=jh(i),d.fillText(h,r.adjustedStartX+r.padding,r.startY+r.padding+r.textHeight+r.leading+u),d.fillStyle=n&&s?n>=s?y:b:jh(i),d.fillText(p,r.adjustedStartX+r.padding+g,r.startY+r.padding+r.textHeight+r.leading+u),d.fillStyle=jh(i),d.fillText(m,r.adjustedStartX+r.padding+g+S,r.startY+r.padding+r.textHeight+r.leading+u)}else d.fillStyle=jh(i),d.fillText(t,r.adjustedStartX+r.padding,r.startY+r.padding+r.textHeight+r.leading+u);return d},W_e=(e,t,s,n,r,o,i,l,c,d,u)=>{u.font=o;const h=dm(r),p=um(h,e),m=Math.max(u.measureText(h[0]).width,u.measureText(p).width),g=QC(s,n,m,i,l,c,d,u);return dP(p,e,g,o,i,c,d,u),u},dP=(e,t,s,n,r,o,i,l)=>{const{paddingStartY:c}=fe.hoverTooltip;return l.font=n,l.textAlign="left",l.textBaseline="middle",l.fillStyle=oe.GREEN_CORE,l.fillText(__("Dividends"),s.adjustedStartX+s.padding,s.startY+s.padding+c),l.fillStyle=r?wt.WHITE:wt.BLACK,l.fillText(e,s.adjustedStartX+s.padding,s.startY+s.textHeight+s.padding+s.leading+c),l},G_e=(e,t,s,n,r,o,i,l,c,d,u,h,p,m)=>{m.font=c;const g=dm(i),S=um(g,e,t),T=dm(l),y=um(T,s),b=Math.max(m.measureText(S).width,m.measureText(y).width),E=QC(r,o,b,d,u,h,p,m,!0);return cP(g,S,e,t,E,c,d,h,p,m),E.startY=E.startY+E.padding+ +E.textHeight+E.leading+8*fe.DPR,dP(y,s,E,c,d,h,p,m),m},QC=(e,t,s,n,r,o,i,l,c)=>{const{padding:d,leading:u,textHeight:h,iconWidth:p,paddingFromIcon:m}=fe.hoverTooltip,g=c?4*d+4*h+u:2*d+2*h+u,S=t-g-m,T=t-m;s=s+2*d;const y=e+p/2-s/2,b=y+s,E=tLe(y,b,i,r),v=E+s,D=n?wt.BLACK:wt.WHITE,w=n?oe.GRAY_STONE:oe.GRAY;return Mg({x:E,y:S},{x:v,y:T},w,1,4,D)(l),{padding:d,leading:u,textHeight:h,iconWidth:p,paddingFromIcon:m,contentHeight:g,startY:S,endY:T,contentWidth:s,startX:y,endX:b,adjustedStartX:E,adjustedEndX:v}},Y_e=(e,t,s)=>n=>{const r=new Path2D(_a.closeImg);return n.save(),n.translate(e,t),n.scale(fe.DPR,fe.DPR),n.fillStyle=s,n.fill(r),n.restore(),n},xo=(e,t,s,n=1,r)=>o=>{const i=t.x-e.x,l=t.y-e.y;o.save(),r!==void 0&&(o.fillStyle=r,o.fillRect(e.x,e.y,i,l)),s!==void 0&&(o.strokeStyle=s,o.lineWidth=n,o.strokeRect(e.x,e.y,i,l)),o.restore()},q_e=(e,t,s,n,r,o,i=1,l=2,c)=>d=>{if(d.save(),d.beginPath(),o!==void 0&&(d.strokeStyle=o),d.lineWidth=i,d.moveTo(e.x,e.y+l),d.quadraticCurveTo(e.x,e.y,e.x+l,e.y),r){const u={x:s-n,y:e.y},h={x:s,y:2*fe.DPR},p={x:s+n,y:e.y};d.lineTo(u.x,u.y),d.lineTo(h.x,h.y),d.lineTo(p.x,p.y)}if(d.lineTo(t.x-l,e.y),d.quadraticCurveTo(t.x,e.y,t.x,e.y+l),d.lineTo(t.x,t.y-l),d.quadraticCurveTo(t.x,t.y,t.x-l,t.y),d.lineTo(e.x+l,t.y),!r){const u={x:s+n,y:t.y},h={x:s,y:t.y+n-fe.DPR},p={x:s-n,y:t.y};d.lineTo(u.x,u.y),d.lineTo(h.x,h.y),d.lineTo(p.x,p.y)}d.quadraticCurveTo(e.x,t.y,e.x,t.y-l),d.closePath(),d.stroke(),c!==void 0&&(d.fillStyle=c,d.fill()),d.restore()},Mg=(e,t,s,n=1,r=2,o)=>i=>{i.save(),i.beginPath(),s!==void 0&&(i.strokeStyle=s),i.lineWidth=n,i.moveTo(e.x,e.y+r),i.quadraticCurveTo(e.x,e.y,e.x+r,e.y),i.lineTo(t.x-r,e.y),i.quadraticCurveTo(t.x,e.y,t.x,e.y+r),i.lineTo(t.x,t.y-r),i.quadraticCurveTo(t.x,t.y,t.x-r,t.y),i.lineTo(e.x+r,t.y),i.quadraticCurveTo(e.x,t.y,e.x,t.y-r),i.closePath(),i.stroke(),o!==void 0&&(i.fillStyle=o,i.fill()),i.restore()},uP=(e,t,s,n)=>r=>o=>i=>{const{start:l,end:c,curve:d}=e,u=e.guid===o.selectedDrawing,h=o.selectedDrawing!==void 0,p=Vt(d.color),m=Pl(p,u,h,t),g=_s(o),S=As(o),T=g(l.time),y=S(l.value),b=g(c.time),E=S(c.value),v={x:T,y},D={x:b,y:E};return s&&!u?xo(v,D,void 0,0,m)(i):!s&&(t||u)&&xo(v,D,m,t?2:1)(i),r&&n&&xo(v,D,n,1,n)(r),i},Ev=(e,t,s,n)=>r=>{r.save(),r.beginPath(),r.strokeStyle=s,r.lineWidth=n||fe.DPR,t.context(r)(e),r.stroke(),r.restore()},hP=(e,t,s,n,r,o)=>i=>(Ev(e,t,s,n?qR:Zm)(i),r!==void 0&&o!==void 0&&Ev(e,t,o,Do)(r),i),K_e=(e,t,s,n,r,o,i,l)=>c=>{const u=h=>(p,m)=>s.map((g,S)=>r(S)&&typeof g.y=="number"?_o(e(S),t(g.y),o?m+1:m,p):()=>h);return i!==void 0&&l!==void 0&&as(u(i)(l,2+Do))(i),as(u(c)(n,2))(c)},z_e=(e,t,s,n,r,o)=>i=>{const l=e.length,c=n/l,d=e.map((u,h)=>u.y!==null&&os(u.y)&&o(h)?aNe(u.y,h,c,t,s,r):()=>i);return as(d)(i)},X_e=(e,t,s,n,r,o)=>i=>{const l=e.length,c=n/l,d=e.map((u,h)=>u.y!==null&&os(u.y)&&o(h)?iNe(u.y,h,c,t,s,r):()=>i);return as(d)(i)},Q_e=(e,t,s,n,r)=>o=>{const i=e.map((l,c)=>{const d=e[c+1];return Ut(l)&&os(l.y)&&Ut(d)&&os(d.y)&&r(c)?J_e(l.y,d.y,c,t,s,n):()=>o});return as(i)(o)},Z_e=(e,t,s,n,r,o,i,l)=>c=>{if(!s.length)return c;let d=null,u=null,h=null;const p=[];return s.forEach((m,g)=>{const S=Ut(m)&&Ut(m.x)&&Ut(m.y)&&!os(m.y)&&r(g),T=m.y===h,y=g===s.length-1;if(T)u=g;else{const b=Av(d,u,h,h,e,t,n,o,i,l);p.push(b),d=S?g:null,u=d,h=S&&!os(m.y)?m.y:null}if(y){const b=Av(d,u,h,h,e,t,n,o,i,l);p.push(b)}}),as(p)(c)},Av=(e,t,s,n,r,o,i,l,c,d)=>u=>{if(!Ut(e)||!Ut(t)||!Ut(s)||os(s)||!Ut(n)||os(n))return u;const h=r(e-.5),p=r(t+.5),m=o(s),g=o(n);return c!==void 0&&d!==void 0&&mo(h,m,p,g,d,Do)(c),mo(h,m,p,g,i,l?qR:Zm)(u)},J_e=(e,t,s,n,r,o)=>i=>{const{Increasing:l,Decreasing:c,NoChanges:d}=o,u=t===void 0||e.close===t.close?d:t.close>e.close?l:c,h=Vt(u);if(t===void 0)return i;const p=n(s),m=n(s+1),g=r(e.close),S=r(t.close);return mo(p,g,m,S,h)(i)},fc=(e,t,s)=>n=>{const r=e.x,o=e.y1,i=t.x,l=t.y1;return mo(r,o,i,l,s)(n)},eNe=(e,t,s,n,r,o)=>i=>{const{AreaPositive:l,LinePositive:c,AreaNegative:d,LineNegative:u}=n,h=a_e(e,t,s,r),p=i_e(e,t,s),m=lm(h,Vt(l)),g=lm(p,Vt(d)),S=s(0)<r,T=tNe(h,Vt(c),S),y=sNe(p,Vt(u),S);return as([g,m,T,y])(i)},tNe=(e,t,s)=>n=>{const r=e.reduce((o,i,l)=>{const c=e[l+1];if(c!==void 0&&(i.y1<i.y0&&(c==null?void 0:c.y1)<=i.y0||i.y1<=i.y0&&(c==null?void 0:c.y1)<i.y0)&&(o.push(fc(i,c,t)),s)){const d={x:i.x,y1:i.y0,y0:i.y0},u={x:c.x,y1:c.y0,y0:c.y0};o.push(fc(d,u,t))}return o},[]);return as(r)(n)},sNe=(e,t,s)=>n=>{const r=e.reduce((o,i,l)=>{const c=e[l+1];if(c!==void 0&&(i.y1>i.y0&&(c==null?void 0:c.y1)>=i.y0||i.y1>=i.y0&&(c==null?void 0:c.y1)>i.y0)&&(o.push(fc(i,c,t)),s)){const d={x:i.x,y1:i.y0,y0:i.y0},u={x:c.x,y1:c.y0,y0:c.y0};o.push(fc(d,u,t))}return o},[]);return as(r)(n)},lm=(e,t)=>s=>(l_e().context(s)(e),s.fillStyle=t,s.fill(),s),nNe=(e,t,s,n,r,o,i,l,c,d,u)=>h=>{const p=sLe(s,i==null?void 0:i.values),m=g=>(S,T)=>p.map((y,b)=>{const E=nLe(e,t,T,l,y);return o(b)&&y&&E?$_e(e(b),E,S,T,c):()=>g});return d!==void 0&&u!==void 0&&as(m(d)(u,r))(d),as(m(h)(n,r))(h)},pP=(e,t)=>s=>s>=e&&s<=t,rNe=(e,t,s)=>{var h;const{buyColor:n,sellColor:r,volumeColor:o}=s,i=e.find(({name:p})=>p===me.VOLUME),l=(h=t.get(i==null?void 0:i.studyId))==null?void 0:h.parameters;if(!(l==null?void 0:l.colorAsSymbolTicks))return[];const d=e.find(({name:p})=>p===me.PRICE);return((d==null?void 0:d.values.map(({y:p})=>p??{open:0,close:0,high:0,low:0}))??[]).map((p,m)=>{const{open:g,close:S}=p;let T=g<S?sp(n):sp(r);return g===S&&(T=sp(o)),T})},oNe=e=>t=>s=>{const n=fo(e),r=_s(e),o=As(e),i=XN(e),l=Bc(e),c=Xs(e),d=qN(e),u=KN(e),h=pP(d,u),p=FLe(e),m=zC(e);if(n===void 0)return s;const S=n.map(b=>{const E=[];return b.plots.forEach(v=>E.push(v)),E}).reduce((b,E)=>b.concat(E),[]),T=rNe(S,e.studiesParams,m),y=S.map(b=>{var O,H,C,M,q;const E=(O=e.studiesParams.get(b.studyId))==null?void 0:O.plotParameters,v=E==null?void 0:E[b.name],D=v!=null&&v.secondaryYScale?i:o,w=b.values,N=v!=null&&v.secondaryYScale?n_e(e):s_e(e),L=e.drawingToColor[`${b.studyId}${Qm}`],P=(H=e.hoveredStudies)==null?void 0:H.filter(W=>W.studyId===b.studyId),F=P?P.length!==0:!1;switch(v==null?void 0:v.plotType){case xe.line:if((v==null?void 0:v.colorOptions.type)===Ae.SINGLE){const W=Vt(v.colorOptions.color);return hP(w,N,W,F,t,L)}if((v==null?void 0:v.colorOptions.type)===Ae.INCREASING_VALUE){const W=v.colorOptions;return Q_e(w,r,o,W,h)}return()=>s;case xe.candle:if((v==null?void 0:v.colorOptions.type)===Ae.CANDLE){const W=v.colorOptions;return z_e(w,r,o,l,W,h)}return()=>s;case xe.histogram:return b.volumeProfiles?N_e(w,c,r,D,v,b.volumeProfiles,p):iP(w,l,r,D,v,h,T);case xe.area:if((v==null?void 0:v.colorOptions.type)===Ae.AREA){const W=v.colorOptions;return eNe(w,r,o,W,c)}return()=>s;case xe.bar:if((v==null?void 0:v.colorOptions.type)===Ae.INCREASING_VALUE){const W=v.colorOptions;return X_e(w,r,o,l,W,h)}return()=>s;case xe.lineSegments:if((v==null?void 0:v.colorOptions.type)===Ae.SINGLE){const W=Vt(v.colorOptions.color);return Z_e(r,o,w,W,h,F,t,L)}return()=>s;case xe.dots:if((v==null?void 0:v.colorOptions.type)===Ae.SINGLE){const W=Vt(v.colorOptions.color);return K_e(r,o,w,W,h,F,t,L)}return()=>s;case xe.crossoverArrows:if((v==null?void 0:v.colorOptions.type)===Ae.CROSSOVER){const W=S.find(he=>he.studyId==="price"),z=W?(M=(C=e.studiesParams.get(W.studyId))==null?void 0:C.plotParameters.Price)==null?void 0:M.plotType:void 0,re=kx((q=e.studiesParams.get(b.studyId))==null?void 0:q.parameters),ae=jN(re),Me=Vt(ae?v.colorOptions.Above:v.colorOptions.Below);return nNe(r,o,w,Me,ae,h,W,z,F,t,L)}return()=>s;default:return()=>s}});return as(y)(s)},aNe=(e,t,s,n,r,o)=>i=>{const{open:l,close:c,high:d,low:u}=e,h=n(t),p=l<c,m=l>c;let g,S;p?(g=o.FillUp,S=o.BorderUp):m?(g=o.FillDown,S=o.BorderDown):(g=o.Doji,S=o.Doji),i.save(),i.beginPath(),i.fillStyle=Vt(g),i.strokeStyle=Vt(S),i.lineWidth=fe.DPR;const T=r(l),y=r(c),b=T<=y?T:y,E=10*s/100,v=h-s/2+E,D=s-2*E,w=Math.abs(r(l)-r(c)),N=w<1?1:w;return g.a===0?i.strokeRect(v,b,D,N):(i.strokeRect(v,b,D,N),i.fillRect(v,b,D,N)),i.moveTo(h,r(d)),i.lineTo(h,b),i.moveTo(h,b+N),i.lineTo(h,r(u)),i.stroke(),i.restore(),i},iNe=(e,t,s,n,r,o)=>i=>{const{open:l,close:c,high:d,low:u}=e,h=n(t),p=l<c,m=l>c;let g;p?g=o.Increasing:m?g=o.Decreasing:g=o.NoChanges,i.beginPath(),i.strokeStyle=Vt(g),i.lineWidth=fe.DPR,i.moveTo(h,r(d)),i.lineTo(h,r(u));const S=r(l),T=r(c),y=10*s/100,b=h-s/2+y,E=b+s-2*y;return i.moveTo(h,S),i.lineTo(b,S),i.moveTo(h,T),i.lineTo(E,T),i.stroke(),i},lNe=e=>t=>{const s=e_e(e),n=As(e),r=ln(e),o=qu(e),i=GN(e),l=FC(e);t.font=o,t.textAlign="right",t.textBaseline="bottom",t.fillStyle=l,t.strokeStyle=i,t.lineWidth=.5*fe.DPR;const c=s.length>0&&s.every(u=>u%1e3===0);let d=Sn;return e.showFractionalPricing?d=u=>Fs(u,e.fractionalType,e.showDoubleTickForFractionalPricing):c&&(d=O1),s.forEach(u=>{const h=n(u);t.beginPath(),t.moveTo(0,h),t.lineTo(r,h),t.stroke(),t.fillText(d(u),r,h)}),t},mP=(e,t,s,n,r,o,i)=>(e.forEach(l=>{const c=t(l);if(r.textAlign="center",s[l]){const d=et(s[l].x).format(n),u=r.measureText(d);c>u.width/2&&c+u.width/2<o&&r.fillText(d,c,i)}}),r),cNe=e=>t=>{var h,p;const s=t_e(e),n=_s(e),r=Xs(e),o=Bc(e),i=qu(e),l=GN(e),c=FC(e),d=$Le(e),u=fo(e);if(u&&u.length>0&&((h=u[0].plots[0])==null?void 0:h.values)!==void 0){t.font=i,t.fillStyle=c,t.strokeStyle=l;const m=Br.isSafari?r+fe.pointer.xLabelStartY+fe.pointer.labelYAreaSafariHeight:r+fe.pointer.xLabelStartY+fe.pointer.labelYAreaDefaultHeight;mP(s,n,(p=u[0].plots[0])==null?void 0:p.values,d,t,o,m)}return t},dNe=e=>t=>{switch(t.type){case J.Rectangle:return uP(t,e,!0)()}},uNe=e=>(eP(e)??ke()).reduce((s,n)=>{var i;const r=((i=e.hoveredDrawings)==null?void 0:i.find(l=>l===n.guid))!==void 0,o=dNe(r)(n);return o!==void 0?[...s,o(e)]:s},[]),hNe=(e,t,s)=>{if(s===null||t===null)return null;const n=lNe(e),r=cNe(e),o=kg(e.width,e.height,FC(e)),i=e.theme==="LIGHT"?oe.ALPHA_WHITE_50:oe.ALPHA_BLACK_15,l=aP(e.width,e.height,e.selectedDrawing!==void 0,i),c=oNe(e),d=uNe(e),u=xi(e),h=qs(t);if(h&&s){const p=u([h,s]),m=Xu(pt.left,pt.top)(p),g=n(m);lP(e,s)([r,as(d),c(s)])(g);const S=l(h),T=o(S);Sc(T)}return s},pNe=is(hNe),ia=5,PT=12,gP=70,vv=16,cm=100,lr=5*fe.DPR,dd=16*fe.DPR,$g=1,zi=22;var Eo=(e=>(e.Left="left",e.Right="right",e.Center="center",e))(Eo||{});const mNe=e=>t=>{const s=c_e(e),n=Ng(e),r=As(e);return e.priceLevelPreviewValue!==void 0?NT(t,e,r(e.priceLevelPreviewValue)):n!==void 0&&n!==ys.PriceChart&&s&&NT(t,e,r(s)),t},gNe=e=>t=>s=>{const n=_s(e),r=As(e),o=ln(e)*Nl(e),i=Xs(e),l=e.theme===Qt.DARK,c=e.activeAlerts,d=l?oe.HONEY:oe.DIJON,u=p=>{let m=d;if(e.selectedAlert&&!p||e.selectedDrawing){const g=sp(m);m=Qoe({...g,a:g.a-Uo})}return m},h=n(0);return c.forEach(p=>{var T;if(typeof p.threshold!="number")return;const m=r(p.threshold),g={x:h,y:m},S={x:o,y:m};if(m<i){const y=e.drawingToColor[`${p.id}${Ty}`],b=((T=e.hoveredAlerts)==null?void 0:T.find(w=>w===p.id))!==void 0,E=p.id===e.selectedAlert,v=!1,D=u(E);mo(g.x,g.y,S.x,S.y,D)(s),B_e(o+zue,m-Kue,D,E)(s),po(g,S,D,y,1,b,E,v)(s,t)}}),s},SNe=(e,t)=>e.type==="earning"?fNe(e.event,t):TNe(e.event,t),fNe=(e,t)=>{var o,i,l;const s=(o=e.estimatedDate)==null?void 0:o.getTime();return{timeDates:(l=(i=(t??[])[0])==null?void 0:i.plots[0])==null?void 0:l.values.map(c=>c.x),dateInMilliseconds:s}},TNe=(e,t)=>{var o,i,l;const s=(o=e.exDividendDate)==null?void 0:o.getTime();return{timeDates:(l=(i=(t??[])[0])==null?void 0:i.plots[0])==null?void 0:l.values.map(c=>c.x),dateInMilliseconds:s}},kT=(e,t,s)=>{const{timeDates:n,dateInMilliseconds:r}=SNe(e,s);if(!n||n.length===0||!r)return;const o=n==null?void 0:n.map(c=>c.getTime()),i=ky(r,o,!0),l=o.indexOf(i);if(l!==-1)return t(l)-Xf/2},yNe=is((e,t,s)=>{let n=!0,r=!0,o=!0,i=Number.MAX_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,d=-1,u=-1;s==null||s.forEach(m=>{const g=kT(m,e,t);if(g){const S=g+Xf;if(m.type==="earning"){const T=g+Wue/2-iE/2;T+iE>=c&&(r=!1),S>i&&(m.overlapWithEarning=!0,n=!1),S>l+1&&(m.overlapWithDividend=!0),g==l&&(m.stackWithOtherEvent=u),c=T,i=g,d=m.listIndex}else m.type==="dividend"&&(S>l&&(m.overlapWithDividend=!0,o=!1),S>i+1&&(m.overlapWithEarning=!0),g==i&&(m.stackWithOtherEvent=d),l=g,u=m.listIndex)}}),s.reverse();let h=Number.MIN_SAFE_INTEGER+1,p=Number.MIN_SAFE_INTEGER+1;return i=Number.MIN_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,d=-1,u=-1,s.forEach(m=>{const g=kT(m,e,t);if(g){const S=g+Xf;m.type==="earning"?(g<p-1&&(m.overlapWithDividend=!0),g==l&&(m.stackWithOtherEvent=u),i=g,h=S,d=m.listIndex):m.type==="dividend"&&(g<h-1&&(m.overlapWithEarning=!0),g==i&&(m.stackWithOtherEvent=d),l=g,p=S,u=m.listIndex)}}),s.reverse(),{showEarningsIcons:n,showEarningsPreviews:r,showDividendsIcons:o}},fs),CNe=(e,t,s,n,r,o,i,l)=>{const c=e.event,d=ln(s),u=s.theme===Qt.DARK,h=jo(s),p=qu(s),m=d<fe.ABBREVIATED_CHART_WIDTH,{earningContentText:g,earningId:S}=SP(e,s);(t==null?void 0:t.find(b=>b===S))!==void 0&&V_e(c.estimatedEps,c.actualEps,o,i,g,p,u,d,m,h,n);const y=s.drawingToColor[S];xo(l.start,l.end,void 0,0,y)(r)},SP=(e,t)=>{var c;const s=e.event,o=ln(t)<fe.ABBREVIATED_CHART_WIDTH?Zke(s):Xke(s),i=e.isHistorical?by:yy,l=`${s.symbol}-${(c=s.estimatedDate)==null?void 0:c.getTime()}${i}`;return{earningContentText:o,earningId:l}},bNe=(e,t,s,n,r,o,i,l)=>{const c=e.event,d=ln(s),u=s.theme===Qt.DARK,h=jo(s),p=qu(s),m=d<fe.ABBREVIATED_CHART_WIDTH,{dividendContentText:g,dividendId:S}=fP(e,s);(t==null?void 0:t.find(b=>b===S))!==void 0&&W_e(c.amount,c.exDividendDate,o,i,g,p,u,d,m,h,n);const y=s.drawingToColor[S];xo(l.start,l.end,void 0,0,y)(r)},fP=(e,t)=>{var c;const s=e.event,o=ln(t)<fe.ABBREVIATED_CHART_WIDTH?Jke(s):Qke(s),i=e.isHistorical?Ey:Cy,l=`${s.symbol}-${(c=s.exDividendDate)==null?void 0:c.getTime()}${i}`;return{dividendContentText:o,dividendId:l}},ENe=(e,t,s,n)=>{const r=ln(t),o=t.theme===Qt.DARK,i=jo(t),l=qu(t),c=r<fe.ABBREVIATED_CHART_WIDTH,d=e.hoveredEarningIds,u=e.hoveredDividendIds,h=e.earning,p=h.event,m=e.dividend,g=m.event,S=e.earningIconStartX,T=e.earningIconStartY,y=e.earningHoverDetectArea.start,b=e.earningHoverDetectArea.end,{earningContentText:E,earningId:v}=SP(h,t),{dividendContentText:D,dividendId:w}=fP(m,t),N=(d==null?void 0:d.find(O=>O===v))!==void 0,L=(u==null?void 0:u.find(O=>O===w))!==void 0;(N||L)&&G_e(p.estimatedEps,p.actualEps,g.amount,g.exDividendDate,S,T,E,D,l,o,r,c,i,s);const P=t.drawingToColor[v],F=t.drawingToColor[w];xo(y,b,void 0,0,P)(n),y.y+=16,b.y+=16,xo(y,b,void 0,0,F)(n)},ANe=e=>t=>s=>{const n=Xs(e),r=_s(e),o=fo(e),i=HLe(e),l=ULe(e),c=VLe(e),d=WLe(e),u=GLe(e),h=YLe(e),p=qLe(e),m=KLe(e),g=tMe(c,p,i,u),S=e.theme===Qt.DARK,{showEarningsIcons:T,showEarningsPreviews:y,showDividendsIcons:b}=yNe(r,o,g),E=T&&e.showEarningsIcon,v=b&&e.showDividendsIcon,D=[],w=[],N=[];return g==null||g.forEach(L=>{if(L.type==="earning"){if(E){const P=L.event,{iconStartX:F,iconStartY:O,hoverDetectArea:H}=Yv(L,o,n,r,v);F&&H&&(F_e(F,O,oe.AZURE)(s),Iv(L,g,D,N,F,O,H,l,d,v,h,m)),F&&(P.estimatedEps||P.actualEps)&&y&&e.showEarningsPreview&&U_e(F,O,S,s,P.estimatedEps,P.actualEps)}}else if(L.type==="dividend"&&v){const{iconStartX:P,iconStartY:F,hoverDetectArea:O}=Yv(L,o,n,r,E);P&&O&&(H_e(P,F,oe.GREEN_CORE)(s),Iv(L,g,w,N,P,F,O,h,m,E))}}),N==null||N.forEach(L=>{ENe(L,e,s,t)}),D==null||D.forEach(L=>{CNe(L.mergedEvent,L.hoveredIds,e,s,t,L.iconStartX,L.iconStartY,L.hoverDetectArea)}),w==null||w.forEach(L=>{bNe(L.mergedEvent,L.hoveredIds,e,s,t,L.iconStartX,L.iconStartY,L.hoverDetectArea)}),s},Iv=(e,t,s,n,r,o,i,l,c,d,u,h)=>{e.type==="earning"?e.stackWithOtherEvent!==void 0&&d?vNe(n,e,t[e.stackWithOtherEvent],r,o,i,l,c,u,h):INe(e,t,s,n,r,o,i,l,c):e.type==="dividend"&&(e.stackWithOtherEvent===void 0&&d||!d)&&xNe(e,t,s,n,r,o,i,l,c)},vNe=(e,t,s,n,r,o,i,l,c,d)=>{if(n&&o){const u=t.isHistorical?l:i,h=s.isHistorical?d:c;(u||h)&&e.push({earning:t,dividend:s,earningIconStartX:n,earningIconStartY:r,earningHoverDetectArea:o,hoveredEarningIds:u,hoveredDividendIds:h})}},INe=(e,t,s,n,r,o,i,l,c)=>{if(r&&i){const d=e.isHistorical?c:l;d&&s.push({mergedEvent:e,iconStartX:r,iconStartY:o,hoverDetectArea:i,hoveredIds:d})}},xNe=(e,t,s,n,r,o,i,l,c)=>{if(r&&i){const d=e.isHistorical?c:l;d&&s.push({mergedEvent:e,iconStartX:r,iconStartY:o,hoverDetectArea:i,hoveredIds:d})}},wNe=e=>t=>s=>{const{positions:n,theme:r,showFractionalPricing:o,fractionalType:i,showDoubleTickForFractionalPricing:l}=e,c=ln(e),d=Xs(e),u=fe.chart.font,h=YC(e),p=qC(e),m=c+pt.left,g=As(e);return s.font=u,n.forEach(S=>{const{openPrice:T,quantity:y}=S,b=Vn(o,T,i,l),v=`${y>0?"+":""}${y} @${b}`,D=y<0?h:p,w=10*fe.DPR+2*lr,N=s.measureText(v).width+2*lr,{isAboveVisibleChart:L,isInRange:P}=ihe(g.domain(),S.openPrice??0),F=N+8;if(P){const O=g(T??0),H=O-w/2;mo(N,O,m,O,D,1)(s),DNe(v,F,H+1,D,D,r===Qt.DARK?hi:Ca)(s),bv(10,H+2,D,y<0?Y.SellCompleted:Y.BuyCompleted)(s)}else{const O=10*fe.DPR,H=L?O:d-w-O+2*fe.DPR;LNe(v,F,H,L,D,D,r===Qt.DARK?hi:Ca)(s),bv(10,H+fe.DPR,D,y<0?Y.SellCompleted:Y.BuyCompleted)(s)}}),s},ONe=e=>t=>s=>{const n=h_e(e),r=ln(e),o=fe.optionPill.font,i=YC(e),l=qC(e),c=r+pt.left,d=As(e),u=e.drawingToColor,h=e.selectedWorkingOrderId;if(s.font=o,e.selectedWorkingOrderBackup!==void 0){const p=e.selectedWorkingOrderBackup.quantity,m=e.selectedWorkingOrderBackup.price,g=Qo(e.priceTick??0),S=m==null?void 0:m.toFixed(g),y=`${p>0?"+":""}${p} @${S}`,b=d(m??0),E=p<0?i:l,v=E,D=8*fe.DPR+2*lr,w=s.measureText(y).width+2*lr;mo(c-w-dd,b,0,b,v,1,[5*fe.DPR,5*fe.DPR])(s),MT(y,c,b-D/2,Ca,v,E,!1,!0,dd)(s)}return n.forEach((p,m)=>{var W,z;const g=p.reduce((re,ae)=>re+ae.quantity,0),S=p[p.length-1].id,T=((W=e.hoveredWorkingOrders)==null?void 0:W.find(re=>re===`${S}${wr}${Ka}`||re===`${S}${wr}`))!==void 0,y=h===`${S}${wr}`,b=Qo(e.priceTick??0),E=m==null?void 0:m.toFixed(b),D=`${g>0?"+":""}${g} @${E}`,w=d(m??0),N=T||y?sE:g<0?i:l,L=T||y?sE:N,P=8*fe.DPR+2*lr,F=s.measureText(D).width+2*lr;if(mo(c-F-dd,w,0,w,L,1,[5*fe.DPR,5*fe.DPR])(s),MT(D,c,w-P/2,T||y?hi:Ca,L,N,!1,!0,dd,T||y)(s),p.length>1){const re=p.length.toString(),ae=s.measureText(re).width+1;_o(c-F-ae/2,w-P/2,ae,N)(s),s.textBaseline="middle",s.fillStyle=Ca,s.fillText(p.length.toString(),c-F,w-P/2)}const H=((z=e.hoveredWorkingOrders)==null?void 0:z.find(re=>re===`${S}${wr}${Ka}`))!==void 0?Ca:hi;Y_e(c-21*fe.DPR,w-12*fe.DPR,H)(s);const C=`${S}${wr}${Ka}`,M=`${S}${wr}`,q=c-(s.measureText(D).width+2*lr+dd);xo({x:q,y:w-4*fe.DPR},{x:c-2,y:w+16*fe.DPR},void 0,0,u[M])(t),xo({x:c-16*fe.DPR,y:w},{x:c-2,y:w+16*fe.DPR},void 0,0,u[C])(t)}),s},RNe=e=>t=>{const s=Ng(e);if(s!==ys.PriceChart&&s!==ys.GainAndLossChart){const n=d_e(e);n&&JN(t,e,n)}return t},MT=(e,t,s,n,r,o,i,l=!1,c=0,d)=>u=>{const h=u.measureText(e).width+2*lr,p=8*fe.DPR+2*lr;if(u.strokeStyle=r,i&&(u.fillStyle=r,u.fillRect(t-c-h-3,s,3*fe.DPR,p)),l){const g={x:t-h-c,y:s},S={x:t,y:s+p};Mg(g,S,r,d?Do:$g,3,o)(u)}else u.fillStyle=o,u.lineWidth=fe.DPR,u.fillRect(t-h+fe.DPR,s,h,p),u.strokeRect(t-h+fe.DPR,s,h,p);u.textAlign="right",u.textBaseline="middle",u.fillStyle=n;const m=Br.isSafari?s+p/2:s+p/2+fe.DPR;return u.fillText(e,t-lr-c,m),u},DNe=(e,t,s,n,r,o,i=15,l=0,c)=>d=>{const u=d.measureText(e).width+2*lr,h=8*fe.DPR+2*lr;d.strokeStyle=r;const p={x:t-u-l,y:s},m={x:t+i,y:s+h};Mg(p,m,r,$g+1,2,o)(d),d.textAlign="right",d.textBaseline="middle",d.fillStyle=n;const S=Br.isSafari?s+h/2:s+h/2+fe.DPR;return d.fillText(e,t-lr-l+i,S),d},LNe=(e,t,s,n,r,o,i,l=15,c=0)=>d=>{const u=d.measureText(e).width+2*lr,h=8*fe.DPR+2*lr;d.strokeStyle=o;const p=10*fe.DPR,m={x:t-u-c,y:s},g={x:t+l,y:s+h+fe.DPR},S=8+(g.x-m.x)/2;q_e(m,g,S,p,n,o,$g+fe.DPR,2,i)(d),d.textAlign="right",d.textBaseline="middle",d.fillStyle=r;const T=Br.isSafari?s+h/2:s+h/2+fe.DPR;return d.fillText(e,t-lr-c+l,T),d},_Ne=e=>t=>{const s=u_e(e),n=ln(e),r=p_e(e),o=m_e(e),i=g_e(e),l=YC(e),c=qC(e),d=n+pt.left,u=As(e);if(t.font=r,s===void 0)return t;const h=s.map(p=>{const m=u(p.strike),g=p.longOrShort===La.Short?l:c,S=`${p.longOrShort===La.Short?"-":"+"}${A1(e.showFractionalPricing,p.strike,e.fractionalType,e.showDoubleTickForFractionalPricing)}${p.optionType}`;return MT(S,d,m,o,g,i,!0)});return as(h)(t)},ZC=(e,t,s,n,r=ia,o=!1)=>i=>{const l=o?e.x-r:e.x+r,c=o?"right":"left";return TP({x:l,y:e.y+r/2},t,s,n,c)(i),i},TP=(e,t,s,n,r="left")=>o=>(o.textAlign=r,o.textBaseline="top",o.fillStyle=n,o.font=s,o.fillText(t,e.x,e.y),o),jg=(e,t,s,n,r,o,i,l,c,d=ia,u=!1,h=!1,p=Bs.x10,m=!1)=>g=>{const S=fe.pointer.font,T=h?Fs(s,p,m):cu(s,n),y=Pl(o,i,c,l),b={x:e.x===0||e.x<t?t:e.x,y:e.y};return ZC(b,T,S,y,d,u)(g),g},yP=(e,t,s,n,r,o,i,l,c=ia,d=!1)=>u=>{const h=n.pointer.font,p=gr(s),m=Pl(r,o,l,i),g={x:e.x===0||e.x<t?t:e.x,y:e.y};return ZC(g,p,h,m,c,d)(u),u},NNe=(e,t,s,n,r=!1,o=ia)=>i=>{const l=s.pointer.font,c=s.xAxisLabelFormat,d=et(t).format(c),u={x:e.x,y:e.y<0?0:e.y};return ZC(u,d,l,n,o,r)(i),i},CP=(e,t,s,n,r,o=!1,i=0,l,c,d)=>u=>{var h,p,m;if(e&&e.length>0&&((h=e[0].plots[0])==null?void 0:h.values)!==void 0){const g=Math.round(t.invert(s.x)),S=g<0?0:g,T=((p=e[0].plots[0])==null?void 0:p.values[S])!==void 0?(m=e[0].plots[0])==null?void 0:m.values[S].x:new Date,y={x:s.x,y:s.y+PT*i},b=o||i%2!==0,E=Pl(r,l,d,c);NNe(y,T,n,E,b)(u)}},po=(e,t,s,n,r,o,i,l,c=[0,0])=>(d,u)=>{const h=o||i?Do:$g,p=Pl(s,i,l,o);return mo(e.x,e.y,t.x,t.y,n,r+Do)(u),mo(e.x,e.y,t.x,t.y,p,h,c)(d),d},PNe=(e,t,s)=>n=>r=>{var y;const{start:o,width:i}=e,l=_s(n),c=As(n),d=Xs(n),u=l(o.time),h=c(o.value),p=n.selectedDrawing,m=e.drawingGuid===p,g=(y=n.drawings)==null?void 0:y.get(p||"");if(g&&!Mke(g))return r;const S={x:u,y:h},T=h>d;if(m&&!T){const b=e.guid===Tt.start?s.startPointColor:e.guid===Rn.middle?s.middlePointColor:s.endPointColor;_o(S.x,S.y,i+Do,Sy)(r),_o(S.x,S.y,i+Do*2,b)(t)}return r},kNe=(e,t,s)=>n=>r=>{var y;const{start:o,width:i}=e,l=_s(n),c=As(n),d=Xs(n),u=l(o.time),h=c(o.value),p=n.selectedDrawing,m=e.drawingGuid===p,g=(y=n.drawings)==null?void 0:y.get(p||"");if(g&&g.type!==J.Channel)return r;const S={x:u,y:h},T=h>d;return m&&!T&&(_o(S.x,S.y,i+Do,Sy)(r),_o(S.x,S.y,i+Do*2,s.heightControlColor)(t)),r},MNe=(e,t,s)=>n=>r=>{const{drawings:o,selectedDrawing:i,theme:l}=n,c=l===Qt.DARK,{width:d}=e,u=_s(n),h=As(n),p=Xs(n),m=o==null?void 0:o.get(i||"");if(m){if(!kke(m,e))return r;const g=Nke(u(m.start.time),h(m.start.value),u(m.end.time),h(m.end.value)),S=m.start.time<m.end.time||m.start.time===m.end.time&&m.start.value<m.end.value,T=S?g+Math.PI:g,y=S?g:g+Math.PI,b=e.guid===xs.expansionStart?T:y,E=S?m.start.time:m.end.time,v=S?m.end.time:m.start.time,D=e.guid===xs.expansionStart?E:v,w=S?m.start.value:m.end.value,N=S?m.end.value:m.start.value,L=e.guid===xs.expansionStart?w:N,P=u(D)+vv*Math.cos(b),F=h(L)+vv*Math.sin(b);if(F>p)return r;j_e(P,F,b*180/Math.PI,c)(r),_o(P,F,d+Do*2,e.guid===xs.expansionStart?s.expansionControlStartColor:s.expansionControlEndColor)(t)}return r},$Ne=(e,t,s,n,r)=>o=>i=>{var W;const{start:l,end:c,curve:d}=e,u=Vt(d.color),h=fo(o),p=o.priceTick,m=o.settings,g=jo(o),S=ln(o),T=_s(o),y=As(o),b=ln(o)*Nl(o),E=Xs(o),v=T(l.time),D=y(l.value),w=T(c.time),N=y(c.value),L={x:v,y:D},P={x:w,y:N};if(L.y===P.y&&L.y>E)return i;const F=Ti([L,P]),O=NP(F,{top:0,right:b,bottom:E,left:0},e.leftExtended,e.rightExtended);if(O.length===0)return i;const[H,C]=Ti(O),M=e.guid===o.selectedDrawing,q=o.selectedDrawing!==void 0;if((n||M)&&o.hoveredChart===ys.PriceChart){if(L.x===P.x){const z=S-(H.x-g)<gP,re=e.rightExtended?{x:F[0].x,y:0}:F[0],ae=(W=r.get(J.TimeLevel))==null?void 0:W.reduce((Me,he)=>{const U=he.findIndex(Se=>Se===e.guid);return U!==-1?U:Me},0);CP(h,T,re,m,u,z,ae,M,n,q)(i)}L.y===P.y&&jg(H,g,y.invert(L.y),p,o.settings,u,M,n,q,ia,!1,o.showFractionalPricing,o.fractionalType,o.showDoubleTickForFractionalPricing)(i)}return po(H,C,u,s,d.width=1,n,M,q)(i,t),i},jNe=(e,t,s,n,r)=>o=>i=>{var q;const{start:l,end:c,curve:d}=e,u=Vt(d.color),h=fo(o),p=o.settings,m=_s(o),g=As(o),S=jo(o),T=ln(o),y=Xs(o),b=m(l.time),E=g(l.value),v=m(c.time),D=g(c.value),w=E<D,N=w?E:D,L=w?D:E,P={x:b,y:e.topExtended?0:N},F={x:v,y:e.bottomExtended?y:L},[O,H]=Ti([P,F]);O.y=O.y>y?y:O.y,H.y=H.y>y?y:H.y;const C=e.guid===o.selectedDrawing,M=o.selectedDrawing!==void 0;if((n||C)&&o.hoveredChart===ys.PriceChart){const W=T-(O.x-S)<gP,z=(q=r.get(J.TimeLevel))==null?void 0:q.reduce((ae,Me)=>{const he=Me.findIndex(U=>U===e.guid);return he!==void 0?he:ae},0),re=Pl(u,C,M,n);CP(h,m,O,p,re,W,z,C,n,M)(i)}return po(O,H,u,s,d.width=1,n,C,M)(i,t),i},BNe=(e,t,s,n)=>r=>o=>{const{start:i,end:l,curve:c}=e,d=Vt(c.color),u=r.priceTick,h=_s(r),p=As(r),m=jo(r),g=ln(r)*Nl(r),S=Xs(r),T=h(i.time),y=p(i.value),b=h(l.time),E=p(l.value);if(y>S)return o;const v=T<b,D=v?T:b,w=v?b:T,N={x:e.leftExtended?0:D,y},L={x:e.rightExtended?g:w,y:E},[P,F]=Ti([N,L]),O=e.guid===r.selectedDrawing,H=r.selectedDrawing!==void 0;return(n||O)&&r.hoveredChart===ys.PriceChart&&jg(P,m,p.invert(P.y),u,r.settings,d,O,n,H,ia,!1,r.showFractionalPricing,r.fractionalType,r.showDoubleTickForFractionalPricing)(o),po(P,F,d,s,c.width=1,n,O,H)(o,t),o},FNe=(e,t,s,n)=>r=>o=>{const{start:i,end:l,curve:c}=e,d=Vt(c.color),u=r.priceTick,h=_s(r),p=As(r),m=jo(r),g=ln(r)*Nl(r),S=Xs(r),T=h(i.time),y=p(i.value),b=h(l.time),E=p(l.value);if(y>S)return o;const v={x:T,y},D={x:b,y:E},w=y-E,N=e.guid===r.selectedDrawing,L=r.selectedDrawing!==void 0;return e.fibonacciCurves.forEach((P,F,O)=>{const H=Vt(P.color),C=E+P.coeff*w,M=e.leftExtended&&e.rightExtended,q=!e.leftExtended&&!e.rightExtended,W=e.leftExtended?Math.max(T,b):Math.min(T,b),z=M?0:W,re=C,ae=e.rightExtended?g:Math.max(T,b),Me=e.leftExtended?0:ae,he=M?g:Me,U={x:z,y:C},Se={x:he,y:re},be=Math.abs(z-he),le=O[F-1]!==void 0?Math.abs((P.coeff-O[F-1].coeff)*w)>zi:!0,We=O[F+1]!==void 0?Math.abs((P.coeff-O[F+1].coeff)*w)>zi:!0,He=v.y<D.y?We:le,Dt=!M&&Math.max(T,b)-m<=0;He&&(!Dt&&yP({x:e.leftExtended?0:z,y:C-zi},m,P.coeff,r.settings,H,N,n,L,ia,q&&be<cm)(o),jg({x:M?he:e.leftExtended?z:he,y:re-zi},m,p.invert(C),u,r.settings,H,N,n,L,ia,be>cm,r.showFractionalPricing,r.fractionalType,r.showDoubleTickForFractionalPricing)(o)),po(U,Se,H,s,P.width=1,n,N,L,Kd(P.style))(o,t)}),po(v,D,d,s,c.width=1,n,N,L,Kd(c.style))(o,t),o},HNe=(e,t,s,n)=>r=>o=>{const{start:i,end:l,middle:c,curve:d,extensionCurve:u}=e,h=Vt(d.color),p=r.priceTick,m=_s(r),g=As(r),S=jo(r),T=ln(r)*Nl(r),y=Xs(r),b=m(i.time),E=g(i.value),v=m(c.time),D=g(c.value),w=m(l.time),N=g(l.value);if(E>y)return o;const L={x:b,y:E},P={x:v,y:D},F={x:w,y:N},O=e.guid===r.selectedDrawing,H=r.selectedDrawing!==void 0,C=b<v,M=[];return e.fibonacciCurves.forEach((q,W)=>{const z=Vt(q.color),re=C?w:0,ae=C?T:w,Me=g(l.value-(i.value-c.value)*q.coeff),he=Me,U={x:re,y:Me},Se={x:ae,y:he};po(U,Se,z,s,q.width=1,n,O,H,Kd(q.style))(o,t),M.push({curveStart:U,curveEnd:Se,coeff:q.coeff,value:g.invert(Me),color:z})}),M.forEach((q,W,z)=>{var he,U,Se,be;const re=z[W-1]!==void 0?Math.abs(((he=z[W-1].curveStart)==null?void 0:he.y)-((U=z[W].curveStart)==null?void 0:U.y))>zi:!0,ae=Math.max(b,w)-S<=0,Me=Math.abs(((Se=q.curveStart)==null?void 0:Se.x)-((be=q.curveEnd)==null?void 0:be.x));re&&q.curveStart&&q.curveEnd&&(!ae&&yP({x:q.curveStart.x,y:q.curveStart.y-zi},S,q.coeff,r.settings,q.color,O,n,H,ia,Me<cm)(o),jg({x:q.curveEnd.x,y:q.curveEnd.y-zi},S,g.invert(q.curveEnd.y),p,r.settings,q.color,O,n,H,ia,Me>cm,r.showFractionalPricing,r.fractionalType,r.showDoubleTickForFractionalPricing)(o))}),po(L,P,h,s,d.width=1,n,O,H,Kd(d.style))(o,t),po(P,F,h,s,d.width=1,n,O,H,Kd(u.style))(o,t),o},UNe=(e,t,s,n)=>r=>o=>{const{start:i,curve:l}=e,c=Vt(l.color),d=e.guid===r.selectedDrawing,u=r.selectedDrawing!==void 0,h=Pl(c,d,u,n),p=_s(r),m=As(r),g=e.text.split(`
`),S=p(i.time),T=m(i.value),y=Wke(S,T,e.align),{hoveredRectStartPoint:b,hoverRectEndPoint:E,textAlign:v}=MP(e,{x:S,y:T},r.settings.pointer.font,o);e.showArrow&&(Cv(y.point1,y.point2,y.point3,h)(o),Cv(y.point1,y.point2,y.point3,s)(t));const D=FP(S,T,e.align,e.showArrow,g.length);return g.forEach((w,N)=>{TP({x:D.x,y:D.y+15*N},w,r.settings.pointer.font,h,v)(o)}),xo(b,E,s,1,s)(t),n&&xo(b,E,h,1)(o),o},VNe=(e,t,s,n)=>r=>o=>{const{start:i,end:l,curve:c}=e,d=Vt(c.color),u=_s(r),h=As(r),p=ln(r)*Nl(r),m=Xs(r),g=u(i.time),S=h(i.value),T=u(l.time),y=h(l.value),b={x:g,y:S},E={x:T,y};if(b.y===E.y&&b.y>m)return o;const v=GS(b,E,p,m,e.leftExtended,e.rightExtended);if(v.length===0)return o;const[D,w]=v,N=e.guid===r.selectedDrawing,L=r.selectedDrawing!==void 0;po(D,w,d,s,c.width=1,n,N,L)(o,t);const P={x:g,y:h(i.value+e.height)},F={x:T,y:h(l.value+e.height)},O=GS(P,F,p,m,e.leftExtended,e.rightExtended);if(O.length===0)return o;const[H,C]=O;po(H,C,d,s,c.width=1,n,N,L)(o,t);for(const M of e.channelCurves){if(!M.visible)continue;const q=Vt(M.color),W=h(i.value+e.height*M.coeff),z=h(l.value+e.height*M.coeff),Me=GS({x:g,y:W},{x:T,y:z},p,m,e.leftExtended,e.rightExtended);if(Me.length===0)continue;const[he,U]=Me;po(he,U,q,s,M.width=1,n,N,L)(o,t)}return o},WNe=e=>{switch(e==null?void 0:e.type){case J.PriceLevel:return e.leftExtended&&e.rightExtended?Yn.bothSide:e.leftExtended?Yn.leftExtended:e.rightExtended?Yn.rightExtended:Yn.none;case J.TimeLevel:return e.topExtended&&e.bottomExtended?Yn.bothSide:e.topExtended?Yn.topExtended:e.bottomExtended?Yn.bottomExtended:Yn.none;case J.Trendline:{if((e==null?void 0:e.start.time)===(e==null?void 0:e.end.time)){if(e.leftExtended&&e.rightExtended)return Yn.bothSide;if(e.leftExtended)return Yn.topExtended;if(e.rightExtended)return Yn.bottomExtended}if((e==null?void 0:e.start.value)===(e==null?void 0:e.end.value)){if(e.leftExtended&&e.rightExtended)return Yn.bothSide;if(e.leftExtended)return Yn.leftExtended;if(e.rightExtended)return Yn.rightExtended}return Yn.none}default:return Yn.none}},GNe=(e,t,s)=>(e==null?void 0:e.reduce((n,r)=>{const o=t.get(r);if(o===void 0)return n;const i=WNe(o);switch(o.type){case J.PriceLevel:{const l=n.get(J.PriceLevel)??ke(),c=(l==null?void 0:l.get(i))??[];return n.set(J.PriceLevel,l==null?void 0:l.set(i,[...c,r]))}case J.TimeLevel:{const l=n.get(J.TimeLevel)??ke(),c=(l==null?void 0:l.get(i))??[];return n.set(J.TimeLevel,l==null?void 0:l.set(i,[...c,r]))}case J.Trendline:{const[l,c]=[s(o.start.value),s(o.end.value)].sort((d,u)=>d-u);if(o.start.time===o.end.time){const d=n.get(J.TimeLevel)??ke(),u=(d==null?void 0:d.get(i))??[];return u.reduce((p,m)=>{const g=t.get(m);if(g===void 0)return p;const[S,T]=[s(g.start.value),s(g.end.value)].sort((E,v)=>E-v),y=Math.abs(S-l),b=Math.abs(T-c);return y<=PT||b<=PT},!1)||u.length===0?n.set(J.TimeLevel,d==null?void 0:d.set(i,[...u,r])):n}if(o.start.value===o.end.value){const d=n.get(J.PriceLevel)??ke(),u=(d==null?void 0:d.get(i))??[];return n.set(J.PriceLevel,d==null?void 0:d.set(i,[...u,r]))}return n}default:return n}},ke()))??ke(),YNe=(e,t,s,n,r)=>o=>{switch(o.type){case J.Rectangle:return uP(o,n,!1,t)(e);case J.FibonacciRetracements:return FNe(o,e,t,n);case J.FibonacciExtensions:return HNe(o,e,t,n);case J.Trendline:return $Ne(o,e,t,n,r);case J.Channel:return VNe(o,e,t,n);case J.TimeLevel:return jNe(o,e,t,n,r);case J.TextNote:return UNe(o,e,t,n);case J.PriceLevel:return BNe(o,e,t,n);case mr.MiddlePoint:case mr.EndPoint:return PNe(o,e,s);case mr.ExpansionControl:return MNe(o,e,s);case mr.HeightControl:return kNe(o,e,s)}},xv=(e,t,s=ke())=>n=>t.reduce((r,o)=>{var u;if(!o)return r;const i=e.drawingToColor[`${o.guid}${fy}`],l={startPointColor:e.drawingToColor[Tt.start],endPointColor:e.drawingToColor[Tt.end],expansionControlStartColor:e.drawingToColor[xs.expansionStart],expansionControlEndColor:e.drawingToColor[xs.expansionEnd],heightControlColor:e.drawingToColor[$n.height],middlePointColor:e.drawingToColor[Rn.middle]},c=((u=e.hoveredDrawings)==null?void 0:u.find(h=>h===o.guid))!==void 0,d=YNe(n,i,l,c,s)(o);return d!==void 0?[...r,d(e)]:r},[]),qNe=(e,t)=>(s,n,r,o)=>{const{showFractionalPricing:i,fractionalType:l,showDoubleTickForFractionalPricing:c}=t,d=_s(t),u=As(t),h=jo(t),p=ln(t),m=Qo(t.priceTick??0),g=Zi(i,n,l,m,c),{lineWidth:S,circleRadius:T,textMargin:y}=fe.bubblePrice,b=e.measureText(g).width,E=b+S+y,v=p-d(s)-E+h,D=d(s)-y-b,w=d(s)+y,N=v<1?D:w;return mo(d(s),u(n),d(s)+(v<1?-S:S),u(n),o)(e),_o(d(s)+(v<1?-S:S),u(n),T,o)(e),e.font=fe.bubblePrice.font,e.textBaseline="middle",e.textAlign="left",e.fillStyle=o,e.fillText(g,N,u(n)),e},KNe=e=>t=>{var o,i;if(!e.showChartHighLow)return t;const s=qNe(t,e),n=e.theme===Qt.DARK?Ca:hi,r=e.studies;if(r){const l=eMe(((i=(o=r[1])==null?void 0:o.plots[0])==null?void 0:i.values)??[]),{low:c,high:d,length:u}=l;s(d.x,d.y,u,n),s(c.x,c.y,u,n)}return t},zNe=(e,t,s)=>{const n=e.hoveredDrawings,r=eP(e)??ke(),o=S_e(e)??ke(),i=mNe(e),l=gNe(e),c=RNe(e),d=_Ne(e),u=ONe(e),h=wNe(e),p=ANe(e),m=KNe(e),g=As(e),S=GNe(n,r,g),T=xv(e,r,S),y=xv(e,o),b=xi(e,!0),E=D_e(e),v=qs(t);if(v&&s){const D=b([v,s]);lP(e,s)([as(T(s)),l(s),m,p(s),as(y(s))])(D);const w=E([v,s])(),N=u(s)(w),L=h(s)(N),P=d(L),F=i(P);c(F)}return s},XNe=is(zNe),bP=({plots:e,rowTitles:t})=>a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Time"}),e.map((s,n)=>a.jsx("th",{children:s.name},`plot-values-header=${s.name}-${n}`))]})}),a.jsx("tbody",{className:"no-height",children:t.map((s,n)=>a.jsxs("tr",{"data-testid":n,children:[a.jsx("th",{children:s}),e.map(r=>{var o,i;return a.jsx("td",{children:((i=(o=r.values)==null?void 0:o[n])==null?void 0:i.y)??null},`${r.studyId}-${r.name}-${n}`)})]},`chart-row-${n}`))})]}),QNe=e=>{const t=new Array(e.values.length),s=new Array(e.values.length),n=new Array(e.values.length),r=new Array(e.values.length);return e.values.forEach((d,u)=>{t[u]={x:d.x,y:os(d.y)?d.y.open:0},s[u]={x:d.x,y:os(d.y)?d.y.close:0},n[u]={x:d.x,y:os(d.y)?d.y.high:0},r[u]={x:d.x,y:os(d.y)?d.y.low:0}}),[{name:"Open",studyId:"Price",values:t},{name:"High",studyId:"Price",values:n},{name:"Low",studyId:"Price",values:r},{name:"Close",studyId:"Price",values:s}]},EP=({studies:e,dateFormat:t})=>{const s=()=>{var i,l;const n=[],r=e.reduce((c,d)=>{const u=d.plots.reduce((h,p)=>{if(p.values[0]!==void 0&&p.values[0]!==null&&!os(p.values[0].y))return h.concat(p);{const m=QNe(p);return h.concat(m)}},n);return c.concat(u)},n),o=((l=(i=e[0])==null?void 0:i.plots[0])==null?void 0:l.values.map(c=>et(c.x).format(t)))??[];return a.jsx(bP,{plots:r,rowTitles:o})};return a.jsxs("div",{tabIndex:0,className:"off-screen",children:[a.jsx("h3",{children:__("Price chart values table")}),s()]})},AP=e=>t=>t.drawings.selectedDrawingSets.get(e)??ke(),ZNe=(e,t)=>t!==null?e.drawings.drawingSets.get(t)??[]:[],JNe=e=>e.drawings.drawings,ePe=(e,t)=>{var s;return((s=e.drawings.drawingStates.get(t))==null?void 0:s.setsAreLoading)??!1},tPe=(e,t)=>{var s;return((s=e.drawings.drawingStates.get(t))==null?void 0:s.createDrawingSetError)??""},sPe=(e,t)=>{var s;return((s=e.drawings.drawingStates.get(t))==null?void 0:s.selectedDrawingTool)??void 0},vP=e=>x(AP(e),an(e),(t,s)=>s?t.get(s):void 0),IP=e=>{const t=j.useRef();return j.useEffect(()=>{Ut(e)&&(t.current=e)},[e]),e??t.current};A.div`
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  pointer-events: none;
`;const xP=A(tt)``,nPe=A.div`
  background-color: ${({theme:e})=>e.colors.background.secondary};
  border: ${({theme:{shape:e}})=>e.borderWidth.primary}px solid
    ${({theme:{colors:e}})=>e.border.primary};
  border-radius: ${({theme:e})=>e.shape.borderRadius.primary}px;
  margin-top: ${({theme:e})=>e.space.small};
  padding: ${({theme:e})=>e.space.xSmall};
  pointer-events: all;
  height: fit-content;
  min-width: 195px;
  display: flex;
  justify-content: ${({centerContent:e})=>e?"center":"space-between"};
  flex-wrap: wrap;

  > ${tt}, > button {
    font-size: ${({theme:e})=>e.fontSizes.small};
    color: ${({theme:e})=>e.colors.text.primary};
    white-space: nowrap;
  }

  > ${xP} {
    color: ${({theme:e})=>e.colors.action.focus};
  }
`,rPe=A.div`
  display: flex;
  justify-content: center;
  flex-wrap: no-wrap;

  ${tt} {
    padding: 2px;
    margin: 0 3px;
  }
`,oPe=A.div`
  color: ${({theme:e})=>e.colors.text.disabled};
  font-size: ${({theme:e})=>e.fontSizes.small};
  padding-right: ${({theme:e})=>e.space.xSmall};
`,wP=A.div`
  width: 14px;
  height: 14px;
  border-radius: ${({theme:{shape:e}})=>e.borderRadius.tertiary}px;
  margin-right: 3px;
  background-color: ${({color:e})=>e};
  position: relative;
  overflow: hidden;
`,aPe=Ss`
  cursor: not-allowed;

  ${wP} {
    background-color: ${({theme:e})=>e.colors.component.ColorPickerSwatch.default};

    :after {
      content: ' ';
      transform: rotate(-45deg);
      width: 21px;
      height: 1px;
      background: ${({theme:e})=>e.colors.action.remove};
      display: block;
      position: absolute;
      left: -3px;
      top: 6px;
    }
  }
`,iPe=A(tt)`
  ${({isDisabled:e})=>e?aPe:""}
`,lPe=A.div`
  display: flex;
  justify-content: flex-end;
  padding: 5px 10px 0 10px;
`,cPe=A(tt)`
  position: relative;
  padding: ${({theme:{space:e}})=>e.none};
  color: ${({theme:e})=>e.colors.action.focus};
`,WS=256,dPe=A.div`
  position: absolute;
  top: 50px;
  left: ${({isMobile:e,theme:t})=>e?`calc(100% - (${WS}px - ${t.space.medium}))`:`calc(50% - ${WS/2}px)`};
  width: ${WS}px;
  border-radius: ${({theme:{shape:e}})=>e.borderRadius.secondary}px;
  border: 1px solid ${({theme:{colors:e}})=>e.action.focus};
  background-color: ${({theme:e})=>e.colors.background.primary};
  z-index: 1;
`,uPe=(e,t)=>s=>{e(s),t(s)},hPe={h:100,s:100,l:100,a:1},pPe=e=>{const{isMobile:t,onColorSelect:s,selectedDrawingGuid:n,isDisabled:r,isVisible:o,drawingColor:i=hPe}=e,[l,c]=B.useState(!1),[d,u]=B.useState(i),h=j.useRef(null);$a(h,()=>c(!1)),B.useEffect(()=>{o||c(!1)},[o]),B.useEffect(()=>{u(i)},[i]),B.useEffect(()=>{n||c(!1)},[n]);const p=B.useCallback(()=>{l&&c(!1)},[l]);return B.useEffect(()=>(window.addEventListener("studyWindowOpen",p),()=>{window.removeEventListener("studyWindowOpen",p)}),[p]),a.jsxs("div",{ref:h,children:[a.jsxs(iPe,{isDisabled:r,onClick:()=>r?yr:c(!l),"aria-label":r?"Color Picker, disabled":"Color Picker","data-testid":"priceChart-colorSelectAnchor",children:[a.jsx(wP,{color:Vt(d)}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",fill:r?"action.disabled":void 0,dataTestId:"arrow-dropdown-icon"})]}),l&&a.jsxs(dPe,{isMobile:t,"data-testid":"priceChart-colorSelectorContainer",children:[a.jsx(lPe,{children:a.jsx(cPe,{"data-testid":"price-chart-color-selector-close-btn",onClick:()=>c(!1),children:__("Close",{namespace:"ChartInfo"})})}),a.jsx(cO,{initialColor:d,onChangeComplete:uPe(u,s)})]})]})},mPe=(e,t)=>{switch(e){case Un.leftExtended:case Un.topExtended:return{direction:Pp.LEFT,filled:t};case Un.rightExtended:case Un.bottomExtended:return{direction:Pp.RIGHT,filled:t}}},gPe=(e,t)=>e===Un.rightExtended?t?__("Remove Right Extension"):__("Add Right Extension"):t?__("Remove Left Extension"):__("Add Left Extension"),SPe=e=>{const{extensionType:t,extended:s,onControlClick:n}=e,{filled:r,direction:o}=mPe(t,s);return a.jsx(tt,{"aria-label":gPe(t,s),onClick:()=>{n(t)},"data-testid":"extension-drawing-control",children:a.jsx(X,{type:o===Pp.LEFT?Y.ExtensionChevronLeft:Y.ExtensionChevronRight,width:9,height:14,viewBox:"0 0 9 14",fill:r?"text.primary":"none",stroke:"text.primary",dataTestId:"extension-chevron-icon"})})},fPe=A(J1)`
  width: auto;
`,OP=A.button`
  padding: 0 ${({theme:{space:e}})=>e.xSmall};
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: normal;
  color: ${({theme:{colors:e}})=>e.text.primary};
  white-space: nowrap;

  ${({theme:{colors:e}})=>Ms({variants:{[Pe.primary]:{background:e.background.primary},[Pe.secondary]:{background:e.background.secondary},[Pe.tertiary]:{background:e.selected.secondary.background,border:`1px solid ${e.selected.secondary.main}`}}})}

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    ${Ms({variants:{[Pe.tertiary]:{height:34}}})}
  }

  :disabled {
    cursor: default;
  }
`,RP=A.div`
  ${({theme:{colors:e,shape:t}})=>Ms({variants:{[Pe.primary]:{border:`${t.borderWidth.primary}px solid ${e.border.primary}`,background:`${e.background.primary}`},[Pe.secondary]:{border:`${t.borderWidth.primary}px solid ${e.border.primary}`},[Pe.tertiary]:{border:`${t.borderWidth.primary}px solid ${e.border.tertiary}`}}})}
  border-radius: ${Zo}px;
  ${({width:e})=>`width: ${e?`${e}px`:"auto"}`}
`,DP=A.div`
  background: ${({theme:{colors:e},getFooterBackgroundColor:t})=>t?t(e):e.background.primary};
  border-top: ${({theme:{shape:e}})=>e.borderWidth.primary}px solid
    ${({theme:{colors:e}})=>e.border.primary};
  padding: ${({theme:{space:e}})=>e.xxSmall};
  border-bottom-left-radius: ${Zo}px;
  border-bottom-right-radius: ${Zo}px;
`,TPe=(e=0)=>[0,e],JC=({className:e,anchorAriaLabel:t,tabIndex:s,renderAnchorButtonContent:n,isDisabled:r,variant:o=Pe.primary,appendTo:i="parent",strategy:l,width:c,offset:d,renderContent:u,placement:h,renderFooter:p,onAnchorClick:m,onClose:g,isVisibleInitially:S,shouldStayOpenOnClickOutside:T,getFooterBackgroundColor:y,...b})=>{const[E,v]=B.useState(S??!1),D=j.useRef(null);return B.useEffect(()=>{S!==void 0&&v(S)},[S]),B.useEffect(()=>{const w=N=>{N.code===we.Esc&&v(!1)};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[]),a.jsx(fPe,{"data-testid":b["data-testid"],anchor:a.jsx(OP,{tabIndex:s,"aria-label":t,onClick:()=>{m&&m(E),v(w=>!w)},ref:D,expanded:E,disabled:r,variant:o,"data-testid":`${b["data-testid"]}-anchor-content`,"aria-haspopup":"dialog",children:n()}),content:a.jsxs(RP,{variant:o,width:c,"data-testid":`${b["data-testid"]}-content`,children:[u&&u({setIsVisible:v}),p&&a.jsx(DP,{getFooterBackgroundColor:y,children:p({setIsVisible:v})})]}),isVisible:E,className:e,onClickOutside:()=>{T||(g&&g(),v(!1))},strategy:l,appendTo:i,placement:h,offset:TPe(d)})},yPe=A.div`
  width: 200px;
  padding: 0 5px;
  background: ${({theme:e})=>e.colors.background.secondary};
`,CPe=A(JC)`
  display: flex;

  ${OP} {
    font-size: ${({theme:e})=>e.fontSizes.small};
    font-weight: 500;
    background: transparent;
  }

  ${RP} {
    border: none;
    border-radius: 0;
  }

  ${DP} {
    padding: 0;
    background: transparent;
    border: none;
  }
`,bPe=A.h2`
  display: flex;
  height: 28px;
  align-items: center;
  justify-content: space-between;
  margin: 0;
  padding: 0 5px;
  font-size: ${({theme:e})=>e.fontSizes.xSmall};
`,EPe=A.textarea`
  width: 100%;
  height: 120px;
  padding: 10px 5px;
  overflow: hidden;
  font-size: ${({theme:e})=>e.fontSizes.xSmall};
  color: var(--primary-btn);
  line-height: ${({theme:e})=>e.fontSizes.small};
  outline: none;
  resize: none;
  background: ${({theme:{colors:e}})=>e.background.primary};
  overflow-y: scroll;
  border: none;
`,APe=A(Be)`
  padding: ${({theme:e})=>e.space.small};
  justify-content: flex-end;
  background-color: ${({theme:e})=>e.colors.background.secondary};
`,vPe=A(tt)`
  padding: 0;
`,IPe=A(tt)`
  align-self: baseline;
  margin-right: 4px;
  padding: 3px 12px 3px 12px;
  font-size: ${({theme:e})=>e.fontSizes.xxSmall};
  line-height: ${({theme:e})=>e.fontSizes.xxSmall};
  font-weight: normal;
  color: ${({theme:e})=>e.colors.text.primary};
  border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.text.primary}`};
  border-radius: 8px;
`,xPe=A(tt)`
  align-self: baseline;
  padding: 3px 12px 3px 12px;
  font-size: ${({theme:e})=>e.fontSizes.xxSmall};
  line-height: ${({theme:e})=>e.fontSizes.xxSmall};
  font-weight: normal;
  color: ${({theme:e})=>e.colors.text.tertiary};
  background-color: ${({theme:e,disabled:t})=>t?oe.GRAY_STONE:e.colors.border.secondary};
  border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.text.primary}`};
  border-radius: 8px;

  ${({theme:e})=>({"&:disabled":{color:e.colors.text.tertiary}})}
`,wPe=()=>function(){return a.jsx("span",{children:__("Edit text",{namespace:"Drawings"})})},OPe=(e,t,s)=>function(r){const{setIsVisible:o}=r,i=!e;return a.jsxs(APe,{children:[a.jsx(IPe,{id:"drawing-edit-cancel",onClick:()=>{s(!1),o(!1)},children:__("Cancel")}),a.jsx(xPe,{id:"drawing-edit-save",disabled:i,onClick:t,children:__("Save")})]})},RPe=e=>{const{isVisible:t,cancelEdit:s,createUpdatedDrawingsBackup:n,saveDrawingToApi:r,setTextNoteText:o,textNoteText:i}=e,l=B.useRef(null);B.useEffect(()=>{l.current!==null&&l.current.focus()},[l.current]);const c=h=>o(h.target.value),d=h=>{const{setIsVisible:p}=h;return a.jsxs(yPe,{children:[a.jsxs(bPe,{children:[__("Edit text note",{namespace:"Drawings"}),a.jsx(vPe,{"aria-label":"Close",onClick:()=>p(!1),children:a.jsx(X,{type:Y.Close,width:8,height:14,viewBox:"4 4 16 16",dataTestId:"drawing-edit-close-icon",fill:"icon.primary"})})]}),a.jsx(EPe,{maxLength:1e3,ref:l,onChange:c,value:i,"aria-label":"Edit text note"})]})},u=h=>{!h&&n()};return a.jsx(CPe,{isVisibleInitially:t,renderAnchorButtonContent:wPe(),"data-testid":"drawing-edit",placement:"bottom-end",renderContent:d,offset:12,onAnchorClick:u,renderFooter:OPe(i,r,s)})},DPe=(e,t)=>typeof t=="boolean"?t:!e,LPe=e=>B.useReducer(DPe,e),_Pe=e=>{const[t,s]=LPe(e),n=B.useCallback(()=>s(!0),[s]),r=B.useCallback(()=>s(!1),[s]);return[t,n,r,s]},LP=({text:e,icon:t,customRender:s,...n})=>s!==void 0?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"menu-header",children:[s,n.renderCloseIcon&&a.jsx("button",{onClick:n.onCloseClick,"aria-label":"Close Window",children:a.jsx(X,{type:Y.Close,width:14,height:14,viewBox:"3.5 3.5 17 17",dataTestId:"custom-header-close-icon",fill:"icon.primary"})})]})}):e!==void 0?a.jsxs("div",{className:"menu-header",children:[n.showBackButton&&a.jsx(tt,{mr:3,variant:"link",onClick:n.onCloseClick,"aria-label":"Return to main window",children:a.jsx(X,{type:Y.ChevronLeft,width:12,height:8,viewBox:"5 9 14 9",fill:"icon.primary",dataTestId:"chevron-left-icon"})}),t!==void 0&&a.jsx("div",{className:"menu-header__icon",children:t}),a.jsx("div",{className:"menu-header__text",children:__(e)})]}):null,Gl=e=>{const{ModalContent:t,modalHeaderText:s,ariaLabel:n,customHeaderText:r,ModalHeaderIcon:o,hideModalHeaderIcon:i,showBackButton:l,modalContentProps:c,anchorText:d,showAnchorIcon:u=!0,shouldModalBeOpenInitially:h}=e,[p,m,g]=_Pe(h??!1),S=n!==void 0?n:s,T=()=>{m(),e.onModalOpen&&e.onModalOpen()},y=()=>{g(),e.onModalClose&&e.onModalClose()};B.useEffect(()=>{h?m():h===!1&&g()},[h]);const b=p?a.jsxs(Dl,{onCloseClick:y,children:[a.jsx(kL,{onCloseClick:y,children:a.jsx(LP,{text:r??s,icon:i?void 0:a.jsx(o,{}),showBackButton:l,onCloseClick:e.onModalClose})}),a.jsx(t,{onModalClose:y,...c})]}):null;return a.jsxs(a.Fragment,{children:[a.jsx(ir,{onClick:T,ariaExpanded:p,icon:a.jsx(o,{}),title:d||s,ariaLabel:S,showIcon:u}),b]})},NPe=A.div`
  display: flex;
  flex-wrap: wrap;
  padding: 23px 24px;
`,PPe=A.textarea`
  width: 100%;
  height: 120px;
  margin: 0 0 30px 0;
  padding: 7px 12px;
  font-size: ${({theme:e})=>e.fontSizes.xSmall};
  color: ${({theme:e})=>e.colors.text.primary};
  line-height: ${({theme:e})=>e.fontSizes.small};
  outline: none;
  resize: none;
  background: ${({theme:{colors:e}})=>e.background.secondary};
  overflow-y: auto;
  border: ${({theme:e})=>`${e.shape.borderWidth.secondary}px solid ${e.colors.text.secondary}`};
  border-radius: ${({theme:e})=>`${e.shape.borderRadius.primary}px`};
`,_P=A(tt)`
  flex: 0 0 100%;
  align-self: baseline;
  justify-content: center;
  padding: 6px 0;
  font-size: ${({theme:e})=>e.fontSizes.small};
  line-height: ${({theme:e})=>e.fontSizes.small};
  font-weight: normal;
  color: ${({theme:e})=>e.colors.text.tertiary};
  background-color: ${({theme:e})=>e.colors.border.secondary};
  border: ${({theme:e})=>`${e.shape.borderWidth.secondary}px solid ${e.colors.text.primary}`};
  border-radius: 12px;
  margin-bottom: ${({theme:e})=>e.space.small};

  ${({theme:e})=>({"&:disabled":{color:e.colors.text.tertiary,backgroundColor:e.colors.action.disabled}})}
`,kPe=A(_P)`
  background-color: inherit;
  color: ${({theme:e})=>e.colors.text.primary};
`,MPe=({textNoteText:e,saveDrawingToApi:t,setTextNoteText:s,cancelEdit:n})=>{const r=i=>s(i.target.value),o=!e;return a.jsxs(NPe,{children:[a.jsx(PPe,{maxLength:1e3,value:e,onChange:r,"aria-label":"Edit text note"}),a.jsx(_P,{disabled:o,onClick:t,children:__("Save")}),a.jsx(kPe,{onClick:()=>n(!0),children:__("Cancel")})]})},$Pe=e=>{const{isVisible:t}=e;return a.jsx(Gl,{shouldModalBeOpenInitially:t,ModalContent:MPe,modalHeaderText:__("Edit text note",{namespace:"Drawings"}),anchorText:__("Edit text",{namespace:"Drawings"}),ModalHeaderIcon:()=>a.jsx(X,{type:Y.Drawings,width:20,height:20,viewBox:"1 1 20 20",dataTestId:"drawings-icon"}),modalContentProps:e,showAnchorIcon:!1})},jPe=(e,t)=>{const{selectedDrawing:s,selectedDrawingColor:n,selectedSetId:r,deleteDrawing:o,unselectDrawing:i,lastDeletedDrawing:l,setLastDeletedDrawing:c,setSelectedDrawing:d,setDrawingColor:u,drawingType:h,lastDeletedDrawingType:p,cancelDrawing:m,cancelDrawingField:g,isMobile:S,drawingMode:T,isVisible:y,drawingExtensions:b,setExtension:E,textNoteArrowPosition:v,setTextNoteArrowPosition:D,setTextNoteText:w,textNoteText:N,saveDrawingToApi:L,createUpdatedDrawingsBackup:P,isTextEditorOpen:F}=e,O=j.useRef(null),H=j.useRef(null),C=IP(n),M=()=>{d(H.current??void 0),H.current=null,c(void 0),O.current&&(clearTimeout(O.current),O.current=null)},q=(ae=5e3)=>{H.current=s??null,c(s),i(),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{H.current!==null&&r!==void 0&&(o(H.current,r),H.current=null,O.current=null)},ae)},W=()=>{O.current!==null&&(clearTimeout(O.current),O.current=null,H.current!==null&&r&&(o(H.current,r),H.current=null))};Cn(()=>()=>{W()}),j.useEffect(()=>{s!==void 0&&H.current!==null&&H.current!==s&&W()},[s,H.current]);const z=!!l&&!s,re=T===qr.Create;return a.jsxs(nPe,{centerContent:z,ref:t,children:[!z&&a.jsx(tt,{onClick:()=>m(),children:__("Cancel")}),!z&&a.jsx(pPe,{isVisible:y,isDisabled:re,selectedDrawingGuid:s,isMobile:S,onColorSelect:u,drawingColor:C}),!z&&v&&a.jsx(SLe,{selectedValue:v,onSelect:D}),!z&&a.jsx(rPe,{children:b.map(ae=>a.jsx(SPe,{extensionType:ae.extensionType,extended:ae.expanded,onControlClick:E},ae.extensionType))}),h===J.TextNote&&a.jsxs(a.Fragment,{children:[a.jsx(jr,{children:a.jsx(RPe,{isVisible:F,textNoteText:N,setTextNoteText:w,cancelEdit:g,saveDrawingToApi:L,createUpdatedDrawingsBackup:P})}),a.jsx(fr,{children:a.jsx($Pe,{isVisible:F,textNoteText:N,setTextNoteText:w,cancelEdit:m,saveDrawingToApi:L})})]}),z&&p!==void 0?a.jsxs(a.Fragment,{children:[a.jsxs(oPe,{children:[__(U5(p),{namespace:"Drawings"}),__(" "),__("deleted"),__(".")]}),a.jsx(xP,{variant:"link",onClick:()=>M(),children:__("Undo")})]}):a.jsx(tt,{disabled:re,onClick:()=>q(),children:__("Delete")})]})},BPe=j.forwardRef(jPe),FPe=(e,{chartId:t})=>{const s=vP(t);return n=>({selectedSetId:s(n)})},HPe=e=>({deleteDrawing(t,s){return e(jpe({drawingGuid:t,drawingSetGuid:s}))}}),UPe=se(FPe,HPe)(BPe),VPe=A.div`
  width: 100%;
  display: flex;
  justify-content: ${({isMobile:e})=>e?"flex-end":"center"};
  pointer-events: none;
  margin-right: ${({isMobile:e,theme:t})=>e?t.space.small:0};
`,WPe=A.div`
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  pointer-events: none;
  overflow: ${({shouldCrop:e})=>e?"hidden":"initial"};
`,GPe=A.div`
  display: flex;
  justify-content: flex-start;
  align-content: center;
  flex-wrap: wrap;
  row-gap: ${({theme:e})=>e.space.xSmall};
  padding-top: ${({theme:e})=>e.space.medium};
  margin-left: ${({theme:e})=>e.space.medium};
  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    visibility: ${({expanded:e})=>e?"hidden":"visible"};
  }
`,YPe=A(Be)`
  height: 40px;
  justify-content: flex-end;
  margin-bottom: 8px;
  padding-bottom: 7px;
`,wv=A(_n)`
  ${Wn} {
    display: flex;
    align-items: center;
    margin-right: 0;
    padding: 1px ${({theme:{space:e}})=>e.xxxSmall};
  }
`,$T=A.span`
  margin: 0 ${({theme:{space:e}})=>e.xxSmall};
  font-size: 1.4rem;
  color: ${({theme:{colors:e}})=>e.text.primary};
`,Ov=[xt.TODAY,xt.DAY1,xt.DAY3,xt.DAY5,xt.DAY10,xt.DAY20,xt.MONTH3,xt.MONTH6,xt.YTD,xt.YEAR1,xt.YEAR3,xt.YEAR5,xt.YEAR15,xt.MAX],Rv={[xt.TODAY]:[ie.MIN1,ie.MIN3,ie.MIN5,ie.MIN10,ie.MIN15,ie.MIN30,ie.HOUR1],[xt.DAY1]:[ie.MIN1,ie.MIN3,ie.MIN5,ie.MIN10,ie.MIN15,ie.MIN30,ie.HOUR1],[xt.DAY3]:[ie.MIN1,ie.MIN3,ie.MIN5,ie.MIN10,ie.MIN15,ie.MIN30,ie.HOUR1],[xt.DAY5]:[ie.MIN1,ie.MIN5,ie.MIN10,ie.MIN15,ie.MIN30,ie.HOUR1,ie.HOUR2,ie.HOUR4],[xt.DAY10]:[ie.HOUR1,ie.HOUR2,ie.HOUR4],[xt.DAY20]:[ie.HOUR1,ie.HOUR2,ie.HOUR4],[xt.MONTH3]:[ie.DAY,ie.WEEK],[xt.MONTH6]:[ie.DAY,ie.WEEK],[xt.YTD]:[ie.DAY,ie.WEEK,ie.MONTH],[xt.YEAR1]:[ie.DAY,ie.WEEK,ie.MONTH],[xt.YEAR3]:[ie.DAY,ie.WEEK,ie.MONTH],[xt.YEAR5]:[ie.WEEK,ie.MONTH],[xt.YEAR15]:[ie.MONTH],[xt.MAX]:[ie.MONTH]},qPe=({range:e,selectRange:t,aggregation:s,selectAggregation:n,chartId:r})=>{const o=Ov.findIndex(d=>d===e),i=Rv[e].findIndex(d=>d===s),l=d=>{t(r,d),Ye({category:Ve.ChartTimeFrame,action:Le.TimeframeSelected,label:Hb(d)})},c=d=>{n(r,d),Ye({category:Ve.ChartAggregation,action:Le.AggregationSelected,label:Ub(d)})};return a.jsxs(a.Fragment,{children:[a.jsx(wv,{"data-testid":"timeframe-range-dropdown",values:Ov,getListItemKey:d=>d,onListItemClick:l,renderListItemContent:d=>__(Hb(d),{namespace:"TimeFrame"}),anchorAriaLabel:`change chart timeframe from ${e}`,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(X,{type:Y.Time,width:16,height:16,viewBox:"2 2 20 20",dataTestId:"time-icon"}),a.jsx($T,{children:__($4(e),{namespace:"TimeFrame"})}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon"})]}),selectedItemIndex:o}),a.jsx(wv,{"data-testid":"timeframe-aggregation-dropdown",values:Rv[e],getListItemKey:d=>d,onListItemClick:c,renderListItemContent:d=>__(Ub(d),{namespace:"TimeFrame"}),anchorAriaLabel:`change chart aggregation from ${s}`,renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(X,{type:Y.Aggregation,width:14.5,height:14.5,viewBox:"3 3 18.5 18.5",dataTestId:"aggregation-icon"}),a.jsx($T,{className:"aggregation-dropdown__anchor-text",children:__(j4[s],{namespace:"TimeFrame"})}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon"})]}),selectedItemIndex:i})]})},KPe=(e,{chartId:t})=>({range:fO(e,t),aggregation:CO(e,t)}),zPe={selectRange:rue,selectAggregation:oue},XPe=se(KPe,zPe)(qPe),QPe=300*fe.DPR,ZPe=400*fe.DPR,JPe=475*fe.DPR,eke=e=>{const{chartId:t,toggleDrawingsMenu:s,isDrawingsMenuOpen:n,isDrawingsMenuButtonDisabled:r,drawingsMenuButtonRef:o,isGainAndLossHeaderWrapped:i,priceChartHeaderWidth:l,toggleChartSettingsMenu:c,isChartSettingsMenuOpen:d,toggleAddStudyMenu:u,isAddStudyMenuOpen:h,chartSettingsMenuButtonRef:p,addStudyMenuButtonRef:m,activePage:g,numCharts:S}=e,T=h?__("Close Add Study Menu"):__("Open Add Study Menu"),y=n?__("Close Drawings Menu"):__("Open Drawings Menu"),b=d?__("Close Chart Settings Menu"):__("Open Chart Settings Menu"),E=L=>{let P=0;switch(L){case"studies":P=QPe;break;case"drawings":P=ZPe;break;case"settings":P=JPe}return i?P+Ay<l:P<l},v=()=>{u(),!h&&Ye({category:Ve.ChartStudies,action:Le.StudiesMenuOpened,label:ks.StudiesMenu})},D=()=>{s(),!n&&Ye({category:Ve.ChartDrawings,action:Le.DrawingsMenuOpened,label:ks.DrawingsMenu})},w=()=>{c(),!d&&Ye({category:Ve.ChartSettings,action:Le.ChartSettingsMenuOpened,label:ks.ChartSettingsMenu})},N=SO(g,S);return a.jsx(YPe,{width:"100%",justifyContent:"flex-start",flexDirection:"column",flexWrap:"wrap",pt:N?gu:0,children:a.jsxs(Be,{width:"100%",justifyContent:"space-between",flexWrap:"wrap",children:[a.jsxs(Be,{alignItems:"flex-end",children:[a.jsxs(tt,{"data-testid":"studys-table-customization-button","aria-expanded":h,"aria-label":T,title:T,ref:m,onClick:v,pl:it.space.xxxSmall,pr:it.space.xxxSmall,children:[a.jsx(X,{type:Y.Study,width:18,height:16,viewBox:"1 1 20 20",dataTestId:"study-icon",isActive:h}),E("studies")&&a.jsx(ot,{fontSize:it.fontSizes.medium,ml:it.space.xxSmall,i18nOptions:{namespace:"AddStudyMenu"},children:"Studies"})]}),a.jsxs(tt,{"data-testid":"drawings-menu-button","aria-expanded":n,"aria-label":y,title:y,ref:o,disabled:r,onClick:D,pl:it.space.xxxSmall,pr:it.space.xxxSmall,children:[a.jsx(X,{type:Y.Drawings,width:16,height:16,viewBox:"1 1 20 20",dataTestId:"drawings-icon",isDisabled:r,isActive:n}),E("drawings")&&a.jsx(ot,{fontSize:it.fontSizes.medium,ml:it.space.xxSmall,i18nOptions:{namespace:"Drawings"},children:"Drawings"})]})]}),a.jsxs(Be,{alignItems:"flex-end",children:[a.jsx(XPe,{chartId:t}),a.jsxs(tt,{"data-testid":"chart-settings-button","aria-expanded":d,"aria-label":b,title:b,ref:p,onClick:w,pl:it.space.xxxSmall,pr:it.space.xxxSmall,children:[a.jsx(X,{type:Y.Settings,width:14,height:14,viewBox:"2 2 21 21",dataTestId:"settings-icon",isActive:d}),E("settings")&&a.jsx(ot,{fontSize:it.fontSizes.medium,ml:it.space.xxSmall,children:"Settings"})]}),!fu()&&e.ExpandIcon&&a.jsx("div",{className:"price-chart__toggle-charts",children:e.ExpandIcon})]})]})})},tke=j.memo(eke),ske=A.div`
  background-color: ${({theme:e})=>e.colors.background.secondary};
  border-radius: ${({theme:e})=>e.shape.borderRadius.primary}px;
  margin-top: ${({theme:e})=>e.space.small};
  padding: ${({theme:e})=>e.space.xSmall};
  pointer-events: all;
  height: 34px;
  display: flex;
  justify-content: ${({centerContent:e})=>e?"center":"space-between"};
  flex-wrap: no-wrap;

  ${tt} {
    font-size: ${({theme:e})=>e.fontSizes.small};
  }
`,nke=A.div`
  color: ${({theme:e})=>e.colors.text.disabled};
  font-size: ${({theme:e})=>e.fontSizes.small};
  padding-right: ${({theme:e})=>e.space.xSmall};
`,rke=(e,t)=>{const{selectedAlert:s,unselectAlert:n,lastDeletedAlert:r,setLastDeletedAlert:o,setSelectedAlert:i,deleteAlert:l,cancelEditAlert:c,symbol:d}=e,u=j.useRef(null),h=j.useRef(null),p=()=>{i(h.current??void 0),h.current=null,o(void 0),u.current&&(clearTimeout(u.current),u.current=null)},m=(T=5e3)=>{h.current=s??null,o(s),n(),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{h.current&&d!==null&&(l(h.current,d),u.current=null)},T)},g=()=>{u.current!==null&&d!==null&&(clearTimeout(u.current),u.current=null,h.current!==null&&(l(h.current,d),h.current=null))};Cn(()=>()=>{g()}),j.useEffect(()=>{s!==void 0&&h.current!==null&&h.current!==s&&g()},[s,h.current]);const S=!!r&&!s;return a.jsxs(ske,{centerContent:S,ref:t,children:[!S&&a.jsx(tt,{onClick:c,children:__("Cancel")}),S?a.jsxs(a.Fragment,{children:[a.jsx(nke,{children:__("Alert deleted.",{namespace:"Alerts"})}),a.jsx(tt,{variant:"link",onClick:()=>p(),children:__("Undo",{namespace:"Alerts"})})]}):a.jsx(tt,{onClick:()=>m(),children:__("Delete")})]})},oke=j.forwardRef(rke),ake=e=>({deleteAlert:(t,s)=>{e(wy(t,s))}}),ike=se(null,ake)(oke),Nh=15,Dv=15,Uo=.3,fn="newDrawing",Lv={h:212,s:47,l:49,a:1},Ph=window.devicePixelRatio;class lke extends j.Component{constructor(s){super(s);R(this,"price");R(this,"chartHoverDetectRef",B.createRef());R(this,"zoomLevelIsSet",!1);R(this,"containerRef",B.createRef());R(this,"mediaQueryList",window.matchMedia("(max-width: 600px)"));R(this,"_isMounted",!1);R(this,"resetZoomLevel",s=>{const n=this.props,r=kC(Uue,s),o=im(n.width,r);n.setContainerState({zoomLevel:r,offsetX:o})});R(this,"zoomIn",()=>{const{width:s,zoomLevel:n,chartId:r,studies:o,expansionItemsCount:i,removeChartExpansion:l}=this.props;let c=n*nE;const d=vLe(c,s,o);if(d<i){const u=i-d;l(r,u),c=bLe(c,u,o)}this.setNewZoomLevel(c)});R(this,"zoomOut",()=>{const s=this.props,n=s.zoomLevel/nE;this.setNewZoomLevel(n),s.expansionItemsCount>0&&s.setContainerState({offsetX:im(s.width,n)})});R(this,"isZoomOutDisabled",()=>{const{zoomLevel:s,studies:n}=this.props;return s===DT(n)});R(this,"isZoomInDisabled",()=>{const{zoomLevel:s,studies:n}=this.props;return s===LT(n)});R(this,"adjustExpansionOnPanLeft",(s=zf)=>{const{zoomLevel:n,width:r,studies:o,chartId:i,expansionItemsCount:l,removeChartExpansion:c}=this.props,d=Math.min(l,mv(s,n,r,o));if(!d)return;c(i,d);const u=CLe(d,n,o);this.props.setContainerState({zoomLevel:u})});R(this,"panLeft",()=>{const{width:s,zoomLevel:n,offsetX:r}=this.props,o=-oE*s;if(r>0){const i=ld(o,s,n,r);this.props.setContainerState({offsetX:i})}this.adjustExpansionOnPanLeft()});R(this,"addChartExpansion",(s=zf)=>{const{width:n,studies:r,chartId:o,zoomLevel:i,offsetX:l,addChartExpansion:c}=this.props,d=mv(s,i,n,r)||0;c(o,d);const{zoomLevel:u,offsetX:h}=yLe(d,i,l,n,r);this.props.setContainerState({zoomLevel:u,offsetX:h})});R(this,"panRight",()=>{const{width:s,zoomLevel:n,offsetX:r}=this.props,o=Yi(s,n);if(r>=o)this.addChartExpansion();else{const i=ld(oE*s,s,n,r);this.props.setContainerState({offsetX:i})}});R(this,"isPanLeftDisabled",()=>{const{offsetX:s,expansionItemsCount:n}=this.props;return s===0&&n===0});R(this,"isPanRightDisabled",()=>{const{width:s,zoomLevel:n,offsetX:r,studies:o,expansionItemsCount:i}=this.props;return gv(n,s,i,o)&&_T(n,r,s)});R(this,"setLastDeletedDrawing",s=>this.setState({lastDeletedDrawing:s}));R(this,"setLastDeletedAlert",s=>this.setState({lastDeletedAlert:s}));R(this,"handleManageStudyWindowClose",()=>{this.setState({studyParameterToOpen:void 0})});R(this,"renderChartInfo",s=>{const n=this.state,r=this.props;return!s&&a.jsx(vt,{children:a.jsx(FN,{chartId:r.chartId,studyValues:n.chartInfoValues,hoveredTrendLineData:n.hoveredTrendLineData,priceTick:r.priceTick,onChartInfoOpen:this.closeChartActionMenu,fractionalType:r.fractionalType,showFractionalPricing:r.showFractionalPricing,showDoubleTickForFractionalPricing:r.showDoubleTickForFractionalPricing,studyParameterToOpen:n.studyParameterToOpen,onManageStudyWindowClose:this.handleManageStudyWindowClose})})});R(this,"setTextNoteArrowPosition",s=>{const n=this.state,r=n.selectedDrawing;if(!r)return;const o=n.drawings,i=o.get(r);if(!i)return;const l=s!==PC.OFF,c=i.align;this.setState({drawings:o.set(r,{...i,align:l?s:c,showArrow:l})})});R(this,"setTextNoteText",s=>{const{selectedDrawing:n,drawings:r}=this.state;if(!n)return;const o=r.get(n);o&&this.setState({drawings:r.set(n,{...o,text:s})})});R(this,"setDrawingExtension",s=>{const{selectedDrawing:n,drawings:r}=this.state,o=n;if(!o)return;const i=r.get(o);if(!i)return;const l=Pke(i,s);l!==void 0&&this.setState({drawings:r.set(o,{...i,[s]:!l})})});R(this,"setSelectedDrawing",s=>{this.setState({selectedDrawing:s})});R(this,"setSelectedAlert",s=>{this.setState({selectedAlert:s})});R(this,"setDrawingColor",s=>{const n=this.state;if(n.selectedDrawing===void 0){this.setState({newDrawingColor:s});return}const r=n.drawings.get(n.selectedDrawing);if(r){const o=Lke(n.drawings,s,n.selectedDrawing,r);this.setState({drawings:o})}});R(this,"initiateOrder",(s,n,r)=>{const{instrumentType:o,symbol:i,addOrder:l,addOptionOrder:c,uncheckAllTrades:d,activePage:u,changeChartSelectedSymbol:h}=this.props;o&&i&&(d(i),o===k.OPTION?c({symbol:i,direction:n,price:r,orderType:s}):l(i,o,n,r,s),u===ge.Charts&&h(i))});R(this,"handleBuyOrSell",(s,n)=>{s.stopPropagation();const{markPrice:r,instrumentType:o,priceTick:i}=this.props,{tradeActionMenu:l}=this.state;if(l&&l.price>0){const c=BP(n,l.price,r),d=Qo(i??0);this.initiateOrder(c,n,Number(l.price.toFixed(d))),this.closeChartActionMenu(),this.props.setFocus(ps.TRADE_TICKET),Ye({category:Ve.Trade,action:Le.AddTradeFromChart,label:`${o} ${n}`})}});R(this,"handleCreateAlert",s=>{s.stopPropagation();const{symbol:n,markPrice:r,createAlert:o,fractionalType:i,showFractionalPricing:l,showDoubleTickForFractionalPricing:c,priceTick:d}=this.props,{tradeActionMenu:u}=this.state;if(n!==null&&u&&u.price>0){const h=Vv(u.price,r),p=Qo(d??0);o({priceType:Jp.MARK,operator:h,price:Number(u.price.toFixed(p)),symbol:n},i,l,c),this.closeChartActionMenu()}});R(this,"handleChartActionMenuStudyClick",s=>n=>{n.stopPropagation(),this.setState({studyParameterToOpen:s}),this.closeChartActionMenu()});R(this,"handleChartActionMenuEnter",()=>{const{chartPointerParams:s}=this.state;this.setState({isCursorInActionMenu:!0},()=>{if(s){const{canvasChartProps:n,ctx:r,x:o,y:i}=s;this.price=Tv(n,r,o*fe.DPR,i*fe.DPR)}})});R(this,"handleChartActionMenuLeave",()=>{this.setState({isCursorInActionMenu:!1})});R(this,"closeChartActionMenu",s=>{s&&s.stopPropagation(),this.setState({tradeActionMenu:void 0,chartPointerParams:void 0,isCursorInActionMenu:!1})});R(this,"handleClick",(s,n,r,o)=>{var d,u;const i=this.state,l={...this.props,settings:ma(this.props.themeColors,this.props.range,this.props.aggregation)};let c=!0;if(i.tradeActionMenu&&(this.closeChartActionMenu(),c=!1),!l.isDragActive){const h=ud(i.drawings,i.lastDeletedDrawing),p=Hv(i.hoveredDrawings[0],h,Uo),m=i.selectedDrawing,g=i.selectedAlert,S=i.activeAlerts.find(W=>W.id===g),T=h.get(m||""),y=[Tt.start,Tt.end,xs.expansionStart,xs.expansionEnd,$n.height,Rn.middle],b=As(l),E=_s(l),v=Xs(l),D=Fv(E,l.width,l.zoomLevel),w=b.invert(0),N=b.invert(v),L={chartTopValue:w,chartBottomValue:N,chartWidthIndex:D},P=Uke(p,i.hoveredDrawings[0],l.nextColorIndex,i.drawingsHoverColors.drawingToColor,i.drawingsHoverColors.colorToDrawing,y,L),F=!m&&i.hoveredDrawings.length&&!g&&!i.hoveredWorkingOrders.length,O=!g&&i.hoveredAlerts.length&&!m&&!i.hoveredWorkingOrders.length,H=m!==void 0&&i.hoveredAlerts.length&&!i.hoveredWorkingOrders.length,C=m===void 0&&g&&i.hoveredDrawings.length&&!i.hoveredWorkingOrders.length,M=(m!==void 0||g)&&i.hoveredWorkingOrders.length,q=m===void 0&&i.hoveredWorkingOrders.length;if(l.drawingMode===qr.Create){const W=ma(l.themeColors,l.range,l.aggregation),z=_s({...l,settings:W}),re=As({...l,settings:W});if(m===fn){let ae=i.drawings.get(m),Me=!1;if(ae!==void 0){if(ae.type===J.Rectangle){const be=Gv(re);ae=Wv(ae,Tt.end,z,re,be>Nh?be:Nh,Dv)}const Se=i.drawingControls.get($n.height);if(ae.type===J.Channel&&ae.height===$P&&Se===void 0){const be={type:mr.HeightControl,guid:$n.height,drawingGuid:fn,start:ae.end,width:1};this.setState({drawingControls:i.drawingControls.set($n.height,be)});return}if(ae.type===J.FibonacciExtensions){const be={time:z.invert(r+l.offsetX),value:re.invert(o)},{isMiddlePointAddition:le,...We}=Rke(i.drawingControls,i.addedDrawingControls,be);if(We&&(this.setState({...We}),le))return}this.createDrawingOnApi(ae),Me=qv(ae),this.setState({drawingControls:ke()})}const he=this.state.drawingsBackup??h,U=hd(m,Me?h:he,Uo);this.props.clearDrawingMode(this.props.chartId),this.setState({selectedDrawing:void 0,drawings:U,newDrawingColor:Lv})}else{const ae=be=>{const le=i.drawings.valueSeq().toArray().filter(We=>We.type===be).length;return`${l.selectedDrawingTool}${le+1}`};r=r*Ph,o=o*Ph;const Me={time:z.invert(r+l.offsetX),value:re.invert(o)},he=Ike(l.selectedDrawingTool??J.Trendline,ae(l.selectedDrawingTool??J.Trendline),Me,Me,i.newDrawingColor,Me),U={type:mr.EndPoint,guid:Tt.start,drawingGuid:fn,start:Me,width:1},Se={type:mr.EndPoint,guid:Tt.end,drawingGuid:fn,start:Me,width:1};this.setState({selectedDrawing:fn,drawings:p.set(fn,he),updatedDrawingsBackup:h.set(fn,he),drawingControls:ke({[Tt.start]:U,[Tt.end]:Se}),addedDrawingControls:[Tt.start]})}}else if(F){if(P!==void 0){const{controls:W,drawingsHoverColors:z}=P;this.setState(({hoveredDrawings:re})=>({selectedDrawing:re[0],drawingsHoverColors:z,drawings:p,drawingControls:W,drawingsBackup:this.state.drawings}))}}else if(O)this.setState(({hoveredAlerts:W})=>({selectedAlert:W[0],drawings:p,drawingsBackup:this.state.drawings}));else if(m!==void 0&&i.hoveredDrawings.length)if(P!==void 0){const{controls:W,drawingsHoverColors:z}=P,re=i.drawings.get(m),ae=i.drawings.get(i.hoveredDrawings[0]);let Me=i.drawings;re!==void 0&&ae!==void 0&&ae.guid!==re.guid&&(Me=i.drawings.set(m,{...re,curve:{...re.curve,color:{...re.curve.color,a:re.curve.color.a-Uo}}}).set(i.hoveredDrawings[0],{...ae,curve:{...ae.curve,color:{...ae.curve.color,a:ae.curve.color.a+Uo}}})),this.saveDrawingToApi(this.props.studies)(!1),this.setState(({hoveredDrawings:he})=>({selectedDrawing:he[0],drawings:Me,drawingsHoverColors:z,drawingControls:W,drawingsBackup:this.state.drawings}))}else{if(T&&i.hoveredDrawings[0]===xs.expansionStart){const W=Bv(T);W!==void 0&&this.setState({drawings:h.set(m,{...T,[W]:!0})});return}if(T&&i.hoveredDrawings[0]===xs.expansionEnd){const W=Bv(T,!1);W!==void 0&&this.setState({drawings:h.set(m,{...T,[W]:!0})});return}this.saveDrawingToApi(this.props.studies)()}else if(H)this.props.clearDrawingMode(this.props.chartId),this.saveDrawingToApi(this.props.studies)(),this.setState(({hoveredAlerts:W})=>({selectedAlert:W[0]}));else if(C){if(S&&this.saveAlertToApi(S),P!==void 0){const{controls:W,drawingsHoverColors:z}=P;this.setState(({hoveredDrawings:re})=>({selectedDrawing:re[0],drawingsHoverColors:z,drawings:p,drawingControls:W,drawingsBackup:this.state.drawings}))}}else if(M){m!==void 0&&(this.props.clearDrawingMode(this.props.chartId),this.saveDrawingToApi(this.props.studies)()),g&&S&&this.saveAlertToApi(S);const W=i.hoveredWorkingOrders.filter(re=>re.includes(Ka))[0],z=wd(`${wr}${Ka}`)(l.workingOrders,W).map(re=>re.id);z.length&&l.symbol!==null&&l.cancelOrders(l.symbol,z)}else if(q){const W=i.hoveredWorkingOrders.filter(re=>re.includes(Ka))[0],z=wd(`${wr}${Ka}`)(l.workingOrders,W).map(re=>re.id);z.length&&l.symbol!==null&&l.cancelOrders(l.symbol,z)}else{if(c&&!g&&!i.hoveredEarnings.length&&!i.hoveredDividends.length&&!i.hoveredHistoricalEarnings.length&&!i.hoveredHistoricalDividends.length&&this.state.drawingControls.size===0&&this.price){let W=r;const z=(u=(d=this.containerRef)==null?void 0:d.current)==null?void 0:u.getBoundingClientRect();z&&z.width<W+104&&(W=r-104),this.setState({tradeActionMenu:{x:W,y:o,price:Uv(Number(this.price??0),this.props.priceTick)},chartPointerParams:{canvasChartProps:s,ctx:n,x:r,y:o},isCursorInActionMenu:!0})}this.props.clearDrawingMode(this.props.chartId),this.saveDrawingToApi(this.props.studies)(),S&&this.saveAlertToApi(S)}}});R(this,"saveDrawingToApi",s=>(n=!0)=>{const r=this.props,o=this.state;if(o.selectedDrawing!==void 0){const i=o.drawings.get(o.selectedDrawing),l=(i==null?void 0:i.type)===J.FibonacciExtensions;if(n){const c=o.drawings,d=hd(o.selectedDrawing,c,Uo),u={drawingToColor:r.drawingToColor,colorToDrawing:r.colorToDrawing};if(i!==void 0){const h=Math.round(i.start.time),p=Math.round(i.end.time);let m;if(l&&(m=i.middle?Math.round(i.middle.time):void 0),i.guid===fn)this.createDrawingOnApi(i,s);else{const g=qS(i,h,p,r.aggregation,m)(s||[]);g&&r.updateDrawing(r.selectedSetId??"",g)}}this.setState(()=>({selectedDrawing:void 0,drawingsHoverColors:u,drawings:d,drawingControls:ke(),drawingsBackup:void 0}))}else if(i!==void 0){const c=Math.round(i.start.time),d=Math.round(i.end.time);let u;l&&(u=i.middle?Math.round(i.middle.time):void 0);const h=qS(i,c,d,r.aggregation,u)(s??[]);h&&r.updateDrawing(r.selectedSetId??"",h)}}});R(this,"saveAlertToApi",s=>{const{activeAlerts:n,markPrice:r,deleteAlert:o,createAlert:i,fractionalType:l,showFractionalPricing:c,showDoubleTickForFractionalPricing:d,priceTick:u}=this.props,{id:h,symbol:p,field:m,threshold:g}=s,S=n.find(T=>T.id===s.id);if(cs.isEqual(s,S))this.unselectAlert();else if(r&&m&&g){const T=Vv(g,r),y=Zf(g,u);o(h,p),i({priceType:Jp[m],operator:T,price:y,symbol:p},l,c,d),this.unselectAlert()}});R(this,"createDrawingOnApi",(s,n)=>{const{createDrawing:r,selectedSetId:o,aggregation:i}=this.props,l=n??this.props.studies,c=Math.round(s.start.time),d=Math.round(s.end.time),u=s.type===J.FibonacciExtensions?Math.round(s.middle.time):-1,h=qS(s,c,d,i,u)(l??[]);if(qv(h))r(o??"",h),this.setState({selectedDrawing:void 0,drawingsBackup:void 0,isTextEditorOpen:!1,addedDrawingControls:[]});else{const p=this.state.drawingsBackup;this.setState({selectedDrawing:void 0,drawings:p??this.state.drawings,isTextEditorOpen:!1,addedDrawingControls:[]})}this.props.clearDrawingMode(this.props.chartId)});R(this,"cancelDrawing",(s=!0)=>{const{drawingsBackup:n,selectedDrawing:r}=this.state;if(n!==void 0){const o=hd(r,n,Uo);this.props.clearDrawingMode(this.props.chartId),this.setState({selectedDrawing:s?void 0:r,drawings:ud(o,this.state.lastDeletedDrawing),isTextEditorOpen:!1,drawingControls:ke(),drawingsHoverColors:{drawingToColor:this.props.drawingToColor,colorToDrawing:this.props.colorToDrawing},addedDrawingControls:[]})}});R(this,"cancelLatestDrawingUpdate",()=>{const{updatedDrawingsBackup:s}=this.state;s&&this.setState({drawings:s})});R(this,"cancelAlert",()=>{this.setState({activeAlerts:this.props.activeAlerts}),this.unselectAlert()});R(this,"unselectDrawing",()=>{const s=hd(this.state.selectedDrawing,this.state.drawings,Uo);this.setState({drawings:s,selectedDrawing:void 0})});R(this,"unselectAlert",()=>{const s=hd(this.state.selectedDrawing,this.state.drawings,Uo);this.setState({drawings:s,selectedAlert:void 0})});R(this,"dragStartPoint",{x:0,y:0});R(this,"handleDragStart",s=>{this.dragStartPoint={x:s.offsetX*Ph,y:s.offsetY*Ph};const n=this.state,r=this.props,{hoveredDrawings:o,hoveredAlerts:i,selectedWorkingOrderBackup:l,channelDrawingProps:c}=_ke(n.drawings,n.workingOrders,n.hoveredDrawings,n.hoveredAlerts,n.selectedDrawing,n.hoveredWorkingOrders,n.selectedAlert,r.selectedWorkingOrderId,n.selectedWorkingOrderBackup);this.setState({hoveredDrawings:o,hoveredAlerts:i,selectedWorkingOrderBackup:l,channelDrawingProps:c||n.channelDrawingProps}),this.props.setContainerState({isDragActive:!0})});R(this,"handleDragEnd",()=>{const s=this.state,n=this.props;if(this.dragStartPoint={x:0,y:0},s.selectedDrawing!==void 0){const r=s.drawings.get(s.selectedDrawing),o=ma(n.themeColors,n.range,n.aggregation),i={...n,settings:o},l=_s(i),c=As(i),d=Xs(i),u=c.invert(0),h=c.invert(d);if(r!==void 0&&r.type===J.Rectangle){const p=Gv(l),m=Wv(r,s.hoveredDrawings[0],l,c,p>Nh?p:Nh,Dv);this.setState({drawings:s.drawings.set(s.selectedDrawing,m)});const g=s.drawingControls.get(Tt.start),S=s.drawingControls.get(Tt.end);if(S!==void 0&&g!==void 0){const T={...g,start:m.start},y={...S,start:m.end};this.setState({drawingControls:s.drawingControls.set(Tt.start,T).set(Tt.end,y)})}}if(r!==void 0&&r.type===J.Channel){const p=s.drawingControls.get($n.height);if(p!==void 0){const m=p.start.value,g=m>u||m<h;if(g){const S={...p,start:g&&r.end.value>r.start.value?{...r.end,value:r.end.value+r.height}:{...r.start,value:r.start.value+r.height}};this.setState({drawingControls:this.state.drawingControls.set($n.height,S)})}}}}if(s.hoveredWorkingOrders.length){const r=this.props,o=wd(`${wr}`)(s.workingOrders,s.hoveredWorkingOrders[0])[0];if(o===void 0){this.disableDrag();return}if((s.workingOrders.get(o.price??0)??[]).length!==1){this.disableDrag();return}r.isDragActive&&r.editWorkingOrder(o.id,r.symbol,o.price??0,o.orderType??r.defaultUserProperties.orderType,o.quantity??r.defaultUserProperties.quantity)}this.disableDrag()});R(this,"handleMouseEnter",()=>{this.props.onMouseEnter(ys.PriceChart)});R(this,"handleMouseLeave",()=>{const s=this.props;this.disableDrag(),this.setState({hoveredTrendLineData:[]}),s.setPriceChartHoveredDate(s.chartId,void 0),s.onMouseLeave&&s.onMouseLeave()});R(this,"disableDrag",()=>{this.props.isDragActive&&this.props.setContainerState({isDragActive:!1}),this.initialX!==0&&(this.initialX=0)});R(this,"setNewZoomLevel",s=>{const{width:n,studies:r,zoomLevel:o,offsetX:i}=this.props,l=am(s,DT(r),LT(r)),c=ALe(l,o,i,n,r);this.props.setContainerState({zoomLevel:l,offsetX:c})});R(this,"handleMouseWheel",s=>{const{width:n,zoomLevel:r,offsetX:o}=this.props,i=ld(s,n,r,o);this.props.setContainerState({offsetX:i})});R(this,"renderOnMove",(s,n,r,o)=>{this.state.isCursorInActionMenu||(this.price=Tv(s,n,r,o))});R(this,"updateChartInfo",s=>{const n={...this.props,settings:ma(this.props.themeColors,this.props.range,this.props.aggregation)},r=fo(n),o=_s(n),i=n.studiesParams,l=Woe(i,r,o,s,n.offsetX);this.setState({chartInfoValues:l})});R(this,"detectHoveredDrawings",(s,n,r,o)=>{const i=this.props,l=this.state,c=this.chartHoverDetectRef.current,d=c?qs(c):void 0,u=ma(i.themeColors,i.range,i.aggregation),h=mke(s,n,r,o,l.drawings.merge(l.drawingControls),i.offsetX,l.drawingsHoverColors.colorToDrawing,u.pointer.font),p=d?h(d):void 0;if(p){const{hoveredDrawings:m,hoveredTrendLineData:g}=p;(g&&!cs.isEqual(g,l.hoveredTrendLineData)||m&&!cs.isEqual(m,l.hoveredDrawings))&&this.setState({hoveredTrendLineData:g,hoveredDrawings:m})}});R(this,"detectHoveredWorkingOrders",(s,n)=>{const r=this.state,o=this.chartHoverDetectRef.current,i=o?qs(o):void 0;if(i){const c=Ske(s,n,r.drawingsHoverColors.colorToDrawing)(i);c&&!cs.isEqual(c,r.hoveredWorkingOrders)&&this.setState({hoveredWorkingOrders:c})}});R(this,"detectHoveredEarnings",(s,n)=>{const r=this.state,o=this.chartHoverDetectRef.current,i=o?qs(o):void 0,l=fke(s,n,r.drawingsHoverColors.colorToDrawing),c=i?l(i):void 0;c&&!cs.isEqual(c,r.hoveredEarnings)&&this.setState({hoveredEarnings:c})});R(this,"detectHoveredDividends",(s,n)=>{const r=this.state,o=this.chartHoverDetectRef.current,i=o?qs(o):void 0,l=Tke(s,n,r.drawingsHoverColors.colorToDrawing),c=i?l(i):void 0;c&&!cs.isEqual(c,r.hoveredDividends)&&this.setState({hoveredDividends:c})});R(this,"detectHoveredHistoricalEarnings",(s,n)=>{const r=this.state,o=this.chartHoverDetectRef.current,i=o?qs(o):void 0,l=yke(s,n,r.drawingsHoverColors.colorToDrawing),c=i?l(i):void 0;c&&!cs.isEqual(c,r.hoveredHistoricalEarnings)&&this.setState({hoveredHistoricalEarnings:c})});R(this,"detectHoveredHistoricalDividends",(s,n)=>{const r=this.state,o=this.chartHoverDetectRef.current,i=o?qs(o):void 0,l=Cke(s,n,r.drawingsHoverColors.colorToDrawing),c=i?l(i):void 0;c&&!cs.isEqual(c,r.hoveredHistoricalDividends)&&this.setState({hoveredHistoricalDividends:c})});R(this,"detectHoveredStudies",(s,n)=>{const r=this.props,o=this.state,i=this.chartHoverDetectRef.current,l=i?qs(i):void 0;if(l){const d=bke(s,n,o.drawingsHoverColors.colorToDrawing)(l);if(d){const u=o.chartInfoValues.reduce((h,p)=>{if(d.filter(g=>g===`${p.studyId}${Qm}`).length!==0){const g=r.studiesParams.get(p.studyId);let S="";return g!==void 0&&(S=Object.values(g.parameters).reduce((y,b,E,v)=>E==0||E===v.length-1||E>Xue?y:[...y,typeof b=="number"?ur(b):__(b)],[]).join(", ")),[...h,{...p,studyParamsString:S}]}else return h},[]);cs.isEqual(u,o.hoveredStudies)||this.setState({hoveredStudies:u})}}});R(this,"detectHoveredAlerts",(s,n,r,o)=>{const i=this.state,{offsetX:l,width:c}=this.props,d=c-pt.left-pt.right,u=this.chartHoverDetectRef.current,h=u?qs(u):void 0,p=Eke(s,n,d,r,o,i.activeAlerts,l,i.drawingsHoverColors.colorToDrawing),m=h?p(h):void 0;m&&!cs.isEqual(m,i.hoveredAlerts)&&this.setState({hoveredAlerts:m})});R(this,"onPointerMove",(s,n,r)=>{var S,T,y;const o=this.state,i={...this.props,settings:ma(this.props.themeColors,this.props.range,this.props.aggregation)},l=_s(i),c=As(i),d=Fv(l,i.width,this.props.zoomLevel),u=Xs(i),h=o.selectedDrawing,p=o.selectedAlert;if(i.drawingMode===qr.Create){const b=l.invert(n+this.props.offsetX),E=c.invert(r),v=o.selectedDrawing;if(v!==void 0){const D=o.drawings.get(v),w=o.drawingControls.get(Tt.end),N=o.drawingControls.get(Rn.middle),L=o.drawingControls.get(Tt.start),P=o.drawingControls.get($n.height);if(D!==void 0&&w!==void 0&&L!==void 0&&i.selectedDrawingTool!==void 0)switch(i.selectedDrawingTool){case J.Rectangle:case J.FibonacciRetracements:case J.Trendline:{this.setState({drawings:o.drawings.set(v,{...D,end:{time:b,value:E}}),drawingControls:o.drawingControls.set(Tt.end,{...w,start:{time:b,value:E}})});break}case J.FibonacciExtensions:{const F=Dke(v,o.addedDrawingControls,o.drawings,o.drawingControls,b,E,w,N,D);F&&this.setState({...F});break}case J.Channel:{const F=Oke(v,d,c,u,o.drawings,o.drawingControls,b,E,w,L,D,o.channelDrawingProps,P);if(F){const{drawings:O,drawingControls:H,channelDrawingProps:C}=F;this.setState(M=>({drawings:O,drawingControls:H,channelDrawingProps:C||M.channelDrawingProps}))}break}case J.PriceLevel:{this.setState({drawings:o.drawings.set(v,{...D,start:{...D.start,value:E},end:{time:b,value:E}}),drawingControls:o.drawingControls.set(Tt.start,{...L,start:{time:L.start.time,value:E}}).set(Tt.end,{...w,start:{time:b,value:E}})});break}case J.TimeLevel:{this.setState({drawings:o.drawings.set(v,{...D,start:{time:b,value:L.start.value},end:{time:b,value:E}}),drawingControls:o.drawingControls.set(Tt.start,{...L,start:{time:b,value:L.start.value}}).set(Tt.end,{...w,start:{time:b,value:E}})});break}}}}else i.isDragActive?o.hoveredWorkingOrders.length&&h===void 0&&p===void 0?this.onDragWorkingOrder(r,c):h===void 0&&p===void 0?this.onDragChart(n):h!==void 0?this.onDragDrawing(n,r,d,u,l,c):p!==void 0&&this.onDragAlert(n,r,c):(this.detectHoveredDrawings(n,r,l,c),this.detectHoveredAlerts(n,r,l,c),this.detectHoveredEarnings(n,r),this.detectHoveredDividends(n,r),this.detectHoveredHistoricalEarnings(n,r),this.detectHoveredHistoricalDividends(n,r),this.detectHoveredWorkingOrders(n,r),!o.tradeActionMenu&&this.detectHoveredStudies(n,r));const m=Ng(i),g=n-pt.left;if(this.updateChartInfo(n-pt.left),m){const b=Math.round(l.invert(g+i.offsetX)),E=b<0?0:b,v=i.studies,D=(y=(T=(S=v==null?void 0:v[0])==null?void 0:S.plots[0])==null?void 0:T.values)==null?void 0:y[E],w=D!==void 0?D.x:new Date;i.setPriceChartHoveredDate(i.chartId,w),this.price===void 0?i.getPrice&&i.getPrice(ys.PriceChart,void 0,g):i.getPrice&&i.getPrice(ys.PriceChart,this.price,g)}});R(this,"onDragDrawingLine",(s,n,r,o,i,l,c,d,u,h,p,m,g,S,T)=>{const y=this.state;let b=n,E=r,v=o,D=T,w=i,N=l,L=c;const P=b.type===J.FibonacciExtensions;let F=n.start.time-h,O=n.start.value-p,H=n.end.time-h,C=n.end.value-p;const M=c?c.start.time-h:void 0,q=c?c.start.value-p:void 0;let W,z;if(P&&n.middle&&(W=n.middle.time-h,z=n.middle.value-p),y.hoveredDrawings[0]===y.selectedDrawing){const Se=W&&z&&(W<0||W>m||z>g||z<S);(F<0||F>m||H<0||H>m||O>g||O<S||C>g||C<S||Se)&&(F=n.start.time,H=n.end.time,O=n.start.value,C=n.end.value,P&&W&&z&&(z=n.middle.value,W=n.middle.time))}else(F<0||F>m)&&(F=n.start.time),(H<0||H>m)&&(H=n.end.time),P&&W&&(W<0||W>m)&&(W=n.middle.time);const ae={time:F,value:O},Me={time:H,value:C},he=W&&z?{time:W,value:z}:void 0,U=M&&q?{time:M,value:q}:void 0;if(y.hoveredDrawings[0]!==void 0){const Se={chartTopValue:g,chartBottomValue:S,chartWidthIndex:m},be=Fke(y.hoveredDrawings[0],n,r,o,i,l,c,y.channelDrawingProps,Se,T);switch(n.type){case J.Rectangle:case J.TextNote:case J.FibonacciRetracements:case J.Channel:{const He=be(ae,Me,U);b=He.updatedDrawing,E=He.updatedDrawingStart,v=He.updatedDrawingEnd,L=He.updatedHeightControl;break}case J.FibonacciExtensions:{const He=be(ae,Me,U,void 0,he);b=He.updatedDrawing,E=He.updatedDrawingStart,v=He.updatedDrawingEnd,L=He.updatedHeightControl,D=He.updatedDrawingMiddle;break}case J.Trendline:{const He=be(ae,Me,void 0);b=He.updatedDrawing,E=He.updatedDrawingStart,v=He.updatedDrawingEnd,w=He.updatedExpansionControlStart,N=He.updatedExpansionControlEnd;break}case J.TimeLevel:{const He=be(ae,Me,void 0,"time");b=He.updatedDrawing,E=He.updatedDrawingStart,v=He.updatedDrawingEnd,w=He.updatedExpansionControlStart,N=He.updatedExpansionControlEnd;break}case J.PriceLevel:{const He=be(ae,Me,void 0,"value");b=He.updatedDrawing,E=He.updatedDrawingStart,v=He.updatedDrawingEnd,w=He.updatedExpansionControlStart,N=He.updatedExpansionControlEnd;break}}const le=y.drawings.set(s,b);let We=y.drawingControls.set(Tt.start,E).set(Tt.end,v).set(xs.expansionStart,w).set(xs.expansionEnd,N).set($n.height,L);P&&D&&(We=We.set(Rn.middle,D)),this.dragStartPoint={x:d,y:u},this.setState(()=>({drawings:le,drawingControls:We}))}else this.onDragChart(d)});R(this,"onDragAlertLine",(s,n,r,o)=>{const i=this.state;if(!s.threshold)return;const l=s.threshold-o;if(i.hoveredAlerts[0]!==void 0){this.dragStartPoint={x:n,y:r};const c=[...i.activeAlerts],d=i.activeAlerts.indexOf(s);c[d]={...s,threshold:l},this.setState(()=>({activeAlerts:c}))}else this.onDragChart(n)});R(this,"onDragDrawing",(s,n,r,o,i,l)=>{const c=this.state,d=i.invert(this.dragStartPoint.x)-i.invert(s),u=l.invert(this.dragStartPoint.y)-l.invert(n),h=l.invert(0),p=l.invert(o);if(c.selectedDrawing!==void 0){const m=c.drawings.get(c.selectedDrawing);if(m!==void 0)switch(m.type){case J.Rectangle:case J.FibonacciRetracements:case J.FibonacciExtensions:case J.TextNote:case J.Channel:case J.Trendline:case J.PriceLevel:case J.TimeLevel:{const g=c.drawingControls.get(Tt.start),S=c.drawingControls.get(Tt.end),T=c.drawingControls.get(Rn.middle),y=c.drawingControls.get(xs.expansionStart),b=c.drawingControls.get(xs.expansionEnd),E=c.drawingControls.get($n.height);g!==void 0&&S!==void 0&&this.onDragDrawingLine(c.selectedDrawing,m,g,S,y,b,E,s,n,d,u,r,h,p,T)}}}});R(this,"onDragAlert",(s,n,r)=>{const o=this.state,i=r.invert(this.dragStartPoint.y)-r.invert(n);if(o.selectedAlert){const l=o.activeAlerts.find(c=>c.id===o.selectedAlert);l&&this.onDragAlertLine(l,s,n,i)}});R(this,"onDragWorkingOrder",(s,n)=>{const r=this.state,o=this.props,i=wd(`${wr}`)(r.workingOrders,r.hoveredWorkingOrders[0]);if(i.length!==1)return;const l=i[0].price;if(l===void 0)return;const c=Qo(o.priceTick??0),d=Uv(Number(n.invert(s).toFixed(c)),o.priceTick);if(d===l||r.workingOrders.get(d)!==void 0)return;const u=r.workingOrders.set(d,[{...i[0],price:d}]).delete(l);this.setState({workingOrders:u})});R(this,"initialX",0);R(this,"onDragChart",s=>{const{width:n,zoomLevel:r,offsetX:o,studies:i,expansionItemsCount:l}=this.props,c=Yi(n,r);this.initialX===0&&(this.initialX=s);const d=this.initialX-s,u=Math.ceil(Math.abs(d/pl(r,n,i)))/100;if(d<0){this.adjustExpansionOnPanLeft(u);const h=ld(d,n,r,o);this.props.setContainerState({offsetX:h}),this.initialX=s}else if(d>0)if(o>=c){if(gv(r,n,l,i)&&_T(r,o,n))return;this.addChartExpansion(u),this.initialX=s}else{const h=ld(d,n,r,o);this.props.setContainerState({offsetX:h}),this.initialX=s}});this.state={candle:void 0,chartInfoValues:[],hoveredDrawings:[],hoveredAlerts:[],hoveredEarnings:[],hoveredDividends:[],hoveredHistoricalEarnings:[],hoveredHistoricalDividends:[],hoveredWorkingOrders:[],selectedDrawing:void 0,selectedAlert:void 0,lastDeletedDrawing:void 0,lastDeletedAlert:void 0,hoveredTrendLineData:[],isMobile:this.mediaQueryList.matches,drawingsHoverColors:{colorToDrawing:this.props.colorToDrawing,drawingToColor:this.props.drawingToColor},drawings:this.props.drawings||ke(),activeAlerts:this.props.activeAlerts,drawingControls:ke(),shouldCropActionContainer:!0,newDrawingColor:Lv,tradeActionMenu:void 0,chartPointerParams:void 0,isCursorInActionMenu:!1,isTextEditorOpen:!1,workingOrders:this.props.workingOrders,selectedWorkingOrderBackup:void 0,channelDrawingProps:void 0,studyParameterToOpen:void 0,hoveredStudies:[],addedDrawingControls:[]}}shouldComponentUpdate(s,n){return!cs.isEqual(this.props,s)||!cs.isEqual(this.state,n)}updateIsMobile(s){this._isMounted&&this.setState({isMobile:s.matches})}static getDerivedStateFromProps(s,n){return s.selectedWorkingOrderId===void 0&&!s.isDragActive&&n.selectedWorkingOrderBackup!==void 0?{selectedWorkingOrderBackup:void 0}:null}componentDidMount(){this._isMounted=!0,this.mediaQueryList.addListener(this.updateIsMobile.bind(this))}componentWillUnmount(){this._isMounted=!1,this.mediaQueryList.removeListener(this.updateIsMobile.bind(this))}componentDidUpdate(s){var p,m,g;const n=this.props,r=this.state,o=fi(s.studies),i=fi(n.studies),l=s.drawingMode!==qr.Create&&n.drawingMode===qr.Create;if(!cs.isEqual(s.colorToDrawing,n.colorToDrawing)&&!this.state.selectedDrawing&&this.setState({drawingsHoverColors:{colorToDrawing:n.colorToDrawing,drawingToColor:n.drawingToColor}}),l&&(this.unselectDrawing(),this.setState({drawings:ud(r.drawings,r.lastDeletedDrawing),drawingsBackup:ud(r.drawings,r.lastDeletedDrawing),lastDeletedDrawing:void 0,selectedAlert:void 0})),!cs.isEqual(s.drawings,n.drawings)){const S=n.drawings??ke();if(r.selectedDrawing!==void 0){const T=r.drawings.get(r.selectedDrawing);if(T!==void 0){const b=Hv(T.guid,S,Uo).set(r.selectedDrawing,T);this.setState({drawings:b,drawingsBackup:S})}else this.setState({drawings:S,drawingsBackup:S})}else this.setState({drawings:S})}if(r.selectedDrawing!==void 0&&(s.aggregation!==n.aggregation||s.range!==n.range)&&this.saveDrawingToApi(s.studies)(),r.selectedAlert!==void 0&&n.symbol!==null&&(s.aggregation!==n.aggregation||s.range!==n.range)){const S=this.state.activeAlerts.find(T=>T.id===r.selectedAlert);S&&this.saveAlertToApi(S)}if(cs.isEqual(s.activeAlerts,n.activeAlerts)||this.setState({activeAlerts:n.activeAlerts}),!this.zoomLevelIsSet&&o===0&&i!==0&&(this.resetZoomLevel(i),this.zoomLevelIsSet=!0),(n.aggregation!==s.aggregation||n.range!==s.range)&&(n.clearDrawingMode(n.chartId),i!==0?this.resetZoomLevel(i):this.zoomLevelIsSet=!1),s.studies===void 0&&n.studies&&[...n.studiesParams.values()].findIndex(T=>T.name===me.PROBABILITY_OF_EXPIRING_CONE||T.name===G.VOLUME_PROFILE)>-1&&n.expansionItemsCount===0&&setTimeout(()=>{const{width:T,zoomLevel:y}=this.props,b=Yi(T,y);this.props.setContainerState({offsetX:b},()=>{this.addChartExpansion()})},0),n.width!==s.width){const{width:S,zoomLevel:T,offsetX:y}=this.props,b=Yi(S,T),E=Math.ceil(y*S/s.width),v=am(E,0,b);this.props.setContainerState({offsetX:v})}if(this.state.lastDeletedDrawing&&!((p=this.state.drawings)!=null&&p.get(this.state.lastDeletedDrawing))&&this.setState({lastDeletedDrawing:void 0,drawingControls:ke()}),this.state.lastDeletedAlert&&!this.state.activeAlerts.find(S=>S.id===this.state.lastDeletedAlert)&&this.setState({lastDeletedAlert:void 0}),s.displaySymbol!==this.props.displaySymbol&&((m=n.drawings)!=null&&m.isEmpty()?this.setState({drawings:ke(),drawingControls:ke(),selectedDrawing:void 0}):(this.unselectDrawing(),n.clearDrawingMode(n.chartId),this.setState({selectedDrawing:void 0,drawingsHoverColors:{drawingToColor:this.props.drawingToColor,colorToDrawing:this.props.colorToDrawing}}))),n.studies!==s.studies){const S=s.studies??[],T=n.studies??[];if(S.length<T.length){const y=fv(S,T);if(y!==void 0){const b=n.studiesParams.get(y.id),E=[];if(b!==void 0){(b.name===me.PROBABILITY_OF_EXPIRING_CONE||b.name===G.VOLUME_PROFILE)&&n.expansionItemsCount===0&&this.props.setContainerState({offsetX:Yi(this.props.width,this.props.zoomLevel)},()=>{this.addChartExpansion()}),(((g=$r[b.name])==null?void 0:g.plotNames)??Object.keys(b.plotParameters)).forEach((N,L)=>{const P=y.plots.find(F=>F.name===N);if(P!==void 0){const F={...P,index:L};E.push(F)}});const D={studyId:y.id,studyName:b.name,plots:E},w=this.state.chartInfoValues.concat(D);this.setState({chartInfoValues:w})}}}else if(S.length>T.length){const y=fv(T,S);if(y!==void 0){const b=this.state.chartInfoValues.filter(E=>E.studyId!==y.id);this.setState({chartInfoValues:b})}}}const h=r.drawings.get(r.selectedDrawing||"");n.drawingMode===qr.Create&&(h==null?void 0:h.type)===J.TextNote&&!r.isTextEditorOpen&&this.setState({isTextEditorOpen:!0}),cs.isEqual(s.workingOrders,this.props.workingOrders)||this.setState({workingOrders:this.props.workingOrders})}render(){var D,w,N;const s=this.props,n=this.state,r=ma(s.themeColors,s.range,s.aggregation),o=s.displaySymbol?`${Ns(s.displaySymbol)} ${__("Chart Detail")}`:__("Chart Detail"),i=oMe(s.isDragActive,s.drawingMode===qr.Create),{activeAlerts:l,lastDeletedAlert:c,lastDeletedDrawing:d,selectedAlert:u,selectedDrawing:h,isTextEditorOpen:p}=n,m=!!((h||d)&&!u),g=!!((u||c)&&!h),S=m||g||s.drawingMode===qr.Create,T=ud(n.drawings,d),y=sMe(l,c),b=nhe(s.isGainAndLossChartOpen,s.width),E=T.get(h||"");let v=this.saveDrawingToApi(s.studies);return E&&h===fn&&(v=()=>this.createDrawingOnApi(E)),a.jsxs("div",{id:`price-chart-wrapper-${s.chartId}`,className:"price-chart",tabIndex:0,"aria-label":o,children:[a.jsx(vt,{children:a.jsx(tke,{chartId:s.chartId,ExpandIcon:s.ExpandIcon,isGainAndLossHeaderWrapped:b,priceChartHeaderWidth:s.width,isAddStudyMenuOpen:s.isAddStudyMenuOpen,addStudyMenuButtonRef:s.addStudyMenuButtonRef,toggleAddStudyMenu:s.toggleAddStudyMenu,isDrawingsMenuOpen:s.isDrawingsMenuOpen,isDrawingsMenuButtonDisabled:!1,drawingsMenuButtonRef:s.drawingsMenuButtonRef,toggleDrawingsMenu:s.toggleDrawingsMenu,isChartSettingsMenuOpen:s.isChartSettingsMenuOpen,chartSettingsMenuButtonRef:s.chartSettingsMenuButtonRef,toggleChartSettingsMenu:s.toggleChartSettingsMenu,activePage:s.activePage,numCharts:s.numCharts,symbol:s.symbol})}),s.historicalEarnings&&a.jsx(vt,{children:a.jsx(fLe,{historicalEarnings:s.historicalEarnings})}),s.historicalDividends&&a.jsx(vt,{children:a.jsx(TLe,{historicalDividends:s.historicalDividends})}),a.jsx(vt,{children:a.jsx(EP,{dateFormat:r.xAxisLabelFormat,studies:s.studies??[]})}),a.jsxs("div",{id:`price-chart-canvas-${s.chartId}`,ref:this.containerRef,className:i,children:[a.jsx(vt,{children:a.jsx(JDe,{onClose:this.closeChartActionMenu,onBuyOrSell:this.handleBuyOrSell,onAlert:this.handleCreateAlert,tradeActionMenu:n.tradeActionMenu,toggleButtonRef:this.containerRef,isTradeable:s.isTradeable,onMouseEnter:this.handleChartActionMenuEnter,onMouseLeave:this.handleChartActionMenuLeave,hoveredStudies:n.hoveredStudies,onStudy:this.handleChartActionMenuStudyClick})}),a.jsx(vt,{children:a.jsx(wg,{priceLevelPreviewValue:s.priceLevelPreviewValue,theme:s.theme,width:s.width,height:s.height,hoveredChart:s.hoveredChart||n.hoveredChart,hoveredPrice:s.hoveredPrice,hoveredDateIndex:s.hoveredDateIndex,options:s.options,activeAlerts:y,positions:s.positions,workingOrders:n.workingOrders,selectedWorkingOrderBackup:n.selectedWorkingOrderBackup,studies:s.studies,drawings:T,drawingControls:n.drawingControls,expansionItemsCount:s.expansionItemsCount,hoveredDrawings:n.hoveredDrawings,hoveredAlerts:n.hoveredAlerts,hoveredEarnings:n.hoveredEarnings,hoveredDividends:n.hoveredDividends,hoveredHistoricalEarnings:n.hoveredHistoricalEarnings,hoveredHistoricalDividends:n.hoveredHistoricalDividends,fitStudiesInYAxis:s.fitStudiesInYAxis,hoveredWorkingOrders:n.hoveredWorkingOrders,hoveredStudies:n.hoveredStudies,range:s.range,settings:r,studiesParams:s.studiesParams,renderChart:pNe,renderOnMove:this.renderOnMove,renderDynamic:XNe,showChartHighLow:s.showChartHighLow,showEarningsPreview:s.showEarningsPreview,showEarningsIcon:s.showEarningsIcon,showDividendsIcon:s.showDividendsIcon,onMouseMove:this.onPointerMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseWheel:this.handleMouseWheel,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,drawingMode:s.drawingMode,onClick:this.handleClick,selectedDrawing:n.selectedDrawing,selectedAlert:n.selectedAlert,selectedWorkingOrderId:s.selectedWorkingOrderId,priceTick:s.priceTick,zoomLevel:s.zoomLevel,offsetX:s.offsetX,isDragActive:s.isDragActive,showZoomPanButtons:!0,onZoomIn:this.zoomIn,onZoomOut:this.zoomOut,isZoomInDisabled:this.isZoomInDisabled(),isZoomOutDisabled:this.isZoomOutDisabled(),onPanLeft:this.panLeft,onPanRight:this.panRight,isPanLeftDisabled:this.isPanLeftDisabled(),isPanRightDisabled:this.isPanRightDisabled(),enableKeyboardPanZoom:!0,chartHoverDetectRef:this.chartHoverDetectRef,colorToDrawing:n.drawingsHoverColors.colorToDrawing,drawingToColor:n.drawingsHoverColors.drawingToColor,shouldClearCanvasOnMouseLeave:!n.isCursorInActionMenu,fractionalType:s.fractionalType,showFractionalPricing:s.showFractionalPricing,showDoubleTickForFractionalPricing:s.showDoubleTickForFractionalPricing,earnings:s.earnings,dividends:s.dividends,historicalEarnings:s.historicalEarnings,historicalDividends:s.historicalDividends,shouldShowEnterSymbolToViewChart:s.activePage===ge.Charts&&s.symbol===null})}),a.jsx(WPe,{shouldCrop:n.shouldCropActionContainer,children:a.jsx(Cm,{direction:"down",timeout:300,in:S,onEntered:()=>{this.setState({shouldCropActionContainer:!1})},onExit:()=>{this.setState({shouldCropActionContainer:!0})},children:a.jsxs(VPe,{isMobile:this.state.isMobile,children:[m&&a.jsx(vt,{children:a.jsx(UPe,{chartId:s.chartId,isVisible:S,drawingMode:s.drawingMode,isMobile:this.state.isMobile,setLastDeletedDrawing:this.setLastDeletedDrawing,lastDeletedDrawing:n.lastDeletedDrawing,unselectDrawing:this.unselectDrawing,cancelDrawing:this.cancelDrawing,cancelDrawingField:this.cancelLatestDrawingUpdate,selectedDrawingColor:h?(D=n.drawings.get(h))==null?void 0:D.curve.color:n.newDrawingColor,selectedDrawing:h,setSelectedDrawing:this.setSelectedDrawing,setDrawingColor:this.setDrawingColor,drawingType:(w=T.get(h||""))==null?void 0:w.type,lastDeletedDrawingType:(N=xke(n.drawings,n.lastDeletedDrawing))==null?void 0:N.type,drawingExtensions:wke(this.state.drawings,h),setExtension:this.setDrawingExtension,textNoteArrowPosition:nMe(this.state.drawings,h),setTextNoteArrowPosition:this.setTextNoteArrowPosition,setTextNoteText:this.setTextNoteText,textNoteText:rMe(this.state.drawings,h),saveDrawingToApi:v,createUpdatedDrawingsBackup:()=>this.setState({updatedDrawingsBackup:T}),isTextEditorOpen:p})}),g&&a.jsx(vt,{children:a.jsx(ike,{symbol:s.symbol,setLastDeletedAlert:this.setLastDeletedAlert,lastDeletedAlert:n.lastDeletedAlert,unselectAlert:this.unselectAlert,selectedAlert:n.selectedAlert,setSelectedAlert:this.setSelectedAlert,cancelEditAlert:this.cancelAlert})})]})})}),this.renderChartInfo(S)]})]})}}const cke=_l(hn(lke)),_v=(e,t,s)=>n=>e/t-n*s/t,NP=is((e,t,s=!1,n=!1)=>{const[r,o]=Ti(e),i=r.y-o.y,l=o.x-r.x;if(l===0&&i===0)return[];if(l===0){const v=r.y>t.bottom?{...r,y:t.bottom}:r;return[s||o.y>t.bottom?{...r,y:t.bottom}:o,n?{...r,y:t.top}:v]}const c=r.y*o.x-o.y*r.x,d=_v(c,l,i),u=_v(c,i,l),h=[t.left,t.right].map(v=>({x:v,y:d(v)})),p=[t.top,t.bottom].map(v=>({x:u(v),y:v})),m=[...h,...p].filter(v=>v.x>=0&&v.x<=t.right&&v.y>=0&&v.y<=t.bottom);if(m.length===0)return[];const[g,S]=Ti(m),T=r.y<o.y?S:g,y=o.y<r.y?g:S,b=r.y<t.bottom?r:T,E=o.y<t.bottom?o:y;return[s?g:b,n?S:E]},cs.isEqual),GS=is((e,t,s,n,r=!1,o=!1)=>{const i=Ti([e,t]),l=NP(i,{top:0,right:s,bottom:n,left:0},r,o);return l.length===0?[]:Ti(l)},cs.isEqual),Nv=(e,t)=>e&&t?Math.round((e.getTime()-t.getTime())/(1e3*60)):0,YS=is((e,t,s)=>{let n=t;switch(s){case ie.MIN1:case ie.MIN2:case ie.MIN3:case ie.MIN4:case ie.MIN5:case ie.MIN10:case ie.MIN15:case ie.MIN20:case ie.MIN30:{n=W5(t,e*_r[s]);break}case ie.HOUR1:case ie.HOUR2:case ie.HOUR4:{n=V5(t,e*_r[s]);break}case ie.DAY:case ie.DAY2:case ie.DAY3:case ie.DAY4:{n=Qi(t,e*_r[s]);break}case ie.WEEK:{n=Qi(t,e*_r[s]*5);break}case ie.MONTH:{n=Qi(t,e*_r[s]*5*4);break}}return n},cs.isEqual),Pv=is((e,t,s)=>{let n=0;switch(t){case ie.MIN1:case ie.MIN2:case ie.MIN3:case ie.MIN4:case ie.MIN5:case ie.MIN10:case ie.MIN15:case ie.MIN20:case ie.MIN30:{const r=e===0?s:e*24*60;n=Math.ceil(r/_r[t]);break}case ie.HOUR1:case ie.HOUR2:case ie.HOUR4:{const r=e===0?s/60:e*24;n=Math.ceil(r/_r[t]);break}case ie.DAY:case ie.DAY2:case ie.DAY3:case ie.DAY4:{const r=e===0?s/1440:e;n=Math.ceil(r/_r[t]);break}case ie.WEEK:{const r=e===0?s/1440:e;n=Math.ceil(_r[t]*r/5);break}case ie.MONTH:{const r=e===0?s/1440:e;n=Math.ceil(_r[t]*r/(5*4));break}}return n},cs.isEqual),kh=(e,t,s,n,r)=>{const i=s.length-1,l=BDe(e,s[i]);return n?i+Pv(l,r,t):i-Pv(l,r,t)},Mh=is((e,t,s,n,r,o)=>{const i=r==null?void 0:r.map(T=>T.getTime()),l=aT(e.x,i),c=aT(t.x,i),d=i.length,u=e.x>i[d-1],h=t.x>i[d-1],p=Nv(s,r[d-1]),m=Nv(n,r[d-1]);if(!l&&!c){const T=kh(s,p,r,u,o),y=kh(n,m,r,h,o);return{pointAIndex:T,pointBIndex:y}}let g=i.findIndex(T=>T===ul(e.x,i)),S=i.findIndex(T=>T===ul(t.x,i));if(g===S&&e.x!==t.x&&e.y!==t.y&&(g===d-1?g=d-2:S=g+1),!l&&c)return{pointAIndex:kh(s,p,r,u,o),pointBIndex:S};if(l&&!c){const T=kh(n,m,r,h,o);return{pointAIndex:g,pointBIndex:T}}return{pointAIndex:g,pointBIndex:S}},cs.isEqual),kv=(e,t,s)=>e+s*(t-e),dke=is((e,t)=>{const s=e.end.x-e.start.x,n=e.end.y-e.start.y;if(s===0&&n===0)return e.start;const r=((t.x-e.start.x)*s+(t.y-e.start.y)*n)/(s*s+n*n),o=kv(e.start.x,e.end.x,r),i=kv(e.start.y,e.end.y,r);return{x:o,y:i}},cs.isEqual),uke=is((e,t)=>{const s=t.x-e.x,n=t.y-e.y;return Math.sqrt(s*s+n*n)},cs.isEqual),PP=is((e,t)=>{const s=dke(e,t);return uke(s,t)},cs.isEqual),hke=is((e,t)=>{const s=Math.max(Math.min(e.start.x,e.end.x)-t.x,0,t.x-Math.max(e.start.x,e.end.x)),n=Math.max(Math.min(e.start.y,e.end.y)-t.y,0,t.y-Math.max(e.start.y,e.end.y));return Math.hypot(s,n)},cs.isEqual),Ti=e=>[...e].sort((t,s)=>{const n=t.x-s.x;return n!==0?n:t.y-s.y});function*kP(e){let t=e||1;const s=50;for(;t<16777216;){const n=[];n.push(t&255),n.push((t&65280)>>8),n.push((t&16711680)>>16),n.push(1),t+=s,yield{color:`rgb(${n.join(",")})`,nextColor:t}}}const Hn=10,Mv=e=>e.type in mr,MP=(e,t,s,n)=>{const r=e.text.split(`
`);let o;if(e.showArrow)switch(e.align){case nn.RIGHT:o=Eo.Right;break;case nn.TOP:case nn.BOTTOM:o=Eo.Center;break;case nn.LEFT:default:o=Eo.Left;break}else o=Eo.Left;const i=FP(t.x,t.y,e.align,e.showArrow,r.length);let l=0;r.forEach(h=>{n.font=s;const p=n.measureText(h).width;l<p&&(l=p)});const c=15*r.length,d=Gke(i.x,i.y,o,l),u=Yke(d,l,c,o);return{hoveredRectStartPoint:d,hoverRectEndPoint:u,textAlign:o}},pke=(e,t,s)=>(n,r,o,i,l,c)=>d=>{const{x:u,y:h}=o;switch(n.type){case J.Channel:return[0,1,...n.channelCurves.map(m=>m.coeff)].reduce((m,g)=>{if(m)return m;const S={start:{...r.start,y:l(n.start.value+n.height*g)},end:{...r.end,y:l(n.end.value+n.height*g)}};return e(S,{x:u,y:h})<Hn},!1);case J.FibonacciExtensions:case J.FibonacciRetracements:{const p=r.start.y-r.end.y;return n.fibonacciCurves.map(g=>g.coeff).reduce((g,S)=>{if(g)return g;const T={start:{x:r.start.x,y:r.end.y+p*S},end:{x:r.start.x===r.end.x?r.end.x+1:r.end.x,y:r.end.y+p*S}};return e(T,{x:u,y:h})<Hn},!1)}case J.Rectangle:{const{start:p,end:m}=r;return t({start:p,end:m},{x:u,y:h})<Hn}case J.TextNote:{const{hoveredRectStartPoint:p,hoverRectEndPoint:m}=s(n,r.start,c,d);return t({start:p,end:m},{x:u,y:h})<Hn}default:return e(r,{x:u,y:h})<Hn}},$v=pke(PP,hke,MP),mke=(e,t,s,n,r,o,i,l)=>c=>{const{data:d}=c.getImageData(e-Hn/2,t-Hn/2,Hn,Hn),u=d.reduce((p,m,g,S)=>{var T;if(g%4===0){const y=`rgb(${S[g]},${S[g+1]},${S[g+2]},${Math.floor(S[g+3]/255)})`,b=(T=i[y])==null?void 0:T.replace(fy,""),E=r.get(b);if(b!==void 0&&E!==void 0&&!Mv(E)){let v={start:{x:s(E.start.time)-o,y:n(E.start.value)},end:{x:s(E.end.time)-o,y:n(E.end.value)}},D;E.type===J.FibonacciExtensions&&(v={...v,end:{x:s(E.middle.time)-o,y:n(E.middle.value)}},D={start:{x:s(E.middle.time)-o,y:n(E.middle.value)},end:{x:s(E.end.time)-o,y:n(E.end.value)}});const w=$v(E,v,{x:e,y:t},s,n,l)(c),N=D?$v(E,D,{x:e,y:t},s,n,l)(c):!1;if(p.find(L=>L===b)===void 0&&(w||N))return[...p,b]}else if(E!==void 0&&Mv(E)&&p.find(v=>v===b)===void 0)return[...p,b];return p}return p},[]),h=u.reduce((p,m)=>{const g=r.get(m);if(g!==void 0)switch(g.type){case J.Trendline:return g.start.time!==g.end.time?[...p,{name:g.name,guid:g.guid,color:g.curve.color,price:n.invert(t)}]:p;default:return p}return p},[]);return{hoveredDrawings:u,hoveredTrendLineData:h}},gke=(e,t)=>e.reduce((s,n,r,o)=>{if(r%4===0){const i=`rgb(${o[r]},${o[r+1]},${o[r+2]},${Math.floor(o[r+3]/255)})`,l=t[i];return l!==void 0&&s.find(c=>c===l)===void 0?[...s,l]:s}return s},[]),Hc=e=>(t,s,n)=>r=>{const{data:o}=r.getImageData(t-Hn/2,s-Hn/2,Hn,Hn);return gke(o,n).filter(l=>l.includes(e))},Ske=Hc(wr),fke=Hc(yy),Tke=Hc(Cy),yke=Hc(by),Cke=Hc(Ey),bke=Hc(Qm),Eke=(e,t,s,n,r,o,i,l)=>c=>{const{data:d}=c.getImageData(e-Hn/2,t-Hn/2,Hn,Hn);return d.reduce((h,p,m,g)=>{var S;if(m%4===0){const T=`rgb(${g[m]},${g[m+1]},${g[m+2]},${Math.floor(g[m+3]/255)})`,y=(S=l[T])==null?void 0:S.replace(Ty,""),b=o.find(E=>E.id.toString()===y);if(y!==void 0&&b!==void 0&&b.threshold){const E={start:{x:n(0)-i,y:r(b.threshold)},end:{x:s-i,y:r(b.threshold)}},v=PP(E,{x:e,y:t})<Hn;if(h.find(D=>D===y)===void 0&&v)return[...h,y]}return h}return h},[]).map(h=>parseInt(h))},Ake=(e,t)=>{const s=kP(t),n={},r={};return e.forEach(o=>{const i=s.next().value;n[i.color]=o,r[o]=i.color}),{colorToDrawing:n,drawingToColor:r}},jv=[0,.236,.382,.5,.618,.786,1,1.618,2.618,4.236],$P=0,vke=[.25,.5,.75],Ike=(e,t,s,n,r,o)=>{switch(e){case J.PriceLevel:return{type:J.PriceLevel,name:t,guid:fn,curve:{color:r,style:Wr.SOLID,width:1},start:s,end:n,leftExtended:!1,rightExtended:!0,nameStyle:ji.HIDDEN,priceStyle:ji.HIDDEN};case J.TimeLevel:return{type:J.TimeLevel,name:t,guid:fn,curve:{color:r,style:Wr.SOLID,width:1},start:s,end:n,topExtended:!0,bottomExtended:!0,nameStyle:ji.HIDDEN,timeStyle:ji.HIDDEN};case J.FibonacciRetracements:return{type:J.FibonacciRetracements,name:t,guid:fn,curve:{color:r,style:Wr.LONG_DASHED,width:1},start:s,end:n,leftExtended:!1,rightExtended:!0,coeffStyle:Bi.LEFT,priceStyle:Bi.RIGHT,fibonacciCurves:jv.map(i=>({visible:!0,coeff:i,color:r,style:Wr.SOLID,width:1}))};case J.FibonacciExtensions:return{type:J.FibonacciExtensions,name:t,guid:fn,curve:{color:r,style:Wr.LONG_DASHED,width:1},extensionCurve:{color:Rr(r),style:Wr.LONG_DASHED,width:1},start:s,end:n,middle:o,extension:!0,coeffStyle:Bi.LEFT,priceStyle:Bi.RIGHT,fibonacciCurves:jv.map(i=>({visible:!0,coeff:i,color:r,style:Wr.SOLID,width:1}))};case J.Rectangle:return{type:J.Rectangle,name:t,guid:fn,indicatorId:"STOCK",start:s,end:n,curve:{color:r}};case J.TextNote:return{type:J.TextNote,name:t,guid:fn,start:s,end:n,curve:{color:r},text:"",font:{size:11,name:vR,style:hy.PLAIN},align:nn.LEFT,showArrow:!0,textStyle:py.FULL};case J.Channel:return{type:J.Channel,name:t,guid:fn,curve:{color:r,style:Wr.SOLID,width:1},indicatorId:"Symbol",height:$P,channelCurves:vke.map(i=>({color:r,style:Wr.SOLID,width:1,visible:!1,coeff:i})),start:s,end:n,leftExtended:!1,rightExtended:!1,labelLocation:Bi.LEFT,labelStyle:ji.HIDDEN};case J.Trendline:default:return{type:J.Trendline,name:t,guid:fn,curve:{color:r,style:Wr.SOLID,width:1},start:s,end:n,leftExtended:!1,rightExtended:!1,arrowStyle:AR.NONE,labelLocation:Bi.LEFT,labelStyle:ji.HIDDEN}}},Kd=e=>{let t=[0,0];return e===Wr.LONG_DASHED?(t=[8,2],t):(e===Wr.SHORT_DASHED&&(t=[4,2]),t)},ud=is((e,t)=>(e==null?void 0:e.filter(n=>n.guid!==t))??ke()),xke=is((e,t)=>{if(t)return e==null?void 0:e.get(t)}),wke=(e,t)=>{if(!t)return[];const s=e.get(t);if(!s)return[];switch(s.type){case J.FibonacciRetracements:case J.Channel:case J.Trendline:case J.PriceLevel:return[{extensionType:Un.leftExtended,expanded:s.leftExtended},{extensionType:Un.rightExtended,expanded:s.rightExtended}];case J.TimeLevel:return[{extensionType:Un.topExtended,expanded:s.topExtended},{extensionType:Un.bottomExtended,expanded:s.bottomExtended}];default:return[]}},Oke=(e,t,s,n,r,o,i,l,c,d,u,h,p)=>{const m=s.invert(0),g=s.invert(n),S={chartTopValue:m,chartBottomValue:g,chartWidthIndex:t};if(u.type===J.Channel&&p!==void 0){const T=o.get($n.height)??p,y=o.get(Tt.start)??d,b=o.get(Tt.end)??c,E={time:i,value:l},v=h;if(v){const{updatedDrawingEndControl:D,updatedDrawingStartControl:w,updatedDrawing:N,updatedHeightControl:L}=jP(u,v,T,E,y,b,S);return{drawings:r.set(e,N),drawingControls:o.set($n.height,L).set(Tt.start,w).set(Tt.end,D)}}}else{const y={slope:vy(l,u.start.value,i,u.start.time),range:{start:u.start,end:{time:i,value:l}}};return{drawings:r.set(e,{...u,end:{time:i,value:l}}),drawingControls:o.set(Tt.end,{...c,start:{time:i,value:l}}),channelDrawingProps:y}}},Rke=(e,t,s)=>{if(t.includes(Rn.middle)){const n={type:mr.EndPoint,guid:Tt.end,drawingGuid:fn,start:s,width:1};return{drawingControls:e.set(Tt.end,n),addedDrawingControls:[...t,Tt.end],isMiddlePointAddition:!1}}else{const n={type:mr.MiddlePoint,guid:Rn.middle,drawingGuid:fn,start:s,width:1},r={type:mr.EndPoint,guid:Tt.end,drawingGuid:fn,start:s,width:1};let o=e.set(Rn.middle,n);return o=o.set(Tt.end,r),{drawingControls:o,addedDrawingControls:[...t,Rn.middle],isMiddlePointAddition:!0}}},Dke=(e,t,s,n,r,o,i,l,c)=>{if(!t.includes(Rn.middle)&&!t.includes(Tt.end)){const d={...l,start:{time:r,value:o}},u={...c,middle:{time:r,value:o},end:{time:r,value:o}};return{drawings:s.set(e,u),drawingControls:n.set(Rn.middle,d)}}else if(t.includes(Rn.middle)&&!t.includes(Tt.end)){const d={...c,end:{time:r,value:o}};return{drawings:s.set(e,d),drawingControls:n.set(Tt.end,{...i,start:{time:r,value:o}})}}},Lke=(e,t,s,n)=>{let r={...n,curve:{...n.curve,color:t}};return r.type===J.FibonacciRetracements||r.type===J.FibonacciExtensions?(r={...r,fibonacciCurves:r.fibonacciCurves.map(o=>({...o,color:t}))},r.type===J.FibonacciExtensions&&(r={...r,extensionCurve:{...r.extensionCurve,color:Rr(t)}})):r.type===J.Channel&&(r={...r,channelCurves:r.channelCurves.map(o=>({...o,color:t}))}),e.set(s,r)},_ke=(e,t,s,n,r,o,i,l,c)=>{const d=s.filter(g=>[Tt.start,Tt.end,Rn.middle,$n.height,r].includes(g)),u=n.filter(g=>g===i),h=o[o.length-1];let p=c;(l===void 0||l!==h)&&h&&(p=wd(wr)(t,h)[0]);let m;if(r){const g=e.get(r),S=s.includes($n.height);g&&g.type===J.Channel&&S&&(m={slope:vy(g.end.value,g.start.value,g.end.time,g.start.time),range:{start:g.start,end:g.end}})}return{hoveredDrawings:d,hoveredAlerts:u,selectedWorkingOrderBackup:p,channelDrawingProps:m}},Nke=(e,t,s,n)=>{const r=n-t,o=s-e;return Math.atan2(r,o)},Bv=(e,t=!0)=>{switch(e.type){case J.PriceLevel:case J.Trendline:case J.Channel:return t?Un.leftExtended:Un.rightExtended;case J.TimeLevel:return t?Un.bottomExtended:Un.topExtended}},Pke=(e,t)=>{switch(e.type){case J.FibonacciRetracements:case J.Channel:case J.PriceLevel:case J.Trendline:{switch(t){case Un.leftExtended:return e.leftExtended;case Un.rightExtended:return e.rightExtended}break}case J.TimeLevel:{switch(t){case Un.topExtended:return e.topExtended;case Un.bottomExtended:return e.bottomExtended}break}}},kke=(e,t)=>{switch(e.type){case J.Trendline:case J.PriceLevel:{const s=t.guid===xs.expansionStart&&e.leftExtended,n=t.guid===xs.expansionEnd&&e.rightExtended;return!(s||n)}case J.TimeLevel:{const s=t.guid===xs.expansionStart&&e.bottomExtended,n=t.guid===xs.expansionEnd&&e.topExtended;return!(s||n)}}},Mke=e=>e.type!==J.TextNote,qS=(e,t,s,n,r)=>o=>{var g,S,T,y,b,E,v,D;const i=o&&o.length>0?(S=(g=o[0])==null?void 0:g.plots[0])==null?void 0:S.values.length:0;if(i===0)return;const l=o[0].plots[0].values[i-1].x;let c=(y=(T=o[0])==null?void 0:T.plots[0].values[t])==null?void 0:y.x,d=(E=(b=o[0])==null?void 0:b.plots[0].values[s])==null?void 0:E.x,u=r?(D=(v=o[0])==null?void 0:v.plots[0].values[r])==null?void 0:D.x:void 0;c===void 0&&t>=i&&(c=YS(t-i+1,l,n)),d===void 0&&s>=i&&(d=YS(s-i+1,l,n)),r&&u===void 0&&r>=i&&(u=YS(r-i+1,l,n));const h=(c==null?void 0:c.toISOString())??"",p=(d==null?void 0:d.toISOString())??"",m=(u==null?void 0:u.toISOString())??"";switch(e.type){case J.Trendline:return{...e,start:{...e.start,time:h},end:{...e.end,time:p},curve:{...e.curve,color:Rr(e.curve.color)}};case J.TimeLevel:{const{end:w,...N}=e;return{...N,start:{...N.start,time:h},endValue:w.value,curve:{...e.curve,color:Rr(e.curve.color)}}}case J.PriceLevel:{const{end:w,...N}=e;return{...N,start:{...N.start,time:h},endTime:p,curve:{...e.curve,color:Rr(e.curve.color)}}}case J.FibonacciExtensions:{const{curve:w,...N}=e;return{...N,start:{...e.start,time:h},middle:{...e.middle,time:m},end:{...e.end,time:p},trendCurve:{...w,color:Rr(w.color)},fibonacciCurves:e.fibonacciCurves.map(L=>({...L,color:Rr(e.curve.color)}))}}case J.FibonacciRetracements:{const{curve:w,...N}=e;return{...N,start:{...e.start,time:h},end:{...e.end,time:p},trendCurve:{...w,color:Rr(w.color)},fibonacciCurves:e.fibonacciCurves.map(L=>({...L,color:Rr(e.curve.color)}))}}case J.Rectangle:{const{curve:w,start:N,end:L,...P}=e;return{...P,color:Rr(e.curve.color),topLeft:{...N,time:h},downRight:{...L,time:p}}}case J.TextNote:{const{curve:w,start:N,end:L,...P}=e;return{...P,color:Rr(e.curve.color),position:{...N,time:h}}}case J.Channel:return{...e,start:{...e.start,time:h},end:{...e.end,time:p},curve:{...e.curve,color:Rr(e.curve.color)},channelCurves:e.channelCurves.map(w=>({...w,color:Rr(e.curve.color)}))}}},jP=(e,t,s,n,r,o,i)=>{const{slope:l,range:c}=t,d=s&&{...s,start:{value:n.value,time:n.time}},[u,h]=[e.start,e.end].sort((w,N)=>w.time-N.time),[p,m]=[c.start,c.end].sort((w,N)=>w.time-N.time),g=d.start.value<i.chartTopValue||d.start.value>i.chartBottomValue||d.start.time>0||d.start.time<i.chartWidthIndex,S=p.value>i.chartTopValue||p.value<i.chartBottomValue||p.time<0||p.time>i.chartWidthIndex,T=m.value>i.chartTopValue||m.value<i.chartBottomValue||m.time<0||m.time>i.chartWidthIndex,y={...e,start:n.time<p.time?{time:n.time,value:u.value-(u.time-d.start.time)*l}:u,end:n.time>m.time?{time:n.time,value:h.value-(h.time-d.start.time)*l}:h,height:e.height+(n.value-s.start.value)-(n.time-s.start.time)*l},b={...o,start:y.end},E={...r,start:y.start},v=y.start.value,D=y.end.value;return!(g&&S&&T)&&(S&&(D>i.chartTopValue||D<i.chartBottomValue||d.start.time<p.time)||T&&(v>i.chartTopValue||v<i.chartBottomValue||d.start.time>m.time)||!S&&!T&&(v>i.chartTopValue||v<i.chartBottomValue||D>i.chartTopValue||D<i.chartBottomValue))?{updatedDrawing:e,updatedDrawingStartControl:r,updatedDrawingEndControl:o,updatedHeightControl:s}:{updatedDrawing:y,updatedDrawingStartControl:E,updatedDrawingEndControl:b,updatedHeightControl:d}},$ke=(e,t,s,n,r,o,i)=>{const l={...t,start:s},c={...e,start:s};let d=n;if(n&&e.type===J.Channel){const p=s.value+e.height;d=p>i.chartTopValue||p<i.chartBottomValue?{...n,start:{...c.end,value:c.end.value+e.height}}:{...n,start:{...s,value:s.value+e.height}}}const u={...r,start:s},h={...o};return s.value>i.chartTopValue||s.value<i.chartBottomValue?{updatedDrawing:e,updatedDrawingStartControl:t,updatedHeightControl:n,updatedExpansionControlStart:r,updatedExpansionControlEnd:o}:{updatedDrawing:c,updatedDrawingStartControl:l,updatedHeightControl:d,updatedExpansionControlStart:u,updatedExpansionControlEnd:h}},jke=(e,t,s,n,r,o,i)=>{const l={...t,start:s};let c=n;if(n&&e.type===J.Channel){const p=s.value+e.height;c=p>i.chartTopValue||p<i.chartBottomValue?{...n,start:{...e.start,value:e.start.value+e.height}}:{...n,start:{...s,value:s.value+e.height}}}const d={...r},u={...o,start:s},h={...e,end:s};return s.value>i.chartTopValue||s.value<i.chartBottomValue?{updatedDrawing:e,updatedDrawingEndControl:t,updatedHeightControl:n,updatedExpansionControlStart:r,updatedExpansionControlEnd:o}:{updatedDrawing:h,updatedDrawingEndControl:l,updatedHeightControl:c,updatedExpansionControlStart:d,updatedExpansionControlEnd:u}},Bke=(e,t,s,n,r,o)=>{const i={...t,start:s},l={...e,middle:s},c={...n,start:s},d={...r,start:s};return s.value>o.chartTopValue||s.value<o.chartBottomValue?{updatedDrawing:e,updatedDrawingMiddleControl:t,updatedExpansionControlStart:n,updatedExpansionControlEnd:r}:{updatedDrawing:l,updatedDrawingMiddleControl:i,updatedExpansionControlStart:c,updatedExpansionControlEnd:d}},Fke=(e,t,s,n,r,o,i,l,c,d)=>(u,h,p,m,g)=>{let S=t,T=s,y=n,b=r,E=o,v=i,D=d;if(m!==void 0)switch(e){case Tt.start:{T={...s,start:u},y={...n,start:{...n.start,[m]:u[m]}},b={...r,start:u},E={...o,start:{...o.start,[m]:u[m]}},S={...t,start:u,end:{...t.end,[m]:h[m]}};break}case Tt.end:{T={...s,start:{...s.start,[m]:h[m]}},y={...n,start:h},b={...r,start:{...r.start,[m]:h[m]}},E={...o,start:h},S={...t,start:{...t.start,[m]:u[m]},end:h};break}case Rn.middle:{g&&t.type===J.FibonacciExtensions&&d&&(T={...s,start:{...s.start,[m]:g[m]}},D={...d,start:g},b={...r,start:{...r.start,[m]:g[m]}},E={...o,start:g},S={...t,start:{...t.start,[m]:u[m]},middle:g,end:{...t.end,[m]:h[m]}});break}default:{T={...s,start:u},y={...n,start:h},b={...r,start:u},E={...o,start:h},D=d&&g?{...d,start:g}:void 0,S={...t,start:u,end:h,...g?{middle:g}:{}};break}}else switch(e){case Tt.start:{const w=$ke(t,s,u,i,r,o,c);S=w.updatedDrawing,T=w.updatedDrawingStartControl,v=w.updatedHeightControl,b=w.updatedExpansionControlStart,E=w.updatedExpansionControlEnd;break}case Tt.end:{const w=jke(t,n,h,i,r,o,c);S=w.updatedDrawing,y=w.updatedDrawingEndControl,v=w.updatedHeightControl,b=w.updatedExpansionControlStart,E=w.updatedExpansionControlEnd;break}case Rn.middle:{if(d&&g&&t.type===J.FibonacciExtensions){const w=Bke(t,d,g,r,o,c);S=w.updatedDrawing,D=w.updatedDrawingMiddleControl,b=w.updatedExpansionControlStart,E=w.updatedExpansionControlEnd}break}case $n.height:{if(t.type===J.Channel&&p!==void 0&&l!==void 0){const w=jP(t,l,i,p,s,n,c);v=w.updatedHeightControl,S=w.updatedDrawing,T=w.updatedDrawingStartControl,y=w.updatedDrawingEndControl}break}default:{T={...s,start:u},y={...n,start:h},D=g&&d?{...d,start:g}:void 0,v=i&&t.type===J.Channel?{...i,start:{...u,value:u.value+t.height}}:i,b={...r,start:u},E={...o,start:h},S={...t,start:u,end:h,...g?{middle:g}:{}};break}}return{updatedDrawing:S,updatedDrawingStart:T,updatedDrawingEnd:y,updatedExpansionControlStart:b,updatedExpansionControlEnd:E,updatedHeightControl:v,updatedDrawingMiddle:D}},Hke=(e,t,s)=>{if(t in Tt)return{type:mr.EndPoint,guid:Tt[t],drawingGuid:e.guid,start:e[t],width:e.curve.width||1};if(t in xs){const n=e.start.time<e.end.time||e.start.time===e.end.time&&e.start.value<e.end.value,r=n?xs.expansionStart:xs.expansionEnd,o=n?xs.expansionEnd:xs.expansionStart,i=t===xs.expansionStart?r:o,l=t===xs.expansionStart?"start":"end";return{type:mr.ExpansionControl,guid:i,drawingGuid:e.guid,start:e[l],width:e.curve.width||1}}else if(t in $n&&e.type===J.Channel){const n=e.start.value+e.height<s.chartTopValue&&e.start.value+e.height>s.chartBottomValue,r=e.start.value>s.chartTopValue||e.start.value<s.chartBottomValue||e.start.time<0||e.start.time>s.chartWidthIndex,o=!r&&n?e.start.time:e.end.time,i=!r&&n?e.start.value+e.height:e.end.value+e.height,l={time:o,value:i};return{type:mr.HeightControl,guid:$n.height,drawingGuid:e.guid,start:l,width:e.curve.width||1}}else if(t in Rn&&e.type===J.FibonacciExtensions)return{type:mr.MiddlePoint,guid:Rn[t],drawingGuid:e.guid,start:e[t],width:e.curve.width||1}},Uke=(e,t,s,n,r,o,i)=>{const l=Ake(o,s),c={drawingToColor:{...n,...l.drawingToColor},colorToDrawing:{...r,...l.colorToDrawing}},d=e.get(t);if(d!==void 0)return{controls:o.reduce((h,p)=>{const m=Hke(d,p,i);return m!==void 0?h.set(p,m):h},ke()),drawingsHoverColors:c}},Fv=is((e,t,s)=>e.invert(t)*s),hd=(e,t,s)=>t.reduce((n,r,o)=>n.set(o,{...r,curve:{...r.curve,color:{...r.curve.color,a:e===r.guid?r.curve.color.a:r.curve.color.a+s}}}),ke()),Hv=(e,t,s)=>t.reduce((n,r,o)=>n.set(o,{...r,curve:{...r.curve,color:{...r.curve.color,a:e===r.guid?r.curve.color.a:r.curve.color.a-s}}}),ke()),BP=(e,t,s)=>{let n=ne.LIMIT;if(s){const r=e===pe.Buy&&t>s,o=e===pe.Sell&&t<s;(r||o)&&(n=ne.STOP)}return n},Uv=(e,t)=>{const s=e%t;return s>0?t/2<s?e+(t-s):e-s:e},Vke=(e,t)=>(s,n,r,o)=>{const i=Math.abs(r-s),l=Math.abs(o-n);return{widthLTMinWidth:i<e,heightLTMinHeight:l<t}},Vv=(e,t)=>!t||e>=t?em.AT_OR_ABOVE:em.AT_OR_BELOW,Wv=(e,t,s,n,r,o)=>{let i=e;const l=s(i.start.time),c=s(i.end.time),d=n(i.start.value),u=n(i.end.value),{widthLTMinWidth:h,heightLTMinHeight:p}=Vke(r,o)(l,d,c,u);return h&&(t===Tt.start?i={...i,start:{...i.start,time:s.invert(c+r*(l<=c?-1:1))}}:t===Tt.end&&(i={...i,end:{...i.end,time:s.invert(l+r*(l<=c?1:-1))}})),p&&(t==="start"?i={...i,start:{...i.start,value:n.invert(u+o*(d<=u?-1:1))}}:t==="end"&&(i={...i,end:{...i.end,value:n.invert(d+o*(d<=u?1:-1))}})),i},Gv=e=>Math.abs(e(0)-e(1)),Pl=(e,t,s,n)=>{const r={color:e,editModeHoverColor:GR,editModeColor:Sy};return t?r.editModeColor:s&&n?r.editModeHoverColor:r.color},Ts=10,Wke=(e,t,s)=>{switch(s){case nn.RIGHT:return{point1:{x:e,y:t},point2:{x:e-Ts,y:t+Ts},point3:{x:e-Ts,y:t-Ts}};case nn.TOP:return{point1:{x:e,y:t},point2:{x:e-Ts,y:t-Ts},point3:{x:e+Ts,y:t-Ts}};case nn.BOTTOM:return{point1:{x:e,y:t},point2:{x:e-Ts,y:t+Ts},point3:{x:e+Ts,y:t+Ts}};case nn.LEFT:default:return{point1:{x:e,y:t},point2:{x:e+Ts,y:t+Ts},point3:{x:e+Ts,y:t-Ts}}}},$h=15,FP=(e,t,s,n,r)=>{if(!n)return{x:e,y:t};switch(s){case nn.LEFT:return{x:e+$h,y:t-Ts/2};case nn.RIGHT:return{x:e-$h,y:t-Ts/2};case nn.TOP:return{x:e,y:t-($h*r+Ts)};case nn.BOTTOM:return{x:e,y:t+$h};default:return{x:e,y:t}}},Gke=(e,t,s,n)=>{switch(s){case Eo.Center:return{x:e-n/2,y:t-Ts/2};case Eo.Right:return{x:e-n,y:t-Ts/2};case Eo.Left:default:return{x:e-Ts/2,y:t-Ts/2}}},Yke=(e,t,s,n)=>{switch(n){case Eo.Center:return{x:e.x+t,y:e.y+s+Ts/2};case Eo.Right:return{x:e.x+t+Ts/2,y:e.y+s+Ts/2};case Eo.Left:default:return{x:e.x+t+Ts/2,y:e.y+s+Ts/2}}},Yv=(e,t,s,n,r)=>{let o;e.type==="earning"&&e.overlapWithDividend&&r?o=s-Gue:e.type==="dividend"&&e.overlapWithEarning&&r?o=s-Yue:o=s-que;const i=kT(e,n,t);if(i===void 0)return{iconStartX:i,iconStartY:o};const l={start:{x:i+1,y:o+1},end:{x:i+aE,y:o+aE}};return{iconStartX:i,iconStartY:o,hoverDetectArea:l}},qv=e=>{if(e===void 0)return!1;switch(e.type){case J.TextNote:return e.text.replace(/\s/g,"")!=="";default:return!0}},wd=e=>(t,s)=>{const n=t.find(r=>r.find(o=>`${o.id.toString()}${e}`===s)!==void 0);return n===void 0?[]:n},qke=is((e,t,s,n)=>e.reduce((r,o)=>{switch(o.type){case J.Rectangle:case J.TextNote:case J.FibonacciRetracements:case J.Channel:case J.Trendline:{const{start:i,end:l}=o,c=new Date(i.time),d=new Date(l.time);if(c===void 0||d===void 0)return r;const u={x:c.getTime(),y:i.value},h={x:d.getTime(),y:l.value},{pointAIndex:p,pointBIndex:m}=Mh(u,h,c,d,t,s);return r.set(o.guid,{...o,start:{...o.start,time:p},end:{...o.end,time:p===m&&i.value===l.value?m+1:m}})}case J.FibonacciExtensions:{const{start:i,end:l,middle:c}=o,d=new Date(i.time),u=new Date(l.time),h=new Date(c.time);if(d===void 0||u===void 0||h===void 0)return r;const p={x:d.getTime(),y:i.value},m={x:h.getTime(),y:c.value},g={x:u.getTime(),y:l.value},{pointAIndex:S,pointBIndex:T}=Mh(p,m,d,u,t,s),{pointBIndex:y}=Mh(m,g,d,h,t,s);return r.set(o.guid,{...o,start:{...o.start,time:S},middle:{...o.middle,time:S===T&&i.value===c.value?T+1:T},end:{...o.end,time:T===y&&c.value===l.value?y+1:y}})}case J.TimeLevel:{const i=t==null?void 0:t.map(g=>g.getTime()),{start:l}=o,c=new Date(l.time);if(c===void 0)return r;const d={x:c.getTime(),y:l.value};if(!aT(d.x,i))return r;const h=i.findIndex(g=>g===ul(d.x,i)),p=o.start.value,m=o.end.value;return r.set(o.guid,{...o,start:{value:p===m&&o.topExtended?p-n:p,time:h},end:{value:p===m&&o.bottomExtended?m+n:m,time:h}})}case J.PriceLevel:{const{start:i,end:l}=o,c=new Date(i.time),d=new Date(l.time);if(c===void 0||d===void 0)return r;const u={x:c.getTime(),y:i.value},h={x:d.getTime(),y:i.value},{pointAIndex:p,pointBIndex:m}=Mh(u,h,c,d,t,s);return r.set(o.guid,{...o,start:{...o.start,time:p},end:{...o.end,time:p===m?m+1:m}})}default:return r}},ke()),cs.isEqual),Kv=(e,t,s)=>{const{start:n,end:r}=e,o=new Date(n.time),i=new Date(r.time),l=o.getTime()>=t.getTime()&&o.getTime()<=Mb(s,12).getTime(),c=i.getTime()>=t.getTime()&&i.getTime()<=Mb(s,12).getTime();return l||c},Kke=is((e,t)=>e.filter(zke(t)),cs.isEqual),zke=e=>t=>{const{startTime:s,endTime:n}=e;switch(t.type){case J.FibonacciExtensions:case J.Rectangle:case J.TimeLevel:return Kv(t,s,n);case J.FibonacciRetracements:case J.Channel:case J.PriceLevel:case J.Trendline:return Kv(t,s,n)||t.rightExtended;case J.TextNote:{const{start:r}=t,o=new Date(r.time);return o.getTime()>=s.getTime()&&o.getTime()<=n.getTime()}default:return!1}},Xke=e=>{const t=e.estimatedEps?`${su.format(e.estimatedEps)} ${__("(est)")} `:"",s=e.actualEps?`${su.format(e.actualEps)} ␟${__("(actual)")} `:"␟",n=e.time?`${__("on")} ␟${xm(e.time)} `:"␟",r=HP(e.estimatedTime);return`${__("Earnings")}: ␟${t}␟${s}${n}${r}`},Qke=e=>{const t=e.amount?`${su.format(e.amount)} `:"",s=e.exDividendDate?`${__("on")} ␟${ti(e.exDividendDate)}`:"";return`${__("Dividends")}: ␟${t}${s}`},Zke=e=>{const t=e.time?`${ti(e.time)} `:"",s=HP(e.estimatedTime);return`${__("Earnings")}: ␟${t}${s}`},Jke=e=>{const t=e.exDividendDate?`${ti(e.exDividendDate)}`:"";return`${__("Dividends")}: ␟${t}`},HP=e=>{switch(e){case lo.BEFORE_MARKET:return`${__("Before Market")}`;case lo.DURING_MARKET:return`${__("During Market")}`;case lo.AFTER_MARKET:return`${__("After Market")}`;default:return""}},dm=e=>e.split("␟"),um=(e,t,s,n)=>t||s||n?e.slice(1).join(""):e[e.length-1],zv=(e,t)=>{if(e){if(os(e))return e[t];if(!os(e)&&isNaN(e))return e}},eMe=e=>{const t={x:0,y:Number.NEGATIVE_INFINITY},s={x:0,y:Number.POSITIVE_INFINITY};return e.forEach((n,r)=>{const o=zv(n.y,"low"),i=zv(n.y,"high");o&&o<s.y&&(s.x=r,s.y=o),i&&i>t.y&&(t.x=r,t.y=i)}),{low:s,high:t,length:e.length}},UP=(e,t)=>{switch(e){case xt.TODAY:case xt.DAY1:return{dateFormat:"h:mmA",internationalDateFormat:"H:mm"};case xt.DAY3:case xt.DAY5:switch(t){case ie.MIN1:case ie.MIN5:case ie.MIN10:case ie.MIN15:case ie.MIN30:return{dateFormat:"MMM D, h:mmA",internationalDateFormat:"MMM D H:mm"};default:return{dateFormat:"MMM D, hA",internationalDateFormat:"MMM D H[h]"}}case xt.DAY10:case xt.DAY20:return{dateFormat:"MMM D, hA",internationalDateFormat:"MMM D H[h]"};case xt.MONTH3:case xt.MONTH6:return{dateFormat:"MMM D",internationalDateFormat:"MMM D"};case xt.YTD:switch(t){case ie.MONTH:return{dateFormat:"MMM",internationalDateFormat:"MMM"};default:return{dateFormat:"MMM D",internationalDateFormat:"MMM D"}}case xt.YEAR1:switch(t){case ie.MONTH:return{dateFormat:"MMM, YYYY",internationalDateFormat:"MMM, YYYY"};default:return{dateFormat:"MMM D, YYYY",internationalDateFormat:"MMM D, YYYY"}}case xt.YEAR3:switch(t){case ie.DAY:case ie.WEEK:return{dateFormat:"MMM D, YYYY",internationalDateFormat:"MMM D, YYYY"};default:return{dateFormat:"MMM, YYYY",internationalDateFormat:"MMM, YYYY"}}case xt.YEAR5:switch(t){case ie.WEEK:return{dateFormat:"MMM D, YYYY",internationalDateFormat:"MMM D, YYYY"};default:return{dateFormat:"MMM, YYYY",internationalDateFormat:"MMM, YYYY"}}case xt.YEAR15:case xt.MAX:default:return{dateFormat:"MMM, YYYY",internationalDateFormat:"MMM, YYYY"}}},tMe=(e,t,s,n)=>{var T,y,b,E,v,D,w,N;const r=[];t=t||[],e=e||[];let o=-1;const i=((T=s==null?void 0:s.time)==null?void 0:T.getTime())??0,l=((y=new Date(i))==null?void 0:y.setUTCHours(0,0,0))||!1,c=((b=n==null?void 0:n.exDividendDate)==null?void 0:b.getTime())??0,d=new Date(c).setUTCHours(0,0,0)||!1;s&&!n?g(s,!1,e[0]):n&&!s?S(n,!1,t[0]):l>=d?(g(s,!1,e[0]),S(n,!1,t[0])):d>l&&(S(n,!1,t[0]),g(s,!1,e[0]));let u=0,h=0,p=0;const m=e.length+t.length;for(;p<m;){const L=((v=(E=e[u])==null?void 0:E.time)==null?void 0:v.getTime())??0,P=((D=new Date(L))==null?void 0:D.setUTCHours(0,0,0))||!1,F=((N=(w=t[h])==null?void 0:w.exDividendDate)==null?void 0:N.getTime())??0,O=new Date(F).setUTCHours(0,0,0)||!1;P&&!O?g(e[u],!0):O&&!P?S(t[h],!0):P>=O?g(e[u],!0):O>P&&S(t[h],!0)}function g(L,P,F){var q,W,z,re;if(L===void 0||P===void 0)return;const O=((q=L==null?void 0:L.time)==null?void 0:q.getTime())??0,H=((W=new Date(O))==null?void 0:W.setUTCHours(0,0,0))||!1,C=((z=F==null?void 0:F.time)==null?void 0:z.getTime())??0,M=((re=new Date(C))==null?void 0:re.setUTCHours(0,0,0))||!1;if(P||H!==M){o++;const ae={type:"earning",event:L,overlapWithEarning:!1,overlapWithDividend:!1,stackWithOtherEvent:void 0,isHistorical:P,listIndex:o};P&&(u++,p++),r.push(ae)}}function S(L,P,F){var q,W,z,re;if(L===void 0||P===void 0)return;const O=((q=L==null?void 0:L.exDividendDate)==null?void 0:q.getTime())??0,H=((W=new Date(O))==null?void 0:W.setUTCHours(0,0,0))||!1,C=((z=F==null?void 0:F.exDividendDate)==null?void 0:z.getTime())??0,M=((re=new Date(C))==null?void 0:re.setUTCHours(0,0,0))||!1;if(P||H!==M){o++;const ae={type:"dividend",event:L,overlapWithEarning:!1,overlapWithDividend:!1,stackWithOtherEvent:void 0,isHistorical:P,listIndex:o};P&&(h++,p++),r.push(ae)}}return r},jh=e=>e?wt.WHITE:wt.BLACK,VP=(e,t)=>e?t?oe.TART_ORANGE:oe.GREEN_CORE:t?oe.RED_ROJA:oe.GREEN_VERDE,WP=(e,t)=>e?t?oe.GREEN_CORE:oe.TART_ORANGE:t?oe.GREEN_VERDE:oe.RED_ROJA,Bg=e=>{var c,d,u,h;const t=(c=document.getElementById(`price-chart-canvas-${e}`))==null?void 0:c.getBoundingClientRect(),s=(d=document.getElementById(`charts-wrapper-${e}`))==null?void 0:d.getBoundingClientRect(),n=((t==null?void 0:t.y)??0)-((s==null?void 0:s.y)??0),r=((h=(u=document.getElementById(`price-chart-wrapper-${e}`))==null?void 0:u.getBoundingClientRect())==null?void 0:h.height)??0,o=(s==null?void 0:s.width)??0,i=(s==null?void 0:s.height)??0;return{topOffset:n,studiesHeight:r,chartsWidth:o,chartsHeight:i}},sMe=is((e,t)=>e.filter(s=>s.id!==t)),nMe=(e,t)=>{if(!t)return;const s=e.get(t);if(s)switch(s.type){case J.TextNote:return s.showArrow?s.align:PC.OFF;default:return}},rMe=(e,t)=>{if(!t)return;const s=e.get(t);if(!(!s||s.type!==J.TextNote))return s.text},oMe=is((e,t)=>Te("d3candle-chart__container",e&&"d3candle-chart__container--dragged",t&&"d3candle-chart__container--create-drawing")),ma=is((e,t,s)=>{const n=fe,r=UP(t,s),o=e!==void 0?{pointer:{...n.pointer,pillColor:e[Ft.SELECTED],lineColor:e[Ft.PRIMARY_BTN]},chart:{...n.chart,sellColor:e[Ft.SELL],buyColor:e[Ft.BUY],gridColor:e[Ft.DISABLED],axisLabelTextColor:e[Ft.DISABLED],volumeColor:e[Ft.PAGE_BACKGROUND]},optionPill:{...n.optionPill,pillTextColor:e[Ft.DISABLED],sellColor:e[Ft.SELL],buyColor:e[Ft.BUY],pillBackColor:e[Ft.ELEMENT_BACKGROUND]}}:{};return{...n,...o,xAxisLabelFormat:__("__locale")==="__locale"?r.dateFormat:r.internationalDateFormat}}),aMe=A.div`
  position: relative;
`,Ba=fe.DPR;class iMe extends j.PureComponent{constructor(){super(...arguments);R(this,"sparkChartRef",B.createRef());R(this,"renderChartUsingRef",()=>{const s=this.props;s.renderChart(s,this.sparkChartRef.current,null)});R(this,"handleChartScaleAndResizeBasedOnDpr",()=>{const{width:s,height:n}=this.props,r=this.sparkChartRef.current,o=r?qs(r):void 0;r&&o&&(o.setTransform(Ba,0,0,Ba,0,0),r.style.width=`${s/Ba}px`,r.style.height=`${n/Ba}px`)})}componentDidUpdate(s){const n=this.props;(n.width!==s.width||n.height!==s.height)&&this.handleChartScaleAndResizeBasedOnDpr(),this.renderChartUsingRef()}componentDidMount(){this.renderChartUsingRef(),this.handleChartScaleAndResizeBasedOnDpr()}render(){const s=this.props,n=s.width,r=s.height;return a.jsx(aMe,{style:{width:`${n/Ba}px`,height:`${r/Ba}px`},children:a.jsx(cMe,{width:n*Ba,height:r*Ba,sparkChartRef:this.sparkChartRef})})}}const lMe=e=>{const{width:t,height:s,sparkChartRef:n}=e;return a.jsx("canvas",{width:t,height:s,ref:n,className:"d3-chart","data-testid":"d3-spark-chart"})},cMe=j.memo(lMe),dMe=e=>t=>{const s=zu(e);if(s===void 0)return t;const o=s.map(i=>{const l=[];return i.plots.forEach(c=>l.push(c)),l}).reduce((i,l)=>i.concat(l),[]).map(i=>{const l=i.values,c=R_e(e),d=C_e(e),u=b_e(e),{markChange:h}=e;let p=d;h&&Math.sign(h)===1&&(p=u);let m=oe.GREEN_VERDE;return p===oe.GREEN_VERDE?m=oe.MAY_GREEN:p===oe.GREEN_CORE?m=oe.GREEN_VERDE:p===oe.RED_ROJA?m=oe.ORANGE_RED_CRAYOLA:p===oe.TART_ORANGE&&(m=oe.RED_ROJA),hMe(l,c,p,m,e)});return as(o)(t)},uMe=(e,t,s,n,r,o)=>i=>{const l=oP(o),c=rP(o),d=e.length;let u=null,h=null,p=null;e.length>2&&(u=os(e[0].y)?e[0].y.open:e[0].y,h=e[d-1].y,p=os(h)?h.close:h,u!==null&&u>0&&p!==null&&p>0&&d>=3?_o(l(d-1),c(p),6,n)(i):u!==null&&u>0&&p===null&&d>=1&&(p=os(e[0].y)?e[0].y.close:e[0].y,p!==null&&p>0&&_o(l(0),c(p),6,n)(i))),i.save(),i.beginPath(),i.strokeStyle=s,i.lineWidth=r||fe.DPR,t.context(i)(e),i.stroke(),i.restore()},hMe=(e,t,s,n,r)=>o=>(uMe(e,t,s,n,Zm,r)(o),o),pMe=(e,t)=>{if(t===null)return null;const s=e.theme==="LIGHT"?oe.GRAY_NICKEL:oe.OFF_BLACK,n=aP(e.width,e.height,!0,s),r=dMe(e),o=xi(e),i=qs(t);if(i){const l=o([i]),c=Xu(pt.left,pt.top)(l);n(c);const d=n(i);Sc(d),r(i)}return i},mMe=is(pMe);class gMe extends j.Component{constructor(s){super(s);R(this,"containerRef",B.createRef());this.state={candle:void 0}}shouldComponentUpdate(s,n){return!cs.isEqual(this.props,s)||!cs.isEqual(this.state,n)}render(){const s=this.props,n=ma(s.themeColors,s.range,s.aggregation),r=s.symbol?`${Ns(s.symbol)} ${__("Chart Detail")}`:__("Chart Detail");return a.jsxs("div",{"data-testid":"spark-chart",tabIndex:0,"aria-label":r,children:[a.jsx(vt,{children:a.jsx(EP,{dateFormat:n.xAxisLabelFormat,studies:s.studies??[]})}),a.jsx("div",{id:"spark-chart-canvas",ref:this.containerRef,className:"sparkChartContainer",children:a.jsx(vt,{children:a.jsx(iMe,{theme:s.theme,width:s.width,height:s.height,studies:s.studies,markChange:s.markChange,range:s.range,settings:n,studiesParams:s.studiesParams,renderChart:mMe})})})]})}}const SMe=e=>{const t=({...s})=>{const[r]=j.useState({width:63*fe.DPR,height:63*fe.DPR});return a.jsx(e,{...s,width:r.width,height:r.height})};return t.displayName=`withChartDimensions(${e.displayName||e.name||"Component"})`,t},fMe=SMe(hn(gMe));let Xv,Qv;const TMe=(e,{chartId:t})=>{const s=Hm(t),n=x(s,l=>l==null?void 0:l.newCandles),r=x(s,l=>l==null?void 0:l.studies),o=x(s,l=>(l==null?void 0:l.studiesParams.map(c=>({...c,plotParameters:c.plotParameters})))??Yt());Xv=x(r,o,n,s,(l,c,d,u)=>{if(c===void 0||u===void 0)return;const h=l?[...l]:[];return d!==void 0&&h.unshift(d),h.length>0?h:void 0}),Qv=l=>x(Xv,c=>{const d=c?[...c]:[];return d.length>0?d:void 0});const i=Qv(t);return l=>({studies:i(l),studiesParams:o(l)})},yMe=se(TMe)(fMe),CMe=({symbol:e,index:t,trendingMark:s,markChange:n,markPercentChange:r})=>{const o=j.useMemo(()=>`${__("Mark Change")} ${n!==void 0?xr(n):""} (${r!==void 0?gr(r):""})`,[n,r]);return a.jsx(a.Fragment,{children:s&&s.value?a.jsxs(DDe,{"data-testid":"quote-monitor",children:[a.jsx(yMe,{chartId:`${zn}-${t}`,symbol:e,range:xt.TODAY,aggregation:ie.MIN1,markChange:n}),a.jsxs(_De,{"data-testid":`quote-ticker-${e}`,children:[a.jsxs(NDe,{"data-testid":"quote-symbol",children:[a.jsxs("span",{children:[e," "]}),a.jsx("span",{"aria-label":`${__("Mark")}`,children:a.jsx(ci,{value:s.value,trend:s.trend,renderer:ur})})]}),a.jsxs("span",{"data-testid":"quote-change",children:[n&&a.jsx(X,{type:PDe(n),width:16,height:12,viewBox:"6 7 16 8",dataTestId:"performance-icon"}),a.jsx("span",{"data-testid":"mark-change","aria-label":o,children:a.jsxs(NN,{value:n,children:[a.jsx(PN,{value:Number(ur(n)),fractionalType:Bs.x10,showFractionalPricing:!1,showDoubleTickForFractionalPricing:!1})," ","(",a.jsx(NC,{value:r}),")"]})})]})]})]}):null})},bMe=(e,{symbol:t})=>{const{trendingMark:s,markChange:n,markPercentChange:r}=xg(e,t)??{};return{trendingMark:s,markChange:n,markPercentChange:r}},EMe=se(bMe)(CMe),AMe=(e,t)=>e.sort((s,n)=>{if(s===null&&n===null)return 0;if(s===null&&n!==null)return t.desc?1:-1;if(s!==null&&n===null)return t.desc?-1:1;const r=s==null?void 0:s[t.id],o=n==null?void 0:n[t.id];let i=r&&r.hasOwnProperty("value")?r.value:r,l=o&&o.hasOwnProperty("value")?o.value:o;return i=typeof i=="string"?i.toLowerCase():i,l=typeof l=="string"?l.toLowerCase():l,i===void 0&&l!==void 0||i<l?t.desc?1:-1:i!==void 0&&l===void 0||i>l?t.desc?-1:1:0}),GP=e=>t=>t.get(e),Qu=e=>({expiration:e==null?void 0:e.expiration,daysToExpiration:e==null?void 0:e.daysToExpiration,description:e==null?void 0:e.description,instrumentType:e==null?void 0:e.type,tradeable:e==null?void 0:e.tradeable,composite:e==null?void 0:e.composite,displaySymbol:e==null?void 0:e.displaySymbol,activeSymbol:(e==null?void 0:e.type)===k.PRODUCT?e.activeSymbol:void 0}),vMe=(e,t,s,n,r)=>{const o=t.reduce((i,l)=>(l.rootSymbol&&(i[l.rootSymbol]=l),i),{});return e.map(i=>{const l=GP(i)(s),c=Qu(l),d=n.get(i),u=r.get(i);return{...o[i]??{rootSymbol:i,composite:void 0,daysToExpiration:void 0,expiration:void 0,instrumentType:void 0,tradeable:void 0},...c,payableDate:d,upcomingEarningDate:u}})},Za=(e,t,s)=>{const n=t.reduce((r,o)=>(o.rootSymbol&&(r[o.rootSymbol]=o),r),{});return e.map(r=>{const o=GP(r)(s),i=Qu(o);return{...n[r]??{rootSymbol:r,composite:void 0,daysToExpiration:void 0,expiration:void 0,instrumentType:void 0,tradeable:void 0},...i}})},ol=(e,t,s)=>{let n=s;return t!==null&&(n=AMe(e,t).map(o=>o.rootSymbol)),n},oi=(e,t)=>e.length===t.length&&fs(e,t),hm=(e,t)=>`You have dropped the task. It has moved from position ${e} to ${t}`,pm=(e,t)=>`Movement cancelled. ${t} has returned to its starting position of ${e}`,IMe=()=>"You have dropped the task. It has been removed from the list",xMe=(e,t)=>{const s=new Set(t);return e.some(n=>s.has(n))},eb=[V.LAST,V.LOW,V.HIGH,V.LOW52,V.HIGH52,V.MARK,V.BID,V.ASK],wMe=[...eb,V.MARK_PERCENT_CHANGE,V.MARK_CHANGE,V.MARKET_CAP,V.MARKET_MAKER_MOVE,V.IMPLIED_VOLATILITY,V.PERCENTILE_IV,V.CLOSE,V.PUT_CALL_RATIO,V.SHORT_SALE_BORROWING_RATE,V.DIV_AMOUNT,V.OPEN_INT,"payableDate","daysToExpiration","upcomingEarningDate","expiration"],KS=e=>e==="rootSymbol"?__("Symbol"):wMe.includes(e)?e===V.CLOSE?__(Lf(e),{namespace:"Alerts"}):__(Lf(e)):lC(__(en[e].title)),YP=(e,t,s)=>{if(t!=="rootSymbol"&&t!=="symbol"){if(!e.tradeable&&!e.markChange&&t==="markChange")return e.netChange;if(t==="description")return s==null?void 0:s.description;if(!e.tradeable&&!e.markPercentChange&&t==="markPercentChange")return e.netChangePercent;if(eb.includes(t)){const r=`${t.toLocaleUpperCase()}_TREND`,o=V[r];return e[o]}else return e[t]}},Zv=1e3,OMe=({symbols:e,quotesReceived:t,isConnected:s,setSparkChart:n,unsubscribeFromSparkChart:r})=>{const o=Uu(),i=un(s),l=un(e),c=e.map((p,m)=>({symbol:p,index:m+1})),d=()=>{sl(ts.request)({requestId:"sparkChartQuotes",symbols:e,refreshRate:300,fields:[ze.MARK,ze.MARK_CHANGE,ze.MARK_PERCENT_CHANGE],callback:t})},u=()=>{c.forEach(p=>{n(`${zn}-${p.index}`,p.symbol)})};Cn(()=>{d()}),B.useEffect(()=>{oi(e,l??[])||u()},[e]),B.useEffect(()=>{o&&s&&i!==s&&(d(),u())},[s]),Cn(()=>()=>{Ks(ts.request)("sparkChartQuotes",te.QUOTES),c.forEach(p=>{r(`${zn}-${p.index}`)})});const h=p=>a.jsx(EMe,{symbol:p.symbol,index:p.index});return a.jsx(a.Fragment,{children:e&&e.length>0?a.jsx("div",{"data-testid":"quote-monitor-wrapper",className:"slider-container",children:a.jsx(G5,{value:c,itemTemplate:h,numVisible:1,numScroll:1,autoplayInterval:5e3,orientation:"vertical",verticalViewPortHeight:"64px",showIndicators:!1,showNavigators:!1})}):null})},RMe=e=>({isConnected:Ol(e)}),DMe=e=>({quotesReceived:t=>e(vD(t)),setSparkChart:(t,s)=>e(bue(t,s)),unsubscribeFromSparkChart:t=>e(Eue(t))}),LMe=se(RMe,DMe)(OMe),_Me=e=>({type:f.ToggleMarketBell,isMarketBellEnabled:e}),NMe=e=>({type:f.ToggleAlertTriggeredBell,isAlertTriggeredBellEnabled:e}),PMe=e=>({type:f.ToggleOrderRejectedBell,isOrderRejectedBellEnabled:e}),kMe=e=>({type:f.ToggleTradeFilledBell,isTradeFilledBellEnabled:e}),MMe=e=>({type:f.MuteAllNotifications,isMuteAllChecked:e}),$Me=[!1,!0],jMe=({isAlertTriggeredBellEnabled:e,isMuteAllChecked:t,toggleAlertTriggeredBell:s})=>a.jsx(Rl,{ariaLabel:"Alert Triggered Bell Toggle",className:"alert-triggered-bell-toggle",leftValue:"off",rightValue:"on",value:e,name:"alert-triggered-bell-selector",onToggle:()=>s(!e),disable:t,label:()=>"",children:$Me}),BMe=e=>({isAlertTriggeredBellEnabled:e.audioNotifications.isAlertTriggeredBellEnabled,isMuteAllChecked:e.audioNotifications.isMuteAllChecked}),FMe={toggleAlertTriggeredBell:NMe},HMe=se(BMe,FMe)(jMe),UMe=[!1,!0],VMe=({isOrderRejectedBellEnabled:e,isMuteAllChecked:t,toggleOrderRejectedBell:s})=>a.jsx(Rl,{ariaLabel:"Order Rejected Bell Toggle",className:"order-rejected-bell-toggle",leftValue:"off",rightValue:"on",value:e,name:"order-rejected-bell-selector",onToggle:()=>s(!e),disable:t,label:()=>"",children:UMe}),WMe=e=>({isOrderRejectedBellEnabled:e.audioNotifications.isOrderRejectedBellEnabled,isMuteAllChecked:e.audioNotifications.isMuteAllChecked}),GMe={toggleOrderRejectedBell:PMe},YMe=se(WMe,GMe)(VMe),qMe=[!1,!0],KMe=({isTradeFilledBellEnabled:e,isMuteAllChecked:t,toggleTradeFilledBell:s})=>a.jsx(Rl,{ariaLabel:"Trade Filled Bell Toggle",className:"trade-filled-bell-toggle",leftValue:"off",rightValue:"on",value:e,name:"trade-filled-bell-selector",onToggle:()=>s(!e),disable:t,label:()=>"",children:qMe}),zMe=e=>({isTradeFilledBellEnabled:e.audioNotifications.isTradeFilledBellEnabled,isMuteAllChecked:e.audioNotifications.isMuteAllChecked}),XMe={toggleTradeFilledBell:kMe},QMe=se(zMe,XMe)(KMe),ZMe=A.div`
  padding: ${({theme:e})=>e.space.xSmall} ${({theme:e})=>e.space.medium}
    ${({theme:e})=>e.space.medium} ${({theme:e})=>e.space.medium};

  ${({theme:e})=>e.breakpoints.above(lt.DESKTOP_SMALL)} {
    width: 388px;
  }
`,JMe=A.div`
  height: 1px;
  margin: ${({theme:e})=>e.space.medium} ${({theme:e})=>e.space.none};
  background: ${({theme:{colors:e}})=>e.border.primary};
`,e2e=A(Be)`
  align-items: center;
  justify-content: space-between;
  height: 40px;
  margin-bottom: ${({theme:e})=>e.space.small};
  padding: 0 15px;
  background: ${({theme:e})=>e.colors.background.primary};
  border-radius: ${({theme:{shape:e}})=>e.borderRadius.secondary}px;
`,Bh=({label:e,children:t})=>a.jsxs(e2e,{children:[a.jsx("label",{"data-testid":e,children:e}),a.jsxs(Be,{alignItems:"center",children:[a.jsx(ot,{mr:it.space.small,"aria-hidden":"true",children:__("Off")}),a.jsx("div",{children:t}),a.jsx(ot,{ml:it.space.small,"aria-hidden":"true",children:__("On")})]})]}),t2e=[!1,!0],s2e=({isMarketBellEnabled:e,isMuteAllChecked:t,toggleMarketBell:s})=>a.jsx(Rl,{"data-testid":"market-bell-toggle",ariaLabel:__("Market Bell Toggle"),className:"market-bell-toggle",leftValue:"off",rightValue:"on",value:e,name:"market-bell-selector",onToggle:()=>s(!e),disable:t,label:()=>"",children:t2e}),n2e=e=>({isMarketBellEnabled:e.audioNotifications.isMarketBellEnabled,isMuteAllChecked:e.audioNotifications.isMuteAllChecked}),r2e={toggleMarketBell:_Me},o2e=se(n2e,r2e)(s2e),a2e=({isMuteAllChecked:e,muteAllNotifications:t})=>{const s=j.useRef(null);return j.useEffect(()=>{s.current&&s.current.focus()},[s]),a.jsx(Mn,{id:"audioNotificationsMute",label:__("Mute All"),checkBoxRef:s,isChecked:e,onChange:()=>t(!e)})},i2e=e=>({isMuteAllChecked:e.audioNotifications.isMuteAllChecked}),l2e={muteAllNotifications:MMe},c2e=se(i2e,l2e)(a2e),d2e=e=>{const{isOpened:t,navigationButtonRef:s,triggerFocus:n,hideAudioNotificationsWindow:r}=e;return a.jsx(ja,{isOpened:t,closeWindow:r,reFocus:n,navigationButtonRef:s,children:a.jsxs(ZMe,{children:[a.jsx(c2e,{}),a.jsx(JMe,{}),a.jsx(Bh,{label:__("Market open / close"),children:a.jsx(o2e,{})}),a.jsx(Bh,{label:__("Trade Filled"),children:a.jsx(QMe,{})}),a.jsx(Bh,{label:__("Alert Triggered",{namespace:"Alerts"}),children:a.jsx(HMe,{})}),a.jsx(Bh,{label:__("Order Rejected"),children:a.jsx(YMe,{})})]})})},u2e=e=>({isOpened:Er(e)===bt.Profile}),h2e=e=>({triggerFocus:t=>{e({type:f.TriggerFocus,ref:t})},hideAudioNotificationsWindow:()=>{Et.unstable_batchedUpdates(()=>{e(Oa(Dn.none)),e(En())})}}),qP=se(u2e,h2e)(d2e),p2e=3,m2e=43,g2e=A(Be)`
  width: 372px;
  justify-content: space-evenly;

  ${({theme:{breakpoints:e}})=>e.below(e.desktopSmall)} {
    width: 100%;
    max-width: 480px;
  }

  ${({theme:{breakpoints:e}})=>e.below(e.mobileSmall+40)} {
    width: auto;
  }
`,S2e=A(tt)`
  position: relative;
  justify-content: center;
  min-height: ${m2e}px;
  padding: 0 ${({theme:e})=>e.space.medium};
  margin: 0 ${({theme:e})=>e.space.xSmall};

  ${({theme:{breakpoints:e}})=>e.below(e.mobileLarge-100)} {
    padding: 0 ${({theme:e})=>e.space.xSmall};
  }
`,f2e=A.span`
  align-items: center;
  font-size: ${({theme:e})=>e.fontSizes.medium};
`,T2e=A.span`
  position: absolute;
  bottom: 0;
  width: 100%;
  height: ${p2e}px;
  background: ${({isSelected:e,theme:t})=>e&&`${t.colors.action.focus}`};
  border-radius: ${({theme:e})=>`${e.shape.borderRadius.secondary}px ${e.shape.borderRadius.secondary}px 0 0`};
`,KP=e=>{const{selectedFilter:t,onSelect:s,filtersToRender:n}=e,r=B.useRef(null);B.useEffect(()=>{t===n[0].filter&&r.current&&r.current.focus()},[t]);const o=()=>n.map(i=>a.jsxs(S2e,{"data-testid":`${i.filterLabel??i.filter}-filter`,role:"radio",ref:i.filter===n[0].filter?r:void 0,"aria-checked":t===i.filter,"aria-label":i.filterAriaLabel??`Display ${i.filter}`,onClick:()=>s(i.filter),children:[a.jsx(f2e,{children:i.filterLabel??i.filter}),a.jsx(T2e,{"data-testid":t===i.filter?"filter-indicator-selected":"filter-indicator",isSelected:t===i.filter})]},`${i.filter}-button`));return a.jsx(g2e,{"data-testid":"drawer-filter",children:o()})},Fh=[ne.LIMIT,ne.MARKET,ne.MOC,ne.LOC,ne.STOP,ne.STOPLIMIT,ne.TRAILSTOP],Fa=e=>{switch(e){case k.OPTION:return"Options";case k.FUTURE:return"Futures";case k.FOREX:return"Forex";case k.STOCK:default:return"Stocks"}},Hh=(e,t)=>{switch(e){case k.OPTION:return{defaultQuantity:((t==null?void 0:t.optionsOrderDefaultQuantity)??1).toString(),defaultOrderType:fa(t==null?void 0:t.optionsOrderDefaultType),availableOrderTypes:Fh};case k.FUTURE:return{defaultQuantity:((t==null?void 0:t.futuresOrderDefaultQuantity)??1).toString(),defaultOrderType:fa(t==null?void 0:t.futuresOrderDefaultType),availableOrderTypes:Fh.filter(s=>s!==ne.LOC&&s!==ne.MOC)};case k.FOREX:return{defaultQuantity:((t==null?void 0:t.forexOrderDefaultQuantity)??1e4).toString(),defaultOrderType:fa(t==null?void 0:t.forexOrderDefaultType),availableOrderTypes:Fh.filter(s=>s!==ne.LOC&&s!==ne.MOC&&s!==ne.STOPLIMIT)};case k.STOCK:default:return{defaultQuantity:((t==null?void 0:t.stocksOrderDefaultQuantity)??100).toString(),defaultOrderType:fa(t==null?void 0:t.stocksOrderDefaultType),availableOrderTypes:Fh}}},tb=186,zP=25,y2e=A(Be)`
  height: 305px;
  background-color: ${({theme:e})=>e.colors.background.primary};
  align-items: center;
  margin: ${({theme:e})=>e.space.xSmall};
`,C2e=A(Be)`
  flex-direction: column;
  width: ${tb}px;
  margin-top: ${({theme:e})=>e.space.medium};
`,Jv=A.label`
  color: ${({theme:{colors:e}})=>e.text.secondary};
`,b2e=A.div`
  margin-bottom: ${({theme:e})=>e.space.small};
`,E2e=A(_n)`
  height: 100%;
  ${Wn} {
    width: 100%;
    height: ${zP}px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: ${({theme:e})=>e.fontSizes.medium};
    font-weight: normal;
    color: ${({theme:{colors:e}})=>e.text.primary};
    border-radius: 3px;
    background-color: ${({theme:e})=>e.colors.background.secondary};
    border: 1px solid ${({theme:e})=>e.colors.border.primary};
    padding: 1px 10px;
  }

  svg {
    margin-left: ${({theme:{space:e}})=>e.xSmall};
    font-size: ${({theme:e})=>e.fontSizes.small};
  }
`,A2e=A.input`
  width: ${tb}px;
  height: ${zP}px;
  font-size: ${({theme:e})=>e.fontSizes.medium};

  ::-webkit-inner-spin-button,
  ::-webkit-outer-spin-button {
    appearance: none;
    margin: 0;
  }
  /* stylelint-disable */
  -moz-appearance: textfield;
  /* stylelint-enable */
`,v2e=A(tt)`
  align-self: flex-end;
  background-color: ${({theme:e})=>e.colors.border.secondary};
  color: ${({theme:e})=>e.colors.text.tertiary};
  font-size: ${({theme:e})=>e.fontSizes.medium};
  padding: 6px 30px 7px 30px;
  margin-top: ${({theme:e})=>e.space.small};
`,I2e=A.div`
  margin-top: 8px;
`,x2e=[{filter:k.STOCK,filterLabel:__(Fa(k.STOCK)),filterAriaLabel:`Display ${Fa(k.STOCK)} order defaults`},{filter:k.OPTION,filterLabel:__(Fa(k.OPTION)),filterAriaLabel:`Display ${Fa(k.OPTION)} order defaults`},{filter:k.FUTURE,filterLabel:__(Fa(k.FUTURE)),filterAriaLabel:`Display ${Fa(k.FUTURE)} order defaults`},{filter:k.FOREX,filterLabel:__(Fa(k.FOREX)),filterAriaLabel:`Display ${Fa(k.FOREX)} order defaults`}],w2e=e=>{const{isOpened:t,navigationButtonRef:s,triggerFocus:n,hideOrderDefaultsWindow:r,setUserProperties:o,userProperties:i}=e,l=["0",""],{defaultOrderType:c,defaultQuantity:d}=Hh(k.STOCK,i),[u,h]=B.useState(k.STOCK),[p,m]=B.useState(c),[g,S]=B.useState(d),[T,y]=B.useState(""),[b,E]=B.useState(""),v=B.useRef();Cn(()=>()=>D());const D=()=>{y(""),E(""),clearTimeout(v.current)},w=z=>{D(),h(z),S(Hh(z,i).defaultQuantity),m(Hh(z,i).defaultOrderType)},N=z=>{D(),m(z)},L=z=>{const re=z.key,ae=z.keyCode,Me=z.metaKey||z.ctrlKey;if(ae===37||ae===38||ae===39||ae===40||ae===8||ae===9||ae===46||ae===65&&Me||ae===97&&Me)return;/^\d+$/.test(re)||z.preventDefault()},P=z=>{D();const re=z.target.value;O(re)},F=()=>{const re=l.includes(g)?"1":g;O(re)},O=z=>{const re=z.replace(/^0*(\d)/,"$1");S(re)},H=()=>{D();const z=Math.abs(Number(g));if(Number.isNaN(z)||z>Number.MAX_SAFE_INTEGER||z===0){C();return}else if(u===k.FOREX&&(z<1e4||z%1e4!==0)){C(!0);return}let re={};switch(u){case k.STOCK:re={stocksOrderDefaultQuantity:z,stocksOrderDefaultType:p};break;case k.OPTION:re={optionsOrderDefaultQuantity:z,optionsOrderDefaultType:p,futureOptionsOrderDefaultQuantity:z};break;case k.FUTURE:re={futuresOrderDefaultQuantity:z,futuresOrderDefaultType:p};break;case k.FOREX:re={forexOrderDefaultQuantity:z,forexOrderDefaultType:p};break}o(re,M,C)},C=z=>{y(z?"FOREX order should have a quantity that is the multiple of forex lot size: 10000":"There was an error saving the Order Defaults. Please try again")},M=()=>{E("Order Defaults saved"),v.current=setTimeout(()=>{E("")},5e3)},q=()=>{E("")},W=Hh(u).availableOrderTypes;return a.jsx(ja,{isOpened:t,closeWindow:r,reFocus:n,navigationButtonRef:s,children:a.jsxs(y2e,{flexDirection:"column",children:[a.jsx(KP,{selectedFilter:u,onSelect:w,filtersToRender:x2e}),a.jsxs(C2e,{children:[a.jsx(Jv,{htmlFor:"default-orderType-dropdown",children:__("Default Order Type")}),a.jsx(b2e,{children:a.jsx(E2e,{id:"default-orderType-dropdown","data-testid":"default-orderType-dropdown",width:tb,placement:"bottom-start",values:W,anchorAriaLabel:"Default Order Types",onListItemClick:N,getListItemKey:z=>z,selectedItemIndex:W.indexOf(p),renderListItemContent:z=>__(z),renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[__(p),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",dataTestId:"arrow-dropdown-icon"})]})})}),a.jsx(Jv,{htmlFor:"default-order-quantity",children:__("Default Order Quantity")}),a.jsx(A2e,{id:"default-order-quantity","data-testid":"default-order-quantity",value:g,type:"number",min:1,onChange:P,onKeyDown:L,onBlur:F}),a.jsx(v2e,{"data-testid":"default-order-quantity-save",onClick:H,children:__("Save")}),a.jsxs(I2e,{children:[T&&a.jsx(vi,{warnings:[__(T)]}),b&&a.jsx(eN,{message:__(b),canClose:!0,closeInformation:q})]})]})]})})},O2e=e=>({isOpened:Er(e)===bt.Profile,userProperties:km(e)}),R2e=e=>({triggerFocus:t=>{e({type:f.TriggerFocus,ref:t})},hideOrderDefaultsWindow:()=>{Et.unstable_batchedUpdates(()=>{e(Oa(Dn.none)),e(En())})},setUserProperties:(t,s,n)=>{e(Qp(t,s,n))}}),XP=se(O2e,R2e)(w2e),QP=()=>{const e=()=>pw(new Date);return a.jsx(tt,{"data-testid":"clear-all-button",variant:Pe.secondary,onClick:e,children:__("Clear All")})},ZP=e=>e.notifications,D2e=x(ZP,e=>e.filter(t=>t.shouldAlert)),sb=e=>({type:f.TriggerFocus,ref:e}),L2e=e=>{const{viewAllAlerts:t}=e;return a.jsx(tt,{variant:Pe.secondary,onClick:t,children:__("View All Alerts")})},_2e=e=>({viewAllAlerts:()=>{Et.unstable_batchedUpdates(()=>{e(Pc(!0)),e(QR(Gt.Active))})}}),N2e=se(null,_2e)(L2e),JP=A.li`
  list-style-type: none;
  background: ${({theme:{colors:e}})=>e.component.Alert.background};
  padding: 1px;
  color: ${({theme:{colors:e}})=>e.text.tertiary};
`,nb=A.div`
  border-left-width: ${({theme:{shape:e}})=>e.borderWidth.thick}px;
  border-left-style: solid;
  ${({theme:{colors:e}})=>Ms({prop:"notificationType",variants:{[zt.BuyCompleted]:{borderLeftColor:e.buy.main},[zt.BuyPending]:{borderLeftColor:e.buy.main},[zt.SellCompleted]:{borderLeftColor:e.sell.main},[zt.SellPending]:{borderLeftColor:e.sell.main},[zt.Cancelled]:{borderLeftColor:e.background.primary},[zt.Rejected]:{borderLeftColor:e.background.primary},[zt.Alert]:{borderLeftColor:e.action.focus},[zr.Regular]:{borderLeftColor:e.messageCenterNotifications.regular},[zr.High]:{borderLeftColor:e.messageCenterNotifications.high},[zr.Urgent]:{borderLeftColor:e.messageCenterNotifications.urgent}}})};
  padding: ${({theme:{space:e}})=>`${e.xSmall} ${e.xSmall} ${e.xSmall} 0`};
  display: flex;
`,Ui=A(Si)`
  margin: ${({theme:{space:e}})=>`${e.xxSmall} ${e.xSmall}`};
  width: 14px;

  g {
    ${({displayType:e,theme:{colors:t}})=>Ms({prop:"notificationType",variants:{[zt.BuyCompleted]:{fill:t.buy.main},[zt.BuyPending]:{fill:t.buy.main},[zt.SellCompleted]:{fill:t.sell.main},[zt.SellPending]:{fill:t.sell.main}}})}
  }

  path {
    ${({displayType:e,theme:{colors:t}})=>Ms({prop:"notificationType",variants:{[zt.Cancelled]:{fill:e==="div"?t.background.primary:t.text.primary},[zt.Rejected]:{fill:e==="div"?t.background.primary:t.text.primary}}})}
  }
`,P2e=A(X)`
  margin: ${({theme:{space:e}})=>`${e.xxSmall} ${e.xSmall}`};
`,zS=A(X)`
  margin: ${({theme:{space:e}})=>`${e.xxSmall} ${e.xSmall}`};
`,k2e=A.div`
  flex: 1;
`,ek=({className:e,as:t,notification:s})=>{const{type:n,textContent:r}=s;return a.jsx(JP,{className:e,as:t,"data-testid":"notification-card-container",children:a.jsxs(nb,{"data-testid":"notification-card-wrapper",notificationType:n,children:[a.jsx(M2e,{notificationType:n,displayType:t}),a.jsx(k2e,{children:r.map(({content:o,ariaLabel:i},l)=>{const c={key:l,"data-testid":"notification-card-content"};if(i!==void 0){const d=yL(s)?`This is a ${n} priority message. ${i}`:i;return a.jsx("div",{...c,"aria-label":d,children:a.jsx("span",{"aria-hidden":!0,children:o})})}return a.jsx("div",{...c,children:o})})})]})})},M2e=({notificationType:e,displayType:t})=>{switch(e){case zt.BuyCompleted:return a.jsx(Ui,{quantity:1,status:de.Completed,notificationType:e});case zt.BuyPending:return a.jsx(Ui,{quantity:1,status:de.Pending,notificationType:e});case zt.SellCompleted:return a.jsx(Ui,{quantity:-1,status:de.Completed,notificationType:e});case zt.SellPending:return a.jsx(Ui,{quantity:-1,status:de.Pending,notificationType:e});case zt.Cancelled:return a.jsx(Ui,{quantity:-1,status:de.Cancelled,notificationType:e,displayType:t});case zt.Rejected:return a.jsx(Ui,{quantity:1,status:de.Rejected,notificationType:e,displayType:t});case zt.Alert:return a.jsx(P2e,{type:Y.Bell,width:11,height:18,viewBox:"4 4 16 18",fill:"action.focus"});case zr.Regular:return a.jsx(zS,{type:Y.InfoFilledCircle,dataTestId:"message-center-regular-notification-icon",fill:"messageCenterNotifications.regular"});case zr.High:return a.jsx(zS,{type:Y.WarningFilled,dataTestId:"message-center-high-notification-icon",fill:"messageCenterNotifications.high"});case zr.Urgent:return a.jsx(zS,{type:Y.OctaAlertFilled,dataTestId:"message-center-urgent-notification-icon",fill:"messageCenterNotifications.urgent"})}},Fg=372,$2e=A(Be)`
  display: none;

  ${({theme:{breakpoints:e}})=>e.below(e.desktopSmall)} {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0 24px 24px;
  }
`,j2e=A(Be)`
  justify-content: center;
  padding: ${({theme:e})=>`${e.space.medium} ${e.space.none}`};

  ${tt} {
    padding: ${({theme:e})=>`${e.space.xxxSmall} ${e.space.large}`};
  }
`,B2e=A.div`
  padding: ${({theme:{space:e}})=>e.large};
  text-align: center;
  width: ${Fg}px;

  ${({theme:{breakpoints:e}})=>e.below(e.desktopSmall)} {
    width: auto;
    max-width: 480px;
  }
`,tk=A.ul`
  margin: 0;
  padding: 0;
  max-height: 60vh;
  overflow: auto;
  width: ${Fg}px;

  ${({theme:{breakpoints:e}})=>e.below(e.desktopSmall)} {
    width: auto;
    max-width: 480px;
  }
`,F2e=A(ek)`
  ${br.stripedBackgroundList(Pe.primary)}

  color: ${({theme:{colors:e}})=>e.text.primary};

  ${nb} {
    ${({theme:{colors:e}})=>Ms({prop:"notificationType",variants:{[zt.Cancelled]:{borderLeftColor:e.component.Alert.background},[zt.Rejected]:{borderLeftColor:e.component.Alert.background}}})}
  }

  ${Ui} g {
    ${({theme:{colors:e}})=>Ms({variants:{[zt.Cancelled]:{stroke:e.component.Alert.background},[zt.Rejected]:{stroke:e.component.Alert.background}}})};
  }
`,H2e=({hideNotificationWindow:e,isOpened:t,navigationButtonRef:s,notifications:n,triggerFocus:r})=>a.jsxs(ja,{isOpened:t,closeWindow:e,reFocus:r,navigationButtonRef:s,children:[a.jsx($2e,{"data-testid":"mobile-clear-all-container",children:a.jsx(QP,{})}),n.size===0?a.jsx(B2e,{children:__("No New Notifications")}):a.jsx(tk,{"data-testid":"notification-window-notifications",children:n.reverse().entrySeq().map(([o,i])=>a.jsx(F2e,{notification:i},o))}),a.jsx(j2e,{children:a.jsx(N2e,{})})]}),U2e=216e5,V2e=x(ZP,mw,(e,t)=>e.filter(s=>{const n=new Date,r=s.eventTime>t,o=n.getTime()-s.eventTime>U2e,i=s.isPopupOnlyNotification;return r&&!o&&!i})),rb=x(V2e,xL,(e,t)=>TL(e,t)),W2e=e=>({isOpened:Er(e)===bt.Notification,notifications:rb(e)}),G2e={triggerFocus:sb,hideNotificationWindow:En},sk=se(W2e,G2e)(H2e),Hg=e=>e.alerts,ob=e=>Hg(e).activeAlerts,nk=e=>Hg(e).triggeredAlerts,rk=e=>Hg(e).canceledAlerts,Y2e=e=>Hg(e).isLoading,q2e=e=>x(vO(e),ob,(t,s)=>s,(t,s,n)=>t&&n!==void 0?s.filter(r=>r.symbol===n):[]),K2e=x(ob,e=>Oy(e)),z2e=x(nk,e=>Oy(e)),X2e=x(rk,e=>Oy(e)),Q2e=x(K2e,z2e,X2e,(e,t,s)=>Xr(e.concat(t,s))),zd=e=>{switch(e){case Gt.Active:return"Active Alerts";case Gt.Triggered:return"Triggered Alerts";case Gt.Canceled:return"Canceled Alerts"}},Z2e=A.li`
  list-style-type: none;
  padding: 1px;
  color: ${({theme:{colors:e}})=>e.text.primary};

  ${br.stripedBackgroundList(Pe.primary)}
`,J2e=A(nb)`
  align-items: flex-start;
  justify-content: space-between;
`,e5e=A.button`
  display: flex;
  justify-content: space-between;
  flex-wrap: nowrap;
  padding: 0;

  font-size: ${({theme:e})=>e.fontSizes.medium};
  font-weight: normal;
  text-align: left;
  color: ${({theme:{colors:e}})=>e.text.primary};
  white-space: normal;
`,t5e=A(X)`
  margin: ${({theme:{space:e}})=>`${e.xxSmall} ${e.xSmall}`};
  flex-shrink: 0;
  flex-grow: 0;
`,s5e=A.span`
  color: ${({theme:e})=>e.colors.action.focus};
  font-size: ${({theme:e})=>e.fontSizes.small};
`,n5e=e=>{const{filter:t,id:s,symbol:n,field:r,operator:o,threshold:i,cancelAlert:l,clickAlertText:c,symbolToNavigateTo:d,activePage:u,numCharts:h,selectedSymbol:p}=e,m=B.useRef(null),[g,S]=B.useState(!1),T=()=>{S(!0),m.current=setTimeout(()=>{l(s,n),m.current=null,S(!1)},5e3)},y=()=>{S(!1),m.current!==null&&(clearTimeout(m.current),m.current=null)},b=()=>{g?y():T()},E=()=>{d!==void 0&&c(d,u,h,p)};B.useEffect(()=>()=>{m.current!==null&&(clearTimeout(m.current),l(s,n),m.current=null)},[l,s]);const v=g?"Undo cancel alert":"Cancel alert";return n!==void 0&&r!==void 0&&o!==void 0&&i!==void 0?a.jsx(Z2e,{"data-testid":"alert-card-container",tabIndex:0,children:a.jsxs(J2e,{notificationType:zt.Alert,children:[a.jsxs(e5e,{"data-testid":"alert-navigable-area",onClick:E,children:[a.jsx(t5e,{type:Y.Bell,width:11,height:14,viewBox:"4 3 16 18",fill:"action.focus"}),r5e(e)]}),t===Gt.Active&&a.jsx(tt,{onClick:b,"data-testid":"cancel-alert-button","aria-label":v,children:g?a.jsx(s5e,{children:__("Undo")}):a.jsx(X,{type:Y.Remove,viewBox:"5 3 14 18",dataTestId:"remove-icon",width:14,height:18})})]})}):null},r5e=e=>{const{eventTime:t,symbol:s,field:n,currentFieldValue:r,operator:o,threshold:i,showFractionalPricing:l,fractionalType:c,showDoubleTickForFractionalPricing:d}=e,u=r!==void 0,h=`${wm(t)} ${s} ${tT(n)} ${o!==void 0&&Wp(o).operator} ${Nd(l,i,c,d)}`,p=`${h} ${__("Current")} = ${Nd(l,r,c,d)}`,m=`${ho(t,!0,!0)}. ${Ns(s)} ${tT(n)} is ${o!==void 0&&Wp(o).a11yOperator} ${i}`,g=`${m}, Current is ${Nd(l,r,c,d)}`;return a.jsx("div",{"data-testid":"alert-card-text","aria-label":u?g:m,children:a.jsx("span",{"aria-hidden":!0,children:u?p:h})})},ab=(e,t)=>t,o5e=x(Ai,ab,(e,t)=>{var s;return t.symbol!==void 0&&t.field!==void 0&&t.field in eD?(s=e.get(t.symbol))==null?void 0:s[Bhe(t.field)]:void 0}),ok=x(bn,ab,(e,t)=>{if(t.symbol!==void 0)return e.get(t.symbol)}),a5e=x(ok,ab,(e,t)=>(e==null?void 0:e.type)===k.FUTURE&&(e==null?void 0:e.rootSymbol)!==void 0?e.rootSymbol:t.symbol),i5e=(e,t)=>{var u;const{showFractionalPricing:s,fractionalType:n}=pn(e,t.symbol??""),r=a5e(e,t),o=(u=ok(e,t))==null?void 0:u.type,i=ms(e),l=mt(e),c=Ru(e),d=i===ge.Charts?c:l;return{currentFieldValue:o5e(e,t),symbolToNavigateTo:r,fractionalType:n,showFractionalPricing:s,showDoubleTickForFractionalPricing:Vs(r??"",o),activePage:i,numCharts:hs(e).size,selectedSymbol:d}},l5e=(e,t)=>({cancelAlert:(s,n)=>{e(wy(s,n))},clickAlertText:(s,n,r,o)=>{Et.unstable_batchedUpdates(()=>{n===ge.Charts?o!==s&&(e(Ia(Ps(1),s)),r===1&&e(ea(s))):o!==s&&(e(ws(ge.Trade,s)),r===1&&e(ui(Ps(1),s))),e(En()),e(Pc(!1))}),t.closeModal&&t.closeModal()}}),c5e=se(i5e,l5e)(n5e),d5e=A(Be)`
  text-align: center;
  padding: ${({theme:{space:e}})=>e.large};
  width: ${Fg}px;

  ${({theme:{breakpoints:e}})=>e.below(e.desktopSmall)} {
    width: auto;
    max-width: 480px;
  }
`,u5e=A(X)`
  position: relative;
  top: 3px;
`,h5e=A.span`
  color: ${({theme:e})=>e.colors.text.disabled};
  width: 100%;
`,p5e=e=>{const t=`No ${zd(e.status)}. Click Create Alert when looking at a symbol to set an alert.`;return a.jsx(d5e,{"aria-label":t,tabIndex:0,"data-testid":`empty-${e.status}-alerts`,children:a.jsx(h5e,{"aria-hidden":!0,children:__("__locale")==="__locale"?a.jsxs(a.Fragment,{children:[`No ${zd(e.status)}. Click `,"“",a.jsxs("span",{children:[" ",a.jsx(u5e,{type:Y.BellAddAlert,width:14,height:18,viewBox:"4 2 16 20"})]})," ",a.jsx("span",{className:"color-primary-btn",children:"Create Alert"}),"” when looking at a symbol to set an alert."]}):__(t)})})},m5e=e=>{const{activeAlerts:t,triggeredAlerts:s,canceledAlerts:n,isLoading:r,alertSymbols:o,hideAlertWindow:i,isOpened:l,navigationButtonRef:c,triggerFocus:d,updateAlertSymbols:u,getAlerts:h,onModalClose:p}=e,m=[{filter:Gt.Active,filterLabel:Ah(Gt.Active),filterAriaLabel:`Display ${zd(Gt.Active)}`},{filter:Gt.Triggered,filterLabel:Ah(Gt.Triggered),filterAriaLabel:`Display ${zd(Gt.Triggered)}`},{filter:Gt.Canceled,filterLabel:Ah(Gt.Canceled),filterAriaLabel:`Display ${zd(Gt.Canceled)}`}],[g,S]=B.useState(Gt.Active),T=un(o);B.useEffect(()=>{fs(T,o)||u(o)},[o,T,u]),B.useEffect(()=>()=>{u([])},[u]);const y=(v,D)=>r?a.jsx("div",{"data-testid":"alerts-loader",className:"loader"},"loader"):v.length===0?a.jsx(p5e,{status:D}):a.jsx(tk,{"data-testid":`${Ah(D)}-alert-window`,children:v.map(w=>a.jsx(c5e,{filter:g,id:w.id,symbol:w.symbol,eventTime:D===Gt.Active?w.time:w.closeTime,field:w.field,operator:w.operator,threshold:w.threshold,closeModal:p},w.id))}),b=()=>{switch(g){case Gt.Canceled:return y(n,Gt.Canceled);case Gt.Triggered:return y(s,Gt.Triggered);default:return y(t,Gt.Active)}},E=v=>{S(v),h(v)};return a.jsx(ja,{isOpened:l,closeWindow:i,reFocus:d,navigationButtonRef:c,children:a.jsxs(Be,{flexDirection:"column",children:[a.jsx(KP,{selectedFilter:g,onSelect:E,filtersToRender:m}),b()]})})},g5e=j.memo(m5e),S5e=e=>({isOpened:Er(e)===bt.Notification,activeAlerts:ob(e),triggeredAlerts:nk(e),canceledAlerts:rk(e),alertSymbols:Q2e(e),isLoading:Y2e(e)}),f5e=e=>({triggerFocus:t=>{e({type:f.TriggerFocus,ref:t})},hideAlertWindow:()=>{Et.unstable_batchedUpdates(()=>{e(En()),e(Pc(!1))})},getAlerts:t=>{e(QR(t))},updateAlertSymbols:t=>{e(khe(t))}}),ak=se(S5e,f5e)(g5e),T5e=e=>{const t=Ar(),s=()=>{t(e9()),Ye({category:Ve.Click,action:Le.Education,label:ks.OpenEducation})};return a.jsx(ir,{dataTestId:"education-button",onClick:s,icon:a.jsx(X,{type:Y.Education,width:14,height:14,viewBox:"0 1 23 22",dataTestId:"education-icon"}),title:"Education"})},ik=hn(T5e),lk=({children:e})=>a.jsx(a.Fragment,{children:e});lk.displayName="DrawerContainer";const y5e=DL(lk),C5e=(e,{drawerWindow:t})=>({isOpened:Er(e)===t}),b5e=e=>({onClose:()=>{e(En())}}),Vo=se(C5e,b5e)(y5e);class E5e extends j.Component{constructor(){super(...arguments);R(this,"onClick",()=>{const s=this.props;s.isOpened||s.resetFeedbackState(),s.displayFeedback(!s.isOpened)})}render(){const s=this.props;return a.jsx(ir,{dataTestId:"feedback-button",onClick:this.onClick,ariaExpanded:s.isOpened,icon:a.jsx(X,{type:Y.Feedback,width:14,height:14,viewBox:"2 0 22 22",dataTestId:"feedback-icon"}),title:"Feedback",navigationButtonRef:s.navigationButtonRef})}}const A5e=e=>({isOpened:Er(e)===bt.Feedback}),v5e=e=>({resetFeedbackState(){e({type:f.ResetFeedback})},displayFeedback(t){t?(e({type:f.ShowDrawerWindow,windowToShow:bt.Feedback}),e(Us(ps.FEEDBACK_WINDOW))):e(En())}}),I5e=se(A5e,v5e)(E5e),Uh=new Y5.UAParser(window.navigator.userAgent),x5e=new Intl.NumberFormat(void 0,{style:"percent"}),w5e=()=>{const e=window.devicePixelRatio;return window.chrome?Math.min(Math.round(window.outerWidth/window.innerWidth*100)/100,e):e},ck=(e=!1)=>{const{innerWidth:t,innerHeight:s}=window,n=Uh.getOS().name,r=Uh.getOS().version,o=Uh.getBrowser().name,i=Uh.getBrowser().version,l=I6(new Date),c=x5e.format(w5e()),d={asEnglish:e};return[`${__("Operating System",d)}: ${n}`,`${__("Operating System Version",d)}: ${r}`,`${__("Browser",d)}: ${o}`,`${__("Browser Version",d)}: ${i}`,`${__("Site Version",d)}: 2.61.0`,`${__("Window Width",d)}: ${t}px`,`${__("Window Height",d)}: ${s}px`,`${__("Time",d)}: ${l}`,`${__("Zoom Level",d)}: ${c}`].join(`
`)},O5e=e=>{if(e.userSettings.status===tl.LoggedIn)return e.account.selected===void 0||e.account.selected.code===""?"COMBINED ACCOUNT":e.account.selected.code},R5e=e=>{if(e.userSettings.status===tl.LoggedIn)return e.account.selected===void 0||e.account.selected.description===""?"All Accounts":e.account.selected.description},dk=e=>{switch(e){case gt.PaperMoney:return"Paper Money";case gt.LiveTrading:return __("Live Trading");default:throw LR(e)}};class XS extends B.PureComponent{render(){const{ariaLabel:t,onChange:s,name:n,value:r,id:o,children:i,isChecked:l,form:c}=this.props;return a.jsxs("div",{className:"radio-container",children:[a.jsx("input",{className:"input-radio","data-testid":"radio-button-input",id:o,type:"radio",name:n,value:r,checked:l,onChange:s,form:c}),a.jsx("label",{"aria-label":t,htmlFor:o,className:"radio-label",children:i})]})}}const D5e=A.span`
  color: ${({chatOpen:e,theme:t})=>e?t.colors.text.green:t.colors.text.red};
  font-size: ${({theme:e})=>e.fontSizes.small};
`,L5e=A.span`
  color: ${({theme:e})=>e.colors.text.disabled};
  font-size: ${({theme:e})=>e.fontSizes.small};
`,_5e=A.span`
  color: ${({theme:e})=>e.colors.text.disabled};
  padding: ${({theme:e})=>`${e.space.none} ${e.space.xxSmall}`};
`,N5e=A.button`
  background-color: ${({theme:e})=>e.colors.text.primary};
  color: ${({theme:e})=>e.colors.text.tertiary};

  &:hover {
    background-color: ${({theme:e})=>e.colors.background.hovered};
  }

  &:active {
    background-color: ${({theme:e})=>e.colors.background.hovered};
  }

  height: ${({theme:e})=>e.fontSizes.xxxxLarge};
  padding: 1px 16px 3px;
  border-radius: 20px;
  font-size: ${({theme:e})=>e.fontSizes.medium};

  &:disabled {
    pointer-events: none;
    cursor: not-allowed;
    color: ${({theme:e})=>e.colors.text.disabled};
  }
`,P5e=A(Be)`
  justify-content: space-between;
  margin: ${({theme:e})=>e.space.medium} ${({theme:e})=>e.space.none};
`,k5e=A(Be)`
  flex-direction: column;
  justify-content: space-between;
  background-color: ${({theme:e})=>e.colors.background.secondary};
  pointer-events: initial;
  min-width: 500px;
  padding: 0 ${({theme:e})=>`${e.space.medium}`} ${({theme:e})=>`${e.space.medium}`};

  ${({theme:{breakpoints:e}})=>e.below(e.desktopSmall)} {
    margin: 0;
    height: 100%;
    width: 100%;
    min-width: 0;
    overflow: auto;

    & .header {
      display: none;
    }
  }
`;A.a`
  color: ${({theme:e})=>e.colors.text.primary};
  align-self: flex-start;
  margin-bottom: ${({theme:e})=>e.fontSizes.medium};
`;const QS=A(Be)`
  flex-direction: column;
  font-size: ${({theme:e})=>e.fontSizes.small};
  line-height: ${({theme:e})=>e.space.medium};
  padding: ${({theme:e})=>e.space.xxSmall};
`,M5e=A.div`
  width: 100%;
  text-align: center;
  margin-top: ${({theme:e})=>e.space.medium};
`,$5e=A.button`
  cursor: pointer;
  background-color: transparent;
  font-weight: 500;
  outline: none;
  width: 100%;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  border-radius: 20px;
  height: 40px;
  padding: 0 25px 2px;
  border: ${({theme:e})=>e.space.xxxSmall} solid ${({theme:e})=>e.colors.text.primary};
  color: ${({theme:e})=>e.colors.text.primary};
  white-space: nowrap;

  &:hover {
    background-color: ${({theme:e})=>e.colors.action.active};
  }

  &:active {
    background-color: ${({theme:e})=>e.colors.action.active};
  }

  &:disabled,
  &:disabled:hover,
  &:disabled:active {
    border-color: ${({theme:e})=>e.colors.border.primary};
    color: ${({theme:e})=>e.colors.border.primary};
    background-color: transparent;
    cursor: default;
  }
`,j5e=A.p`
  margin-left: 10px;
`,B5e=A.p`
  margin-left: 10px;
  margin-right: 10px;
`,eI=A.a`
  color: ${({theme:e})=>e.colors.text.primary};
`,F5e=A(ot)`
  text-transform: capitalize;
`,H5e=({tradingSystem:e,id:t,hidden:s,systemInfo:n,userCode:r,flags:o})=>{let i=e===void 0?n:`${n}
${__("Paper Money or Live Trading")}: ${dk(e)}
`;return r!==void 0&&Js(Cs.SHOW_USER_CODE,o)&&(i=`${i}
User Code: ${r}
`),a.jsx("div",{"data-testid":"troubleshooting-information","aria-label":"troubleshooting information",className:Te("troubleshooting-information","native-scroll",s&&"hidden"),id:t,children:i.split(`
`).map((l,c)=>a.jsx("p",{className:"trading-information__item",children:l},c))})},U5e=e=>({tradingSystem:Mo(e),userCode:NR(e),systemInfo:ck()}),V5e=Ln.withConsumer()(se(U5e)(H5e)),uk="troubleshooting-id",wi=R6(),W5e=e=>{try{e.contentEditable="true",e.readOnly=!1,G5e(e)}catch{}},G5e=e=>{const t=document.createRange(),s=window.getSelection();t.selectNodeContents(e),s!==null&&(s.removeAllRanges(),s.addRange(t),e.setSelectionRange(0,999999),document.execCommand("copy"))},Y5e=()=>{const e=document.querySelector("#"+uk);if(e!==null&&e instanceof HTMLElement){const t=e.innerText;let s;try{if(navigator.clipboard)navigator.clipboard.writeText(t),s=!0;else{const n=document.querySelector("#support-window");if(n!==null){const r=document.createElement("textarea");r.value=t,n.appendChild(r),W5e(r),e.blur(),n.removeChild(r),s=!0}else s=!1}}catch{s=!1}s&&Ye({category:Ve.Drawers,action:Le.TroubleshootingInformationCopied})}},q5e=__("__locale")!=="__locale",ZS=bi(`${wi.startWeek.date} 9 am`,Po.Asia_Singapore),tI=bi(`${wi.endWeek.date} 5 pm`,Po.Asia_Singapore),JS=bi(`${wi.startWeek.date} 8 pm`,Po.Asia_Singapore),sI=bi(`${wi.endWeek.date} 5 am`,Po.Asia_Singapore),K5e=`${__("Singapore Office")} ${ZS.time} - ${tI.time} ${ZS.timeZone} (${__(ZS.day)}-${__(tI.day)})`,z5e=`${__("Overnight Support")} ${JS.time} - ${sI.time} ${JS.timeZone} (${__(JS.day)}-${__(sI.day)})`,ef=bi(`${wi.startWeek.date} 9 am`,Po.Asia_HongKong),nI=bi(`${wi.endWeek.date} 6 pm`,Po.Asia_HongKong),tf=bi(`${wi.startWeek.date} 8 pm`,Po.Asia_HongKong),rI=bi(`${wi.endWeek.date} 5 am`,Po.Asia_HongKong),X5e=`${__("Hong Kong Office")} ${ef.time} - ${nI.time} ${ef.timeZone} (${__(ef.day)}-${__(nI.day)})`,Q5e=`${__("Overnight Support")} ${tf.time} - ${rI.time} ${tf.timeZone} (${__(tf.day)}-${__(rI.day)})`;class Z5e extends B.Component{constructor(){super(...arguments);R(this,"state",{expanded:!1,copied:!1});R(this,"getPathForOrigin",s=>s==="SING"?"singapore":s==="HKASIA"?"hongkong":"");R(this,"renderPhone",(s,n,r)=>a.jsx(eI,{"data-testid":"phone-number",href:`tel:${s}`,"aria-label":n,onClick:this.onHandleSupportClick(ks.Phone),children:__(r)}));R(this,"renderPhoneNumber",s=>a.jsxs("div",{"data-testid":"schwab-phone-number-wr",children:[a.jsx("div",{"data-testid":"schwab-phone-number",children:this.renderPhone("8004359050","Phone number 8 0 0. 4 3 5. 9 0 5 0.","(800) 435-9050")}),a.jsxs("div",{"data-testid":"schwab-phone-number-tty",children:[this.renderPhone("8008119688","Phone number 8 0 0. 8 1 1. 9 6 8 8.","(800) 811-9688")," "," ",__("TTY (for hearing impaired)",{namespace:"SupportWindow"})]})]}));R(this,"renderTimings",s=>s==="SING"?a.jsxs(QS,{"data-testid":"timings",children:[a.jsx("span",{"data-testid":"support-time",children:K5e}),a.jsx("span",{"data-testid":"overnight-support-time",children:z5e})]}):s==="HKASIA"?a.jsxs(QS,{"data-testid":"timings",children:[a.jsx("span",{"data-testid":"support-time",children:X5e}),a.jsx("span",{"data-testid":"overnight-support-time",children:Q5e})]}):q5e?a.jsx(QS,{children:a.jsx("span",{children:this.renderPhone("8778881238","Phone number 1. 8 7 7. 8 8 8. 1 2 3 8.","1-877-888-1238")})}):null);R(this,"showQuickStartGuide",s=>Js(Cs.SHOW_QUICK_START_GUIDE_BLUE,s));R(this,"openLiveSupport",()=>{const{openLiveSupportChatWindow:s,hideSupport:n,liveSupportChatWindowState:r}=this.props;s(r),n()});R(this,"handleCopyClick",()=>{Y5e(),this.setState({copied:!0})});R(this,"onHandleSupportClick",s=>()=>{Ye({category:Ve.Drawers,action:Le.ClickedSupport,label:s})});R(this,"onHandleTroubleshootingExpanded",s=>{Ye({category:Ve.Drawers,action:Le.TroubleshootingInformationExpanderClicked,label:s?ks.Collapse:ks.Expand})})}render(){const{expanded:s,copied:n}=this.state,{chatOpen:r,isOpened:o,isLoggedIn:i=!0,hideSupport:l,triggerFocus:c,navigationButtonRef:d,userSegment:u,chatStartTime:h,chatEndTime:p,flags:m,chatId:g,nextChatAvailableDay:S}=this.props,T=i&&u!=="HKASIA"&&u!=="SING";return a.jsx(ja,{isOpened:o,closeWindow:l,reFocus:c,navigationButtonRef:d,children:a.jsx(k5e,{id:"support-window","data-testid":"support-window",children:a.jsxs(Be,{flexDirection:"column",children:[Js(Cs.SHOW_SUPPORT_CHAT,m)&&a.jsxs(Be,{alignItems:"center",children:[a.jsx(X,{type:Y.LiveSupport,height:22,width:18,viewBox:"3 1 18 22",dataTestId:"live-support-icon"}),a.jsx(B5e,{children:__("Live Support")}),g===pr.CHAT_NOT_STARTED?a.jsx(N5e,{"data-testid":"start-chat-button","aria-label":"start chat",disabled:!r,onClick:()=>this.openLiveSupport(),children:__(Wf.START_CHAT,{namespace:"SupportWindow"})}):a.jsx(ot,{"aria-label":"Support chat in progress",color:"text.green",i18nOptions:{namespace:"SupportWindow"},children:Wf.IN_PROGRESS})]}),a.jsxs(Be,{children:[a.jsx(D5e,{chatOpen:r,"data-testid":"current-chat-status",children:r?__("Open",{namespace:"SupportWindow"}):__("Closed",{namespace:"SupportWindow"})}),(p||h)&&a.jsx(_5e,{children:"•"}),a.jsx(L5e,{"data-testid":"future-chat-status",children:r?a.jsx(a.Fragment,{children:p&&a.jsxs("span",{"data-testid":"chat-end-time-wrapper",children:[__("Closes",{namespace:"SupportWindow"})," ",p.hour,":",p.minutes," ",p.suffix]})}):a.jsx(a.Fragment,{children:h&&a.jsxs("span",{"data-testid":"chat-start-time-wrapper",children:[__("Opens",{namespace:"SupportWindow"})," ",S&&a.jsxs(a.Fragment,{children:[a.jsx(F5e,{"data-testid":"next-chat-day",children:S})," "]}),h.hour,":",h.minutes," ",h.suffix]})})})]}),a.jsxs(Be,{alignItems:"center","data-testid":"call-header",children:[a.jsx(X,{type:Y.Call,width:14,height:14,viewBox:"3 3 18 18",dataTestId:"call-icon"}),a.jsx(j5e,{children:__("Call",{namespace:"SupportWindow"})})]}),this.renderPhoneNumber(u),this.renderTimings(u),T&&this.showQuickStartGuide(m)&&a.jsxs(a.Fragment,{children:[a.jsx("br",{}),a.jsx(eI,{href:"https://www.tdameritrade.com/retail-en_us/resources/pdf/TDA1002168.pdf",target:"_blank",rel:"noopener noreferrer","data-testid":"start-guide",onClick:()=>{Ye({category:Ve.Click,action:Le.QuickStartGuide,label:"Opening Quick Start Guide"})},children:__("Quick Start Guide")})]}),a.jsx(P5e,{children:a.jsx($o,{isExpandedDown:s,onClick:()=>{this.onHandleTroubleshootingExpanded(s),this.setState({expanded:!s})},children:__("Troubleshooting Information")})}),a.jsx(V5e,{id:uk,hidden:!s}),s&&a.jsx(M5e,{"data-testid":"copy-to-clipboard",children:a.jsx($5e,{"data-testid":"copy-to-clipboard-btn",id:"copy-to-clipboard",onClick:this.handleCopyClick,children:n?__("Copied"):__("Copy to clipboard")})})]})})})}}const J5e=e=>{const t=e.drawerWindowDisplayed===bt.Support,{startTime:s,endTime:n,nextChatAvailableDay:r}=Gge(e);return{isOpened:t,key:e.drawerWindowDisplayed===bt.Support,shouldFocus:e.focus.focusedId===ps.SUPPORT_WINDOW,userSegment:xl(e),chatId:ku(e),chatOpen:Yge(e),liveSupportChatWindowState:tg(e),chatStartTime:s,chatEndTime:n,nextChatAvailableDay:r}},e3e=e=>({triggerFocus(t){e({type:f.TriggerFocus,ref:t})},hideSupport(){e(En())},openLiveSupportChatWindow:t=>{t===Sr.minimized&&e(pu(uy)),e(hu(Sr.maximized))}}),ib=Ln.withConsumer()(se(J5e,e3e)(Z5e));class t3e extends j.PureComponent{constructor(){super(...arguments);R(this,"getContent",()=>{switch(this.props.status){case Io.BadResponse:return __("An error occurred. Please try again.");case Io.OK:return __(`${__("Thank you for submitting your feedback!")}

               ${__("Your feedback is incredibly valuable in shaping the future of thinkorswim.")}

               ${__("Please note that we can not respond directly to feedback provided here. If your feedback requires a response, or if you have any direct questions, please call or email us using the contact information found by clicking 'Support'.")}`);case Io.Pending:return __("Sending your feedback")+"...";default:return""}})}render(){return a.jsx("div",{className:"feedback-thank-you",children:this.getContent()})}}const sf="satisfaction",Vh="Comments field must be filled!";class s3e extends B.PureComponent{constructor(s){super(s);R(this,"formRef",B.createRef());R(this,"divRef",B.createRef());R(this,"commentInputRef",B.createRef());R(this,"contactSupportButtonRef",B.createRef());R(this,"themeClass",qw(this.props.theme));R(this,"handleFocus",()=>{const{shouldFocus:s}=this.props;s&&this.divRef&&this.props.triggerFocus(this.divRef)});R(this,"renderFeedbackForm",()=>{const s=this.state,{isOpened:n,hideFeedback:r,triggerFocus:o,navigationButtonRef:i}=this.props,l=xoe();return a.jsx(ja,{isOpened:n,closeWindow:r,reFocus:o,navigationButtonRef:i,children:a.jsxs("form",{"data-testid":"feedback-form","aria-label":"feedback",onSubmit:this.handleSubmit,ref:this.formRef,onChange:this.handleOnChange,id:"feedback-form",children:[a.jsxs("div",{ref:this.divRef,tabIndex:-1,className:"feedback-form-row",children:[a.jsxs("label",{className:"feedback-form-label",htmlFor:"feedback-comments",children:[__("thinkorswim Web developers use your feedback to improve the platform. Need assistance with an issue?"),l,a.jsx(tt,{variant:"link","aria-label":"Contact support","data-testid":"contact-support-btn",ref:this.contactSupportButtonRef,onClick:this.displaySupportWindow,children:a.jsx(ot,{fontWeight:500,fontSize:it.fontSizes.medium,children:__("Contact support")})}),a.jsx("span",{children:__(".")})]}),a.jsx("textarea",{"data-testid":"feedback-comments",ref:this.commentInputRef,id:"feedback-comments",className:"feedback-input",placeholder:__("Tell us about your thinkorswim Web experience.")})]}),a.jsxs("div",{className:"feedback-form-row",children:[a.jsx("label",{className:"feedback-form-label",children:__("Overall, how satisfied are you with your site experience?")}),a.jsxs("div",{"aria-label":"Choose Satisfaction Level",role:"radiogroup",className:"feedback-form-radio",children:[a.jsx(XS,{"data-testid":"delighted",ariaLabel:"Delighted",id:"Ecstatic",onChange:()=>this.handleSatisfactionChange("Ecstatic"),name:sf,value:"Ecstatic",form:"feedback-form",children:a.jsx(X,{type:Y.Ecstatic,width:32,height:32,viewBox:"0 0 32 32",dataTestId:"ecstatic-icon",fill:"none",className:this.themeClass})}),a.jsx(XS,{ariaLabel:"Indifferent",id:"Meh",onChange:()=>this.handleSatisfactionChange("Meh"),name:sf,value:"Meh",form:"feedback-form",children:a.jsx(X,{type:Y.Meh,width:32,height:32,viewBox:"0 0 32 32",dataTestId:"meh-icon",fill:"none",className:this.themeClass})}),a.jsx(XS,{ariaLabel:"Annoyed",id:"Appalled",onChange:()=>this.handleSatisfactionChange("Appalled"),name:sf,value:"Appalled",form:"feedback-form",children:a.jsx(X,{type:Y.Appalled,width:32,height:32,viewBox:"0 0 32 32",dataTestId:"appalled-icon",fill:"none",className:this.themeClass})})]})]}),a.jsx("button",{disabled:s.error!==void 0,className:"primary feedback",type:"submit","data-testid":"submit-button",id:"submit-button",children:__("Send feedback")})]})})});R(this,"handleSubmit",s=>{var h,p;s.preventDefault();const n=this.state,{accountDescription:r,accountCode:o,tradingSystem:i,selectedSymbol:l,systemInfo:c,userId:d,flags:u}=this.props;n.error===void 0&&(this.checkValidity()?(this.props.submitFeedback({message:((h=this.commentInputRef.current)==null?void 0:h.value)??"",reaction:this.state.satisfaction,accountDescription:r,accountCode:o,systemInfo:c,selectedSymbol:l,tradingSystem:dk(i),userId:d,flags:u}),this.setState({error:Vh,satisfaction:""}),(p=this.formRef.current)==null||p.reset()):this.setState({error:__(Vh)}))});R(this,"checkValidity",()=>{var n;const s=(n=this.commentInputRef.current)==null?void 0:n.value;if(s&&s.replace(/\s/g,"")){const r={commentInputRefValue:s};return Object.keys(r).map(o=>r[o]).every(o=>o!=null)}});R(this,"handleOnChange",()=>{const s=this.state,n=this.checkValidity();n&&s.error&&this.setState({error:void 0}),!n&&s.error===void 0&&this.setState({error:__(Vh)})});R(this,"displaySupportWindow",s=>{s.preventDefault(),s.stopPropagation(),this.props.isMobileView?this.setState({displaySupportModal:!0}):this.props.displaySupport()});R(this,"handleSatisfactionChange",s=>{this.setState({satisfaction:s}),Ye({category:Ve.Drawers,action:Le.ClickedSatisfactionLevel,label:s})});this.state={error:Vh,satisfaction:"",displaySupportModal:!1},this.handleOnChange=yc(this.handleOnChange,300,{leading:!0})}componentDidMount(){this.props.resetFeedbackInfo()}componentDidUpdate(s,n,r){this.handleFocus()}render(){const s=this.props,{displaySupportModal:n}=this.state,r=n?a.jsxs(Dl,{onCloseClick:()=>this.setState({displaySupportModal:!1}),children:[a.jsx("div",{tabIndex:0,className:"modal-header","data-testid":"support-window-modal",children:__("Support")}),a.jsx(PL,{navigationButtonRef:this.contactSupportButtonRef,closeWindow:()=>this.setState({displaySupportModal:!1}),triggerFocus:this.props.triggerFocus}),a.jsx(ib,{isLoggedIn:s.isLoggedIn,isMobileView:!0,navigationButtonRef:this.contactSupportButtonRef})]}):null;return a.jsxs("div",{"data-testid":"feedback-window",className:"feedback-window-container",children:[s.feedbackSendingStatus===Io.Empty?this.renderFeedbackForm():a.jsx(t3e,{status:s.feedbackSendingStatus}),r]})}}const n3e=hn(s3e),r3e=e=>({isOpened:Er(e)===bt.Feedback,feedbackSendingStatus:e.feedback.feedback.status,tradingSystem:Mo(e),accountDescription:R5e(e),accountCode:O5e(e),selectedSymbol:mt(e),systemInfo:ck(!0),shouldFocus:e.focus.focusedId===ps.FEEDBACK_WINDOW,userId:ide(e),isLoggedIn:_c(e)}),o3e=e=>({resetFeedbackInfo(){e({type:f.ResetFeedback})},hideFeedback(){e(En())},submitFeedback(t){e({type:f.SendFeedback,...t})},triggerFocus(t){e({type:f.TriggerFocus,ref:t})},displaySupport(){e(Xde(bt.Support)),e(Us(ps.SUPPORT_WINDOW))}}),hk=Ln.withConsumer()(se(r3e,o3e)(n3e)),pk="Notifications",a3e=`${pk}, You have new notifications`,i3e=e=>{const t=()=>{e.displayNotification(!e.isOpened)},s=e.hasNotifications&&e.hasNewNotifications?a.jsx(X,{width:14,height:15,viewBox:"2 1 19 21",type:Y.BellAlert,dataTestId:"bell-alert-icon"}):a.jsx(X,{width:14,height:15,viewBox:"2 1 19 21",type:Y.Bell,dataTestId:"bell-icon"}),n=e.hasNotifications&&e.hasNewNotifications?a3e:void 0;return a.jsx(ir,{dataTestId:`notifications-button${e.hasNotifications&&e.hasNewNotifications?"-alert":""}`,ariaLabel:n,title:pk,onClick:t,icon:s,ariaExpanded:e.isOpened,navigationButtonRef:e.navigationButtonRef})},mk=()=>p7(new Date),gk=x(rb,e=>e.size>0),Sk=x(rb,y7,(e,t)=>e.some(s=>s.eventTime>t)),l3e=e=>({isOpened:Er(e)===bt.Notification,hasNotifications:gk(e),hasNewNotifications:Sk(e)}),c3e=e=>({displayNotification(t){t?(Et.unstable_batchedUpdates(()=>{e({type:f.ShowDrawerWindow,windowToShow:bt.Notification}),e(Us(ps.NOTIFICATION_WINDOW))}),mk()):Et.unstable_batchedUpdates(()=>{e(En()),e(Pc(!1))})}}),d3e=se(l3e,c3e)(i3e),u3e=e=>{const t=Ar(),s=()=>{e.displaySupport(),t(Us(ps.SUPPORT_WINDOW))};return a.jsx(ir,{dataTestId:"support-button",title:"Support",onClick:e.opened?e.hideSupport:s,ariaExpanded:e.opened,icon:a.jsx(X,{type:Y.Support,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"support-icon",fill:"icon.primary"}),navigationButtonRef:e.navigationButtonRef})},h3e=e=>({opened:Er(e)===bt.Support}),p3e=e=>({displaySupport(){e({type:f.ShowDrawerWindow,windowToShow:bt.Support})},hideSupport(){e(En())}}),m3e=se(h3e,p3e)(u3e),g3e=DL(OL),S3e=e=>({quotePermissions:e.quotePermissions,isOpened:Er(e)===bt.QuoteExchange,isFullWidth:!0,showDrawerHeader:!1,title:"Exchange status"}),f3e=se(S3e)(g3e),T3e=e=>({privacyModeEnabled:Ma(e)}),lb=se(T3e)(tr),cb=250;var mm=(e=>(e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.RIGHT="RIGHT",e))(mm||{});const jT=({isOpen:e,toggleOpen:t,className:s,children:n,alignment:r,hideExpander:o,hideTransition:i=!1})=>{const l=a.jsx(xc,{in:e,classNames:{enter:"expanded",enterActive:"expanded-active",enterDone:"expanded-done",exit:"collapsed",exitActive:"collapsed-active",exitDone:"collapsed-done"},mountOnEnter:!0,unmountOnExit:!0,timeout:cb,children:n}),c=e?n:null,d=()=>{switch(r){case"RIGHT":return"collapsable-panel__icon-left";case"LEFT":return"collapsable-panel__icon-right";case"BOTTOM":return"collapsable-panel__icon-bottom";default:return""}},u=o?null:a.jsx("div",{"aria-hidden":!0,className:Te("collapsable-panel__divider",s),"data-testid":"collapsable-panel-divider",onClick:()=>t(),children:a.jsx(X,{type:Y.DoubleArrow,className:Te(d(),!e&&"toggled"),width:10,height:18,viewBox:"0 0 10 18",dataTestId:"double-arrow-icon"})});return a.jsxs(a.Fragment,{children:[r==="LEFT"&&u,i?c:l,(r==="RIGHT"||r==="BOTTOM")&&u]})},y3e={GuestPass:"https://www.schwab.com/open-an-account"},fk=({accounts:e,selectAccount:t,tradingSystem:s,userSegment:n,selectedAccount:r})=>{const o=n!==void 0&&n===Bn.TOSPM,i=r?e.findIndex(l=>l.code===r.code):0;return a.jsx(Ei,{"data-testid":"account-dropdown",variant:Pe.secondary,renderAnchorButtonContent:()=>r&&Ra(r),values:o&&s===gt.LiveTrading?[]:e,getListItemKey:l=>l.code,onListItemClick:t,renderListItemContent:l=>a.jsxs(a.Fragment,{children:[a.jsx(hg,{account:l,formatAccount:Ra}),l.tradeable?a.jsx(lb,{value:l.balance}):go]}),anchorAriaLabel:"select account",selectedItemIndex:i})},C3e=e=>{const t=Mo(e);return{accounts:q1(e),selectedAccount:Tl(e),tradingSystem:t!==void 0?t:gt.LiveTrading,userSegment:xl(e)}},b3e=e=>({selectAccount:t=>{t.code!==""?e({type:f.AccountSelected,account:t}):e({type:f.AccountSelectionCleared})}}),E3e=se(C3e,b3e)(fk),Tk=e=>e.balancesHistory.balancesHistoryData,A3e=e=>e.balancesHistory.range,yk=e=>e.balancesHistory.timeAggregation,v3e=e=>e.balancesHistory.transactionsForAdjustedBalances.filter(s=>s.type&&!nye.includes(s.type)),I3e=x(Tk,v3e,yk,(e,t,s=ie.DAY)=>!e||e.length==0?[]:cye(e,t,s)),Ao=fe.DPR,x3e=2,w3e=24*Ao,O3e=100*Ao,R3e=40*Ao,D3e=2*Ao,Ck=Ao,L3e=[6*Ao,2*Ao],tn={top:0,left:0,right:16,bottom:w3e},ml={pointer:{font:`${13*Ao}px TDASans, sans-serif`,lineColor:"lightgrey",pillColor:"green",pillTextColor:Ca},chartInfo:{font:"12px TDASans, sans-serif",textColor:hi,backgroundColor:"rgba(255, 255, 255, 0.5)"},chart:{font:`${12*Ao}px TDASans, sans-serif`,sellColor:"red",buyColor:"green",gridColor:"lightgrey",chartLineColor:"#65CDE7",axisLabelTextColor:"grey",volumeColor:"rgba(255, 255, 255, 0.3)"},xAxisLabelFormat:"h:mmA",dashSize:2*Ao,drawPriceXAxisOffset:18*Ao},Ug=e=>e,Zu=x(Ug,e=>e.balancesHistory),BT=x(Ug,e=>e.adjustedBalances.map(t=>({time:t.timestamp,netLiq:t.endBalance}))),_3e=x(Ug,e=>e.zoomLevel),N3e=x(Ug,e=>e.width),P3e=x(N3e,e=>e-tn.left-tn.right),Vg=x(P3e,_3e,(e,t)=>e*t),k3e=x(Vg,Zu,(e,t)=>{if(!t.length)return e;const s=t.length;return e/s}),M3e=x(Vg,k3e,(e,t)=>[t/2,e-t/2]),oI=.1,aI=e=>{const t=e.filter(s=>Ut(s.netLiq)).map(s=>s.netLiq);return t.length?Math.min(...t):0},iI=e=>{const t=e.filter(s=>Ut(s.netLiq)).map(s=>s.netLiq);return t.length?Math.max(...t):0},Uc=e=>e,bk=x(Uc,e=>e.settings),Wg=x(bk,e=>e.chart),Ek=x(Wg,Rg),Ak=x(Wg,Dg),db=x(Wg,Lg),$3e=x(Wg,WN),j3e=x(bk,$C);x(Uc,e=>e.themeColors);const B3e=x(Uc,e=>e.width),Gg=x(B3e,e=>e-tn.left-tn.right),F3e=x(Uc,e=>e.height),kl=x(F3e,e=>e-tn.top-tn.bottom),Ju=x(Zu,M3e,(e,t)=>No().domain([0,e.length-1]).range(t)),H3e=x(Ju,Vg,(e,t)=>{const s=Math.floor(t/O3e),n=Math.max(s,x3e);return e.ticks(n)}),eh=x(kl,Zu,BT,(e,t,s)=>{const n=Math.min(aI(t),aI(s)),r=Math.max(iI(t),iI(s)),o=r-n;return No().domain([n-oI*o,r+oI*o]).range([e,0])}),U3e=x(eh,kl,(e,t)=>{const s=Math.floor(t/R3e);return e.ticks(s)}),V3e=x(Ju,eh,(e,t)=>bc().x((s,n)=>e(n)).defined(s=>Ut(s.netLiq)).y(s=>Ut(s.netLiq)?t(s.netLiq):Number.MAX_SAFE_INTEGER)),W3e=(e,t,s,n,r)=>o=>{if(!t.length)return o;const i=V3e(e),d=r4e(t,i,s,n,!1,void 0,void 0,r);return as([d])(o)},G3e=e=>({LinePositive:e[Ft.BUY],LineNegative:e[Ft.SELL],AreaPositive:e[Ft.BUY_FILL],AreaNegative:e[Ft.SELL_FILL]}),Y3e=(e,t,s,n,r)=>o=>{if(!t.length||!s.length)return o;const i=Ju(e),l=eh(e),c=kl(e),d=G3e(e.themeColors),u=q3e(t,s,i,l,d,c,n,r);return as([u])(o)},q3e=(e,t,s,n,r,o,i,l)=>c=>{const d=e.reduce((w,N,L)=>((N.netLiq||N.netLiq===0)&&w.push({x:L,y:N.netLiq}),w),[]),u=t.reduce((w,N,L)=>((N.netLiq||N.netLiq===0)&&w.push({x:L,y:N.netLiq}),w),[]),{AreaPositive:h,LinePositive:p,AreaNegative:m,LineNegative:g}=r,S=s4e(d,u,s,n),T=n4e(d,u,s,n),y=lm(S,h),b=lm(T,m),E=K3e(S,p),v=X3e(T,g),D=e4e(d,u,s,n,i,l);return as([b,v,y,E,D])(c)},K3e=(e,t)=>s=>{const n=e.reduce((r,o,i)=>{const l=e[i+1];return z3e(o,l)&&r.push(fc(o,l,t)),r},[]);return as(n)(s)},z3e=(e,t)=>{const s=e.y1,n=t==null?void 0:t.y1,r=e.y0,o=t==null?void 0:t.y0;return!!t&&!vk(s,r,n,o)&&Z3e(s,r,n,o)},X3e=(e,t)=>s=>{const n=e.reduce((r,o,i)=>{const l=e[i+1];return Q3e(o,l)&&r.push(fc(o,l,t)),r},[]);return as(n)(s)},Q3e=(e,t)=>{const s=e.y1,n=t==null?void 0:t.y1,r=e.y0,o=t==null?void 0:t.y0;return!!t&&!vk(s,r,n,o)&&J3e(s,r,n,o)},vk=(e,t,s,n)=>e===t&&s===n,Z3e=(e,t,s,n)=>e<=t&&s<n||e<t&&s<=n,J3e=(e,t,s,n)=>e>=t&&s>n||e>t&&s>=n,e4e=(e,t,s,n,r,o)=>i=>{const l=e.reduce((c,d,u)=>{const h=t[u],p=e[u+1],m=t[u+1];return t4e(d,h,p,m)&&c.push(mo(s(d.x),n(d.y),s(p.x),n(p.y),r,o)),c},[]);return as(l)(i)},t4e=(e,t,s,n)=>t!==void 0&&s!==void 0&&n!==void 0&&e.x===t.x&&e.y===t.y&&s.x===n.x&&s.y===n.y;function Ik(e,t){return e.find((s,n)=>{if(s.x<t.x&&(n===e.length-1||e[n+1].x>t.x))return s})}const s4e=(e,t,s,n,r)=>{const o=UN(e,t),i=[];return e.forEach((l,c)=>{const d=t[c].y,u=l.y,h=l.x,p=Math.max(u,d),m=d,g=h,S=p,T=i.length;if(T>0&&wk(S,m,i[T-1].y1,i[T-1].y0)){const y=Ik(o,l);if(y){const b={x:y.x,y0:y.y,y1:y.y};i.push(b)}}i.push({x:g,y0:m,y1:S})}),xk(i,s,n)},xk=(e,t,s)=>e.reduce((n,r)=>(n.push({x:t(r.x),y0:s(r.y0),y1:s(r.y1)}),n),[]),n4e=(e,t,s,n)=>{const r=UN(e,t),o=[];return e.forEach((i,l)=>{const c=t[l].y,d=i.y,u=i.x,h=Math.min(d,c),p=c,m=u,g=h,S=o.length;if(S>0&&wk(g,p,o[S-1].y1,o[S-1].y0)){const T=Ik(r,i);if(T){const y={x:T.x,y0:T.y,y1:T.y};o.push(y)}}o.push({x:m,y0:p,y1:g})}),xk(o,s,n)},wk=(e,t,s,n)=>s>n&&e<=t||s<n&&e>=t||s>=n&&e<t||s<=n&&e>t,r4e=(e,t,s,n,r,o,i,l)=>c=>(o4e(e,t,s,n,l)(c),c),o4e=(e,t,s,n,r)=>o=>{o.save(),o.beginPath(),o.strokeStyle=s,o.lineWidth=n||Ck,o.lineJoin="round",r&&o.setLineDash(r),t.context(o)(e),o.stroke(),o.restore()},a4e=(e,t,s,n,r,o,i)=>(e.forEach(l=>{const c=t(l);if(r.textAlign="center",s[l]){const d=et(s[l].time).format(n),u=r.measureText(d);c>u.width/2&&c+u.width/2<o&&r.fillText(d,c,i+ml.drawPriceXAxisOffset)}}),r),i4e=e=>t=>{const s=H3e(e),n=Ju(e),r=kl(e),o=Vg(e),i=Ek(e),l=Ak(e),c=db(e),d=j3e(e),u=Zu(e);return u.length&&(t.font=i,t.fillStyle=c,t.strokeStyle=l,a4e(s,n,u,d,t,o,r)),t},l4e=e=>t=>{const s=U3e(e),n=eh(e),r=Gg(e),o=Ek(e),i=Ak(e),l=db(e);t.font=o,t.textAlign="right",t.textBaseline="bottom",t.fillStyle=l,t.strokeStyle=i,t.lineWidth=.5*fe.DPR;const d=s.length>0&&s.every(u=>u%1e3===0)?O1:Sn;return s.forEach(u=>{const h=n(u);t.beginPath(),t.moveTo(0,h),t.lineTo(r,h),t.stroke(),t.fillText(d(u),r,h)}),t},c4e=(e,t,s)=>{if(t===null||s===null)return null;const n=i4e(e),r=l4e(e),o=kg(e.width,e.height,db(e)),i=as([o,n,r]),l=Y3e(e,Zu(e),BT(e),$3e(e),D3e),c=e.theme==="LIGHT"?oe.OFF_BLACK:oe.MERCURY,d=W3e(e,BT(e),c,Ck,L3e),u=xi(e),h=qs(t);if(h){const p=u([h]),m=Xu(tn.left,tn.top)(p),g=i(m),S=l(g),T=d(g);Sc(S),Sc(T)}},d4e=is(c4e),u4e=x(Uc,e=>e.settings.pointer),Ok=x(u4e,e=>e.lineColor),h4e=x(Uc,e=>e.hoveredChart),p4e=(e,t,s,n)=>{const r=h4e(e),o=Gg(e),i=kl(e),l=o+tn.left,c=i+tn.top;let d;return t.clearRect(0,0,l+tn.right,c+tn.bottom),r===ys.AccountHistory&&(m4e(t,e,s),d=g4e(t,e,n,s)),t.beginPath(),d},m4e=(e,t,s)=>{const n=Ju(t),r=Gg(t),o=kl(t),i=Ok(t),l=r+tn.left,c=o+tn.top;if(s<l&&s>tn.left&&n){const d={color:i,level:s,line:{from:tn.top,to:c},dash:[ml.dashSize,ml.dashSize]};Pg(e,d);const u=s-tn.left,h=Math.round(n.invert(u)),p=t.balancesHistory.length,m=h<0?0:h>=p?p-1:h,g=t.balancesHistory[m]!==void 0?t.balancesHistory[m].time:new Date().getTime(),S=et(g).toDate();S4e(e,t.settings,S,c,s)}},g4e=(e,t,s,n)=>{const r=eh(t),o=Gg(t),i=kl(t),l=Ok(t),c=o+tn.left,d=i+tn.top;if(s<d&&s>tn.top){const u=r.invert(s-tn.top),h={color:l,level:s,line:{from:tn.left,to:c},dash:[ml.dashSize,ml.dashSize]};return GC(e,h),VC(e,t.settings,.01,u,c,s,n,void 0,void 0),u}},S4e=(e,t,s,n,r)=>{const o=ml.pointer.font,i=t.pointer.pillColor,l=t.pointer.pillTextColor,c=t.xAxisLabelFormat,d=et(s).format(c);WC(e,d,i,l,o,n,r)},f4e=e=>{const t=B.useRef(void 0),s=B.useRef(null),[,n]=B.useState(0),[,r]=B.useState(0),[o,i]=B.useState(void 0),[l,c]=B.useState(void 0),d=Tn(Tk),u=Tn(I3e),h=(T,y,b)=>{i(T),c(y)},p=()=>{i(void 0),c(void 0)},m=(T,y,b)=>{o&&t.current&&(n(y),r(b),h(ys.AccountHistory,t.current))},g=(T,y,b,E)=>{t.current=p4e(T,y,b,E)},S=y4e(e.themeColors,xt.YEAR1,ie.DAY);return a.jsx("div",{id:"charts-wrapper-account-history","data-testid":"charts-wrapper-account-history",children:a.jsx(wg,{width:e.width,height:e.height,settings:S,zoomLevel:1,balancesHistory:d,adjustedBalances:u,chartHoverDetectRef:s,hoveredChart:o,hoveredPrice:l,renderChart:d4e,renderOnMove:g,onMouseMove:m,onMouseEnter:()=>h(ys.AccountHistory),onMouseLeave:p,theme:e.theme,themeColors:e.themeColors})})},T4e=j.memo(_l(hn(f4e))),y4e=is((e,t,s)=>{const n=ml,r=UP(t,s),o=e!==void 0?{pointer:{...n.pointer,pillColor:e[Ft.SELECTED],lineColor:e[Ft.PRIMARY_BTN]},chart:{...n.chart,sellColor:e[Ft.SELL],buyColor:e[Ft.BUY],gridColor:e[Ft.DISABLED],chartLineColor:e[Ft.AQUA],axisLabelTextColor:e[Ft.DISABLED],volumeColor:e[Ft.PAGE_BACKGROUND]}}:{};return{...n,...o,xAxisLabelFormat:__("__locale")==="__locale"?r.dateFormat:r.internationalDateFormat}}),C4e=A.h3`
  color: ${({theme:e})=>e.colors.text.primary};
`;var b4e={};const E4e=()=>{const[e,t]=Lo(sn.EXPANDED_ACCOUNT_HISTORY_CHART,Xe.is,!0),s=Ar(),n=Tn(Xj),r=Tn(A3e),o=Tn(yk);B.useEffect(()=>()=>{s(hT())},[]),B.useEffect(()=>{const c=()=>{if((n==null?void 0:n.code)!==void 0){const d=sye[r??zp.YEAR],u=tD(d).range;s(SL(n.code,r,o)),s(fL(n.code,u.startTime,u.endTime))}};e?b4e.VITE_ENV!==Ga.Prod?setTimeout(c,300):c():s(hT())},[e,n==null?void 0:n.code]);const i=()=>{t(!e)},l=()=>{window.dispatchEvent(new Event("resize_charts"))};return a.jsx(vt,{children:a.jsxs("section",{id:"account-history-section","data-testid":"account-history-section",children:[a.jsx($o,{ariaLabel:`${e?"Hide":"Show"} Account History`,isExpandedDown:e,onClick:i,children:a.jsx(C4e,{children:__("Account History")})}),e&&a.jsx(Da,{onResize:l,children:a.jsx(T4e,{expanded:!0,generalFontSize:CC(),isAccountHistoryChart:!0})})]})})},A4e=A(tt)`
  position: relative;
  top: ${({theme:e})=>e.space.none};
  margin-left: ${({theme:e})=>e.space.xxSmall};
  padding: ${({theme:e})=>e.space.none};
`,v4e=A.div`
  display: flex;
  justify-content: space-between;
  white-space: nowrap;
  color: ${({theme:e})=>e.colors.text.disabled};
  font-size: 1.2rem;
  margin-bottom: ${({theme:e})=>e.space.xxxSmall};
`,I4e=A.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: ${({theme:e})=>e.space.xxSmall} ${({theme:e})=>e.space.none}
    ${({theme:e})=>e.space.none};
  margin: ${({theme:e})=>e.space.xxSmall};
  margin-left: ${({theme:e})=>e.space.none};
`,x4e=A.div`
  font-size: ${({theme:e})=>e.fontSizes.large};
`,w4e=({cashAndSweep:e,cashAvaiForWithdrawal:t,simulatedTrading:s,onResetClick:n})=>{const r=t||e,o=t?"Cash for Withdrawal":"Cash";return a.jsxs(I4e,{children:[a.jsxs(v4e,{children:[a.jsx("span",{"data-testid":"cash-summary-label",children:__(o)}),s&&a.jsx(A4e,{variant:"link",onClick:n,"data-testid":"reset-button",children:a.jsx(ot,{"aria-label":"Reset",children:"Reset"})})]}),a.jsx(x4e,{"data-testid":"cash-summary-value",children:a.jsx(lb,{value:r})})]})},O4e=j.memo(w4e),lI=A.label`
  color: ${({theme:{colors:e}})=>e.text.disabled};
  display: block;
  margin: ${({theme:e,marginTop:t})=>t?`${t}px`:e.space.none}
    ${({theme:e})=>e.space.none} ${({theme:e})=>e.space.xSmall}
    ${({theme:e})=>e.space.none};
  font-size: ${({theme:e})=>e.fontSizes.small};
`,R4e=A.input`
  font-size: ${({theme:e})=>e.fontSizes.medium};
  margin: ${({theme:e})=>e.space.none} ${({theme:e})=>e.space.none}
    ${({theme:e})=>e.space.xxxSmall};

  ::-webkit-inner-spin-button,
  ::-webkit-outer-spin-button {
    appearance: none;
    margin: ${({theme:e})=>e.space.none};
  }
  /* stylelint-disable */
  -moz-appearance: textfield;
  /* stylelint-enable */
  &:disabled {
    color: ${({theme:e})=>e.colors.input.primary};
    background-color: ${({theme:e})=>e.colors.input.disabled};
    border: ${({theme:e})=>`${e.shape.borderWidth.primary}px`} solid
      ${({theme:e})=>e.colors.input.disabled};
  }
`,D4e=A(tt)`
  align-self: flex-end;
  background-color: ${({theme:e,disabled:t})=>t?e.colors.action.disabled:e.colors.border.secondary};
  color: ${({theme:e})=>e.colors.text.tertiary};
  font-size: ${({theme:e})=>e.fontSizes.medium};
  padding: 6px 30px;
  margin-top: ${({theme:e})=>e.space.xSmall};
  border: ${({theme:e})=>`${e.shape.borderWidth.secondary}px`} solid
    ${({theme:e})=>e.colors.border.secondary};

  &:disabled {
    color: ${({theme:e})=>e.colors.text.tertiary};
    border: ${({theme:e})=>`${e.shape.borderWidth.secondary}px`} solid
      ${({theme:e})=>e.colors.border.secondary};
  }
`,L4e=A(tt)`
  padding: 6px 30px;
  margin-right: ${({theme:e})=>e.space.small};
  color: ${({theme:e})=>e.colors.text.primary};
  font-weight: normal;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  border: ${({theme:e})=>`${e.shape.borderWidth.secondary}px`} solid
    ${({theme:e})=>e.colors.border.secondary};
  border-radius: 15px;
`,_4e=A.div`
  margin-top: ${({theme:e})=>e.space.medium};
`,N4e=e=>({accounts:Mm(e),selectedAccount:Qj(e),tradingSystem:gt.PaperMoney,userSegment:xl(e)}),P4e={selectAccount:Dj},k4e=se(N4e,P4e)(fk),M4e="Privacy mode",$4e=e=>a.jsxs("div",{id:"privacy-toggle-component","data-testid":"privacy-toggle-component",children:[a.jsx("input",{type:"checkbox",id:"privacy-toggle","data-testid":"privacy-toggle",className:"off-screen","aria-label":M4e,checked:e.privacyModeEnabled,onChange:()=>e.setPrivacyMode(!e.privacyModeEnabled)}),a.jsx("label",{htmlFor:"privacy-toggle",className:"privacy-toggle__icon",children:e.privacyModeEnabled?a.jsx(X,{type:Y.PrivacyEnabled,width:20,height:18,viewBox:"1 2 22 19",dataTestId:"privacy-enabled-icon",fill:"icon.primary"}):a.jsx(X,{type:Y.PrivacyDisabled,width:20,height:18,viewBox:"1 2 22 19",dataTestId:"privacy-disabled-icon",fill:"icon.primary"})})]}),j4e=e=>({privacyModeEnabled:Ma(e)}),B4e=e=>({setPrivacyMode:t=>{e(h3(t)),gw(t)}}),F4e=se(j4e,B4e)($4e),Rk=({isExpanded:e,toggleExpanded:t,ariaLabel:s,className:n})=>a.jsx("button",{"aria-label":`${e?"Collapse":"Expand"} ${s}`,"data-testid":"expand-collapse-button",onClick:t,className:n,children:e?a.jsx(X,{type:Y.Collapse,width:18,height:18,viewBox:"3 3 18 18",dataTestId:"collapse-icon",fill:"icon.primary"}):a.jsx(X,{type:Y.Expand,width:18,height:18,viewBox:"3 3 18 18",dataTestId:"expand-icon",fill:"icon.primary"})}),H4e=A.header`
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: ${({theme:e,padding:t})=>t||e.space.medium};
`,U4e=A.h1`
  ${br.typography(sr.title2)}
  white-space: nowrap;
  display: flex;
  align-items: center;
  margin: 0;
  cursor: ${({onClick:e})=>e?"pointer":"auto"};
`,V4e=A.div`
  display: flex;
  align-items: center;
  margin-right: ${({theme:e})=>e.space.xSmall};
`,W4e=A(X)`
  margin-right: ${({theme:e})=>e.space.xSmall};
`,G4e=A(Rk)`
  align-self: flex-end;
  padding-block: 0;
  padding-inline: 0;
`,Yg=({title:e,icon:t,showPrivacyToggle:s=!1,handleExpandCollapse:n,isExpanded:r=!1,onClick:o,padding:i,dataTestId:l})=>a.jsxs(H4e,{"data-testid":l,padding:i,children:[a.jsxs(U4e,{onClick:o||void 0,role:o?"button":void 0,"data-testid":"primary-header-title",children:[o&&a.jsx(W4e,{type:Y.ChevronLeft,width:12,height:8,viewBox:"5 9 14 9",dataTestId:"chevron-left-icon"}),a.jsx(V4e,{children:t}),__(e)]}),s&&a.jsx(F4e,{}),n&&a.jsx(tc,{children:a.jsx(G4e,{isExpanded:r,toggleExpanded:n,ariaLabel:e})})]}),ub=e=>{switch(e){case gt.LiveTrading:return __("Live Trading");case gt.PaperMoney:return __("paperMoney®")}},Y4e=e=>{const[t,s]=B.useState(e.tradingSystem),{userSegment:n,liveSupportChatId:r,setIsCloseChatPromptShown:o}=e,i=c=>{let d;if(c!==t){d=t===gt.PaperMoney?gt.LiveTrading:gt.PaperMoney;const u=n!==void 0&&n!==Bn.TOSPM;if(r>pr.CHAT_NOT_STARTED){const h=hx(d);o(!0,u?h:void 0);return}return s(d),u?e.selectTradingSystem(d):n}},l=()=>a.jsxs("p",{className:"pm-message","data-testid":"pm-message",children:[__("This is a paperMoney account.")," ",a.jsx("a",{href:y3e.GuestPass,target:"_blank noopener noreferrer",className:"link","data-testid":"create-account-link",children:__("Open a live account")})," ",__("to access live trading.")]});return a.jsx(a.Fragment,{children:n===Bn.TOSPM?l():a.jsxs(ug,{className:Te("blue","trading-system-toggle"),label:ub,value:t,leftValue:"Real Live Trading",rightValue:"Paper Money",name:e.toggleName,onToggle:i,disable:!1,ariaLabel:"Trading System Toggle",children:[gt.LiveTrading,gt.PaperMoney]})})},q4e=e=>{const t=Mo(e),s=ku(e);return{tradingSystem:t??gt.LiveTrading,userSegment:xl(e),liveSupportChatId:s}},K4e={selectTradingSystem:hx,setIsCloseChatPromptShown:pc},z4e=se(q4e,K4e)(Y4e),X4e=5e-5,nf=1e5,rf="100,000.00",Q4e=1e7;function Z4e({value:e}){const t=new Intl.NumberFormat(void 0,{style:"percent"}),s=r=>r>0?"positive":r<0?"negative":"neutral",n=Math.abs(e)<X4e;return a.jsx("div",{className:s(e),"data-testid":"percentage",children:n?t.format(0):gr(e)})}function FT(e){return a.jsx("div",{className:"title",children:a.jsx("span",{children:__(e)})})}function Ha(e,t,s,n){return a.jsxs("div",{className:"item","data-testid":n,children:[FT(t),a.jsx("div",{className:s,"data-testid":`${n}-value`,children:a.jsx(lb,{value:e})})]})}class J4e extends j.Component{constructor(){super(...arguments);R(this,"toggleName",`trading-system-toggle-${al()}`);R(this,"state",{adjustCashAmount:nf,adjustCashDisplay:rf});R(this,"updateInput",s=>{const n=Z1(s.target.value,!0);if(n){if(Math.abs(n.numericValue)>=Q4e)return;this.props.clearAdjustCashError(),!isNaN(parseFloat(n.displayValue))&&this.setState({adjustCashAmount:n.numericValue}),this.setState({adjustCashDisplay:n.displayValue})}});R(this,"onBlur",()=>{let s=Lx(this.state.adjustCashAmount,2);(s===""||Kw(s))&&(s="0.00"),this.setState({adjustCashDisplay:s})});R(this,"handleSave",()=>{this.props.isResetBalancesAndPositionsChecked?this.props.setBalance(this.props.selectedAdjustCashAccountCode,this.state.adjustCashAmount):this.props.adjustCashSubmit(this.props.selectedAdjustCashAccountCode,this.state.adjustCashAmount)});R(this,"handleKeyDown",s=>{s.key===we.Enter&&(s.preventDefault(),this.handleSave())});R(this,"handleResetCheckboxChange",()=>{const{setIsResetBalancesAndPositionsChecked:s,clearAdjustCashError:n,isResetBalancesAndPositionsChecked:r}=this.props;n(),s(!r)})}componentDidUpdate(s){const{isResetBalancesAndPositionsChecked:n}=this.props;n&&!s.isResetBalancesAndPositionsChecked&&this.setState({adjustCashAmount:nf,adjustCashDisplay:rf})}shouldComponentUpdate(s,n){return!fs(s,this.props)||!fs(n,this.state)}static getDerivedStateFromProps(s,n){return s.isAdjustOpen?n:{adjustCashAmount:nf,adjustCashDisplay:rf}}render(){const{selectedAccount:s,dayTradesLeft:n,netLiquidity:r,cashAndSweep:o,cashAvaiForWithdrawal:i,optionBuyingPower:l,stockBuyingPower:c,forexBuyingPower:d,dayTradeBuyingPower:u,plDay:h,plDayPercent:p,simulatedTrading:m,accountSummaryDividerPressed:g,isAccountSummaryDividerPressed:S,isAdjustCashSubmitDisabled:T,isAdjustOpen:y,adjustCashError:b,adjustCash:E,adjustCashClose:v,isResetBalancesAndPositionsChecked:D,unavailableAccount:w,flags:N}=this.props,{adjustCashDisplay:L}=this.state,P=Ha(r,"Account Value","value","account-value"),F=(re,ae)=>ae!==void 0&&re!==void 0&&ae!==re?a.jsxs(a.Fragment,{children:[Ha(ae,"Option Buying Power","value","option-buying-power"),Ha(re,"Stock Buying Power","value","stock-buying-power")]}):re!==void 0&&re!==0?Ha(re,"Buying Power","value","buying-power"):ae!==void 0?Ha(ae,"Buying Power","value","buying-power"):null,O=d!==void 0?Ha(d,"Forex Buying Power","value","forex-buying-power"):null,H=u!==void 0&&u!==c?Ha(u,"Day Trade Buying Power","value","day-trade-buying-power"):null,C=h!==void 0?Ha(h,"P/L Day $",["value",Zn("plDay",h)].join(" "),"pl-day-money"):null,M=p!==void 0&&!isNaN(p)?a.jsxs("div",{className:"item",children:[FT("P/L Day %"),a.jsx("div",{className:"value",children:a.jsx(Z4e,{value:p})})]}):null,q=n!==void 0&&s!==void 0?a.jsxs("div",{className:"item","data-testid":"day-trades-left",children:[FT("Day Trades Left"),a.jsx("div",{className:"value",children:n})]}):null,W=a.jsxs("div",{className:"account-summary__collapsible",children:[a.jsxs(Ii,{"data-testid":"adjust-cash-menu",screenReaderOnlyTitle:"Adjust Cash Menu",closeButtonTop:!0,isOpen:y,onClose:v,activePage:"AccountSummary",children:[a.jsx(lI,{children:__("Account")}),y&&a.jsx(k4e,{}),a.jsx(lI,{marginTop:12,htmlFor:"adjust-cash-input","data-testid":"adjust-cash-label",children:D?__("Set New Balance to:"):__("Add Cash")}),a.jsx(R4e,{id:"adjust-cash-input","data-testid":"adjust-cash-input",value:L,type:"text",min:1,onChange:this.updateInput,onKeyDown:this.handleKeyDown,onBlur:this.onBlur,disabled:D}),a.jsx(_4e,{children:a.jsx(Mn,{id:"resetCash",label:"Reset All Balances and Positions",isChecked:D,onChange:this.handleResetCheckboxChange})}),a.jsx(ds,{height:34,children:b&&a.jsx(vi,{warnings:["Adjusting account balance was not successful. Please try again."]})}),a.jsxs(ds,{textAlign:"end",children:[a.jsx(L4e,{id:"adjust-cash-cancel","data-testid":"adjust-cash-cancel",onClick:v,children:__("Cancel")}),a.jsx(D4e,{"data-testid":"adjust-cash-submit",onClick:this.handleSave,disabled:T,children:__("Apply")})]})]}),a.jsx(z4e,{toggleName:this.toggleName}),a.jsx(E3e,{}),w?a.jsx(Cg,{}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"summary",children:[P,F(c,l),H,O,q]}),a.jsxs("div",{className:"footer",children:[a.jsx(O4e,{cashAndSweep:o,cashAvaiForWithdrawal:i,onResetClick:E,simulatedTrading:m}),C,M]}),N&&Js(Cs.SHOW_ACCOUNT_HISTORY_BLUE,N)&&a.jsx(E4e,{})]}),m&&a.jsxs(a.Fragment,{children:[r===void 0&&o===void 0&&a.jsx("div",{className:"zero-balance-error","data-testid":"zero-balance-error",children:__("If balance is zero, please refresh browser to update.")}),a.jsx(yC,{ariaLabel:"Banner: These are simulated values",dataTestId:"simulated-trading-banner",children:a.jsx("span",{"aria-hidden":!0,children:__("These are simulated values.")})})]})]}),z=a.jsx(jT,{alignment:mm.BOTTOM,isOpen:S,toggleOpen:g,className:"account-summary-divider",children:W});return a.jsxs("div",{className:"account-summary flex-column",children:[a.jsx(Yg,{title:"Account Summary",icon:a.jsx(X,{width:20,height:20,viewBox:"2 2 20 20",type:Y.AccountSummary,dataTestId:"account-summary-icon",fill:"none"}),showPrivacyToggle:!0,dataTestId:"account-summary-header"}),a.jsxs("div",{className:Te("account-summary__container",S&&"account-summary__container--open"),children:[a.jsx(tc,{children:z}),a.jsx(mc,{children:W})]})]})}}const Oi=x(W1,e=>{const t=e.selected;return t!==void 0?e.statements.get(t.code):e.statement}),e6e=x(Oi,e=>e==null?void 0:e.stockBuyingPower),t6e=x(Oi,e=>e==null?void 0:e.optionBuyingPower),s6e=x(Oi,e=>e==null?void 0:e.forexBuyingPower),n6e=x(Oi,e=>e==null?void 0:e.dayTradeBuyingPower),r6e=x(Oi,e=>e==null?void 0:e.cashAndSweep),o6e=x(Oi,e=>e==null?void 0:e.cashAvaiForWithdrawal),a6e=x(Oi,e=>e==null?void 0:e.netLiquidity),i6e=x(Oi,e=>e==null?void 0:e.dayTradesLeft),l6e=e=>{const t=q_(e);return{selectedAccount:Pa(e),dayTradesLeft:i6e(e),stockBuyingPower:e6e(e),optionBuyingPower:t6e(e),forexBuyingPower:s6e(e),dayTradeBuyingPower:n6e(e),cashAndSweep:r6e(e),cashAvaiForWithdrawal:o6e(e),netLiquidity:a6e(e),plDay:t.plDay,plDayPercent:t.plDayPercent,simulatedTrading:Mo(e)===gt.PaperMoney,selectedAdjustCashAccountCode:xw(e)??"",isAccountSummaryDividerPressed:b9(e),isAdjustOpen:Gj(e),isAdjustCashSubmitDisabled:Wj(e),isResetBalancesAndPositionsChecked:qj(e),adjustCashError:Yj(e),unavailableAccount:Ic(e)}},c6e={accountSummaryDividerPressed:d9,adjustCash:Bj,adjustCashClose:Fj,adjustCashSubmit:Mj,clearAdjustCashError:Lj,setBalance:_j,setIsResetBalancesAndPositionsChecked:kj},Dk=Ln.withConsumer()(se(l6e,c6e)(J4e)),d6e=({href:e,onClick:t,ariaLabel:s,title:n,className:r,dataTestId:o,icon:i})=>{const l=`nav-button nav-link ${r!==void 0?r:""}`;return a.jsxs("a",{target:"_blank",rel:"noreferrer",href:e,"aria-label":s,"data-testid":o,className:l,onClick:t,children:[i,a.jsx("span",{className:"nav-button-content",children:__(n)})]})},u6e=({isMobile:e=!1})=>a.jsx(d6e,{dataTestId:"schwab-network-link",title:e?"Schwab Network":"",ariaLabel:"Schwab Network",href:"https://schwabnetwork.com/iframe?autoplay=true&watchnow=true&src=tosweb",icon:e?a.jsx(X,{type:Y.SchwabNetworkMobile,width:24,height:5,viewBox:"0 0 24 5",dataTestId:"schwab-network-icon"}):a.jsx(X,{type:Y.SchwabNetwork,height:48,width:48,viewBox:"0 0 48 48",dataTestId:"schwab-network-icon"}),onClick:()=>{Ye({category:Ve.Click,action:Le.SchwabNetwork,label:ks.OpenSchwabNetwork})}}),Lk=hn(u6e),h6e=e=>a.jsx(hk,{...e,isMobileView:!0}),p6e=e=>{switch(e){case Dn.orderDefaults:return XP;case Dn.audioNotifications:return qP;default:return BL}},cI=e=>{switch(e){case Dn.orderDefaults:return __("Order Defaults");case Dn.audioNotifications:return __("Audio Notifications");default:return __("Profile")}},m6e=({hasNotifications:e,hasNewNotifications:t,showAlertBook:s,userProfileWindow:n,onProfileMenuModalClose:r,onNotificationModalClose:o,showEducationButton:i,activePage:l,openSection:c,flags:d,userSegment:u,isLoggedIn:h})=>{const p=e&&t?()=>a.jsx(X,{width:14,height:15,viewBox:"2 1 19 21",type:Y.BellAlert,dataTestId:"bell-alert-icon"}):()=>a.jsx(X,{width:14,height:15,viewBox:"2 1 19 21",type:Y.Bell,dataTestId:"bell-icon"}),m=l===ge.Watchlist,g=l===ge.Scans,S=n===Dn.orderDefaults||n===Dn.audioNotifications;return a.jsxs("div",{"data-testid":"mobile-menu-window",className:"mobile-menu native-scroll",children:[a.jsxs("div",{className:"mobile-menu__section",children:[a.jsx(mc,{children:a.jsx(Dk,{})}),a.jsx("div",{className:"mobile-menu__line scan-mobile-menu-nav",children:a.jsx(ir,{isActive:g,onClick:()=>{c&&c(ge.Scans)},icon:a.jsx(X,{type:Y.Scans,viewBox:"2 2 20 20",dataTestId:"scans-icon",isActive:g}),title:"Scans",ariaLabel:"Scans",id:"scans-nav-btn"})}),a.jsx("div",{className:"mobile-menu__line watchlist-mobile-menu-nav",children:a.jsx(ir,{isActive:m,onClick:()=>{c&&c(ge.Watchlist)},icon:a.jsx(X,{type:Y.Watchlist,viewBox:"-2 -2 25 25",dataTestId:"watchlist-icon",isActive:m}),title:"Watchlist",ariaLabel:"Watchlist",id:"watchlist-nav-btn"})}),a.jsx("div",{className:"mobile-menu__line",children:a.jsx(Gl,{ModalContent:p6e(n),modalHeaderText:dg,customHeaderText:cI(n),ariaLabel:cI(n),ModalHeaderIcon:()=>a.jsx(X,{type:Y.User,width:15,height:15,viewBox:"0 0 20 20",dataTestId:"user-icon"}),hideModalHeaderIcon:S,showBackButton:S,onModalClose:r})}),a.jsx("div",{className:"mobile-menu__line",children:a.jsx(Gl,{ModalContent:s?ak:sk,modalHeaderText:"Notifications",customHeaderText:s?"Alerts":void 0,ModalHeaderIcon:s?()=>a.jsx(X,{width:14,height:15,viewBox:"2 1 19 21",type:Y.Bell,dataTestId:"bell-icon"}):p,showBackButton:s,onModalOpen:mk,onModalClose:o})}),d&&Js(Cs.SHOW_FEEDBACK_BLUE,d)&&a.jsx("div",{className:"mobile-menu__line",children:a.jsx(Gl,{ModalContent:h6e,modalHeaderText:"Feedback",ModalHeaderIcon:()=>a.jsx(X,{type:Y.Feedback,width:14,height:14,viewBox:"2 0 22 22",dataTestId:"feedback-icon"})})}),a.jsx("div",{className:"mobile-menu__line",children:a.jsx(Gl,{ModalContent:ib,modalHeaderText:"Support",ModalHeaderIcon:()=>a.jsx(X,{type:Y.Support,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"support-icon",fill:"icon.primary"})})}),i&&a.jsx("div",{className:"mobile-menu__line",children:a.jsx(ik,{})}),h&&u!==Bn.TOSPM&&a.jsx("div",{className:"mobile-menu__line",children:a.jsx(Gl,{ModalContent:HL,modalHeaderText:"Schwab.com",ModalHeaderIcon:()=>a.jsx(X,{type:Y.SchwabCursor,width:24,height:24,viewBox:"0 0 24 24",dataTestId:"schwab-cursor-icon"})})}),a.jsx("div",{"data-testid":"mobile-button",className:"mobile-menu__line",children:a.jsx(Lk,{isMobile:!0})}),a.jsx("div",{className:"mobile-menu__line",children:a.jsx(NL,{})})]}),a.jsxs("div",{className:"mobile-menu__section",children:[a.jsx("div",{className:"mobile-menu__line",children:a.jsx(LL,{})}),a.jsx("div",{className:"mobile-menu__line no-border-bottom",children:a.jsx(RL,{})})]})]})},g6e=e=>({activePage:ms(e),userSegment:xl(e),isLoggedIn:_c(e)}),S6e=e=>({openSection:t=>{e(ws(t))}}),f6e=Ln.withConsumer()(se(g6e,S6e)(m6e)),T6e={[bt.Notification]:{text:"Notifications",icon:a.jsx(X,{width:16,height:20,viewBox:"2 1 15 21",type:Y.Bell,dataTestId:"bell-icon"})},[bt.Feedback]:{text:"Feedback",icon:a.jsx(X,{type:Y.Feedback,width:14,height:14,viewBox:"2 2 14 14",dataTestId:"feedback-icon",fill:"icon.secondary_reverse"})},[bt.Support]:{text:"Support",icon:a.jsx(X,{type:Y.Support,width:14,height:14,viewBox:"2 2 20 20",dataTestId:"support-icon",fill:"icon.secondary_reverse"})},[bt.Profile]:{text:dg,icon:a.jsx(X,{type:Y.User,width:15,height:15,viewBox:"0 0 20 20",dataTestId:"user-icon",fill:"icon.secondary_reverse"})},[bt.QuoteExchange]:{customRender:a.jsx("div",{className:"exchange-status-header",children:a.jsx(pT,{})})},[bt.Menu]:void 0,[bt.None]:void 0,[bt.Schwab]:{text:"Schwab.com",icon:a.jsx(X,{width:24,height:24,viewBox:"0 0 24 24",dataTestId:"schwab-cursor-icon",type:Y.SchwabCursor})}},y6e=e=>{const{hasNotifications:t,hasNewNotifications:s,showAlertBook:n,userProfileWindow:r,showEducationButton:o,onNotificationModalClose:i,onProfileMenuModalClose:l,drawerWindowDisplayed:c,openMenu:d,closeAllModals:u}=e,h=()=>c!==bt.None,p=()=>{const b=T6e[c];return b!==void 0?b:{}},m=h(),{customRender:g,text:S,icon:T}=p(),y=b=>{b.stopPropagation(),m?u():d()};return a.jsxs(a.Fragment,{children:[a.jsx(LP,{customRender:g,text:S,icon:T,renderCloseIcon:!0,showBackButton:!0,onCloseClick:d}),a.jsxs("button",{"data-testid":"mobile-menu",onClick:y,onTouchEnd:b=>{m&&b.preventDefault()},children:[m?a.jsx(X,{type:Y.Close,width:14,height:14,viewBox:"3.5 3.5 17 17",dataTestId:"mobile-menu-close-icon",fill:"icon.primary"}):a.jsx(X,{width:18,height:12,viewBox:"4 6 16 12",type:Y.Menu,dataTestId:"menu-icon"}),a.jsx("span",{className:"menu-button-content",children:__("Menu")})]}),a.jsx(Vo,{drawerWindow:bt.Menu,slideFrom:nr.fromRight,contentAlign:oo.right,verticalAlign:mT.center,showDrawerHeader:!1,title:"Navigation menu",children:a.jsx(f6e,{showEducationButton:o,hasNotifications:t,hasNewNotifications:s,showAlertBook:n,userProfileWindow:r,onProfileMenuModalClose:l,onNotificationModalClose:i})}),a.jsx(f3e,{isDrawn:!0,contentAlign:oo.center,verticalAlign:mT.center,slideFrom:nr.fromTop})]})},C6e=e=>({drawerWindowDisplayed:e.drawerWindowDisplayed,isOpen:e.drawerWindowDisplayed!==void 0,hasNotifications:gk(e),hasNewNotifications:Sk(e),showAlertBook:e.alerts.showAlertBook,userProfileWindow:e.userProperties.userProfileWindow}),b6e=e=>({closeAllModals(){e(En())},openMenu(){e({type:f.ShowDrawerWindow,windowToShow:bt.Menu})},onNotificationModalClose(){e(Pc(!1))},onProfileMenuModalClose(){e(Oa(Dn.none))}}),E6e=se(C6e,b6e)(y6e),A6e=e=>{const t=()=>{e.displayMenu(!e.isOpened)};return a.jsx(ir,{dataTestId:"quote-monitor-menu-button",onClick:t,ariaExpanded:e.isOpened,icon:a.jsx(X,{type:Y.Settings,width:14,height:14,viewBox:"2 2 21 21",dataTestId:"settings-icon"}),ariaLabel:"Quote Monitor Menu Button",navigationButtonRef:e.navigationButtonRef})},v6e=e=>({isOpened:Er(e)===bt.QuoteMonitorMenu}),I6e=e=>({displayMenu(t){t?(e({type:f.ShowDrawerWindow,windowToShow:bt.QuoteMonitorMenu}),e(Us(ps.QUOTE_MONITOR_MENU))):e(En())}}),x6e=se(v6e,I6e)(A6e),w6e="QuoteMonitorSettings",O6e=["SPX","$COMP","$DJI","RUT"],_k=A(ds)`
  overflow-x: auto;
  min-width: 160px;
  margin-left: ${({theme:e})=>e.space.small};
  border-radius: ${({theme:e})=>e.shape.borderRadius.tertiary}px;
`,R6e=A.div`
  ${({theme:e,isChartPage:t})=>`
    ${aC} {
      margin-right: ${e.space.medium};
      ${e.breakpoints.below(lt.TABLET_SMALL)} {
        margin-right: ${e.space.none};
        margin-top: -${t?0:e.space.medium}
      }
    }

    ${y_} {
      padding-bottom: 0;
      flex-basis: auto !important;
        container: auto;
    }
    
    ${aa} {
      flex-direction: column;
      display: flex;
      > span {
        max-width: 160px;
      }
    }

    ${m_} {
      align-content: flex-start;
      flex-direction: row;
      ${e.breakpoints.above(lt.TABLET_SMALL)} {
        flex-direction: column;
        flex-flow: nowrap;
      }
    }
    ${g_} {
      margin-bottom: 0;
    }
  `}
`,D6e=A.div`
  ${aC} {
    margin: ${({theme:e})=>`${e.space.small} ${e.space.medium} ${e.space.medium} ${e.space.medium}`};
    padding-right: 300px;
    overflow-y: hidden;
  }
`,L6e=A.span`
  color: ${({theme:{colors:e}})=>e.text.disabled};
  font-size: ${({theme:e})=>e.fontSizes.small};
  font-weight: 500;
  padding: ${({theme:e})=>`${e.space.xSmall} ${e.space.medium}`};
  display: block;
`,_6e="/assets/coming-soon-BY0L4hWv.png",N6e=e=>{const{isOpened:t}=e,s=(n,r)=>a.jsx(_k,{children:a.jsxs(aa,{id:r,"data-testid":"visible-quote-monitor-buttons","aria-labelledby":"Quote Monitor Settings Visible Buttons",role:"list",children:[(!n||n.length===0)&&a.jsx(ot,{"data-testid":"no-visible-quote-monitor-buttons-message",color:"text.disabled",mb:it.space.small,maxWidth:"160px",children:__("There are no visible buttons")}),a.jsx(Qd,{items:n??[],strategy:Zd,children:n&&n.map((o,i)=>a.jsx(Su,{id:o,role:"listitem",item:o,onClick:()=>{},actionButton:a.jsx(Kn,{as:"div",variant:cn.remove}),itemTitle:o},`${o}-${i}`))})]})});return a.jsx(ja,{isOpened:t,closeWindow:e.hideQuoteMonitorMenu,reFocus:e.triggerFocus,navigationButtonRef:e.quoteMonitorMenuButtonRef,children:e.flags[Cs.SHOW_QUOTE_MONITOR_MENU_CONTENT]?a.jsx("div",{style:{height:"204px",width:"400px"},children:a.jsxs(D6e,{children:[a.jsx(L6e,{id:"atl-visible-buttons","data-testid":"atl-visible-buttons",children:__("Visible Symbols")}),a.jsx(gg,{customizableListName:w6e,topOffset:75,isOpen:t,excludeFocusTrap:!0,hideResetButton:!0,hideCloseButton:!0,hideAvailableButtonSection:!0,onClose:()=>{},visibleItems:O6e??[],availableItems:[],resetItems:()=>!1,setItems:()=>{},isTradePageOpen:!1,removeItem:()=>{},renderItems:s,heading:__(""),hideHeading:!0,hideVisibleItemsHeading:!0,noAvailableItemMessage:__("")})]})}):a.jsx(FL,{children:a.jsx("img",{className:"menu-image",alt:"",src:_6e,"data-testid":"quote-monitor-menu-image"})})})},P6e=e=>({isOpened:Er(e)===bt.QuoteMonitorMenu}),k6e=e=>({triggerFocus(t){e({type:f.TriggerFocus,ref:t})},hideQuoteMonitorMenu(){e(En())}}),M6e=Ln.withConsumer()(se(P6e,k6e)(N6e)),Nk=(e,t)=>e===gt.LiveTrading?t===Qt.LIGHT?hCe:uCe:t===Qt.LIGHT?mCe:pCe,$6e=[Bn.AMER,Bn.TDAIS,Bn.ADVCLNT,Bn.ADVNCED,Bn.INVTOOL,Bn.HKASIA,Bn.SING],dI=(e,t,s)=>t===void 0||t===""||e===void 0||$6e.indexOf(e)===-1||!s;class j6e extends B.Component{constructor(){super(...arguments);R(this,"state",{educationUrl:void 0,userSegment:void 0});R(this,"onResize",()=>{const{innerWidth:s}=window;this.props.hideDrawerWindow&&dCe(s,Es.DESKTOP_MIN)&&this.props.hideDrawerWindow()});R(this,"onLogoImageClick",s=>{s.preventDefault();const n=this.props;n.resetLayoutSection!==void 0&&n.resetLayoutSection()});R(this,"renderLogo",()=>{const{resetLayoutSection:s,tradingSystem:n,theme:r}=this.props,o=s!==void 0?" clickable":"";return a.jsx(jr,{children:a.jsx("a",{"data-testid":"main-link",href:"",onClick:this.onLogoImageClick,className:"main-link"+o,children:a.jsx("img",{className:"logo image",src:Nk(n,r),alt:__("thinkorswim™")})})})});R(this,"renderSearch",()=>a.jsx("div",{className:"symbol-search",children:a.jsx(KCe,{})}));R(this,"renderQuoteMonitor",()=>a.jsx(ICe,{children:a.jsx(LMe,{symbols:["SPX","$COMP","$DJI","RUT"]})}));R(this,"feedbackRef",B.createRef());R(this,"notificationRef",B.createRef());R(this,"schwabDrawerButtonRef",B.createRef());R(this,"supportRef",B.createRef());R(this,"profileMenuRef",B.createRef());R(this,"quoteMonitorMenuButtonRef",B.createRef());R(this,"renderFeedback",()=>a.jsxs(a.Fragment,{children:[a.jsx(Vo,{title:"Feedback",drawerWindow:bt.Feedback,contentAlign:oo.right,slideFrom:nr.fromTop,children:a.jsx(hk,{isMobileView:!1,navigationButtonRef:this.feedbackRef})}),a.jsx(I5e,{navigationButtonRef:this.feedbackRef}),a.jsx("div",{className:"vsep"})]}));R(this,"renderSupport",()=>{const{isLoggedIn:s}=this.props;return a.jsxs(a.Fragment,{children:[a.jsx(Vo,{title:"Support",drawerWindow:bt.Support,contentAlign:oo.right,slideFrom:nr.fromTop,offsetRight:s?100:0,children:a.jsx(ib,{isLoggedIn:s,isMobileView:!1,navigationButtonRef:this.supportRef})}),a.jsx(m3e,{navigationButtonRef:this.supportRef}),a.jsx("div",{className:"vsep"})]})});R(this,"renderProfileMenu",()=>{const{userProfileWindow:s,onUserProfileWindowClose:n,onBackToMainUserProfileWindow:r}=this.props,o=()=>{switch(s){case Dn.mainSettings:return a.jsx(Vo,{icon:a.jsx(X,{type:Y.User,viewBox:"0 0 20 20",dataTestId:"user-icon"}),title:dg,ariaLabel:__("User profile menu"),drawerWindow:bt.Profile,contentAlign:oo.right,slideFrom:nr.fromTop,offsetRight:0,onDrawerClose:n,children:a.jsx(BL,{isMobileView:!1,navigationButtonRef:this.profileMenuRef})});case Dn.orderDefaults:return a.jsx(Vo,{title:"Order Defaults",drawerWindow:bt.Profile,contentAlign:oo.right,slideFrom:nr.fromTop,offsetRight:0,showBackButton:!0,onBackButtonClick:r,onDrawerClose:n,children:a.jsx(XP,{navigationButtonRef:this.profileMenuRef})});case Dn.audioNotifications:return a.jsx(Vo,{title:__("Audio Notifications"),drawerWindow:bt.Profile,contentAlign:oo.right,slideFrom:nr.fromTop,offsetRight:0,showBackButton:!0,onBackButtonClick:r,onDrawerClose:n,children:a.jsx(qP,{navigationButtonRef:this.profileMenuRef})});default:return null}};return a.jsxs(a.Fragment,{children:[o(),a.jsx(tbe,{navigationButtonRef:this.profileMenuRef}),a.jsx("div",{className:"vsep"})]})});R(this,"renderNotifications",()=>{const{showAlertBook:s=!1,onAlertsDrawerClose:n}=this.props;return a.jsxs(a.Fragment,{children:[s?a.jsx(Vo,{title:"Alerts",drawerWindow:bt.Notification,contentAlign:oo.right,slideFrom:nr.fromTop,showBackButton:!0,onBackButtonClick:n,onDrawerClose:n,children:a.jsx(ak,{navigationButtonRef:this.notificationRef})}):a.jsx(Vo,{title:"Notifications",drawerWindow:bt.Notification,contentAlign:oo.right,slideFrom:nr.fromTop,headerContent:a.jsx(QP,{}),children:a.jsx(sk,{navigationButtonRef:this.notificationRef})}),a.jsx(d3e,{navigationButtonRef:this.notificationRef}),a.jsx("div",{className:"vsep"})]})});R(this,"renderSchwabDrawer",()=>a.jsxs(a.Fragment,{children:[a.jsx(p0e,{navigationButtonRef:this.schwabDrawerButtonRef}),a.jsx("div",{className:"vsep"}),a.jsx(Vo,{title:"Schwab.com",drawerWindow:bt.Schwab,contentAlign:oo.right,slideFrom:nr.fromTop,offsetRight:300,icon:a.jsx(X,{width:24,height:24,viewBox:"0 0 24 24",dataTestId:"schwab-cursor-icon",type:Y.SchwabCursor}),children:a.jsx(HL,{schwabButtonRef:this.schwabDrawerButtonRef})})]}));R(this,"renderExchangeStatus",()=>a.jsx(tc,{children:a.jsx(RL,{})}));R(this,"renderMarketStatus",()=>a.jsx(tc,{children:a.jsx(LL,{})}));R(this,"renderQuoteMonitorMenu",()=>a.jsx(a.Fragment,{children:a.jsxs(LDe,{"data-testid":"quote-monitor-menu",children:[a.jsx(x6e,{navigationButtonRef:this.quoteMonitorMenuButtonRef}),a.jsx(Vo,{title:__("Index Monitor Settings"),drawerWindow:bt.QuoteMonitorMenu,contentAlign:oo.right,slideFrom:nr.fromTop,offsetLeft:530,icon:a.jsx(X,{width:24,height:24,viewBox:"0 0 24 24",dataTestId:"index-monitor-menu-icon",type:Y.Settings}),children:a.jsx(M6e,{quoteMonitorMenuButtonRef:this.quoteMonitorMenuButtonRef})})]})}));R(this,"onPositionsLogoClick",()=>{const s=this.props;s.openSection!==void 0&&s.openSection(ge.Positions)});R(this,"onTradeLogoClick",()=>{const{openSection:s,activePage:n,tradeSymbol:r}=this.props;s!==void 0&&n!==ge.Trade&&s(ge.Trade,r)});R(this,"onChartsLogoClick",()=>{const{openSection:s,activePage:n}=this.props;s!==void 0&&n!==ge.Charts&&s(ge.Charts)});R(this,"onScansLogoClick",()=>{const{openSection:s}=this.props;s&&s(ge.Scans)});R(this,"onWatchlistLogoClick",()=>{const{openSection:s}=this.props;s&&s(ge.Watchlist)});R(this,"renderLoggedInMobileHeader",()=>{const{activePage:s,flags:n}=this.props,r=s===ge.Positions||s===ge.Transactions,o=s===ge.Trade,i=s===ge.Charts,l=s===ge.Scans,c=s===ge.Watchlist,d=Js(Cs.SHOW_BLUE_EDUCATION_BUTTON,n);return a.jsxs("div",{className:"right-mobile",children:[a.jsxs("div",{className:"mobile-nav-wrapper",children:[a.jsx(ir,{dataTestId:"positions-nav-btn",isActive:r,onClick:this.onPositionsLogoClick,icon:a.jsx(X,{type:Y.Positions,dataTestId:"position-icon",isActive:r}),title:"Positions",ariaExpanded:r,ariaLabel:`${__("Positions Button")} ${r?"Selected":""}`,id:"positions-nav-btn"}),a.jsx(ir,{dataTestId:"trade-button",isActive:o,onClick:this.onTradeLogoClick,icon:a.jsx(X,{type:Y.Trade,dataTestId:"trade-icon",isActive:o}),title:"Trade",ariaExpanded:o,ariaLabel:`${__("Trade Button")} ${o?"Selected":""}`,id:"trade-nav-btn"}),a.jsx(ir,{dataTestId:"charts-button",isActive:i,onClick:this.onChartsLogoClick,icon:a.jsx(X,{type:Y.Charts,dataTestId:"chart-icon",isActive:i}),title:"Charts",ariaExpanded:i,ariaLabel:`${__("Charts Button")} ${i?"Selected":""}`,id:"charts-nav-btn"}),a.jsx(ir,{dataTestId:"scans-button",isActive:l,onClick:this.onScansLogoClick,icon:a.jsx(X,{type:Y.Scans,viewBox:"2 2 20 20",dataTestId:"scans-icon",isActive:l}),title:"Scans",ariaExpanded:l,ariaLabel:`${__("Scans Button")} ${l?"Selected":""}`,id:"scans-nav-btn-header"}),a.jsx(ir,{dataTestId:"watchlist-button",isActive:c,onClick:this.onWatchlistLogoClick,icon:a.jsx(X,{type:Y.Watchlist,viewBox:"-2 -2 25 25",dataTestId:"watchlist-icon",isActive:c}),title:"Watchlist",ariaExpanded:c,ariaLabel:`${__("Watchlist Button")} ${c?"Selected":""}`,id:"watchlist-nav-btn-header"})]}),a.jsx(E6e,{showEducationButton:!dI(this.state.userSegment,this.state.educationUrl,d)})]})});R(this,"renderLoggedOutMobileHeader",()=>a.jsx("div",{className:"right center-align",children:a.jsxs("nav",{className:"navigation-bar",children:[this.renderSupport(),this.renderProfileMenu()]})}));R(this,"renderEducationButton",()=>{const s=Js(Cs.SHOW_BLUE_EDUCATION_BUTTON,this.props.flags);return dI(this.state.userSegment,this.state.educationUrl,s)?null:a.jsxs(a.Fragment,{children:[a.jsx(ik,{}),a.jsx("div",{className:"vsep"})]})})}async componentDidMount(){const n=(await Lr()).educationUrl,r=k4(this.props.userSegment)?Bn[this.props.userSegment]:void 0;this.setState({educationUrl:n,userSegment:r}),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}render(){const{tradingSystem:s,isLoggedIn:n,flags:r,userSegment:o}=this.props;return a.jsxs("header",{id:"main-header",className:Te(s===gt.PaperMoney&&"main-header--paper-money"),ref:this.props.headerRef,children:[a.jsxs("div",{className:"left center-align",children:[n&&this.renderLogo(),n&&this.renderExchangeStatus(),n&&this.renderSearch(),n&&Js(Cs.SHOW_QUOTE_MONITOR,r)&&this.renderQuoteMonitor(),n&&Js(Cs.SHOW_QUOTE_MONITOR,r)&&this.renderQuoteMonitorMenu(),this.renderMarketStatus()]}),a.jsx(tc,{children:a.jsx("div",{className:"right center-align",children:a.jsxs("nav",{className:"navigation-bar",children:[a.jsx("div",{className:"vsep"}),n&&o!==Bn.TOSPM&&this.renderSchwabDrawer(),n&&this.renderEducationButton(),n&&this.renderNotifications(),n&&r&&Js(Cs.SHOW_FEEDBACK_BLUE,r)&&this.renderFeedback(),this.renderSupport(),this.renderProfileMenu(),n&&a.jsx(NL,{})]})})}),a.jsx(mc,{children:n?this.renderLoggedInMobileHeader():this.renderLoggedOutMobileHeader()})]})}}const Pk=hn(j6e),B6e=e=>{const t=__("There was an error logging in"),s=r=>{r.preventDefault(),e.history.replace(ut.ROOT)},n=()=>{const r=__("The server is currently unable to handle the request."),o=__("If the problem persists, ");return a.jsxs("div",{"data-testid":"auth-error-details",children:[a.jsxs("p",{children:[r," ",a.jsx("a",{href:ut.ROOT,className:"link","data-testid":"try-again-link",onClick:s,children:__("Please try again")}),__(".")]}),a.jsxs("p",{children:[o,a.jsx("a",{href:"https://secure.tdameritrade.com/contact",className:"link",target:"_blank",rel:"noopener noreferrer",children:__("contact us")}),__(".")]})]})};return a.jsxs("div",{className:"error-page",children:[a.jsx(Pk,{isLoggedIn:!1,tradingSystem:gt.LiveTrading}),a.jsx("div",{className:"error-message-wrapper",children:a.jsxs("div",{tabIndex:0,className:"error-message-container",children:[a.jsx("h1",{"data-testid":"auth-error-title",children:t}),n()]})})]})},kk=A.li`
  background: ${({theme:{colors:e}})=>e.component.Alert.background};
  display: flex;
  justify-content: space-between;
  align-items: flex-start;

  ${JP} {
    padding-right: 0;
  }
`,F6e=A.button`
  padding: ${({theme:{space:e}})=>e.xSmall};
`,H6e=1e4,U6e=({notification:e,className:t})=>{const s=Ar(),n=r=>{if(e){if(yL(e)){s(EL(e.id,r));return}s(_he(e.id))}};return j.useEffect(()=>{const r=setTimeout(n,H6e);return()=>{window.clearTimeout(r)}},[]),e?a.jsxs(kk,{className:t,role:"alert","data-testid":`alert_${e.id}`,"aria-label":e.textContent.map(r=>r.ariaLabel??r.content).join(`
`),children:[a.jsx(ek,{notification:e,as:"div"}),a.jsx(F6e,{"aria-label":"close notification",onClick:()=>n(!0),children:a.jsx(X,{type:Y.Close,width:13,height:13,viewBox:"4 4 17.5 17.5",dataTestId:"close-icon",fill:"icon.primary","aria-hidden":!0})})]}):null},V6e=A.ul.attrs({as:q5})`
  position: fixed;
  right: 1px;
  left: auto;
  top: 55.5px;
  z-index: 10060;
  width: ${Fg}px;

  ${kk} {
    margin: ${({theme:{space:e}})=>e.xSmall} 0;
  }
`,Mk=300,Od="alert",W6e=A(U6e)`
  ${br.transition("transform",`${Mk}ms`)}

  &.${Od}-enter {
    transform: translateX(100%);
  }

  &.${Od}-enter-active {
    transform: translateX(0%);
  }

  &.${Od}-exit {
    transform: translateX(0%);
  }

  &.${Od}-exit-active {
    transform: translateX(100%);
  }
`,G6e=({notifications:e})=>a.jsx(V6e,{"data-testid":"notification-toasts",children:e.entrySeq().map(([t,s])=>a.jsx(xc,{timeout:Mk,classNames:Od,children:a.jsx(W6e,{notification:s})},t))}),Y6e=x(D2e,Bye,(e,t)=>TL(e,t)),q6e=e=>({notifications:Y6e(e)}),K6e=se(q6e)(G6e),z6e=A.div`
  background-color: ${({theme:e})=>e.colors.background.primary};
  display: flex;
  flex-direction: column;
  height: 100%;

  ${({theme:e})=>e.breakpoints.above(lt.DESKTOP_SMALL)} {
    box-shadow: 0 2px 20px 25px ${({theme:e})=>e.colors.boxShadow.primary};
    border-radius: 12px;
    border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.border.primary}`};
  }

  ${({theme:e})=>e.breakpoints.between(lt.MOBILE_LARGE,lt.DESKTOP_SMALL)} {
    height: 90vh;
  }

  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    height: 100vh;
  }

  ${({theme:e})=>e.breakpoints.below(lt.DESKTOP_SMALL)} {
    ${({liveSupportChatWindow:e})=>e===Sr.minimized&&`
    position: sticky;
    bottom: 0;
    height: initial;
    z-index: 10071;
  `}
  }

  & .modal-outside-click {
    position: absolute;
    background-color: rgb(0, 0, 0, 0.5);
    border-radius: 12px;
    z-index: 0;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
`,X6e=A.div`
  display: flex;
  padding: 18px 19px;
  align-items: center;
  background-color: ${({theme:e})=>e.colors.background.secondary};

  ${({liveSupportChatWindow:e})=>e===Sr.maximized&&`
    box-shadow: 0px 4px 5px 0px ${({theme:t})=>t.colors.boxShadow.primary};
  `}

  ${({theme:e})=>e.breakpoints.above(lt.DESKTOP_SMALL)} {
    cursor: grab;
    ${({liveSupportChatWindow:e})=>e===Sr.minimized&&`
      border-radius: 12px;
    `}
    ${({liveSupportChatWindow:e})=>e===Sr.maximized&&`
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    `}
  }
`,Q6e=A.div`
  font-size: 20px;
  font-weight: 500;
`,Z6e=A.div`
  padding: 16px;
  flex-grow: 1;
  overflow-y: auto;
  text-align: center;
  line-height: 20px;
  color: ${({theme:e})=>e.colors.text.secondary};
  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    height: 100vh;
    max-height: calc(100vh - 134px);
  }
`,J6e=A(X)`
  margin-right: 11px;
`,e$e=A.span`
  margin-left: auto;
  cursor: pointer;
  position: relative;
  ${({isWindowMaximized:e})=>e&&"top: 8px;"};
`,t$e=A.span`
  cursor: pointer;
  margin-left: 19px;
`,$k=({alt:e,base64String:t,height:s,width:n,imageType:r})=>a.jsx("img",{"data-testid":"base-64-img","aria-label":e,src:`data:image/${r||iu.PNG};base64, ${t}`,alt:e,width:n||"100%",height:s}),s$e=A.div`
  width: 100%;
  padding-bottom: ${({theme:e})=>e.space.xSmall};
  line-height: 1;
  flex-shrink: 0;
  font-size: ${({theme:e})=>e.fontSizes.small};
  color: ${({theme:e})=>e.colors.text.secondary};
  text-align: ${({theme:e,creator:t})=>t===ar.USER?"right":"left"};
`,HT=({creatorNickName:e,lastMessageTime:t,creator:s,messageType:n})=>{const r=t?new Date(t):void 0;return a.jsxs(s$e,{"data-testid":"support-message-meta",creator:s,children:[__(e,{namespace:"SupportWindow"}),n===lu.TEXT?" ":` ${__("sent image",{namespace:"SupportWindow"})} `,t?`at ${x6(r)}, ${Ci(r)}`:""]})},n$e=A(Dl)`
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1;

  ${({theme:e})=>e.breakpoints.between(lt.TABLET_SMALL,lt.DESKTOP_SMALL)} {
    min-width: 75%;
    height: initial;
  }

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    min-width: 100%;
    height: initial;
  }

  .modal-content {
    max-width: 100vw;
    max-height: 100vh;
    margin: auto;
    text-align: center;

    img {
      max-width: 100%;
      width: initial;
    }
  }
`,r$e=A(tt)`
  height: 40px;
  width: 40px;
  position: absolute;
  right: 0;
  top: 10px;
`,o$e=({handleCloseImage:e,imageMessage:t,creatorNickName:s})=>a.jsxs(n$e,{onCloseClick:e,children:[a.jsx($k,{base64String:t.bytes,alt:`image sent by ${s}`,imageType:t.imageType}),a.jsx(r$e,{onClick:e,"data-testid":"enlarged-image-close-button",children:a.jsx(X,{type:Y.Close,width:14,height:14,viewBox:"3.5 3.5 17 17",dataTestId:"image-close-icon",fill:"icon.primary"})})]}),a$e=A.div`
  font-size: ${({theme:e})=>e.fontSizes.small};
  text-align: ${({theme:e,creator:t})=>t===ar.USER?"right":"left"};
  padding-bottom: ${({theme:e})=>e.space.medium};
`,i$e=A.div`
  color: ${({theme:e,errorType:t})=>t===dy.ERROR?e.colors.action.remove:e.colors.error.primary};
`,l$e=({message:e})=>{const{creator:t,creatorNickName:s,lastMessageTime:n,error:r}=e;return r?a.jsxs(a$e,{creator:t,"data-testid":"support-error-wrapper",children:[a.jsx(HT,{creator:t,creatorNickName:s,lastMessageTime:n,messageType:lu.TEXT}),a.jsx(i$e,{errorType:r.errorType,className:"error","data-testid":"support-error-title",children:__(r.title)}),a.jsx("div",{className:"error","data-testid":"support-error-description",children:__(r.description)})]}):null},uI=A.div`
  display: flex;
  flex-wrap: wrap;
  padding-bottom: ${({theme:e})=>e.space.medium};
  justify-content: ${({theme:e,creator:t})=>t===ar.USER?"flex-end":"flex-start"};
`,c$e=A.div`
  padding: 12px;
  border-radius: 6px;
  display: inline-block;
  text-align: left;
  word-break: break-word;
  background-color: ${({theme:e,creator:t})=>t===ar.USER?e.colors.background.secondary:e.colors.selected.secondary.main};
  color: ${({theme:e})=>e.colors.text.primary};

  pre {
    white-space: pre-wrap;
  }
`,jk=A.div`
  position: absolute;
  left: 0;
  width: 100%;
  top: 100%;
  height: 100%;
  opacity: 0;
  display: flex;
  flex-direction: column;
  transition: all 0.1s;
  background-color: ${({theme:e})=>e.colors.selected.primary.background}34;
  justify-content: center;
  align-items: center;
  color: ${({theme:e})=>e.colors.text.primary};

  & svg path {
    fill: ${({theme:e})=>e.colors.text.primary};
  }
`,d$e=A.div`
  max-width: 164px;
  border-radius: ${({theme:e})=>e.shape.borderRadius.primary}px;
  position: relative;
  overflow: hidden;
  border: ${({theme:e})=>e.shape.borderWidth.primary}px solid
    ${({theme:e})=>e.colors.border.primary};
  transition: border 0.1s;
  cursor: pointer;

  &:hover {
    border-color: ${({theme:e})=>e.colors.border.tertiary};
    ${jk} {
      opacity: 1;
      top: 0;
    }
  }
`,u$e=e=>{const{message:t,creator:s,creatorNickName:n,lastMessageTime:r,imageMessageParts:o,error:i}=e.message,[l,c]=B.useState(null),d=()=>{c(null)},u=m=>{c(m)},h=m=>{var S;return m?!!((S=new DOMParser().parseFromString(m,"text/html").documentElement.textContent)!=null&&S.trim()):!1},p=[];return i?p.push(a.jsx(l$e,{message:e.message},"error"+s+r)):(h(t)&&p.push(a.jsxs(uI,{"data-testid":"support-message-list-item",creator:s,children:[a.jsx(HT,{creator:s,creatorNickName:n,lastMessageTime:r,messageType:lu.TEXT}),a.jsx(c$e,{"aria-label":`live support message by ${n}: ${t}`,"data-testid":"support-message-bubble",creator:s,dangerouslySetInnerHTML:{__html:t}})]},t+s)),o&&o.map((m,g)=>{p.push(a.jsxs(uI,{"data-testid":"support-image-message-list-item",creator:s,children:[a.jsx(HT,{creator:s,creatorNickName:n,lastMessageTime:r,messageType:lu.IMAGE}),a.jsxs(d$e,{"aria-label":`live support message by ${n}: ${t}`,"data-testid":"support-image-message-bubble",creator:s,onClick:()=>u(m),children:[a.jsx($k,{base64String:m.bytes,width:"100%",alt:`image sent by ${n}`,imageType:m.imageType}),a.jsxs(jk,{children:[a.jsx(X,{type:Y.SymbolSearch,width:18,height:18,viewBox:"1 1 20 20",dataTestId:"symbol-search-icon"}),__("View")]})]})]},"image"+s+g))})),a.jsxs(a.Fragment,{children:[p,l?a.jsx(o$e,{handleCloseImage:d,imageMessage:l,creatorNickName:n}):null]})},h$e=({messages:e})=>a.jsx("div",{"data-testid":"support-message-list",children:e.map((t,s)=>a.jsx(u$e,{message:t},t.message+s))}),p$e=A(Dl)`
  top: 50%;
  left: 50%;
  min-width: initial;
  transform: translate(-50%, -50%);
  width: 260px;
  z-index: 1;
  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    height: initial;
  }
`,m$e=A.div`
  font-size: 14px;
  padding: 15px 15px 44px;
`,g$e=A.div`
  display: flex;
  flex-direction: row;
  gap: 11px;
  padding: 7px 18px 7px;
  align-items: center;
  border-top: ${({theme:e})=>`1px solid ${e.colors.divider.primary}`};
  justify-content: flex-end;
`,S$e=A(tt)`
  background-color: ${({theme:e})=>e.colors.text.primary};
  color: ${({theme:e})=>e.colors.background.primary};
  font-weight: 500;
  font-size: 16px;
  line-height: 20px;
  padding: 6px 25px;
`,f$e=A(tt)`
  margin-bottom: 0;
`,T$e=({handleChatCloseCancel:e})=>{const t=Ar(),s=()=>{t(xD())},n=document.getElementById("live-support-wrapper");return a.jsxs(p$e,{onCloseClick:e,container:n,"data-testid":"close-confirmation-modal",children:[a.jsx(m$e,{"data-testid":"close-modal-message",children:__("Are you sure you want to end the current chat session?",{namespace:"SupportWindow"})}),a.jsxs(g$e,{children:[a.jsx(f$e,{"data-testid":"return-to-chat-btn",mb:it.space.small,variant:"link",onClick:e,children:__("Return to chat",{namespace:"SupportWindow"})}),a.jsx(S$e,{"data-testid":"end-btn",onClick:s,children:__("End",{namespace:"SupportWindow"})})]})]})},y$e=A.div`
  text-align: center;
  line-height: 20px;
  color: ${({theme:e})=>e.colors.text.secondary};
`,C$e=A.div`
  padding-top: 16px;
`,b$e=A.div`
  text-transform: capitalize;
`,E$e=()=>{const e=Tn(sg);return a.jsxs(y$e,{"data-testid":"welcome-message-wrapper",children:[a.jsx("div",{"data-testid":"welcome-text-message",children:__("Welcome to Live Chat Support! Your chat with a live agent will appear in this window. Start by typing your question below.",{namespace:"SupportWindow"})}),a.jsxs(C$e,{"data-testid":"support-chat-hours",children:[a.jsxs("div",{"data-testid":"support-chat-hours-heading",children:[__("Support Chat Hours",{namespace:"SupportWindow"}),":"]}),Object.keys(e).map(t=>{const s=e[t],n="support-chat-hours-"+t,r=Ip(s.start.hour,s.start.minute),o=Ip(s.end.hour,s.end.minute);return a.jsx(b$e,{"data-testid":n,children:__(`${t} {{startTime}} - {{endTime}} CT`,{namespace:"SupportWindow",interpolationArgs:{startTime:`${r.hour}:${r.minutes}${r.suffix}`,endTime:`${o.hour}:${o.minutes}${o.suffix}`}})},n)})]})]})},A$e=({children:e,waitMilliSecBeforeShow:t=1})=>{const[s,n]=B.useState(!1);return B.useEffect(()=>{const r=setTimeout(()=>{n(!0)},t);return()=>clearTimeout(r)},[t]),s?a.jsx(a.Fragment,{children:e}):a.jsx(a.Fragment,{})},v$e=(e,t,s)=>{const{maxHeight:n=120,minHeight:r=40}=s||{};B.useEffect(()=>{if(e){e.style.height=`${r}px`;const o=e.scrollHeight;let i=r&&o<=r?r:o;i=n&&o>=n?n:i,e.style.height=`${i}px`}},[e,t])},I$e=A.textarea`
  border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.border.primary}`};
  border-radius: 4px;
  color: ${({theme:e})=>e.colors.text};
  font-size: ${({theme:e})=>e.fontSizes.large};
  line-height: 24px;
  padding: 7px 16px 7px 40px;
  background: none;
  width: 100%;
  resize: none;
  height: 40px;

  :focus {
    border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.action.focus}`};
  }

  ::-webkit-scrollbar-track {
    border-radius: 5px;
  }
`,x$e=A(tt)`
  background-color: ${({theme:e})=>e.colors.text.primary};
  color: ${({theme:e})=>e.colors.background.primary};
  font-weight: 500;
  font-size: ${({theme:e})=>e.fontSizes.large};
  line-height: 24px;
  padding: 8px 24px;
  flex-shrink: 0;
`,w$e=A.div`
  padding: 16px;
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 12px;
  display: flex;
  gap: 16px;
  align-items: flex-end;
  position: relative;
`,O$e=A(_n)`
  position: absolute;
  left: 20px;
  top: 23px;

  .loader {
    transform: scale(0.4);
    margin: 0;
    position: absolute;
    top: -8px;
  }
`,R$e=A(X)``,D$e=A.button`
  white-space: nowrap;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  font-weight: 500;
`,L$e=[{label:"Take Screenshot",value:"takeScreenShot"}],_$e=({liveSupportChatId:e,shouldAllowUserToStartChat:t,isWindowMaximized:s})=>{const n=Ar(),r=B.useRef(null),o=e===pr.CHAT_NOT_STARTED,[i,l]=B.useState(""),[c,d]=B.useState(!1);v$e(r.current,i,{maxHeight:120,minHeight:40});const u=()=>{m()},h=S=>{S.key===we.Enter&&(S.preventDefault(),m())},p=async()=>{const S=document.getElementById("root");d(!0),await K5(S,{filter:y=>{var b,E;return((E=(b=y==null?void 0:y.attributes)==null?void 0:b.getNamedItem("data-testid"))==null?void 0:E.value)!=="live-support-draggable-wrapper"}}).then(function(y){m(y)}).finally(()=>{d(!1)})},m=S=>{if((i||S)&&!t)return;const T=S||i;e===pr.CHAT_NOT_STARTED?n(_ge(T)):n(Mge(T)),l("")};B.useEffect(()=>{s&&r.current&&r.current.focus()},[s]);const g=S=>{S.value==="takeScreenShot"&&!o&&p()};return a.jsxs(w$e,{"data-testid":"support-footer-wrapper",children:[a.jsx(O$e,{width:40,placement:"top-start","data-testid":"attachment-dropdown",values:L$e,getListItemKey:S=>`${S}`,onListItemClick:S=>g(S),renderListItemContent:S=>a.jsx(D$e,{disabled:o,children:S.label},S.value),anchorAriaLabel:"Choose",renderAnchorButtonContent:()=>a.jsx(a.Fragment,{children:c?a.jsx("span",{"data-testid":"loader",className:"loader"}):a.jsx(R$e,{dataTestId:"camera-icon",type:Y.Camera})}),isDisabled:c}),a.jsx(I$e,{"aria-label":"live support message input","data-testid":"live-support-input",value:i,ref:r,onKeyDown:h,className:"in-app-scrollbar",onChange:S=>l(S.target.value),placeholder:__("Ask us anything",{namespace:"SupportWindow"})+"..."}),a.jsx(x$e,{"aria-label":t?"Send live support message button":"Support chat only available during Support Chat Hours","data-testid":"live-support-send-btn",disabled:!i||!t,onClick:u,children:__("Send")})]})},gm=e=>{const{listeners:t,attributes:s,updateLiveSupportWrapperCoordinates:n}=e,r=B.useRef(null),[o,i]=B.useState(!1),l=Ar(),c=Tn(ku),d=Tn(zge),u=Tn(qge),h=Tn(DD),p=Tn(tg),m=Tn(RD);B.useEffect(()=>{E()},[h]),B.useEffect(()=>(window.addEventListener("beforeunload",g),()=>{window.removeEventListener("beforeunload",g)}),[]);const g=v=>{v.preventDefault(),c!==pr.CHAT_NOT_STARTED&&l(xD())},S=()=>{n&&n(),l(hu(m?Sr.minimized:Sr.maximized))},T=()=>{l(pc(!0))},y=()=>{l(pc(!1))},b=()=>{i(!1)},E=()=>{!o&&r.current&&r.current.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})};return B.useEffect(()=>{d&&!m&&S()},[d]),a.jsxs(z6e,{liveSupportChatWindow:p,"data-testid":"live-support-wrapper",id:"live-support-wrapper",children:[a.jsxs(X6e,{liveSupportChatWindow:p,"data-testid":"live-support-header",...t,...s,children:[a.jsx(J6e,{type:Y.LiveSupport,height:22,width:18,viewBox:"3 1 18 22",dataTestId:"live-support-icon"}),a.jsx(Q6e,{"data-testid":"live-support-title",children:__("Live Support")}),a.jsx(e$e,{isWindowMaximized:m,"data-testid":"live-support-minimize-icon","aria-label":"live support window minimize button",onClick:S,children:m?a.jsx(X,{type:Y.Minimize,width:12,height:12,viewBox:"0 0 12 2",dataTestId:"minimize-icon"}):a.jsx(X,{type:Y.Maximize,width:20,height:12,viewBox:"0 0 20 12",dataTestId:"maximize-icon"})}),a.jsx(t$e,{"aria-label":"live support window close button","data-testid":"live-support-close-icon",onClick:T,children:a.jsx(X,{type:Y.Close,width:14,height:14,viewBox:"3.5 3.5 16.5 16.5",dataTestId:"close-icon",fill:"icon.primary"})})]}),m&&a.jsxs(a.Fragment,{children:[a.jsx(Z6e,{className:"in-app-scrollbar",onScroll:b,ref:r,"data-testid":"live-support-body",children:h.length>0?a.jsxs(a.Fragment,{children:[a.jsx(h$e,{messages:h}),c===pr.CHAT_ENDED&&a.jsx("div",{children:__("The chat has been ended")})]}):a.jsx(E$e,{})}),a.jsx(_$e,{liveSupportChatId:c,isWindowMaximized:m,shouldAllowUserToStartChat:u})]}),d&&a.jsx(A$e,{waitMilliSecBeforeShow:1,children:a.jsx(T$e,{handleChatCloseCancel:y})})]})};gm.defaultProps={attributes:{},listeners:{},updateLiveSupportWrapperCoordinates:yr};const hI=64,N$e=512,P$e=({liveSupportWrapperElement:e,isLastWindowStateMaximized:t,lastBottom:s})=>{const n=e.getBoundingClientRect(),r=window.innerHeight;let o;if(t)o=r-n.top-hI;else{const i=s-N$e+hI;o=i<0?0:i}return o},k$e=({liveSupportWrapperElement:e,lastRight:t,lastBottom:s})=>{const n=e.getBoundingClientRect(),r=window.innerWidth,o=window.innerHeight,i=t+n.width<=r?t:r-n.width,l=s+n.height<=o?s:s<=o/2?0:o-n.height;return{right:i,bottom:l}},M$e=A.div`
  max-width: 100%;
  width: 360px;

  position: fixed;
  z-index: 10041;
  bottom: 48px;
  right: 48px;
  ${({liveSupportChatWindow:e})=>e===Sr.maximized&&`
    height: 512px;
    max-height: calc(100vh - 55px);
  `}
`,$$e=A.div`
  height: 100%;
`;function j$e({right:e,bottom:t}){const{attributes:s,listeners:n,setNodeRef:r,transform:o}=z5({id:"DraggableLiveSupport"}),i=Tn(tg),l=Tn(RD),c=j.useRef(null),d=Ar();j.useLayoutEffect(()=>{const p=()=>{if(c.current){const m=k$e({liveSupportWrapperElement:c.current,lastBottom:t,lastRight:e});d(pu({right:m.right,bottom:m.bottom}))}};return window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}},[e,t,l]);const u=()=>{if(c.current){const p=P$e({isLastWindowStateMaximized:l,liveSupportWrapperElement:c.current,lastBottom:t});d(pu({right:e,bottom:p}))}},h=o?{transform:`translate3d(${o.x}px, ${o.y}px, 0)`}:void 0;return a.jsx(M$e,{ref:r,"data-testid":"live-support-draggable-wrapper",style:{...h,right:e,bottom:t},liveSupportChatWindow:i,children:a.jsx($$e,{ref:c,children:a.jsx(gm,{updateLiveSupportWrapperCoordinates:u,listeners:n,attributes:s})})})}const B$e=()=>{const{right:e,bottom:t}=Tn(Kge),s=Tn(Wge),n=Ar(),r=({deltaX:o,deltaY:i})=>{n(pu({right:e+-o,bottom:t+-i}))};return s?null:a.jsx(ix,{"data-testid":"dnd-context-live-support",modifiers:[X5],onDragEnd:({delta:o})=>{r({deltaX:o.x,deltaY:o.y})},children:a.jsx(j$e,{bottom:t,right:e})})},F$e=A.header`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  z-index: 10035;
  background-color: ${({theme:e})=>e.colors.background.primary};
`,H$e=A.div`
  font-size: ${({theme:e})=>e.fontSizes.xxLarge};
  color: ${({theme:e})=>e.colors.text.primary};
`,U$e=A(_n)`
  ${Wn} {
    display: flex;
    align-items: center; /* vertical alignment of chevron */
    margin-top: ${({theme:{space:e}})=>e.xxxSmall};
    margin-right: 0;
    padding: 1px 6px;
  }
`,V$e=A.span`
  margin: 0 4px 0 8px;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  font-weight: normal;
  color: ${({theme:{colors:e}})=>e.text.primary};
`,W$e=A.div`
  margin-left: 10px;
`,Bk=Yt().set(1,[a.jsx(X,{type:Y.Grid1,width:16,height:16,viewBox:"2 2 20 20",dataTestId:"grid-1-icon"})]).set(2,[a.jsx(X,{type:Y.Grid2Vertical,width:16,height:16,viewBox:"2 2 20 20",dataTestId:"grid-2-icon"})]).set(3,[a.jsx(X,{type:Y.Grid3Vertical,width:16,height:16,viewBox:"2 2 20 20",dataTestId:"grid-3-icon"})]),pI=Bk.keySeq().toArray(),G$e=({initialNumCharts:e,setShowCharts:t,...s})=>{const[n,r]=j.useState(e),o=i=>{r(i),s.setNumCharts(i),t(!1)};return a.jsx(U$e,{width:40,placement:"bottom-end","data-testid":"num-charts-range-dropdown",values:pI,getListItemKey:i=>`${i}`,onListItemClick:i=>o(i),renderListItemContent:i=>{const l=Bk.get(i,[]);return a.jsxs(a.Fragment,{children:[a.jsx("span",{children:i}),l.map((c,d)=>a.jsx(W$e,{children:c},`num-charts-icon-${i}-${d}`))]})},anchorAriaLabel:"Change number of charts",renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[a.jsx(X,{type:Y.Grid,height:16,width:16,viewBox:"2 2 20 20",dataTestId:"grid-icon"}),a.jsx(V$e,{children:__("Grid")}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon"})]}),selectedItemIndex:pI.indexOf(n)})},Y$e=e=>({initialNumCharts:hs(e).size}),q$e={setNumCharts:Aue},Fk=se(Y$e,q$e)(G$e),K$e=(e,t)=>!(e<675&&!t),z$e=A.div`
  grid-area: ${({gridArea:e})=>e};
  grid-row: 1 / 3;
`,Hk=A(tt)`
  height: 40px;
  padding: ${({theme:{space:e}})=>`${e.none} ${e.large}`};

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    font-size: ${({theme:{fontSizes:e}})=>e.medium};

    ${({isSplitButton:e})=>!e&&`
    height: auto;
    padding: 12px 28px;
    border-radius: 20px;
    `}
  }

  ${({theme:e})=>Ms({prop:"direction",variants:{[Oo.Buy]:{color:e.colors.buy.contrastText,backgroundColor:e.colors.buy.main,"&:hover":{backgroundColor:e.colors.buy.hover},"&:active":{backgroundColor:e.colors.buy.active}},[Oo.Sell]:{color:e.colors.sell.contrastText,backgroundColor:e.colors.sell.main,"&:hover":{backgroundColor:e.colors.sell.hover},"&:active":{backgroundColor:e.colors.sell.active}}}})}
`,mI={buy:"Buy",sell:"Sell"},Uk=({symbol:e,createTrade:t,instrumentType:s,displaySymbol:n,buttonType:r,tradable:o})=>o&&s!==void 0&&e!==null?a.jsx(z$e,{gridArea:r,children:a.jsx(Hk,{"data-testid":`TradeButton-${r}`,direction:r,"aria-label":`${mI[r]} ${Ns(n)}`,onClick:()=>t(e,s),children:__(mI[r])})}):null,X$e=e=>({symbol:El(e),instrumentType:na(e),displaySymbol:VO(e),buttonType:Oo.Sell}),Q$e=e=>({createTrade:async(t,s)=>{e({type:f.UncheckAllTrades,rootSymbol:t}),s===k.OPTION?e({type:f.BuyOption,symbol:t,direction:pe.Sell}):e(pi(t,s,pe.Sell)),e(Us(ps.TRADE_TICKET)),Ye({category:Ve.Trade,action:Le.Sell,label:s})}}),Z$e=se(X$e,Q$e)(Uk),J$e=e=>({symbol:El(e),instrumentType:na(e),displaySymbol:VO(e),buttonType:Oo.Buy}),e8e=e=>({createTrade:async(t,s)=>{e({type:f.UncheckAllTrades,rootSymbol:t}),s===k.OPTION?e({type:f.BuyOption,symbol:t,direction:pe.Buy}):e(pi(t,s,pe.Buy)),e(Us(ps.TRADE_TICKET)),Ye({category:Ve.Trade,action:Le.Buy,label:s})}}),t8e=se(J$e,e8e)(Uk),s8e=e=>{const{value:t,trend:s,size:n,type:r,fractionalType:o,showFractionalPricing:i,showDoubleTickForFractionalPricing:l}=e,c=Q5(r);return a.jsxs("div",{"data-testid":"trend-wrapper",className:"trend-wrapper",children:[a.jsx("div",{className:`${r} amount`,"aria-label":`${__(c)} ${Vn(i,t,o,l)}`,children:a.jsx(ci,{value:t,trend:s,renderer:i?d=>Fs(d,o,l):xr})}),a.jsxs("div",{className:`${r} size`,children:[__(`${c} size: `),n?v1(n,2):Ht]})]})},gI=j.memo(s8e),n8e=e=>{const{bidSize:t,askSize:s,fixed:n,trendingAsk:r,trendingBid:o,tradeable:i,fractionalType:l,showFractionalPricing:c,showDoubleTickForFractionalPricing:d}=e,u=(o==null?void 0:o.value)!==void 0,h=(r==null?void 0:r.value)!==void 0;return a.jsxs("div",{className:Te("bid-ask",n&&"bid-ask-fixed"),children:[u&&o!==void 0&&a.jsx(gI,{value:o==null?void 0:o.value,trend:o==null?void 0:o.trend,size:t,type:"bid",fractionalType:l,showFractionalPricing:c,showDoubleTickForFractionalPricing:d}),a.jsx(Z$e,{tradable:i}),h&&r!==void 0&&a.jsx(gI,{value:r==null?void 0:r.value,trend:r==null?void 0:r.trend,size:s,type:"ask",fractionalType:l,showFractionalPricing:c,showDoubleTickForFractionalPricing:d}),a.jsx(t8e,{tradable:i})]})},r8e=j.memo(n8e),o8e=e=>{const{value:t,trend:s,ariaLabel:n,change:r,percentChange:o,showFractionalPricing:i=!1,fractionalType:l,showDoubleTickForFractionalPricing:c,className:d}=e;return a.jsxs("div",{"data-testid":"mark-amount",className:Te("mark",d),children:[a.jsx("span",{className:"mark__amount","aria-label":`${__("Mark")}`,children:a.jsx(ci,{value:t,trend:s,renderer:i?u=>Fs(u,l,c):xr})}),a.jsx("span",{className:"mark__change","aria-label":n,children:a.jsxs(NN,{value:r,children:[a.jsx(PN,{value:r,fractionalType:l,showFractionalPricing:i,showDoubleTickForFractionalPricing:c})," ","(",a.jsx(NC,{value:o}),")"]})})]})},Vk=j.memo(o8e),a8e=e=>{const{trendingMark:t,trendingBid:s,trendingAsk:n,markChange:r,markPercentChange:o,bidSize:i,askSize:l,tradeable:c=!1,isMark:d,isBidAsk:u,isTradeInitiated:h,showFractionalPricing:p=!1,fractionalType:m,showDoubleTickForFractionalPricing:g}=e,S=j.useMemo(()=>`${__("Mark Change")} ${r!==void 0?xr(r):""} (${o!==void 0?gr(o):""})`,[r,o]),T=(t==null?void 0:t.value)!==void 0&&a.jsx(Vk,{value:t.value,trend:t.trend,change:r,ariaLabel:S,percentChange:o,showFractionalPricing:p,fractionalType:m,showDoubleTickForFractionalPricing:g}),y=a.jsx(r8e,{bidSize:i,askSize:l,trendingAsk:n,trendingBid:s,tradeable:c,fixed:u&&!h,showFractionalPricing:p,fractionalType:m,showDoubleTickForFractionalPricing:g}),b=()=>{if(d)return T;if(u)return h?null:y};return a.jsxs(a.Fragment,{children:[a.jsx(jr,{children:a.jsxs("div",{className:"quotes",children:[T,y]})}),a.jsx(fr,{children:b()})]})},i8e=j.memo(a8e),l8e=x(Ro,Wm),c8e=(e,{symbol:t})=>{const{trendingMark:s,trendingBid:n,trendingAsk:r,markChange:o,markPercentChange:i,bidSize:l,askSize:c}=xg(e,t)??{},d=W_(e),u=pie(e),{showFractionalPricing:h,fractionalType:p}=l8e(e),m=na(e);return{trendingMark:s,trendingBid:n,trendingAsk:r,markChange:o,markPercentChange:i,bidSize:l,askSize:c,tradeable:u,isTradeInitiated:d,showFractionalPricing:h,fractionalType:p,showDoubleTickForFractionalPricing:Vs(vl(e),m)}},UT=se(c8e)(i8e),d8e=({symbol:e,displaySymbol:t,description:s,triggerFocus:n,isSticky:r,setIsCreateAlertSectionOpen:o,activePage:i,numCharts:l,setShowCharts:c})=>{const[d,u]=B.useState(!0),[h,p]=B.useState(!1),m=j.useRef(null),g=j.useRef(null);j.useEffect(()=>{n(m),p(!1)},[n,e,m]);const S=j.useCallback(()=>{if(o&&o(!0),m.current&&m.current.clientWidth){const v=K$e(m.current.clientWidth,h);u(v)}p(!0)},[m,h,u]),T=j.useCallback(()=>{var v;(v=g.current)==null||v.focus(),p(!1),u(!0),o&&o(!1)},[]),y=i===ge.Charts&&l===1&&c!==void 0,b=a.jsxs("section",{"aria-label":"Quote Details",id:"quote-details",className:Te("symbol-details",r&&"symbol-details--sticky",i===ge.Trade&&"trade"),ref:m,tabIndex:-1,children:[a.jsx("div",{className:"instrument-wrapper",children:a.jsx("header",{className:"instrument",children:a.jsxs("div",{className:"symbol-wrapper",children:[a.jsx("div",{className:"symbol-title",children:a.jsx("h1",{"data-testid":"symbol",className:"symbol","aria-label":`Quote Detail ${Ns(t)}`,children:t})}),h?a.jsx(XL,{symbol:e,onClose:T}):a.jsxs(jr,{children:[a.jsx("div",{className:"description-wrapper",children:a.jsx("p",{className:"description",children:s})}),a.jsxs("div",{className:"symbol-action-wrapper",children:[a.jsx(zL,{selectedSymbol:e}),a.jsx("span",{className:"symbol-action-separator",children:"|"}),a.jsx(tC,{ref:g,onClick:S,dataTestId:"create-alert-button"}),y&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"symbol-action-separator no-margin-left",children:"|"}),a.jsx(Fk,{setShowCharts:c})]})]})]})]})})}),d&&a.jsx(UT,{symbol:e,isMark:!0})]}),E=document.getElementById("sticky-quotes");return E?Cu.createPortal(b,E):b},u8e=d8e,h8e=(e,{symbol:t})=>{const s=OT(e,t),n=s==null?void 0:s.displaySymbol;return{symbol:t,displaySymbol:n!==void 0?n:t,description:s==null?void 0:s.description,activePage:ms(e),numCharts:hs(e).size}},p8e={triggerFocus:sb},Wk=se(h8e,p8e)(u8e),m8e=15,g8e=e=>e.news.newsHeaders,S8e=e=>e.news.relevantNewsHeaders,f8e=e=>e.news.newsBody,T8e=e=>e.news.currentNewsSymbol,y8e=e=>e.news.isRelevantNewsLoading,C8e=x(e=>e.news.isSymbolNewsLoading,T8e,mt,(e,t,s)=>e&&t!==s),b8e=A.time`
  color: ${({theme:e})=>e.colors.text.disabled};
  font-size: ${({theme:e})=>e.fontSizes.small};
  line-height: 20px;
  font-weight: normal;
  white-space: nowrap;
`,hb=A.h4`
  color: ${({theme:e})=>e.colors.text.primary};
  font-size: ${({theme:e})=>e.fontSizes.medium};
  line-height: 20px;
  margin-right: ${({theme:e})=>e.space.xSmall};
  font-weight: normal;
  margin-top: 0;
  margin-bottom: 0;
  cursor: default;
  white-space: normal;
`,E8e=A.div`
  max-width: 100%;
`,A8e=A(Be)`
  border-radius: ${({theme:e})=>`${e.shape.borderRadius.primary}px ${e.shape.borderRadius.primary}px 0 0`};
  background-color: ${({theme:e})=>e.colors.background.primary};
  margin-top: ${({showRelevantNews:e,theme:t})=>!e&&`${t.space.small}`};
  display: grid;
  grid-template-areas:
    'header'
    'content';
  grid-template-columns: 1fr;
  position: relative;
  ${({showRelevantNews:e})=>!e&&Ss`
      grid-template-rows: 1fr 374px;
      max-height: 500px;
      overflow: hidden;
    `}
`,SI=A(Be)`
  height: ${({showRelevantNews:e})=>e?"auto":"374px"};
  min-height: ${({showRelevantNews:e})=>e?"30vh":"initial"};
  grid-area: content;
  overflow: hidden;
`,Gk=Ss`
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
`,Yk=A(Be)`
  ${Gk};
  padding-bottom: ${({theme:e})=>`${e.space.small}`};
  padding-top: ${({theme:e})=>`${e.space.xSmall}`};
  border-bottom: 1px solid ${({theme:e})=>`${e.colors.divider.primary}`};
  ${({isVisible:e,isLastVisibleCard:t})=>e?`margin-bottom: ${t?"130px":0};`:"height: 0; margin: 0 !important; padding: 0; opacity: 0;"}
`,qk=A(Be)`
  padding: ${({theme:e})=>`0 ${e.space.medium} ${e.space.medium}`};
  flex-direction: column;
  overflow-x: hidden;
  width: 100%;
  height: calc(100% - 74px);
  position: absolute;
  margin: 0;

  ${Yk}, ${hb} {
    cursor: pointer;
  }
`,v8e=A.h3`
  color: ${({theme:e})=>e.colors.text.primary};
  font-size: ${({theme:e})=>e.fontSizes.large};
  line-height: ${({theme:e})=>e.space.large};
  padding: ${({theme:e})=>`${e.space.medium} ${e.space.medium} ${e.space.xSmall}`};
  align-items: stretch;
  margin: 0;
  border-bottom: ${({isScrolledUp:e,isArticleSelected:t,theme:s})=>e&&!t?`1px solid ${s.colors.divider.primary}`:"none"};
`,I8e=A(Be)`
  justify-content: flex-end;
`,x8e=A(tt)`
  color: ${({theme:e})=>e.colors.action.focus};
  font-weight: normal;
  font-size: ${({theme:e})=>e.fontSizes.small};
  line-height: ${({theme:e})=>e.space.medium};
  padding: ${({theme:e})=>e.fontSizes.xSmall} 0;
  margin-right: ${({theme:e})=>e.space.medium};
  position: absolute;
  left: ${({showRelevantNews:e})=>e?"4px":"16px"};
  top: ${({showRelevantNews:e,theme:t})=>e?"0":t.space.xLarge};
  gap: ${({theme:e})=>e.space.xxSmall};
  align-content: center;
  display: flex;
`,w8e=A(Cm)`
  transition-delay: ${({delay:e})=>e}ms !important;
`,O8e=A(Cp)`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
`,R8e=e=>{const t=Math.floor((new Date().getTime()-e.getTime())/1e3),s=Math.floor(t/60),n=Math.floor(s/60),r=Math.floor(n/24),o=Math.floor(r/7);return{secondsAgo:t,minsAgo:s,hoursAgo:n,daysAgo:r,weeksAgo:o}},Wh=(e,t)=>`${e} ${t}${e===1?"":"s"}`,D8e=e=>{const t=R8e(e),{secondsAgo:s,minsAgo:n,hoursAgo:r,daysAgo:o,weeksAgo:i}=t;return s<60?{value:`<1${__("m",{namespace:"TimeFrame"})}`,ariaLabel:"less than 1 minute ago"}:n<60?{value:`${n}${__("m",{namespace:"TimeFrame"})}`,ariaLabel:`${Wh(n,"minute")} ago`}:r<24?{value:`${r}${__("h",{namespace:"TimeFrame"})}`,ariaLabel:`${Wh(r,"hour")} ago`}:o<7?{value:`${o}${__("d",{namespace:"TimeFrame"})}`,ariaLabel:`${Wh(o,"day")} ago`}:{value:`${i}${__("w",{namespace:"TimeFrame"})}`,ariaLabel:`${Wh(i,"week")} ago`}},L8e=(e,t)=>{const{time:s,title:n,isLongFormat:r,...o}=e,i=new Date(s??0),l=D8e(i),c=r?D6(i):`${l.value} ${__("ago",{namespace:"News"})}`;return a.jsxs(Be,{ref:t,flexDirection:"column",width:"100%",flex:"0 0 auto",...o,children:[a.jsx(E8e,{children:a.jsx(hb,{title:n,"data-testid":n,children:n})}),a.jsx(b8e,{title:ho(i,!0,!0),dateTime:ho(i,!0,!0),"aria-label":`Updated ${l.ariaLabel}`,children:a.jsx("span",{"aria-hidden":!0,"data-testid":`news-header-date-${n}`,children:c})})]})},Kk=j.forwardRef(L8e),_8e=e=>({type:f.UpdateNewsSymbols,symbolPayload:e}),zk=A.div`
  white-space: nowrap;
  margin-right: ${({theme:e})=>e.space.xSmall};
  flex: 0 0 auto;
  font-size: ${({theme:e})=>e.fontSizes.small};
`,N8e=A(tt)`
  background-color: ${({theme:e})=>e.colors.background.secondary};
  padding: ${({theme:e})=>`${e.space.xxSmall} ${e.space.xSmall}`};
  border-radius: ${({theme:e})=>e.shape.borderRadius.secondary}px;
  font-size: ${({theme:e})=>e.fontSizes.small};
  gap: ${({theme:e})=>e.space.xxSmall};
`,P8e=e=>{const{symbol:t,value:s,openSection:n,selectedSymbol:r}=e;return a.jsx(zk,{children:a.jsxs(N8e,{variant:Pe.primary,"data-testid":"news-btn",onClick:()=>r!==t&&n(ge.Trade,t),children:[t," ","value"in e&&(typeof s=="number"?a.jsx(NC,{showSign:!0,value:s}):"— — —")]})})},k8e=e=>({selectedSymbol:mt(e)}),M8e={openSection:ws},fI=se(k8e,M8e)(P8e),$8e=A(Be)`
  flex-direction: column;
  width: 100%;
  border-radius: ${({theme:e})=>e.shape.borderRadius.primary}px;
  margin-top: ${({theme:e})=>e.space.small};
`,j8e=A(Be)`
  overflow-y: auto;
  overflow-x: hidden;
  width: 100%;
  flex-wrap: wrap;
  max-height: 100px;
  padding: ${({theme:e})=>e.space.xSmall} 0;

  ${zk} {
    margin-right: ${({theme:e})=>e.space.xxSmall};
    margin-bottom: ${({theme:e})=>e.space.xxSmall};
    text-align: left;
  }
`,B8e=e=>{const[t,s]=B.useState(!1),{symbols:n,updateNewsSymbols:r,symbolMarkPercentValues:o}=e,i=un(n),l=n.slice(0,3),c=n.slice(3);return B.useEffect(()=>{fs(i,n)||r(l)},[l,r,i,n]),B.useEffect(()=>()=>{r([])},[r]),a.jsxs(ds,{width:"100%",children:[a.jsxs(Be,{"data-testid":"news-article-related-symbols",width:"100%",justifyContent:"flex-start",alignItems:"center",overflowY:"auto",flex:"0 0 auto",children:[l.map(d=>a.jsx(fI,{symbol:d,value:o[d]},d)),c.length>0&&a.jsx(tt,{variant:"link",onClick:()=>s(d=>!d),marginLeft:3,children:t?__("Show less",{namespace:"News"}):__("Show more",{namespace:"News"})})]}),c.length>0&&t&&a.jsx($8e,{children:a.jsx(j8e,{children:c.map(d=>a.jsx(fI,{symbol:d},d))})})]})},F8e=j.memo(B8e),H8e=x(Ai,e=>{const t={};return e.reduce((n,r)=>(r.symbol&&(n[r.symbol]=r.markPercentChange),n),t)}),U8e=(e,{symbols:t})=>({symbolMarkPercentValues:H8e(e)}),V8e=e=>({updateNewsSymbols:t=>{e(_8e(t))}}),W8e=se(U8e,V8e)(F8e),G8e=A(Be)`
  ${Gk};
  height: 334px;
  width: 100%;
  padding: ${({showRelevantNews:e,theme:t})=>e?`${t.space.none}`:`${t.space.none} ${t.space.small} ${t.space.medium} ${t.space.medium}`};
  margin: ${({showRelevantNews:e,theme:t})=>e?`40px ${t.space.xxSmall} ${t.space.none} ${t.space.xxSmall}`:`${t.space.large} ${t.space.none}`};

  justify-content: flex-start;
  flex-direction: column;
  overflow: auto;
  border-top: ${({isScrolledUp:e,theme:t})=>e?`1px solid ${t.colors.divider.primary}`:"none"};
  ${hb} {
    white-space: normal;
  }
`,TI=A(Be)`
  color: ${({theme:e})=>e.colors.text.primary};
  font-size: ${({theme:e})=>e.fontSizes.small};
  line-height: 20px;
  width: 100%;

  img {
    /* inline png charts tend to have transparent backgrounds with black text - this makes the text visible on dark mode */
    background-color: white;
  }

  a {
    color: ${({theme:e})=>e.colors.text.primary};
  }
`,Y8e=(e,t)=>{const{onKeyDown:s,newsHeader:n,newsBody:r,articleRef:o,showRelevantNews:i}=e,[l,c]=j.useState(!1),d=h=>{if(h.preventDefault(),h.target){const p=h.target;p.nodeName==="A"&&window.open(p.href)}},u=h=>{const p=h.currentTarget.scrollTop;p===0?c(!1):!l&&p!==0&&c(!0)};return a.jsxs(G8e,{showRelevantNews:i,"data-testid":"news-article",as:"article",tabIndex:-1,onKeyDown:s,onScroll:u,isScrolledUp:l,ref:Bu(o,t),"aria-label":"Opened news article, press Control-Option-Right to enter article or Escape to return to article list.",children:[a.jsx(Kk,{time:n==null?void 0:n.time,title:n==null?void 0:n.title,mb:4,isLongFormat:!0}),a.jsx(W8e,{symbols:(n==null?void 0:n.relatedSymbols)??[]}),r!=null&&r.text?a.jsx(TI,{"data-testid":"news-article-body",display:"contents",flexDirection:"column",as:"p",onClick:d,dangerouslySetInnerHTML:{__html:(r==null?void 0:r.text)??""}}):a.jsx(TI,{as:"p",flex:1,justifyContent:"center",children:__("No body text is currently available for this article.",{namespace:"News"})})]})},q8e=j.forwardRef(Y8e),K8e=e=>{const{newsHeaders:t,loading:s,displaySymbol:n,showRelevantNews:r}=e;return a.jsx(O8e,{in:s||t.size===0,children:a.jsx(Be,{justifyContent:"center",alignItems:"center",flex:1,children:s?a.jsx(ds,{as:"span",m:"auto","aria-hidden":!0,"data-testid":r?"loading-relevant-news":"loading-symbol-news",children:__(`${r?"Loading Relevant news":"Loading news for {{symbol}}"}`,{namespace:"News",interpolationArgs:{symbol:n||""}})}):t.size===0&&a.jsx(ds,{as:"span",m:"auto","data-testid":r?"no-relevant-news":"no-symbol-news",children:__(`${r?"No relevant news available":"No news available for {{symbol}}"}`,{namespace:"News",interpolationArgs:{symbol:n||""}})})})})},z8e={transitionDelay:"700ms"},Gh=10,yI=50,X8e=6,Q8e=e=>{const{symbol:t,symbolsToGetRelevantNews:s,getNewsHeaders:n,getRelevantNewsHeaders:r,newsHeaders:o,getNewsBody:i,newsBody:l,isNewsLoading:c,displaySymbol:d,showRelevantNews:u=!1,isUnavailableAccount:h}=e,[p,m]=B.useState(!1),[g,S]=B.useState(void 0),[T,y]=B.useState(!0),[b,E]=B.useState(!1),[v,D]=B.useState(Gh),[w,N]=B.useState(!1),L=g!==void 0?o.get(g):void 0,P=IP(L),F=B.useRef({}),O=B.useRef(null),H=B.useRef(null),C=g!==void 0,M=v>=o.size,[q,W]=Cc({rootMargin:"-120px",skip:M}),z=U=>{i(U),S(U)},re=U=>{U.key===we.Esc&&S(void 0)},ae=()=>{H&&H.current&&(H.current.scrollTop=0),S(void 0),E(!1),N(!1),y(!0),D(Gh)};B.useEffect(()=>{let U="";return t!==void 0&&(U=`${te.NEWS_HEADERS_SUBSCRIBE}-${Date.now()}`,n(U,t)),F.current={},()=>{U&&Ks(ts.request)(U,te.NEWS_HEADERS_SUBSCRIBE),ae()}},[t,n]),B.useEffect(()=>(u&&r(s),F.current={},()=>{ae(),u&&Ks(ts.request)(te.NEWS_HEADERS_SUBSCRIBE_RELEVANT,te.NEWS_HEADERS_SUBSCRIBE_RELEVANT)}),[s,r]),B.useEffect(()=>{W&&v<=o.size&&D(v+Math.min(Gh,o.size-v))},[W]);const Me=d?"TradeNewsSectionHeader":"PortfolioNewsSectionHeader",he=U=>{const Se=U.currentTarget.scrollTop;Se===0?m(!1):!p&&Se!==0&&m(!0)};return a.jsxs(A8e,{as:"section",showRelevantNews:u,"aria-labelledby":Me,"data-testid":"news-section",children:[!u&&a.jsx(v8e,{id:Me,isScrolledUp:p,isArticleSelected:C,children:d&&`${d} ${__("News",{namespace:"News"})}`}),h&&u?a.jsx(SI,{showRelevantNews:u,children:a.jsx(ds,{as:"span",m:"auto","data-testid":"no-relevant-news",children:__("No relevant news available",{namespace:"News",interpolationArgs:{symbol:d||""}})})}):a.jsxs(a.Fragment,{children:[a.jsxs(SI,{showRelevantNews:u,children:[a.jsx(Cm,{in:!!C&&b,unmountOnExit:!0,mountOnEnter:!0,direction:"up",timeout:300,onEntered:()=>{y(!1),O!=null&&O.current&&O.current.focus()},onExiting:()=>N(!0),onExited:()=>y(!0),children:a.jsx(q8e,{newsHeader:P,newsBody:g!==void 0?l.get(g):void 0,onKeyDown:re,articleRef:O,showRelevantNews:u})}),a.jsxs(a.Fragment,{children:[a.jsx(K8e,{showRelevantNews:u,loading:c,newsHeaders:o,displaySymbol:d}),a.jsx(Cp,{in:!C&&T&&!(c||o.size===0),timeout:500,onEntered:()=>{if(E(!1),P!==void 0){const U=F.current[P.newsCode];U&&U.focus()}},onExited:()=>E(!0),children:a.jsx(qk,{"data-testid":"news-article-list",as:"ul",ref:H,"aria-labelledby":Me,overflowY:c?"hidden":"auto",className:"in-app-scrollbar",onScroll:he,children:o.valueSeq().map((U,Se)=>{const be=!C&&T&&!c&&v>Se,le=!!F.current[U.newsCode],We=be&&le,He=o.keySeq().findIndex(ht=>ht===(P==null?void 0:P.newsCode)),Dt=(Se-He+X8e)%15*yI,Jt=(Gh-(v-Se))*yI,ve=Se===v-1,Ue=v>Se,ft=ve?{ref:q}:{},_e=w?Dt:Jt;return a.jsx(w8e,{in:be,delay:We?_e:0,direction:"right",timeout:300,onEntered:()=>{w&&N(!1)},children:a.jsx(Yk,{"data-testid":`news-card:${Se}`,isLastVisibleCard:ve,isVisible:Ue,ref:ht=>{ht!==null&&(F.current[U.newsCode]=ht)},as:"li",tabIndex:0,onClick:()=>z(U.newsCode),onKeyDown:ht=>{(ht.key===we.Enter||ht.key===we.Space)&&z(U.newsCode)},children:a.jsx(Kk,{...ft,time:U.time,title:U.title})})},U.newsCode)})})})]})]}),a.jsx(I8e,{children:a.jsx(Cp,{in:C,style:z8e,children:a.jsxs(x8e,{showRelevantNews:u,"data-testid":"news-back-button",onClick:()=>S(void 0),onKeyDown:re,children:[a.jsx(X,{type:Y.Back,width:20,height:20,viewBox:"0 0 24 24",dataTestId:"back-icon",fill:"action.focus"}),!u&&d?__("Back to All {{symbol}} News",{namespace:"News",interpolationArgs:{symbol:d}}):__("Back to Portfolio Digest",{namespace:"News"})]})})})]})]})},Z8e=(e,{showRelevantNews:t})=>({selectedAccount:Pa(e),newsHeaders:t?S8e(e):g8e(e),newsBody:f8e(e),symbolsToGetRelevantNews:CIe(e),isNewsLoading:t?y8e(e):C8e(e),isUnavailableAccount:Ic(e)}),J8e=e=>({getNewsHeaders:(t,s)=>{s!==void 0&&e(aL(s,t,100))},getRelevantNewsHeaders:t=>{e(iL(t,m8e))},getNewsBody:t=>{e(lL(t))}}),Xk=se(Z8e,J8e)(Q8e);class e7e extends j.Component{constructor(){super(...arguments);R(this,"handleAllFilter",()=>{this.props.page!==Zs.All&&this.props.handleShowAll()});R(this,"handleWorkingFilter",()=>{this.props.page!==Zs.Working&&this.props.handleShowWorking()});R(this,"handleFilledFilter",()=>{this.props.page!==Zs.Filled&&this.props.handleShowFilled()})}render(){return a.jsxs("div",{id:"filter-container",children:[a.jsxs("button",{role:"radio","aria-checked":this.props.page===Zs.All,id:"filter-completed-button","data-testid":"filter-completed-button","aria-label":"Display All Positions",className:"status-filter",onClick:this.handleAllFilter,children:[a.jsx("span",{className:"status-wrapper",children:a.jsx("span",{className:"status-flag",children:a.jsx("span",{className:"trade-status-label",children:__("All")})})}),a.jsx("span",{id:"filter-completed-selected","data-testid":"filter-completed-selected",className:Te("indicator",this.props.page===Zs.All&&"selected")})]}),a.jsxs("button",{role:"radio","aria-checked":this.props.page===Zs.Filled,className:"status-filter","aria-label":"Filter by Filled Positions",onClick:this.handleFilledFilter,children:[a.jsx("span",{className:"status-wrapper",children:a.jsxs("span",{className:"status-flag",children:[a.jsx("span",{children:a.jsx(Si,{status:de.Completed,quantity:1})}),a.jsx("span",{className:"trade-status-label small-device-hide",children:__("Positions")})]})}),a.jsx("span",{id:"filter-filled-selected",className:Te("indicator",this.props.page===Zs.Filled&&"selected")})]}),a.jsxs("button",{role:"radio","aria-checked":this.props.page===Zs.Working,id:"filter-working-button","data-testid":"filter-working-button",className:"status-filter","aria-label":"Filter by  Working Positions",onClick:this.handleWorkingFilter,children:[a.jsx("span",{className:"status-wrapper",children:a.jsxs("span",{className:"status-flag",children:[a.jsx("span",{children:a.jsx(Si,{status:de.Pending,quantity:1})}),a.jsx("span",{className:"trade-status-label small-device-hide",children:__("Working")})]})}),a.jsx("span",{id:"filter-working-selected","data-testid":"filter-working-selected",className:Te("indicator",this.props.page===Zs.Working&&"selected")})]})]})}}const t7e=e=>{const t=e.filters.tradeFilter.showCompleted,s=e.filters.tradeFilter.showWorking,n=Km(t,s);return{showCompleted:t,showWorking:s,page:n}},s7e=e=>({handleShowAll(){e(OS(Gd.Trades,nl.All))},handleShowFilled(){e(OS(Gd.Trades,nl.Completed))},handleShowWorking(){e(OS(Gd.Trades,nl.Working))}}),n7e=se(t7e,s7e)(e7e),Qk=(e,t)=>e.marketDepth.get(t)||{bidQuotes:[],askQuotes:[]},Zk=100,Rd="alert",r7e=A.div`
  display: flex;
  flex-direction: column;
  width: ${({width:e})=>`${e}px`};
  height: ${({height:e})=>`${e}px`};
  margin: 0 ${({theme:e})=>e.space.medium};
  ${({theme:e,addMarginBottom:t})=>t&&`margin-top: ${e.space.medium}`};

  background-color: ${({theme:e})=>e.colors.boxShadow.secondary};

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    position: absolute;
    left: ${({theme:e})=>e.space.medium};
    margin: 0;
    ${({theme:e,addMarginBottom:t})=>t&&`margin-bottom: ${e.space.medium}`};
    z-index: 2; /* needs to be above 'Enter a symbol to view chart' on mobile */
  }

  ${br.transition("transform",`${Zk}ms`)}

  &.${Rd}-enter {
    transform: translateX(100%);
  }

  &.${Rd}-enter-active {
    transform: translateX(0%);
  }

  &.${Rd}-exit {
    transform: translateX(0%);
  }

  &.${Rd}-exit-active {
    transform: translateX(100%);
  }
`,o7e=A.table`
  top: 2px;
  border-collapse: collapse;
  width: 50%;
`,pb=A.div`
  align-self: flex-end;
  display: flex;
  align-items: center;
  min-height: ${nT}px;
`,a7e=A.div`
  display: flex;
  overflow: auto;
  align-items: flex-start;
  margin-left: 5px;
`,i7e=A.span`
  text-align: center;
  margin: auto;
  min-height: 150px;
  display: flex;
  align-items: center;
  white-space: nowrap;
`;var yi=(e=>(e.Ask_Table="Ask_Table",e.Bid_Table="Bid_Table",e))(yi||{});const Jk=A.tr`
  height: 25px;
  background-image: ${({theme:e,relativeSize:t,tableId:s})=>`linear-gradient(${s===yi.Ask_Table?"to left":"to right"}, ${e.colors.shade.primary} 0%, ${e.colors.shade.primary} ${t}%, ${e.colors.overlay.background.secondary} 0%, ${e.colors.overlay.background.secondary} 100%)`};

  ${Br.isSafari?"background-attachment: fixed;":""}
  cursor: pointer;

  :hover,
  :focus {
    border-top: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.selected.secondary.hover}`};
    border-bottom: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.selected.secondary.hover}`};
  }
`,l7e=A(Jk)`
  cursor: grab;

  :hover,
  :focus {
    border: none;
  }
`,c7e=({column:e,dragAndDropId:t,provided:s,snapshot:n,onColumnClick:r,columnSort:o})=>{const i=ym({...s.draggableProps,...s.dragHandleProps},["tabIndex","aria-labelledby"]),l=n==null?void 0:n.isDragging,c=Lm(t,e,o.direction,!0,!0),d=h=>{h.key===we.Enter&&r(e)},u=a.jsx(FAe,{isDragging:l,ref:s.innerRef,...i,children:a.jsxs(HAe,{tabIndex:0,role:"button",...c.headerProps,onClick:()=>{r(e)},onKeyDown:d,children:[c.AriaHeaderComponents,a.jsx(C_,{isDragging:l}),__(Rpe[e]),a.jsx(UAe,{direction:e===o.column?o.direction:Pt.NONE})]})});return a.jsx(Wu,{portalId:"tr-portal",shouldRenderToPortal:l,children:l?a.jsx("table",{children:a.jsx("thead",{children:a.jsx("tr",{children:u})})}):u})},d7e=A.h3`
  ${({theme:e})=>e.mixins.ellipsis}
  margin-top: ${({theme:e})=>e.space.medium};
  white-space: nowrap;
  font-size: ${({theme:e})=>e.fontSizes.large};
  line-height: 2;
  flex-shrink: 0;
`,eM=A(d_)`
  height: 100%;
  overflow-y: auto;
  padding-right: ${({theme:e})=>e.space.medium};

  > ${Xp}:last-child {
    margin-bottom: 64px;
  }
`,u7e=A.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  min-height: 0;
`,h7e=A.span`
  margin-left: 6px;
  font-size: ${({theme:e})=>e.fontSizes.medium};
`,p7e=A(tt)`
  padding: 0;
  width: fit-content;
`,m7e=A.div`
  ${({theme:e})=>e.mixins.ellipsis}
  padding: ${({theme:e})=>e.space.none};
  line-height: 2;
  text-align: left;
  padding-right: ${({theme:e})=>e.space.xSmall};
  ${({dynamic:e,theme:t})=>e&&`margin-left: ${t.space.small}`};
  white-space: nowrap;
  ${({isTopLevel:e,theme:t})=>!e&&`font-size: ${t.fontSizes.small}`};
`,g7e=A.div`
  width: 95%;
`,of=e=>{const{text:t,subText:s,onClick:n,isTopLevel:r}=e;return a.jsxs(Hu,{height:r?66:34,onClick:n,children:[a.jsxs(g7e,{children:[a.jsx(m7e,{isTopLevel:r,children:__(t,{namespace:"Watchlist"})}),s&&a.jsx(ot,{"data-testid":"watchlist-item-sub-text",display:"block",fontSize:4,fontWeight:400,marginTop:0,fontStyle:"italic",i18nOptions:{namespace:"Watchlist"},children:s})]}),a.jsx(X,{type:Y.ChevronRight,width:12,height:8,viewBox:"5 9 14 9",dataTestId:"chevron-right-icon"})]})},S7e=A.div`
  padding: 0;

  &.undo {
    font-size: ${({theme:e})=>e.fontSizes.small};
    color: ${({theme:e})=>e.colors.selected.primary.background};

    &.selected {
      color: ${({theme:e})=>e.colors.selected.primary.contrastText};
    }
  }
`,f7e=e=>{const{deleteWatchlist:t,watchlistId:s,watchlistName:n,selected:r,descriptionRef:o,id:i,isScanQuery:l=!1}=e,c=B.useRef(null),[d,u]=B.useState(!1);B.useEffect(()=>()=>{c.current!==null&&(clearTimeout(c.current),t(s),c.current=null)},[t,s]);const h=()=>{Ye({category:l?Ve.Scans:Ve.Watchlist,action:l?Le.ScanQueryRemove:Le.WatchlistRemove}),u(!0);const y=o.current;y!==null&&y.setAttribute("style","text-decoration: line-through; color: var(--disabled);"),c.current=setTimeout(()=>{t(s),c.current=null,u(!1)},5e3)},p=()=>{Ye({category:l?Ve.Scans:Ve.Watchlist,action:l?Le.ScanQueryRemoveUndo:Le.WatchlistRemoveUndo}),u(!1);const y=o.current;y!==null&&y.setAttribute("style","text-decoration: none;"),c.current!==null&&(clearTimeout(c.current),c.current=null)},m=y=>{y!==void 0&&y.stopPropagation(),d?p():h()},g=l?"scan query":"watchlist",S=d?__(`Undo delete \${Watchlist Name} ${g}`).replace("${Watchlist Name}",n):__(`Delete \${Watchlist Name} ${g}`).replace("${Watchlist Name}",n),T=`${d?"undo":""}${r?" selected":""}`;return a.jsx(a.Fragment,{children:a.jsxs(S7e,{"aria-label":S,role:"button",id:i,className:T,onClick:m,tabIndex:0,"data-testid":"delete-watchlist-button",children:[d?__("Undo"):a.jsx(X,{type:Y.Remove,viewBox:"5 3 14 18",dataTestId:"remove-icon",width:l?14:10,height:l?18:14,isSelected:r}),d&&a.jsx("div",{tabIndex:-1,"aria-live":"assertive","aria-relevant":"all",role:"alert",className:"delete-notification","data-testid":"undo-button",children:__(`${g} \${Watchlist Name} deleted. Click again to undo.`).replace("${Watchlist Name}",n)})]})})},T7e=e=>({deleteWatchlist:t=>{e(ASe(t))}}),tM=se(null,T7e)(f7e),y7e=A.div`
  ${({theme:e})=>e.mixins.ellipsis}
  padding: ${({theme:e})=>e.space.none};
  font-size: ${({theme:e})=>e.fontSizes.small};
  text-align: left;
  padding-right: ${({theme:e})=>e.space.xSmall};
  ${({dynamic:e,theme:t})=>e&&`margin-left: ${t.space.small}`};
  white-space: pre;
`,CI=e=>{const{watchlist:t,itemId:s,onClick:n,selected:r,isPersonal:o}=e,i=j.useRef(null),l=j.useCallback(()=>{Ye({category:Ve.WatchlistChanged,action:o?Le.Personal:Le.Public,label:t.description,value:t.id}),n()},[n,o,t]);return a.jsxs(Hu,{onClick:l,selected:r,"aria-labelledby":`${t.id}Name`,"data-testid":"overlay-container-item",children:[a.jsxs(Be,{flexWrap:"nowrap",children:[!du(t)&&a.jsx(X,{type:Y.DynamicWatchlist,width:17,height:17,viewBox:"1 2 21 21",dataTestId:"dynamic-watchlist-icon",isSelected:r}),a.jsx(y7e,{id:`${t.id}Name`,ref:i,dynamic:!du(t),children:__(t.description,{namespace:"Watchlist"})})]}),Jm(t)&&o&&a.jsx(tM,{id:s,selected:r,watchlistName:t.description,watchlistId:t.id,descriptionRef:i})]})},bI=e=>{const{backButtonText:t,heading:s,children:n,onClick:r}=e;return a.jsxs(u7e,{children:[a.jsxs(p7e,{"data-testid":"watchlist-back-button",onClick:r,children:[a.jsx(X,{type:Y.ChevronLeft,width:12,height:8,viewBox:"5 9 14 9",dataTestId:"chevron-left-icon"}),a.jsx(h7e,{children:__(t,{namespace:"Watchlist"})})]}),a.jsx(d7e,{children:__(s,{namespace:"Watchlist"})}),a.jsx(eM,{"data-testid":"watchlist-items",className:"in-app-scrollbar",children:n})]})},C7e={"Browse Categories":"Categories",INDUSTRY:"Industry",LOVERS_AND_LOSERS:"Lovers and Losers",TOP10:"Top 10's",PUBLIC:"Public",ACTIVE_ON_SOCIAL:"Active on Social"},b7e=e=>{var S,T;const{selectedWatchlist:t,onClose:s,selectWatchlist:n,categories:r,isOpen:o,selectedMenuTrail:i,currentMenuTrail:l,setSelectedMenuTrail:c,setCurrentMenuTrail:d,category:u}=e,[h,p]=j.useState("VIEW_PERSONAL"),m=j.useRef(null);j.useEffect(()=>{var y;o&&(m.current&&((y=m==null?void 0:m.current)==null||y.focus()),p(i?"VIEW_CATEGORY":"VIEW_PERSONAL"),i!==l&&d(i))},[o]);const g=j.useCallback(y=>y?C7e[y]||y:"All Watchlists",[]);return a.jsxs(Ii,{"data-testid":"watchlist-menu",isOpen:o,title:"Select Watchlist",onClose:s,activePage:ge.Watchlist,children:[h==="VIEW_ALL"&&a.jsxs(eM,{children:[a.jsx(of,{isTopLevel:!0,onClick:()=>p("VIEW_PERSONAL"),text:"Personal Watchlists",subText:"Account Positions, Working Orders, Personal"}),a.jsx(of,{isTopLevel:!0,onClick:()=>{d(["Browse Categories"]),p("VIEW_CATEGORY")},text:"Browse Categories"})]}),h==="VIEW_PERSONAL"&&a.jsx(bI,{backButtonText:"All Watchlists",heading:"Personal Watchlists",onClick:()=>p("VIEW_ALL"),children:(S=r.personal.watchlists)==null?void 0:S.map(y=>{const b=!!(t&&t.id===y.id);return a.jsx(CI,{watchlist:y,selected:b,isPersonal:!0,onClick:()=>{c(l),!b&&n(y),s()}},y.id)})}),h==="VIEW_CATEGORY"&&a.jsxs(bI,{backButtonText:g(l==null?void 0:l[l.length-2]),heading:g(l==null?void 0:l[l.length-1]),onClick:()=>{let y=l&&[...l];y&&(y.pop(),y.length===0&&(y=void 0)),d(y),!y&&p("VIEW_ALL")},children:[(T=u==null?void 0:u.watchlists)==null?void 0:T.map(y=>{const b=!!(t&&t.id===y.id);return a.jsx(CI,{watchlist:y,selected:b,onClick:()=>{c(l),n(y),s()}},y.id)}),u&&Object.keys(u).map(y=>{if(y!=="watchlists"&&y!=="personal")return a.jsx(of,{onClick:b=>{const E=b.currentTarget,v=l?[...l,y]:[y];d(v),E==null||E.blur()},text:g(y)},y)})]})]})},E7e=e=>({selectWatchlist:t=>{e(Hi(t.id))},setSelectedMenuTrail:t=>{e(vd(t))},setCurrentMenuTrail:t=>{e(ySe(t))}}),A7e=e=>({categories:PD(e),selectedMenuTrail:_D(e),currentMenuTrail:ND(e),category:pSe(e)}),v7e=se(A7e,E7e)(b7e),I7e=A.button`
  display: flex;
  padding: 10px 0;
`,x7e=A.span`
  color: ${({theme:e})=>e.colors.text.primary};
  margin-left: 5px;
  font-size: ${({theme:e})=>e.fontSizes.small};
  white-space: nowrap;
`,w7e=A.div`
  height: 40px;
  padding: 5px 5px 5px 20px;
  ${({isSearching:e})=>e&&"display: none;"};
`,O7e=A.div`
  ${({isSearching:e})=>!e&&"display: none;"};
  padding: 5px 5px 5px 20px;
`,R7e=A.button`
  position: absolute;
  right: ${({theme:e})=>e.space.none};
  margin-right: 10px;
  display: flex;
  padding: ${({theme:e})=>e.space.none};

  & svg {
    width: 20px;
    height: 20px;
    fill: ${({theme:e})=>e.colors.text.disabled};
  }
`,D7e=({watchlistId:e,addSelectedSymbolToWatchlist:t,isConnected:s,watchlistSymbolsLoading:n,watchlistSearchSymbols:r,searchForWatchlistSymbol:o,inputId:i,inputRef:l})=>{const[c,d]=B.useState(""),[u,h]=B.useState(!1),[p,m]=B.useState(!1);B.useEffect(()=>{c!==""&&o(c)},[c]);const g=({displaySymbol:H,description:C})=>a.jsxs(Ky,{children:[a.jsx(zy,{children:a.jsx(mi,{"data-testid":"highlight",pattern:c,children:H})}),a.jsx(Xy,{children:a.jsx(mi,{"data-testid":"highlight-description",pattern:c,children:C})})]}),S=H=>{const C=H.target.value.toUpperCase();C!==" "&&d(C),p||m(!0),u&&h(!1)},T=H=>{switch(H.key){case we.ArrowRight:case we.ArrowLeft:case we.Enter:{H.stopPropagation();break}case we.ArrowDown:H.stopPropagation(),h(!0)}},y=()=>{E.length&&m(!0),h(!1)},b=H=>{H.preventDefault(),e&&t(c,e),d(""),m(!1)},E=r,v=()=>a.jsxs(ig,{id:"watchlist-symbol-search-form",role:"search",autoComplete:"off",onSubmit:b,children:[a.jsx(ag,{"aria-labelledby":"watchlist-symbol-search-form","aria-label":__("Find a watchlist symbol"),ref:l,onKeyDown:T,onChange:S,onFocus:y,value:c,placeholder:__("Find a Symbol")}),a.jsx(lg,{"aria-hidden":!0,children:a.jsx(X,{type:Y.SymbolSearch,width:18,height:18,viewBox:"1 1 20 20",dataTestId:"symbol-search-icon"})}),n&&s&&a.jsx(cg,{}),!n&&E.length>0&&c!==""&&a.jsx(R7e,{"aria-label":__("Submit Symbol"),onClick:b,children:a.jsx(X,{type:Y.Add,width:20,height:20,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",fill:"text.disabled"})})]}),D="No results for ${searchValue}",w=__(D),N=()=>c!==""&&!n&&E.length<=0?a.jsx(qy,{role:"alert","aria-live":"polite",children:a.jsx(Qy,{"aria-label":gi(D,c),children:gi(w,c)})}):null,L={popperOptions:{modifiers:[{name:"sameWidth",enabled:!0,fn:({state:H})=>{H.styles.popper.width=`${H.rects.reference.width}px`},phase:"beforeWrite",requires:["computeStyles"],effect:({state:H})=>{H.elements.popper.style.width=`${H.elements.reference.clientWidth}px`}}]}},P=H=>{var C;l&&((C=l.current)==null||C.focus()),e&&t(H.symbol,e),d(""),m(!1)},F=j.useRef(null);$a(F,()=>{d(""),m(!1)});const O=H=>{(H.key===we.Esc||H.key===we.Tab)&&(H.stopPropagation(),m(!1))};return a.jsx("div",{ref:F,onKeyDown:O,children:a.jsx(Yy,{"data-testid":"watchlist-symbol-search-dropdown",variant:Pe.secondary,renderHeader:N,renderAnchorButtonContent:v,values:c!==""?E:[],selectedItemIndex:-1,width:0,getListItemKey:H=>H.symbol,onListItemClick:P,renderListItemContent:g,anchorAriaLabel:"Watchlist Search Symbol",symbolSearchId:i,isForceOpened:p,isFocusOnList:u,...L})})},L7e=e=>({searchForWatchlistSymbol(t){e(Nfe(t))},addSelectedSymbolToWatchlist(t,s){e(CSe(s,t))}}),EI=e=>e.symbolSearch,_7e=x(LD,e=>e),N7e=e=>({watchlistSearchSymbols:EI(e).watchlistSearchSymbols,watchlistSymbolsLoading:EI(e).watchlistSymbolsLoading,watchlistId:_7e(e),isConnected:Ol(e)}),P7e=se(N7e,L7e)(D7e),k7e="watchlist-symbol-search-input",M7e=()=>{const[e,t]=B.useState(!1),s=B.useRef(null);B.useEffect(()=>{var l;e&&s&&((l=s.current)==null||l.focus())},[e]);const n=()=>{e&&t(!1)},r=()=>a.jsx(O7e,{"data-testid":"watchlist-symbol-search-container",isSearching:e,children:a.jsx(P7e,{inputId:k7e,inputRef:s,onBlur:n})}),o=l=>{l.stopPropagation(),t(!0)},i=a.jsx(w7e,{"data-testid":"watchlist-add-symbol-container",isSearching:e,children:a.jsxs(I7e,{"aria-label":"Add Symbol to Watchlist",onClick:o,children:[a.jsx(X,{type:Y.Add,width:16,height:16,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",fill:"icon.primary"}),a.jsx(x7e,{children:__("Symbol")})]})});return a.jsxs(kN,{onClickOutside:n,children:[i,r()]})},sM=j.createContext({top:0,setTop:e=>{},header:(e,t)=>null,footer:null,Tbody:a.jsx(a.Fragment,{}),tBodyProps:{},tableProps:{id:"",className:""},sortingRule:null,changeSortingRule:e=>{}}),nM=({row:e,header:t,footer:s,onSortingChange:n,sortingRule:r,Tbody:o,tBodyProps:i,tableProps:l,...c})=>{const d=B.useRef(),[u,h]=B.useState(0),p=m=>{n!==void 0&&n(m)};return a.jsx(sM.Provider,{value:{top:u,setTop:h,header:t,footer:s,Tbody:o,tBodyProps:i,tableProps:l,sortingRule:r,changeSortingRule:p},children:a.jsx(e1,{...c,innerElementType:$7e,onItemsRendered:m=>{const g=d.current&&d.current._getItemStyle(m.overscanStartIndex);g&&h(g.top),c.onItemsRendered&&c.onItemsRendered(m)},ref:m=>d.current=m,className:"in-app-scrollbar",children:e})})},$7e=j.forwardRef(function({children:t,...s},n){const{header:r,footer:o,Tbody:i,tBodyProps:l,tableProps:c,top:d,sortingRule:u,changeSortingRule:h}=B.useContext(sM);return a.jsx("div",{...s,ref:n,className:"virtual-table-wrapper","data-testid":"virtual-table-wrapper",children:a.jsxs("table",{style:{top:d,position:"absolute",width:"100%"},...c,"data-testid":`VirtualTable_${c.id}`,children:[r(u,h),a.jsx(i,{...l,children:t}),o]})})}),gn="common-table",Fn={table:function({className:t,...s}){return a.jsx("table",{className:Te(t,`${gn}__table`),...s})},columnHeading:j.forwardRef(function({toggleSort:t,className:s,children:n,onKeyDown:r,headerAriaProps:o,...i},l){return a.jsx("td",{ref:l,className:Te(s,`${gn}__cell`),"data-testid":`${s}__${gn}__columnHeading__cell`,...i,children:a.jsx("div",{tabIndex:-1,role:"button","aria-live":"polite",onClick:t,onKeyDown:r,...o,children:n})})}),td:function({className:t,...s}){return a.jsx("td",{className:Te(t,`${gn}__cell`),"data-testid":`${t}__${gn}__td__cell`,...s})},tr:j.forwardRef(function({className:t,onCellClick:s,...n},r){return a.jsx("tr",{className:Te(t,`${gn}__row`),"data-testid":`${t}__${gn}__tr__row`,...n,ref:r})}),inViewTr:j.forwardRef(function({className:t,onCellClick:s,...n},r){const{children:o,...i}=n;return a.jsx("tr",{className:Te(t,`${gn}__row`),"data-testid":`${t}__${gn}__inViewTr__row`,...i,ref:r,children:o})}),head:function({className:t,...s}){return a.jsx("thead",{className:Te(t,`${gn}__head`),...s})},trGroup:e=>e.children,body:function({className:t,innerRef:s,...n}){return a.jsx("tbody",{className:Te(t,"rt-tbody",`${gn}__body`),...n,ref:s})}},af=gn+"__header-cell",VT=e=>{switch(e){case"rootSymbol":return"Symbol";case"bid":return"Bid";case"ask":return"Ask";case"mark":return"Mark";case"last":return"Last";case"low":return"Low";case"high":return"High";case"low52":return"52 week low";case"high52":return"52 week high";case"openCost":return"Cost";case"percentileIV":return"IV Percentile";case"expiration":return"Last Trade Date ";default:return e}},j7e=({sortDirection:e,className:t,title:s,tableId:n,columnHeading:r,icon:o,draggable:i,onClickSort:l})=>{const c=j.useRef(null),d=Lm(n,VT(r),e,i,!0);return a.jsxs("div",{className:`${af}-content ${r}-header-content ${s==="Symbol"||s==="Description"?"header-left":"header-right"}`,ref:c,tabIndex:0,onClick:u=>{u.preventDefault(),l(e,r)},onKeyDown:u=>{u.key===we.Enter&&(u.preventDefault(),u.stopPropagation(),l(e,r))},role:"button",children:[d.AriaHeaderComponents,a.jsx("div",{className:"icon-wrapper",children:a.jsx(X,{type:Y.Move,width:12,height:6,viewBox:"5 8 12 8",className:"move-icon",dataTestId:"move-icon"})}),a.jsxs("span",{className:Te(af,t),"data-testid":`${af}-${s}`,children:[s,a.jsx(pg,{className:"sort-icon",direction:e})]}),o!==void 0&&a.jsx("div",{className:"action-icon-wrapper",children:o})]})},rM=(e,t,s)=>{if(t.isDragging){const n=e!==void 0?e.left+(s!==void 0?s:0):void 0;return{...e,left:n,width:void 0}}return e};class WT extends j.PureComponent{render(){const{index:t,id:s,scrollLeft:n,...r}=this.props;return a.jsx(Sl,{index:t,draggableId:s,children:(o,i)=>{var l;return a.jsx(Fn.inViewTr,{...r,id:`watchlist-row-${this.props.index}`,ref:o.innerRef,...o.draggableProps,...o.dragHandleProps,className:Te(this.props.className,i.isDragging&&"_dragging"),style:rM((l=o.draggableProps)==null?void 0:l.style,i,this.props.scrollLeft)})}})}}class AI extends j.PureComponent{constructor(s){super(s);R(this,"deleteAreaId");R(this,"onMouseMove",s=>{const n=this.getDraggableArea(),r=n==null?void 0:n.x;r!==void 0&&s.clientX>=r?this.state.deleteAreaIsEnabled||this.setState({deleteAreaIsEnabled:!0}):this.state.deleteAreaIsEnabled&&this.setState({deleteAreaIsEnabled:!1})});R(this,"getDraggableArea",()=>{const s=document.getElementById("delete-area");return s==null?void 0:s.getBoundingClientRect()});R(this,"onRowDragEnd",(s,n)=>{this.removePlaceholderRow();const r=this.props;this.setState({isDragging:!1,deleteAreaIsEnabled:!1}),window.removeEventListener("mousemove",this.onMouseMove),s.destination!==void 0&&s.destination!==null&&s.destination.droppableId===this.deleteAreaId?s.reason==="DROP"&&r.canDeleteRow&&r.deleteRow(s.source.index,n):r.onMoveRow(s,n)});R(this,"setDeletePortalRefToState",s=>{this.state.deletePortalRef===null&&this.setState({deletePortalRef:s})});R(this,"createPlaceholderRow",(s,n)=>{const r=document.createElement("tr");return r.classList.add("common-table__row",s%2===0?"-odd":"-even"),r.id=`${this.props.tableId}-placeholder-row`,r.innerHTML=`<td colspan="${n}"></td>`,r});R(this,"removePlaceholderRow",()=>{const s=document.querySelector(`#${this.props.tableId}-placeholder-row`);s&&s.remove()});this.state={isDragging:!1,deleteAreaIsEnabled:!1,deletePortalRef:null},this.deleteAreaId=`${s.tableId}-body-delete`,this.onRowDragEnd=this.onRowDragEnd.bind(this),this.onDragStart=this.onDragStart.bind(this)}onDragStart(){window.addEventListener("mousemove",this.onMouseMove),this.setState({isDragging:!0})}componentWillUnmount(){window.removeEventListener("mousemove",this.onMouseMove)}componentDidMount(){const s=this.props,n=document.querySelector(`#${s.tableId}-delete-portal`);this.setDeletePortalRefToState(n)}render(){const{onMoveRow:s,canDeleteRow:n,deleteRow:r,tableId:o,...i}=this.props,l=this.state;return a.jsxs(fl,{onDragEnd:this.onRowDragEnd,onBeforeDragStart:this.onDragStart,nonce:Mc(),children:[a.jsx(wa,{droppableId:`${o}-body`,direction:"vertical",mode:"virtual",renderClone:(c,d,u)=>{const h=u.draggableId,p=document.querySelector(`#${o}-body`);if(d.isDragging&&p&&!p.querySelector(`#${o}-placeholder-row`)){const S=p.getElementsByTagName("tr"),T=this.createPlaceholderRow(u.source.index,S[0].cells.length);p.insertBefore(T,S[u.source.index])}const m=p?p.querySelector(`tr:not(#${this.props.tableId}-placeholder-row) > td:first-of-type`):null,g=m?`${m==null?void 0:m.offsetWidth}px`:"120px";return a.jsx("div",{className:"common-table__table",children:a.jsx("div",{className:"common-table__body",children:a.jsx("div",{id:`watchlist-row-${u.source.index}`,ref:c.innerRef,...c.draggableProps,...c.dragHandleProps,className:Te("-odd",d.isDragging&&"_dragging","common-table__row"),style:{...rM(c.draggableProps.style,d),width:g},children:a.jsxs("div",{className:"common-table__cell",children:[a.jsx(X,{type:Y.Move,width:12,height:6,viewBox:"5 8 12 8",className:"move-icon",dataTestId:"move-icon"}),a.jsx("div",{className:"cell-value",children:h.split("-")[1]})]},"rootSymbol")})})})},children:c=>a.jsx(Fn.body,{id:`${o}-body`,...i,...c.droppableProps,innerRef:c.innerRef,children:i.children})}),n?a.jsx(wa,{isDropDisabled:!this.state.deleteAreaIsEnabled,droppableId:this.deleteAreaId,ignoreContainerClipping:!0,children:(c,d)=>l.deletePortalRef!==null?Cu.createPortal(a.jsxs(a.Fragment,{children:[a.jsx("tr",{id:"delete-area",className:Te(`${gn}__delete-area-wrapper`,l.isDragging&&"_dragging"),children:a.jsx("td",{className:`${gn}__delete-area`,...c.droppableProps,ref:c.innerRef,children:a.jsx("div",{className:`${gn}__delete-area-content-wrapper`,children:a.jsxs("div",{className:Te(`${gn}__delete-area-content`,d.isDraggingOver&&"_active"),children:[a.jsx(X,{type:Y.Remove,viewBox:"5 3 14 18",dataTestId:"remove-icon",width:14,height:18,isActive:d.isDraggingOver}),__("Delete")]})})})}),c.placeholder]}),l.deletePortalRef):a.jsx("tbody",{ref:c.innerRef,children:c.placeholder})}):null]})}}class B7e extends j.PureComponent{constructor(){super(...arguments);R(this,"onDragEnd",(s,n)=>{this.props.onColumnsDragEnd(s,n,1)});R(this,"onDragStart",(s,n)=>{this.props.onColumnsDragStart(s,n,1)});R(this,"onResetColumns",()=>{this.props.draggableColumnsSettings.onColumnsReset()});R(this,"onCloseDrawer",()=>{this.props.closeDrawer()})}render(){const{className:s,columns:n,children:r,onColumnsDragEnd:o,draggableColumnsSettings:i,tableId:l,onColumnsDragStart:c,isDragging:d,closeDrawer:u,addOrRemoveOneColumn:h,tableWidth:p,maxTableHeight:m,...g}=this.props,S=j.Children.only(r);return a.jsx(fl,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,nonce:Mc(),children:a.jsx(Fn.head,{className:s,...g,children:a.jsx(wa,{droppableId:`${l}-table-header`,direction:"horizontal",children:T=>a.jsxs(Fn.tr,{...T.droppableProps,ref:T.innerRef,children:[S.props.children,a.jsx(a.Fragment,{children:T.placeholder})]})})})})}}const F7e=({children:e})=>a.jsx(a.Fragment,{children:e}),H7e=e=>{const t=e.isDragging?e.DraggingWrapper:F7e;return a.jsx(Wu,{portalId:e.id,shouldRenderToPortal:e.isDragging,children:a.jsx(t,{children:e.children})})},U7e=e=>a.jsx("table",{className:gn,children:a.jsx("thead",{className:`${gn}__head`,children:a.jsx("tr",{className:`${gn}__row`,children:e.children})})});class V7e extends j.PureComponent{render(){const{toggleSort:t,isDragDisabled:s,index:n,id:r,tableId:o,addOrRemoveColumn:i,columnId:l,isDragInProgress:c,className:d,...u}=this.props,h=i===void 0?t:()=>i(l),p=S=>{S.key===we.Enter&&(S.stopPropagation(),h())};if(s)return a.jsx("th",{...u,onClick:t,className:Te(d,`${gn}__cell`,"drag_disabled")});const m=Rp(o,VT(l)),g=Rp(o,VT(l),"ariaDescId");return a.jsx(Sl,{draggableId:r,index:n,disableInteractiveElementBlocking:s,isDragDisabled:s,children:(S,T)=>a.jsx(H7e,{isDragging:T.isDragging,id:`${o}-row-portal`,DraggingWrapper:U7e,children:a.jsx(Fn.columnHeading,{...u,onClick:h,onKeyDown:p,className:Te(d,T.isDragging&&"_dragging"),ref:S.innerRef,...S.draggableProps,...S.dragHandleProps,"aria-labelledby":void 0,headerAriaProps:{"aria-labelledby":m,"aria-describedby":g}})})})}}const lf=100,W7e=150,G7e=51,vI=100,Y7e=100,q7e=260;class mb extends j.PureComponent{constructor(s){super(s);R(this,"Header");R(this,"HeaderCell");R(this,"undraggableCellInfo");R(this,"BodyComponent");R(this,"TrComponent");R(this,"resetTimeout");R(this,"_isMounted",!1);R(this,"state",{isColumnDragging:!1,isCustomizationMenuOpen:!1,shouldResetWidth:!1,tableWidth:0,numRowsDisplayed:vI,canAddMoreRows:!1,virtualTableHeight:0});R(this,"resizeObserver",new Z5((s,n)=>{this._isMounted&&this.setState({virtualTableHeight:this.getVirtualTableHeight(this.props.data.length)})}));R(this,"setNewColumns",s=>{this.props.draggableColumnsSettings.onDragEnd(s),this.resetWidth(lf)});R(this,"getTrComponent",()=>{const s=this.props;return s.TrComponent!==void 0?s.TrComponent:s.canDragRows===!0?WT:Fn.tr});R(this,"getBodyComponent",s=>{const n=this.props;return n.BodyComponent!==void 0?n.BodyComponent:s?AI:Fn.body});R(this,"isAddingColumn",(s,n)=>s.droppableId.includes("column-drawer")&&n.droppableId.includes("table-header"));R(this,"isRemovingColumn",(s,n)=>s.droppableId.includes("table-header")&&n.droppableId.includes("column-drawer"));R(this,"isColumnSwapping",(s,n)=>s.droppableId.includes("table-header")&&n.droppableId.includes("table-header"));R(this,"onColumnsDragEnd",(s,n,r)=>{const o=this.props;if(o.canDragColumns!==!0)return;const{source:i,destination:l}=s,c=i.index+r;let d="";if(l==null){const u=o.columns[c];if(u===void 0)return;d=o.draggableColumnsSettings.getCancelMessage(c,u)}else{let u=[...o.columns];const h=l.index+r;if(this.isRemovingColumn(i,l))u.splice(c,1);else if(this.isAddingColumn(i,l)){const p=this.getAllColumns()[i.index];u.splice(h,0,p)}else this.isColumnSwapping(i,l)&&(u=Xo.swap(o.columns,c,h),d=o.draggableColumnsSettings.getMoveMessage(c,h));this.setNewColumns(u),this.setState({isColumnDragging:!1})}n.announce(d)});R(this,"onMoveRow",(s,n)=>{const r=this.props;let o="";if(!(!r.canDragRows||r.draggableRowsSettings===void 0)){if(s.destination===null||s.destination===void 0)o=r.draggableRowsSettings.getCancelMessage(s.source.index,"It");else{const i=s.source.index,{index:l}=s.destination,c=Xo.swap(r.data,i,l);r.draggableRowsSettings.moveRow(c);const d=i+1,u=l+1;if(r.draggableColumnsSettings.getMoveMessage===void 0)return;o=r.draggableRowsSettings.getMoveMessage(d,u)}n.announce(o)}});R(this,"onDelete",(s,n)=>{const r=this.props;if(r.canDeleteRow!==!0||r.deleteRow===void 0||(r.deleteRow(r.data[s]),r.getOnDeleteMessage===void 0))return;const o=r.getOnDeleteMessage();n.announce(o)});R(this,"onColumnsDragStart",(s,n,r)=>{const o=this.props,i=o.columns[s.source.index+r],l=this.getAllColumns()[s.source.index],c=KS(i!==void 0?i:l),d=s.source.index+1,u=`You have lifted ${c}. It is in position ${d+ +r} of ${o.columns.length} in the list. Use the arrow keys to move, space bar to drop, and escape to cancel`;n.announce(u),this.setState({isColumnDragging:!0})});R(this,"getAllColumns",()=>this.props.draggableColumnsSettings.availableColumns);R(this,"onColumnsReset",()=>{this.props.draggableColumnsSettings.onColumnsReset(),this.resetWidth(lf)});R(this,"getTHeadProps",(s,n)=>(...r)=>{const o=this.props;return{...o.getTheadProps===void 0?{}:o.getTheadProps(...r),onColumnsDragStart:this.onColumnsDragStart,columns:o.columns,onColumnsDragEnd:this.onColumnsDragEnd,tableId:o.tableId,draggableColumnsSettings:{...o.draggableColumnsSettings,onColumnsReset:this.onColumnsReset},isDragging:s,addOrRemoveOneColumn:this.addOrRemoveOneColumn,tableWidth:n}});R(this,"getTheadThProps",s=>(n,r,o)=>{const i=this.props,l=i.columns.findIndex(h=>h===o);if(l===-1)return{isDragDisabled:!0,id:`${i.tableId}-table-header-cell_${l}`,index:-1,tableId:i.tableId,isDragInProgress:s,columnId:o};const c=i.columns[l],d=i.canDragColumns===!0?c==="rootSymbol":!1,u=l-(this.undraggableCellInfo.position==="start"?this.undraggableCellInfo.amount:0);return{isDragDisabled:d,id:`${i.tableId}-table-header-cell_${u}`,index:u,tableId:i.tableId,isDragInProgress:s,columnId:c}});R(this,"resetWidth",s=>{this._isMounted&&this.setState({shouldResetWidth:!0},()=>{window.clearTimeout(this.resetTimeout),this.resetTimeout=window.setTimeout(()=>this.setState({shouldResetWidth:!1}),s)})});R(this,"addOrRemoveOneColumn",s=>{const n=this.props;let r;if(n.columns.find(o=>o===s)!==void 0)r=n.columns.filter(o=>o!==s);else{const o=this.props.draggableColumnsSettings.availableColumns.find(i=>i===s);r=[...n.columns,o]}this.resetWidth(lf),n.draggableColumnsSettings.onDragEnd(r)});R(this,"getPreparedColumns",()=>{const s=this.props,n=this.state,{analyticsActionTable:r="watchlist",tableId:o}=s;return s.columns.map((i,l)=>l>0?{shouldResetWidth:n.shouldResetWidth,id:i}:{shouldResetWidth:n.shouldResetWidth,icon:s.setIsCustomizationMenuOpen!==void 0?a.jsx(a.Fragment,{children:a.jsx(Gu,{cssClass:"draggable-column-drawer-icon",dataTestid:`${o}-customization-button`,onClick:c=>{c.stopPropagation(),s.setIsCustomizationMenuOpen&&s.setIsCustomizationMenuOpen(!n.isCustomizationMenuOpen)},ariaLabel:`Column Configuration ${n.isCustomizationMenuOpen?"Expanded":"Collapsed"}`,analyticsAction:vc(r)})}):void 0,id:i})});R(this,"scrollContainer",j.createRef());R(this,"infiniteScrollUpdateCheck",s=>{var r,o,i;const n=(i=(o=(r=this.scrollContainer)==null?void 0:r.current)==null?void 0:o.element)==null?void 0:i.current;if(n!=null){const l=this.props.dataIdentifier!==s.dataIdentifier,c=this.state.numRowsDisplayed<this.props.data.length&&this.state.canAddMoreRows&&n.scrollTop!==0;l?(n.scrollTop=0,this.setState({canAddMoreRows:!1,numRowsDisplayed:vI})):c&&this.setState(d=>({canAddMoreRows:!1,numRowsDisplayed:Math.min(this.props.data.length,d.numRowsDisplayed+Y7e)}))}});R(this,"infiniteScrollCheck",s=>{const{scrollTop:n,clientHeight:r,scrollHeight:o}=s.currentTarget,l=n+r+q7e>o;r>G7e&&this.setState(d=>l!==d.canAddMoreRows?{canAddMoreRows:l}:null)});R(this,"onResize",s=>(s.firstChild&&s.firstChild.scrollBy(0,1),this._isMounted&&this.setState({tableWidth:s.clientWidth})));R(this,"getTheadComponent",(s,n)=>{const r=this.getTHeadProps(this.state.isColumnDragging,this.state.tableWidth)(),o=this.Header;return a.jsx(o,{columns:this.getPreparedColumns(),className:"-head",...r,children:this.getThColumns(s,n)})});R(this,"onClickSort",s=>(n,r)=>{const o=Ly(n);o===Pt.NONE?s(null):s({id:r,desc:o===Pt.DESCENDING})});R(this,"getThColumns",(s,n)=>{const r=this.HeaderCell,o=this.TrComponent,i=this.getPreparedColumns().map(l=>{const c=this.getTheadThProps(this.state.isColumnDragging)(null,null,l.id),d=(s==null?void 0:s.id)===l.id,u=s!=null&&s.desc?Pt.DESCENDING:Pt.ASCENDING;return B.createElement(r,{...c,key:c.id},a.jsx(j7e,{title:KS(l.id),columnHeading:l.id,tableId:this.props.tableId,sortDirection:d?u:Pt.NONE,draggable:l.id!=="rootSymbol",icon:l.icon,shouldResetWidth:l.shouldResetWidth,onClickSort:this.onClickSort(n),className:`${l.id==="rootSymbol"||l.id==="description"?"header-left":"header-right"}`},l.id))});return a.jsx(o,{index:0,id:"header-row",children:i.map(l=>l)})});R(this,"getRow",({index:s,data:n})=>{const r=n[s];if(!r)return null;let o=this.getTrProps(this.props.getTrProps)(void 0,{row:{rootSymbol:r.rootSymbol},index:s});o=Object.assign(o,{className:o.className+(s%2===0?" -odd":" -even")});const i=this.getTrComponent();return a.jsx(i,{index:s,columns:this.getPreparedColumns(),...o},r.rootSymbol)});R(this,"getVirtualTableHeight",s=>{var o;if(s===0)return 56;let n=(o=document.querySelector(this.props.querySelector))==null?void 0:o.clientHeight;n===void 0?n=316:n-=this.props.canDragRows?133:92;const r=s*26+55+3;return r<n?r:n});R(this,"setOverScanCount",(s,n)=>s&&n.length>0?20:1);this.Header=s.canDragColumns===!0?B7e:Fn.head,this.HeaderCell=s.canDragColumns===!0?V7e:Fn.columnHeading,this.BodyComponent=s.canDragRows===!0?AI:Fn.body,this.TrComponent=s.canDragRows===!0?WT:Fn.tr,s.BodyComponent!==void 0&&(this.BodyComponent=s.BodyComponent),s.TrComponent!==void 0&&(this.TrComponent=s.TrComponent);const r=(s.canDragColumns===!0?s.columns.filter(o=>o==="rootSymbol"):[]).length;this.undraggableCellInfo={amount:r,position:r===0||s.canDragColumns===!0&&s.columns[s.columns.length-1]==="rootSymbol"?"end":"start"},this.getTrProps=this.getTrProps.bind(this),this.getTbodyProps=this.getTbodyProps.bind(this),this.getTbodyProps=Nr(this.getTbodyProps,o=>o)}componentDidMount(){this._isMounted=!0,this.setState({virtualTableHeight:this.getVirtualTableHeight(this.props.data.length)});const s=document.querySelector(this.props.querySelector);s&&this.resizeObserver.observe(s)}componentWillUnmount(){this._isMounted=!1,window.clearTimeout(this.resetTimeout),this.resizeObserver&&this.resizeObserver.disconnect()}componentDidUpdate(s){this._isMounted&&(this.setState({virtualTableHeight:this.getVirtualTableHeight(this.props.data.length)}),s.tableExpanded!==this.props.tableExpanded&&this.resetWidth(cb+W7e),this.infiniteScrollUpdateCheck(s))}getTrProps(s){return(n,r)=>{const o=this.props;return{...s===void 0?{}:s(n,r),index:r.index,id:o.getRowId(r.row)}}}getTbodyProps(s){return()=>{const n=this.props,r=n.canDeleteRow===!1?{canDeleteRow:!1}:{canDeleteRow:!0,deleteRow:this.onDelete};return s?{onMoveRow:this.onMoveRow,tableId:n.tableId,...r}:{}}}render(){return a.jsxs(a.Fragment,{children:[a.jsx(Da,{className:"table-container native-scroll",onResize:this.onResize,rate:50,ref:this.scrollContainer,onScroll:this.state.numRowsDisplayed<this.props.data.length?this.infiniteScrollCheck:void 0,children:a.jsx(nM,{height:this.state.virtualTableHeight,width:"auto",itemCount:this.props.data.length+1,itemSize:26,itemData:this.props.data,overscanCount:this.setOverScanCount(this.props.canDragRows??!1,this.props.data),header:this.getTheadComponent,row:this.getRow,sortingRule:this.props.sortingRule,onSortingChange:this.props.onSortingChange,Tbody:this.getBodyComponent(this.props.canDragRows??!1),tBodyProps:this.getTbodyProps(this.props.canDragRows??!1)(),tableProps:{id:this.props.tableId,className:"common-table__table"}})}),this.props.canDragRows&&a.jsx("table",{className:"delete-portal-container",children:a.jsx("tbody",{className:Te("delete-portal"),id:`${Sm}-delete-portal`,"data-testid":`${Sm}-delete-portal`})})]})}}const K7e=({isRowDragAndDeleteEnabled:e})=>a.jsxs("div",{tabIndex:0,className:"watchlist-empty__container",children:[a.jsxs("span",{className:"watchlist-empty__note","aria-label":"Drag columns above to modify",children:[__("Drag columns above to modify.")," "]}),a.jsxs("span",{className:"watchlist-empty__note","data-testid":"empty-note",children:[e&&(__("__locale")==="__locale"?a.jsxs(a.Fragment,{children:["Click “",a.jsx("span",{className:"watchlist-empty__note-icon",children:a.jsx(X,{type:Y.Add,width:16,height:16,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",fill:"icon.primary"})})," ",a.jsx("span",{className:"color-primary-btn fs-12",children:"Symbol"}),"” below to add a symbol to your watchlist."]}):__("Click “Symbol” below to add a symbol to your watchlist")),!e&&__("There are no symbols in this watchlist")]})]}),z7e=e=>e.watchlists.quotes,qg=mt,th=e=>e.instruments,X7e=x(e=>e.watchlists.selectedWatchlistId,e=>e),oM=e=>e.watchlists.currentWatchlistSymbols,Q7e=Nn(oM,e=>e.slice(0).sort()),Z7e=x(MD,e=>e!==void 0&&Che(e)&&du(e)&&Jm(e)),J7e=A.button`
  &.undo {
    font-size: ${({theme:e})=>e.fontSizes.small};
    color: ${({theme:e})=>e.colors.selected.primary.background};
  }
`;class eje extends j.Component{constructor(s){super(s);R(this,"handleClick",s=>{s!==void 0&&s.stopPropagation(),this.state.showUndoButton?this.undoDeletion():this.deleteWatchlistSymbol()});R(this,"deleteWatchlistSymbol",()=>{const{cell:s}=this.props;this.setState({showUndoButton:!0});const n=this.props.symbolRef.current;n!==null&&n.setAttribute("style","text-decoration: line-through; color: var(--disabled);"),setTimeout(()=>{this.state.showUndoButton&&this.props.onDelete(s.rootSymbol)},5e3)});R(this,"undoDeletion",()=>{this.setState({showUndoButton:!1});const s=this.props.symbolRef.current;s!==null&&s.setAttribute("style","text-decoration: none;")});this.state={showUndoButton:!1}}render(){const{showUndoButton:s}=this.state,{cell:n}=this.props,r=s?`Undo delete ${n.value} from watchlist`:`Delete ${n.value} from watchlist`,o=`delete-icon ${s?"undo":""}`;return a.jsx(a.Fragment,{children:a.jsxs(J7e,{"aria-label":r,className:o,onClick:this.handleClick,tabIndex:0,"data-testid":"delete-watchlist-symbol-button",children:[s?__("Undo"):a.jsx(X,{type:Y.Remove,viewBox:"5 3 14 18",dataTestId:"remove-icon",width:14,height:18}),s&&a.jsx("div",{tabIndex:-1,"aria-live":"assertive","aria-relevant":"all",role:"alert",className:"delete-notification","data-testid":"undo-button",children:__("Symbol {{symbol}} deleted. Click again to undo.").replace("{{symbol}}",this.props.cell.rootSymbol)})]})})}}const tje=({cell:e,isRowDragAndDeleteEnabled:t,onDelete:s})=>{const n=j.useRef(null);return a.jsxs("div",{className:"symbol-cell","data-testid":`${e.value}-symbol-cell`,children:[a.jsx("span",{"data-symbol":e.value,className:"symbol-label","data-testid":`${e.value}-symbol-label`,"aria-label":Ns(e.value),ref:n,title:e.description,children:e.value}),t?a.jsx(eje,{cell:e,onDelete:s,symbolRef:n}):null]})},sje=e=>{var D,w;const{quote:t,buy:s,sell:n,isRowDragAndDeleteEnabled:r,selectedSymbol:o,numCharts:i,onDelete:l,activePage:c,instrument:d,calendar:u,scrollLeft:h,...p}=e,m=Qu(d),g=m.instrumentType===k.PRODUCT&&m.activeSymbol!==void 0?!0:m.tradeable,S={...t,...m,tradeable:g,payableDate:(D=u==null?void 0:u.dividend)==null?void 0:D.payableDate,upcomingEarningDate:(w=u==null?void 0:u.earning)==null?void 0:w.time};if(yu(S))return null;const T=(N,L)=>{const{buy:P,symbol:F,sell:O,activePage:H,numCharts:C,selectedSymbol:M}=e;if(N===V.BID)return O(F,L,H,C,M);if(N===V.ASK)return P(F,L,H,C,M)},y=(N,L,P)=>{if(P&&L!==void 0)return F=>{switch(F.key){case we.Enter:case we.Space:{F.stopPropagation(),F.preventDefault(),T(N,L);break}}}},b=(N,L,P)=>{if(P&&L!==void 0)return F=>{T(N,L)}},E=N=>N===void 0?null:e.columns.map((L,P)=>{const F=N.tradeable&&!N.composite,O=F&&(L===V.BID||L===V.ASK),H=Te(O&&"tradeable"),C=O?0:void 0,M=`Buy ${Ns(e.symbol)}`,q=`Sell ${Ns(e.symbol)}`,W=O?`${L===V.ASK?M:q}`:void 0,z=YP(N,L,d);return a.jsxs(Fn.td,{className:H,"aria-label":W,tabIndex:C,onKeyDown:y(L,N.instrumentType,F),onClick:b(L,N.instrumentType,F),children:[r&&P===0?a.jsx(X,{type:Y.Move,width:12,height:6,viewBox:"5 8 12 8",className:"move-icon",dataTestId:"move-icon"}):null,a.jsx("div",{className:"cell-value","data-testid":r?"":`cell-value-${L}`,children:L==="rootSymbol"?a.jsx(tje,{cell:{value:N.displaySymbol!==void 0?N.displaySymbol:e.symbol,rootSymbol:e.symbol,description:d==null?void 0:d.description},isRowDragAndDeleteEnabled:r,onDelete:l}):a.jsx(Yu,{column:L,value:z,symbol:e.symbol})})]},L)}),v=r?WT:Fn.inViewTr;return a.jsx(v,{...p,children:E(S)},p.id)},nje=(e,t)=>{const s=ms(e),n=qg(e),r=Ru(e),o=s===ge.Charts?r:n;return{quote:e.watchlists.quotes.find(i=>i.symbol===t.symbol),instrument:e.instruments.get(t.symbol),calendar:e.calendar.events.get(t.symbol),activePage:s,selectedSymbol:o,numCharts:hs(e).size}},rje=e=>({buy:async(t,s,n,r,o)=>{t!==void 0&&(t!==o&&(n===ge.Charts?(e(Ia(Ps(1),t)),e(Jo(t)),r===1&&e(ea(t))):(e(ws(ge.Trade,t)),r===1&&e(ui(Ps(1),t)))),setTimeout(()=>{Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:t}),s===k.OPTION?e({type:f.BuyOption,symbol:t,direction:pe.Buy}):e(pi(t,s,pe.Buy)),e(Us(ps.TRADE_TICKET))})},Zv),Ye({category:Ve.Trade,action:Le.AddTradeFromWL,label:s}))},sell:async(t,s,n,r,o)=>{t!==void 0&&(t!==o&&(n===ge.Charts?(e(Ia(Ps(1),t)),e(Jo(t)),r===1&&e(ea(t))):(e(ws(ge.Trade,t)),r===1&&e(ui(Ps(1),t)))),setTimeout(()=>{Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:t}),s===k.OPTION?e({type:f.BuyOption,symbol:t,direction:pe.Sell}):e(pi(t,s,pe.Sell)),e(Us(ps.TRADE_TICKET))})},Zv),Ye({category:Ve.Trade,action:Le.AddTradeFromWL,label:s}))}}),oje=se(nje,rje)(sje);let II=0;const Sm="watchlist-table",aje=e=>{const[t,s]=B.useState(!1),[n,r]=B.useState(e.currentWatchlistSymbols),[o,i]=B.useState(e.currentWatchlistSymbols.slice(0).sort()),[l,c]=B.useState(null),[d,u]=B.useState(["rootSymbol",...e.columns]),h=he=>vMe(he,e.quotes,e.instruments,e.symbolsPayableDates,e.symbolsUpcomingEarningDates),[p,m]=B.useState(h(e.currentWatchlistSymbols)),g=B.useRef(!1);B.useEffect(()=>{const he=s0();c(he)},[]);const S=un(e.columns),T=un(e.quotes),y=un(e.currentWatchlistSymbols);B.useEffect(()=>{const he=e.columns;JSON.stringify(he)!==JSON.stringify(S)&&u(["rootSymbol",...he]),(T==null?void 0:T.length)!==e.quotes.length&&m(h(n))},[e.columns,T,e.quotes,e.instruments,n,e.symbolsPayableDates,e.symbolsUpcomingEarningDates]);const b=()=>{e.getCalendarEvents(hS,II,e.currentWatchlistSymbols),g.current=!0,II++},E=xMe(e.columns,["payableDate","upcomingEarningDate"]),v=oi(e.currentWatchlistSymbols,y??[]);B.useEffect(()=>{E&&!g.current&&e.currentWatchlistSymbols.length>0||g.current&&e.currentWatchlistSymbols.length&&!v?b():(!E&&g.current||E&&!e.currentWatchlistSymbols.length&&g.current)&&(Ks(ts.request)(hS,te.CALENDAR_EVENTS),g.current=!1)},[E,e.currentWatchlistSymbols]),B.useEffect(()=>{const he=s0();((he==null?void 0:he.id)==="payableDate"||(he==null?void 0:he.id)==="upcomingEarningDate")&&L(he)},[e.symbolsPayableDates,e.symbolsUpcomingEarningDates]),B.useEffect(()=>()=>{g.current&&Ks(ts.request)(hS,te.CALENDAR_EVENTS)},[g]);const D=Nr(he=>U=>{he!==e.selectedSymbol&&e.setActiveSymbol(e.activePage,e.numCharts,he)},he=>he),w=Nr(he=>U=>{switch(U.key){case we.Enter:{D(he);break}}},he=>he),N=Nr((he,U)=>(Se,be)=>{const{rootSymbol:le}=be.row;return{"aria-label":`${le}, Draggable, Press space bar to lift.`,tabIndex:0,onDelete:O,onClick:D(le),onKeyPress:w(le),className:Te(he===le&&"-active"),symbol:le,isRowDragAndDeleteEnabled:e.isRowDragAndDeleteEnabled,columns:U===void 0?[]:U}},(he,U=[])=>he+U.join());B.useEffect(()=>{const{currentWatchlistSymbols:he,currentWatchlistSymbolsAlphaSort:U}=e,Se=oi(U,o);let be=he;if(Se)be=l!==null&&n.length>0?n:he;else{const We=p.map(Dt=>Dt.rootSymbol).sort();oi(U,We)&&(be=ol(p,l,he),m(h(be)),r(be),i(be.slice(0).sort()))}const le=h(be);if(p.length!==le.length)m(le);else for(let We=0;We<le.length;We++)le[We].rootSymbol!==p[We].rootSymbol&&m(le)},[e.currentWatchlistSymbols,e.currentWatchlistSymbolsAlphaSort,e.quotes,e.instruments,e.symbolsPayableDates,e.symbolsUpcomingEarningDates]);const L=he=>{const{currentWatchlistSymbols:U}=e,Se=ol(p,he,U),be=h(Se);m7(he),m(be),c(he),r(Se),i(n.slice(0).sort())},P=()=>{const he=Kx.filter(U=>!d.includes(U));return Dm(he)},F=he=>{e.watchlistId!==void 0&&e.removeSymbol(e.watchlistId,[he.rootSymbol].filter(Ut))},O=he=>{const U=p.find(Se=>Se.rootSymbol===he);U!==void 0&&F(U)},H=he=>{e.watchlistId!==void 0&&e.rearrange(e.watchlistId,he.map(U=>U.rootSymbol).filter(Ut))},C=he=>`watchlist-${he.rootSymbol}`,M={moveRow:H,getCancelMessage:pm,getMoveMessage:hm},q=he=>{u(he)};B.useEffect(()=>{e.setColumns(d.filter(he=>he!=="rootSymbol"))},[d,e.setColumns]);const W=()=>{const he=["rootSymbol",...$1];q(he)},z=Nr(he=>({onDragEnd:q,getCancelMessage:pm,getMoveMessage:hm,availableColumns:he,onColumnsReset:W}),he=>he.map(U=>U).join()),re=he=>s(he),ae=ol(p,l,e.currentWatchlistSymbols),Me=h(ae);return a.jsxs(a.Fragment,{children:[a.jsx(Vu,{customizableTableName:ko.Watchlist,topOffset:1,isOpen:t,onClose:()=>re(!1)}),a.jsx(mb,{dataIdentifier:e.watchlistId,tableExpanded:e.isWatchlistExpanded,data:Me,tableId:Sm,querySelector:"section.watchlist",getTrProps:N(e.selectedSymbol,d),canDragColumns:!0,draggableColumnsSettings:z(P()),columns:d,canDragRows:e.isRowDragAndDeleteEnabled,draggableRowsSettings:M,getRowId:C,canDeleteRow:e.isRowDragAndDeleteEnabled,deleteRow:F,getOnDeleteMessage:IMe,TrComponent:oje,sortingRule:l,onSortingChange:L,setIsCustomizationMenuOpen:re}),p.length===0?a.jsx(K7e,{isRowDragAndDeleteEnabled:e.isRowDragAndDeleteEnabled}):a.jsx("span",{}),a.jsx("div",{className:"draggable-column-drawer-portal",id:`${Sm} - row - portal`})]})},ije=x(z7e,e=>e),lje=e=>{const t=ije(e),s=qg(e),n=ms(e),r=Ru(e),o=n===ge.Charts?r:s,i=oM(e),l=Q7e(e);return{watchlistId:X7e(e),isRowDragAndDeleteEnabled:Z7e(e),selectedSymbol:o,quotes:t,currentWatchlistSymbols:i,currentWatchlistSymbolsAlphaSort:l,isWatchlistExpanded:e.layout.isWatchlistExpanded,instruments:th(e),columns:e.columns.watchlist,activePage:n,numCharts:hs(e).size,symbolsPayableDates:ZEe(e),symbolsUpcomingEarningDates:JEe(e)}},cje=e=>({removeSymbol(t,s){e({type:f.WatchlistRemoveSymbol,symbols:s,watchlistId:t})},rearrange(t,s){e({type:f.WatchlistRearrange,symbols:s,watchlistId:t})},setActiveSymbol(t,s,n){n!==void 0&&(t===ge.Charts?(e(Ia(Ps(1),n)),s===1&&e(ea(n))):(e(ws(ge.Trade,n)),s===1&&e(ui(Ps(1),n))))},setColumns(t){e(Ll("watchlist",t))},getCalendarEvents(t,s,n){e(gme(t,s,n??[]))}}),dje=se(lje,cje)(aje),uje=A.div`
  white-space: nowrap;
  flex-shrink: 0;

  ${Jy} {
    border-radius: ${({theme:{shape:e}})=>e.borderRadius.primary}px;
    padding-top: ${({theme:{space:e}})=>e.xSmall};
    padding-left: ${({theme:{space:e}})=>e.xSmall};
    padding-bottom: ${({theme:{space:e}})=>e.xSmall};

    :not(:focus) {
      border-color: ${({theme:{colors:e}})=>e.border.primary};
    }
  }

  button {
    padding-block: 0;
    padding-inline: 0;
  }
`,hje=A.h2`
  ${({theme:e})=>e.mixins.ellipsis};
  display: inline-block;
  max-width: 100%;
  line-height: 1.8rem;
  margin: 0 ${({theme:{space:e}})=>e.xxSmall} 0 0;
  white-space: pre;
  font-size: 1.6rem;
`,pje=A(tt)`
  width: 100%;
  padding-left: 0;
`,aM=Xo.swap,mje=e=>{const[t,s]=B.useState(!1),n=()=>t&&s(!1),r=()=>{const{isWatchlistExpanded:S,watchlistPreviouslyExpandedByClick:T,toggleWatchlistExpansion:y}=e;y(!S,T)},{isConnected:o,hasWatchlists:i,isWatchlistExpanded:l,selectedWatchlist:c,isCategoryPersonalWatchlist:d,areWatchlistSymbolsLoading:u,requestWatchlistQuotes:h,unsubscribeFromWatchlistQuotes:p}=e;B.useEffect(()=>(o&&(c!=null&&c.id)&&h(c==null?void 0:c.id),()=>{c!=null&&c.id&&o&&p(c==null?void 0:c.id)}),[o,c==null?void 0:c.id]);const m=c!==void 0&&du(c)&&Jm(c)&&d,g=()=>i?u?a.jsx("div",{"data-testid":"watchlist-loader",className:"loader"}):a.jsxs("div",{"data-testid":"watchlist-content",className:"watchlist__content",children:[a.jsx(dje,{}),m&&a.jsx(M7e,{})]}):null;return a.jsxs("section",{className:Te("watchlist",l&&"expanded"),children:[a.jsx(v7e,{isOpen:t,onClose:n,selectedWatchlist:c}),a.jsx(Yg,{title:"Watchlist",icon:a.jsx(X,{type:Y.Watchlist,viewBox:"-2 -2 25 25",dataTestId:"watchlist-icon"}),isExpanded:l,handleExpandCollapse:r,dataTestId:"watchlist-header"}),a.jsx("div",{className:"watchlist__top-section",children:a.jsxs("div",{className:"watchlist__actions",children:[a.jsx("div",{className:"watchlist__dropdown",children:i&&a.jsxs(pje,{onClick:()=>s(!0),children:[a.jsx(hje,{"data-testid":"watchlists-initial-dropdown",className:"watchlist-description",children:c?__(c.description,{namespace:"Watchlist"}):""}),a.jsx(X,{type:Y.ArrowDropRightAlt,width:8,height:5,viewBox:"8 8 8 8"})]})}),a.jsx(uje,{children:a.jsx(GL,{})})]})}),g(),a.jsx("span",{className:"dropdown dropdown-container"}),e.getLiveSupportModalContent&&e.getLiveSupportModalContent()]})},gje=e=>{const{columns:t,setColumns:s,dragAndDropId:n,columnSort:r,setColumnSort:o}=e,i=c=>{const{source:d,destination:u}=c;co(u)||co(d)||u.index!==d.index&&s(aM(t,d.index,u.index))},l=c=>o(d=>({column:c,direction:d.column===c?Ly(d.direction):Pt.ASCENDING}));return a.jsx(fl,{onDragEnd:i,children:a.jsx("thead",{"data-testid":"level-2-header-container",children:a.jsx(wa,{droppableId:`${n}-header`,direction:"horizontal",children:c=>a.jsxs(l7e,{...c.droppableProps,ref:c.innerRef,children:[t.map((d,u)=>a.jsx(Sl,{draggableId:`${n}-header${d}`,index:u,children:(h,p)=>a.jsx(c7e,{dragAndDropId:n,column:d,provided:h,snapshot:p,onColumnClick:l,columnSort:r})},`${n}-header${d}`)),c.placeholder]})})})})},Sje=j.memo(gje),fje=e=>JT`
  0% {
    color: ${e.colors.buy.main};
  }
  
  100% {
    color: ${e.colors.buy.hover};
  }
`,Tje=e=>JT`
  0% {
    color: ${e.colors.sell.main};
  }
  
  100% {
    color: ${e.colors.sell.hover};
  }
`,yje=(e,t)=>{switch(t){case at.StronglyPositive:return fje(e);case at.StronglyNegative:return Tje(e);default:return}},Cje=A.td`
  font-size: ${({theme:e})=>e.fontSizes.small};
  line-height: 20px;
  font-weight: 400;
  padding: 0 ${({theme:e})=>e.space.small};
  white-space: nowrap;
  text-align: right;

  ${({tableId:e})=>e===yi.Bid_Table&&`:first-child {
  text-align: left;
  }`};
`,bje=A(Cje)`
  ${({theme:e})=>Ms({prop:"trend",variants:{[at.Neutral]:{color:e.colors.text.primary},[at.Positive]:{color:e.colors.buy.main},[at.StronglyPositive]:{color:e.colors.buy.main},[at.Negative]:{color:e.colors.sell.main},[at.StronglyNegative]:{color:e.colors.sell.main}}})}
  animation: 0.25s ${({theme:e,trend:t})=>yje(e,t)};
`,Eje=({value:e,column:t,tableId:s,fractionalType:n,showFractionalPricing:r,showDoubleTickForFractionalPricing:o})=>{const i=un(e),[l,c]=B.useState(at.Neutral),d=un(l);return B.useEffect(()=>{e===void 0||i===void 0||i===null||(e>i?d===at.Positive||d===at.StronglyPositive?c(at.StronglyPositive):c(at.Positive):e<i&&(d===at.Negative||d===at.StronglyNegative?c(at.StronglyNegative):c(at.Negative)))},[e,d,i]),a.jsx(bje,{"data-testid":"trending-table-cell","aria-label":t,trend:l,tableId:s,children:typeof e!="string"&&(t===uc.Bid||t===uc.Ask)?Vn(r,e,n,o):e})},Aje=j.memo(Eje),vje=e=>e===yi.Ask_Table?uc.Ask:uc.Bid,Ije=e=>{const t=vje(e);return uu[uc[t]]},xje=e=>{const{tableId:t,columns:s,symbol:n,instrumentType:r,buy:o,sell:i,isTradeable:l,price:c,relativeSize:d,setPriceLevelPreviewValue:u,fractionalType:h,showFractionalPricing:p,showDoubleTickForFractionalPricing:m,chartId:g,activePage:S}=e,T=()=>{l&&(t===yi.Bid_Table?c!==void 0&&r!==void 0&&i(n,r,c,S):t===yi.Ask_Table&&c!==void 0&&r!==void 0&&o(n,r,c,S))},y=w=>{w.key===we.Enter&&T()},b=w=>()=>{const N=Ije(t),L=parseFloat(e[N]+"")??0;u(g,w?void 0:L)},E=b(),v=b(!0),D=s.map(w=>`${w} ${e[uu[w]]}`).join(", ");return a.jsx(Jk,{"data-testid":"level-ii-table-row",onClick:T,onKeyDown:y,onMouseEnter:E,onMouseLeave:v,relativeSize:d,tableId:t,tabIndex:0,"aria-label":D,onFocus:E,onBlur:v,children:s.map(w=>a.jsx(Aje,{tableId:t,column:w,value:e[uu[w]],fractionalType:h,showFractionalPricing:p,showDoubleTickForFractionalPricing:m},w))})},wje=j.memo(xje),Oje=(e,{chartId:t})=>{const s=an(t),n=oy(t),r=Gm(t),o=WO(t);return i=>{const l=s(i),{showFractionalPricing:c,fractionalType:d}=pn(i,l!==null?l:""),u=n(i);return{instrumentType:u,showDoubleTickForFractionalPricing:Vs(r(i),u),isTradeable:o(i),showFractionalPricing:c,fractionalType:d,activePage:ms(i)}}},Rje=e=>({setPriceLevelPreviewValue:(t,s)=>e(tue(t,s)),buy:(t,s,n,r)=>{Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:t}),s===k.OPTION?e({type:f.BuyOption,symbol:t,direction:pe.Buy,price:n}):e(pi(t,s,pe.Buy,n)),e(Us(ps.TRADE_TICKET)),r===ge.Charts&&e(Jo(t))}),Ye({category:Ve.Trade,action:Le.AddTradeFromLevelII,label:s+" "+pe.Buy})},sell:(t,s,n,r)=>{Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:t}),s===k.OPTION?e({type:f.BuyOption,symbol:t,direction:pe.Sell,price:n}):e(pi(t,s,pe.Sell,n)),e(Us(ps.TRADE_TICKET)),r===ge.Charts&&e(Jo(t))}),Ye({category:Ve.Trade,action:Le.AddTradeFromLevelII,label:s+" "+pe.Sell})}}),Dje=se(Oje,Rje)(wje);function Lje(e){const{levelIIQuotes:t,defaultColumns:s,localStorageKey:n,defaultColumnSort:r,symbol:o,tableId:i,chartId:l}=e,[c,d]=j.useState(()=>{const g={...s,...lc(n,qp,s)};return Np(n,g),g[l]}),u=g=>{const S={...lc(n,qp,s),[l]:g};d(S[l]),Np(n,S)},[h,p]=j.useState(r),m=t.reduce((g,S)=>S.size!==void 0?g+S.size:g,0);return a.jsxs(o7e,{"data-testid":i,children:[a.jsx(Sje,{columns:c,setColumns:u,dragAndDropId:`${l}-levelII-${i}`,columnSort:h,setColumnSort:p}),a.jsx("tbody",{children:_pe(t,h).map(g=>{const S=Math.round((g.size??0)/m*100);return a.jsx(Dje,{chartId:l,columns:c,symbol:o,tableId:i,relativeSize:S,...g},`${o}-${g.name}`)})})]})}const xI=j.memo(Lje),_je=rl,Nje=36,Pje=e=>e>1?oC+gu+rl:rl,kje=l_,Mje=e=>e.bidQuotes.length>=1||e.askQuotes.length>=1,$je=e=>e.error!==void 0&&e.error.includes("User does not have required permission"),gb=(e,t,s)=>t.includes(qi)?e?kje:Pje(s)+MC(t,s):e?Nje:_je,iM=(e,t,s)=>e===ge.Charts&&t?s:s+$Ae,jje="You do not have permissions for Level II data.",Bje="No Level II Data",Fje=({chartId:e,width:t,height:s,level2Data:n,ExpandIcon:r,selectedSymbol:o,requestMarketDepth:i,unsubscribeFromMarketDepth:l,activePage:c,numCharts:d,isMulticharts:u})=>{const[h,p]=B.useState(!1);if(B.useEffect(()=>{o!==null&&(setTimeout(()=>i(o,e),0),p(!0))},[i,o,e]),B.useEffect(()=>()=>{h&&l(e)},[l,h,e]),o===null)return null;const m=Mje(n),g=$je(n),S=!m||g,T=window.innerWidth<=Es.MOBILE_LARGE,y=gb(T,e,d),b=iM(c,T,s),E=a.jsxs(r7e,{width:t,height:u?b-46:b,addMarginBottom:c!==ge.Charts&&window.innerWidth<=Es.TABLET_LARGE,"data-testid":`level-ii-${e}-${o}`,children:[a.jsx(Be,{flexDirection:"column",minHeight:`${u?"48":y}px`,children:r&&a.jsx(pb,{children:r})}),a.jsx(a7e,{children:S?a.jsx(i7e,{"data-testid":"levelII-error",children:__(g?__(jje):__(Bje))}):a.jsxs(a.Fragment,{children:[a.jsx(xI,{chartId:e,tableId:yi.Bid_Table,defaultColumns:{[e]:rT},localStorageKey:sn.LEVEL_2_BID_COLUMN_SET,levelIIQuotes:n.bidQuotes,defaultColumnSort:Lpe,symbol:o}),a.jsx(xI,{chartId:e,tableId:yi.Ask_Table,defaultColumns:{[e]:oT},localStorageKey:sn.LEVEL_2_ASK_COLUMN_SET,levelIIQuotes:n.askQuotes,defaultColumnSort:Dpe,symbol:o})]})})]});return a.jsxs(a.Fragment,{children:[a.jsx(jr,{children:E}),a.jsx(fr,{children:a.jsx(xc,{timeout:Zk,classNames:Rd,children:E},"level-ii")})]})},Hje=_l(Fje),Uje=(e,{chartId:t})=>{const s=an(t);return(n,{chartId:r})=>({level2Data:Qk(n,r),selectedSymbol:s(n),activePage:ms(n),lowerStudies:ey(n,r),numCharts:hs(n).size})},Vje=e=>({requestMarketDepth:(t,s)=>e(dD(t,s)),unsubscribeFromMarketDepth:t=>e(uD(t))}),Wje=se(Uje,Vje)(Hje),Gje=(e,t,s)=>({type:f.SetActiveTraderInputQty,tradingSystem:e,inputQuantity:t,symbol:s}),Yje=e=>x(t=>t.trades,eR(e),(t,s)=>{var d,u;const n=s.reduce((h,p)=>{const{quantity:m=0}=p;return h+m},0),r=s.reduce((h,p)=>{var S;if(((S=s[0])==null?void 0:S.type)===k.FUTURE){const{openPrice:T=0,quantity:y=0}=p,b=T*y;return h+b}const{openCost:g=0}=p;return h+g},0),o=(d=s[0])==null?void 0:d.symbol,l=(o!==void 0?(u=t.get(o))==null?void 0:u.findIndex(h=>h.symbol===o&&h.status===de.Completed):-1)!==-1?s.map(h=>h.openPrice):[],c=s.length?r/n:0;return{combinedQuantity:n,combinedOpenCost:r,openPricesForSymbol:l,averageOpenPrice:c}}),qje=e=>x(eR(e),th,(t,s)=>{var n;if(t[0]!==void 0&&t[0].type===k.FUTURE)return((n=s.get(t[0].symbol))==null?void 0:n.gainPerTick)??.01}),Kje=e=>x(an(e),th,(t,s)=>{const n=t!==null?t:"",r=s.get(n);return{symbol:n,instrumentType:r==null?void 0:r.type,increment:(r==null?void 0:r.priceTick)??.01,priceTickValue:r==null?void 0:r.gainPerTick,futureOption:(r==null?void 0:r.futureOption)??!1,composite:(r==null?void 0:r.composite)??!1,spc:r==null?void 0:r.spc}}),zje=e=>x(zae,an(e),(t,s)=>t.filter(n=>n.instrument.rootSymbol===s&&n.instrument.instrumentType!==k.OPTION)),Xje=x(Vm,e=>(e==null?void 0:e.orderStartedFrom)===va.ACTIVE_TRADER?e:void 0),GT=e=>e.activeTraderSettingsMenu.activeTraderSettingsButtons,lM=28,Qje=A(Hk)`
  height: ${lM}px;
  padding: ${({theme:e})=>`0 ${e.space.small}`};
  padding-bottom: ${({variant:e,theme:t})=>`${e===Pe.secondary&&t.space.xxxSmall}`};
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  margin-right: 1px;

  ${({variant:e})=>e===Pe.secondary&&`border-width: 2px 0 2px 2px;
    font-weight: 500;
    margin-right: 0;
  `}
`,Zje=A(_n)`
  ${Wn} {
    height: ${lM}px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 0 20px 20px 0;
    padding-right: ${({theme:e})=>`${e.space.small}`};

    ${({theme:e})=>Ms({prop:"direction",variants:{[Oo.Buy]:{backgroundColor:e.colors.buy.main,"&:hover":{backgroundColor:e.colors.buy.hover},"&:active":{backgroundColor:e.colors.buy.active}},[Oo.Sell]:{backgroundColor:e.colors.sell.main,"&:hover":{backgroundColor:e.colors.sell.hover},"&:active":{backgroundColor:e.colors.sell.active}}}})}

    ${({theme:e})=>Ms({variants:{[Pe.secondary]:{border:`2px solid ${e.colors.border.secondary}`,padding:"0 10px","&:hover":{backgroundColor:e.colors.action.hover},"&:active":{backgroundColor:e.colors.action.active}}}})}
  }
`,wI=({direction:e,variant:t,buttonAriaLabel:s,buttonLabel:n,onButtonClick:r,anchorAriaLabel:o,values:i,onListItemClick:l,getListItemKey:c,selectedItemIndex:d,renderListItemContent:u,renderAnchorButtonContent:h,isDisabled:p,...m})=>a.jsxs(Be,{children:[a.jsx(Qje,{"data-testid":`split-button-${m["data-testid"]}`,variant:t,direction:e,isSplitButton:!0,"aria-label":s,id:n,onClick:r,disabled:p,children:__(n)}),a.jsx(Zje,{variant:t,direction:e,width:80,placement:"bottom-end","data-testid":`split-button-dropdown-${m["data-testid"]}`,anchorAriaLabel:o,values:i,onListItemClick:l,getListItemKey:c,selectedItemIndex:d,renderListItemContent:u,renderAnchorButtonContent:h})]}),OI=e=>{const{isOpened:t,onToggleATLSettingsMenu:s,toggleButtonRef:n,chartId:r,chartsWrapperRef:o}=e,i=Ar(),l=Tn(GT),c=l.has(r)?l.get(r):Vx,d=()=>{t&&s()},u=S=>{i(Iye(S,r)),S===Gi.AUTO_SEND&&e.onRemoveAutoSend()},h=S=>{i(Aye(S,r))},p=P1.filter(S=>c?c.indexOf(S)==-1:[]),m=(S,T)=>a.jsxs(_k,{children:[a.jsx(ot,{id:"atl-visible-buttons",mb:it.space.small,display:"block","data-testid":"atl-visible-buttons",children:__("Visible Buttons")}),a.jsxs(aa,{id:T,"data-testid":"visible-active-trader-buttons","aria-labelledby":"Active Trader Settings Visible Buttons",role:"list",children:[(!S||S.length===0)&&a.jsx(ot,{"data-testid":"no-visible-active-trader-buttons-message",color:"text.disabled",mb:it.space.small,maxWidth:"160px",children:__("There are no visible buttons")}),a.jsx(Qd,{items:S??[],strategy:Zd,children:S&&S.map((y,b)=>a.jsx(Su,{id:y,role:"listitem",item:y,onClick:E=>u(E),actionButton:a.jsx(Kn,{as:"div",variant:cn.remove}),itemTitle:y},`${y}-${b}`))})]})]}),g=Bg(r);return a.jsx(R6e,{isChartPage:r.includes("chart-page"),children:a.jsx(gg,{customizableListName:i8,topOffset:g.topOffset+(r.includes("chart-page")?0:-18),isOpen:t,isChartOverlay:!0,hideResetButton:!0,onClose:d,visibleItems:c??[],availableItems:p,resetItems:()=>!1,setItems:h,isTradePageOpen:!1,removeItem:u,renderItems:m,heading:__("Customize Active Trader"),mainItemsHeading:__("Available Buttons"),hideVisibleItemsHeading:!0,toggleButtonRef:n,chartsWrapperRef:o,noAvailableItemMessage:__("There are no available buttons")})})},Jje=A.label``,e9e=A.input`
  border-radius: 5px;
  border: 1px solid ${({theme:e})=>e.colors.border.primary};
  margin-left: 10px;
  max-width: 68px;
  color: ${({theme:e})=>e.colors.text.primary};
  background-color: ${({theme:e})=>e.colors.background.secondary};
`,t9e=e=>{const{inputQuantity:t,defaultQuantity:s,tradingSystem:n,setActiveTraderInputQuantity:r,symbol:o}=e,[i,l]=j.useState(String(t)),c=h=>{const p=h.target.value,m=AC(p,i);l(m)},d=h=>{Number(i)||l(h)},u=()=>{const h=Math.abs(Number(i));Number.isNaN(h)||h>Number.MAX_SAFE_INTEGER||h===0||o===null||r(n,h,o)};return j.useEffect(()=>{i!==String(t)&&l(String(t))},[t]),j.useEffect(()=>{u()},[i]),a.jsxs("div",{children:[a.jsx(Jje,{"data-testid":"active-trader-qty-label",htmlFor:"active-trader-qty-input",children:__("Qty")}),a.jsx(e9e,{id:"active-trader-qty-input","data-testid":"active-trader-qty-input",value:i,onChange:c,onBlur:()=>d(String(s))})]})},s9e=100,n9e="alert",r9e=A.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  max-width: ${({width:e})=>`${e}px`};
  margin: 0 ${({theme:e})=>`${e.space.medium}`};
  ${({theme:e,addMarginTop:t})=>t&&`margin-top: ${e.space.medium}`};
  background-color: ${({theme:e})=>e.colors.boxShadow.secondary};

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    position: absolute;
    left: ${({theme:e})=>e.space.medium};
    margin: 0;
    z-index: 2; /* needs to be above 'Enter a symbol to view chart' on mobile */
  }
`,o9e=A.table`
  align-self: center;
  display: flex;
  flex-direction: column;
`,a9e=A(e1)`
  ::-webkit-scrollbar-thumb {
    min-height: 25px;
  }
`,i9e=A.tr`
  padding-bottom: 10px;
  padding-top: 7px;
  display: flex;
  table-layout: fixed;
  margin-left: 5px;
  border-bottom: 2px solid ${({theme:e})=>`${e.colors.border.primary}`};
  background-color: ${({theme:e})=>e.colors.background.secondary};
  font-weight: 500;
  width: ${({width:e})=>`${e-5}px`};
`,Fl=A.th`
  display: table-cell;
  text-align: center;
  flex: 1;
  width: ${({width:e})=>e};
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: ${({theme:e})=>e.fontSizes.small};
`,l9e=A.div`
  border-top: 2px solid ${({theme:e})=>e.colors.component.ActiveTraderLadder.border};
  margin-left: 5px;
  align-self: center;
  width: ${({width:e})=>`${e-5}px`};
`;A.div`
  display: flex;
  padding-bottom: 7px;
  margin-left: 6px;
  flex-wrap: wrap;

  > * {
    &:last-child {
      margin-right: 0;
    }
  }
`;const c9e=A.div`
  label {
    position: relative;
    top: ${({theme:e})=>e.space.xxxSmall};
    margin-left: ${({theme:e})=>e.space.xSmall};
  }

  .checkbox-wrapper + label {
    top: 1px;
  }
`,RI=A(Be)`
  margin-bottom: ${({theme:e})=>`${e.space.xxxSmall}`};
`,d9e=A.div`
  padding: ${it.space.medium} 0 3px;
  align-self: flex-start;
`,u9e=A.div`
  align-self: center;
`,h9e=A.div`
  display: flex;
  min-height: ${it.space.xxLarge};
  align-items: flex-end;
  margin-bottom: ${it.space.xSmall};
  justify-content: space-between;
  position: relative;
`,p9e=A(t9e)`
  min-height: 28px;
  margin-right: 3px;
  display: flex;
  align-items: center;
`,m9e=A(Be)`
  gap: ${it.space.xSmall};
  ${({shouldShowExpander:e})=>e&&Ss`
      padding-left: 10px;
    `}
  align-items: center;
  padding-top: ${it.space.xxSmall};
  min-height: 30px;

  ${u9e} {
    position: absolute;
    left: 7px;
    top: 17px;
  }
  ${({isExpandedDown:e})=>e&&Ss`
      padding-top: 10px;
    `}
`,g9e=A(tt)`
  padding: 1px 16px 3px 16px;
  color: ${({theme:e})=>e.colors.text.primary};
  font-weight: 500;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  border: 2px solid;
  border-radius: 100px;
`,S9e=(e,t)=>{const s=e.direction===pe.Buy?"+":"",n=t?go:e.quantity,r=V1(e.orderType??"");return`${s}${n} ${r}`},f9e=e=>e.reduce((t,s)=>{const n=s.price;if(n===void 0)return t;const r=t.get(n);return r===void 0?t.set(n,[s]):t.set(n,[...r,s])},ke()),cM=(e,t)=>e&&e===k.OPTION&&t&&t.length>0,T9e=e=>{const{price:t,openPricesForSymbol:s,averageOpenPrice:n,combinedOpenCost:r,instrumentType:o,combinedQuantity:i}=e;if(cM(o,s))return Number(t)<(s==null?void 0:s[0])&&i>0||Number(t)>(s==null?void 0:s[0])&&i<0;if(o!==k.OPTION)return Number(t)<n&&r>0||r<0&&Number(t)>n},y9e=e=>{const{price:t,openPricesForSymbol:s,averageOpenPrice:n,combinedOpenCost:r,instrumentType:o,combinedQuantity:i}=e;if(cM(o,s))return Number(t)<(s==null?void 0:s[0])&&i<0||Number(t)>(s==null?void 0:s[0])&&i>0;if(o!==k.OPTION)return Number(t)<n&&r<0||r>0&&Number(t)>n},YT=A.div`
  width: 100%;
  display: flex;
  align-items: center;
  padding: 5px;

  cursor: ${({draggable:e})=>e?"grab":"auto"};

  ${({theme:e,buy:t,isDragging:s,isDraft:n})=>{const r=n?"dashed":"solid",o=s?e.colors.action.focus:t?e.colors.buy.main:e.colors.sell.main;return Ss`
      border: 1px ${r} ${o};
    `}}

  border-radius: 3px;
  text-overflow: ellipsis;
  overflow: hidden;
  font-size: ${({theme:e})=>e.fontSizes.small};

  &:active {
    cursor: ${({draggable:e})=>e?"grabbing":"auto"};
  }
`,dM=A(YT)`
  display: none;
  border: none;
  cursor: pointer;
`,cf=A.div`
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  width: 100%;
`,C9e=A.div`
  width: 12px;
  display: ${({isDragging:e})=>e?"none":"block"};
  cursor: pointer;
`,b9e=A(_n)`
  ${Wn} {
    width: 14px;
  }
`,E9e=A.button`
  width: 100%;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  background-color: ${({theme:{colors:e}})=>e.background.secondary};
  border: 1px solid ${({theme:{colors:e}})=>e.border.primary};
  color: ${({theme:{colors:e}})=>e.text.primary};
  border-radius: 4px;
  padding: 9px 40.5px;
`,A9e=({symbol:e,cancelOrder:t,workingOrders:s})=>{const n=()=>{const r=s.length,o=__("Cancel {{number}} Orders").replace("{{number}}",r.toString());return a.jsx(E9e,{"aria-label":"Cancel Working Orders",onClick:()=>{t(s.map(i=>i.id),e)},children:`${o}`})};return a.jsx(b9e,{"data-testid":"working-order-cancel-dropdown",values:s,getListItemKey:r=>r.id.toString(),onListItemClick:r=>{t([r.id],e)},renderListItemContent:r=>{const o=`${__("Cancel")} ${__(r.direction)} ${r.direction===pe.Buy?"+":""}${r.quantity} ${e} @${ur(r.price)} ${V1(r.orderType??"")}`;return a.jsx("span",{children:`${o}`})},renderHeader:n,renderAnchorButtonContent:()=>a.jsx(X,{type:Y.Close,width:13,height:13,viewBox:"4 4 17.5 17.5",dataTestId:"close-icon",fill:"icon.primary"})})},Dd=A.td`
  padding: ${({theme:e})=>`${e.space.xxxSmall} ${e.space.xxxSmall}`};
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  text-align: center;
  white-space: nowrap;
  background-clip: padding-box;
  border: 2px solid ${({theme:e})=>e.colors.component.ActiveTraderLadder.border};
  ${({isLastColumn:e})=>e!==!0&&"border-right: 0px;"};
  ${({isLastRow:e})=>e!==!0&&"border-bottom: 0px"};
  ${({trend:e})=>e!==at.Neutral&&"position: relative"};
  ${({theme:e,shouldFillBg:t,buy:s})=>{const n=()=>t?s?{"background-color":e.colors.buy.background}:{"background-color":e.colors.sell.background}:{};return Ms({prop:"trend",variants:{[at.Neutral]:{color:e.colors.text.primary,...n()},[at.Positive]:{color:e.colors.buy.main},[at.Negative]:{color:e.colors.sell.main}}})}}
  ${({theme:e,isMarkPrice:t})=>t&&`background-color: ${e.colors.selected.primary.main}; font-weight: 500;`};

  &:hover ${dM} {
    display: ${({isVisible:e})=>e?"flex":"none"};
  }
`,v9e=A(X)`
  left: -5px;
  position: absolute;
  top: 38%;
`,I9e=A(X)`
  right: -5px;
  position: absolute;
  top: 38%;
`,DI=A.div`
  position: absolute;
  ${({quoteType:e})=>e==="bid"?"right: 0;":"left: 0;"};
  top: 0;
  height: 100%;
  overflow: hidden;
  width: ${({size:e})=>`${e}%`};
  background-color: ${({theme:e})=>`${e.colors.border.primary}`};
  z-index: -1;
  opacity: 0.5;
`,x9e=A.button`
  border: none;
  outline: none;
  color: currentColor;
  font-weight: normal;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  background: none;
`,w9e=({symbol:e,price:t,direction:s,workingOrderDetails:n,workingOrders:r,dragState:o,setDragState:i,inputQuantity:l,targetPriceRef:c,themeColors:d,cancelOrder:u,editWorkingOrder:h,createTrade:p,isAutoSend:m,activePage:g,defaultUserProperties:S,privacyModeEnabled:T,markPrice:y,instrumentType:b,rowIndex:E,setScrollIndex:v})=>{const{isDragging:D,orderContext:w,targetPrice:N}=o,L=w.price===t,P=w.direction==s,F=BP(s,Number(t),y),O=w.quantity??l,H=s===pe.Buy?O:Math.abs(O)*-1,C=oN(F,s,H,T),M=()=>{n.length>0||D||N||(i({isDragging:!1,orderContext:{direction:s,details:C,isWorkingOrder:!1,orderType:F,quantity:H},targetPrice:t}),p(e,b,s,Number(t),F,void 0,l,m,g),v(e,E))},q=n.length===0&&!D&&!N;return a.jsxs(Dd,{"data-testid":`active-trader-${s}-${t}`,trend:at.Neutral,shouldFillBg:!0,buy:s===pe.Buy,onClick:M,onDragEnter:SOe(w,{price:t,direction:s}),onDragOver:fOe(w,{price:t,direction:s}),onDrop:TOe(w,{price:t,direction:s,details:w.isWorkingOrder?w.details:C},i,c,W=>{w.isWorkingOrder?(h(w.id,e,W,w.orderType??S.orderType,Math.abs(w.quantity??l),m),v(e,E)):m||(p(e,b,s,Number(W),w.orderType??S.orderType,void 0,Math.abs(w.quantity??S.quantity),!1,g),v(e,E))}),isVisible:q,children:[n.length>0&&(!L||!P)&&a.jsxs(YT,{buy:s===pe.Buy,draggable:COe(r),isDragging:L&&P,onDragStart:GA({id:r[0].id,price:t,direction:s,details:n[0],isWorkingOrder:!0,orderType:r[0].orderType,quantity:r[0].quantity},i,c,d),"data-testid":`active-trader-order-details-${t}`,children:[a.jsx(cf,{title:n.join(";"),children:n.join(";")}),r.length>1?a.jsx(A9e,{cancelOrder:u,symbol:e,workingOrders:r}):a.jsx(C9e,{isDragging:D&&L&&P,onClick:()=>{u([r[0].id],e)},"data-testid":`active-trader-cancel-order-${t}`,children:a.jsx(X,{type:Y.Close,width:13,height:13,viewBox:"4 4 17.5 17.5",dataTestId:"close-icon",fill:"icon.primary"})})]}),a.jsx(dM,{"data-testid":`active-trader-hover-order-details-${t}`,children:a.jsx(cf,{title:C,children:C})}),t===N&&!D&&P&&a.jsx(YT,{buy:s===pe.Buy,isDraft:!0,draggable:!0,isDragging:L&&P,onDragStart:GA(w,i,c,d,!0),"data-testid":`active-trader-drop-order-details-${t}`,children:a.jsx(cf,{title:w.details,children:w.details})})]})},LI=j.memo(w9e),O9e=e=>{const{index:t,style:s,data:n}=e,{symbol:r,increment:o,isActive:i,bidTotal:l,askTotal:c,workingTrades:d,gainPerTick:u,combinedOpenCost:h,combinedQuantity:p,averageOpenPrice:m,marketDepth:g,openPricesForSymbol:S,instrumentType:T,markPrice:y,cancelOrder:b,privacyModeEnabled:E,showFractionalPricing:v,fractionalType:D,showDoubleTickForFractionalPricing:w,dragState:N,setDragState:L,targetPriceRef:P,themeColors:F,editWorkingOrder:O,defaultUserProperties:H,createTrade:C,inputQuantity:M,setScrollIndex:q,prices:W,handleCenterPrice:z,isAutoSend:re,activePage:ae,spc:Me,priceTickValue:he,futureOption:U}=n,Se=EC(o),be=W[t];return a.jsx(R9e,{style:{...s,width:"calc(100% - 5px)",marginLeft:5,display:"flex"},price:be,marketDepth:g,bidTotal:l,askTotal:c,priceDecimal:Se,privacyModeEnabled:E,plOpen:S.length>0?EOe(p,be,h,m,o,S,Me,T,u,he,U):"",active:i(be),isMarkPrice:be===`${y==null?void 0:y.toFixed(Se)}`,isLastRow:t===2e4,averageOpenPrice:m,combinedOpenCost:h,workingTrades:d,markPrice:y,cancelOrder:b,symbol:r,showFractionalPricing:v,fractionalType:D,showDoubleTickForFractionalPricing:w,dragState:N,setDragState:L,inputQuantity:M,targetPriceRef:P,themeColors:F,editWorkingOrder:O,defaultUserProperties:H,createTrade:C,instrumentType:T,rowIndex:t,setScrollIndex:q,handleCenterPrice:z,isAutoSend:re,activePage:ae,openPricesForSymbol:S,combinedQuantity:p})},R9e=j.memo(function({price:t,isMarkPrice:s,plOpen:n,active:r,markPrice:o,averageOpenPrice:i=0,isLastRow:l,style:c,combinedOpenCost:d,privacyModeEnabled:u,marketDepth:h,askTotal:p,bidTotal:m,workingTrades:g,priceDecimal:S,symbol:T,cancelOrder:y,showFractionalPricing:b,fractionalType:E,showDoubleTickForFractionalPricing:v,dragState:D,setDragState:w,inputQuantity:N,targetPriceRef:L,themeColors:P,editWorkingOrder:F,defaultUserProperties:O,createTrade:H,instrumentType:C,rowIndex:M,setScrollIndex:q,handleCenterPrice:W,isAutoSend:z,activePage:re,openPricesForSymbol:ae,combinedQuantity:Me}){const he=()=>"",U=It=>It.reduce((Lt,Zt)=>{var ns;return((ns=Zt.price)==null?void 0:ns.toFixed(S))===t?Lt+((Zt==null?void 0:Zt.size)||0):Lt},0),Se=U(h.askQuotes),be=Math.round((Se??0)/p*100)||0,le=U(h.bidQuotes),We=Math.round((le??0)/m*100)||0,He=It=>a.jsx("span",{title:It.toString(),children:a.jsx(tr,{value:It})});let Dt=at.Neutral;const Jt={price:t,openPricesForSymbol:ae,averageOpenPrice:i,combinedOpenCost:d,combinedQuantity:Me,instrumentType:C},ve=T9e(Jt),Ue=y9e(Jt);n&&(ve?Dt=at.Negative:Ue&&(Dt=at.Positive));const ft=It=>{const Lt=[],Zt=[],ns=[],ct=[];return g.filter(Q=>Q.orderType===ne.MOC||Q.orderType===ne.MARKET?t===ur(o).replace(",",""):ur(Q.price).replace(",","")===It).forEach(Q=>{const Z=S9e(Q,u);Q.direction===pe.Buy?(Lt.push(Z),ns.push(Q)):(Zt.push(Z),ct.push(Q))}),{buyWorkingOrderDetails:Lt,sellWorkingOrderDetails:Zt,buyWorkingTrades:ns,sellWorkingTrades:ct}},{buyWorkingOrderDetails:_e,sellWorkingOrderDetails:ht,buyWorkingTrades:kt,sellWorkingTrades:yt}=ft(t),jt=b?Fs(parseFloat(t),E,v):t;return a.jsxs("tr",{id:t,"data-testid":t,style:c,children:[a.jsx(LI,{symbol:T,price:t,direction:pe.Buy,workingOrderDetails:_e,workingOrders:kt,dragState:D,setDragState:w,inputQuantity:N,targetPriceRef:L,themeColors:P,cancelOrder:y,editWorkingOrder:F,defaultUserProperties:O,privacyModeEnabled:u,markPrice:o,createTrade:H,instrumentType:C,rowIndex:M,setScrollIndex:q,isAutoSend:z,activePage:re}),a.jsxs(Dd,{trend:at.Positive,children:[le||"",a.jsx(DI,{size:We,quoteType:"bid"})]}),a.jsxs(Dd,{isLastRow:l,isMarkPrice:s,children:[r&&a.jsx(v9e,{type:Y.ArrowDropRightAlt,width:10,height:10,viewBox:"3 4 14 14"}),a.jsx("span",{title:jt,children:a.jsx(x9e,{onClick:W,children:jt})}),r&&a.jsx(I9e,{type:Y.ArrowDropLeftAlt,width:10,height:10,viewBox:"3 4 14 14"})]}),a.jsxs(Dd,{trend:at.Negative,children:[Se||"",a.jsx(DI,{size:be,quoteType:"ask"})]}),a.jsx(LI,{symbol:T,price:t,direction:pe.Sell,workingOrderDetails:ht,workingOrders:yt,inputQuantity:N,dragState:D,setDragState:w,targetPriceRef:L,themeColors:P,cancelOrder:y,editWorkingOrder:F,defaultUserProperties:O,privacyModeEnabled:u,markPrice:o,createTrade:H,instrumentType:C,rowIndex:M,setScrollIndex:q,isAutoSend:z,activePage:re}),a.jsx(Dd,{isLastColumn:!0,isLastRow:l,trend:Dt,children:n?He(Number(n)):he()})]})}),df=35,D9e=30,L9e=5e3,Mi=200,_9e=e=>{const{chartId:t,ExpandIcon:s,width:n,height:r,increment:o,gainPerTick:i,privacyModeEnabled:l=!1,markPrice:c,inputQuantity:d,combinedOpenCost:u,combinedQuantity:h,openPricesForSymbol:p,symbol:m,instrumentType:g,averageOpenPrice:S,marketDepth:T,requestMarketDepth:y,unsubscribeFromMarketDepth:b,workingTrades:E,cancelOrder:v,positions:D,closePosition:w,sendOrder:N,activePage:L,showFractionalPricing:P,fractionalType:F,themeColors:O,editWorkingOrder:H,defaultUserProperties:C,draftOrder:M,scrollIndex:q,tradingSystem:W,setScrollIndex:z,numCharts:re,triggerFocus:ae,createTrade:Me,spc:he,priceTickValue:U,futureOption:Se,chartsWrapperRef:be,visibleActiveTraderButtons:le}=e,[We,He]=j.useState(!1),Dt=j.useRef(0),[Jt,ve]=j.useState(!1),[Ue,ft]=j.useState([]),[_e,ht]=B.useState(!1),[kt,yt]=Lo(sn.ACTIVE_TRADER_BUY_PRICE_TYPE,YA,Kr.MARKET),[jt,It]=Lo(sn.ACTIVE_TRADER_SELL_PRICE_TYPE,YA,Kr.MARKET),[Lt,Zt]=j.useState("NONE"),[ns,ct]=j.useState(!1),qt=Rt=>ct(Rt.target.checked),Q=()=>{D.length&&m&&(ns?N(m,D,L):w(m,D,L))},[Z,K]=j.useState(c),Ee=un(m),[ye,Ce]=j.useState(fp),[Oe,ce]=B.useState(!1),De=j.useRef(void 0),ue=un(M),$e=j.createRef();j.useEffect(()=>{Z===void 0&&K(c)},[c]),j.useEffect(()=>{cs.isEqual(Ee,m)||(K(c),Ce(fp))},[m]);const Ne=j.useRef(null);j.useEffect(()=>{ae(Ne)},[]);const Ke=Rt=>Rt.reduce((bs,js)=>js.size!==void 0?bs+js.size:bs,0),Qe=j.createRef(),St=Ke(T.bidQuotes),Ge=Ke(T.askQuotes),rt=j.useMemo(()=>Z?Number(Z.toFixed(2)):0,[Z]),es=j.useMemo(()=>{let Rt=20001;if(g!==k.FUTURE&&g!==k.PRODUCT&&g!==void 0){let bs=0;for(let js=10001;js<=20001&&!(-(js-10001)*o+rt<0);js++)bs++;Rt=10001+bs}return Rt},[o,rt]),Xt=Rt=>p.includes(Number(Rt)),Wt=j.useMemo(()=>vOe(o,rt,es),[o,rt,es]),gs=j.useMemo(()=>IOe(Ue,o,c),[Wt,o,c,Ue]),Mt=j.useMemo(()=>xOe(Wt,Mi),[Wt]);j.useEffect(()=>{ft(Mt)},[Mt,Wt]),j.useEffect(()=>{const Rt=Math.floor(Wt.length/2+Mt.length/2);if(Lt==="TOP"){const bs=Ue[Ue.length-1]!==Mt[Mt.length-1];if(!bs&&Ue.length>=Rt)return;const js=Wt.length/2-(bs?Mt.length-Mi:Ue.length-Mi+1),ca=js-Mi,To=Wt.filter((qc,dh)=>dh>ca&&dh<js),Yc=bs?To.concat(Mt):To.concat(Ue);Qe.current&&Qe.current.scrollToItem(237,"center"),Zt("NONE"),ft(Yc)}if(Lt==="BOTTOM"){const bs=Ue[0]!==Mt[0];if(!bs&&Ue.length>=Rt)return;const js=Wt.length/2+(bs?Mt.length-Mi:Ue.length-Mi),ca=js+Mi,To=Wt.filter((Xg,qc)=>qc>=js&&qc<ca),Yc=bs?Mt.concat(To):Ue.concat(To);Qe.current&&Qe.current.scrollToItem(Ue.length-20,"center"),Zt("NONE"),ft(Yc)}},[Lt]);const Bt=j.useCallback(()=>{ft(Mt),Qe.current&&(M&&m&&q[m]?Qe.current.scrollToItem(q[m],"center"):Qe.current.scrollToItem(gs,"center"))},[Qe,c,Wt,o,M]);j.useEffect(()=>{Ue.length===Mt.length&&Bt()},[Mt,Ue]);const ls=is(({increment:Rt,isActive:bs,bidTotal:js,askTotal:ca,workingTrades:To,gainPerTick:Yc,combinedOpenCost:Xg,combinedQuantity:qc,averageOpenPrice:dh,ladderBasePrice:y2,marketDepth:C2,openPricesForSymbol:b2,instrumentType:E2,privacyModeEnabled:A2,markPrice:v2,symbol:I2,cancelOrder:x2,showFractionalPricing:w2,fractionalType:O2,dragState:R2,setDragState:D2,targetPriceRef:L2,themeColors:_2,editWorkingOrder:N2,defaultUserProperties:P2,setScrollIndex:k2,inputQuantity:M2,tradingSystem:$2,prices:j2,handleCenterPrice:B2,isAutoSend:F2,createTrade:H2,activePage:U2,spc:V2,priceTickValue:W2,futureOption:G2})=>({increment:Rt,isActive:bs,bidTotal:js,askTotal:ca,workingTrades:To,gainPerTick:Yc,combinedOpenCost:Xg,combinedQuantity:qc,averageOpenPrice:dh,ladderBasePrice:y2,marketDepth:C2,openPricesForSymbol:b2,instrumentType:E2,tradingSystem:$2,privacyModeEnabled:A2,markPrice:v2,symbol:I2,cancelOrder:x2,inputQuantity:M2,showFractionalPricing:w2,fractionalType:O2,dragState:R2,setDragState:D2,targetPriceRef:L2,themeColors:_2,editWorkingOrder:N2,defaultUserProperties:P2,createTrade:H2,setScrollIndex:k2,prices:j2,handleCenterPrice:B2,isAutoSend:F2,activePage:U2,spc:V2,priceTickValue:W2,futureOption:G2})),An=j.useCallback(Rt=>{if(Qe.current){const bs=Ue.length*df,js=df*D9e;Rt.scrollOffset<js&&Zt("TOP"),Rt.scrollOffset>bs-js&&Zt("BOTTOM")}},[Qe,gs,Ue]),Li=j.useCallback(()=>{Dt.current=window.setTimeout(()=>{He(!1)},L9e)},[Bt,Dt]),la=j.useCallback(()=>{clearTimeout(Dt.current)},[Dt]);j.useEffect(()=>{We||(He(!0),Bt())},[Bt,We]),j.useEffect(()=>{He(!1)},[m,p.length]);const Gc=window.innerWidth<=Es.MOBILE_LARGE,ih=gb(Gc,t,re);j.useEffect(()=>{m!==null&&(setTimeout(()=>y(m,t),0),ve(!0))},[y,m,t]),j.useEffect(()=>()=>{Jt&&b(t)},[b,Jt,t]),j.useEffect(()=>{((ue==null?void 0:ue.price)!==(M==null?void 0:M.price)||(ue==null?void 0:ue.orderType)!==(M==null?void 0:M.orderType)||(ue==null?void 0:ue.quantity)!==(M==null?void 0:M.quantity))&&(M!==void 0&&AOe(M,g)?Ce(Rt=>{var To;const bs=Qo(o),js=((To=M==null?void 0:M.price)==null?void 0:To.toFixed(bs))??"0",ca=M.legs[0].direction;return{isDragging:!1,orderContext:{id:M.id,price:Rt.orderContext.price,direction:ca,details:oN(M.orderType,ca,M.quantity??e.inputQuantity,l),isWorkingOrder:M.id!==void 0,orderType:M.orderType,quantity:M.quantity},targetPrice:js}}):Ce(fp))},[M]);const lh=(Rt,bs)=>{e.createTrade(m,g,Rt,void 0,bs===Kr.MARKET?ne.MARKET:ne.LIMIT,bs,d||C.quantity,ns,L)},_i=(Rt,bs)=>{Rt===pe.Buy?yt(bs):It(bs)},p2=ls({increment:o,isActive:Xt,bidTotal:St,askTotal:Ge,symbol:m,workingTrades:E,gainPerTick:i,averageOpenPrice:S,combinedQuantity:h,combinedOpenCost:u,ladderBasePrice:rt,marketDepth:T,openPricesForSymbol:p,instrumentType:g,inputQuantity:d,privacyModeEnabled:l,cancelOrder:v,markPrice:c,showFractionalPricing:P,fractionalType:F,dragState:ye,setDragState:Ce,targetPriceRef:De,themeColors:O,tradingSystem:W,editWorkingOrder:H,defaultUserProperties:C,createTrade:Me,setScrollIndex:z,prices:Ue,handleCenterPrice:Bt,isAutoSend:ns,activePage:L,spc:he,priceTickValue:U,futureOption:Se}),Ml=n/6,xb=j.useMemo(()=>r-(ih+28),[r,ih]),ch=[Kr.MARKET,Kr.BID,Kr.ASK],m2=Oe?__("Close Active Trader Settings Menu"):__("Open Active Trader Settings Menu"),wb=()=>a.jsx(a.Fragment,{children:a.jsx(X,{type:Y.ArrowDropDownAlt,colorVariant:Pe.secondary,width:8,height:5,viewBox:"9 10 6 6"})}),g2=Rt=>{Rt.preventDefault(),ce(!Oe)},Ob=()=>{ce(!1)},[Rb,S2]=B.useState(!1),zg=()=>{const Rt=Ne.current;if(Rt){const bs=Rt.scrollHeight>40;S2(bs),Array.from(Rt.children).forEach(js=>{js instanceof HTMLElement&&(js.style.visibility="visible",js.offsetTop>18&&!_e&&(js.style.visibility="hidden"))})}};B.useEffect(()=>(zg(),window.addEventListener("resize",zg),()=>window.removeEventListener("resize",zg)),[le,n,_e,Oe]);const f2={[Gi.BUY]:a.jsx(RI,{mr:5,children:a.jsx(wI,{"data-testid":"active-trader-buy-button",direction:Oo.Buy,buttonAriaLabel:`Buy at ${qA(kt)}`,buttonLabel:`Buy ${kt}`,onButtonClick:()=>lh(pe.Buy,kt),anchorAriaLabel:"Select price type",values:ch,onListItemClick:Rt=>_i(pe.Buy,Rt),getListItemKey:Rt=>Rt,selectedItemIndex:ch.indexOf(kt),renderListItemContent:Rt=>a.jsx(ot,{children:Rt}),renderAnchorButtonContent:wb})}),[Gi.SELL]:a.jsx(RI,{mr:3,children:a.jsx(wI,{"data-testid":"active-trader-sell-button",direction:Oo.Sell,buttonAriaLabel:`Sell at ${qA(jt)}`,buttonLabel:`Sell ${jt}`,onButtonClick:()=>lh(pe.Sell,jt),anchorAriaLabel:"Select price type",values:ch,onListItemClick:Rt=>_i(pe.Sell,Rt),getListItemKey:Rt=>Rt,selectedItemIndex:ch.indexOf(jt),renderListItemContent:Rt=>a.jsx(ot,{children:Rt}),renderAnchorButtonContent:wb})}),[Gi.FLATTEN]:a.jsx(g9e,{"data-testid":"active-trader-flatten",onClick:Q,children:__("Flatten")}),[Gi.QTY]:a.jsx(p9e,{"data-testid":"active-trader-quantity",tradingSystem:W,inputQuantity:d,setActiveTraderInputQuantity:e.setActiveTraderInputQuantity,defaultQuantity:C.quantity,symbol:m}),[Gi.AUTO_SEND]:a.jsx(c9e,{"data-testid":"active-trader-auto-send-container",children:a.jsx(Mn,{id:"active-trader-auto-send",label:__("Auto Send"),ariaLabel:__("Auto Send"),isChecked:ns,onChange:qt})})},T2=le==null?void 0:le.map(Rt=>f2[Rt]);j.useEffect(()=>{Bt()},[xb]);const Db=a.jsxs(r9e,{width:n,height:"auto",onMouseEnter:la,addMarginTop:L!==ge.Charts&&window.innerWidth<=Es.TABLET_LARGE,"data-testid":`active-trader-${t}-${m}`,children:[a.jsxs(h9e,{id:"active-trader-actions",children:[a.jsx(Be,{ml:3,alignSelf:"baseline",pt:"16px",children:Rb&&a.jsx($o,{ariaLabel:"Show Controls","data-testid":"expander",onClick:()=>ht(Rt=>!Rt),isExpandedDown:_e})}),a.jsxs(m9e,{shouldShowExpander:Rb,tabIndex:-1,isExpandedDown:_e,ref:Ne,flexGrow:1,flexWrap:"wrap",maxHeight:_e?"none":"34px",overflow:"hidden",children:[a.jsx(a.Fragment,{children:T2}),s&&a.jsx(pb,{children:s})]}),a.jsx(d9e,{children:a.jsx(tt,{"data-testid":"atl-settings-button","aria-expanded":Oe,"aria-label":m2,ref:$e,onClick:g2,type:"button",children:a.jsx(X,{type:Y.Settings,width:14,height:14,viewBox:"2 2 21 21",dataTestId:"settings-icon",isActive:Oe})})})]}),a.jsx(o9e,{cellSpacing:0,children:a.jsx("thead",{children:a.jsxs(i9e,{width:n,children:[a.jsx(Fl,{width:Ml,children:__("Buy")}),a.jsxs(Fl,{width:Ml,children:[" ",__("BS")]}),a.jsx(Fl,{width:Ml,children:__("Price")}),a.jsxs(Fl,{width:Ml,children:[" ",__("AS")]}),a.jsx(Fl,{width:Ml,children:__("Sell")}),a.jsx(Fl,{title:__("P/L Open"),width:Ml,children:__("P/L Open")})]})})}),!e.composite&&a.jsx("div",{onMouseLeave:Li,children:a.jsx(a9e,{ref:Qe,onScroll:An,height:xb,itemCount:Ue.length,itemSize:df,width:n,style:{display:"flex",alignSelf:"center"},outerElementType:"table",innerElementType:"tbody",itemData:p2,children:O9e})}),a.jsx(l9e,{width:n})]});return a.jsxs(a.Fragment,{children:[a.jsxs(jr,{children:[Db,a.jsx(OI,{chartId:e.chartId,toggleButtonRef:$e,onToggleATLSettingsMenu:Ob,isOpened:Oe,chartsWrapperRef:be,marketToolButtonContentVisible:!0,activePage:ge.Charts,onRemoveAutoSend:()=>ct(!1)})]}),a.jsxs(fr,{children:[a.jsx(xc,{timeout:s9e,classNames:n9e,children:Db},"active-trader"),a.jsx(OI,{chartId:e.chartId,toggleButtonRef:$e,onToggleATLSettingsMenu:Ob,isOpened:Oe,chartsWrapperRef:be,marketToolButtonContentVisible:!0,activePage:ge.Charts,onRemoveAutoSend:()=>ct(!1)})]})]})},N9e=j.memo(_l(hn(_9e))),P9e=(e,{chartId:t})=>{const s=an(t),n=Kje(t),r=zje(t),o=Yje(t),i=qje(t),l=SN(t),c=Gm(t),d=Iw(n,km);return(u,{chartId:h})=>{var w;const p=s(u),m=Mo(u),g=n(u),S=r(u),{showFractionalPricing:T,fractionalType:y}=pn(u,p??""),b=d(u),E=p?Xje(u,p):void 0,v=p!==null&&m!==void 0?((w=u.activeTrader.get(m))==null?void 0:w.get(p))??b.quantity:b.quantity,D=GT(u).has(h)?GT(u).get(h):Vx;return{...g,...o(u),markPrice:l(u),positions:vie(h)(u),tradingSystem:m!==void 0?m:gt.LiveTrading,gainPerTick:i(u),privacyModeEnabled:Ma(u),activePage:ms(u),lowerStudies:ey(u,h),marketDepth:Qk(u,h),workingTrades:S,showFractionalPricing:T,fractionalType:y,showDoubleTickForFractionalPricing:Vs(c(u),g.instrumentType),defaultUserProperties:b,draftOrder:E,inputQuantity:v,numCharts:hs(u).size,visibleActiveTraderButtons:D}}},k9e=e=>({setActiveTraderInputQuantity:(t,s,n)=>{e(Gje(t,s,n))},requestMarketDepth:(t,s)=>e(dD(t,s)),unsubscribeFromMarketDepth:t=>e(uD(t)),cancelOrder:(t,s)=>{s!==null&&e({type:f.CancelOrder,orderIds:t,symbol:s})},editWorkingOrder:(t,s,n,r,o,i)=>{t===void 0||s===null||Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:s}),e({type:f.EditWorkingOrder,orderId:t,price:n,orderStartedFrom:va.ACTIVE_TRADER,orderType:r,quantity:o,isAutoSend:i}),i||e(Us(ps.TRADE_TICKET))})},createTrade:xa((t,s,n,r,o,i,l,c,d)=>{if(t===null||s===void 0)return;const u={category:w4[d],action:Le.TradeFromActiveTraderLadder,label:`${s} ${n}`};Ye(u),Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:t}),s===k.OPTION?e({type:f.BuyOption,symbol:t,direction:n,price:r,orderType:o,priceType:i,orderStartedFrom:o!==ne.MARKET?va.ACTIVE_TRADER:void 0,quantity:l,isAutoSend:c}):e(pi(t,s,n,r,o,i,o!==ne.MARKET?va.ACTIVE_TRADER:void 0,l,c)),c||e(Us(ps.TRADE_TICKET)),d===ge.Charts&&e(Jo(t))})},1e3,{leading:!1}),triggerFocus:t=>{e(sb(t))},closePosition(t,s,n){n===ge.Charts&&e(Jo(t)),e({type:f.UncheckAllTrades,rootSymbol:t}),e({type:f.ClosePositions,rootSymbol:t,positions:s,isFromFlatten:!0})},sendOrder(t,s,n){n===ge.Charts&&e(Jo(t)),e({type:f.ClosePositions,rootSymbol:t,positions:s,isFromFlatten:!0}),e({type:f.SendOrder,symbol:t}),e({type:f.UncheckAllTrades,rootSymbol:t})}}),M9e=se(P9e,k9e)(N9e),$9e=(e,t,s,n,r,o)=>e*t*(s+n)*Math.sqrt(r/o),j9e=(e,t,s,n,r,o)=>{const i=[],l=[],c=t.last??1,d=t.mark??1,u=t.volatilityIndex??1,h=Date.now(),p=e.values.length-s;e.values.forEach(({x:y},b)=>{if(b<p-1)i.push({x:y,y:null}),l.push({x:y,y:null});else if(b===p-1)i.push({x:y,y:c}),l.push({x:y,y:c});else if(b>=p){const E=y.getTime()-h,v=$9e(d,n,u,r,E>0?E:0,dN);i.push({x:y,y:c+v}),l.push({x:y,y:c-v})}});const[m,g]=Hx;return{id:o,plots:[{studyId:o,name:m,values:i},{studyId:o,name:g,values:l}]}},B9e=(e,t,s,n,r)=>{const o=[],i=e.values.length-n,{minPaintingPrice:l=0,priceStep:c=0}=t[0]||{};let d=l;return e.values.forEach(({x:h},p)=>{p<i?o.push({x:h,y:null}):p===i?(o.push({x:h,y:l}),d+=c):p>i&&(o.push({x:h,y:d}),d+=c)}),{id:r,plots:[{studyId:r,name:L1,values:o,volumeProfiles:t}]}};let uf,_I,NI;const PI=e=>e.workingOrders,F9e=(e,t)=>{const s=t.chartId,n=bO(s),r=EO(s),o=AO(s),i=Oae(s),l=Hm(s),c=x(l,ve=>ve==null?void 0:ve.newCandles),d=IO(s),u=xO(s),h=wO(s),p=OO(s),m=RO(s),g=x(l,ve=>ve==null?void 0:ve.volumes),S=x(l,ve=>ve==null?void 0:ve.studies),T=x(l,ve=>(ve==null?void 0:ve.studiesParams.map(Ue=>({...Ue,plotParameters:Ue.plotParameters})))??Yt());uf=x(S,T,c,l,g,(ve,Ue,ft,_e,ht)=>{if(Ue===void 0||_e===void 0)return;const{aggregations:kt,range:yt,expansionDataCount:jt}=_e,It=ve?[...ve]:[];ft!==void 0&&ht!==void 0&&It.unshift(ht,ft);const Lt=jx(It,new Date),Zt=Fx(kt[yt],Lt,jt),ns=It.filter(a$(Ue)).map(Zt);return ns.length>0?ns:void 0});const y=x(l,ve=>(ve==null?void 0:ve.expansionDataCount)??0),b=TO(s),E=yO(s),v=x(b,E,(ve,Ue)=>Ue[ve]);_I=ve=>x(uf,nie(ve),T,y,(Ue,ft,_e,ht)=>{var jt;const kt=Ue?[...Ue]:[],yt=[];return ft&&((jt=kt==null?void 0:kt[0])!=null&&jt.plots)&&(_e.forEach(It=>{if(It.parameters.type===me.PROBABILITY_OF_EXPIRING_CONE){const Lt=j9e(kt[0].plots[0],ft,ht,It.parameters.stdDev,It.parameters.volatilityAdjust,It.id);yt.push(Lt)}}),kt.forEach(It=>{let Lt=!1;It.plots.forEach((Zt,ns)=>{if(Zt.volumeProfiles){const ct=B9e(kt[0].plots[0],Zt.volumeProfiles,ft,ht,It.id);yt.push(ct),Lt=!0}ns===It.plots.length-1&&!Lt&&yt.push(It)})})),yt.length>0?yt:void 0});const D=_I(s),w=q2e(s),N=AP(s),L=an(s),P=x(N,L,(ve,Ue)=>Ue?ve.get(Ue):void 0),F=x(FOe(L),n,(ve,Ue)=>Ue?ve.filter(_e=>_e.type===k.OPTION).map(_e=>({strike:_e.strikePrice,optionType:_e.optionType,longOrShort:_e.quantity>=0?La.Long:La.Short})):[]),O=vN(s),H=x(N,L,JNe,uf,v,O,(ve,Ue,ft,_e,ht,kt)=>{var ct,qt;const jt=(qt=(ct=(_e??[])[0])==null?void 0:ct.plots[0])==null?void 0:qt.values.map(Q=>Q.x);if(!jt||jt.length===0)return ke();const It=Ue?ve.get(Ue):void 0,Lt=(It!==void 0?ft.get(It):[])??[],Zt={startTime:jt[0],endTime:jt[jt.length-1]},ns=Kke(Lt,Zt);return qke(ns,jt,ht,kt)}),C=KEe(s),M=zEe(s),q=XEe(s),W=QEe(s),z=x(H,w,PI,C,M,q,W,D,(ve,Ue,ft,_e,ht,kt,yt,jt)=>{const It=kP(),Lt={},Zt={};let ns=1;ve==null||ve.forEach(Q=>{const Z=It.next().value,K=`${Q.guid}${fy}`;Lt[Z.color]=K,Zt[K]=Z.color,ns=Z.nextColor}),Ue==null||Ue.forEach(Q=>{const Z=It.next().value,K=`${Q.id}${Ty}`;Lt[Z.color]=K,Zt[K]=Z.color,ns=Z.nextColor});const ct=(Q,Z)=>{var ye;const K=It.next().value,Ee=`${Q.symbol}-${(ye=Q.estimatedDate)==null?void 0:ye.getTime()}${Z}`;Lt[K.color]=Ee,Zt[Ee]=K.color,ns=K.nextColor},qt=(Q,Z)=>{var ye;const K=It.next().value,Ee=`${Q.symbol}-${(ye=Q.exDividendDate)==null?void 0:ye.getTime()}${Z}`;Lt[K.color]=Ee,Zt[Ee]=K.color,ns=K.nextColor};return _e&&ct(_e,yy),ht&&qt(ht,Cy),kt==null||kt.forEach(Q=>{ct(Q,by)}),yt==null||yt.forEach(Q=>{qt(Q,Ey)}),ft==null||ft.forEach(Q=>{const Z=It.next().value,K=It.next().value,Ee=`${Q.id}${wr}${Ka}`,ye=`${Q.id}${wr}`;Lt[Z.color]=Ee,Zt[Ee]=Z.color,Lt[K.color]=ye,Zt[ye]=K.color,ns=K.nextColor}),jt==null||jt.forEach(Q=>{const Z=It.next().value,K=`${Q.id}${Qm}`;Lt[Z.color]=K,Zt[K]=Z.color,ns=Z.nextColor}),{colorToDrawing:Lt,drawingToColor:Zt,nextColorIndex:ns}}),re=ve=>Ue=>{var ft,_e;return ve?(_e=(ft=Ue.createTrade.trade.get(ve))==null?void 0:ft[0])==null?void 0:_e.orders[0]:void 0},Me=Nr(ve=>x(re(ve),Ue=>(Ue==null?void 0:Ue.orderStartedFrom)===va.ACTIVE_TRADER?Ue:void 0)),he=Gm(s),Se=Nr(ve=>x(r,PI,he,Me(ve),(Ue,ft,_e,ht)=>{if(!Ue)return ke();const kt=ft.filter(yt=>{const jt=yt.orderType!==void 0&&Que.includes(yt.orderType),It=yt.spreadName===nt.STOCK||yt.spreadName===nt.FUTURE,Lt=yt.instrument.rootSymbol===_e;return jt&&It&&Lt}).map(yt=>ht===void 0?yt:yt.id===ht.id?{...yt,price:ht.price||0,quantity:ht.quantity||0}:yt);return f9e(kt)})),be=x(L,th,(ve,Ue)=>{const ft=ve??"",_e=Ue.get(ft);return{symbol:ft,instrumentType:_e==null?void 0:_e.type,increment:(_e==null?void 0:_e.priceTick)??.01,composite:(_e==null?void 0:_e.composite)??!1}}),le=x(L,ve=>ve??void 0),We=oy(s),He=WO(s),Dt=SN(s),Jt=Iw(be,km);return NI=x(o,Ic,Il,L,Ma,(ve,Ue,ft,_e,ht)=>!ve||Ue||ht?[]:ft.filter(yt=>yt.rootSymbol===_e||yt.underlyingSymbol===_e||yt.symbol===_e).filter(yt=>[k.STOCK,k.FUTURE,k.FOREX,k.ETF].includes(yt.type))),ve=>{var ns;const Ue=P(ve),ft=L(ve),_e=ft?ve.instruments.get(ft):void 0,ht=_e===void 0?ft:_e.displaySymbol,kt=le(ve),{colorToDrawing:yt,drawingToColor:jt,nextColorIndex:It}=z(ve,kt),Lt=Me(kt)(ve),Zt=Lt?`${Lt.id}${wr}`:void 0;return{priceLevelPreviewValue:i(ve),showChartHighLow:d(ve),showEarningsPreview:u(ve),showEarningsIcon:h(ve),showDividendsIcon:p(ve),fitStudiesInYAxis:m(ve),data:c(ve),studies:D(ve),options:F(ve),positions:NI(ve),workingOrders:Se(kt)(ve),drawingMode:((ns=ve.drawings.drawingStates.get(s))==null?void 0:ns.mode)??qr.None,selectedDrawingTool:sPe(ve,s),colorToDrawing:yt,drawingToColor:jt,nextColorIndex:It,selectedSetId:Ue,markPrice:Dt(ve),activeAlerts:w(ve,kt),drawings:H(ve),instrumentType:We(ve),isTradeable:He(ve),expansionItemsCount:y(ve),displaySymbol:ht,defaultUserProperties:Jt(ve),selectedWorkingOrderId:Zt,earnings:C(ve),dividends:M(ve),historicalEarnings:q(ve),historicalDividends:W(ve)}}},H9e=e=>({addChartExpansion:(t,s)=>e(cue(t,s)),removeChartExpansion:(t,s)=>e(due(t,s)),updateDrawing:(t,s)=>e(Mpe(t,s)),createDrawing:(t,s)=>{s!==void 0&&e(Wpe(t,s))},clearDrawingMode:t=>e(Ype(t)),addOrder:(t,s,n,r,o)=>e(pi(t,s,n,r,o)),addOptionOrder:t=>e($me(t)),createAlert:(t,s,n,r)=>e(XR(t,s,n,r)),deleteAlert:(t,s)=>e(wy(t,s)),uncheckAllTrades:t=>e(eg(t)),setFocus:t=>e(Us(t)),setPriceChartHoveredDate:(t,s)=>e(lue(t,s)),cancelOrders:(t,s)=>e(Ume(t,s)),editWorkingOrder:(t,s,n,r,o)=>{t===void 0||s===null||Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:s}),e({type:f.EditWorkingOrder,orderId:t,price:n,orderStartedFrom:va.ACTIVE_TRADER,orderType:r,quantity:o}),e(Us(ps.TRADE_TICKET))})},changeChartSelectedSymbol:t=>e(Jo(t))}),U9e=se(F9e,H9e)(cke),V9e=(e,t,s)=>{const n=__("P/L");return[`${Ns(s)} ${__("price")}`,`${n} ${t}`,`${n} ${e}`]},W9e=(e,t,s)=>{const n=t.reduce((r,o)=>(r[o.price]=o.gain,r),{});return e.map(r=>({symbol:s,price:r.price,today:r.gain,expiration:n[r.price]}))};class G9e extends j.Component{constructor(){super(...arguments);R(this,"state",{focused:!1});R(this,"handleFocus",()=>{this.setState({focused:!0})});R(this,"renderTable",()=>{const{expirationLabel:s,todayLabel:n,priceGainsToday:r,priceGainsExpiration:o,rootSymbol:i}=this.props,l=V9e(s,n,i),c=W9e(r,o,i);return a.jsxs("table",{children:[a.jsx("thead",{children:a.jsx("tr",{children:l.map(d=>a.jsx("th",{children:d},`risk-table-header-${d}`))})}),a.jsx("tbody",{className:"no-height",children:c.map(d=>a.jsxs("tr",{children:[a.jsx("td",{children:d.price}),a.jsx("td",{children:d.today}),a.jsx("td",{children:d.expiration})]},`risk-table-${d.price}`))})]})})}render(){return a.jsxs("div",{style:{position:"absolute",left:"-1000%"},"data-testid":"risk-profile",tabIndex:-1,onFocus:this.handleFocus,children:[a.jsx("h3",{style:{width:0,height:0,fontSize:0,margin:0,padding:0,position:"absolute",left:"-1000%"},children:__("Risk Profile Table")}),this.state.focused&&this.renderTable()]})}}const kI=.1,Y9e=e=>{const t=e.map(s=>s.gain);return Math.min(...t)},q9e=e=>{const t=e.map(s=>s.gain);return Math.max(...t)},Jr=e=>e,uM=x(Jr,e=>e.settings),Ri=x(uM,e=>e.chart),hM=x(Ri,Rg),K9e=x(Ri,jC),z9e=x(Ri,kLe),X9e=x(Ri,VN),Q9e=x(Ri,MLe),Z9e=x(Ri,WN),pM=x(Ri,Dg),Sb=x(Ri,Lg),J9e=x(Jr,e=>e.themeColors),eBe=x(Jr,e=>e.markLineColor),tBe=x(J9e,eBe,(e,t)=>{if(e===void 0)return"grey";switch(t){case"buy":return e[Ft.BUY];case"sell":return e[Ft.SELL];default:return e[Ft.PRIMARY_BTN]}}),sBe=x(Jr,e=>e.width),nBe=x(Jr,e=>e.height),sh=x(sBe,e=>e-kr.left-kr.right),Vc=x(nBe,e=>e-kr.top-kr.bottom),rBe=Nn(Jr,e=>e.domain),oBe=Nn(Jr,e=>e.priceGainsToday),mM=x(oBe,e=>e.length===0?void 0:e),aBe=Nn(Jr,e=>e.priceGainsExpiration),fb=x(aBe,e=>e.length===0?void 0:e),iBe=x(Jr,e=>e.underlyingMark),Di=x(sh,rBe,(e,t)=>{if(t)return No().domain([t.from,t.to]).range([0,e])}),nh=x(Vc,mM,fb,(e,t,s)=>{let n;if(t&&s?n=[...t,...s]:t?n=t:s&&(n=s),n){const r=Y9e(n),o=q9e(n),i=o-r;return No().domain([r-kI*i,o+kI*i]).range([e,0])}}),lBe=x(nh,e=>e==null?void 0:e.ticks(7)),cBe=x(Di,nh,(e,t)=>{if(e&&t)return bc().x(s=>e(s.price)).y(s=>s.gain!==null?t(s.gain):Number.MAX_SAFE_INTEGER).curve(bu)}),dBe=x(fb,Di,nh,(e,t,s)=>{if(e&&t&&s)return e.map(n=>{const r=e.map(u=>({x:u.price,y:u.gain})),o=Og(r),i=Math.max(0,n.gain),l=t(i===0?ul(n.price,o):n.price),c=s(i),d=s(0);return{x:l,y0:d,y1:c}})}),uBe=x(fb,Di,nh,(e,t,s)=>{if(e&&t&&s)return e.map(n=>{const r=e.map(u=>({x:u.price,y:u.gain})),o=Og(r),i=Math.min(0,n.gain),l=t(i===0?ul(n.price,o):n.price),c=s(0),d=s(i);return{x:l,y0:c,y1:d}})}),gM=()=>lx().x(e=>e.x).y0(e=>e.y0).y1(e=>e.y1),hBe=e=>t=>{t.beginPath();const s=dBe(e);s&&gM().context(t)(s);const n=X9e(e),r=Q9e(e);return t.strokeStyle=r,t.lineWidth=2*fe.DPR,t.stroke(),t.fillStyle=n,t.fill(),t},pBe=e=>t=>{t.beginPath();const s=uBe(e);s&&gM().context(t)(s);const n=K9e(e),r=z9e(e);return t.strokeStyle=r,t.lineWidth=2*fe.DPR,t.stroke(),t.fillStyle=n,t.fill(),t},mBe=e=>t=>{const s=iBe(e),n=Di(e),r=Vc(e),o=tBe(e);if(n&&s&&o){const i=n(s);t.save(),t.beginPath(),t.strokeStyle=o,t.lineWidth=2*fe.DPR,t.setLineDash([3*fe.DPR,3*fe.DPR]),t.moveTo(i,0),t.lineTo(i,r),t.stroke(),t.restore()}return t},gBe=e=>t=>{const s=mM(e),n=cBe(e),r=Z9e(e);return t.save(),t.strokeStyle=r,t.lineWidth=2*fe.DPR,t.setLineDash([fe.DPR,2*fe.DPR]),n&&s&&(t.beginPath(),n.context(t)(s),t.stroke(),t.restore()),t},SBe=(e,t,s,n,r,o,i)=>{const l=[e.invert(0),e.invert(s)],d=l.length>0&&l.every(u=>u%1e3===0)?O1:Sn;return l.forEach((u,h)=>{const p=e(u),m=o?Fs(u,r,i):d(u);t.textAlign=h===0?"left":h===l.length-1?"right":"center",t.fillText(m,p,n+20)}),t},fBe=e=>t=>{const s=Di(e),n=Vc(e),r=sh(e),o=hM(e),i=pM(e),l=Sb(e);return t.font=o,t.fillStyle=l,t.strokeStyle=i,s&&SBe(s,t,r,n,e.fractionalType,e.showFractionalPricing,e.showDoubleTickForFractionalPricing),t},TBe=e=>t=>{const s=lBe(e),n=nh(e),r=sh(e),o=hM(e),i=pM(e),l=Sb(e);return t.font=o,t.textAlign="right",t.textBaseline="bottom",t.fillStyle=l,t.strokeStyle=i,t.lineWidth=.5*fe.DPR,s&&n&&s.forEach(c=>{const d=n(c);t.beginPath(),t.moveTo(0,d),t.lineTo(r,d),t.stroke(),t.fillText(xr(c),r,d)}),t},yBe=(e,t)=>{if(t===null)return t;const s=gBe(e),n=mBe(e),r=hBe(e),o=pBe(e),i=fBe(e),l=TBe(e),c=kg(e.width,e.height,Sb(e)),d=xi(e),u=as([c,i,l]),h=qs(t);if(h){const p=d([h]),m=Xu(kr.left,kr.top)(p),g=o(m),S=r(g),T=s(S),y=n(T),b=u(y);Sc(b)}},CBe=is(yBe),bBe=x(Jr,e=>e.hoveredPrice),EBe=Nn(Jr,e=>e.options),ABe=x(EBe,e=>e.length===0?void 0:e),rh=x(uM,e=>e.optionPill),vBe=x(rh,e=>e.font),IBe=x(rh,e=>e.pillTextColor),xBe=x(rh,e=>e.sellColor),wBe=x(rh,e=>e.buyColor),OBe=x(rh,e=>e.pillBackColor),Kg=x(Jr,e=>e.settings.pointer),RBe=x(Kg,e=>e.font),DBe=x(Kg,e=>e.lineColor),LBe=x(Kg,e=>e.pillColor),_Be=x(Kg,e=>e.pillTextColor),SM=x(Jr,e=>e.hoveredChart),NBe=(e,t,s)=>{const n=SM(e),r=sh(e),o=Vc(e),i=r+kr.left,l=o+kr.top;let c;return t.clearRect(0,0,i+kr.right,l+kr.bottom),n===ys.GainAndLossChart&&(c=fM(t,e,s)),t.beginPath(),c},fM=(e,t,s)=>{const n=Di(t),r=sh(t),o=Vc(t),i=DBe(t),l=r+kr.left,c=o+kr.top;if(s<l&&s>kr.left&&n){const d={color:i,level:s,line:{from:kr.top,to:c},dash:[Qf.dashSize,Qf.dashSize]};Pg(e,d);const u=n.invert(s),h=t.showFractionalPricing?Fs(u,t.fractionalType,t.showDoubleTickForFractionalPricing):u.toFixed(2);return PBe(e,t,h,c,s),u}},PBe=(e,t,s,n,r)=>{const o=RBe(t),i=LBe(t),l=_Be(t);WC(e,s,i,l,o,n,r)},kBe=e=>t=>{const s=bBe(e),n=SM(e),r=Di(e);return n!==void 0&&n!==ys.GainAndLossChart&&s&&r&&fM(t,e,r(s)),t},MBe=(e,t,s,n,r,o)=>i=>{const l=5*fe.DPR,c=i.measureText(e).width+2*l,d=8*fe.DPR+2*l;i.strokeStyle=r,i.fillStyle=o,i.fillRect(t,s,c,d),i.fillStyle=r,i.fillRect(t,s,3*fe.DPR,d),i.lineWidth=fe.DPR,i.strokeRect(t,s,c,d),i.textAlign="left",i.textBaseline="middle",i.fillStyle=n;const u=s+d/2+fe.DPR;return i.fillText(e,t+l,u),i},$Be=e=>t=>{const s=ABe(e),n=Vc(e),r=vBe(e),o=IBe(e),i=OBe(e),l=xBe(e),c=wBe(e),d=n-4,u=Di(e);if(t.font=r,s&&u){const h=s.map(p=>{const m=u(p.strike),g=p.longOrShort===La.Short?l:c,S=`${p.longOrShort===La.Short?"-":"+"}${A1(e.showFractionalPricing,p.strike,e.fractionalType,e.showDoubleTickForFractionalPricing)}${p.optionType}`;return MBe(S,m,d,o,g,i)});return as(h)(t)}return t},jBe=(e,t)=>{const s=kBe(e),n=$Be(e),r=xi(e),o=qs(t);if(o){const i=r([o]),l=n(i);s(l)}},BBe=is(jBe),FBe=e=>{const{markLineColor:t="primary-btn"}=e,s=vp.format(Math.abs(e.profitAtExpiration)),n=vp.format(Math.abs(e.profitCurrent)),r=`color-stroke-${t}`;return a.jsxs(B.Fragment,{children:[a.jsxs("div",{className:"data-tooltip-row",children:[a.jsxs("div",{className:"data-tooltip-label",children:[a.jsx(X,{type:Y.Dots,width:18,height:3,viewBox:"0 0 18 3",dataTestId:"dots-icon",strokeClass:r}),a.jsxs("div",{"data-testid":"current-price",className:"label",children:[__("Current Price"),":"]})]}),a.jsx("span",{"data-testid":"current-price-value",className:"data-tooltip-value",children:e.currentPrice})]}),a.jsxs("div",{className:"data-tooltip-row",children:[a.jsxs("div",{className:"data-tooltip-label","data-testid":"profit-loss-current-date-label",children:[a.jsx(X,{type:Y.Dots,dataTestId:"dots-icon",width:18,height:3,viewBox:"0 0 18 3",className:"gain-loss-icon",strokeClass:"color-stroke-aqua"}),__("P/L")," ",e.currentDateLabel,":"]}),a.jsx("span",{className:"data-tooltip-value","data-testid":"profit-loss-current-date-value",children:e.profitCurrent<0?`(${n})`:n})]}),a.jsxs("div",{className:"data-tooltip-row",children:[a.jsxs("div",{className:"data-tooltip-label","data-testid":"profit-loss-option-expiry-date-label",children:[a.jsx(X,{type:Y.StatusFlags,width:15,height:15,viewBox:"2 2 21 21",dataTestId:"status-flags-icon",className:Te("gain-loss-icon","status-flags")}),__("P/L")," ",e.expirationDateLabel,":"]}),a.jsx("span",{className:"data-tooltip-value","data-testid":"profit-loss-option-expiry-date-value",children:e.profitAtExpiration<0?`(${s})`:s})]})]},"pl-profile-tooltip")},HBe=e=>{const t=e.domain;if(t===void 0||t.to===Number.POSITIVE_INFINITY)return;const s={from:0,to:e.width},n=e.priceGainsToday.length!==0?e.priceGainsToday.length:1,r=e.width/n,o=(t.to-t.from)/(s.to-s.from);return she(e.cursorX,r,o,e.priceGainsToday,e.priceGainsExpiration,e.hoveredPrice)},UBe=e=>{const t=HBe(e);return t===void 0||!e.hasOptions||!e.isVisible?null:a.jsx("div",{className:"data-tooltip-wrapper",children:[FBe({expirationDateLabel:e.expirationLabel,currentDateLabel:e.todayLabel,profitAtExpiration:t.profitExpiration,profitCurrent:t.profitToday,markLineColor:e.markLineColor,currentPrice:e.currentPrice})]})},VBe=B.memo(UBe),WBe=A(Be)`
  width: 100%;
  height: 40px;
  align-items: flex-end;
  justify-content: space-between;
  margin-bottom: 8px;

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    ${({isWrapped:e})=>e&&"height: 75px"};
  }
`,GBe=A(Be)`
  justify-content: space-between;
  flex-wrap: wrap;
  ${({isWrapped:e,chartWidth:t})=>e&&`
    flex-wrap: wrap;
    width: ${t/1.25}px
    `}
`,YBe=A.div`
  display: flex;
  ${({isWrapped:e})=>e&&`
    align-self: flex-end;
    `}

  ${({theme:{breakpoints:e}})=>e.below(e.desktopSmall)} {
    display: none;
  }
`;class qBe extends B.PureComponent{constructor(s){super(s);R(this,"price");R(this,"getSettings",s=>{const n=s.themeColors,r=Qf,o=n!==void 0?{pointer:{...r.pointer,pillColor:n[Ft.SELECTED],lineColor:n[Ft.PRIMARY_BTN]},chart:{...r.chart,sellColor:n[Ft.SELL_FILL],buyColor:n[Ft.BUY_FILL],sellStrokeColor:n[Ft.SELL],buyStrokeColor:n[Ft.BUY],chartLineColor:n[Ft.AQUA],gridColor:n[Ft.DISABLED],axisLabelTextColor:n[Ft.DISABLED]},optionPill:{...r.optionPill,pillTextColor:n[Ft.DISABLED],sellColor:n[Ft.SELL],buyColor:n[Ft.BUY],pillBackColor:n[Ft.ELEMENT_BACKGROUND]}}:{};return{...r,...o}});R(this,"renderOnMove",(s,n,r,o)=>{this.price=NBe(s,n,r)});R(this,"handleMouseEnter",()=>{this.props.onMouseEnter(ys.GainAndLossChart)});R(this,"onPointerMove",(s,n,r)=>{this.props.hoveredChart&&this.price&&(this.setState({cursorX:n}),this.props.getPrice&&this.props.getPrice(ys.GainAndLossChart,this.price))});R(this,"onDatePickerUpdate",s=>{this.props.setGainAndLossDateTime(s)});this.state={cursorX:0}}render(){const{markLineColor:s="primary-btn"}=this.props,n=this.props,r=this.state;if(n.today===void 0||n.expiration===void 0||n.daysToExpiration===void 0||n.underlyingMark===void 0||n.domain===void 0||n.options===void 0||n.domain.to===Number.POSITIVE_INFINITY||!n.shouldDrawChart)return null;const o=this.getSettings(n),i=this.props.displaySymbol!==void 0?`${Ns(n.displaySymbol)} ${__("Risk Profile Detail")}`:__("Risk Profile Detail"),l=n.showFractionalPricing?Fs(n.underlyingMark,n.fractionalType,n.showDoubleTickForFractionalPricing):cu(n.underlyingMark,n.underlyingPriceTick??2),c=n.width-Ay<KR;return n.shouldDrawChart?a.jsxs(a.Fragment,{children:[a.jsx(G9e,{rootSymbol:n.rootSymbol,priceGainsExpiration:n.priceGainsExpiration,priceGainsToday:n.priceGainsToday,expirationLabel:n.expiration,todayLabel:n.today}),a.jsxs("div",{className:"gain-and-loss",tabIndex:0,"aria-label":i,role:"heading","aria-level":2,children:[a.jsxs(WBe,{isWrapped:c,children:[a.jsx(GBe,{isWrapped:c,chartWidth:n.width,children:a.jsx(h1,{utils:p1,locale:et.locale(),children:a.jsx(wN,{value:n.gainAndLossDateTime,anchorId:"risk-profile",label:"Risk Profile Date",ariaLabel:"Risk Profile Profit/Loss Date",iconFillColor:"icon.primary",disablePast:!1,showIncrementButtons:!0,colorVariant:"primary",onUpdate:this.onDatePickerUpdate,showDateFromProps:!0})})}),!fu()&&a.jsx(YBe,{isWrapped:c,children:n.ExpandIcon})]}),a.jsxs("div",{className:"chart-container",children:[a.jsx(wg,{hoveredChart:n.hoveredChart,themeColors:n.themeColors,markLineColor:n.markLineColor,width:n.width,height:n.height,hoveredPrice:n.hoveredPrice,priceGainsToday:n.priceGainsToday,priceGainsExpiration:n.priceGainsExpiration,underlyingMark:n.underlyingMark,options:n.options,domain:n.domain,settings:o,renderChart:CBe,renderDynamic:BBe,renderOnMove:this.renderOnMove,onMouseMove:this.onPointerMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:n.onMouseLeave,fractionalType:n.fractionalType,showFractionalPricing:n.showFractionalPricing,showDoubleTickForFractionalPricing:n.showDoubleTickForFractionalPricing}),a.jsx(VBe,{markLineColor:s,currentPrice:l,width:n.width,cursorX:r.cursorX,domain:n.domain,expirationLabel:n.expiration,todayLabel:n.today,priceGainsToday:n.priceGainsToday,priceGainsExpiration:n.priceGainsExpiration,isVisible:n.hoveredChart!==void 0,hasOptions:n.options.length>0,hoveredPrice:n.hoveredPrice})]})]})]}):null}}const KBe=_l(hn(qBe)),zBe=e=>{const t=mt(e),{showFractionalPricing:s,fractionalType:n}=pn(e,t!==null?t:"");return{today:oRe(e,zs),expiration:aRe(e),daysToExpiration:vg(e),underlyingMark:Ag(e),underlyingPriceTick:WOe(e),domain:Ig(e),options:EN(e),priceGainsToday:tRe(e,zs),priceGainsExpiration:sRe(e),shouldDrawChart:AN(e),markLineColor:nRe(e,zs),priceTick:rRe(e),gainAndLossDateTime:OC(e,zs),showFractionalPricing:s,fractionalType:n,showDoubleTickForFractionalPricing:Vs(vl(e),na(e))}},XBe=e=>({setGainAndLossDateTime:t=>{e(iue(zs,t))}}),QBe=se(zBe,XBe)(KBe),ZBe=100,JBe="alert",eFe=A.div`
  flex: 1;
  justify-content: center;
  display: flex;
  flex-direction: column;
  max-width: ${({width:e})=>`${e}px`};
  height: ${({height:e})=>`${e}px`};
  margin: 0 ${({theme:e})=>`${e.space.medium}`};
  ${({theme:e,addMarginTop:t})=>t&&`margin-top: ${e.space.medium}`};
  background-color: ${({theme:e})=>e.colors.boxShadow.secondary};

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    position: absolute;
    left: ${({theme:e})=>e.space.medium};
    margin: 0;
    z-index: 2; /* needs to be above 'Enter a symbol to view chart' on mobile */
  }
`,tFe=A.div`
  display: flex;
  align-items: flex-end;
  margin: 0 0 8px 6px;
`,sFe=A.label`
  position: relative;
  bottom: 3px;
`,nFe=A.input`
  border-radius: 5px;
  border: 1px solid ${({theme:e})=>e.colors.border.primary};
  margin-left: 10px;
  width: 30%;
  color: ${({theme:e})=>e.colors.text.primary};
  background-color: ${({theme:e})=>e.colors.background.secondary};
`,rFe=A.table`
  align-self: center;
  display: flex;
  flex-direction: column;
`,oFe=A.tr`
  padding-bottom: 10px;
  padding-top: 7px;
  display: flex;
  table-layout: fixed;
  margin-left: 5px;
  background-color: ${({theme:e})=>e.colors.background.secondary};
  font-weight: 500;
  width: ${({width:e})=>`${e-5}px`};
`,hf=A.th`
  display: table-cell;
  padding-left: 10px;
  text-align: left;
  flex: 1;
  width: ${({width:e})=>e};
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: ${({theme:e})=>e.fontSizes.small};
`,pf=A.td`
  display: flex;
  align-items: center;
  padding-left: 10px;
  color: ${({theme:e,trend:t})=>t===at.Positive?e.colors.buy.main:t===at.Negative?e.colors.sell.main:e.colors.text.primary};
`,aFe=A.span`
  text-align: center;
  margin: auto;
  display: flex;
  align-items: center;
  white-space: nowrap;
`,iFe="No Time and Sales Data",lFe=({selectedSymbol:e,requestTimeSales:t,timeSales:s,activePage:n,ExpandIcon:r,width:o,height:i,unsubscribeFromTimeSales:l,fractionalType:c,showFractionalPricing:d,showDoubleTickForFractionalPricing:u,minSize:h,chartId:p,numCharts:m,isMulticharts:g})=>{const[S,T]=B.useState(!1),[y,b]=B.useState(String(h)),[E,v]=B.useState(!1),D=B.useRef(null),w=window.innerWidth<=Es.MOBILE_LARGE,N=gb(w,p,m),L=iM(n,w,i),P=z=>{const re=z.target.value,ae=AC(re,y);b(ae),v(!0)},F=()=>{E&&(Number(y)||b(String(_p)),S&&l(p),H(),v(!1))},O=z=>{z.key===we.Enter&&(z.preventDefault(),F())},H=()=>{if(e!==null){const z=Math.abs(Number(y));Number.isNaN(z)||z===0?setTimeout(()=>{t(e,_p,p)},100):setTimeout(()=>{t(e,z,p)},100),T(!0)}};B.useEffect(()=>{H()},[t,e]),B.useEffect(()=>()=>{S&&l(p)},[l,S]),B.useEffect(()=>{D.current&&D.current.focus()},[]);const M=o/3,q=s.length!==0,W=a.jsxs(eFe,{width:o,height:L,addMarginTop:n!==ge.Charts&&window.innerWidth<=Es.TABLET_LARGE,"data-testid":`time-sales-${p}-${e}`,children:[a.jsxs(Be,{flexDirection:"row",minHeight:`${g?"45":N}px`,children:[a.jsxs(tFe,{children:[a.jsx(sFe,{"data-testid":`time-sales-min-size-label-${p}`,htmlFor:`time-sales-min-size-input-${p}`,children:__("Min Size")}),a.jsx(nFe,{id:`time-sales-min-size-input-${p}`,"data-testid":`time-sales-min-size-input-${p}`,"aria-label":"Time and sales minimum size input",value:y,onChange:P,onKeyDown:O,onBlur:F,ref:D})]}),r&&a.jsx(pb,{children:r})]}),a.jsx(rFe,{cellSpacing:0,children:a.jsx("thead",{children:a.jsxs(oFe,{width:o,children:[a.jsx(hf,{width:M,children:__("Time")}),a.jsxs(hf,{width:M,children:[" ",__("Price")]}),a.jsx(hf,{width:M,children:__("Size")})]})})}),q?a.jsx(sH,{height:i-(N-30),itemCount:s.length,itemSize:35,width:o,style:{display:"flex",alignSelf:"center"},outerElementType:"table",innerElementType:"tbody",itemData:s,children:cFe(c,d,u,M,p)}):a.jsx(aFe,{"data-testid":"no-data-message",children:__(iFe)})]});return a.jsxs(a.Fragment,{children:[a.jsx(jr,{children:W}),a.jsx(fr,{children:a.jsx(xc,{timeout:ZBe,classNames:JBe,children:W},"time-sales")})]})},cFe=(e,t,s,n,r)=>function(i){const{index:l,style:c,data:d}=i,{price:u,time:h,size:p,trend:m,sequence:g}=d[l];return a.jsxs("tr",{id:`${r}-${h.toLocaleTimeString()}-${g}`,style:{...c,width:"calc(100% - 5px)",marginLeft:5,display:"flex"},children:[a.jsx(pf,{width:n,trend:m,children:h.toLocaleTimeString()}),a.jsx(pf,{width:n,trend:m,children:Vn(t,u,e,s)}),a.jsx(pf,{width:n,trend:m,children:p})]})},dFe=_l(hn(lFe)),TM=e=>x(t=>t.timeSales.get(e),t=>t??Va()),uFe=e=>x(TM(e),t=>t.timeOrder===JD.desc?[...t.timeSales].reverse():t.timeSales),hFe=(e,{chartId:t})=>{const s=an(t),n=TM(t),r=uFe(t);return(o,{chartId:i})=>{const l=mt(o),{showFractionalPricing:c,fractionalType:d}=pn(o,l!==null?l:""),u=na(o);return{selectedSymbol:s(o),lowerStudies:ey(o,i),timeSales:r(o),activePage:ms(o),showFractionalPricing:c,fractionalType:d,showDoubleTickForFractionalPricing:Vs(vl(o),u),minSize:n(o).minSize,numCharts:hs(o).size}}},pFe=e=>({requestTimeSales:(t,s,n)=>{e(eme(t,s,n))},unsubscribeFromTimeSales:t=>{e(tme(t))}}),mFe=se(hFe,pFe)(dFe),gFe=e=>{const{isOpened:t,toggleChartSettingsMenu:s,toggleButtonRef:n,showExtendedHours:r,setShowExtendedHours:o,showAlerts:i,setShowAlerts:l,showOptionPositions:c,setShowOptionPositions:d,showWorkingOrders:u,setShowWorkingOrders:h,showTradePrice:p,setShowTradePrice:m,showChartHighLow:g,setShowChartHighLow:S,showEarningsIcon:T,setShowEarningsIcon:y,showEarningsPreview:b,setShowEarningsPreview:E,showDividendsIcon:v,setShowDividendsIcon:D,fitStudiesInYAxis:w,setFitStudiesInYAxis:N,chartId:L,chartsWrapperRef:P,marketToolButtonContentVisible:F,activePage:O,numCharts:H}=e,C=()=>{t&&s()},M=Bg(L);return a.jsxs(Ii,{isOpen:t,title:"Chart Settings",onClose:C,toggleButtonRef:n,chartsWrapperRef:P,isChartOverlay:!0,topOffset:M.topOffset,chartsHeight:M.chartsHeight,studiesHeight:M.studiesHeight,marketToolButtonContentVisible:F,activePage:O,numCharts:H,chartId:L,children:[a.jsx(Mn,{id:"extendedHours",label:"Show Extended Hours",isChecked:r,onChange:()=>o(L,!r)}),a.jsx(Mn,{id:"showAlerts",label:"Show Alerts",isChecked:i,onChange:()=>l(L,!i)}),a.jsx(Mn,{id:"showOptionPositions",label:"Show Option Positions",isChecked:c,onChange:()=>d(L,!c)}),a.jsx(Mn,{id:"showWorkingOrders",label:"Show Working Orders",isChecked:u,onChange:()=>h(L,!u)}),a.jsx(Mn,{id:"showTradePrice",label:"Show Trade Price",isChecked:p,onChange:()=>m(L,!p)}),a.jsx(Mn,{id:"showChartHighLow",label:"Chart High/Low",isChecked:g,onChange:()=>S(L,!g)}),a.jsx(Mn,{id:"showEarningsIcon",label:"Show Earnings Icon",isChecked:T,onChange:()=>y(L,!T)}),a.jsx(Mn,{id:"showEarningsPreview",label:"Show Earnings Preview",disabled:!T,isChecked:b,onChange:()=>E(L,!b)}),a.jsx(Mn,{id:"showDividendsIcon",label:"Show Dividends Icon",isChecked:v,onChange:()=>D(L,!v)}),a.jsx(Mn,{id:"fitStudiesInYAxis",label:"Fit Studies in Y-axis",isChecked:w,onChange:()=>N(L,!w)})]})},SFe=B.memo(gFe),fFe=(e,{chartId:t})=>{const s=x(wae(t),p=>p),n=x(vO(t),p=>p),r=x(bO(t),p=>p),o=x(EO(t),p=>p),i=x(AO(t),p=>p),l=x(IO(t),p=>p),c=x(wO(t),p=>p),d=x(xO(t),p=>p),u=x(OO(t),p=>p),h=x(RO(t),p=>p);return{showExtendedHours:s(e),showAlerts:n(e),showOptionPositions:r(e),showWorkingOrders:o(e),showTradePrice:i(e),showChartHighLow:l(e),showEarningsIcon:c(e),showEarningsPreview:d(e),showDividendsIcon:u(e),fitStudiesInYAxis:h(e),activePage:ms(e),numCharts:hs(e).size}},TFe={setShowExtendedHours:uue,setShowAlerts:hue,setShowOptionPositions:pue,setShowWorkingOrders:mue,setShowTradePrice:gue,setShowChartHighLow:Sue,setShowEarningsIcon:fue,setShowEarningsPreview:HR,setShowDividendsIcon:Tue,setFitStudiesInYAxis:yue},yFe=se(fFe,TFe)(SFe),yM=e=>e.settings,Tb=x(yM,NLe),CM=x(Tb,Rg),bM=x(Tb,Dg),EM=x(Tb,Lg),CFe=x(yM,$C),yb=e=>e.study,Cb=e=>e.width,bFe=e=>e.height,AM=e=>e.offsetX,EFe=e=>e.zoomLevel,Wc=x(Cb,EFe,(e,t)=>(e-pt.left-pt.right)*t),vM=x(yb,e=>{var t;return((t=e.plots[0])==null?void 0:t.values.length)??0}),bb=x(Wc,vM,(e,t)=>t===0?0:e/t),IM=x(AM,bb,(e,t)=>t===0?0:Math.floor(e/t)),xM=x(AM,Cb,vM,bb,(e,t,s,n)=>n===0?0:Math.min(s,Math.floor((e+t)/n)+1)),wM=x(yb,IM,xM,(e,t,s)=>({...e,plots:e.plots.map(n=>({...n,values:n.values.slice(t,s)}))})),AFe=x(Cb,e=>e-pt.left-pt.right),OM=e=>e.height-pt.top-pt.bottom,Tu=x(Wc,yb,bb,(e,t,s)=>No().domain([0,t.plots[0].values.length-1]).range([s/2,e-s/2])),vFe=x(Tu,Wc,(e,t)=>{const s=Math.floor(t/fe.xAxisTickWidth),n=Math.max(s,YR);return e.ticks(n)}),IFe=x(wM,e=>{const t=e.plots.map(s=>Math.max(...s.values.filter(n=>n.y!==null).map(n=>n.y)));return Math.max(...t)}),xFe=x(wM,e=>{const t=e.plots.map(s=>Math.min(...s.values.filter(n=>n.y!==null).map(n=>n.y)));return Math.min(...t)}),RM=x(bFe,IFe,xFe,(e,t,s)=>No().domain([s,t]).range([e-pt.bottom,10])),wFe=e=>e.hoveredDateIndex,OFe=e=>e.isHovering,RFe=80,DFe=(e,t,s,n,r,o)=>i=>{const l=bc().x((S,T)=>t(T)).defined(S=>S.y!==null).y(S=>S.y!==null&&!os(S.y)?s(S.y):Number.MAX_SAFE_INTEGER).curve(bu),c=e.plots.map(S=>{const T=n[S.name];return{...S,params:T}}),u=c.filter(S=>{var T;return((T=S.params)==null?void 0:T.plotType)===xe.line}).map(S=>S.params.colorOptions.type===Ae.SINGLE?hP(S.values,l,Vt(S.params.colorOptions.color)):()=>i),p=c.filter(S=>{var T;return((T=S.params)==null?void 0:T.plotType)===xe.histogram}).map(S=>iP(S.values,r,t,s,S.params,o)),g=c.filter(S=>{var T;return((T=S.params)==null?void 0:T.plotType)===xe.booleanPoints}).map(S=>P_e(S.values,r,t,s,S.params.colorOptions,o));return as([...p,...u,...g])(i)},LFe=(e,t)=>{const s=Math.floor((t-pt.bottom)/RFe);return e.ticks(s)},_Fe=e=>{const t=Math.max(...e),s=Math.min(...e);return Math.round(s+(t-s)/2)},NFe=(e,t)=>s=>{const n=LFe(t,e.height),r=AFe(e),o=e.studyInfo.name,i=CM(e),l=bM(e),c=EM(e);s.font=i,s.textAlign="right",s.textBaseline="bottom",s.fillStyle=c,s.strokeStyle=l,s.lineWidth=.5;const u=o===G.IMPLIED_VOLATILITY?gr:v1;if(n.forEach(h=>{const p=t(h);s.fillText(u(h),r,p)}),n.length===0){const h=_Fe(t.domain()),p=t(h);s.fillText(u(h),r,p)}return s},PFe=(e,t)=>s=>{var p;const n=vFe(e),r=e.height,o=Wc(e),i=CM(e),l=bM(e),c=EM(e),d=(p=e.study.plots[0])==null?void 0:p.values,u=CFe(e);s.font=i,s.fillStyle=c,s.strokeStyle=l;const h=Br.isSafari?r-pt.bottom+fe.drawLowerXAxisOffset+fe.pointer.labelYAreaSafariHeight:r-pt.bottom+fe.drawLowerXAxisOffset+fe.pointer.labelYAreaDefaultHeight;return d!==void 0&&mP(n??[],t,d,u,s,o,h),s},kFe=e=>t=>{const s=e.offsetX;return t.translate(-s,0),t.save(),t},MFe=()=>e=>(e.resetTransform(),e),$Fe=e=>t=>{const s=kFe(e),n=MFe(),r=as(t);return o=>{const i=s(o),l=r(i);return n(l)}},jFe=(e,t)=>{if(t===null)return;const s=kg(e.width,e.height,e.settings.chart.axisLabelTextColor),n=Tu(e),r=RM(e),o=e.studyInfo,i=Wc(e),l=IM(e),c=xM(e),d=pP(l,c),u=DFe(e.study,n,r,o==null?void 0:o.plotParameters,i,d),h=xi(e),p=PFe(e,n),m=NFe(e,r),g=qs(t);if(g){const S=h([g]),T=Xu(pt.left,pt.top)(S),y=s(T),b=$Fe(e)([p,u])(y),E=m(b);Sc(E)}},DM=e=>(t,s,n,r)=>{const o=Wc(t),i=t.height;if(t.isDragActive){s.clearRect(0,0,o,i);return}s.clearRect(0,0,o+fe.pointer.labelYAreaDefaultHeight,i),e&&(BFe(t,s,n),r!==void 0&&FFe(t,s,r,n))},BFe=(e,t,s)=>{var d;const n=e.settings.pointer.lineColor,r=Tu(e),o=(d=e.study.plots[0])==null?void 0:d.values,i=OM(e),l=e.width,c=i+pt.top;if(s<l&&s>0){const u={color:n,level:s,line:{from:pt.top,to:c},dash:[fe.dashSize,fe.dashSize]};Pg(t,u);const h=s-pt.left,p=Math.round(r.invert(h+e.offsetX)),m=p<0?0:p,g=(o==null?void 0:o[m])!==void 0?o[m].x:new Date;ZN(t,e.settings,g,c,s)}return t},FFe=(e,t,s,n)=>{const r=RM(e),o=OM(e),i=e.width,l=e.settings.pointer.lineColor,d=e.studyInfo.name===G.IMPLIED_VOLATILITY;if(s<o&&s>0){const u=r.invert(s-pt.top),h={color:l,level:s,line:{from:pt.left,to:i},dash:[fe.dashSize,fe.dashSize]};GC(t,h),VC(t,e.settings,e.priceTick,u,i,s,n,d,!0,e.fractionalType,e.showFractionalPricing,e.showDoubleTickForFractionalPricing)}},HFe=({plots:e,studyName:t,dateFormat:s})=>{const[n,r]=B.useState(!1),o=()=>{if(e.length===0)return null;const i=e[0].values.map(l=>et(l.x).format(s));return a.jsx(bP,{plots:e,rowTitles:i})};return a.jsxs("div",{tabIndex:0,onFocus:()=>{r(!0)},className:"off-screen","data-testid":"lower-study-table",children:[a.jsx("h3",{children:__(`${t} chart values table`)}),n&&o()]})},UFe=e=>t=>{const s=wFe(e),n=OFe(e);return s&&n!==void 0&&DM(!n)(e,t,s),t},VFe=(e,t)=>{const s=UFe(e),n=xi(e),r=qs(t);if(r){const o=n([r]);s(o)}},WFe=is(VFe),GFe=(e,t)=>({...e,...t}),YFe=e=>{const{width:t,height:s,settings:n,study:r,studyInfo:o,priceTick:i,hoveredDateIndex:l,zoomLevel:c,offsetX:d,isDragActive:u}=e,[h,p]=j.useState(!1),m=j.useRef(is(jFe)),g={index:0,studyValue:{studyId:r.id,studyName:o.name,plots:r.plots.map(b=>({...b,index:0}))}},[S,T]=j.useReducer(GFe,g);j.useEffect(()=>{let b;if(e.hoveredDateIndex){const E=Tu(e),v=Math.round(E.invert(e.hoveredDateIndex+e.offsetX)),D=Math.max(0,v);b={studyId:e.study.id,studyName:o.name,plots:e.study.plots.map(w=>({...w,index:D}))}}else b={studyId:e.study.id,studyName:o.name,plots:e.study.plots.map(E=>({...E,index:S.index}))};T({studyValue:b})},[e,o.name,S.index]);const y=j.useCallback((b,E,v)=>{const D=Tu(e),w=E-pt.left,N=Math.round(D.invert(w+e.offsetX)),L=Math.max(0,N),P={studyId:e.study.id,studyName:o.name,plots:e.study.plots.map(F=>({...F,index:L}))};T({index:L,studyValue:P}),e.onPointerMove(w)},[e,o.name]);return a.jsxs("div",{className:"lower-study-chart-container","data-testid":"lower-study-chart-container",children:[a.jsx(HFe,{plots:r.plots,studyName:o.name,dateFormat:n.xAxisLabelFormat}),a.jsx(wg,{studyInfo:o,width:t,settings:n,study:r,height:s,renderChart:m.current,renderDynamic:WFe,renderOnMove:DM(h),onMouseMove:y,onMouseEnter:()=>{p(!0),e.onPointerEnter()},onMouseLeave:()=>{p(!1),e.onPointerLeave()},priceTick:i,hoveredDateIndex:l,isHovering:h,zoomLevel:c,offsetX:d,isDragActive:u,showDoubleTickForFractionalPricing:e.showDoubleTickForFractionalPricing}),a.jsx(FN,{chartId:e.chartId,studyValues:[S.studyValue],priceTick:i,fractionalType:e.fractionalType,showFractionalPricing:e.showFractionalPricing,showDoubleTickForFractionalPricing:e.showDoubleTickForFractionalPricing})]})},qFe=j.memo(YFe),KFe=e=>{const{chartId:t,lowerStudyHeight:s,width:n,lowerStudies:r,studiesParams:o,priceTick:i,hoveredDateIndex:l,zoomLevel:c,offsetX:d,isDragActive:u,onPointerMove:h,onPointerEnter:p,onPointerLeave:m,fractionalType:g,showFractionalPricing:S,showDoubleTickForFractionalPricing:T,activePage:y,marketToolButtonContentVisible:b,aggregation:E,range:v,themeColors:D}=e,w=ma(D,v,E),L=is((P,F,O,H,C)=>r.map(M=>{const q=o.get(M.id);return q===void 0?null:a.jsx(vt,{children:a.jsx(qFe,{chartId:t,width:n,height:s,settings:H,study:M,studyInfo:q,priceTick:i,onPointerMove:h,onPointerEnter:p,onPointerLeave:m,hoveredDateIndex:C,zoomLevel:P,offsetX:F,activePage:y,marketToolButtonContentVisible:b,isDragActive:O,fractionalType:g,showFractionalPricing:S,showDoubleTickForFractionalPricing:T},M.id)},`error-boundary-${M.id}`)}));return a.jsx("div",{children:L(c,d,u,w,l)})},zFe=_l(hn(KFe)),XFe=A(_n)`
  height: 25px;
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-right: 10px;
  ${$u} {
    max-height: 130px;
  }
  ${Xa} {
    padding-top: ${({theme:e})=>e.space.none};
    padding-bottom: ${({theme:e})=>e.space.none};
    font-weight: normal;
    padding-left: ${({theme:e})=>e.space.xSmall};
    background-color: ${({theme:e})=>e.colors.background.secondary};
  }
`,QFe=A.input`
  border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.border.primary}`};
  border-radius: 3px;
  color: ${({theme:e})=>e.colors.text.disabled};
  font-size: ${({theme:e})=>e.fontSizes.medium};
  line-height: 22px;
  height: 100%;
  padding-left: 10px;
  padding-right: 10px;
  background: none;
  width: 100%;

  :focus {
    border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.action.focus}`};
  }
`,ZFe=A.form`
  height: 25px;
  background-color: ${({theme:e})=>e.colors.background.primary};
  display: flex;
  flex-direction: row;
  align-items: center;
  position: relative;
  width: 160px;
`,JFe=A.div`
  border: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.border.primary}`};
  color: ${({theme:e})=>e.colors.text.active};
  border-radius: 0 0 ${({theme:e})=>e.shape.borderRadius.secondary}
    ${({theme:e})=>e.shape.borderRadius.secondary};
  overflow: hidden;
  background: ${({theme:{colors:e}})=>e.background.secondary};
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.5), 0 0 8px 0 rgba(0, 0, 0, 0.25);
`,eHe=A.div`
  display: flex;
  flex-direction: column;
  padding-top: ${({theme:e})=>e.space.xxSmall};
  padding-bottom: ${({theme:e})=>e.space.xxSmall};
  overflow: hidden;
  color: ${({theme:e})=>e.colors.text.active};
  min-height: 42px;
`,tHe=A.div`
  font-size: ${({theme:e})=>e.fontSizes.medium};
`,sHe=A.div`
  font-size: ${({theme:e})=>e.fontSizes.small};
  white-space: nowrap;
`,nHe=A.div`
  font-size: ${({theme:e})=>e.fontSizes.medium};
  padding: ${({theme:e})=>e.space.xxSmall};
  padding-bottom: ${({theme:e})=>e.space.small};
`,rHe=({chartId:e,changeChartSymbol:t,isConnected:s,chartSymbolsLoading:n,chartSearchSymbols:r,searchForChartSymbol:o,inputId:i,chartSymbol:l})=>{const[c,d]=B.useState(l),[u,h]=B.useState(!1),[p,m]=B.useState(!1),[g,S]=B.useState(c),T=Uu();B.useEffect(()=>{T&&c!==""&&o(c,e)},[c]),B.useEffect(()=>{T&&(m(!1),d(l),S(l))},[l]);const y=({displaySymbol:W,description:z})=>a.jsxs(eHe,{children:[a.jsx(tHe,{children:a.jsx(mi,{"data-testid":"highlight",pattern:c,children:W})}),a.jsx(sHe,{children:a.jsx(mi,{"data-testid":"highlight-description",pattern:c,children:z})})]}),b=W=>{const z=W.target.value.toUpperCase();z!==" "&&d(z),p||m(!0),u&&h(!1)},E=W=>{switch(W.key){case we.ArrowRight:case we.ArrowLeft:case we.Enter:{W.stopPropagation();break}case we.ArrowDown:{W.stopPropagation(),h(!0);break}case we.Tab:{if(c==="")break;t(e,c,g),m(!1),S(c);break}}},v=()=>{N.length&&m(!0),h(!1)},D=W=>{W.preventDefault(),c!==""&&(t(e,c,g),m(!1),S(c))},w=()=>{c===""&&d(g)},N=r,L=()=>a.jsxs(ZFe,{id:`chart-symbol-search-form-${e}`,"data-testid":`chart-symbol-search-form-${e}`,role:"search",autoComplete:"off",onSubmit:D,children:[a.jsx(QFe,{"aria-labelledby":`chart-symbol-search-form-${e}`,"aria-label":__("Find a chart symbol"),id:i,"data-testid":i,onKeyDown:E,onChange:b,onFocus:v,onBlur:w,value:c,placeholder:__("Symbol")}),n&&s&&a.jsx(cg,{})]}),P="No results for ${searchValue}",F=__(P),O=()=>c!==""&&!n&&N.length<=0?a.jsx(JFe,{role:"alert","aria-live":"polite",children:a.jsx(nHe,{"aria-label":gi(P,c),children:gi(F,c)})}):null,H={popperOptions:{modifiers:[{name:"sameWidth",enabled:!0,fn:({state:W})=>{W.styles.popper.width=`${W.rects.reference.width}px`},phase:"beforeWrite",requires:["computeStyles"],effect:({state:W})=>{W.elements.popper.style.width=`${W.elements.reference.clientWidth}px`}}]}},C=W=>{var z;(z=document.getElementById(i))==null||z.focus(),d(W.symbol),m(!1),S(W.symbol),t(e,W.symbol,g)},M=j.useRef(null);$a(M,()=>{m(!1),d(c),c!==""&&c!==g&&(t(e,c,g),S(c))});const q=W=>{(W.key===we.Esc||W.key===we.Tab)&&(W.stopPropagation(),m(!1))};return a.jsx("div",{ref:M,onKeyDown:q,children:a.jsx(XFe,{"data-testid":"chart-symbol-search-dropdown",variant:Pe.secondary,renderHeader:O,renderAnchorButtonContent:L,values:c!==""?N:[],selectedItemIndex:-1,width:0,getListItemKey:W=>W.symbol,onListItemClick:C,renderListItemContent:y,anchorAriaLabel:"Chart Search Symbol",symbolSearchId:i,isForceOpened:p,isFocusOnList:u,...H})})},oHe=e=>e.symbolSearch,aHe=e=>x(oHe,t=>t.charts.get(e)),iHe=(e,{chartId:t})=>{const s=an(t),n=aHe(t),r=is(o=>(o==null?void 0:o.searchSymbols)??[]);return o=>{const i=n(o);let l=s(o);return l=l!==null?l.split(":")[0]:"",{chartSearchSymbols:r(i),chartSymbolsLoading:(i==null?void 0:i.symbolsLoading)??!1,isConnected:Ol(o),chartSymbol:l}}},lHe=e=>({searchForChartSymbol(t,s){e(kfe(t,s))},changeChartSymbol(t,s,n){s!==n&&e(XD(t,s))}}),cHe=se(iHe,lHe)(rHe),dHe=x(ry,Wm),uHe=(e,{symbol:t})=>{const{trendingMark:s,markChange:n,markPercentChange:r}=xg(e,t)??{},{showFractionalPricing:o,fractionalType:i}=dHe(e,t),l=hie(e,t),c=`${__("Mark Change")} ${n!==void 0?xr(n):""} (${r!==void 0?gr(r):""})`;return{value:s==null?void 0:s.value,trend:s==null?void 0:s.trend,change:n,ariaLabel:c,percentChange:r,showFractionalPricing:o,fractionalType:i,markPercentChange:r,showDoubleTickForFractionalPricing:Vs(cie(e,t),l)}},hHe=se(uHe)(Vk),Eb=(e,t)=>{const s=j.useRef(void 0),n=j.useRef(e);return j.useEffect(()=>{n.current=e},[e]),j.useEffect(()=>{const r=()=>n.current();if(typeof t=="number")return s.current=window.setTimeout(r,t),()=>window.clearTimeout(s.current)},[t]),s},pHe=e=>{const{isOpen:t,chartId:s,studyId:n,study:r,dynamicStudy:o,toggleButtonRef:i,deleteStudy:l,setStudyParameters:c,onBackToStudiesMenu:d,onClose:u,chartsWrapperRef:h,isChartOverlay:p,topOffset:m,studiesHeight:g,chartsHeight:S,marketToolButtonContentVisible:T,listsAreStacked:y,activePage:b,numCharts:E}=e,[v,D]=j.useState(r.parameters),[w,N]=j.useState(r.plotParameters),L=j.useCallback(()=>{l(s,n),d()},[l,s,n,d]),P=j.useCallback(()=>{c(s,n,v,w),d()},[c,s,n,v,w,d]),F=j.useCallback(()=>{c(s,n,v,w),u()},[c,s,n,v,w,u]);return a.jsx("div",{className:"edit-study-menu",children:a.jsx(Ii,{isOpen:t,title:"Edit Study",onClose:F,toggleButtonRef:i,chartsWrapperRef:h,isChartOverlay:p,topOffset:m,studiesHeight:g,chartsHeight:S,marketToolButtonContentVisible:T,listsAreStacked:y,chartId:s,activePage:b,numCharts:E,children:a.jsxs(ds,{maxWidth:"300px",children:[a.jsx(tt,{mb:it.space.small,variant:"link",onClick:P,children:a.jsx(ot,{fontWeight:"normal",children:"Back to Studies"})}),a.jsx(dO,{study:r,dynamicStudy:o,deleteStudy:L,studyId:n,plotParameters:w,updateNumericParameters:Jw(D),updatePlotParameters:eO(N,r.name),updateChartPriceType:tO(D),updateAverageType:sO(D),updateTrueRangeAverageType:nO(D),updateStudiesTimeFrame:rO(D),updateStudiesFullRange:oO(D),updateStudiesShowOnlyToday:aO(D),updateDynamicParam:iO(D)})]})})})},mHe=j.memo(pHe),gHe={name:me.SIMPLE_MOVING_AVG,id:"",parameters:Wi,plotParameters:{}},SHe=(e,t)=>{var s,n,r;return{study:((s=bl(e,t.chartId))==null?void 0:s.studiesParams.get(t.studyId))??gHe,dynamicStudy:(r=(n=e.studyParametersAndPlotSettings.activeStudies)==null?void 0:n.get(t.chartId))==null?void 0:r.get(t.studyId),activePage:ms(e),numCharts:hs(e).size}},fHe={setStudyParameters:FR},THe=se(SHe,fHe)(mHe),yHe=A.div`
  display: flex;
  align-items: center;
  margin: 0 ${({theme:e})=>e.space.xSmall};
`,qT=({ariaLabel:e,onClick:t})=>{const s=n=>{(n.key===we.Enter||n.key===we.Space)&&(n.preventDefault(),t(n))};return a.jsx(yHe,{"data-testid":"input-settings-button","aria-label":e,role:"button",tabIndex:0,onClick:t,onKeyDown:s,children:a.jsx(X,{type:Y.Settings,width:14,height:14,viewBox:"2 2 21 21",dataTestId:"settings-icon"})})},CHe=e=>{const t=e-ql-2*KAe-2*YAe-qAe,s=t*GAe,n=t-s-u_;return{overlayContentMaxWidth:t,visibleStudiesMaxWidth:s,availableStudiesMaxWidth:n}},bHe=(e,t,s)=>e+t+u_>s||e<VAe||t<WAe,EHe=(e,t,s,n,r)=>{let o=0;return e?o=t:o=n,o},AHe=(e,t,s)=>{const n=Math.floor(e/(ta+mg));let r=s;return(n===0&&t===p_||s)&&(r=!0),{updatedListsAreStacked:r}},vHe=(e,t,s,n)=>{const{overlayContentMaxWidth:r,visibleStudiesMaxWidth:o,availableStudiesMaxWidth:i}=CHe(n),l=bHe(o,i,r),c=EHe(l,r,e,i),{updatedListsAreStacked:d}=AHe(c,e,l);return d},IHe=e=>{const{isOpened:t,toggleAddStudyMenu:s,addStudy:n,addDynamicStudy:r,deleteStudy:o,getStudyParametersAndPlotSettings:i,studiesArray:l,toggleButtonRef:c,chartsWrapperRef:d,chartId:u,marketToolButtonContentVisible:h,activePage:p,numCharts:m}=e,g=3e3,[S,T]=j.useState(!1),[y,b]=j.useState(!1),[E,v]=j.useState(""),[D,w]=j.useState(void 0),N=l.filter(re=>!re.parameters.isLowerChart),L=l.filter(re=>re.parameters.isLowerChart),P=l.map(re=>re.name),F=()=>{b(!1),T(!0)};B.useEffect(()=>{!y&&S&&t&&(T(!1),s())},[y,t,S]),Eb(()=>{w(void 0)},D!==void 0?g:void 0);const O=re=>{const ae=re[re.length-1];xp(ae)?(n(u,ae),w(ae)):Yo(ae)&&(r(u,ae),w(ae))},H=(re,ae,Me)=>{const he=Me?L[ae]:N[ae];he&&he.name!==me.PRICE&&he.name!==me.VOLUME&&o(u,he.id)},C=(re,ae,Me)=>{const he=Me?L[ae]:N[ae];he&&Yo(he.name)&&i(u,he.id,he.name),b(!0),v(he==null?void 0:he.id)},M=(re,ae,Me,he)=>{const U=Zb(re,l,!0),Se=Zb(re,l);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"visible-study-container-column",children:[a.jsx(ot,{id:`${ae}-upper`,ml:it.space.small,mb:it.space.small,display:"block","data-testid":"main-visible-items-heading",children:__("Upper Studies",{namespace:"AddStudyMenu"})}),a.jsx(fT,{children:a.jsx(aa,{id:"visibleUpperStudies","data-testid":"visible-upper-studies","aria-labelledby":`${ae}-upper`,children:a.jsx(Qd,{items:U,strategy:Zd,children:U.map((be,le)=>a.jsx(Su,{id:be,item:be,isStudyItem:!0,onClick:We=>Me(We,le),isDraggable:!1,actionButton:be===me.PRICE||be===me.VOLUME?null:a.jsx(Kn,{as:"div",variant:cn.remove}),settingsButton:a.jsx(qT,{"data-testid":"open-edit-study-menu",ariaLabel:"Open edit study menu",onClick:We=>{he&&he(be,le),We.stopPropagation()}})},`${be}-${le}`))})})})]}),Se.length?a.jsxs("div",{className:"visible-study-container-column",children:[a.jsx(ot,{id:`${ae}-lower`,ml:it.space.small,mb:it.space.small,display:"block","data-testid":"main-visible-items-heading",children:__("Lower Studies",{namespace:"AddStudyMenu"})}),a.jsx(fT,{children:a.jsx(aa,{id:"visibleLowerStudies","data-testid":"visible-lower-studies","aria-labelledby":`${ae}-lower`,children:a.jsx(Qd,{items:Se,strategy:Zd,children:Se.map((be,le)=>a.jsx(Su,{id:be,item:be,isStudyItem:!0,onClick:We=>Me(We,le,!0),isDraggable:!1,actionButton:a.jsx(Kn,{as:"div",variant:cn.remove}),settingsButton:a.jsx(qT,{ariaLabel:"Open edit study menu",onClick:We=>{he&&he(be,le,!0),We.stopPropagation()}})},`${be}-${le}`))})})})]}):null]})},q=j.useMemo(()=>zc==null?void 0:zc.map(re=>re.items).flat(1),[zc]),W=Bg(u),z=vHe(p_,Wb.length-q.length,W.studiesHeight??0,W.chartsWidth??0);return y?a.jsx(THe,{isOpen:t,chartId:u,studyId:E,toggleButtonRef:c,onBackToStudiesMenu:()=>b(!1),onClose:F,deleteStudy:o,chartsWrapperRef:d,isChartOverlay:!0,topOffset:W.topOffset,studiesHeight:W.studiesHeight,chartsHeight:W.chartsHeight,marketToolButtonContentVisible:h,listsAreStacked:z}):a.jsx(gg,{searchBarOptions:{placeHolder:__(mA),areaLabel:__(mA)},customizableListName:h_,heading:__("Studies",{namespace:"AddStudyMenu"}),mainItemsHeading:__("Popular Studies",{namespace:"AddStudyMenu"}),isChartOverlay:!0,topOffset:W.topOffset,studiesHeight:W.studiesHeight,chartsHeight:W.chartsHeight,isListStacked:z,marketToolButtonContentVisible:h,isOpen:t,onClose:F,isTradePageOpen:!1,visibleItems:P,availableItems:Wb,collapsibleCategories:zc,collapsibleCategoryItems:q,renderItems:M,resetItems:()=>!1,setItems:O,removeItem:H,editItem:C,addedItem:D,addedItemTitle:__("Study Added"),closeAddedItemMsg:()=>w(void 0),hideResetButton:!0,hideVisibleItemsHeading:!0,toggleButtonRef:c,chartsWrapperRef:d,chartId:u,activePage:p,numCharts:m})},xHe=B.memo(IHe),wHe=(e,{chartId:t})=>{const s=is(n=>n,fs);return n=>({studiesArray:s(Pae(n,t)),isPortfolioOpened:$m(n),isSidebarOpened:K1(n),activePage:ms(n),numCharts:hs(n).size})},OHe=e=>({addStudy:(t,s)=>{Ye({category:Ve.ChartStudies,action:Le.AddStudy,label:s}),e(sue(t,s))},addDynamicStudy:(t,s)=>{Ye({category:Ve.ChartStudies,action:Le.AddStudy,label:s}),e(nue(t,s))},deleteStudy:(t,s)=>e(UR(t,s)),getStudyParametersAndPlotSettings:(t,s,n)=>e(Ry(t,s,n))}),RHe=se(wHe,OHe)(xHe),DHe=A("h4")`
  font-weight: 500;
`,LHe=A.span`
  margin-left: ${({theme:e})=>e.space.small};
  font-weight: 500;
  font-size: ${({theme:e})=>e.fontSizes.small};
  ${({theme:e})=>e.mixins.ellipsis}
`,_He=e=>{const t={width:16,height:16,dataTestId:`${e}-icon`,viewBox:"2 0 21 21"};switch(e){case J.Trendline:return a.jsx(X,{...t,type:Y.TrendLine,viewBox:"2 2 18 18"});case J.TimeLevel:return a.jsx(X,{...t,type:Y.TimeLevel,viewBox:"2 2 19 19"});case J.PriceLevel:return a.jsx(X,{...t,type:Y.PriceLevel,viewBox:"2 3 19 19"});case J.FibonacciRetracements:return a.jsx(X,{...t,type:Y.FibonacciRetracement});case J.FibonacciExtensions:return a.jsx(X,{...t,type:Y.FibonacciExtensions});case J.Rectangle:return a.jsx(X,{...t,type:Y.Rectangle});case J.TextNote:return a.jsx(X,{...t,type:Y.TextNote});case J.Channel:return a.jsx(X,{...t,type:Y.Channel,viewBox:"2 2 21 21"});default:return null}},NHe=({drawingType:e,onClick:t})=>{const s=_He(e);if(e===J.Unsupported)return null;const n=__(Cce(e),{namespace:"Drawings"});return a.jsx(Hu,{maxWidth:190,onClick:()=>{t(e)},"data-testid":"icon-button",children:a.jsxs(Be,{alignItems:"center",children:[s,a.jsx(LHe,{title:n,children:n})]})})},PHe=[J.Trendline,J.PriceLevel,J.TimeLevel,J.FibonacciRetracements,J.FibonacciExtensions,J.Rectangle,J.TextNote,J.Channel],kHe=e=>{const t=s=>{e.drawingToolClicked(s,e.chartId),e.onSelect()};return a.jsxs(a.Fragment,{children:[a.jsx(DHe,{"data-testid":"drawing-tools-heading",children:__("Drawing Tools",{namespace:"Drawings"})}),a.jsx(d_,{children:PHe.map(s=>a.jsx(NHe,{"data-testid":"drawing-item",drawingType:s,onClick:t},s))})]})},MHe=e=>({drawingToolClicked:(t,s)=>{e(Gpe(t,s)),Ye({category:Ve.ChartDrawings,action:Le.DrawingsSelected,label:t})}}),$He=se(null,MHe)(kHe),jHe=A("span")`
  margin: ${({theme:{space:e}})=>`0 ${e.xSmall}`};
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  font-size: ${({theme:e})=>e.fontSizes.small};
  color: ${({theme:e})=>e.colors.text.primary};
`,LM=A("span")`
  ${({theme:e,isCrossedOut:t})=>t&&`color: ${e.colors.text.disabled}`};
  text-decoration: ${({isCrossedOut:e})=>e?"line-through":"none"};
  ${({theme:e})=>e.mixins.ellipsis}
  flex-grow: 1;
  text-align: left;
`,BHe=A(_n)`
  max-width: 100%;
  margin-bottom: ${({theme:e})=>e.space.small};

  ${Wn} {
    display: flex;
    align-items: center;
    font-size: ${({theme:e})=>e.fontSizes.small};
    padding: 0;
    max-width: 100%;

    & svg {
      pointer-events: none;
      flex-shrink: 0;
    }
  }

  ${Uy} {
    width: auto;
  }
  ${$u} {
    width: max-content;
    min-width: 198px;
  }

  ${Xa} {
    padding: ${({theme:{space:e}})=>e.xSmall};
    max-width: 248px;

    & svg {
      pointer-events: none;
    }

    &.selected-selector-dropdown-listbox-item {
      ${LM}:focus {
        outline-color: ${({theme:e})=>`${e.colors.border.secondary} !important`};
      }

      button.delete-drawing-set-btn:focus {
        outline-color: ${({theme:e})=>`${e.colors.border.secondary} !important`};
      }
    }
  }
`,FHe=A("span")`
  font-size: ${({theme:e})=>e.fontSizes.small};
  color: ${({theme:e})=>e.colors.text.disabled};
  flex-shrink: 0;
`,HHe=A("span")`
  color: ${({theme:e})=>e.colors.action.focus};
  font-size: ${({theme:e})=>e.fontSizes.small};
`,UHe=({option:e,toggleRemove:t,isRemoved:s,hideDrawingSetDropdown:n})=>{const r=l=>{l.preventDefault(),l.stopPropagation(),t(e.guid)},o=l=>{l.key===we.Enter?(l.preventDefault(),l.stopPropagation(),t(e.guid)):l.key===we.Tab&&n&&n()},i=(s?"Undo delete":"Delete")+` ${e.name} drawing set`;return a.jsxs(Be,{"aria-label":e.name,justifyContent:"space-between",alignItems:"center",width:"100%",children:[a.jsx(LM,{"data-testid":"drawing-set-name",isCrossedOut:s,children:__(e.name,{namespace:"Drawings"})}),!e.isDefault&&a.jsx(tt,{tabIndex:0,className:"delete-drawing-set-btn","aria-label":i,title:i,onClick:r,onKeyDown:o,"data-testid":`delete-drawing-set-${e.guid}`,children:s?a.jsx(HHe,{children:__("Undo",{namespace:"Drawings"})}):a.jsx(X,{type:Y.Remove,viewBox:"5 3 14 18",dataTestId:"remove-icon",width:14,height:18})})]})},VHe=e=>{const[t,s]=j.useState({}),[n,r]=B.useState(!1),o=e.drawingSets.findIndex(S=>S.guid===e.selectedSetId),i=e.drawingSets[o];if(i===void 0)return null;const l=()=>a.jsxs(Be,{alignItems:"center",children:[a.jsx(FHe,{children:__("Drawing Set",{namespace:"Drawings"})}),a.jsx(jHe,{children:__(i.name,{namespace:"Drawings"})}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon"})]}),c=S=>{e.isConnected&&e.selectedSymbol&&(e.selectDrawingSet(e.chartId,S.guid,e.selectedSymbol),e.onSetSelect&&e.onSetSelect())},d=S=>{if(t[S]=!t[S],s({...t}),e.selectedSetId===S&&e.isConnected){const T=e.drawingSets.find(y=>y.isDefault);T&&e.selectedSymbol&&e.selectDrawingSet(e.chartId,T.guid,e.selectedSymbol)}},u=()=>{Object.keys(t).forEach(S=>{t[S]&&e.selectedSymbol!==null&&e.removeDrawingSet(S,e.selectedSymbol)}),s({})},h=S=>{var T,y;if(S.key===we.Tab&&S.target===document.activeElement){const b=(y=(T=S.currentTarget)==null?void 0:T.getElementsByClassName("delete-drawing-set-btn"))==null?void 0:y[0];(!b||b&&S.shiftKey)&&p()}else if(S.key!==we.Tab&&S.currentTarget!==document.activeElement){const b=S.currentTarget;b&&b.getAttribute("role")==="option"&&b instanceof HTMLElement&&b.focus()}},p=()=>{r(!0),setTimeout(()=>{r(!1)},50)},m=S=>a.jsx(UHe,{isRemoved:!!t[S.guid],toggleRemove:d,option:S,hideDrawingSetDropdown:p}),g=Object.keys(t).filter(S=>t[S]);return a.jsx(BHe,{"data-testid":"drawing-sets-dropdown",placement:"bottom-start",values:e.drawingSets,onListItemClick:c,getListItemKey:S=>S.guid,anchorAriaLabel:"Select Drawing Set",renderListItemContent:m,renderAnchorButtonContent:l,selectedItemIndex:o,onClose:u,nonSelectableItemsIds:g,handleListItemKeyDown:h,avoidDropdownCloseOnTab:!0,preventDefaultOnKeyDown:!1,isForceClosed:n})},WHe=(e,{chartId:t})=>{const s=an(t),n=vP(t);return r=>{const o=s(r);return{drawingSets:ZNe(r,o),selectedSetId:n(r),isConnected:_L(r),selectedSymbol:o}}},GHe={selectDrawingSet:cD,removeDrawingSet:Bpe},YHe=se(WHe,GHe)(VHe),qHe=50,KHe=A(tt)`
  align-items: center;
  font-size: ${({theme:e})=>e.fontSizes.small};
  padding: 0px;
  margin-bottom: ${({theme:e})=>e.space.medium};

  & svg {
    fill: ${({theme:e})=>e.colors.icon.primary};
    margin-right: 6px;
  }
`,zHe=A.input`
  padding: ${({theme:e})=>e.space.xSmall};
  background: ${({theme:e})=>e.colors.background.secondary};
  border: 1px solid ${({theme:e})=>e.colors.border.primary};
  box-sizing: border-box;
  box-shadow: 0px 4px 4px ${({theme:e})=>e.colors.overlay.background};
  border-radius: ${({theme:e})=>e.shape.borderRadius.secondary}px;
  height: 30px;
  width: 100%;
  position: relative;
  color: ${({theme:e})=>e.colors.text.primary};
  padding-right: ${qHe}px;
  border-color: ${({createDrawingSetError:e,theme:{colors:t}})=>e?t.error.primary:t.border.primary};

  :focus {
    border-color: ${({createDrawingSetError:e,theme:{colors:t}})=>e!==""?t.error.primary:t.action.focus};
  }
`,XHe=A.div`
  display: inline-flex;
  position: relative;
  width: 100%;
  max-width: 250px;
  align-items: center;
`,QHe=e=>{const{isOpened:t,toggleButtonRef:s,chartId:n,chartsWrapperRef:r,toggleDrawingsMenu:o,createDrawingSet:i,areSetsLoading:l,createDrawingSetError:c,clearError:d,marketToolButtonContentVisible:u,activePage:h,numCharts:p}=e,[m,g]=j.useState(!1),[S,T]=j.useState(""),y=j.useRef(null),b=()=>t&&o(),E=w=>w.trim()!=="",v=w=>{w.preventDefault(),E(S)&&i(n,S)};j.useEffect(()=>{m&&y.current&&y.current.focus()},[m]),j.useEffect(()=>{t&&(g(!1),T(""))},[t]),j.useEffect(()=>{l&&m&&g(!1)},[l,m]);const D=Bg(n);return a.jsx(Ii,{isOpen:t,title:"Drawings",i18nOptions:{namespace:"Drawings"},onClose:b,toggleButtonRef:s,chartsWrapperRef:r,isChartOverlay:!0,topOffset:D.topOffset,studiesHeight:D.studiesHeight,chartsHeight:D.chartsHeight,marketToolButtonContentVisible:u,chartId:n,activePage:h,numCharts:p,children:m?a.jsxs(a.Fragment,{children:[a.jsx(ds,{as:"form",mt:it.space.large,onSubmit:v,children:a.jsxs(XHe,{children:[a.jsx(zHe,{"data-testid":"drawing-set-name-input",createDrawingSetError:c,ref:y,placeholder:__("Drawing Set Name"),maxLength:50,value:S,onChange:w=>{c!==""&&d(n),T(w.target.value)}}),E(S)&&a.jsx(tt,{position:"absolute",right:0,mr:3,variant:"link",onClick:()=>{i(n,S)},"data-testid":"drawing-set-save-button","aria-label":`Save drawing set name as ${S}`,type:"submit",children:__("Save")})]})}),c!==""&&a.jsx(vi,{warnings:[c]}),a.jsx(ds,{mt:36,position:"absolute",children:a.jsx(tt,{"data-testid":"drawing-set-back-btn",variant:"link",onClick:()=>g(!1),children:a.jsx(ot,{fontWeight:"normal",children:"Back to Tool Selection"})})})]}):a.jsxs(Be,{flexDirection:"column",mt:-2,children:[a.jsxs(Be,{justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",children:[a.jsx(YHe,{chartId:n,onSetSelect:b}),a.jsxs(KHe,{onClick:()=>{g(!m),T(""),c!==""&&d(n)},"data-testid":"new-drawing-set-button",children:[a.jsx(X,{type:Y.Add,width:16,height:16,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",fill:"icon.primary"}),a.jsx(ot,{children:"New Drawing Set"})]})]}),a.jsx($He,{onSelect:b,chartId:n})]})})},ZHe=B.memo(QHe),JHe=(e,{chartId:t})=>({areSetsLoading:ePe(e,t),createDrawingSetError:tPe(e,t),activePage:ms(e),numCharts:hs(e).size}),eUe=e=>({createDrawingSet:(t,s)=>{e(Fpe(t,s))},clearError:t=>{e(Hpe(t))}}),tUe=se(JHe,eUe)(ZHe),sUe=({daysToExpiration:e})=>a.jsxs("div",{className:"row-summary hidden",children:[a.jsxs("div",{className:"row-summary-cell",children:[a.jsx("div",{className:"header",children:__("Probability of Profit")}),a.jsx("div",{className:"value",children:"not yet implemented"})]}),a.jsxs("div",{className:"row-summary-cell",children:[a.jsx("div",{className:"header",children:__("Max Gain")}),a.jsx("div",{className:"value",children:"not yet implemented"})]}),a.jsxs("div",{className:"row-summary-cell",children:[a.jsx("div",{className:"header",children:__("Max Loss")}),a.jsx("div",{className:"value",children:"not yet implemented"})]}),a.jsxs("div",{className:"row-summary-cell",children:[a.jsx("div",{className:"header",children:__("Days to Expiration")}),a.jsxs("div",{className:"value",children:[e," ",__("day(s)")]})]})]}),nUe=e=>({daysToExpiration:vg(e)}),rUe=se(nUe)(sUe),oUe=A.div`
  display: grid;
  grid-template-columns: calc(100% - ${nm}px) ${nm}px;
  background-color: ${({theme:e})=>e.colors.background.primary};
  ${({chartId:e,theme:t})=>e===zs&&`border-radius: ${t.shape.borderRadius.primary}px`};
`,aUe=A.div`
  padding: 0;
  margin-top: ${({activePage:e,numCharts:t,markHeight:s})=>e===ge.Charts&&t>1?`${gu+oC+rl+s}px`:e===ge.Charts?`${rl}px`:`${rl+gu}px`};
  display: flex;
  flex-direction: column;
  z-index: 10;
`,iUe=()=>{if(__("__locale")!=="__locale")return`transform: rotate(-180deg);
    border-radius: 0px 5px 5px 0px;
    `},mf=A(tt)`
  width: 22px;
  ${({numCharts:e})=>e&&e>2?"height: 60px;":"height: 91px;"};
  padding: 0;
  border-radius: 5px 0 0 5px;
  background-color: ${({theme:e})=>e.colors.background.secondary};
  margin-bottom: 5px;
  justify-content: center;

  ${iUe}
`,gf=A.span`
  font-size: 12px;
  transform: rotate(-180deg);
  writing-mode: vertical-lr;
  color: ${({theme:e,selected:t})=>t?e.colors.action.focus:e.colors.text.primary};
`,lUe=A.div``;class cUe extends j.Component{constructor(){super(...arguments);R(this,"state",{expanded:kf(this.props.chartId)?ys.PriceChart:void 0,chartHovered:void 0,hoveredPrice:void 0,hoveredDateIndex:void 0,marketToolButtonSelected:kf(this.props.chartId),activeTraderEnabled:!1,activeTraderScrollIndex:{},isMinTradePageWidth:!1,isAddStudyMenuOpen:!1,isDrawingsMenuOpen:!1,isChartSettingsMenuOpen:!1,isDragActive:!1,zoomLevel:rE,offsetX:im(0,rE)});R(this,"addStudyMenuButtonRef",j.createRef());R(this,"chartSettingsMenuButtonRef",j.createRef());R(this,"drawingsMenuButtonRef",j.createRef());R(this,"chartsWrapperRef",j.createRef());R(this,"searchSymbolRef",j.createRef());R(this,"setContainerState",(s,n)=>{const{zoomLevel:r,offsetX:o,isDragActive:i}=s;this.setState(l=>({zoomLevel:r!==void 0?r:l.zoomLevel,offsetX:o!==void 0?o:l.offsetX,isDragActive:i!==void 0?i:l.isDragActive}),()=>{n&&n()})});R(this,"handleLowerChartPointerMove",s=>{this.setState({hoveredDateIndex:s}),this.onEnterChartArea(ys.LowerStudy,this.state.hoveredPrice,s)});R(this,"handleLowerChartPointerEnter",()=>{this.setState({chartHovered:ys.LowerStudy})});R(this,"handleLowerChartPointerLeave",()=>{this.setState({chartHovered:void 0}),this.onEnterChartArea(ys.LowerStudy,this.state.hoveredPrice,void 0)});R(this,"handleResize",()=>{const s=fu();s!==this.state.isMinTradePageWidth&&this.setState({isMinTradePageWidth:s}),window.dispatchEvent(new Event("resize_charts"))});R(this,"expandChart",s=>{this.setState({expanded:s})});R(this,"collapseCharts",()=>{Mf(this.props.chartId),this.setState({expanded:void 0,marketToolButtonSelected:void 0})});R(this,"onEnterChartArea",(s,n,r)=>{this.setState({hoveredPrice:n,chartHovered:s,hoveredDateIndex:r})});R(this,"onLeaveChartArea",()=>{this.setState({chartHovered:void 0,hoveredPrice:void 0,hoveredDateIndex:void 0})});R(this,"toggleAddStudyMenu",()=>{this.setState(({isAddStudyMenuOpen:s})=>({isAddStudyMenuOpen:!s}))});R(this,"toggleDrawingsMenu",()=>{this.setState(({isDrawingsMenuOpen:s})=>({isDrawingsMenuOpen:!s}))});R(this,"toggleChartSettingsMenu",()=>{this.setState(({isChartSettingsMenuOpen:s})=>({isChartSettingsMenuOpen:!s}))});R(this,"getExpandIcon",(s,n,r,o)=>{const i=o?()=>this.collapseCharts():()=>this.expandChart(r);return n?a.jsx(Rk,{isExpanded:s,toggleExpanded:i,ariaLabel:"charts"}):a.jsx(a.Fragment,{})});R(this,"getExpandIconMemo",Nr(this.getExpandIcon,(...s)=>s.toString()));R(this,"shouldBeExpanded",(s=this.props,n=this.state)=>n.expanded!==void 0||!s.shouldDrawChart);R(this,"getPriceFor",s=>{const n=this.state;return n.chartHovered===s?n.hoveredPrice:void 0});R(this,"showLevelII",()=>{this.setMarketTool("level2")});R(this,"showActiveTrader",()=>{this.setMarketTool("activeTrader")});R(this,"showTimeSales",()=>{this.setMarketTool("timeSales")});R(this,"setMarketTool",s=>{let n=s;this.state.marketToolButtonSelected===s&&(n=void 0);const r=this.state.marketToolButtonSelected!==s?ys.PriceChart:void 0;Mf(this.props.chartId,n),this.setState({marketToolButtonSelected:n,expanded:r}),n!==void 0&&Ye({category:Ve.ChartGadget,action:this.props.chartId===zs?Le.TradePageOpened:Le.ChartsPageOpened,label:n})});R(this,"setActiveTraderScrollIndex",(s,n)=>{s!==null&&this.setState(r=>({activeTraderScrollIndex:{...r.activeTraderScrollIndex,[s]:n}}))})}async componentDidMount(){const n=(await Lr()).activeTraderEnabled;this.setState({activeTraderEnabled:n,isMinTradePageWidth:fu()})}componentDidUpdate(s,n){(this.shouldBeExpanded()!==this.shouldBeExpanded(s,n)||this.state.marketToolButtonSelected!==n.marketToolButtonSelected||s.selectedSymbol!==this.props.selectedSymbol||s.isCreateAlertSectionOpen!==this.props.isCreateAlertSectionOpen)&&this.handleResize()}render(){const s=this.state,n=this.props,r=this.shouldBeExpanded(),o=s.activeTraderEnabled,i=this.getPriceFor(ys.PriceChart),l=this.getPriceFor(ys.GainAndLossChart),c=CC(),d=s.marketToolButtonSelected!==void 0,u=s.marketToolButtonSelected==="level2",h=s.marketToolButtonSelected==="activeTrader",p=s.marketToolButtonSelected==="timeSales",m=this.getExpandIconMemo(r,n.shouldDrawChart,ys.PriceChart,this.state.expanded),g=this.getExpandIconMemo(r,n.shouldDrawChart,ys.GainAndLossChart,this.state.expanded),S=SO(n.activePage,n.numCharts);return a.jsx(Da,{onResize:this.handleResize,children:a.jsxs(oUe,{chartId:n.chartId,children:[a.jsxs("div",{id:`charts-wrapper-${n.chartId}`,className:Te("charts-wrapper",s.isMinTradePageWidth&&"charts-wrapper--expanded",r&&"charts-wrapper--expanded",s.expanded===ys.GainAndLossChart&&"charts-wrapper--reversed"),"data-testid":"price-chart",children:[a.jsx(rUe,{}),a.jsxs(Da,{className:this.props.chartId===zs?"flex-grow-1":"",onResize:this.handleResize,children:[S&&a.jsx("div",{ref:this.searchSymbolRef,children:a.jsxs(GPe,{className:"chart-symbol-search-and-mark",expanded:d,children:[a.jsx(cHe,{inputId:`chart-symbol-search-input-${n.chartId}`,chartId:n.chartId}),n.selectedSymbol!==null&&a.jsx(hHe,{symbol:n.selectedSymbol,className:"mark-multiple-charts"})]})}),a.jsxs(Be,{ref:this.chartsWrapperRef,children:[a.jsxs(lUe,{children:[a.jsx(vt,{children:a.jsx(U9e,{chartId:n.chartId,hoveredChart:s.chartHovered,hoveredPrice:l,hoveredDateIndex:s.hoveredDateIndex,ExpandIcon:m,expanded:r,marketToolButtonContentVisible:d,getPrice:this.onEnterChartArea,onMouseEnter:this.onEnterChartArea,onMouseLeave:this.onLeaveChartArea,generalFontSize:c,chartsWrapperRef:this.chartsWrapperRef,toggleAddStudyMenu:this.toggleAddStudyMenu,isAddStudyMenuOpen:s.isAddStudyMenuOpen,addStudyMenuButtonRef:this.addStudyMenuButtonRef,toggleDrawingsMenu:this.toggleDrawingsMenu,drawingsMenuButtonRef:this.drawingsMenuButtonRef,isDrawingsMenuOpen:s.isDrawingsMenuOpen,toggleChartSettingsMenu:this.toggleChartSettingsMenu,chartSettingsMenuButtonRef:this.chartSettingsMenuButtonRef,isChartSettingsMenuOpen:s.isChartSettingsMenuOpen,zoomLevel:s.zoomLevel,offsetX:s.offsetX,isDragActive:s.isDragActive,setContainerState:this.setContainerState,aggregation:n.aggregation,range:n.range,studiesParams:n.studiesParams,fractionalType:n.fractionalType,showFractionalPricing:n.showFractionalPricing,showDoubleTickForFractionalPricing:n.showDoubleTickForFractionalPricing,lowerStudies:n.lowerStudies,activePage:n.activePage,numCharts:n.numCharts,isGainAndLossChartOpen:n.shouldDrawChart,symbol:n.selectedSymbol,priceTick:n.priceTick})}),a.jsx(vt,{children:a.jsx(zFe,{lowerStudies:n.lowerStudies,expanded:r,generalFontSize:c,chartId:n.chartId,studiesParams:n.studiesParams,priceTick:n.priceTick,onPointerMove:this.handleLowerChartPointerMove,onPointerEnter:this.handleLowerChartPointerEnter,onPointerLeave:this.handleLowerChartPointerLeave,hoveredDateIndex:s.hoveredDateIndex,zoomLevel:s.zoomLevel,offsetX:s.offsetX,marketToolButtonContentVisible:d,isDragActive:s.isDragActive,fractionalType:n.fractionalType,showFractionalPricing:n.showFractionalPricing,showDoubleTickForFractionalPricing:n.showDoubleTickForFractionalPricing,activePage:n.activePage,aggregation:n.aggregation,range:n.range,numCharts:n.numCharts})})]}),a.jsxs(vt,{children:[u&&a.jsx(Wje,{chartId:n.chartId,generalFontSize:c,expanded:r,marketToolButtonContentVisible:u,isMarketTool:!0,isMulticharts:S}),h&&o&&a.jsx(M9e,{chartId:n.chartId,generalFontSize:c,expanded:r,marketToolButtonContentVisible:h,chartsWrapperRef:S?this.searchSymbolRef:this.chartsWrapperRef,isMarketTool:!0,scrollIndex:s.activeTraderScrollIndex,setScrollIndex:this.setActiveTraderScrollIndex,isMulticharts:S}),p&&a.jsx(mFe,{chartId:n.chartId,generalFontSize:c,expanded:r,marketToolButtonContentVisible:p,isMarketTool:!0,isMulticharts:S})]})]})]}),a.jsx(vt,{children:a.jsx(QBe,{hoveredChart:s.chartHovered,getPrice:this.onEnterChartArea,onMouseEnter:this.onEnterChartArea,onMouseLeave:this.onLeaveChartArea,hoveredPrice:i,expanded:r,marketToolButtonContentVisible:!1,ExpandIcon:g,generalFontSize:c})}),a.jsxs(vt,{children:[a.jsx(RHe,{chartId:n.chartId,isOpened:s.isAddStudyMenuOpen,toggleAddStudyMenu:this.toggleAddStudyMenu,toggleButtonRef:this.addStudyMenuButtonRef,chartsWrapperRef:S?this.searchSymbolRef:this.chartsWrapperRef,marketToolButtonContentVisible:d}),a.jsx(tUe,{chartId:n.chartId,isOpened:s.isDrawingsMenuOpen,toggleDrawingsMenu:this.toggleDrawingsMenu,toggleButtonRef:this.drawingsMenuButtonRef,chartsWrapperRef:S?this.searchSymbolRef:this.chartsWrapperRef,marketToolButtonContentVisible:d}),a.jsx(yFe,{chartId:n.chartId,toggleButtonRef:this.chartSettingsMenuButtonRef,toggleChartSettingsMenu:this.toggleChartSettingsMenu,isOpened:s.isChartSettingsMenuOpen,chartsWrapperRef:S?this.searchSymbolRef:this.chartsWrapperRef,marketToolButtonContentVisible:d})]})]}),a.jsx(vt,{children:a.jsxs(aUe,{activePage:n.activePage,numCharts:n.numCharts,markHeight:n.markHeight,children:[o&&a.jsx(mf,{"aria-label":`${h?"Hide":"Show"} active trader data`,onClick:this.showActiveTrader,"data-testid":"active-trader-market-toolbar-button",children:a.jsx(gf,{selected:h,children:__("Active Trader")})}),a.jsx(mf,{numCharts:n.numCharts,"aria-label":`${u?"Hide":"Show"} level 2 data`,onClick:this.showLevelII,"data-testid":"level-ii-market-toolbar-button",children:a.jsx(gf,{selected:u,children:__("Level II")})}),a.jsx(mf,{"aria-label":`${p?"Hide":"Show"} time and sales data`,onClick:this.showTimeSales,"data-testid":"time-sales-market-toolbar-button",children:a.jsx(gf,{selected:p,children:__("Time and Sales")})})]})})]})})}}const dUe=(e,{chartId:t})=>{const s=an(t),n=Hm(t),r=x(n,S=>S==null?void 0:S.studies),o=x(n,S=>(S==null?void 0:S.expansionDataCount)??0),i=x(n,S=>(S==null?void 0:S.studiesParams.map(T=>({...T,plotParameters:T.plotParameters})))??Yt()),l=TO(t),c=yO(t),d=x(l,c,(S,T)=>T[S]),u=x(r,i,d,o,DO),h=vN(t),p=x(s,bn,(S,T)=>{const y=T.get(S??""),b=(y==null?void 0:y.fractionalType)??Bs.x10,E=b!==Bs.x10;return{fractionalType:b,showFractionalPricing:E}}),m=Gm(t),g=oy(t);return S=>{const T=hs(S).size,{showFractionalPricing:y,fractionalType:b}=p(S);return{shouldDrawChart:AN(S),selectedSymbol:s(S),activePage:ms(S),numCharts:T,markHeight:MC(t,T),range:l(S),studiesParams:i(S),aggregation:d(S),lowerStudies:u(S),priceTick:h(S),showFractionalPricing:y,fractionalType:b,showDoubleTickForFractionalPricing:Vs(m(S),g(S))}}},_M=se(dUe)(cUe),uUe=Xo.swap,hUe=j.createContext(!1),KT="trade-table-portal",pUe=`${KT}-tr-portal`,mUe=()=>{let e=document.getElementById(KT);if(e!==null)return;e=document.createElement("table"),e.id=KT,e.classList.add("ryan-grid","border-collapse","trade-table"),Object.assign(e.style,{margin:"0",marginTop:"-.4rem",padding:"0",border:"0",height:"0",width:"0",position:"absolute"});const t=document.createElement("tbody"),s=document.createElement("tr");s.id=pUe,t.appendChild(s),e.appendChild(t),document.body.appendChild(e)};class gUe extends B.Component{constructor(s){super(s);R(this,"_isMounted",!1);R(this,"headerRef",null);R(this,"setTableWidth",s=>{this._isMounted&&this.setState({tableWidth:s})});R(this,"onResize",s=>{this.setTableWidth(s.offsetWidth)});R(this,"toggleDrawerOpen",s=>{s.stopPropagation(),this.props.openColumnCustomizationMenu()});R(this,"onBeforeDragStart",()=>{this.setState({isDragging:!0,drawerOpen:!0})});R(this,"onDragEnd",s=>{const{columns:n,setColumns:r}=this.props,{source:o,destination:i}=s;if(this.setState({isDragging:!1}),!(ii(i)||ii(o))&&!(o.droppableId==="trades-drawer"&&i.droppableId==="trades-drawer")){if(o.droppableId==="trades-drawer"&&i.droppableId==="trades-header"){const l=K_(s.draggableId),c=Xo.insert(n,l,i.index);r(c);return}if(o.droppableId==="trades-header"&&i.droppableId==="trades-drawer"){const l=zl([o.index],n);r(l);return}if(o.droppableId==="trades-header"&&i.droppableId==="trades-header"&&i.index!==o.index){const l=uUe(n,o.index,i.index);r(l)}}});R(this,"handleToggleSelection",()=>{const{isAllTradesSelected:s,toggleSelection:n}=this.props;n(s)});R(this,"toggleSelectedFor",s=>{this.props.handleCheck(s,!s.checked)});R(this,"renderSettingsIcon",()=>a.jsx(Gu,{cssClass:"column-drawer-icon",onClick:this.toggleDrawerOpen,ariaLabel:`Column Configuration ${this.state.drawerOpen?"Expanded":"Collapsed"}`,dataTestid:"trades-table-customization-button",analyticsAction:vc("trade")}));this.state={isDragging:!1,drawerOpen:!1,tableWidth:0},this.setTableWidth=yc(this.setTableWidth,300,{leading:!1,trailing:!0})}componentDidMount(){this._isMounted=!0,mUe()}componentWillUnmount(){this._isMounted=!1}render(){const{trades:s,columns:n,isAllTradesSelected:r,draftTradeDirections:o}=this.props,i=this.state,l=`checkbox-input${s.length===0?" empty":""}`;return a.jsx(Da,{"data-testid":"trades-table-resize-detector",onResize:this.onResize,className:"trade-table-resize-container in-app-scrollbar",children:a.jsx(hUe.Provider,{value:i.isDragging,children:a.jsx(fl,{onDragEnd:this.onDragEnd,onBeforeDragStart:this.onBeforeDragStart,nonce:Mc(),children:a.jsxs("table",{className:"ryan-grid trade-table","aria-label":`Show ${this.props.page} Trades`,children:[a.jsx("thead",{children:a.jsx(wa,{droppableId:"trades-header",direction:"horizontal",children:c=>a.jsxs("tr",{ref:d=>{this.headerRef=d,c.innerRef(d)},...c.droppableProps,className:"table-header",children:[a.jsx("th",{"data-testid":"trades-table-th",onClick:this.handleToggleSelection,className:Te("corner","top","left"),children:a.jsxs("div",{className:"position-container",children:[a.jsxs("div",{className:Te("checkbox-container center","buy"),children:[a.jsx("input",{"data-testid":"toggle-selection-input","aria-label":"Select All Trades",id:"toggle-selection",className:l,type:"checkbox",checked:r,onChange:()=>null}),a.jsx("span",{"data-testid":"trades-table-toggle-selection-checkbox","aria-hidden":!0,className:"checkbox",onClick:d=>d.preventDefault()})]}),a.jsxs("div",{className:"header-content",children:[a.jsx("div",{"data-testid":"trades-table-column-label","aria-hidden":!0,className:"position-label",children:__("Trade")}),this.renderSettingsIcon()]})]})}),a.jsx(E_,{tableId:"trade",columns:n,onColumnClick:yr,drawerOpen:i.drawerOpen}),c.placeholder]})})}),!this.props.unavailableAccount&&a.jsxs(a.Fragment,{children:[a.jsx("tbody",{"data-testid":"trades-table-tbody",children:this.props.trades.map((c,d)=>{const u=jd(c),h={onRowClick:()=>this.toggleSelectedFor(c),columns:this.props.columns,displayCheckboxes:!0,checked:c.checked,type:dC.SelectableTradeProps,index:d,isSecondaryTrade:!1,secondaryTradeIndex:0};return a.jsx(U_,{direction:o==null?void 0:o[0],trade:c,...h},u)})}),a.jsx("tfoot",{"data-testid":"trades-table-tfoot",children:a.jsx(G_,{columns:n,data:this.props.totals,label:__("Selected Totals:"),symbol:this.props.symbol,checkedCount:this.props.checkedCount,disableLastColumnPadding:!0})})]})]})})})})}}const SUe=e=>e.trades,fUe=x(SUe,mt,(e,t)=>t===null||t===""?[]:e.get(t,[]).filter(n=>n.status===de.Completed&&n.checked)),TUe=x(bie,fUe,(e,t)=>e.filter(s=>t.find(n=>n.status===de.Completed&&n.symbol===s.symbol&&n.account===s.account)).reduce((s,n)=>{const r=new eo(s.netLiquidity).add(n.netLiquidity??0),o=new eo(s.plDay).add(n.plDay??0),i=new eo(s.plOpen).add(n.plOpen??0),l=new eo(s.plYtd).add(n.plYtd??0),c=new eo(s.openCost).add(n.openCost??0).toNumber();return{openCost:c,openPrice:void 0,netLiquidity:r.toNumber(),plOpen:i.toNumber(),plDay:o.toNumber(),plYtd:l.toNumber(),plYtdPercent:l.dividedBy(eo.abs(r.minus(l))).toNumber(),plOverallPercent:i.dividedBy(Math.abs(c)).toNumber(),plDayPercent:o.dividedBy(eo.abs(r.minus(o))).toNumber(),delta:new eo(s.delta).add(n.delta??0).toNumber(),gamma:new eo(s.gamma).add(n.gamma??0).toNumber(),theta:new eo(s.theta).add(n.theta??0).toNumber(),vega:new eo(s.vega).add(n.vega??0).toNumber(),buyingPowerEffect:new eo(s.buyingPowerEffect).add(n.buyingPowerEffect??0).toNumber(),mark:void 0,markChange:void 0}},{openCost:0,openPrice:void 0,netLiquidity:0,plOpen:0,plDay:0,delta:0,gamma:0,plYtd:0,theta:0,vega:0,buyingPowerEffect:0,plOverallPercent:0,plYtdPercent:0,plDayPercent:0,mark:0,markChange:0})),yUe=(e,t)=>e.trades.get(t,[]),NM=Ur(yUe,e=>e),CUe=(e,t,s)=>{const n=NM(e,t);switch(s){case Zs.All:return n;case Zs.Filled:return n.filter(r=>r.status===de.Completed||r.status===de.Draft);case Zs.Working:return n.filter(r=>r.status===de.Pending||r.status===de.Draft)}},bUe=e=>(t,s)=>{switch(Ye({category:Ve.Trade,action:s?Le.TradeSelected:Le.TradeDeselected,label:t.status}),t.status){case de.Pending:e(s?{type:f.PendingTradeChecked,orderId:t.orderId,symbol:t.symbol}:{type:f.PendingTradeUnchecked,orderId:t.orderId,symbol:t.symbol});break;case de.Draft:e(s?{type:f.DraftTradeChecked,symbol:t.rootSymbol}:{type:f.DraftTradeUnchecked,symbol:t.rootSymbol});break;case de.Completed:e(s?{type:f.CompletedTradeChecked,symbol:t.symbol,account:t.account}:{type:f.CompletedTradeUnchecked,symbol:t.symbol,account:t.account})}},EUe=(e,{symbol:t})=>{const s=Km(e.filters.tradeFilter.showCompleted,e.filters.tradeFilter.showWorking);let n;t===null||t===""?n=[]:n=CUe(e,t,s);const r=n.length>0?n.every(i=>i.checked):!1;return{groupedOrder:Rc(e,t),totals:TUe(e),columns:e.columns.trade,trades:n,page:s,isAllTradesSelected:r,checkedCount:n.reduce((i,l)=>l.checked?i+1:i,0),draftTradeDirections:$O(e)}},AUe=(e,{symbol:t})=>({handleCheck:bUe(e),toggleSelection(s){s?(e({type:f.UncheckAllTrades,rootSymbol:t}),Ye({category:Ve.Trade,action:Le.AllTradesDeselected,label:t})):(e({type:f.CheckAllTrades,rootSymbol:t}),Ye({category:Ve.Trade,action:Le.AllTradesSelected,label:t}))},resetColumns(){e(n_("trade"))},setColumns(s){e(Ll("trade",s))},addContingentOrder(){e(jD(t))},changeContingency(s,n){e(BD(t,s,n))},deleteDraftOrderTicket(s,n){e(FD(s,n))}}),vUe=se(EUe,AUe,null,{areStatePropsEqual:fs})(gUe),IUe=e=>e.expandedOrderConfirmations,oh=x(IUe,Os,(e,t)=>t!==null&&t!==""&&e.has(t)),xUe=A.button`
  padding: 6px 0 0;
`,wUe=({opened:e,symbol:t,hideOrderConfirmation:s,tradeStatus:n,toggleIsExpanded:r,showExpanderUp:o})=>{const i=j.useCallback(()=>{r(),t&&e&&s(t)},[t,e,s,r]);return n===de.Draft?a.jsx(xUe,{"aria-label":"Order Confirmation","aria-expanded":o,onClick:i,"data-testid":"trade-ticket-expander",children:a.jsx(Zy,{isExpandedUp:o,type:Y.ChevronDownCircle,width:16,height:16,viewBox:"2 2 20 20",fill:o?"action.focus":"icon.primary",dataTestId:"chevron-down-circle-icon"})}):null},OUe=e=>({opened:oh(e),symbol:Os(e)}),RUe=e=>({hideOrderConfirmation(t){e({type:f.HideOrderConfirmation,symbol:t})}}),DUe=se(OUe,RUe)(wUe);class LUe extends B.PureComponent{constructor(){super(...arguments);R(this,"handleClick",()=>{const{symbol:s,reviewOrder:n}=this.props;s&&n(s)})}render(){const{disabled:s}=this.props;return a.jsx("button",{id:"review-order-button","data-testid":"review-order-button",className:"primary review",disabled:s!==void 0?s:!1,"aria-label":"Review Draft Trade",onClick:this.handleClick,children:__("Review")})}}const _Ue=e=>({symbol:Os(e)}),NUe=e=>({reviewOrder(t){Et.unstable_batchedUpdates(()=>{e({type:f.ShowOrderConfirmation,symbol:t}),e(Us(ps.ORDER_CONFIRMATION)),e(ng(t,0,!0,!1,!0)),Ye({category:Ve.Trade,action:Le.ReviewOrder,label:t})})}}),PUe=se(_Ue,NUe)(LUe),kUe=(e,t,s,n)=>{if(!t)return;const r=document.getElementById("trade-table");s!==void 0&&n!==void 0&&e(t,s,n),r&&r.focus()},MUe=({symbol:e,sendOrder:t,disabled:s,orderInstrumentType:n,orderOrderType:r})=>a.jsx("button",{id:"send-order-button","aria-label":"Send Draft Trade",className:"primary review","data-testid":"send-order-button",disabled:s,onClick:()=>kUe(t,e,n,r),children:__("Send")}),$Ue=x(Os,So,(e,t)=>{var n,r;if(e===null)return;const s=(r=(n=t.get(e))==null?void 0:n[0])==null?void 0:r.orders[0];if(!(s===void 0||s.legs.length===0))return s.legs.length===1?s.legs[0].instrumentType:k.OPTION}),jUe=x(Os,So,(e,t)=>{var n,r;if(e===null)return;const s=(r=(n=t.get(e))==null?void 0:n[0])==null?void 0:r.orders[0];if(!(s===void 0||s.legs.length===0))return s.orderType}),BUe=e=>({symbol:Os(e),orderInstrumentType:$Ue(e),orderOrderType:jUe(e)}),FUe=e=>({sendOrder(t,s,n){e({type:f.SendOrder,symbol:t}),e({type:f.UncheckAllTrades,rootSymbol:t}),Ye({category:Ve.Trade,action:Le.SendOrder,label:[`${t}`,`${s}`,`${n}`]})}}),HUe=se(BUe,FUe)(MUe),UUe=A.section`
  display: flex;
  align-items: center;
  flex: 5 1;
  min-width: 115px;
  margin: 4px 0;
  @media screen and (max-width: 430px) {
    min-width: 20px;
  }
`,VUe=A.header`
  margin-left: ${({theme:e})=>e.space.xSmall};
  white-space: nowrap;
  font-weight: 500;
  ${({theme:e})=>e.breakpoints.below(430)} {
    display: none;
  }
`,WUe=A.div`
  ${({theme:e})=>e.mixins.ellipsis};
  margin-right: ${({theme:e})=>e.space.xSmall};
  padding: ${({theme:e})=>`${e.space.xxSmall} ${e.space.small}`};
`,GUe=A.p`
  ${({hideSummaryText:e})=>e&&`
    visibility: hidden;
  `}
  ${({theme:e})=>e.breakpoints.below(430)} {
    display: none;
  }
`,YUe=5e3,qUe=e=>{const[t,s]=j.useState(!1),{symbol:n,currentDraftTrade:r}=e;return Eb(()=>{s(!1)},t?YUe:void 0),j.useMemo(()=>{let i=!0;return r&&(r[0].contingencies.length>0||r[0].orderRules[0].length>0||r[0].orders[0].quantityLink===U1.MONEY_AMOUNT)&&(i=!1),i},[r])?a.jsx(a.Fragment,{children:t?a.jsx(ot,{"aria-label":__("Copied!"),color:"action.focus",id:"copy-text",children:"Copied!"}):a.jsx(tt,{variant:"link","aria-label":"Copy Order URL",id:"copy-order-url",onClick:i=>{var g;let l=`${window.location.origin}/trade?symbol=${n}`;const c=(g=r==null?void 0:r[0].orders)==null?void 0:g[0],d=(c==null?void 0:c.legs)||[];for(const[S,T]of d.entries())l+=`&leg${S+1}=${T.direction===pe.Sell?-1*T.quantity:T.quantity},${T.symbol}`;const u=c==null?void 0:c.orderType,h=c==null?void 0:c.price,p=c==null?void 0:c.activationPrice,m=c==null?void 0:c.tif;u!==ne.TRAILSTOP&&(l+=`&orderType=${u}`),h!==void 0&&(l+=`&limitPrice=${h}`),p!==void 0&&(l+=`&stopPrice=${p}`),m!==void 0&&(l+=`&orderTif=${m}`),navigator.clipboard.writeText(l),s(!0)},children:__("Copy Order URL")})}):null},KUe=e=>({currentDraftTrade:Zae(e),symbol:Os(e)}),zUe=se(KUe)(qUe),XUe=e=>{var N,L,P;const{orderSummary:t,expanded:s=!1,sendable:n,checkedTradesCount:r=0,deleteDraftOrder:o,deleteDraftOrderNotification:i,symbol:l,trade:c,trayPortalRef:d,tradePageRef:u,isExpanded:h,toggleIsExpanded:p,summaryTextRef:m,hideSummaryText:g}=e,[S]=Cc({threshold:1}),T=j.useRef(null),y=j.useRef(null);if(r<=0)return null;const b=(N=u==null?void 0:u.current)==null?void 0:N.getBoundingClientRect().bottom,E=(L=T.current)==null?void 0:L.getBoundingClientRect().bottom,v=Ut(b)&&Ut(E),D="Trade "+t!=""?t:"null Deleted.",w=a.jsxs("section",{role:"alert","aria-live":"polite",className:Te("confirmation-tray","flexWrap",v&&"confirmation-tray--sticky",h&&"is-expanded"),ref:y,"data-testid":"confirmation-tray",children:[a.jsx(ZUe,{checkedTradesCount:r,tradeStatus:(c==null?void 0:c.status)??void 0,orderSummary:t,toggleIsExpanded:p,isExpanded:h,summaryTextRef:m,hideSummaryText:g}),QUe({deleteDraftOrder:()=>o&&o(l??""),deleteDraftOrderNotification:()=>i&&i(D),trade:c,expanded:s,sendable:n})]});return a.jsxs(a.Fragment,{children:[v&&(d!=null&&d.current)?Cu.createPortal(w,d==null?void 0:d.current):w,a.jsx("div",{ref:Bu(S,T),...v&&{style:{height:(((P=y.current)==null?void 0:P.clientHeight)??0)+5}}})]})},QUe=({deleteDraftOrder:e,deleteDraftOrderNotification:t,trade:s,expanded:n,sendable:r})=>{const o=n!==void 0?n:!0,i=!r;return s!==void 0&&s.status===de.Draft?a.jsxs("section",{className:"review-buttons-box section",children:[o&&a.jsx(ds,{mr:"20px",children:a.jsx(zUe,{})}),a.jsx(ds,{mr:3,children:a.jsx("button",{className:"secondary",onClick:()=>{e(),t()},"aria-label":"Delete Draft Trade",children:__("Delete")})}),o?a.jsx(HUe,{disabled:i}):a.jsx(PUe,{disabled:i})]}):null},ZUe=({checkedTradesCount:e,tradeStatus:t,orderSummary:s,toggleIsExpanded:n,isExpanded:r,summaryTextRef:o,hideSummaryText:i})=>{const l=`${e} ${__("Selected")} ${s}`,c=s!==""?s:null,d=`${e} ${__("Selected")}`;return a.jsxs(UUe,{"data-testid":"confirmation-tray-content","aria-label":l,children:[e===1&&a.jsx(DUe,{tradeStatus:t,toggleIsExpanded:n,showExpanderUp:r!==void 0?r:!1}),a.jsx(VUe,{children:d}),e===1&&typeof c=="string"&&c.length>0&&a.jsx(WUe,{children:a.jsx(GUe,{"data-testid":"order-summary-text",ref:o,hideSummaryText:i,children:c})})]})},JUe=(e,t)=>{if(t===void 0)return"";const s=e.get(t.symbol),n=t.quantity>0?`+${t.quantity}`:`${t.quantity}`,{showFractionalPricing:r,fractionalType:o}=Wm(s),i=Vs((s==null?void 0:s.rootSymbol)??"",s==null?void 0:s.type);return t.type===k.OPTION?`${n} ${t.description} @${t.openPrice}`:`${n} ${t.symbol} @${r?Fs(t.openPrice,o,i):t.openPrice}`},PM=e=>e.createTrade,kM=e=>e.workingOrders,eVe=e=>e.instruments,MM=x(Cr,PM,kM,oh,MO,(e,t,s,n,r)=>{var i,l;const o=e.length===1?e[0]:void 0;if(o)switch(o.status){case de.Completed:return!1;case de.Pending:{const c=s.find(d=>d.id===o.orderId&&d.instrument.symbol===o.symbol);return c?c.legs!==void 0:!1}case de.Draft:{const c=t.orderConfirmation.get(o.rootSymbol),d=(l=(i=t.trade.get(o.rootSymbol))==null?void 0:i[0])==null?void 0:l.orders[0],u=d?d.legs.map(p=>p.quantity).some(p=>p===0):!1,h=(c==null?void 0:c.canBeSent)??!1;return n&&((c==null?void 0:c.validationError)??!1)?!1:h&&!u&&!r}}return!1}),tVe=(e,t,s,n,r)=>{var o;switch(e.status){case de.Completed:{const i=t.get(e.positionId);return i?JUe(r,i):""}case de.Pending:{const i=n.find(l=>l.id===e.orderId&&l.instrument.symbol===e.symbol);return i?i.descriptionToShare:""}case de.Draft:{const i=(o=s.trade.get(e.rootSymbol))==null?void 0:o[0];if(i!==void 0&&i.contingencies.length>0)return dc(Oc(i.contingencies));{const l=s.orderConfirmation.get(e.rootSymbol);return l?l.orderSummary:""}}default:return""}},$M=x(Cr,Zr,PM,kM,eVe,Cr,(e,t,s,n,r,o)=>e.map(i=>tVe(i,t,s,n,r)).join(" ")),Ab=x(Cr,e=>e.length===1?e[0]:void 0),sVe=e=>{const t=Cr(e),s=Ab(e),n=t.length;return{expanded:oh(e),sendable:MM(e),orderSummary:$M(e),symbol:Os(e),checkedTradesCount:n,trade:s}},nVe=e=>({deleteDraftOrder(t){e({type:f.DeleteDraftOrder,symbol:t}),Ye({category:Ve.Trade,action:Le.DeleteDraftOrderConfTray})},deleteDraftOrderNotification(t){e({type:f.DeleteDraftOrderNotification,deleteNotification:t})}}),rVe=se(sVe,nVe)(XUe),ah=e=>e.selected.workingOrders,jM=x(ah,e=>Object.values(e).reduce((t,s)=>s?t+1:t,0)),oVe=x(jM,e=>e===1),BM=x(oVe,ah,(e,t)=>e?Number(Object.entries(t).find(([s,n])=>n)[0]):null),aVe=x(_O,BM,(e,t)=>e.find(s=>s.orderId===t)),iVe=x(BM,e=>e.workingOrders,(e,t)=>{if(e===null)return"";const s=t.find(({id:n})=>n===e);return s!==void 0?s.descriptionToShare:""}),FM=x(ah,e=>Object.entries(e).reduce((t,[s,n])=>n?[...t,Number(s)]:t,[])),lVe=x(ah,e=>{const t=Object.values(e);return t.length>0&&t.every(s=>s)}),cVe=x(ah,e=>Object.values(e).length===0),vb=e=>e.workingOrders,HM=x(vb,Cr,(e,t)=>t.reduce((s,n)=>{if(n.status===de.Pending){const r=e.find(o=>o.id===n.orderId&&o.instrument.symbol===n.symbol);r!==void 0&&s.push(r.id)}return s},[])),dVe=x(vb,HM,(e,t)=>e.filter(s=>t.includes(s.id))),uVe=x(vb,FM,(e,t)=>e.filter(s=>t.includes(s.id))),hVe=x(dVe,e=>e.some(t=>t.instrument.instrumentType===k.FUND)),pVe=x(uVe,e=>e.some(t=>t.instrument.instrumentType===k.FUND)),UM=({orderIds:e,cancelOrder:t,symbol:s,dense:n,disabled:r=!1})=>{const o=()=>{t(e,s)};return a.jsx("button",{disabled:r,"aria-label":"Cancel Working Trades","data-testid":"cancel-order-btn",className:Te("secondary",n&&"flex1"),onClick:o,children:n?__("Cancel"):__("Cancel Selected")})},mVe=e=>{const t=HM(e),s=mt(e);return{orderIds:t,symbol:s!==null?s:void 0}},gVe=e=>({cancelOrder(t,s){s!==void 0&&e({type:f.CancelOrder,orderIds:t,symbol:s})}}),MI=se(mVe,gVe)(UM),SVe=e=>{const{rootSymbol:t,positions:s}=e,n=j.useCallback(()=>{t&&e.rollPositions(s,t)},[t,s]);return a.jsx("button",{"data-testid":"roll-selector-btn","aria-label":"Roll Selected Filled Trades",onClick:n,className:"secondary",children:__("Roll Selected")})},fVe=x(Cr,e=>e.filter(t=>t.status===de.Completed).map(t=>t.positionId)),TVe=e=>{const t=mt(e);return{positions:fVe(e),rootSymbol:t}},yVe=e=>({rollPositions:(t,s)=>{e({type:f.UncheckAllTrades,rootSymbol:s}),e({type:f.RollPositions,positions:t,rootSymbol:s})}}),$I=se(TVe,yVe)(SVe),CVe=e=>{const{positions:t,closePosition:s,rootSymbol:n}=e,r=j.useCallback(()=>{n&&s(n,t)},[n,t]);return a.jsx("button",{"aria-label":"Close Selected Filled Trades",className:"secondary","data-testid":"close-position-btn",onClick:r,children:__("Close Selected")})},bVe=x(Cie,e=>e.filter(Ut)??[]),EVe=e=>({positions:bVe(e),rootSymbol:mt(e)}),AVe=e=>({closePosition(t,s){e({type:f.UncheckAllTrades,rootSymbol:t}),e({type:f.ClosePositions,rootSymbol:t,positions:s})}}),jI=se(EVe,AVe)(CVe),VM=({editWorkingOrder:e,disabled:t=!1,dense:s=!1,symbol:n,workingOrderId:r})=>a.jsx("button",{"data-testid":"edit-order-btn",className:Te("secondary",s&&"flex1"),disabled:t,"aria-label":"Edit Working Trades",onClick:e(r,n),children:s?__("Edit"):__("Edit Selected")}),vVe=e=>({editWorkingOrder:(t,s)=>()=>{Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:s}),e({type:f.EditWorkingOrder,orderId:t})}),Ye({category:Ve.Trade,action:Le.EditSelected,label:ks.EditOrderFromTradePage})}}),IVe=se(null,vVe)(VM),zT=wc.mobileSmall+75,xVe=A.header`
  margin: ${({theme:e})=>`0 ${e.space.small} 0 ${e.space.xSmall}`};
  font-weight: 500;
  ${({theme:{breakpoints:e}})=>e.below(zT)} {
    ${({theme:e,shouldCrop:t})=>t&&`margin: 0 0 ${e.space.xSmall} ${e.space.xSmall}; align-self: flex-start;`}
  }
`,wVe=A.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: ${({theme:e})=>`${e.space.xSmall}`};

  button {
    margin-right: ${({theme:e})=>e.space.xSmall};
  }

  ${({theme:{breakpoints:e}})=>e.below(zT)} {
    ${({shouldCrop:e})=>e&&"flex-direction: column;"}
  }

  ${({theme:{breakpoints:e}})=>e.between(zT,e.mobileLarge-35)} {
    ${({shouldCrop:e})=>e&&`button {
      height: 42px;
      padding: 9px 13px;
    }`}
  }
`,OVe=e=>{const{symbol:t,trade:s,checkedCount:n,showCancelButton:r,showRollButton:o,showCloseButton:i,sendable:l,tradeWorkingOrdersContainsMutualFund:c}=e,d=n===1&&r||o,u=(h,p,m)=>{switch(h.status){case de.Pending:return a.jsxs(Be,{alignSelf:"flex-end",children:[a.jsx(MI,{disabled:m}),a.jsx(IVe,{symbol:p,disabled:!l||m,workingOrderId:h.orderId})]});case de.Completed:return a.jsxs(Be,{alignSelf:"flex-end",children:[o&&a.jsx($I,{}),i&&a.jsx(jI,{})]})}};return a.jsx(a.Fragment,{children:n>0&&a.jsxs(wVe,{"data-testid":"trade-action-buttons",role:"alert","aria-live":"polite",shouldCrop:d,children:[a.jsxs(xVe,{shouldCrop:d,children:[n," ",__("Selected")]}),s===void 0||t===null?a.jsxs(Be,{alignSelf:"flex-end",children:[r&&a.jsx(MI,{disabled:c}),o&&a.jsx($I,{}),i&&a.jsx(jI,{})]}):u(s,t,c)]})})},RVe=(e,t)=>e.trades.get(t,[]),DVe=Ur(RVe,e=>e),LVe=(e,t,s)=>{const n=DVe(e,t);switch(s){case Zs.All:return n;case Zs.Filled:return n.filter(r=>r.status===de.Completed||r.status===de.Draft);case Zs.Working:return n.filter(r=>r.status===de.Pending||r.status===de.Draft)}},WM=e=>{const t=e.filter(n=>n.status===de.Completed).map(n=>n.account);return[...new Set(t)].length===1},_Ve=(e,t)=>e.map(r=>r.status===de.Completed?r:null).filter(Boolean).map(r=>t.get(r.symbol)).reduce((r,o)=>r&&o!==void 0&&"expiration"in o,!0),NVe=x(Cr,e=>!e.some(s=>s.status!==de.Pending)),PVe=x(Cr,bn,mt,(e,t,s)=>{if(e.length!==1&&e.length!==2)return!1;const n=e.some(l=>l.status!==de.Completed),r=s?t.get(s):void 0,o=l=>l!==void 0?(l.type===k.PRODUCT&&l.activeSymbol!==void 0?l.activeSymbol!=="":!1)||l.type===k.FUTURE:!1,i=l=>l!==void 0?(l.type===k.PRODUCT&&l.activeSymbol!==void 0?l.activeSymbol!=="":!1)||l.type===k.OPTION:!1;return WM(e)&&_Ve(e,t)&&!o(r)&&!i(r)&&!n}),kVe=x(Cr,e=>!(e.length>0&&e.length<5)||e.some(s=>s.status!==de.Completed)?!1:WM(e)),MVe=(e,{symbol:t})=>{const s=Km(e.filters.tradeFilter.showCompleted,e.filters.tradeFilter.showWorking);let n;return t===""?n=[]:n=LVe(e,t,s),{checkedCount:n.reduce((r,o)=>o.checked?r+1:r,0),symbol:mt(e),trade:Ab(e),showCancelButton:NVe(e),showRollButton:PVe(e),showCloseButton:kVe(e),sendable:MM(e),tradeWorkingOrdersContainsMutualFund:hVe(e)}},$Ve=se(MVe,null,null,{areStatePropsEqual:fs})(OVe),jVe=e=>{const t=(g,S,T)=>{g===V.BID?e.sell(S,T,e.selectedSymbol):g===V.ASK&&e.buy(S,T,e.selectedSymbol)},s=(g,S,T,y)=>{if(y&&T!==void 0)return b=>{switch(b.key){case we.Enter:case we.Space:{b.stopPropagation(),b.preventDefault(),t(g,S,T);break}}}},n=(g,S,T,y)=>{if(y&&T!==void 0)return b=>{t(g,S,T)}},r=g=>e.columns.map(S=>{const T=g.tradeable,y=T&&(S===V.BID||S===V.ASK),b=Te(y&&"tradeable"),E=y?0:void 0,v=`Buy ${Ns(e.symbol)}`,D=`Sell ${Ns(e.symbol)}`,w=y?`${S===V.ASK?v:D}`:void 0;let N;if(S!=="rootSymbol"&&S!=="symbol")if(!g.tradeable&&!g.markChange&&S==="markChange"&&(N=g.netChange),S==="description")N=i==null?void 0:i.description;else if(eb.includes(S)){const P=`${S.toLocaleUpperCase()}_TREND`,F=V[P];N=g[F]}else N=g[S];return a.jsx(Fn.td,{className:b,"aria-label":w,tabIndex:E,onKeyDown:s(S,e.symbol,g.instrumentType,T),onClick:n(S,e.symbol,g.instrumentType,T),children:a.jsx("div",{className:"cell-value","data-testid":`cell-value-${S}`,children:S==="rootSymbol"?a.jsx("div",{children:a.jsx("span",{"data-symbol":N,"aria-label":Ns(N),title:i==null?void 0:i.description,children:g.displaySymbol!==void 0?g.displaySymbol:e.symbol})}):a.jsx(Yu,{column:S,value:N,symbol:e.symbol})})},S)}),{quote:o,instrument:i,selectedSymbol:l,buy:c,sell:d,...u}=e;if(o===void 0&&i===void 0)return null;const h=Qu(i),p=h.instrumentType===k.PRODUCT&&h.activeSymbol!==void 0?!0:h.tradeable,m={...o,...h,tradeable:p};return yu(m)?null:a.jsx(Fn.inViewTr,{...u,children:r(m)})},BVe=(e,t)=>{const s=ms(e),n=qg(e),r=Ru(e),o=s===ge.Charts?r:n;return{quote:e.futuresChain.quotes.find(i=>i.symbol===t.symbol),instrument:e.instruments.get(t.symbol),selectedSymbol:o}},FVe=e=>({buy:(t,s,n)=>{t!==void 0&&(Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:n??t}),e({type:f.TradeInstrument,symbol:t,instrumentType:s,direction:pe.Buy,isFuturesContract:!0}),e(Us(ps.TRADE_TICKET))}),Ye({category:Ve.Trade,action:Le.AddTradeFromFuturesChain,label:s}))},sell:(t,s,n)=>{t!==void 0&&(Et.unstable_batchedUpdates(()=>{e({type:f.UncheckAllTrades,rootSymbol:n??t}),e({type:f.TradeInstrument,symbol:t,instrumentType:s,direction:pe.Sell,isFuturesContract:!0}),e(Us(ps.TRADE_TICKET))}),Ye({category:Ve.Trade,action:Le.AddTradeFromFuturesChain,label:s}))}}),HVe=se(BVe,FVe)(jVe),UVe="futuresChain-table",VVe=e=>{const[t,s]=B.useState(e.currentFuturesChainSymbols),[n,r]=B.useState(e.currentFuturesChainSymbols.slice(0).sort()),[o,i]=B.useState(null),[l,c]=B.useState(["rootSymbol",...e.columns]),[d,u]=B.useState(Za(e.currentFuturesChainSymbols,e.quotes,e.instruments));B.useEffect(()=>{const E=T7();i(E)},[]);const h=Nr(E=>(v,D)=>{const{rootSymbol:w}=D.row;return{symbol:w,columns:E===void 0?[]:E}},(E=[])=>E.join()),p=E=>{c(E)};B.useEffect(()=>{var L;const{currentFuturesChainSymbols:E,currentFuturesChainSymbolsAlphaSort:v}=e,D=oi(v,n);let w=E;if(D)w=o!==null&&t.length>0?t:E;else{const P=d.map(O=>O.rootSymbol).sort();oi(v,P)&&(w=ol(d,o,E),u(Za(w,e.quotes,e.instruments)),s(w),r(w.slice(0).sort()))}const N=Za(w,e.quotes,e.instruments);if(d.length!==N.length)u(N);else for(let P=0;P<N.length;P++)N[P].rootSymbol!==((L=d==null?void 0:d[P])==null?void 0:L.rootSymbol)&&u(N)},[e.currentFuturesChainSymbols,e.currentFuturesChainSymbolsAlphaSort,e.quotes,e.instruments]);const m=un(e.columns);B.useEffect(()=>{const E=e.columns;JSON.stringify(E)!==JSON.stringify(m)&&c(["rootSymbol",...E])},[e.columns]);const g=E=>{const{currentFuturesChainSymbols:v,quotes:D,instruments:w}=e,N=ol(d,E,v),L=Za(N,D,w);f7(E),u(L),i(E),s(N),r(n.slice(0).sort())},S=()=>{const E=Qx.filter(v=>!l.includes(v));return Dm(E)},T=E=>`futures-chain-${E.rootSymbol}`,y=()=>{const E=["rootSymbol",...B1];p(E)},b=Nr(E=>({onDragEnd:p,getCancelMessage:pm,getMoveMessage:hm,availableColumns:E,onColumnsReset:y}),E=>E.map(v=>v).join());return a.jsx(mb,{data:d,tableId:UVe,querySelector:"section#trade-page",getTrProps:h(l),canDragColumns:!0,draggableColumnsSettings:b(S()),columns:l,getRowId:T,TrComponent:HVe,sortingRule:o,onSortingChange:g})},WVe=e=>e.futuresChain.quotes,GM=e=>e.futuresChain.currentFuturesChainSymbols,GVe=Nn(GM,e=>e.slice(0).sort()),YVe=x(mt,uie,(e,t)=>e===null?!1:t),qVe=x(WVe,e=>e),KVe=e=>{const t=qVe(e),s=mt(e),n=GM(e),r=GVe(e);return{selectedSymbol:s,quotes:t,currentFuturesChainSymbols:n,currentFuturesChainSymbolsAlphaSort:r,instruments:bn(e),columns:e.columns.futuresChain}},zVe=e=>({setColumns(t){e(Ll("futuresChain",t))}}),XVe=se(KVe,zVe)(VVe),QVe=A.section`
  background-color: ${({theme:e})=>e.colors.background.primary};
  border-radius: ${({theme:e})=>e.shape.borderRadius.primary}px;
  margin-top: ${({theme:e})=>e.space.small};
  padding: 10px 0 10px 12px;
`,ZVe=A.h2`
  text-align: left;
  color: ${({theme:e})=>e.colors.text.primary};
  font-size: ${({theme:e})=>e.fontSizes.large};
  cursor: pointer;
`,JVe=e=>{const{symbol:t,hasFuturesChain:s,getFutureExpirations:n}=e,[r,o]=B.useState(!1);j.useEffect(()=>(r&&n(t),()=>{r&&Ks(ts.request)("futuresChainQuotes",te.QUOTES)}),[t,r]);const i=()=>{o(l=>!l),r||Ye({category:Ve.Expansion,action:Le.FuturesChain,label:ks.OpenFuturesChain})};return s?a.jsxs(QVe,{"data-testid":"futures-chain",children:[a.jsx($o,{ariaLabel:"Show Futures",isExpandedDown:r,isHeader:!0,onClick:i,children:a.jsx(ZVe,{children:__("Futures")})}),r?a.jsx(XVe,{}):null]}):null},eWe=e=>({hasFuturesChain:YVe(e)}),tWe=e=>({getFutureExpirations:t=>{e(jme(t))}}),sWe=se(eWe,tWe)(JVe),nWe=e=>{const{symbol:t,rootSymbol:s,displaySymbol:n,deleteNotification:r,isTradeInitiated:o,uncheckAllTrades:i,draftTradeChecked:l,unavailableAccount:c}=e,[d,u]=j.useState(),h=j.useRef(null),p=j.useRef(null),m=j.useRef(null),g=j.useRef(null),[S,T]=Cc(),[y,b]=j.useState(!1),E=n!==void 0?`${Ns(n)} ${__("Trades")}`:"",v=j.useCallback(D=>{D!==null&&u(D)},[u]);return Cn(()=>{o&&(i(t),l(t))}),a.jsx("section",{id:"trade-page",className:"native-scroll",ref:h,style:{transform:"translate(0px, 0px)"},children:a.jsxs("div",{className:"content-section-main",children:[r!==void 0&&a.jsx("div",{"data-testid":"delete-notification",role:"alert","aria-live":"polite",className:"delete-notification",children:r}),a.jsx(vt,{children:a.jsx(Wk,{symbol:t,isSticky:!T})}),a.jsx("div",{ref:S}),a.jsx(vt,{children:a.jsx(RDe,{symbol:t})}),a.jsx(vt,{children:a.jsx(sWe,{symbol:t})}),a.jsx(vt,{children:a.jsx(EDe,{symbol:t})}),a.jsx(vt,{children:a.jsxs("section",{id:"tradeOrderSection",className:"order-builder trade-component",ref:g,children:[a.jsxs("h2",{"data-testid":"trade-header",className:"trade-header","aria-label":E,children:[n," ",__("Trades")]}),c&&a.jsx(Cg,{}),a.jsx(n7e,{}),a.jsxs("section",{className:"trade-table table-wrapper native-scroll",id:"trade-table",ref:m,children:[a.jsx(Vu,{customizableTableName:ko.Trade,topOffset:36,isOpen:y,onClose:()=>b(!1)}),a.jsx(vUe,{symbol:t,isTradeInitiated:o,tradeTableRef:m,containerRef:d,trayPortalRef:p,tradePageRef:h,tradeOrderSectionRef:g,openColumnCustomizationMenu:()=>b(!0),unavailableAccount:c}),!c&&a.jsx($Ve,{symbol:t})]})]})}),a.jsx(vt,{children:a.jsx(_M,{chartId:zs})}),a.jsx("div",{ref:v,className:"dropdownPortal",id:"dropdownPortal"}),a.jsx(vt,{children:a.jsx(Xk,{symbol:s,displaySymbol:n??t})})]})})},rWe=(e,{symbol:t})=>{const s=t!==void 0?e.instruments.get(t):void 0;return{isTradeInitiated:W_(e),displaySymbol:(s==null?void 0:s.displaySymbol)??t,rootSymbol:(s==null?void 0:s.rootSymbol)??t,deleteNotification:e.createTrade.deleteNotification,unavailableAccount:Ic(e)}},oWe={uncheckAllTrades:eg,draftTradeChecked:nR},YM=se(rWe,oWe)(nWe),qM=A.div`
  overflow-y: auto;
  display: flex;
  background-color: var(--page-background);
  flex-direction: column;
  width: 100%;

  #sticky-quotes,
  .symbol-details {
    ${({theme:e})=>e.breakpoints.above(lt.MOBILE_LARGE)} {
      top: 0;
    }
  }
`,aWe=A.section`
  overflow-y: auto;
  overflow-x: hidden;
  overflow-anchor: none;

  width: 100%;
  height: 100%;
  background-color: ${({theme:e})=>e.colors.background.primary};

  margin-top: 16px; // symbol details margin
  ${({numCharts:e})=>e>1&&"margin-top: 16px;"} // charts header margin

  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    margin-top: 0;
  }
`,iWe=A.div`
  background-color: ${({theme:e})=>e.colors.background.primary};
`,lWe=e=>{const{firstChartSymbol:t,uncheckAllTrades:s,draftTradeChecked:n,numCharts:r,chartSelectedSymbol:o,showCharts:i,setShowCharts:l}=e,c=Uu(),d=j.useRef(null),[u,h]=Cc(),[p,m]=j.useState(!1);return j.useEffect(()=>{r===1&&t!==null?(s(t),n(t)):o!==null&&(s(o),n(o))},[t,o]),j.useEffect(()=>{c&&(i||setTimeout(()=>{l(!0)},10))},[i]),a.jsxs(aWe,{id:"charts-page",className:"native-scroll charts-page-container",ref:d,style:{transform:"translate(0px, 0px)"},numCharts:r,children:[r===1&&t!==null&&a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:u}),a.jsx(Wk,{symbol:t,isSticky:!h,setIsCreateAlertSectionOpen:m,setShowCharts:l})]}),i&&a.jsx(iWe,{numCharts:r,className:r>1?"charts-grid-container":"",children:Array(r).fill(0).map((g,S)=>{const T=Ps(S+1);return a.jsx(vt,{children:a.jsx(_M,{chartId:T,isCreateAlertSectionOpen:p},T)},`error-boundary-${T}`)})})]})},cWe=e=>({firstChartSymbol:Ru(e),numCharts:hs(e).size,chartSelectedSymbol:ty(e)}),dWe={uncheckAllTrades:eg,draftTradeChecked:nR},KM=se(cWe,dWe)(lWe),uWe=e=>e.transactions.transactions,hWe=e=>e.transactions.transactionTypes,pWe=e=>e.transactions.showTransactions,mWe=e=>e.transactions.isTransactionsLoading,gWe=e=>e.transactions.showError,SWe=e=>e.transactions.errorMessage,fWe=x(gWe,SWe,(e,t)=>({showError:e,errorMessage:t})),TWe=e=>{var i,l;const t=(i=e.transactions.transactionsSelectedAccount)==null?void 0:i.code,s=sessionStorage.getItem("transactionsSelectedAccount"),n=s?(l=JSON.parse(s))==null?void 0:l.code:null,r=t||n;return Tr(e).find(c=>r===c.code)},zM=x(TWe,GD,Tr,(e,t,s)=>e!==void 0?e:s.find(n=>t===n.code)),XT=({className:e,...t})=>a.jsx("span",{"data-testid":"badge",className:Te("badge",e),...t}),yWe=({filter:e,onOrderBookFilterClick:t,onShowTransactionsClick:s,orderCounts:n,activePage:r})=>a.jsxs("div",{className:"order-book-filter","data-testid":"order-book-filter-container",id:"order-book-filter-container",children:[a.jsxs("button",{role:"radio","data-testid":"working-orders-filter","aria-checked":e===Je.Working,"aria-label":`Display ${n[Je.Working]} Working Orders`,className:"status-filter",onClick:()=>e!==Je.Working&&t(Je.Working),children:[a.jsx("span",{className:"status-wrapper",children:a.jsx("span",{className:"status-flag",children:a.jsxs("span",{"data-testid":"trade-status-label",className:Te("trade-status-label",e===Je.Working&&"trade-status-label--selected"),children:[__("Working")," ",a.jsx(XT,{className:"circled-number--margin-left",children:n[Je.Working]})]})})}),a.jsx("span",{className:Te("indicator",e===Je.Working&&"selected")})]}),a.jsxs("button",{role:"radio","data-testid":"filled-orders-filter","aria-label":`Display ${n[Je.Filled]} Filled Orders`,"aria-checked":e===Je.Filled,className:"status-filter",onClick:()=>e!==Je.Filled&&t(Je.Filled),children:[a.jsx("span",{className:"status-wrapper",children:a.jsx("span",{className:"status-flag",children:a.jsxs("span",{"data-testid":"trade-status-label",className:Te("trade-status-label",e===Je.Filled&&"trade-status-label--selected"),children:[__("Filled")," ",a.jsx(XT,{className:"circled-number--margin-left",children:n[Je.Filled]})]})})}),a.jsx("span",{className:Te("indicator",e===Je.Filled&&"selected")})]}),a.jsxs("button",{role:"radio","data-testid":"cancelled-orders-filter","aria-label":"Display Canceled Orders","aria-checked":e===Je.Cancelled,className:"status-filter",onClick:()=>e!==Je.Cancelled&&t(Je.Cancelled),children:[a.jsx("span",{className:"status-wrapper",children:a.jsx("span",{className:"status-flag",children:a.jsx("span",{"data-testid":"trade-status-label",className:Te("trade-status-label",e===Je.Cancelled&&"trade-status-label--selected"),children:__("Canceled")})})}),a.jsx("span",{className:Te("indicator",e===Je.Cancelled&&"selected")})]}),r===ge.Positions&&a.jsxs("button",{"data-testid":"btn-view-transactions",className:"btn-view-transactions",onClick:s,children:[a.jsx("span",{className:"lbl-view-transactions",children:__("View Transaction History",{namespace:"OrderBook"})}),a.jsx(X,{type:Y.ArrowDropRightAlt,width:8,height:5,viewBox:"8 8 8 8"})]})]}),CWe=x(PO,e=>({[Je.Working]:e.filter(t=>_R.includes(t.status)||t.status===Je.WaitForTrigger&&t.triggerTime!==void 0&&t.groupMarker===Ot.SINGLE).length,[Je.Filled]:e.filter(t=>t.status===Je.Filled).length})),bWe=e=>({filter:e.filters.orderBookFilter,orderCounts:CWe(e)}),EWe=e=>({onOrderBookFilterClick:t=>{e(KTe(t))},onShowTransactionsClick:()=>{e(ws(ge.Transactions))}}),AWe=se(bWe,EWe)(yWe),vWe=e=>{const t=new Map;return e.forEach(s=>{if(s.status===Je.WaitForTrigger&&s.triggerOrderId!==0&&s.unionId!==0&&s.unionId!==void 0){const n=t.get(s.unionId),r={...s,relatedOrders:[]};n===void 0?t.set(s.unionId,[r]):(n.push(r),t.set(s.unionId,n))}}),e.reduce((s,n)=>{if(n.unionId===void 0||n.status===Je.WaitForTrigger&&n.unionId!==0&&n.triggerOrderId!==0)return s;const r=t.get(n.unionId)??[];return s.push({...n,relatedOrders:r}),s},[])},IWe=({column:e,provided:t,snapshot:s,onClick:n,sortDirection:r,areThereOrders:o})=>{const i=s==null?void 0:s.isDragging,l=lC(__(e)),c=sT(e),d=Lm("orderbook",c,r,!0,!0),u=ym({...t.draggableProps,...t.dragHandleProps},["tabIndex","aria-labelledby"]),h=m=>{m.key===we.Enter&&n()},p=a.jsx("td",{"data-testid":"order-book-column-header-td",ref:t.innerRef,className:Te("stick top cell header align-right column-heading",i&&"isDragging"),...u,children:a.jsxs("div",{onClick:n,onKeyDown:h,"aria-live":"polite",tabIndex:0,...d.headerProps,role:"button","data-testid":"header-content",className:"header-content",children:[d.AriaHeaderComponents,a.jsx("span",{"data-testid":"icon-wrapper",className:"icon-wrapper",children:a.jsx(X,{type:Y.Move,width:12,height:6,viewBox:"5 8 12 8",className:"move-icon",dataTestId:"move-icon"})}),a.jsxs("span",{"aria-hidden":!0,"data-testid":`header-text-${l}`,className:"header-text",children:[l,o&&a.jsx(pg,{direction:r})]})]})});return a.jsx(Wu,{portalId:"tr-portal",shouldRenderToPortal:i,children:i?a.jsx("table",{children:a.jsx("thead",{children:a.jsx("tr",{children:p})})}):p})},xWe=e=>{const{columns:t,isChecked:s,onColumnClick:n,columnSort:r,renderCheckbox:o,isCheckboxDisabled:i,areThereOrders:l,handleCheckboxClick:c}=e;return a.jsxs(a.Fragment,{children:[o&&a.jsx("th",{className:"stick top cell corner left order-book__sticky-header",children:a.jsxs("div",{"data-testid":"order-book-column-headers-checkbox-container",className:"checkbox-container center",children:[a.jsx("input",{"data-testid":"order-book-all-checkbox",id:"order-book-all-checkbox","aria-label":`${s?"Uncheck all working orders":"Check all working orders for cancellation"}`,className:Te("checkbox-input",i&&"empty"),type:"checkbox",checked:s,onChange:yr}),a.jsx("span",{onClick:c,"aria-hidden":!0,className:"checkbox"})]})}),t.map((d,u)=>a.jsx(Sl,{draggableId:`${Yp.HEADER}-${d}`,index:u,children:(h,p)=>a.jsx(IWe,{column:d,snapshot:p,provided:h,areThereOrders:l,onClick:()=>n(d),sortDirection:r.column===d?r.direction:Pt.NONE},d)},`${Yp.HEADER}-${d}`))]})},wWe=e=>({renderCheckbox:e.filters.orderBookFilter===Je.Working,isChecked:lVe(e),isCheckboxDisabled:cVe(e)}),OWe={handleCheckboxClick:OSe},RWe=se(wWe,OWe)(xWe),DWe=[Ir.Side,Ir.Pos_Effect,Ir.Qty,Ir.Desc,Ir.Symbol,Ir.TIF,Ir.Mark,Ir.Price,Ir.Status],LWe=e=>DWe.includes(e),_We=e=>{var D,w,N,L;const{order:t,columns:s,isEvenRow:n,renderCheckbox:r,isChecked:o,currentSelectedSymbol:i,orderBookRowDescriptions:l,onSymbolClick:c,onCheckboxClick:d,showFractionalPricing:u,fractionalType:h,showDoubleTickForFractionalPricing:p,activePage:m,numCharts:g}=e,S=()=>i!==t.instrument.rootSymbol&&c(t,m,g),T=P=>{P.preventDefault(),P.stopPropagation(),d(t.orderId)},y=Te("row order-book__row",n?"even":"odd"),b=(((D=t.legs)==null?void 0:D.length)??0)>1,E=a.jsx(ci,{value:(w=t.markValue)==null?void 0:w.value,trend:(N=t.markValue)==null?void 0:N.trend,renderer:u?P=>Fs(P,h,p):xr,ariaHidden:!1}),v=(P,F,O)=>{switch(P){case Ir.Mark:return E;case Ir.Symbol:return F.displaySymbol??F.instrument.rootSymbol;default:return mE(P,F,O,{isMultiLeg:b},u,h,p)}};return a.jsxs(a.Fragment,{children:[a.jsxs("tr",{"data-testid":"order-book__row",className:y,onClick:S,children:[r&&a.jsx("td",{className:"row-header stick left cell",children:a.jsxs("div",{"data-testid":"checkbox-container",className:"checkbox-container center",children:[a.jsx("input",{id:`${t.orderId}-checkbox`,"aria-label":`${o?"Uncheck working order":"Check working order to edit or cancel"}`,className:"checkbox-input",type:"checkbox",checked:o,onChange:yr}),a.jsx("span",{onClick:T,"aria-hidden":!0,className:"checkbox"})]})}),s.map((P,F)=>{const O=mE(P,t,l,{isMultiLeg:b},u,h,p),H=P===Ir.Status&&O.length>40;return a.jsx("td",{className:Te("data cell order-book__cell",F===0&&"order-book__col-1-cell",TS(P),SS(P)&&fS(t.direction),H&&"order-book__cell-wrap-text"),"data-testid":`order-book__cell-${P}`,"aria-label":sT(P),children:v(P,t,l)},P+F)})]}),t.relatedOrders.map(P=>a.jsxs("tr",{className:y,children:[a.jsx("td",{className:"row-header stick left cell"}),s.map((F,O)=>{var H;return LWe(F)?a.jsx("td",{className:Te("data cell order-book__cell",O===0&&"order-book__col-1-cell",TS(F),SS(F)&&fS(P.direction)),"data-testid":"order-book-relatedOrders__cell",children:v(F,P,(H=l.relatedOrders)==null?void 0:H.get(P.orderId))},F):a.jsx("td",{className:"data cell order-book__cell"},F)})]},P.orderId)),b&&((L=t.legs)==null?void 0:L.map((P,F)=>{const O=fS(P.direction);return a.jsxs("tr",{"data-testid":"multi-leg-row",className:y,children:[r&&a.jsx("td",{className:"row-header stick left cell"}),s.map((H,C)=>{var M;return a.jsx("td",{className:Te("data align-right cell order-book__cell",C===0&&"order-book__col-1-cell",TS(H),SS(H)&&O),"data-testid":"multi-leg-row-order-book__cell","aria-label":sT(H),children:xpe(H,P,(M=l.legs)==null?void 0:M[F])},H)})]},F)}))]})},NWe=()=>{const e=BWe();return(t,{order:s})=>{const{showFractionalPricing:n,fractionalType:r}=pn(t,s.instrument.symbol);return{currentSelectedSymbol:El(t),renderCheckbox:t.filters.orderBookFilter===Je.Working,isChecked:t.selected.workingOrders[s.orderId]===!0,orderBookRowDescriptions:e(t,s),showFractionalPricing:n,fractionalType:r,showDoubleTickForFractionalPricing:Vs(vl(t),na(t)),activePage:ms(t),numCharts:hs(t).size}}},PWe=e=>({onSymbolClick:(t,s,n)=>Et.unstable_batchedUpdates(()=>{s===ge.Charts?(e(Ia(Ps(1),t.instrument.rootSymbol)),n===1&&e(ea(t.instrument.rootSymbol))):(e(ws(ge.Trade,t.instrument.rootSymbol)),n===1&&e(ui(Ps(1),t.instrument.rootSymbol))),e({type:f.ClearDeleteNotification})}),onCheckboxClick:t=>e(Hy(t))}),kWe=se(NWe,PWe)(_We),MWe=(e,t)=>{var s;return((s=t.legs)==null?void 0:s.map(n=>{const r=e.instruments.get(n.symbol);if(r===void 0)return;const o=Sg({instrument:r}),i=fg(!1,r);return`${o} ${i}`}))??[]},$We=(e,t)=>t.relatedOrders.reduce((s,n)=>{const r=XM(e,n);return s.set(n.orderId,r),s},new Map),jWe=e=>{const t=e.unionId!==void 0&&e.unionId!==0,s=e.groupId!==void 0&&e.groupId!==0;return e.status===Je.WaitForTrigger&&(t||s)},XM=(e,t)=>{var d,u,h,p;const s=(((d=t.legs)==null?void 0:d.length)??0)>1,n=jWe(t),o=(vw(t.orderType)?Dy(t.priceType):"")??"",i=n?void 0:$We(e,t),l=t.groupMarker,c=l===void 0||n||l===Ot.SINGLE?"":` [${dc(l)}]`;if(s){const m=t.spreadName,g=(u=t.legs)==null?void 0:u.reduce((v,D)=>{const w=e.instruments.get(D.symbol);return w!==void 0&&w.type===k.OPTION?[...v,w.strike]:v},[]),S=(h=t.legs)==null?void 0:h.reduce((v,D)=>{const w=e.instruments.get(D.symbol);return w!==void 0&&w.type===k.OPTION?[...v,w.daysToExpiration]:v},[]),T=e.instruments.get(t.instrument.symbol),y=m===nt.FUTURES_CALENDAR?((p=t.legs)==null?void 0:p.map(v=>v.symbol))??[]:[];return{topLevel:`${L_(s,g,S,m,T,y)} ${o} ${c}`,legs:MWe(e,t),relatedOrders:i}}else{const m=t.instrument.symbol,g=e.instruments.get(m);if(g===void 0)return{topLevel:void 0,legs:[],relatedOrders:i};const S=Sg({instrument:g}),T=fg(!1,g);return{topLevel:`${S} ${T} ${o} ${c}`,legs:[],relatedOrders:i}}},BWe=()=>Nn((e,t)=>XM(e,t),e=>e),FWe=e=>{switch(e){case Je.Working:return"working";case Je.Filled:return"filled";case Je.Cancelled:return"canceled";default:return""}},HWe=e=>{const{currentFilter:t}=e;return a.jsx("div",{"data-testid":"order-book__empty-table-state",className:"order-book__empty-table-state",children:__(`You do not currently have any ${FWe(t)} orders.`)})},UWe=e=>({currentFilter:e.filters.orderBookFilter}),VWe=se(UWe)(HWe),WWe=(e,t)=>t===__("All Accounts")?e:e.filter(n=>n!==Ir.Account),GWe=e=>{const{orders:t,selectedAccount:s,allAccounts:n}=e,[r,o]=Lo(sn.ORDER_BOOK_COLUMN_SET,vpe,Ipe),[i,l]=Lo(sn.ORDER_BOOK_COLUMN_SORT,Ape,Ope),c=WWe(r,s.description);t.forEach(m=>{const g=n.find(S=>S.code===m.accountCode);g!==void 0&&(m.accountCode=g.description)});const d=vWe(t),u=t.length>0,h=m=>{const{source:g,destination:S}=m;co(S)||co(g)||S.index!==g.index&&o(T=>aM(T,g.index,S.index))},p=j.useCallback(m=>u&&l(g=>({column:m,direction:g.column===m?Ly(g.direction):Pt.ASCENDING})),[l,t]);return a.jsxs(a.Fragment,{children:[a.jsxs("table",{className:Te("ryan-grid positions-table",t.length===0&&"order-book__table--empty"),children:[a.jsx(fl,{onDragEnd:h,nonce:Mc(),children:a.jsx("thead",{children:a.jsx(wa,{droppableId:Yp.HEADER,direction:"horizontal",children:m=>a.jsxs("tr",{...m.droppableProps,ref:m.innerRef,className:"table-header",children:[a.jsx(RWe,{columns:c,onColumnClick:p,columnSort:i,areThereOrders:u,"data-testid":"orderBookTableHeaders"}),m.placeholder]})})})}),a.jsx("tbody",{children:u&&wpe(d,i.column,i.direction).map((m,g)=>a.jsx(kWe,{order:m,columns:c,isEvenRow:g%2===0},m.id))})]}),t.length===0&&a.jsx(VWe,{})]})},YWe=x(PO,e=>e.filters.orderBookFilter,(e,t)=>{let s;switch(t){case Je.Cancelled:{s=n=>n.status===Je.Cancelled||n.status===Je.Rejected||n.status===Je.Expired;break}case Je.Working:{s=n=>_R.includes(n.status)||n.status===Je.WaitForTrigger;break}default:s=n=>n.status===t}return e.filter(s)}),qWe=x(Ai,bn,YWe,(e,t,s)=>s.map(n=>{var o,i;const r=(n==null?void 0:n.legs)!==void 0&&n.legs.length>1;return(n==null?void 0:n.compositeSymbol)!==void 0?{...n,markValue:(o=e.get(n==null?void 0:n.compositeSymbol))==null?void 0:o.trendingMark,displaySymbol:(i=t.get(r?n==null?void 0:n.instrument.rootSymbol:n==null?void 0:n.instrument.symbol))==null?void 0:i.displaySymbol}:{...n,markValue:void 0,displaySymbol:void 0}})),KWe=e=>({orders:qWe(e),selectedAccount:Tl(e),allAccounts:Tr(e)}),zWe=se(KWe,null,null,{areStatePropsEqual:fs})(GWe),XWe=({onShowTransactionsClick:e,activePage:t})=>{const[s,n]=Lo(sn.ORDER_BOOK_EXPANDED,Xe.is,!1),r=()=>n(o=>!o);return a.jsxs("div",{className:"order-book","data-testid":"order-book",children:[a.jsx("div",{className:Te("portfolio-subheading-container",s&&"portfolio-subheading-container--expanded"),children:a.jsx($o,{isExpandedDown:s,isHeader:!0,needsPadding:!0,onClick:r,children:a.jsx("h2",{"data-testid":"portfolio-subheading",className:"portfolio-subheading",children:__("Activity")})})}),s&&a.jsxs(a.Fragment,{children:[a.jsx(AWe,{activePage:t}),a.jsx("div",{"data-testid":"order-book-table-container",className:"order-book-table-container native-scroll in-app-scrollbar",children:a.jsx(zWe,{})}),a.jsxs("button",{"data-testid":"mobile-btn-view-transactions",className:"mobile-btn-view-transactions",onClick:e,children:[a.jsx("span",{className:"mobile-lbl-view-transactions",children:__("View Transaction History",{namespace:"OrderBook"})}),a.jsx(X,{type:Y.ArrowDropRightAlt,width:8,height:5,viewBox:"8 8 8 8"})]})]})]})},QWe=e=>({onShowTransactionsClick:()=>{e(ws(ge.Transactions))}}),ZWe=se(null,QWe)(XWe),JWe=e=>({orderIds:FM(e)}),eGe=e=>({cancelOrder(t){e(Vme(t))}}),tGe=se(JWe,eGe)(UM),sGe=(e,t="")=>{const s=`${e} ${__("Selected")} ${t}`,n=t,r=`${e} ${__("Selected")}`;return a.jsxs("section",{className:"section center-vertically","aria-label":s,children:[a.jsx("header",{className:"selected-trades-count",children:r}),e===1&&n.length>0&&a.jsx("div",{className:"confirmation-mark",children:a.jsx("p",{"data-testid":"summary-text",children:n})})]})};class QM extends B.PureComponent{render(){const{orderSummary:t,checkedTradesCount:s=0,editOrderBookSelectedWorkingOrder:n,selectedWorkingOrder:r,selectedSymbol:o,orderBookWorkingOrdersContainsMutualFund:i,activePage:l}=this.props,c={className:"confirmation-tray",checkedTradesCount:s,orderSummary:t,editOrderBookSelectedWorkingOrder:n,selectedWorkingOrder:r,selectedSymbol:o,orderBookWorkingOrdersContainsMutualFund:i,activePage:l};return s>0?a.jsx(nGe,{...c}):null}}R(QM,"defaultProps",{orderSummary:""});const BI=480,nGe=e=>{const{className:t,classNameOnSticky:s,checkedTradesCount:n,orderSummary:r,editOrderBookSelectedWorkingOrder:o,selectedWorkingOrder:i,selectedSymbol:l,orderBookWorkingOrdersContainsMutualFund:c,activePage:d}=e,[u,h]=j.useState(!1),p=j.useCallback(m=>{m.clientWidth>BI&&u?h(!1):m.clientWidth<=BI&&!u&&h(!0)},[u]);return a.jsx(Da,{onResize:p,children:a.jsxs("section",{"data-testid":"alert-section",role:"alert","aria-live":"polite",className:Te(t,!!l&&"flexWrap",s),children:[sGe(n,r),a.jsxs("section",{className:"review-buttons-box section",children:[a.jsx(tGe,{dense:u,disabled:c}),i!==void 0&&a.jsx(VM,{symbol:i.instrument.symbol,workingOrderId:i.orderId,dense:u,disabled:c,editWorkingOrder:(m,g)=>()=>{o(m,g,i.instrument.rootSymbol,l,d),Ye({category:Ve.Trade,action:Le.EditSelected,label:ks.EditOrderFromPortfolioPage})}})]})]})})},rGe=e=>({selectedWorkingOrder:aVe(e),orderSummary:iVe(e),checkedTradesCount:jM(e),selectedSymbol:mt(e),orderBookWorkingOrdersContainsMutualFund:pVe(e),activePage:ms(e)}),oGe=e=>({editOrderBookSelectedWorkingOrder:(t,s,n,r,o)=>{Et.unstable_batchedUpdates(()=>{(r!==n||o!==ge.Trade)&&e(ws(ge.Trade,n)),e(wSe(t,s,n))})}}),aGe=se(rGe,oGe)(QM),FI=[{fieldName:"execTime",displayName:"Execution Time",headerClass:"cell_content-left",bodyClass:"leftAlign"},{fieldName:"type",displayName:"Type",headerClass:"cell_content-left",bodyClass:"leftAlign narrow-field"},{fieldName:"description",displayName:"Description",headerClass:"cell_content-left",bodyClass:"leftAlign"},{fieldName:"miscFees",displayName:"Misc Fees",headerClass:"cell_content-right",bodyClass:"narrow-field"},{fieldName:"commissionsAndFees",displayName:"Commissions & Fees",headerClass:"cell_content-right",bodyClass:""},{fieldName:"amount",displayName:"Amount",headerClass:"cell_content-right",bodyClass:""},{fieldName:"balance",displayName:"Balance",headerClass:"cell_content-right",bodyClass:""}],iGe=A.div`
  overflow: hidden;

  thead {
    td {
      white-space: nowrap;
      background-color: ${({theme:e})=>`${e.colors.background.primary}`};

      &:first-child {
        background-color: ${({theme:e})=>`${e.colors.background.primary} !important`};
      }
    }
  }

  .cell_content-left {
    justify-content: flex-start !important;
  }

  .cell_content-right {
    justify-content: flex-end !important;
    text-align: right;
  }

  .leftAlign {
    text-align: left;
  }

  .narrow-field {
    min-width: 60px !important;
  }

  h1 {
    display: inline-block;
    margin-right: ${({theme:e})=>e.space.large};
  }

  tbody {
    td {
      white-space: nowrap;
      min-width: 130px;

      &:first-child {
        min-width: 190px;
        ${({theme:e})=>e.breakpoints.below(lt.DESKTOP_SMALL)} {
          min-width: 130px;
        }
      }
    }
  }
`,lGe=A.div`
  width: 100%;
  padding-left: 6px;
  font-size: ${({theme:e})=>e.fontSizes.small};
`,cGe=A.div`
  width: 300px;
  display: inline-block;
  ${({theme:e})=>e.breakpoints.below(lt.TABLET_SMALL)} {
    margin-bottom: ${({theme:e})=>e.space.medium};
  }
`,dGe=A(tt)`
  display: inline-block;
  padding: 6px;
  align-items: center;
  text-align: left;
  font-size: ${({theme:e})=>e.fontSizes.small};
  color: ${({theme:e})=>`${e.colors.action.focus}`};
`,uGe=A.div`
  width: 100%;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  margin-bottom: ${({theme:e})=>e.space.medium};
  padding-right: 6px;
`,hGe=A(Be)`
  align-items: center;
  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    width: 100%;
  }
`,pGe=e=>a.jsx(Ei,{"data-testid":"transactions-account-dropdown",variant:Pe.primary,isDisabled:e.disabled,values:e.accounts,getListItemKey:t=>t.code,onListItemClick:e.selectAccount,renderListItemContent:t=>a.jsx(hg,{account:t,formatAccount:e.formatAccount}),selectedItemIndex:e.accounts.findIndex(t=>{var s;return t.code===((s=e.selectedAccount)==null?void 0:s.code)}),renderAnchorButtonContent:()=>e.selectedAccount&&a.jsx("div",{children:Ra(e.selectedAccount)}),anchorAriaLabel:"select account"}),mGe=e=>({selectAccount:t=>e(Jde(t))}),gGe=e=>{const t=zM(e);return{accounts:Tr(e),selectedAccount:t}},SGe=se(gGe,mGe)(pGe),fGe=({isConnected:e,selectedTransactionsSymbol:t,onTransactionsSymbolSelect:s,transactionsSymbolsLoading:n,transactionsSearchSymbols:r,searchForTransactionsSymbol:o})=>{const i=r,l="No results for ${searchValue}",c=__(l),[d,u]=B.useState(t),[h,p]=B.useState(!1),[m,g]=B.useState(!1);B.useEffect(()=>{d!==""&&o(d)},[d]);const S=({displaySymbol:O,description:H})=>a.jsxs(Ky,{children:[a.jsx(zy,{children:a.jsx(mi,{"data-testid":"highlight",pattern:d,children:O})}),a.jsx(Xy,{children:a.jsx(mi,{"data-testid":"highlight-description",pattern:d,children:H})})]}),T=O=>{const H=O.target.value.toUpperCase();H!==" "&&u(H),m||g(!0)},y=()=>{s(d)},b=O=>{switch(O.key){case we.ArrowRight:case we.ArrowLeft:case we.Enter:{O.stopPropagation();break}case we.ArrowDown:case we.ArrowUp:O.stopPropagation(),p(!0)}},E=()=>{r.length&&g(!0),p(!1)},v=O=>{O.preventDefault(),g(!1),s(d)},D=()=>a.jsxs(ig,{id:"transactions-symbol-search-form",role:"search",autoComplete:"off",onSubmit:v,children:[a.jsx(ag,{"aria-labelledby":"transactions-symbol-search-form","aria-label":__("Find a transactions symbol"),id:"transactions-symbol-search-input",onKeyDown:b,onChange:T,onBlur:y,onFocus:E,value:d,placeholder:__("Find a Symbol")}),a.jsx(lg,{"aria-hidden":!0,children:a.jsx(X,{type:Y.SymbolSearch,width:18,height:18,viewBox:"1 1 20 20",dataTestId:"symbol-search-icon"})}),n&&e&&a.jsx(cg,{})]}),w=()=>d!==""&&!n&&i.length<=0?a.jsx(qy,{role:"alert","aria-live":"polite",children:a.jsx(Qy,{"aria-label":gi(l,d),children:gi(c,d)})}):null,N={popperOptions:{modifiers:[{name:"sameWidth",enabled:!0,fn:({state:O})=>{O.styles.popper.width=`${O.rects.reference.width}px`},phase:"beforeWrite",requires:["computeStyles"],effect:({state:O})=>{O.elements.popper.style.width=`${O.elements.reference.clientWidth}px`}}]}},L=O=>{u(O.symbol),g(!1),s(O.symbol)},P=j.useRef(null);$a(P,()=>{g(!1),s(d)});const F=O=>{(O.key===we.Esc||O.key===we.Tab)&&(O.stopPropagation(),g(!1))};return a.jsx("div",{ref:P,onKeyDown:F,children:a.jsx(Yy,{"data-testid":"transactions-symbol-search-dropdown",variant:Pe.secondary,renderHeader:w,renderAnchorButtonContent:D,values:d!==""?i:[],selectedItemIndex:-1,width:0,getListItemKey:O=>O.symbol,onListItemClick:L,renderListItemContent:S,anchorAriaLabel:"Transactions Search Symbol",symbolSearchId:"transactions-symbol-search-input",isForceOpened:m,isFocusOnList:h,...N})})},TGe=e=>({isConnected:Ol(e),transactionsSymbolsLoading:e.symbolSearch.transactionsSymbolsLoading,transactionsSearchSymbols:e.symbolSearch.transactionsSearchSymbols}),yGe=e=>({searchForTransactionsSymbol(t){e(Pfe(t))}}),CGe=se(TGe,yGe)(fGe),bGe=A.div`
  padding: 16px;
  padding-bottom: 2px;
  border-top-left-radius: ${Zo}px;
  border-top-right-radius: ${Zo}px;
`,EGe=A.h2`
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 16px;
`,AGe=A.div`
  margin-bottom: 16px;
`,vGe=A.div`
  margin-left: 19px;
`,Sf=A.div`
  label {
    font-size: 14px;
    font-weight: 500;
  }
  margin-top: 14px;
`,IGe=A.div`
  font-size: 14px;
  font-weight: 500;
  margin-top: 14px;
`,ZM=A.div`
  display: flex;
  align-items: center;
  font-size: ${({theme:e})=>e.fontSizes.medium};
`,HI=A.div`
  margin: ${({theme:e})=>`${e.space.xxSmall} 0`};
`,xGe=A(tt)`
  padding: 3px 24px 4px 24px;
  font-weight: normal;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  background-color: ${({theme:e,disabled:t})=>t?oe.GRAY_STONE:e.colors.border.secondary};
  border: ${({theme:e})=>`${e.shape.borderWidth.secondary}px solid ${e.colors.text.primary}`};
  border-radius: 15px;
  color: ${({theme:e})=>e.colors.text.tertiary};
  margin-left: ${({theme:e})=>e.space.xxSmall};
  ${({theme:e})=>({"&:disabled":{border:`${e.shape.borderWidth.secondary}px solid ${e.colors.text.primary}`,color:e.colors.text.tertiary}})}
`,wGe=A.div`
  display: flex;
  align-items: center;
  margin-top: 4px;
  margin-bottom: 10px;
  margin-left: -8px !important;
`,OGe=A.span`
  margin: 0 ${({theme:e})=>`${e.space.xSmall}`};
`,RGe=A(Ei)`
  display: inline-block;
  width: 110px;
  margin-left: ${({theme:e})=>e.space.small};
  ${Zw} {
    font-size: ${({theme:e})=>e.fontSizes.medium};
  }
`,DGe=e=>{var s;const t=((s=e.selectedItem)==null?void 0:s.label)===Dp?[e.selectedItem,...Lp]:Lp;return a.jsx(RGe,{"data-testid":"transactions-timerange-dropdown",variant:Pe.secondary,values:t,getListItemKey:n=>n.label,onListItemClick:e.selectTimeRange,renderListItemContent:n=>__(n.label,{namespace:"Transactions"}),selectedItemIndex:t.findIndex(n=>n.label===e.selectedItem.label)??0,renderAnchorButtonContent:()=>a.jsx("div",{children:__(e.selectedItem.label,{namespace:"Transactions"})}),anchorAriaLabel:"time range filter"})},LGe=wc.below(lt.TABLET_SMALL),_Ge=bm(e=>({root:{borderRadius:"4px",position:"relative",fontSize:"1.4rem",width:"100%"},input:{width:"100%",maxWidth:"120px",height:"20px !important",boxSizing:"border-box",fontFamily:"TDASans, sans-serif",padding:"0 0 0 8px","&:focus":{border:"none !important"},"&::-webkit-calendar-picker-indicator":{display:"none"}},[LGe]:{input:{height:"32px !important"}}}))(u1),NGe=A.div`
  display: flex;
  border-radius: 4px;

  ${({theme:{colors:e,shape:t}})=>Ms({variants:{[Pe.primary]:{border:`${t.borderWidth.primary}px solid ${e.icon.primary}`},[Pe.secondary]:{border:`${t.borderWidth.primary}px solid ${e.border.primary}`}}})}
`,PGe=e=>e.seconds(0).milliseconds(0),kGe=et().subtract(rw,"years"),MGe=et(new Date),$Ge=(e,t,s,n,r,o)=>i=>{const l=JM(i.currentTarget.value);if(l&&et(l).isBetween(kGe,MGe)){const c=PGe(l);n(c),o(c),r(c)}else n(s)},JM=e=>{const t=/^\d{4}-\d{2}-\d{2}$/;if(!e||e.match(t)===null)return;const[s,n,r]=e.split("-"),o=et(new Date);return o.set("month",Number(n)-1),o.set("date",Number(r)),o.set("year",Number(s)),o.isValid()&&Number(s)>0?o:void 0},jGe=e=>{const{value:t,anchorId:s,ariaLabel:n,onUpdate:r,colorVariant:o,isCalendarOpen:i}=e,[l,c]=j.useState(et(t)),[d,u]=j.useState(et(t)),h=j.useMemo(()=>{const m=`${l.get("month")+1}`.padStart(2,"0"),g=l.get("date").toString().padStart(2,"0");return`${l.get("year").toString().padStart(4,"0")}-${m}-${g}`},[l]);B.useEffect(()=>{c(et(t))},[t]);const p=j.useCallback($Ge(t,l,d,c,u,r),[[t,l,d,c,u,r]]);return a.jsx(NGe,{"data-testid":"date-range-picker",variant:o,children:a.jsx(_Ge,{type:"date",required:!0,id:s,inputProps:{"aria-label":`${n} Input`},value:h,color:o,onBlur:p,onChange:m=>{const g=JM(m.currentTarget.value);g&&c(g)},onClick:m=>{m.target.nodeName==="INPUT"&&(i||m.stopPropagation())},endAdornment:a.jsx(Be,{role:"button",tabIndex:0,pr:"10px",style:{cursor:"pointer"},"aria-label":"Open Calendar Widget",onKeyDown:m=>{m.key===we.Enter&&m.stopPropagation()},children:a.jsx(X,{type:Y.Calendar,width:18,height:18,viewBox:"1 1 20 20",dataTestId:"calender-icon"})})},s)})},UI=j.memo(jGe),BGe=A.div`
  color: ${({theme:{colors:e},day:t,maxDate:s,minDate:n})=>t.getTime()<=s.getTime()&&t.getTime()>=n.getTime()?e.text.primary:e.text.secondary};
`,FGe=A(Be)`
  padding: ${({theme:e})=>e.space.small};
  align-items: center;
  justify-content: space-between;
`,HGe=A.div`
  width: 100%;
  margin-right: 16px;
  font-weight: normal;
`,UGe=A(xGe)``,VGe=e=>function(){return a.jsx(ZM,{children:e})},WGe=e=>{const[t,s]=B.useState({...e.range,key:"selection"}),[n,r]=B.useState(!1),[o,i]=B.useState(!0);B.useEffect(()=>{s({...e.range,key:"selection"})},[e.range]),B.useEffect(()=>{if(n){const b=document.querySelector(".rdrPprevButton"),E=document.querySelector(".rdrNextButton"),v=document.querySelector(".rdrMonthPicker > select"),D=document.querySelector(".rdrYearPicker > select");b==null||b.setAttribute("aria-label","Previous Month"),E==null||E.setAttribute("aria-label","Next Month"),v==null||v.setAttribute("aria-label","Month Selector"),D==null||D.setAttribute("aria-label","Year Selector");const w=gS({selection:{...t}});i(w)}},[n]);const l=window.innerWidth<=Es.MOBILE_LARGE,c=new Date,d=J5(new Date,-rw),u=t.startDate&&`Beginning transaction history date ${ll(t.startDate)}`,h=t.endDate&&`Ending transaction history date ${ll(t.endDate)}`,p=b=>{const E=gS(b);i(E),E&&s(b.selection)},m=(b,E)=>{const v=E?b.toDate():t.startDate,D=E?t.endDate:b.toDate();s({...t,startDate:v,endDate:D}),e.onClose({startDate:v,endDate:D})},g=()=>{r(!1);const b=gS({selection:{...t}});if(i(b),b){const E=t.startDate,v=t.endDate;return Zhe({selection:{...t}})?e.onClose({startDate:v,endDate:E}):e.onClose({startDate:E,endDate:v})}},S=a.jsx(wGe,{children:a.jsxs(h1,{utils:p1,locale:et.locale(),children:[a.jsx(UI,{value:t.startDate?et(t.startDate):et(new Date),anchorId:"start-date-field",label:u||"start date",ariaLabel:u||"start date",iconFillColor:"action.disabled",onUpdate:b=>m(b,!0),colorVariant:"secondary",isCalendarOpen:n}),a.jsx(OGe,{children:__("to",{namespace:"Transactions"})}),a.jsx(UI,{value:t.endDate?et(t.endDate):et(new Date),anchorId:"end-date-field",label:h||"end date",ariaLabel:h||"end date",iconFillColor:"action.disabled",onUpdate:b=>m(b,!1),colorVariant:"secondary",isCalendarOpen:n})]})}),T=()=>a.jsx(nH,{months:2,direction:l?"vertical":"horizontal",editableDateInputs:!0,minDate:d,maxDate:c,rangeColors:[oe.FRENCH_SKY_BLUE],ranges:[t],calendarFocus:"forwards",dayContentRenderer:b=>a.jsx(BGe,{day:b,minDate:d,maxDate:c,children:e3(b,"d")}),dateDisplayFormat:"MM/dd/yyyy",onChange:p}),y=()=>function(E){const{setIsVisible:v}=E;return a.jsxs(FGe,{children:[a.jsx(HGe,{children:o?null:a.jsx(vi,{warnings:[__("The date range selected must be no more than 370 days.",{namespace:"Transactions"})]})}),a.jsx(UGe,{id:"date-range-done",onClick:()=>{g(),v(!1)},disabled:!o,children:__("Done")})]})};return a.jsx(JC,{renderAnchorButtonContent:VGe(S),"data-testid":"date-range",placement:"bottom",renderContent:T,offset:l?-310:5,onClose:g,onAnchorClick:b=>{r(!b)},renderFooter:y(),getFooterBackgroundColor:b=>b.background.secondary})},VI=[{id:Gr.TRADE,label:"Trades"},{id:Gr.DEPOSIT,label:"Deposits"},{id:Gr.WITHDRAWAL,label:"Withdrawals"},{id:Gr.TRANSFER,label:"Transfers"},{id:Gr.DIVIDENDS_OR_INTEREST,label:"Dividends or Interest"},{id:Gr.START_OF_THE_DAY_BALANCE,label:"Start of day balances"},{id:Gr.MARKING_TO_MARKET,label:"Mark to Market"}],GGe=e=>function(){return a.jsxs(ZM,{children:[a.jsx(X,{type:Y.Filter,viewBox:"-1 -1 27 27",dataTestId:"filter-icon"}),e]})},YGe=e=>{const{transactionsFilter:t,selectedTimeRange:s,account:n,selectedTransactionsSymbol:r,getTransactions:o,onRangeSelect:i,onTransactionsSymbolSelect:l}=e,c=B.useRef(null),[d,u]=B.useState(s),[h,p]=B.useState(t),[m,g]=B.useState(r),{startTime:S,endTime:T}=d.range;B.useEffect(()=>{p(t)},[t,p]),B.useEffect(()=>{b(h)()},[h,m,d]);const b=((C,M,q)=>W=>()=>{const{startTime:z,endTime:re}=M.range,ae=M.label===Dp?M:M.label;return cj(ae),i(M),dj(q),l(q),o(C,z,re,W,q)})(n,d,m),E=()=>{p(t),u(s)},v=B.useCallback(C=>M=>{if(M.currentTarget.checked)p([...h,C]);else{const W=h.findIndex(ae=>ae===C),z=h.slice(0,W),re=h.slice(W+1);p([...z,...re])}},[p,h]),D=B.useCallback(C=>{const M=C.currentTarget.checked;p(M?el:[])},[p]),w=new Date(S),N=new Date(T),L=C=>{const M=C.startDate,q=C.endDate;if(!M||!q)return;const W={label:Dp,range:{startTime:M.toISOString(),endTime:q.toISOString()}};u(W)},P=()=>a.jsxs(bGe,{ref:c,children:[a.jsx(EGe,{children:__("Filters",{namespace:"Transactions"})}),a.jsxs(AGe,{children:[a.jsxs(Sf,{children:[a.jsx("label",{children:__("Last",{namespace:"Transactions"})}),a.jsx(DGe,{selectTimeRange:u,selectedItem:d})]}),a.jsxs(Sf,{children:[a.jsx("label",{children:__("Time Range",{namespace:"Transactions"})}),a.jsx(WGe,{range:{startDate:w,endDate:N},onClose:L})]}),a.jsxs(IGe,{children:[a.jsx(ds,{mb:2,children:__("Symbol")}),a.jsx(CGe,{onTransactionsSymbolSelect:g,selectedTransactionsSymbol:m})]}),a.jsxs(Sf,{children:[a.jsx("label",{htmlFor:"transactions-all",children:__("Type",{namespace:"Transactions"})}),a.jsx(HI,{children:a.jsx(Mn,{id:"transactions-all",label:__("Select All",{namespace:"Transactions"}),ariaLabel:"Select All Transactions",isChecked:h.length===VI.length,onChange:D})}),a.jsx(vGe,{"data-testid":"transactions-filter-types-list",children:VI.map(C=>a.jsx(HI,{children:a.jsx(Mn,{id:C.id,label:__(C.label,{namespace:"Transactions"}),ariaLabel:`Select ${C.label}`,isChecked:h.find(M=>M===C.id)!==void 0,onChange:v(C.id)})},C.id))})]})]})]}),F=h.length,O=F===el.length?__("Filter",{namespace:"Transactions"}):`${__("Filters Applied",{namespace:"Transactions"})} (${F})`,H=window.innerWidth<=Es.MOBILE_LARGE;return a.jsx(JC,{renderAnchorButtonContent:GGe(O),"data-testid":"transactions-filter",placement:"bottom-end",renderContent:P,offset:H?-50:5,width:347,onClose:E,onAnchorClick:E})},qGe=j.memo(YGe),KGe=e=>({getTransactions:(t,s,n,r,o)=>{ij(r),e(BR(t,s,n,r,o))}}),zGe=se(null,KGe)(qGe),XGe=({account:e,onHideTransactionsClick:t,getTransactions:s,transactions:n,transactionTypes:r,isTransactionsLoading:o,showError:i,errorMessage:l})=>{const c=lj(),d=uj()??"",u=tD(c),[h,p]=B.useState(u),[m,g]=B.useState(d),S=B.useRef(null);B.useEffect(()=>{const{startTime:L,endTime:P}=h.range;s(e,L,P,r,m)},[e]);const T=()=>a.jsx("thead",{className:"-head common-table__head",children:a.jsx("tr",{className:"common-table__row",children:FI.map((L,P)=>a.jsx("td",{className:"common-table__cell",children:a.jsx("span",{className:`common-table__header-cell ${L.headerClass}`,children:__(L.displayName,{namespace:"Transactions"})})},`${P}${L.fieldName}`))})}),y=({index:L,data:P})=>{const F=P[L],O=L%2===0?"-odd common-table__row":"-even transactions-account-dropdown common-table__row";return a.jsx("tr",{className:O,children:FI.map((H,C)=>a.jsx("td",{className:`common-table__cell ${H.bodyClass}`,children:F==null?void 0:F[H.fieldName]},`${L}c${C}`))},L)},b=h.label===Dp,E=h.label===Wo.YTD,v=!o&&!i&&n.length===0,D=!o&&i,w=j.useRef(!1);Cn(()=>(w.current=!0,()=>{w.current=!1}));const{height:N=0}=Bm({ref:S},w)??{height:0};return a.jsxs(iGe,{children:[a.jsxs("div",{ref:S,children:[a.jsxs("div",{children:[a.jsx("h1",{children:__("Transaction History",{namespace:"Transactions"})}),a.jsx(cGe,{children:a.jsx(SGe,{disabled:!1,formatAccount:Ra})})]}),a.jsxs(uGe,{children:[a.jsx(dGe,{"data-testid":"back-to-positions",onClick:t,children:__("Back to Positions",{namespace:"Transactions"})}),a.jsxs(hGe,{children:[a.jsx(lGe,{"data-testid":"transactions-period",children:`${__(`Displaying ${E||b?"":"Last "}`,{namespace:"Transactions"})}${b?`${ll(new Date(h.range.startTime))} ${__("to",{namespace:"Transactions"})} ${ll(new Date(h.range.endTime))}`:__(h.label,{namespace:"Transactions"})}`}),a.jsx(zGe,{account:e,selectedTimeRange:h,transactionsFilter:r,onRangeSelect:p,selectedTransactionsSymbol:m,onTransactionsSymbolSelect:g})]})]})]}),o?a.jsx("div",{className:"loader","data-testid":"loading",children:__("Transactions history is loading.",{namespace:"Transactions"})}):a.jsx(nM,{header:T,row:y,Tbody:Fn.body,tBodyProps:{},tableProps:{id:"transactions_table",className:"common-table__table"},sortingRule:null,itemSize:26,itemData:zhe(n),itemCount:n.length,overscanCount:1,height:Xhe({itemCount:n.length,selector:"section#transactions",headerHeight:N}),width:"auto"}),v&&a.jsx(ot,{as:"div",textAlign:"center",i18nOptions:{namespace:"Transactions"},"data-testid":"no-transactions-msg",children:"You do not have any transactions that meet these criteria."}),D&&a.jsx(ot,{as:"div",textAlign:"center","data-testid":"transactions-error",children:l?__(l.replace("startTime must be before endTime","The start date of your range must be before the end date"),{namespace:"Transactions"}):"An error occurred. Please try again."})]})},QGe=e=>{const t=zM(e),s=(t==null?void 0:t.code)??"",n=uWe(e),r=hWe(e),o=mWe(e),{showError:i,errorMessage:l}=fWe(e);return{account:s,transactions:n,transactionTypes:r,isTransactionsLoading:o,showError:i,errorMessage:l}},ZGe=e=>({onHideTransactionsClick:()=>{e(ws(ge.Positions))},getTransactions:(t,s,n,r,o)=>{e(BR(t,s,n,r,o))}}),JGe=se(QGe,ZGe)(XGe),eYe=e=>{const t=yIe(e),s=[],n=[];return t.forEach(r=>{const o=hC(r),i=Nn(o,T=>T),l=T=>x(i,y=>y.filter(b=>b.status===de.Completed&&b.symbol===T)),c=T=>x(i,y=>y.filter(b=>b.status!==de.Completed||b.symbol!==T)),d=l(r),u=c(r),h=d(e),p=u(e);ZO(r)(e).find(T=>T.type===k.OPTION&&T.inTheMoney!==void 0&&T.inTheMoney>0)&&n.push(r),(h.length>1||p.length>0)&&s.push(r)}),{symbols:t,columns:yDe(e),condensed:mt(e)!==null,columnSort:pC(e),expandableSymbols:s,inTheMoneySymbols:n}},tYe=e=>({setColumns(t){e(Ll("position",t))},setColumnSort(t){e(Zj(ko.Position,t))}}),sYe=se(eYe,tYe)(OIe),nYe=A(yC)`
  align-items: center;

  & span {
    display: inline-flex;
  }
`,rYe=({tradeableAccountsDesc:e,handleClick:t})=>{const s=`The following accounts are included in this view: ${e}`;return a.jsx(nYe,{ariaLabel:s,handleClose:t,dataTestId:"tradeable-account-banner",children:a.jsxs("span",{children:[__("The following accounts are included in this view"),`: ${e}`]})})},oYe=A.ul`
  list-style: none;
  padding: 0;
  margin: 8px 0 0 -4px;

  & li {
    padding: 4px 0 0;
  }

  & > li:first-child {
    padding-left: 23px;
    padding-bottom: 4px;
  }
`,WI={[Vi.Qty]:"Qty",[Vi.Mark]:"Mark",[Vi.MarkChangeDollar]:"Mark Chng $",[Vi.MarkChangePercentage]:"Mark Chng %",[Vi.ITM]:"ITM"},aYe=e=>{const t=Ar(),{onBackToColumnCustomizationMenu:s,isOpen:n,onClose:r,topOffset:o}=e,[i,l]=Lo(sn.SYMBOL_INFO,c7,eu),c=()=>{l(eu),t(kie())},d=()=>{const m=Object.keys(i).reduce((g,S,T,y)=>(g+=`${WI[S]}:${i[S]?"On":"Off"}${T===y.length-1?"":";"}`,g),"");Ye({category:Ve.PositionsSettings,action:Le.CloseSymbolInfoCustomization,label:m})},u=j.useCallback(()=>{r(),d()},[r,d]),h=j.useCallback(()=>{s(),d()},[s,d]),p=(m,g)=>{l(S=>({...S,[m]:g})),t(Pie(m,g))};return a.jsx("div",{"data-testid":"edit-symbol-info-overlay",children:a.jsxs(Ii,{isOpen:n,title:"Edit Symbol Info",onClose:u,topOffset:o,children:[a.jsxs(ds,{children:[a.jsx(tt,{mb:it.space.medium,variant:"link",onClick:h,children:a.jsx(ot,{"data-testid":"back-to-customization-button",fontWeight:"normal",children:"Back to Column Customization"})}),a.jsx(Be,{children:a.jsxs(ds,{children:[a.jsx(ot,{fontWeight:500,children:"Data"}),a.jsxs(oYe,{children:[a.jsx("li",{"data-testid":"symbol-info-data-option-symbol",children:a.jsx(ot,{children:"Symbol"})},"symbol-info-data-option-symbol"),Object.entries(Vi).map(([m,g])=>a.jsx("li",{"data-testid":"symbol-info-data-option-"+m,children:a.jsx(Mn,{id:m,label:WI[g],ariaLabel:m,isChecked:i[g],onChange:()=>p(g,!i[g])})},"symbol-info-data-option-"+m))]})]})})]}),a.jsx(S_,{"aria-label":"Reset options",variant:Pe.secondary,onClick:c,"data-testid":"edit-symbol-info-reset",children:a.jsx(ot,{children:"Reset"})})]})})},iYe=j.memo(aYe),lYe=A(Hu)`
  margin-bottom: 7px;
  padding-right: 0;
  & > ${Be} {
    width: 100%;

    & > span + div {
      margin-right: 4px;
    }
  }
`,cYe=A(ot)`
  ${br.typography(sr.captionEmphasized)}

  ${({theme:e})=>e.mixins.ellipsis}
`,dYe=({unavailableAccount:e,tradeableAccountsDesc:t,selectedAccount:s,everyAccountTradeable:n})=>{const r=j.useRef(!1);Cn(()=>(r.current=!0,()=>{r.current=!1}));const[o,i]=j.useState(!1),[l,c]=j.useState(!1),d=B.createRef(),u=y=>{y.stopPropagation(),c(!0)},{width:h=0}=Bm({ref:d},r)??{width:0},p=()=>{const y="Symbol Info";return a.jsx(lYe,{"data-testid":"open-symbol-info-button",as:"div",width:`${ta}px`,children:a.jsxs(Be,{justifyContent:"space-between",tabIndex:-1,children:[a.jsx(cYe,{title:y,children:y}),a.jsx(qT,{ariaLabel:"Open Symbol info",onClick:u})]})},"symbolInfo")},[m,g]=Lo(sn.SHOW_TRADEABLE_ACCOUNT_MESSAGE,Xe.is,!0),S=()=>{g(!1)},T=!s.code&&!n&&t&&m;return a.jsxs("div",{className:"positions","data-testid":"positions",children:[a.jsx("div",{className:"portfolio-subheading-container portfolio-subheading-container--expanded",children:a.jsx("h2",{className:"portfolio-subheading portfolio-subheading--positions-table",children:__("Positions")})}),e&&a.jsx(Cg,{}),T&&a.jsx(rYe,{tradeableAccountsDesc:t,handleClick:S}),l?a.jsx(iYe,{isOpen:l,topOffset:36,onBackToColumnCustomizationMenu:()=>c(!1),onClose:()=>{c(!1),i(!1)}}):a.jsx(Vu,{customizableTableName:ko.Position,topOffset:36,isOpen:o,onClose:()=>i(!1),additionalCustomizationItem:a.jsx(p,{})}),a.jsx("div",{ref:d,"data-testid":"positions-table-container",className:"positions-table-container native-scroll in-app-scrollbar",children:a.jsx(sYe,{tableWidth:h,openColumnCustomizationMenu:()=>i(!0),unavailableAccount:e})})]})},uYe=j.memo(dYe),hYe=x(Tr,QO,(e,t)=>[...new Set(t.map(({account:n})=>n))].map(n=>{const r=e.find(o=>o.code===n);return r==null?void 0:r.description}).filter(Ut).join(", ")),pYe=e=>({unavailableAccount:Ic(e),tradeableAccountsDesc:hYe(e),selectedAccount:Tl(e),everyAccountTradeable:zj(e)}),mYe=se(pYe)(uYe),gYe=A.div`
  margin-top: ${({theme:e})=>`${e.space.small}`};
  flex-grow: 1;
  ${qk} {
    width: 100%;
    height: 100%;
  }
`,SYe=()=>{const[e,t]=B.useState(!1),s=()=>t(n=>!n);return a.jsxs(gYe,{"data-testid":"portfolio-digest",children:[a.jsx("div",{className:Te("portfolio-subheading-container",e&&"portfolio-subheading-container--expanded"),children:a.jsx($o,{isExpandedDown:e,isHeader:!0,needsPadding:!0,onClick:s,children:a.jsx("h2",{"data-testid":"portfolio-subheading",className:"portfolio-subheading",children:__("Portfolio Digest",{namespace:"News"})})})}),e&&a.jsx(Xk,{showRelevantNews:!0})]})},fYe=({onClick:e,selectedAccount:t,showTransactions:s,activePage:n,getLiveSupportModalContent:r,isLiveTrading:o,flags:i})=>{const l=t!==void 0?`${t} ${__("Positions")}`:`${__("All Account Positions")}`,c=i&&Js(Cs.SHOW_PORTFOLIO_NEWS_BLUE,i);return a.jsx(a.Fragment,{children:s&&n===ge.Transactions?a.jsxs("section",{id:"transactions","data-testid":"transactions-section",children:[a.jsx(JGe,{}),r&&r()]}):a.jsxs("section",{id:"portfolio","data-testid":"portfolio-section",children:[a.jsx(Yg,{title:l,icon:a.jsx(X,{type:Y.Positions,dataTestId:"position-icon",className:"positions-icon"}),onClick:n!==ge.Positions?e:void 0,padding:`0 0 ${it.space.medium} 0`,dataTestId:"portfolio-header"}),a.jsxs("div",{className:"table-wrapper portfolio__content",children:[a.jsx(ZWe,{activePage:n}),a.jsx(mYe,{}),c&&o&&a.jsx(SYe,{})]}),a.jsx(aGe,{}),r&&r()]})})},TYe=x(W1,e=>{if(e.selected!==void 0)return Ra(e.selected)}),yYe=e=>({selectedAccount:TYe(e),showTransactions:pWe(e),isWatchlistExpanded:e.layout.isWatchlistExpanded,isSpreadGroupingEnabled:zm(e),isLiveTrading:Mo(e)===gt.LiveTrading}),CYe=e=>({onClick(){e(ws(ge.Positions)),Ye({category:Ve.PositionsSidebar,action:Le.PositionsPageOpened})}}),e2=Ln.withConsumer()(se(yYe,CYe)(fYe)),bYe=e=>{const t=Mu(e),s=t&&t.length>0||!1;return{isWatchlistExpanded:e.layout.isWatchlistExpanded,isCategoryPersonalWatchlist:cSe(e),selectedWatchlist:MD(e),hasWatchlists:s,isConnected:_L(e),areWatchlistSymbolsLoading:dSe(e),watchlistPreviouslyExpandedByClick:E9(e)}},EYe=e=>({requestWatchlistQuotes:t=>{e(fSe(t))},toggleWatchlistExpansion:(t,s)=>{t?(e(ws(ge.Watchlist)),e(h9(!0))):s?us.goBack():e(ws(ge.Positions))},unsubscribeFromWatchlistQuotes:t=>{e(TSe(t))}}),t2=se(bYe,EYe)(mje),AYe=A.div`
  display: flex;
  background-color: ${({theme:e})=>e.colors.component.Trade.background.primary};
  border-top: ${({theme:e})=>`${e.shape.borderWidth.primary}px solid ${e.colors.component.Trade.border.secondary}`};
  border-radius: ${({theme:e})=>e.shape.borderRadius.secondary}px;
`,vYe=A.span`
  margin-right: 4px;
  width: 24px;
  border-top-left-radius: ${({theme:e})=>e.shape.borderRadius.secondary}px;
  ${({theme:e})=>e.breakpoints.below(lt.MOBILE_LARGE)} {
    width: ${({directionClass:e})=>e==="multi"?0:"24px"};
  }
  ${({theme:e})=>e.breakpoints.below(375)} {
    width: 0;
  }
  ${({theme:e})=>Ms({prop:"direction",variants:{[pe.Buy]:{backgroundColor:e.colors.buy.main},[pe.Sell]:{backgroundColor:e.colors.sell.main}}})}
`,IYe=A.button`
  padding-top: ${({theme:e})=>e.space.xSmall};
  position: absolute;
  right: 0;
`,xYe=A.div`
  padding: 9px 0;
`,wYe=({symbol:e,instrument:t,trade:s,privacyModeEnabled:n,secondaryTradeIndex:r,showFractionalPricing:o,fractionalType:i,positionColumnCell:l,deleteDraftOrderTicket:c})=>{const d=N_(t,s,n,l),u=P_(t,o,i,l),h=e!=="",p=l.quantity,m=l.legs;return a.jsxs(AYe,{"data-testid":"ticket-description",children:[a.jsx(vYe,{direction:p!==void 0?p>0?pe.Buy:pe.Sell:"",directionClass:p!==void 0?iC(p,m):""}),p!==void 0&&a.jsx(xYe,{children:a.jsx(Si,{status:s.status,legs:m,quantity:p})}),h&&a.jsxs(Be,{justifyContent:"space-between",alignContent:"center",marginLeft:"16px","data-testid":"description",children:[a.jsxs(ot,{position:"relative",padding:"4px",top:"2px",marginRight:"32px",children:[d," ",u]}),a.jsx(IYe,{"data-testid":"close-button","aria-label":"Delete draft order at position 1",onClick:()=>c(e??"",r),children:a.jsx(X,{type:Y.CloseSolid,width:16,height:16,viewBox:"2 2 20 20",dataTestId:"close-solid-icon",fill:"action.focus"})})]})]})},OYe=(e,t)=>{const s=H_(e,t.trade,t.secondaryTradeIndex),{showFractionalPricing:n,fractionalType:r}=pn(e,s.symbol!==void 0?s.symbol:"");return{positionColumnCell:s,privacyModeEnabled:Ma(e),instrument:e.instruments.get(s.symbol!==void 0?s.symbol:"",F_),secondaryTradeIndex:t.secondaryTradeIndex,showFractionalPricing:n,fractionalType:r}},RYe=e=>({deleteDraftOrderTicket(t,s){e(FD(t,s))}}),GI=se(OYe,RYe)(wYe),DYe=A.div`
  padding: ${({theme:e})=>`${e.space.xSmall} ${e.space.none}`};
  display: flex;
`,s2=A(tt)`
  font-size: ${({theme:e})=>e.fontSizes.small};

  & svg {
    margin-right: 6px;
  }
`,LYe=A(X)`
  position: absolute;
  top: 0;
`,_Ye=A(X)`
  position: absolute;
  bottom: 0;
`,NYe=A.div`
  margin-right: ${({theme:e})=>e.space.xSmall};

  ${({theme:{breakpoints:e}})=>e.below(e.mobileLarge+100)} {
    margin: ${({theme:e})=>e.space.small} 0 0 0;
  }
`,PYe=({dayTradesLeft:e})=>e!==void 0?a.jsxs(NYe,{"data-testid":"day-trades-left-wrapper",children:[a.jsx(ot,{children:"Day Trades Left"}),a.jsx(ot,{pl:3,color:"text.primary",children:e})]}):null,kYe=x(Tr,Ow,Dc,(e,t,s)=>{const n=e.find(r=>s!==void 0&&s.account===r.code);if(n!==void 0){const r=t.get(n.code);return r==null?void 0:r.dayTradesLeft}}),MYe=e=>({dayTradesLeft:kYe(e)}),$Ye=se(MYe)(PYe),jYe=e=>{const{ariaLabel:t,time:s,request:n}=e,r=j.useRef(1),o=()=>{const i=new Date().getTime();r!=null&&r.current&&(r==null?void 0:r.current)+500<=i&&(n(),r.current=new Date().getTime())};return a.jsxs("div",{className:"section",children:[__("As of"),__(" "),xm(s),a.jsx(tt,{"aria-label":t,"data-testid":"refresh-button",onClick:()=>o(),children:a.jsx(X,{type:Y.Refresh,width:20,height:20,viewBox:"0 0 24 24",dataTestId:"refresh-icon"})})]})};class BYe extends j.Component{constructor(){super(...arguments);R(this,"requestSnapshotQuote",()=>{const s=this.props.symbol?[this.props.symbol]:void 0,n=this.props.tradeSymbol?[this.props.tradeSymbol]:void 0,r=this.props.isMultileg?s:n;phe(ts.request)({requestId:"snapshotQuote",symbols:r,callback:o=>{const i=o.find(c=>c.symbol===this.props.tradeSymbol),l=ox(i,["bid","bidSize","bidExchange","ask","askSize","askExchange","last","lastSize","lastExchange","volume"]);this.setState(c=>({ask:this.props.ask,bid:this.props.bid,...c,...l,lastSnapshotResponseTime:new Date}))}})})}componentDidMount(){this.props.shouldUseStreamData||this.requestSnapshotQuote()}componentDidUpdate(s){!this.props.shouldUseStreamData&&this.props.tradeSymbol!==s.tradeSymbol&&this.requestSnapshotQuote()}shouldComponentUpdate(s,n){const r=s.shouldUseStreamData&&!fs(s,this.props),o=!s.shouldUseStreamData&&!fs(n,this.state),i=s.tradeSymbol!==this.props.tradeSymbol;return r||o||i}render(){const s=(this.props.shouldUseStreamData?this.props:this.state)??{},{bid:n,bidSize:r,bidExchange:o,ask:i,askSize:l,askExchange:c,last:d,lastSize:u,lastExchange:h,volume:p}=s,{isMultileg:m,fractionalType:g,showFractionalPricing:S,showDoubleTickForFractionalPricing:T}=this.props;return a.jsxs("section",{"data-testid":"market-details-data",className:"market-details",children:[a.jsxs("div",{className:"section",children:[a.jsx("span",{className:"label",children:__("Bid")}),n!==void 0&&Vn(S,n,g,T)," ",m?null:a.jsxs("span",{"aria-label":`bid size ${r} bid exchange ${o}`,children:[a.jsxs("span",{"aria-hidden":!0,children:["x ",r]})," ",a.jsx("span",{className:"exchange-label","aria-hidden":!0,children:o})]})]}),a.jsxs("div",{className:"section",children:[a.jsx("span",{className:"label",children:__("Ask")}),i!==void 0&&Vn(S,i,g,T)," ",m?null:a.jsxs("span",{"aria-label":`ask size ${l} ask exchange ${c}`,children:[a.jsxs("span",{"aria-hidden":!0,children:["x ",l]})," ",a.jsx("span",{className:"exchange-label","aria-hidden":!0,children:c})]})]}),m?null:a.jsxs("div",{className:"break",children:[a.jsxs("div",{className:"section",children:[a.jsx("span",{className:"label",children:__("Last")}),d!==void 0&&Vn(S,d,g,T)," ",a.jsxs("span",{"aria-label":`last size ${u} last exchange ${h}`,children:[a.jsxs("span",{"aria-hidden":!0,children:["x ",u]})," ",a.jsx("span",{className:"exchange-label","aria-hidden":!0,children:h})]})]}),a.jsxs("div",{className:"section",children:[a.jsx("span",{className:"label",children:__("Volume")}),Sn(p)]})]}),this.state&&this.state.lastSnapshotResponseTime&&a.jsx(jYe,{ariaLabel:"Refresh Market Quotes",time:this.state.lastSnapshotResponseTime,request:this.requestSnapshotQuote})]})}}const FYe=e=>{var l;const t=Os(e),s=t?Vm(e,t):void 0,n=s!==void 0?e.quotes.get(s.legs[0].symbol):void 0,r=((s==null?void 0:s.legs.length)??0)>1,{showFractionalPricing:o,fractionalType:i}=pn(e,t??"");return{bid:s==null?void 0:s.bidPrice,bidSize:n==null?void 0:n.bidSize,bidExchange:n==null?void 0:n.bidExchange,ask:s==null?void 0:s.askPrice,askSize:n==null?void 0:n.askSize,askExchange:n==null?void 0:n.askExchange,last:n==null?void 0:n.last,lastSize:n==null?void 0:n.lastSize,lastExchange:n==null?void 0:n.lastExchange,volume:n==null?void 0:n.volume,isMultileg:r,shouldUseStreamData:gde(e),tradeSymbol:(l=s==null?void 0:s.legs[0])==null?void 0:l.symbol,symbol:t,showFractionalPricing:o,fractionalType:i,showDoubleTickForFractionalPricing:Vs(Lc(e),Ym(e))}},HYe=se(FYe)(BYe),YI=({theme:e})=>e.shape.borderRadius.secondary,UYe=A(Be)`
  color: ${({theme:{colors:e}})=>e.text.primary};
  width: 100%;
  justify-content: space-between;
  align-items: center;
`,VYe=A.span`
  display: inline-block;
  padding-bottom: 3px;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  padding-right: 12px;
  color: ${({tradingSystem:e,theme:{colors:t}})=>e===gt.LiveTrading?t.action.add:t.paperMoney.primary};
`,WYe=A.div`
  font-size: ${({theme:e})=>e.fontSizes.medium};
  color: ${({tradingSystem:e,theme:{colors:t}})=>e===gt.LiveTrading?t.action.add:t.paperMoney.primary};
  padding: 10px 50px;
  text-align: center;
  border: ${({theme:e})=>e.shape.borderWidth.primary}px solid;
  border-color: ${({theme:{colors:e}})=>e.border.primary};
  border-bottom: none;
  background-color: ${({theme:{colors:e}})=>e.background.secondary};
`,GYe=A.div`
  background: ${({theme:{colors:e}})=>e.background.primary};
  border: ${({theme:{shape:e}})=>e.borderWidth.primary}px solid
    ${({theme:{colors:e}})=>e.border.primary};
  border-bottom: none;
  padding: ${({theme:{space:e}})=>e.xxSmall};
  border-top-left-radius: ${YI}px;
  border-top-right-radius: ${YI}px;
`,YYe=e=>a.jsx(GYe,{children:a.jsx(WYe,{tradingSystem:e,children:ub(e)})}),qYe=(e,t)=>a.jsxs(UYe,{children:[a.jsx("div",{"data-testid":"account-info",children:Ra(t)}),a.jsx(VYe,{"data-testid":"selected-trading-system",tradingSystem:e,children:ub(e)})]}),KYe=e=>a.jsx(Ei,{"data-testid":"trade-account-dropdown",variant:Pe.primary,isDisabled:e.disabled,values:e.accounts,getListItemKey:t=>t.code,onListItemClick:e.selectAccount(e.symbol),renderListItemContent:t=>a.jsx(hg,{account:t,formatAccount:e.formatAccount}),selectedItemIndex:e.accounts.findIndex(t=>{var s;return t.code===((s=e.selectedAccount)==null?void 0:s.code)}),renderAnchorButtonContent:()=>e.selectedAccount&&qYe(e.tradingSystem,e.selectedAccount),renderHeader:YYe(e.tradingSystem)}),zYe=e=>({selectAccount:t=>s=>e({type:f.OrderAccountSelected,account:s,symbol:t})}),XYe=e=>{const t=Os(e),s=t!==null?t:"",n=Dc(e),r=Mo(e),o=Tr(e);return{symbol:s,accounts:o,selectedAccount:o.find(i=>n!==void 0&&n.account===i.code),tradingSystem:r!==void 0?r:gt.LiveTrading}},QYe=se(XYe,zYe)(KYe);class ZYe extends j.PureComponent{render(){const{buyingPowerEffect:t,buyingPowerForStock:s,buyingPowerForOptions:n,buyingPowerEffectForForex:r,buyingPowerForForex:o,orderPaymentDetails:i}=this.props;return a.jsxs("section",{className:"order-details",children:[i!==void 0&&i.map((l,c)=>{const d=l.cost??0,u=c===0,h=c===i.length-1&&c!==0;return a.jsx("section",{"data-testid":c===0?"cost":`cost-${c}`,className:Te("cost-section",u?"first-confirmation-row":"",h?"last-confirmation-row":""),children:a.jsxs("div",{className:"confirmation-cost",children:[a.jsx("span",{className:"label","data-testid":c===0?"cost-label":`cost-label-${c}`,children:`${__("Cost")} ${i.length===1?"":`#${c+1}`}`}),d!==0||l.fee!==0||l.commission!==0?a.jsxs("span",{children:[a.jsxs("span",{children:[a.jsx(tr,{dataTestId:"cost-value",value:d})," + ",a.jsx(tr,{dataTestId:"commission-value",value:l.commission,showZero:!0})," ",l.fee!==0?a.jsxs(a.Fragment,{children:["+ ",a.jsx(tr,{dataTestId:"fee-value",value:l.fee})]}):null," ","="," "]}),a.jsx("span",{className:"total",children:a.jsx(tr,{dataTestId:"total-value",value:d+(l.commission??0)+(l.fee??0),displayCreditOrDebit:!0})})]}):a.jsx("span",{className:"total",children:a.jsx(tr,{dataTestId:"total-value",value:0})})]})},c)}),r?a.jsxs("div",{className:"confirmation-bp-effect-forex first-confirmation-row",children:[a.jsx("span",{className:"label",children:__("Forex Buying Power Effect")}),a.jsx("span",{className:"bp-value",children:a.jsx(tr,{dataTestId:"resulting-bp-effect-forex-value",value:r})})]}):a.jsxs("div",{className:"confirmation-bp-effect first-confirmation-row",children:[a.jsx("span",{className:"label",children:__("Buying Power Effect")}),a.jsx("span",{className:"bp-value",children:a.jsx(tr,{value:t})})]}),o?a.jsxs("div",{className:"confirmation-bp-forex last-confirmation-row",children:[a.jsx("span",{className:"label",children:__("Resulting Buying Power for Forex")}),a.jsx("span",{className:"bp-value",children:a.jsx(tr,{dataTestId:"resulting-bp-forex-value",value:o})})]}):s===n||n===void 0||s===void 0?a.jsxs("div",{className:"confirmation-bp last-confirmation-row",children:[a.jsx("span",{className:"label",children:__("Resulting Buying Power")}),a.jsx("span",{className:"bp-value",children:a.jsx(tr,{dataTestId:"resulting-bp-value",value:s||n})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:Te("confirmation-bp-stock",(i==null?void 0:i.length)===1?"cost-section last-confirmation-row":""),children:[a.jsx("span",{className:"label",children:__("Resulting Buying Power for Stock")}),a.jsx("span",{className:"bp-value",children:a.jsx(tr,{dataTestId:"confirmation-bp-stock-value",value:s})})]}),a.jsxs("div",{className:"confirmation-bp-options last-confirmation-row",children:[a.jsx("span",{className:"label",children:__("Resulting Buying Power for Options")}),a.jsx("span",{className:"bp-value",children:a.jsx(tr,{dataTestId:"confirmation-bp-options-value",value:n})})]})]})]})}}const JYe=e=>{const t=Os(e),s=t?e.createTrade.orderConfirmation.get(t):void 0;return{orderPaymentDetails:(s==null?void 0:s.orderPaymentDetails)!==void 0?s==null?void 0:s.orderPaymentDetails.map((r,o)=>{const i=t?Hr(e,t,o):void 0,l=i==null?void 0:i.quantity,c=(i==null?void 0:i.legs.length)===1,d=i!==void 0&&i.price!==void 0&&i.price<=.05,u=Il(e),h=l!==void 0&&u.find(p=>p.symbol===(i==null?void 0:i.legs[0].symbol)&&p.type===k.OPTION&&p.quantity<0&&Math.abs(p.quantity)<=Math.abs(l));return{...r,commission:d&&c&&h?0:r.commission}}):void 0,buyingPowerEffect:s==null?void 0:s.buyingPowerEffect,buyingPowerForStock:s==null?void 0:s.buyingPowerForStock,buyingPowerForOptions:s==null?void 0:s.buyingPowerForOptions,buyingPowerForForex:s==null?void 0:s.buyingPowerForForex,buyingPowerEffectForForex:s==null?void 0:s.buyingPowerEffectForForex}},eqe=se(JYe)(ZYe),tqe=(e,t)=>{switch(t){case Ot.OCO:return" "+__("OCO");case Ot.FIRST_TRIGGERS_ALL:return e!==0?" "+ff("TRG BY #1"):"";case Ot.FIRST_TRIGGERS_SEQ:return e!==0?" "+ff(`TRG BY #${e}`):"";case Ot.FIRST_TRIGGERS_OCO:return e!==0?" "+ff("TRG BY #1")+" "+__("OCO"):"";default:return""}},ff=e=>{const t=e.substring(e.length-1);return __(e.replace(t,"{ind}")).replace("{ind}",t)},sqe=({isEditing:e,orderSummaries:t,quantities:s,shouldFocus:n,warnings:r,symbol:o,hideOrderConfirmation:i,groupMarker:l,orderRules:c,validationError:d,fractionalType:u,showFractionalPricing:h,showDoubleTickForFractionalPricing:p,hideSummaryText:m})=>{const[g,S]=Cc(),T=j.useRef(null),y=un(S);j.useEffect(()=>{y&&!S&&i(o)},[o,S,y,i]),j.useEffect(()=>{n&&T.current&&T.current.focus()},[T,n]);const b=(E,v,D,w,N,L)=>{const P=E.split(" "),F=P.slice(0,2).join(" "),O=P.slice(2).join(" ");return a.jsxs("div",{className:"confirmation-mark",children:[a.jsx("span",{"data-testid":"beginning",className:"beginning",children:F}),O,efe(D,w,p,L),tqe(v,N)]})};return a.jsxs("section",{className:"confirmation",id:"orderConfirmation",children:[a.jsxs("section",{className:"order-confirmation",children:[a.jsx("div",{tabIndex:0,ref:Bu(g,T),children:a.jsxs("div",{className:"account-section",children:[a.jsx("div",{id:"account-selector",children:a.jsx(QYe,{disabled:e,formatAccount:Ra})}),a.jsx($Ye,{}),a.jsx(HYe,{})]})}),t&&m&&t.map((E,v)=>{const D=s[v]??0;return a.jsx("section",{"data-testid":"order-summary",id:"trade",className:Te("order-summary",D>0?"buy":"sell"),children:b(E,v,u,h,l,c==null?void 0:c[v])},v)}),a.jsx(eqe,{})]}),a.jsx(vi,{warnings:r,validationError:d})]})},nqe=e=>e.visible&&ru.hasValue(e.symbol)&&e.quantities.length>0?a.jsx(sqe,{...e,symbol:e.symbol}):null,rqe=e=>{const t=Os(e),s=t?Vm(e,t):void 0,n=t?Rc(e,t):void 0,r=sy(e),o=Jae(e)??[],i=(n==null?void 0:n.orders.map(h=>h.quantity??0))??[],l=r==null?void 0:r.validationError;l&&o.indexOf(l)===-1&&o.push(l);const c=n!==void 0?Oc(n.contingencies):void 0,{showFractionalPricing:d,fractionalType:u}=pn(e,t??"");return{visible:oh(e),symbol:t,orderSummaries:r==null?void 0:r.orderSummaries,groupMarker:c,quantities:i,warnings:o,validationError:l,isEditing:s!==void 0&&s.canChangeAccount!==void 0&&s.canChangeAccount===!1,shouldFocus:e.focus.focusedId===ps.ORDER_CONFIRMATION,orderRules:(n==null?void 0:n.orderRules)??[[]],showFractionalPricing:d,fractionalType:u,showDoubleTickForFractionalPricing:Vs(Lc(e),Ym(e))}},oqe={hideOrderConfirmation:YD},aqe=se(rqe,oqe)(nqe),iqe=A.div`
  background-color: var(--editor-background);
  position: relative;
  z-index: 10010;
`,lqe=A.div`
  display: flex;
  flex-direction: column;
`,cqe=A.div`
  display: flex;
`,dqe=({symbol:e,advancedOrderType:t,selectAdvancedOrder:s})=>a.jsxs(s2,{"aria-label":`Add ${dc(t)} Order`,onClick:()=>{s(e,t)},children:[a.jsx(X,{type:Y.Add,width:16,height:16,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",fill:"action.focus"}),__(dc(t))]}),uqe=e=>{switch(e){case Ot.BLAST_ALL:return Le.AddBlastAllOrder;case Ot.OCO:return Le.AddOCOOrder;case Ot.FIRST_TRIGGERS_SEQ:return Le.AddFirstTriggersSeqOrder;case Ot.FIRST_TRIGGERS_ALL:return Le.AddFirstTriggersAllOrder;case Ot.FIRST_TRIGGERS_OCO:return Le.AddFirstTriggersOCOOrder;default:return}},n2=e=>({selectAdvancedOrder:(t,s)=>{e(NSe(t,s));const n=uqe(s);n!==void 0&&Ye({category:Ve.Trade,action:n,label:ks.TradeTicket})}}),Tf=se(null,n2)(dqe),hqe=A(TC)`
  ${Wn} {
    border: none;
  }
`,pqe=e=>a.jsx(hqe,{values:[Ot.BLAST_ALL,Ot.OCO,Ot.FIRST_TRIGGERS_SEQ,Ot.FIRST_TRIGGERS_ALL,Ot.FIRST_TRIGGERS_OCO],"data-testid":"advanced-order-dropdown",anchorAriaLabel:"Advanced Orders",variant:Pe.tertiary,onListItemClick:t=>{e.selectAdvancedOrder(e.symbol,t)},getListItemKey:t=>t,appendTo:e.portalRef,strategy:"fixed",renderListItemContent:t=>__(dc(t)),renderAnchorButtonContent:()=>a.jsxs(a.Fragment,{children:[__("Advanced Orders"),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6","aria-hidden":"true",dataTestId:"arrow-dropdown-icon"})]})}),mqe=se(null,n2)(pqe),gqe=({symbol:e,isTradeInitiated:t,draftTradeDirections:s,draftTrade:n,orderSummary:r,isReviewOrderExpanded:o,groupedOrder:i,showContingentOrderButton:l,changeContingency:c,addContingentOrder:d,activePage:u})=>{var H;const[h,p]=j.useState(),[m,g]=j.useState(!1),[S,T]=j.useState(!1),y=B.useRef(null),b=B.useRef(null),E=B.useRef(null),v=B.useRef(null),D=B.useRef(!1);Cn(()=>(D.current=!0,()=>{D.current=!1}));const{width:w=0}=Bm({ref:b},D)??{width:0},N=j.useCallback(()=>{y.current&&(y.current.offsetWidth<y.current.scrollWidth?T(!0):T(!1))},[]);j.useEffect(()=>{N()},[w,r]);const L=(C,M,q)=>{const W=[rs.AND,rs.OR,rs.THEN];return M<1||M===1&&q&&q[0]===rs.THEN?W:[C]},P=un(n),F=j.useCallback(C=>{C!==null&&p(C)},[p]),O=j.useCallback(()=>{g(C=>!C)},[]);return j.useEffect(()=>{(!P&&n||o)&&g(!0)},[n,o]),t||u===ge.Trade?a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:F,className:"dropdownPortal","data-testid":"dropdownPortal"}),a.jsx(iqe,{className:`trade-ticket-wrapper ${t?"":"trade-not-initiated"}`,ref:b,"data-testid":"trade-ticket-wrapper",children:t&&a.jsxs(a.Fragment,{children:[m&&a.jsxs(lqe,{className:"left",children:[a.jsx("div",{id:"draft-trade-detail",children:n&&a.jsx(GI,{symbol:e,trade:n,secondaryTradeIndex:0})}),a.jsxs(cqe,{children:[s!==void 0&&a.jsx("div",{className:Te("buffer",s[0])}),a.jsx(rv,{symbol:e,draftOrderIndex:0,containerRef:h,tradeTicketRef:E,isReviewOrderExpanded:o})]}),i==null?void 0:i.orders.map((C,M)=>{var z;const q=(z=i==null?void 0:i.contingencies)==null?void 0:z[M],W=pp(e);return a.jsxs(j.Fragment,{children:[M>0&&a.jsxs(j.Fragment,{children:[a.jsx(GI,{symbol:e,trade:W,secondaryTradeIndex:M}),a.jsxs("div",{className:"trade-ticket-info",children:[a.jsx("div",{className:Te("buffer",s==null?void 0:s[M])}),a.jsx(rv,{symbol:e,draftOrderIndex:M,containerRef:h,tradeTicketRef:E,isReviewOrderExpanded:o})]})]}),q!==void 0&&a.jsx(Be,{justifyContent:"center",padding:"5px",position:"sticky",left:"0",children:a.jsxs(a.Fragment,{children:[a.jsx(LYe,{type:Y.ThinArrow,width:5,height:7,viewBox:"0 0 5 7",dataTestId:"thin-arrow-icon"}),a.jsx(xN,{selectedValue:q,convertChildToInputValue:d0,name:`contingency-${M}`,ariaLabel:"Contingency toggle",dataTestId:`contingency-toggle-${M}`,onToggle:re=>c(M,re),renderLabel:re=>__(d0(re)),children:L(q,M,i==null?void 0:i.contingencies)}),a.jsx(_Ye,{type:Y.ThinArrow,width:5,height:7,viewBox:"0 0 5 7",dataTestId:"thin-arrow-icon"})]})})]},M)})]}),a.jsx("div",{children:a.jsxs("section",{id:"order-confirmation-and-contingent-order-wrapper",children:[l&&m&&a.jsxs(DYe,{children:[a.jsxs(s2,{"aria-label":"Add Contingent Order","data-testid":"add-contingent-order-button",onClick:d,children:[a.jsx(X,{type:Y.Add,width:16,height:16,viewBox:"4 4 16.5 16.5",dataTestId:"add-icon",fill:"action.focus"}),__("Contingent Order")]}),a.jsx(Tf,{symbol:e,advancedOrderType:Ot.BLAST_ALL}),((H=b==null?void 0:b.current)==null?void 0:H.offsetWidth)&&b.current.offsetWidth>zo[lt.MOBILE_XL]&&a.jsxs(a.Fragment,{children:[a.jsx(Tf,{symbol:e,advancedOrderType:Ot.OCO}),a.jsx(Tf,{symbol:e,advancedOrderType:Ot.FIRST_TRIGGERS_SEQ})]}),a.jsx(mqe,{portalRef:h,symbol:e})]}),a.jsx(aqe,{hideSummaryText:S}),a.jsx(rVe,{trayPortalRef:v,isExpanded:m,toggleIsExpanded:O,summaryTextRef:y,hideSummaryText:S})]})})]})}),a.jsx("div",{ref:v,className:"confirmation-tray-portal-root"})]}):null},Sqe=x(NM,e=>e.find(t=>t.status===de.Draft)),fqe=(e,{symbol:t})=>{const s=t!==void 0?e.instruments.get(t):void 0,n=Cr(e),r=Ab(e),o=n.length,i=sy(e),l=(i==null?void 0:i.canBeSent)??!0,c=(s==null?void 0:s.type)===k.FUND,d=Rc(e,t),u=(d==null?void 0:d.orders.length)!==void 0&&(d==null?void 0:d.orders.length)<8;return{isTradeInitiated:Xve(e),groupedOrder:d,draftTradeDirections:$O(e),draftTrade:Sqe(e,t),orderSummary:$M(e),trade:r,checkedTradesCount:o,columns:e.columns.trade,isReviewOrderExpanded:oh(e),showContingentOrderButton:l&&!c&&u,activePage:ms(e)}},Tqe=(e,{symbol:t})=>({changeContingency(s,n){e(BD(t,s,n))},addContingentOrder(){e(jD(t))}}),fm=se(fqe,Tqe)(gqe),Ib=e=>e.scans.symbols,yqe=e=>e.scans.prevScanFilters,Cqe=e=>e.scans.prevSavedScanFilters,bqe=e=>e.scans.scanFilterMenu,Eqe=e=>e.scans.scanFilters,Aqe=Nn(Ib,e=>e.slice(0).sort()),vqe=e=>e.scans.quotes,Iqe=e=>e.scans.scanInWatchlistId,xqe=e=>e.scans.hasUnSupportedFilters,r2=e=>e.scans.scanFilterParameters,wqe=e=>e.scans.queryName,Kl={min:"Min",max:"Max",filters:"Filters",filter:"Filter",reset:"Reset"},qI={[Kt.ASK]:"The lowest price that a seller is willing to accept for a security.",[Kt.ASK_SIZE]:"The amount of security that a seller is willing to sell at the ask price.",[Kt.BACK_VOL]:"Back volatility is the implied volatility of the option series with the second closest expiration date.",[Kt.BETA]:"A metric that shows how volatile the symbol is compared to the general market. Symbols with beta greater than 1.0 are more volatile than the market, those with beta less than 1.0 are less volatile. Symbols with beta equal to 1.0 are as the volatile as the general market is. Negative beta indicates inverse relation to the market.",[Kt.BID]:"The highest price that a buyer is willing to pay for a security.",[Kt.BID_SIZE]:"The amount of a security that a buyer is willing to buy at the bid price.",[Kt.CALL_VOLUME_INDEX]:"A metric that compares today's volume of call options with the average volume of call options over the last five days.",[Kt.CLOSE]:"The price of the final trade during the regular trading session.",[Kt.EPS]:"The diluted earnings per share value published in the company’s report.",[Kt.FRONT_VOL]:"Front volatility is the implied volatility of the option series with the closest expiration date.",[Kt.HIGH]:"The highest price reached during the specified time period.",[Kt.LAST]:"The price of the most recent transaction.",[Kt.LAST_SIZE]:"The amount of security traded in the last trade.",[Kt.LOW]:"The lowest price reached during the specified time period.",[Kt.MARK]:"For futures, single options, and stock, mark price is the last price bounded by bid and ask. For other securities, it is the arithmetic mean of bid and ask.",[Kt.MARKET_CAP]:"The total market value of all of the company's outstanding shares, calculated as the last trade price multiplied by the number of outstanding shares of the corresponding company.",[Kt.MARKET_MAKER_MOVE]:"Market Maker Move indicates the expected magnitude of an upcoming move based on the implied volatility.",[Kt.NET_CHANGE]:"The difference between the last trade price and the close price.",[Kt.OPEN]:"The price of the first trade during the regular trading session.",[Kt.OPTION_VOLUME_INDEX]:"A metric that compares today's option volume with the average option volume over the last five days.",[Kt.PE]:"Price to Earnings Ratio, the last price divided by the corresponding symbol’s EPS (earnings per share).",[Kt.PERCENT_CHANGE]:"The ratio of the net change to the close price, in percent.",[Kt.PUT_CALL_RATIO]:"The total number of traded put options divided by the total number of traded call options with the same underlying.",[Kt.PUT_VOLUME_INDEX]:"A metric that compares today's volume of put options with the average volume of put options over the last five days.",[Kt.VOLUME]:"The number of shares/contracts of the corresponding symbol traded during the day.",[Kt.SHARES]:"The number of outstanding shares of the corresponding company.",[Kt.VOL_DIFF]:"The difference between the back and the front volatility. Front volatility is the implied volatility of the option series with the closest expiration, and back volatility is that of the option series with the second closest expiration.",[Kt.VOL_INDEX]:"The CBOE® Volatility Index®, a metric that helps estimate the volatility of certain commodities and currency pairs. It takes into account the pricing of each option on an underlying to estimate the market's expectation of that underlying's volatility.",[Kt.WEIGHTED_BACK_VOL]:"The difference between the back and the front volatility weighted by the time till expiration.",[Kt.YIELD]:"The amount of a company’s dividends divided by last price."},Oqe=A.div`
  column-width: ${ta}px;
  column-gap: ${mg}px;
  padding: ${({theme:e})=>`0 ${e.space.small} ${e.space.small}`};
`,Rqe=A(sc)`
  padding-right: 4px;
  width: 100%;

  svg path {
    fill: ${({theme:{colors:e}})=>e.text.primary};
  }
`,Dqe=A(T_)`
  margin-right: auto;
`,Lqe=bm(({tda:e})=>({tooltip:{backgroundColor:e.colors.background.secondary,color:e.colors.text.primary,fontSize:e.fontSizes.small,fontWeight:"normal",padding:"10px",borderRadius:"4px",border:`${e.shape.borderWidth.primary}px solid ${e.colors.border.primary}`},arrow:{color:e.colors.background.secondary,"&::before":{borderWidth:`${e.shape.borderWidth.primary}px `,borderStyle:"solid",borderColor:e.colors.border.primary},"&::after":{borderWidth:`${e.shape.borderWidth.primary}px`,borderStyle:"solid",borderColor:e.colors.border.primary}},tooltipPlacementBottom:{margin:"2px 0px"},popper:{left:"-2px !important"}}))(t3),_qe=0,Nqe=6e4,Pqe=({description:e,children:t,disableHoverListener:s=!0})=>{const[n,r]=B.useState(!1),o=()=>r(!0),i=()=>r(!1);return a.jsx(ax,{onClickAway:i,children:a.jsx(Lqe,{arrow:!0,open:n,onClose:i,title:e,enterTouchDelay:_qe,leaveTouchDelay:Nqe,disableHoverListener:s,interactive:!0,children:a.jsx("span",{onClick:n?i:o,children:t})})})},kqe=e=>{const{isSidebarOpened:t,isPortfolioOpened:s,addFilters:n,selectedScanFilters:r,title:o,filters:i}=e,l=(c,d)=>{const{target:u}=c;u&&(u.nodeName==="svg"||u.nodeName==="path")||n(d)};return a.jsxs(a.Fragment,{children:[a.jsx(ot,{as:"h3","data-testid":o,fontWeight:"normal",i18nOptions:{namespace:"Scans"},ml:e.noPadding?it.space.small:0,mr:e.noPadding?it.space.small:0,mb:it.space.small,children:o}),a.jsx(Oqe,{title:o,isPortfolioOpened:s,isSidebarOpened:t,children:Object.values(i).map(c=>a.jsxs(Rqe,{"aria-label":`${c.name}`,width:"auto",disabled:r.some(d=>d.field===c.field),onClick:d=>l(d,c),children:[a.jsx(Kn,{as:"div",variant:cn.add}),a.jsx(Dqe,{"data-testid":`${c==null?void 0:c.field.toLowerCase()}`,title:c.name,i18nOptions:["Close","Open"].includes(c.name)?{namespace:"Scans"}:{},actionButton:a.jsx(Kn,{as:"div",variant:cn.add}),children:c.name}),qI[c.field]&&a.jsx(Pqe,{description:__(qI[c.field],{namespace:"Scans"}),children:a.jsx(X,{type:Y.Info,height:18,width:18,viewBox:"2 2 20 20",dataTestId:"info-icon"})})]},c.name))})]})},Mqe=e=>{const{isSidebarOpened:t,isPortfolioOpened:s,isFilterMenuOpen:n,setIsFilterMenuOpen:r,addFilters:o,selectedScanFilters:i,filterButtonRef:l}=e;return a.jsx(Ii,{noPadding:!0,isOpen:n,"data-testid":"scans-filter-menu",onClose:r,activePage:ge.Scans,screenReaderOnlyTitle:"Scan Filters Menu",toggleButtonRef:l,children:Tle.map(c=>a.jsx(kqe,{noPadding:!0,isSidebarOpened:t,isPortfolioOpened:s,isFilterMenuOpen:n,setIsFilterMenuOpen:r,addFilters:o,selectedScanFilters:i,title:c.title,filters:c.filters},c.title))})},o2=Ss`
  border: 1px solid ${({theme:e})=>e.colors.border.primary};
  border-radius: ${({theme:e})=>e.shape.borderRadius.primary}px;
  padding: 16px 14px 16px 4px;
  background-color: ${({theme:e})=>e.colors.background.secondary};
  margin-bottom: ${({theme:e})=>`${e.space.small}`};
  display: grid;
  grid-template-columns: 1fr 3fr;
  align-items: center;

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    padding: 6px;
  }
`,$qe=A.div`
  ${o2};
  grid-gap: ${({theme:e})=>`${e.space.small}`};

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    grid-template-columns: 1fr;
    grid-column-gap: 0;
    padding: 8px;
  }
`,jqe=A.button`
  ${o2};
  grid-template-columns: 90% 10%;
  padding: ${({theme:e})=>`${e.space.medium} ${e.space.xxSmall}`};
  ${br.typography(sr.body2)}
  width: 100%;
  cursor: pointer;
`,Bqe=A.div`
  color: ${({theme:e})=>e.colors.text.primary};
  white-space: nowrap;
  padding-left: ${({theme:e,isWatchListFilter:t})=>t?e.space.medium:""};
`,a2=A.div`
  padding-left: ${({theme:e})=>e.space.medium};
  ${({theme:e})=>e.mixins.ellipsis};
`,i2=A.div`
  display: flex;
  align-items: center;

  ${({theme:{breakpoints:e}})=>e.below(e.tabletSmall)} {
    grid-column: 1 / span 2;

    & > button {
      margin-left: 0;
    }
  }
`,Fqe=A.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,l2=A(X)`
  margin: ${({theme:{space:e}})=>`${e.xxSmall} 0 0 ${e.small}`};
`,Hqe=A.div``,Uqe=A.div`
  display: flex;
  align-content: center;
  justify-content: flex-start;
  gap: ${({theme:e})=>`${e.space.small}`};

  ${({theme:{breakpoints:e}})=>e.below(e.mobileXL)} {
    display: grid;
  }
`,c2=A.div`
  display: flex;
  align-items: center;
  gap: ${({theme:e})=>`${e.space.xSmall}`};

  & > span {
    flex-grow: 0;
    min-width: fit-content;
  }

  & > .min-max-stepper-wrapper {
    flex-grow: 1;
  }

  & > .min-max-stepper-wrapper input {
    max-width: 178px;
    width: calc(100% - 40px);
  }
  ${({theme:{breakpoints:e}})=>e.above(e.desktopLarge)} {
    & > .min-max-stepper-wrapper input {
      min-width: 178px;
    }
  }

  ${({theme:{breakpoints:e}})=>e.below(e.mobileSmall)} {
    & > .min-max-stepper-wrapper input {
      max-width: 85px;
    }
  }
`,Vqe=A(c2)``,Wqe=A(c2)``,Gqe=(e,t,s)=>`${s?"Increase "+e:"Decrease "+e} from current value ${t} by 1`;var Xi=(e=>(e.MIN="MIN",e.MAX="MAX",e))(Xi||{});const Yqe=({values:e,onUpdatesValues:t,labelsI18nOptions:s,dataTestId:n,generateCustomStepperLabel:r=Gqe,valueStep:o=1,precision:i=2,labels:l={min:"Min",max:"Max"},scanFilter:c})=>{var P,F,O,H;const d=C=>{const M=q=>q===void 0?"":Zi(!1,q,Bs.x10,i,!1);return{MIN:C.MIN===void 0?"":M(C.MIN),MAX:C.MAX===void 0?"":M(C.MAX)}},[u,h]=B.useState(e),[p,m]=B.useState(d(u));B.useEffect(()=>{t(u)},[u]);const g=C=>{const M=parseFloat(C.MIN),q=parseFloat(C.MAX),W=isNaN(M)?void 0:M;let z=isNaN(q)?void 0:q;W&&z&&W>z&&(z=W);const re={MIN:W,MAX:z};h(re),S(re)},S=C=>{m(d(C))},T=C=>()=>{b(C,ei.minus)},y=C=>()=>{b(C,ei.plus)},b=(C,M)=>{let q=xu.get(M)(u[C],o);if(u[C]===void 0&&(q=v(C)),!E(C,q))return;const z={...u,[C]:q};h(z),S(z)},E=(C,M)=>C==="MIN"?M<=(u.MAX||1/0):M>=(u.MIN||-1/0),v=C=>{const M=u.MIN,q=u.MAX;return C==="MIN"&&q&&q<0?q:C==="MAX"&&M&&M>0?M:0},D=C=>M=>{const q={...p,[C]:M.target.value};m(q)},w=C=>{switch(C.key){case we.ArrowRight:case we.ArrowLeft:C.stopPropagation()}},N=()=>{g(p)},L=C=>a.jsx(a.Fragment,{children:lp.includes(C.field||C.field)?a.jsx("span",{title:__("Percent"),children:__("%")}):""});return a.jsxs(Uqe,{"data-testid":n,children:[a.jsxs(Vqe,{children:[a.jsx(ot,{"data-testid":`${(P=c==null?void 0:c.field)==null?void 0:P.toLowerCase()}_min_value`,i18nOptions:s,children:l.min}),a.jsx(Mp,{id:"min-stepper",value:p.MIN,decrementLabel:r("MIN",p.MIN,!1),incrementLabel:r("MIN",p.MIN,!0),handleDecrement:T("MIN"),handleIncrement:y("MIN"),handleChange:D("MIN"),handleInputFocus:yr,handleBlur:N,handleKeyDown:w,dataTestId:`${(F=c==null?void 0:c.field)==null?void 0:F.toLowerCase()}_min_stepper`,className:"min-max-stepper-wrapper",inputAriaLabel:`${p.MIN}${(c==null?void 0:c.field)===Kt.MARKET_CAP?" Million":""}${c&&lp.includes((c==null?void 0:c.field)||(c==null?void 0:c.field))?" Percent":""}`}),(c==null?void 0:c.field)===Kt.MARKET_CAP?a.jsx("span",{title:__("Denoted in millions"),children:__("M")}):"",c&&L(c)]}),a.jsxs(Wqe,{children:[a.jsx(ot,{"data-testid":`${(O=c==null?void 0:c.field)==null?void 0:O.toLowerCase()}_max_value`,i18nOptions:s,children:l.max}),a.jsx(Mp,{id:"max-stepper",value:p.MAX,decrementLabel:r("MAX",p.MAX,!1),incrementLabel:r("MAX",p.MAX,!0),handleDecrement:T("MAX"),handleIncrement:y("MAX"),handleChange:D("MAX"),handleInputFocus:yr,handleBlur:N,handleKeyDown:w,dataTestId:`${(H=c==null?void 0:c.field)==null?void 0:H.toLowerCase()}_max_stepper`,className:"min-max-stepper-wrapper",inputAriaLabel:`${p.MAX}${(c==null?void 0:c.field)===Kt.MARKET_CAP?" Million":""}${c&&lp.includes(c.field||c.field)?" Percent":""}`}),(c==null?void 0:c.field)===Kt.MARKET_CAP?a.jsx("span",{title:__("Denoted in millions"),children:__("M")}):"",c&&L(c)]})]})},qqe=({scanFilter:e,handleRemoveFilter:t,handleParamsChange:s})=>{var r,o;const n=["Close","Open"].includes(e==null?void 0:e.field)?{namespace:"Scans"}:{};return a.jsxs($qe,{"data-testid":"scan-filter-item",children:[a.jsxs(i2,{children:[a.jsx(Kn,{variant:cn.remove,"aria-label":"Remove scan filter","data-testid":`remove-scan-filter-${(r=e==null?void 0:e.field)==null?void 0:r.toLowerCase()}`,onClick:t}),a.jsx(Bqe,{"data-testid":"scan-filter-item-name",isWatchListFilter:!1,children:__((o=fle[e==null?void 0:e.field])==null?void 0:o.name,n)})]}),a.jsx(Hqe,{children:a.jsx(Yqe,{dataTestId:"min-max-stepper",values:{[Xi.MIN]:e.low,[Xi.MAX]:e.high},onUpdatesValues:s,labels:{min:Kl.min,max:Kl.max},labelsI18nOptions:{namespace:"Scans"},scanFilter:e})})]})},Kqe=({scanWatchList:e,getScanFilters:t,scansQuotesRequestId:s})=>{const n=j.useRef(null);return a.jsxs(jqe,{"data-testid":"saved-scan-item",onClick:()=>t(e.id,s),"aria-label":e.description,children:[a.jsxs(Be,{alignItems:"center",children:[a.jsx(ds,{children:a.jsx(l2,{type:Y.Scans,viewBox:"2 2 20 20",dataTestId:"scans-icon"})}),a.jsx(a2,{ref:n,"data-testid":"saved-scan-item-name",children:e.description})]}),a.jsx(tM,{id:`${e.id}`,selected:!1,watchlistName:e.description,watchlistId:e.id,descriptionRef:n,isScanQuery:!0})]})};var d2=(e=>(e.OPTION_HACKER="OPTION_HACKER",e.STOCK_HACKER="STOCK_HACKER",e))(d2||{});const zqe=e=>{const{quote:t,instrument:s,columns:n,symbol:r}=e,o=Qu(s),i=o.instrumentType===k.PRODUCT&&o.activeSymbol!==void 0?!0:o.tradeable,l={...t,...o,tradeable:i};if(yu(l))return null;const{select:c,...d}=e;return a.jsx(Fn.inViewTr,{onClick:()=>c(r),...d,children:n.map(u=>{let h;u==="rootSymbol"&&(h=l.displaySymbol!==void 0?l.displaySymbol:e.symbol);const p=YP(l,u,s);return a.jsx(Fn.td,{children:u==="rootSymbol"?a.jsx("span",{"data-symbol":h,className:"symbol-label","aria-label":Ns(h),title:s==null?void 0:s.description,children:h}):a.jsx(Yu,{column:u,symbol:e.symbol,value:p})},u)})})},Xqe=(e,t)=>{const{quotes:s}=e.scans;return{quote:s.get(t.symbol),instrument:Vr(e,t.symbol)}},Qqe=e=>({select(t){Et.unstable_batchedUpdates(()=>{e(ws(ge.Trade,t)),e({type:f.ClearDeleteNotification})})}}),Zqe=se(Xqe,Qqe)(zqe),Jqe="scans-table",eKe=e=>{const[t,s]=B.useState(!1),[n,r]=B.useState(e.currentScanSymbols),[o,i]=B.useState(e.currentScanSymbols.slice(0).sort()),[l,c]=B.useState(null),[d,u]=B.useState(["rootSymbol",...e.columns]),[h,p]=B.useState(Za(e.currentScanSymbols,e.quotes,e.instruments));B.useEffect(()=>{const w=S7();c(w)},[]);const m=un(e.columns);B.useEffect(()=>{const w=e.columns;JSON.stringify(w)!==JSON.stringify(m)&&u(["rootSymbol",...w])},[e.columns]),B.useEffect(()=>{const{currentScanSymbols:w,currentScanSymbolsAlphaSort:N}=e,L=oi(N,o);let P=w;if(L)P=l!==null&&n.length>0?n:w;else{const O=h.map(C=>C.rootSymbol).sort();oi(N,O)&&(P=ol(h,l,w),p(Za(P,e.quotes,e.instruments)),r(P),i(P.slice(0).sort()))}const F=Za(P,e.quotes,e.instruments);if(h.length!==F.length)p(F);else for(let O=0;O<F.length;O++)F[O].rootSymbol!==h[O].rootSymbol&&p(F)},[e.currentScanSymbols,e.currentScanSymbolsAlphaSort,e.quotes,e.instruments]);const g=w=>{u(w)};B.useEffect(()=>{e.setColumns(d.filter(w=>w!=="rootSymbol"))},[d,e.setColumns]);const S=Nr((w,N)=>(L,P)=>{const{rootSymbol:F}=P.row;return{tabIndex:0,symbol:F,columns:N===void 0?[]:N}},(w,N=[])=>w+N.join()),T=w=>{const{currentScanSymbols:N,quotes:L,instruments:P}=e,F=ol(h,w,N),O=Za(F,L,P);g7(w),p(O),c(w),r(F),i(F.slice(0).sort())},y=()=>{const w=zx.filter(N=>!d.includes(N));return Dm(w)},b=w=>`scan-${w.rootSymbol}`,E=()=>{const w=["rootSymbol",...j1];g(w)},v=Nr(w=>({onDragEnd:g,getCancelMessage:pm,getMoveMessage:hm,availableColumns:w,onColumnsReset:E}),w=>w.map(N=>N).join()),D=w=>s(w);return a.jsxs(a.Fragment,{children:[a.jsx(Vu,{customizableTableName:ko.Scans,topOffset:0,isOpen:t,onClose:()=>D(!1)}),a.jsx(mb,{data:h,tableId:Jqe,querySelector:'[data-testid="scans-content"]',getTrProps:S(e.selectedSymbol,d),canDragColumns:!0,draggableColumnsSettings:v(y()),columns:d,getRowId:b,TrComponent:Zqe,sortingRule:l,onSortingChange:T,setIsCustomizationMenuOpen:D,analyticsActionTable:"scans"})]})},tKe=e=>({setColumns(t){e(Ll(ko.Scans,t))}}),sKe=x(vqe,e=>e.valueSeq().toArray()),nKe=e=>{const t=Ib(e),s=Aqe(e),n=sKe(e);return{selectedSymbol:qg(e),quotes:n,columns:e.columns.scans,instruments:th(e),currentScanSymbols:t,currentScanSymbolsAlphaSort:s}},rKe=se(nKe,tKe)(eKe),oKe=A.div`
  width: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
`,aKe=A.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  height: 100%;
  overflow: auto;
  padding: ${({theme:e})=>e.space.medium};
`,u2=A.span`
  color: ${({theme:{colors:e}})=>e.text.primary};
  background-color: ${({theme:{colors:e}})=>e.background.secondary};
  border-radius: ${({theme:e})=>e.shape.borderRadius.secondary}px
    ${({theme:e})=>e.shape.borderRadius.secondary}px 0px 0px;
  height: 40px;
  font-size: ${({theme:e})=>e.fontSizes.large};
  padding: ${({theme:e})=>`${e.space.xSmall} ${e.space.small}`};
`,iKe=A(rKe)`
  top: 0;
`,lKe=A(tt)`
  justify-content: center;
  width: 133px;
  margin-left: ${({theme:e})=>`${e.space.medium}`};
`,cKe=A(Be)`
  justify-content: center;
  padding: ${({theme:e})=>`${e.space.large} ${e.space.none}`};

  ${tt} {
    padding: ${({theme:e})=>`${e.space.xxxSmall} ${e.space.large}`};
  }
`,dKe=A.div``,uKe=A.button`
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 50px;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  color: ${({theme:{colors:e}})=>e.action.focus};
`,hKe=A.div`
  margin-top: 20px;
  border: ${({theme:{shape:e}})=>`${e.borderWidth.primary}px solid}`};
  background-color: ${({theme:e})=>e.colors.background.primary};
  border-color: ${({theme:{colors:e}})=>e.border.primary};
  border-radius: ${({theme:{shape:e}})=>e.borderRadius.primary}px;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  position: absolute;
  text-align: center;
  padding: 5px;
  width: 100%;
  right: 0;
  overflow: hidden;
  text-overflow: ellipsis;

  & > span {
    color: ${({theme:{colors:e}})=>e.text.active};
  }
`,pKe=A(_n)`
  ${Wn} {
    display: flex;
    align-items: center;
    margin-right: 0;
    padding: 1px ${({theme:{space:e}})=>e.xxxSmall};
  }
`,mKe=A.input`
  border: none;
  background: ${({theme:{colors:e}})=>e.background.secondary};
  padding: 5px 50px 5px 5px;
  font-size: ${({theme:e})=>e.fontSizes.medium};
  color: ${({theme:{colors:e}})=>e.text.primary};

  border: ${({theme:{shape:e}})=>`${e.borderWidth.primary}px solid}`};
  border-color: ${({theme:{colors:e}})=>e.border.primary};
  border-radius: ${({theme:{shape:e}})=>e.borderRadius.primary}px;

  :focus {
    border-color: ${({theme:{colors:e}})=>e.action.focus};
  }
`,gKe=A.form`
  margin-top: 20px;
  position: absolute;
  right: 0;
`,SKe=A.div`
  z-index: 1;
  position: relative;
`,fKe=A(u2)`
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
  display: flex;
`,TKe=A.div`
  margin-top: ${({theme:e})=>`${e.space.large}`};
`,yKe=A.div`
  display: flex;
  margin-top: ${({theme:e})=>`${e.space.medium}`};
  margin-bottom: ${({theme:e})=>`${e.space.medium}`};
  border-bottom: ${({theme:e})=>`${e.space.xxxSmall}`} solid
    ${({theme:e})=>`${e.colors.divider.primary}`};
  padding-bottom: ${({theme:e})=>`${e.space.xSmall}`};
  padding-left: ${({theme:e})=>`${e.space.xSmall}`};
`,KI=A.button`
  position: relative;
  margin-right: ${({theme:e})=>`${e.space.medium}`};
`,zI=A.div`
  position: absolute;
  border-bottom: ${({theme:e})=>`${e.space.xxSmall}`} solid
    ${({theme:e})=>`${e.colors.action.focus}`};
  height: ${({theme:e})=>`${e.space.xxSmall}`};
  width: 100%;
  padding-bottom: ${({theme:e})=>`${e.space.xSmall}`};
  left: 0;
  top: 92%;
`,XI="Scans",CKe=e=>{const{selectedScanFilters:t,prevSavedScanFilters:s,scansWatchlists:n,scanFilterMenu:r,setScanFilterMenu:o,setSelectedScanFilters:i,getScanFilters:l,scanInWatchlistId:c,scanInWatchlistIdDropdown:d,previousScanInWatchlistIdDropdownRef:u,setScanInWatchlistIdDropdown:h,setWatchlistToScanIn:p,hasUnSupportedFilters:m,setHasUnSupportedFilters:g,isFilterEdited:S,isSavedFilter:T,setIsFilterEdited:y,scanFilterQueryName:b,setScanFilterQueryName:E,setFilterFromSaved:v,scansQuotesRequestId:D,getFundamentalFilters:w}=e,N=B.useRef(null),[L,P]=j.useState(b),[F,O]=j.useState(!1),[H,C]=j.useState(!1),M=j.useRef(null),[q,W]=j.useState([...t]),z=_e=>{P(_e.currentTarget.value)},re=_e=>{_e.key===we.Esc&&(O(!1),P(""))},ae=WL(L),Me=_e=>{T&&v(!1),y(!0),u.current=d,h(bd[_e])},he=_e=>{_e.preventDefault(),le()};B.useEffect(()=>{F&&N.current&&N.current.focus(),b&&P(b),T&&W([...t])},[F,b,t]),Eb(()=>{C(!1)},H?2e3:void 0);const U=()=>{O(!0),H&&C(!1)},Se=Ar(),be=Tn(r2),le=()=>{if(!ae)return;O(!1),C(!0),E(L),y(!1);const _e=Py(t),ht=TD(_e,be);Se(wme({queryName:L,scanInWatchlist:d,filterMode:cy.STOCKS,watchlistType:d2.STOCK_HACKER,allGroupFilters:ht})),Se(Eme([...t]))};$a(M,()=>{O(!1)}),B.useEffect(()=>{h(c)},[c]);const We=_e=>{const ht=t.filter(kt=>kt.field!==_e);ht.length?(y(!0),v(!1)):(E(""),P(""),y(!1)),i(ht)},He=(_e,ht)=>{let kt=!1;const yt=t.map(jt=>_e===jt.field?((ht[Xi.MAX]!==jt.high||ht[Xi.MIN]!==jt.low)&&(kt=!0),{...jt,high:ht[Xi.MAX],low:ht[Xi.MIN]}):jt);kt&&(y(!0),T&&v(!1)),i(yt)},Dt=()=>{i([]),W([]),g(!1),E(""),P(""),y(!1),h(bd[qn.ALL_STOCKS]),p(bd[qn.ALL_STOCKS])},Jt=_e=>{o(_e)},ve=(_e,ht)=>{l(_e,ht),w(t),v(!0),y(!1)},Ue=B.useMemo(()=>JSON.stringify(s)!==JSON.stringify(t)&&JSON.stringify(t)!==JSON.stringify(q)||d!==c,[s,q,d,t]),ft=Dme(d);return a.jsxs(dKe,{children:[a.jsxs(fKe,{children:[a.jsxs(Be,{children:[a.jsx(ot,{"data-testid":"filter-header-text",i18nOptions:{namespace:XI},children:t.length>1?Kl.filters:Kl.filter}),a.jsx(XT,{"data-testid":"selected-filter-count",className:"circled-number--margin-left",children:t.length})]}),a.jsxs(SKe,{children:[a.jsx("button",{className:Pe.secondary,"data-testid":"save-query","aria-label":"save scan query",disabled:t.length===0,onClick:U,children:__("Save Query")}),F&&a.jsxs(gKe,{ref:M,"data-testid":"save-query-form",onSubmit:he,children:[a.jsx(mKe,{ref:N,value:L,onChange:z,placeholder:__("Type a name",{namespace:"Scans"}),onKeyDown:_e=>{re(_e)},"data-testid":"save-scan-query-input"}),ae&&a.jsx(uKe,{"data-testid":"scan-query-save-button",type:"submit",onClick:le,children:__("Save")})]}),H&&a.jsxs(hKe,{role:"alert","data-testid":"scan-saved-toast",children:[__("Saved as ",{namespace:"Scans"}),a.jsx("span",{children:L})]})]})]}),a.jsxs(yKe,{children:[a.jsxs(KI,{onClick:()=>Jt(Yr.ACTIVE),"data-testid":"active-scan-button",children:[__("Active",{namespace:"Scans"}),r===Yr.ACTIVE&&a.jsx(zI,{})]}),a.jsxs(KI,{onClick:()=>Jt(Yr.SAVED),"data-testid":"saved-scan-button",children:[`${__("Saved",{namespace:"Scans"})} (${(n==null?void 0:n.length)||0})`,r===Yr.SAVED&&a.jsx(zI,{})]})]}),r===Yr.ACTIVE&&m&&a.jsx(tN,{margin:{top:0,bottom:20,left:0,right:0},message:"One or more filters in this scan are not available to edit and will not be included when the scan is run"}),r===Yr.ACTIVE&&a.jsxs(a.Fragment,{children:[a.jsxs(Fqe,{children:[t.length>0&&b&&a.jsxs(i2,{children:[a.jsx(l2,{type:Y.Scans}),a.jsxs(a2,{"data-testid":"scan-filter-query-name",children:[b," ",S&&Ue&&!T&&a.jsx("span",{children:"*"})]})]}),a.jsx(pKe,{placement:"bottom-start",values:yE,onListItemClick:Me,getListItemKey:_e=>`${bd[_e]}`,renderListItemContent:_e=>__(_e,{namespace:"Scans"}),selectedItemIndex:yE.indexOf(ft),renderAnchorButtonContent:_e=>a.jsxs(a.Fragment,{children:[a.jsx(ot,{fontWeight:"normal",fontSize:it.space.medium,mr:2,color:"text.disabled",children:__("Scan In:",{namespace:"Scans"})}),a.jsx($T,{children:__(ft,{namespace:"Scans"})}),a.jsx(X,{type:Y.ArrowDropDownAlt,width:8,height:5,viewBox:"9 10 6 6",dataTestId:"arrow-dropdown-icon"})]}),"data-testid":"scan-in-watchlist-dropdown"}),t.length>0&&a.jsx(ds,{textAlign:"right",children:a.jsx(tt,{mt:5,mb:5,variant:"link",onClick:Dt,"data-testid":"reset-btn",children:a.jsx(ot,{"aria-label":Kl.reset,i18nOptions:{namespace:XI},children:Kl.reset})})})]}),t.map(_e=>a.jsx(qqe,{handleRemoveFilter:()=>We(_e==null?void 0:_e.field),scanFilter:_e,handleParamsChange:ht=>He(_e==null?void 0:_e.field,ht)},"selected_filter_"+(_e==null?void 0:_e.field)))]}),r===Yr.SAVED&&a.jsx(TKe,{"data-testid":"saved-scans","aria-label":"Saved Scans",children:n.map(_e=>a.jsx(Kqe,{scanWatchList:_e,getScanFilters:ve,scansQuotesRequestId:D},_e.id))})]})},bKe={setWatchlistToScanIn:mD},EKe=se(null,bKe)(CKe),AKe=e=>{const{getScansResult:t,getScanFilters:s,scanInWatchlistId:n,result:r,prevScanFilters:o,prevSavedScanFilters:i,setPrevScanFilters:l,isSidebarOpened:c,isPortfolioOpened:d,getLiveSupportModalContent:u,scanFilterMenu:h,setScanFilterMenu:p,scansWatchlists:m,scanFilters:g,resetScanFilters:S,hasUnSupportedFilters:T,setHasUnSupportedFilters:y,scanFilterParameters:b,scanFilterQueryName:E,setScanFilterQueryName:v}=e,D=Ar(),[w,N]=B.useState(!1),[L,P]=B.useState(!1),[F,O]=B.useState(""),[H,C]=Lo(sn.SELECTED_SCAN_FILTERS,Rme,[]),[M,q]=j.useState(!1),[W,z]=j.useState(!1),re=8,[ae,Me]=j.useState(n),he=B.useRef(ae),U=j.useRef(F);U.current=F;const Se=B.useRef(null),be=()=>{const ve=`scansQuotes-${Date.now()}`;return O(ve),ve};j.useEffect(()=>{P(!1);const ve=()=>{sl(ts.request)({requestId:be(),symbols:r,callback:Ue=>{D(fme(Ue))}})};r.length&&(F!==""?Ks(ts.request)(F,te.QUOTES,ve):ve())},[r,D]),j.useEffect(()=>{g&&g.length>0&&(H.splice(0,H.length),C([]),setTimeout(()=>{C(g),S()},250))},[g]),Cn(()=>(p(Yr.ACTIVE),bS(H,D),()=>{Ks(ts.request)(U.current,te.QUOTES)}));const le=ve=>{bS(ve,D)},We=ve=>{const Ue=ve.type?ni.FUNDAMENTAL:ni.STOCK;H.push({field:ve.field,type:Ue,name:ve.name}),q(!1),C(H),N(!1),ve.type===ni.FUNDAMENTAL&&bS(H,D)},He=ve=>{P(!0),l([...ve]);const Ue=Py(ve),ft=TD(Ue,b);he.current=ae,t({watchlistId:ae,matchAllFilters:ft,sort:{field:SR.SYMBOL,direction:fR.ASCENDING},filterMode:cy.STOCKS,limit:yle});const _e=ve.map(ht=>ht.field);Ye({category:Ve.Scans,action:Le.ScanRun,label:_e})},Dt=H.length>0,Jt=r.length!==0&&JSON.stringify(o)===JSON.stringify(H)&&he.current===ae||!Dt;return a.jsxs(oKe,{"data-testid":"scans-page",children:[a.jsx(Mqe,{isSidebarOpened:c,isPortfolioOpened:d,isFilterMenuOpen:w,setIsFilterMenuOpen:()=>N(!1),addFilters:We,selectedScanFilters:H,filterButtonRef:Se}),a.jsxs(aKe,{"data-testid":"scans-content",children:[a.jsx(Yg,{dataTestId:"scans-header",title:__("Scans",{namespace:"Scans"}),icon:a.jsx(X,{type:Y.Scans,viewBox:"2 2 20 20",dataTestId:"scans-icon"}),padding:`0 0 ${it.space.medium} 0`}),a.jsx(EKe,{scanInWatchlistId:n,scanInWatchlistIdDropdown:ae,previousScanInWatchlistIdDropdownRef:he,setScanInWatchlistIdDropdown:Me,selectedScanFilters:H,prevSavedScanFilters:i,scanFilterMenu:h,hasUnSupportedFilters:T,setHasUnSupportedFilters:y,getScanFilters:s,setScanFilterMenu:p,setSelectedScanFilters:ve=>C(ve),scansWatchlists:m,isFilterEdited:W,setIsFilterEdited:z,scanFilterQueryName:E,setScanFilterQueryName:v,setFilterFromSaved:q,isSavedFilter:M,scansQuotesRequestId:F,getFundamentalFilters:le}),h===Yr.ACTIVE&&a.jsxs(a.Fragment,{children:[a.jsxs(cKe,{mb:Dt?4:0,children:[a.jsx("button",{className:Pe.secondary,disabled:H.length===re,"data-testid":"add-filter-button",onClick:()=>N(!0),ref:Se,children:__("Add a Filter",{namespace:"Scans"})}),a.jsx(lKe,{disabled:Jt,className:"primary review","data-testid":"scan-button",onClick:()=>{He(H)},"aria-label":"Scan for the results",children:__("Scan",{namespace:"Scans"})})]}),a.jsx(u2,{"data-testid":"scans-results-header",children:`${r.length} ${__("Results",{namespace:"Scans"})}`}),L?a.jsx("div",{"data-testid":"scans-loader",className:"loader"},"loader"):r.length>0&&a.jsx("div",{"data-testid":"scans-table",children:a.jsx(iKe,{})})]}),h===Yr.SAVED&&!(m!=null&&m.length)&&a.jsx(ot,{as:"div",textAlign:"center",i18nOptions:{namespace:"Scans"},children:"You do not have any saved scans"})]}),u&&u()]})},vKe={getScansResult:Tme,getScanFilters:Cme,resetScanFilters:Ime,setPrevScanFilters:bme,setScanFilterMenu:SD,setHasUnSupportedFilters:gD,setScanFilterQueryName:fD},IKe=e=>({result:Ib(e),scanInWatchlistId:Iqe(e),prevScanFilters:yqe(e),isSidebarOpened:K1(e),isPortfolioOpened:$m(e),scanFilterMenu:bqe(e),scanFilters:Eqe(e),scansWatchlists:uSe(e),hasUnSupportedFilters:xqe(e),scanFilterParameters:r2(e),scanFilterQueryName:wqe(e),prevSavedScanFilters:Cqe(e)}),h2=se(IKe,vKe)(AKe),pd=(e,t)=>{switch(e){case Sr.maximized:return a.jsx(Dl,{className:"support-chat-modal",onCloseClick:t,children:a.jsx(gm,{})});case Sr.minimized:return a.jsx(gm,{});default:return null}},QT=({setShowCharts:e})=>a.jsxs(F$e,{"data-testid":"charts-header",children:[a.jsx(H$e,{children:__("Charts")}),a.jsx(Fk,{setShowCharts:e})]}),xKe=e=>{const{selectedSymbol:t,setIsMobileView:s,activePage:n,liveSupportChatWindow:r,closeLiveSupportChatWindow:o,chartSelectedSymbol:i,numCharts:l,showCharts:c,setShowCharts:d}=e;switch(B.useEffect(()=>(s(!0),()=>{s(!1)}),[s]),n){case ge.Trade:return t!==null?a.jsxs("div",{className:"trade-page",children:[a.jsx(vt,{children:a.jsx("div",{id:"sticky-quotes"})}),a.jsxs(vt,{children:[a.jsx(YM,{symbol:t})," "]}),a.jsxs(vt,{children:[a.jsx(fm,{symbol:t})," "]}),a.jsx(fr,{children:a.jsxs(vt,{children:[a.jsx(UT,{symbol:t,isBidAsk:!0})," "]})}),a.jsx(mc,{children:a.jsx(vt,{children:pd(r,o)})})]}):null;case ge.Charts:return a.jsxs(qM,{children:[a.jsx(xCe,{children:l>1&&a.jsx(vt,{children:a.jsx(QT,{setShowCharts:d})})}),a.jsx(fr,{children:a.jsx(vt,{children:a.jsx(QT,{setShowCharts:d})})}),a.jsx("div",{id:"sticky-quotes"}),a.jsx(vt,{children:a.jsx(KM,{showCharts:c,setShowCharts:d})}),a.jsx(vt,{children:i&&a.jsx(fm,{symbol:i})}),Aae(n,l)&&t!==null&&a.jsx(fr,{children:a.jsx(vt,{children:a.jsx(UT,{symbol:t,isBidAsk:!0})})}),a.jsx(mc,{children:a.jsxs(vt,{children:[pd(r,o)," "]})})]});case ge.Watchlist:return a.jsx(vt,{children:a.jsx(t2,{getLiveSupportModalContent:()=>pd(r,o)})});case ge.Scans:return a.jsx(vt,{children:a.jsx(h2,{getLiveSupportModalContent:()=>pd(r,o)})});default:return a.jsx(vt,{children:a.jsx(e2,{activePage:n,getLiveSupportModalContent:()=>pd(r,o)})})}},wKe=e=>({activePage:ms(e),numCharts:hs(e).size}),OKe=e=>({setIsMobileView:t=>e(u9(t))}),RKe=se(wKe,OKe)(xKe),DKe=63,LKe=A.nav`
  min-width: ${DKe}px;
  background-color: ${({theme:e})=>e.colors.background.secondary};
  border-right: 1px solid ${({theme:e})=>e.colors.divider.primary};
  box-shadow: 2px 4px 4px ${({theme:e})=>e.colors.boxShadow.primary};
  z-index: 11;
`,Yh=A.div`
  display: flex;
  justify-content: center;
  width: 100%;
  border-bottom: 1px solid ${({theme:e})=>e.colors.divider.primary};
`,qh=A(tt)`
  flex-direction: column;
  padding: ${({theme:e})=>e.space.medium} 0px;
  ${({theme:e,isActive:t})=>t&&`color: ${e.colors.action.focus}
    `}
`,Kh=A.span`
  font-size: ${({theme:e})=>e.fontSizes.small};
  font-weight: normal;
  margin-top: ${({theme:e})=>e.space.xxSmall};
  line-height: ${({theme:e})=>e.space.medium};
`,_Ke=A.div`
  margin-top: auto;
`,NKe=({activePage:e,openSection:t,tradeSymbol:s})=>{const n=e===ge.Positions||e===ge.Transactions,r=e===ge.Trade,o=e===ge.Charts,i=e===ge.Scans;return a.jsx(LKe,{"aria-label":"Sidebar Navigation","data-testid":"sidebar-navigation",children:a.jsxs(Be,{flexDirection:"column",alignItems:"center",height:"100%",children:[a.jsx(Yh,{children:a.jsxs(qh,{onClick:()=>t(ge.Positions),isActive:n,"aria-expanded":n,"aria-label":`${__("Positions Button")} ${n?"Selected":""}`,"data-testid":"positions-page-button",children:[a.jsx(X,{type:Y.Positions,dataTestId:"position-icon",isActive:n}),a.jsx(Kh,{children:__("Positions")})]})}),a.jsx(Yh,{children:a.jsxs(qh,{isActive:r,onClick:()=>!r&&t(ge.Trade,s),"aria-expanded":r,"aria-label":`${__("Trade Button")} ${r?"Selected":""}`,"data-testid":"trade-page-button",children:[a.jsx(X,{type:Y.Trade,dataTestId:"trade-icon",isActive:r}),a.jsx(Kh,{children:__("Trade")})]})}),a.jsx(Yh,{children:a.jsxs(qh,{isActive:o,onClick:()=>!o&&t(ge.Charts),"aria-expanded":o,"aria-label":`${__("Charts Button")} ${o?"Selected":""}`,"data-testid":"charts-page-button",children:[a.jsx(X,{type:Y.Charts,dataTestId:"chart-icon",isActive:o}),a.jsx(Kh,{children:__("Charts")})]})}),a.jsx(Yh,{children:a.jsxs(qh,{isActive:i,onClick:()=>!i&&t(ge.Scans),"aria-expanded":i,"aria-label":`${__("Scans Button")} ${i?"Selected":""}`,"data-testid":"scans-page-button",children:[a.jsx(X,{type:Y.Scans,viewBox:"2 2 20 20",dataTestId:"scans-icon",isActive:i}),a.jsx(Kh,{children:__("Scans",{namespace:"Scans"})})]})}),a.jsx(_Ke,{children:a.jsx(Lk,{})})]})})},PKe=e=>({activePage:ms(e),tradeSymbol:Bp(e)}),kKe={[ge.Positions]:Le.PositionsPageOpened,[ge.Trade]:Le.TradePageOpened,[ge.Charts]:Le.ChartsPageOpened,[ge.Scans]:Le.ScansPageOpened},MKe=e=>({openSection(t,s){e(ws(t,s));const n=kKe[t];n&&Ye({category:Ve.SidebarNavigation,action:n})}}),$Ke=Ln.withConsumer()(se(PKe,MKe)(NKe));class jKe extends j.PureComponent{render(){const{watchlistExpanded:t}=this.props;return a.jsxs("section",{className:t?"left-pane__watchlist-expanded":"left-pane","data-testid":"left-pane",children:[!t&&a.jsx(Dk,{}),a.jsx(t2,{})]})}}const BKe=e=>({watchlistExpanded:e.layout.isWatchlistExpanded}),FKe=se(BKe)(jKe),HKe=({selectedSymbol:e,isSidebarOpened:t,toggleSidebar:s,isPortfolioOpened:n,togglePortfolio:r,activePage:o,chartSelectedSymbol:i,showCharts:l,setShowCharts:c,numCharts:d})=>{const u=o===ge.Positions||o===ge.Transactions,h=!u,p=un(h),m=!n&&p===!1&&h,g=()=>{if(o===ge.Scans)return a.jsx(h2,{});if(e!==null)switch(o){case ge.Trade:return a.jsxs("div",{"data-testid":"trade-page",className:"trade-page",children:[a.jsx("div",{id:"sticky-quotes"}),a.jsx(YM,{symbol:e}),a.jsx(fm,{symbol:e})]})}if(o===ge.Charts)return a.jsxs(qM,{className:"charts-page",children:[d>1&&a.jsx(QT,{setShowCharts:c}),a.jsx("div",{id:"sticky-quotes"}),a.jsx(KM,{showCharts:l,setShowCharts:c}),i&&a.jsx(fm,{symbol:i})]})};return a.jsxs(a.Fragment,{children:[a.jsx(vt,{children:a.jsx($Ke,{})}),a.jsx(jT,{alignment:mm.RIGHT,hideExpander:o===ge.Watchlist,isOpen:t,toggleOpen:s,className:"left-pane-divider",children:a.jsx(vt,{children:a.jsx(FKe,{})})}),a.jsx(vt,{children:g()}),a.jsx(jT,{alignment:mm.LEFT,hideExpander:u,isOpen:n,toggleOpen:r,className:"right-pane-divider",hideTransition:m,children:a.jsx(xc,{in:!u,classNames:{enter:"swoosh-in",exit:"swoosh-out"},timeout:cb,children:a.jsx(vt,{children:a.jsx(e2,{activePage:o})})})})]})},UKe=e=>({isWatchlistExpanded:e.layout.isWatchlistExpanded,activePage:ms(e),numCharts:hs(e).size}),VKe=se(UKe)(HKe),WKe=e=>({activePage:ms(e),tradingSystem:e.userSettings.tradingSystem,userSegment:xl(e),isLoggedIn:_c(e),showAlertBook:e.alerts.showAlertBook,userProfileWindow:e.userProperties.userProfileWindow,tradeSymbol:Bp(e)}),GKe=e=>({hideDrawerWindow:()=>e(En()),resetLayoutSection:()=>e(ws(ge.Positions)),openSection:(t,s)=>{Et.unstable_batchedUpdates(()=>{e(ws(t,s)),e(jR())})},onAlertsDrawerClose(){e(Pc(!1))},onProfileWindowClose(){e(Oa(Dn.none))},onBackToMainUserProfileWindow(){e(Oa(Dn.mainSettings))}}),YKe=Ln.withConsumer()(se(WKe,GKe)(Pk)),qKe=({isConnected:e})=>e?null:a.jsx("div",{className:"disconnect__notification","data-testid":"disconnect-notification",children:__("You are currently disconnected. Please refresh the page to reconnect.")}),KKe=e=>({isConnected:Ol(e)}),zKe=se(KKe)(qKe),XKe=e=>{const t=B.useCallback(()=>{e(document.hidden)},[e]);B.useEffect(()=>(typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t),()=>{typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t)}),[t])},QKe=e=>({requestedQuoteSymbols:sie(e),isConnected:Ol(e)}),ZKe=e=>({quotesReceived:t=>e(vD(t)),reconnectToPlaceOrder:()=>e(_Se())}),JKe=e=>{const{quotesReceived:t,requestedQuoteSymbols:s,isConnected:n,reconnectToPlaceOrder:r}=e,o=un(s),i=un(n);B.useEffect(()=>{n&&(!fs(o,s)||i!==n)&&sl(ts.request)({requestId:"generalQuotes",symbols:s,refreshRate:300,callback:t})},[t,s,o,n,i]),B.useEffect(()=>{n&&i!==n&&r()},[n,i]),Cn(()=>()=>{Ks(ts.request)("generalQuotes",te.QUOTES)});const l=j.useCallback(c=>{c?Ks(ts.request)("generalQuotes",te.QUOTES):sl(ts.request)({requestId:"generalQuotes",symbols:s,refreshRate:300,callback:t})},[s,t]);return XKe(l),null},eze=se(QKe,ZKe)(JKe),tze=({selectedSymbol:e,displaySymbol:t,selectedAccount:s,isSidebarOpened:n,isPortfolioOpened:r,toggleSidebar:o,togglePortfolio:i,liveSupportChatWindow:l,closeLiveSupportChatWindow:c,chartSelectedSymbol:d})=>{const u=B.useRef(null);B.useEffect(()=>{if(e!==null)LA(`${__(nN.trade)} ${t??e}`);else{const m=s!==null?`${s} ${__("Positions")}`:__("All Account Positions");LA(m)}},[t,s,e]);const[h,p]=j.useState(!0);return a.jsxs("div",{className:"home-page","data-testid":"home-page",children:[a.jsx(vt,{children:a.jsx(YKe,{containerRef:u})}),a.jsx(zKe,{}),a.jsx(eze,{}),a.jsxs("main",{"data-testid":"home-page-main-element",children:[a.jsxs(tc,{children:[a.jsx(VKe,{isSidebarOpened:n,toggleSidebar:o,selectedSymbol:e,isPortfolioOpened:r,togglePortfolio:i,chartSelectedSymbol:d,showCharts:h,setShowCharts:p}),a.jsx(B$e,{})]}),a.jsx(mc,{children:a.jsx(RKe,{selectedSymbol:e,liveSupportChatWindow:l,closeLiveSupportChatWindow:c,chartSelectedSymbol:d,showCharts:h,setShowCharts:p})})]}),a.jsx(K6e,{})]})},sze=x(W1,e=>{const{selected:t}=e;return t===void 0?null:t.description===""?`*${t.code.slice(-4)}`:t.description}),nze=x(mt,bn,(e,t)=>{var s;return e===null?null:((s=t.get(e))==null?void 0:s.displaySymbol)??null}),rze=e=>({selectedSymbol:El(e),displaySymbol:nze(e),selectedAccount:sze(e),isSidebarOpened:e.layout.isSidebarOpened,isPortfolioOpened:e.layout.isPortfolioOpened,liveSupportChatWindow:tg(e),chartSelectedSymbol:ty(e)}),oze=e=>({toggleSidebar:()=>e(c9()),togglePortfolio:()=>e(l9()),closeLiveSupportChatWindow:()=>e(hu(Sr.minimized))}),aze=se(rze,oze)(tze),ize=({disclosures:e,disclosureIds:t,requireExplicitConsent:s,acceptDisclosures:n,logout:r,theme:o,tradingSystem:i})=>{const l=s?"Accept All Disclosures":"Continue";return a.jsxs(Obe,{children:[a.jsx("header",{id:"main-header",children:a.jsx("img",{"data-testid":"logo",className:"logo image",src:Nk(i,o),alt:__("thinkorswim™")})}),a.jsxs(Rbe,{children:[a.jsx("h1",{children:__("Disclosures")}),e.map((c,d)=>a.jsx(Dbe,{children:a.jsx(lze,{itemIndex:d,...c})},d)),a.jsxs(Lbe,{children:[a.jsx("button",{"aria-label":__("Logout"),className:"secondary",onClick:r,children:__("Logout")}),a.jsx("button",{id:"btnAcceptDisclosures","aria-label":l,className:"secondary",onClick:()=>{n(t)},children:__(l)})]})]})]})},lze=e=>{const[t,s]=B.useState(!1),n=new Date(e.lastPublishDate);return a.jsxs(a.Fragment,{children:[a.jsx($o,{isExpandedDown:t,onClick:()=>{s(!t)},ariaLabel:"show disclosure",children:a.jsxs("div",{className:"expander-title",children:[a.jsx("div",{className:"disclosure-title","data-testid":"disclosure-title",children:e.title}),a.jsxs("div",{className:"disclosure-date-published","data-testid":"disclosure-date-published",children:[e.itemIndex===0&&a.jsx("span",{className:"date-published-text",children:__("Date Published")}),n.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})]})]},e.id)}),t&&a.jsx(ML,{children:a.jsx("div",{dangerouslySetInnerHTML:{__html:e.text.replace(/<\/?(html|pre)[^>]*>/gi,"")}})})]})},cze=hn(ize),dze=e=>{const{disclosureIds:t,disclosures:s,requireExplicitConsent:n,showNotification:r}=jL(e);return{disclosureIds:t,disclosures:s,requireExplicitConsent:n,showNotification:r,tradingSystem:e.userSettings.tradingSystem}},uze=e=>({acceptDisclosures:t=>{e(cpe(t))},logout:()=>{e(g1())}}),hze=se(dze,uze)(cze);class pze extends B.Component{render(){return a.jsx("div",{"data-testid":"loading-page",className:"Root",children:a.jsx("div",{"data-testid":"loader-text",className:"loader",children:__("Loading...")})})}}const md="browser-navigation",Hl={container:`${md}__container`,content:`${md}__content`,controls:{container:`${md}__controls-container`,item:`${md}__controls-item`,type:{link:`${md}__controls-item_type_link`}}};class mze extends j.PureComponent{constructor(s){super(s);R(this,"historyListener");R(this,"closeAlertPopup",()=>{this.setState({showLeaveAlert:!1}),us.push(us.location.pathname+us.location.search,this.state.firstLocation)});R(this,"leavePage",s=>{s!==void 0&&s.preventDefault(),this.props.logout()});R(this,"renderLeaveAlert",()=>a.jsxs(Dl,{onCloseClick:this.closeAlertPopup,children:[a.jsx(kL,{onCloseClick:this.closeAlertPopup,children:__("You are about to leave thinkorswim")}),a.jsxs("div",{className:Hl.container,children:[a.jsx("div",{className:Hl.content,children:__("Are you sure you wish to leave?")}),a.jsxs("div",{className:Hl.controls.container,children:[a.jsx("a",{href:"#",onClick:this.leavePage,className:Te("secondary","btn",Hl.controls.item,Hl.controls.type.link),children:__("Leave thinkorswim")}),a.jsx("button",{onClick:this.closeAlertPopup,className:Te("primary","review",Hl.controls.item),children:__("Keep swimming")})]})]})]}));this.state={showLeaveAlert:!1,firstLocation:void 0}}componentDidMount(){this.setState({firstLocation:us.location.key}),us.push(us.location.pathname+us.location.search,us.location.key),this.historyListener=us.listen(s=>{if([void 0,this.state.firstLocation].includes(s.key)){if(this.props.liveSupportChatId>pr.CHAT_NOT_STARTED){this.props.setIsCloseChatPromptShown(!0),us.push(us.location.pathname+us.location.search,this.state.firstLocation);return}this.setState({showLeaveAlert:!0})}})}componentWillUnmount(){this.historyListener&&this.historyListener()}render(){return this.state.showLeaveAlert?this.renderLeaveAlert():null}}const yf=["mousemove","keypress"];class gze extends j.PureComponent{constructor(){super(...arguments);R(this,"logoutTimeoutId",null);R(this,"logoutTimeout",()=>{const s=xj()??"55 Minutes";this.logoutTimeoutId!==null&&clearTimeout(this.logoutTimeoutId),this.logoutTimeoutId=setTimeout(()=>{this.props.logout()},F4[s])});R(this,"throttledLogoutTimeout",xa(this.logoutTimeout,3e4));R(this,"ssoTimeoutId",null);R(this,"ssoTimeout",()=>{var r,o;if(this.ssoTimeoutId!==null&&clearTimeout(this.ssoTimeoutId),this.props.sessionStorage.getItem(nc.SSO_EXPIRED)!==null)this.props.disableSso(),Object.values(yf).forEach(i=>{window.removeEventListener(i,this.throttledSsoTimeout)});else{const l=(((o=(r=this.props)==null?void 0:r.flags)==null?void 0:o[Cs.SSO_TIMEOUT])??zh[Cs.SSO_TIMEOUT])*60*1e3;this.ssoTimeoutId=setTimeout(()=>{this.props.disableSso(),Object.values(yf).forEach(c=>{window.removeEventListener(c,this.throttledSsoTimeout)})},l)}});R(this,"throttledSsoTimeout",xa(this.ssoTimeout,3e4));R(this,"getFavIcon",()=>this.props.sessionStorage.getItem("isGP")?"/tos-guest-pass-favicon.png":"/tos_logo_schw.png");R(this,"renderContent",()=>{const{sessionStorage:s,history:n,requireExplicitConsent:r,showNotification:o,disclosuresSnapshotReceived:i}=this.props;switch(this.props.sessionStatus){case tl.LoggedIn:if(s.setItem("clientVersion",this.props.clientVersion??Cx.Default),i)return!r&&!o?a.jsx(aze,{}):a.jsx(hze,{});break;case tl.Connecting:return a.jsx(pze,{});case tl.Disconnected:default:{const l=Ec(n.location.search),c=s.getItem("authToken"),d=s.getItem("token");return c===null&&d===null&&this.props.redirectToLms(l),a.jsx(a.Fragment,{})}}})}componentDidMount(){this.logoutTimeout(),this.ssoTimeout(),Object.values(yf).forEach(n=>{window.addEventListener(n,this.throttledLogoutTimeout),window.addEventListener(n,this.throttledSsoTimeout)}),this.props.loadStrike();const s=document.querySelector("link[rel~='icon']");s&&(s.href=this.getFavIcon())}render(){return a.jsxs(a.Fragment,{children:[a.jsx(mze,{logout:this.props.logout,liveSupportChatId:this.props.liveSupportChatId,setIsCloseChatPromptShown:this.props.setIsCloseChatPromptShown}),this.renderContent()]})}}const Sze=e=>{const{requireExplicitConsent:t,showNotification:s}=jL(e);return{sessionStatus:e.userSettings.status,requireExplicitConsent:t,showNotification:s,disclosuresSnapshotReceived:Ube(e),liveSupportChatId:ku(e)}},fze=e=>({redirectToLms:t=>{const s=bp(window.location.origin);e({type:f.RedirectToLms,params:t,clientVersion:s})},loadStrike:()=>{e(Mde())},logout:()=>{e(g1())},setIsCloseChatPromptShown:t=>{e(pc(t))},disableSso:()=>{e(Lw())}}),Tze=Ln.withConsumer()(se(Sze,fze)(gze));class yze extends j.PureComponent{render(){const{redirectToCafe:t,redirectToLms:s,history:n,sessionStorage:r}=this.props,o=Ec(n.location.search),i=r.getItem("authToken"),l=r.getItem("token");return i===null&&l===null?(o.isWebcast="true",s(o)):n.replace(ut.ROOT),null}}const Cze=e=>({redirectToCafe:t=>{const s=bp(window.location.origin);e({type:f.RedirectToCafe,params:t,clientVersion:s})},redirectToLms:t=>{const s=bp(window.location.origin);e({type:f.RedirectToLms,params:t,clientVersion:s})}}),bze=se(null,Cze)(yze);class Eze extends j.PureComponent{render(){const{redirectToLmsGuestPass:t,history:s,sessionStorage:n}=this.props,r=Ec(s.location.search),o=n.getItem("authToken"),i=n.getItem("token");return o===null&&i===null?t(r):s.replace(ut.ROOT),null}}const Aze=e=>({redirectToLmsGuestPass:t=>{const s=bp(window.location.origin);e({type:f.RedirectToLmsGuestPass,params:t,clientVersion:s})}}),vze=se(null,Aze)(Eze);class Ize extends j.Component{constructor(s){super(s);R(this,"render",()=>null);const{redirectToLms:n,exchangeLmsCodeForToken:r}=this.props,o=T1(s.history.location.search);if(Object.keys(o).length>0&&o.code!==void 0){const i=o.code;delete o.code,r(i,o)}else n()}}const xze=e=>({exchangeLmsCodeForToken:(t,s)=>{e({type:f.ExchangeLmsCodeForToken,code:t,params:s})},redirectToLms:()=>{e({type:f.RedirectToLms})}}),wze=se(null,xze)(Ize),Oze=({flags:e})=>(j.useEffect(()=>{let t;if(Js(Cs.IS_APPD_ADRUM_ENABLED,e))return Lr().then(s=>{var l;if(!((l=s==null?void 0:s.appDynamics)!=null&&l.isAdrumEnabled))return;const{appKey:n,adrumExtUrl:r,adrumScript:o,beaconUrl:i}=s.appDynamics;window["adrum-start-time"]=new Date().getTime(),window["adrum-config"]=Object.assign({},window["adrum-config"],{appKey:n,adrumExtUrlHttp:`http://${r}`,adrumExtUrlHttps:`https://${r}`,beaconUrlHttp:`http://${i}`,beaconUrlHttps:`https://${i}`,xd:{enable:!0},spa:{spa2:!0},xhr:{exclude:{urls:[{pattern:".*launchdarkly\\.com.*"},{pattern:".*(analytics|sstats)\\.tdameritrade\\.com.*"},{pattern:".*rcrsv\\.io.*"}]}}}),t=document.createElement("script"),t.src=`//${o}`,t.nonce=Mc(),document.body.appendChild(t)}),()=>{t&&document.body.removeChild(t)}},[]),null),Rze=Ln.withConsumer()(Oze),Dze=({ldClient:e,flags:t})=>(e&&L4(e),a.jsx(s3,{store:Xye,children:a.jsxs(Doe,{children:[a.jsx(n3,{history:us,children:a.jsxs(r3,{children:[a.jsx(Ni,{path:ut.OAUTH,exact:!0,render:()=>a.jsx(P4,{history:us})}),a.jsx(Ni,{path:ut.LOGIN,render:()=>a.jsx(Vie,{})}),a.jsx(Ni,{path:ut.ERROR,render:()=>a.jsx(B6e,{history:us})}),a.jsx(Ni,{path:ut.WEBCAST,render:()=>a.jsx(bze,{history:us,sessionStorage})}),Js(Cs.ENABLE_GUEST_PASS,t)&&a.jsx(Ni,{path:ut.GUEST_PASS_REDIRECT,render:()=>a.jsx(vze,{history:us,sessionStorage})}),a.jsx(Ni,{path:ut.SCHWAB_SSO,exact:!0,render:()=>a.jsx(wze,{history:us})}),a.jsx(Ni,{path:ut.ROOT,render:()=>a.jsx(Tze,{history:us,sessionStorage})})]})}),a.jsx(Rze,{})]})})),QI=Ln.withConsumer()(Dze),Lze="modulepreload",_ze=function(e){return"/"+e},ZI={},JI=function(t,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.all(s.map(l=>{if(l=_ze(l),l in ZI)return;ZI[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":Lze,c||(u.as="script",u.crossOrigin=""),u.href=l,i&&u.setAttribute("nonce",i),document.head.appendChild(u),c)return new Promise((h,p)=>{u.addEventListener("load",h),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};async function Nze(){if(!("ResizeObserver"in window)){const e=await JI(()=>import("./vendor-DRQX2kLY.js").then(t=>t.bH),__vite__mapDeps([]));window.ResizeObserver=e.ResizeObserver}"IntersectionObserver"in window||await JI(()=>import("./intersection-observer-B8y5T5rq.js"),__vite__mapDeps([]))}O4();Nze();ux();"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(e=>e.forEach(t=>t.unregister()));(async()=>{const e=await Lr(),t=o3(document.getElementById("root"));if(e.launchDarkly.isEnabled){const s=await Ln.getProvider(Ln.ProviderType.LAUNCH_DARKLY,{clientSideID:e.ldClientSideId,options:{sendEvents:e.launchDarkly.sendEvents,streaming:e.launchDarkly.streaming}});t.render(a.jsx(j.StrictMode,{children:a.jsx(s,{children:a.jsx(QI,{})})}))}else t.render(a.jsx(j.StrictMode,{children:a.jsx(QI,{})}))})();
